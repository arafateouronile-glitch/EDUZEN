module.exports=[918622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},556704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},832319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},324725,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},193695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},442315,(e,t,r)=>{"use strict";t.exports=e.r(918622)},981838,e=>{"use strict";let t=new class{isDevelopment=!1;isProduction=!0;sentryEnabled=!0;initSentry(){this.sentryEnabled}constructor(){this.sentryEnabled&&this.initSentry()}error(t,r,s){let n={message:t,error:r instanceof Error?{name:r.name,message:r.message,stack:r.stack}:r,context:s,timestamp:new Date().toISOString(),level:"error"};this.isProduction&&this.sentryEnabled,this.isProduction&&t.includes("[CRITICAL]")&&e.A(789044).then(({alertService:e})=>{let i=r instanceof Error?r:Error(t);e.sendCriticalError(i,{context:s,timestamp:n.timestamp}).catch(e=>{this.isDevelopment&&console.error("Failed to send critical alert:",e)})}).catch(()=>{}),(this.isDevelopment||!this.isProduction)&&console.error("âŒ [ERROR]",t,{error:r,context:s,timestamp:n.timestamp})}warn(e,t){let r={message:e,context:t,timestamp:new Date().toISOString(),level:"warn"};this.isDevelopment&&console.warn("âš ï¸ [WARN]",e,{context:t,timestamp:r.timestamp})}info(e,t){let r={message:e,context:t,timestamp:new Date().toISOString(),level:"info"};this.isDevelopment&&console.info("â„¹ï¸ [INFO]",e,{context:t,timestamp:r.timestamp})}debug(e,t){this.isDevelopment&&console.debug("ðŸ› [DEBUG]",e,{context:t,timestamp:new Date().toISOString()})}apiError(e,t,r){this.error(`API Error: ${e}`,t,{...r,endpoint:e})}mutationError(e,t,r){this.error(`Mutation Error: ${e}`,t,{...r,mutationName:e})}queryError(e,t,r){this.error(`Query Error: ${e}`,t,{...r,queryKey:e})}};function r(e){if(!e)return"[NO_EMAIL]";let[t,r]=e.split("@");return r?`${t.substring(0,2)}***@${r}`:"[INVALID_EMAIL]"}function s(e){return e?e.substring(0,8)+"...":"[NO_ID]"}function n(e){return e?{message:e.message,code:e.code,name:e.name,...{}}:{}}e.s(["logger",0,t,"maskEmail",()=>r,"maskId",()=>s,"sanitizeError",()=>n])},997953,(e,t,r)=>{"use strict";t.exports=e.r(442315).vendored["react-rsc"].ReactServerDOMTurbopackServer},500874,(e,t,r)=>{t.exports=e.x("buffer",()=>require("buffer"))},901900,e=>{"use strict";class t{store={};config;constructor(e){this.config={windowMs:e.windowMs,maxRequests:e.maxRequests,keyGenerator:e.keyGenerator||this.defaultKeyGenerator,skipSuccessfulRequests:e.skipSuccessfulRequests||!1,skipFailedRequests:e.skipFailedRequests||!1},setInterval(()=>this.cleanup(),3e5)}defaultKeyGenerator(e){let t=e.headers.get("x-forwarded-for"),r=e.headers.get("x-real-ip"),s=t?.split(",")[0]||r||"unknown",n=new URL(e.url);return`${s}:${n.pathname}`}async check(e){let t=this.config.keyGenerator(e),r=Date.now();this.store[t]&&this.store[t].resetTime<r&&delete this.store[t],this.store[t]||(this.store[t]={count:0,resetTime:r+this.config.windowMs});let s=this.store[t];s.resetTime<r&&(s.count=0,s.resetTime=r+this.config.windowMs);let n=s.count<this.config.maxRequests;return n&&s.count++,{allowed:n,remaining:Math.max(0,this.config.maxRequests-s.count),resetTime:s.resetTime}}async decrement(e){if(!this.config.skipSuccessfulRequests)return;let t=this.config.keyGenerator(e),r=this.store[t];r&&r.count>0&&r.count--}async decrementOnFailure(e){if(!this.config.skipFailedRequests)return;let t=this.config.keyGenerator(e),r=this.store[t];r&&r.count>0&&r.count--}cleanup(){let e=Date.now();Object.keys(this.store).forEach(t=>{this.store[t].resetTime<e&&delete this.store[t]})}reset(e){delete this.store[e]}resetAll(){this.store={}}}let r=new t({windowMs:6e4,maxRequests:100}),s=new t({windowMs:9e5,maxRequests:5,skipSuccessfulRequests:!0}),n=new t({windowMs:6e4,maxRequests:50}),i=new t({windowMs:6e4,maxRequests:10});async function a(e,t,r){let s=await t.check(e);if(!s.allowed){var n,i;return n=s.remaining,i=s.resetTime,new Response(JSON.stringify({error:"Too many requests",message:"Vous avez dÃ©passÃ© la limite de requÃªtes. Veuillez rÃ©essayer plus tard."}),{status:429,headers:{"Content-Type":"application/json","X-RateLimit-Remaining":n.toString(),"X-RateLimit-Reset":new Date(i).toISOString(),"Retry-After":Math.ceil((i-Date.now())/1e3).toString()}})}try{let n=await r(e);return n.ok?await t.decrement(e):await t.decrementOnFailure(e),n.headers.set("X-RateLimit-Remaining",s.remaining.toString()),n.headers.set("X-RateLimit-Reset",new Date(s.resetTime).toISOString()),n}catch(r){throw await t.decrementOnFailure(e),r}}e.s(["authRateLimiter",0,s,"generalRateLimiter",0,r,"mutationRateLimiter",0,n,"uploadRateLimiter",0,i,"withRateLimit",()=>a])},338992,e=>{"use strict";let t=new class{async blobToBase64(e){return new Promise((t,r)=>{let s=new FileReader;s.onloadend=()=>{t(s.result.split(",")[1])},s.onerror=r,s.readAsDataURL(e)})}async sendEmail(e){try{let t=e.attachments?await Promise.all(e.attachments.map(async e=>{let t;if(e.content instanceof Blob)t=await this.blobToBase64(e.content);else if(e.content instanceof ArrayBuffer){let r=new Blob([e.content],{type:e.contentType});t=await this.blobToBase64(r)}else t=e.content;return{filename:e.filename,content:t,contentType:e.contentType}})):void 0,r=await fetch("/api/email/send",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({to:e.to,subject:e.subject,html:e.html,text:e.text,attachments:t,cc:e.cc,bcc:e.bcc,replyTo:e.replyTo})});if(!r.ok){let e=await r.json();throw Error(e.message||"Erreur lors de l'envoi de l'email")}let s=await r.json();return{success:!0,message:s.message||"Email envoyÃ© avec succÃ¨s"}}catch(e){throw Error(e instanceof Error?e.message:"Erreur lors de l'envoi de l'email")}}async sendDocument(e,t,r,s,n,i){return this.sendEmail({to:e,subject:t,html:n,text:i,attachments:[{filename:s,content:r,contentType:"application/pdf"}]})}async sendMultipleDocuments(e,t,r,s,n){return this.sendEmail({to:e,subject:t,html:s,text:n,attachments:r.map(e=>({filename:e.filename,content:e.blob,contentType:"application/pdf"}))})}};e.s(["emailService",0,t])},10061,e=>e.a(async(t,r)=>{try{let t=await e.y("puppeteer-582bc9288a971b4a");e.n(t),r()}catch(e){r(e)}},!0),97205,e=>{"use strict";e.i(901900),e.s([])},789044,e=>{e.v(t=>Promise.all(["server/chunks/lib_services_alert_service_ts_a3118548._.js"].map(t=>e.l(t))).then(()=>t(737492)))},74166,e=>{e.v(t=>Promise.all(["server/chunks/_db7d6d15._.js"].map(t=>e.l(t))).then(()=>t(89660)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__97a7b083._.js.map