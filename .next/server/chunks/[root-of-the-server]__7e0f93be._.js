module.exports=[918622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},556704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},832319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},324725,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},193695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},442315,(e,t,r)=>{"use strict";t.exports=e.r(918622)},981838,e=>{"use strict";let t=new class{isDevelopment=!1;isProduction=!0;sentryEnabled=!0;initSentry(){this.sentryEnabled}constructor(){this.sentryEnabled&&this.initSentry()}error(t,r,a){let i={message:t,error:r instanceof Error?{name:r.name,message:r.message,stack:r.stack}:r,context:a,timestamp:new Date().toISOString(),level:"error"};this.isProduction&&this.sentryEnabled,this.isProduction&&t.includes("[CRITICAL]")&&e.A(789044).then(({alertService:e})=>{let s=r instanceof Error?r:Error(t);e.sendCriticalError(s,{context:a,timestamp:i.timestamp}).catch(e=>{this.isDevelopment&&console.error("Failed to send critical alert:",e)})}).catch(()=>{}),(this.isDevelopment||!this.isProduction)&&console.error("âŒ [ERROR]",t,{error:r,context:a,timestamp:i.timestamp})}warn(e,t){let r={message:e,context:t,timestamp:new Date().toISOString(),level:"warn"};this.isDevelopment&&console.warn("âš ï¸ [WARN]",e,{context:t,timestamp:r.timestamp})}info(e,t){let r={message:e,context:t,timestamp:new Date().toISOString(),level:"info"};this.isDevelopment&&console.info("â„¹ï¸ [INFO]",e,{context:t,timestamp:r.timestamp})}debug(e,t){this.isDevelopment&&console.debug("ðŸ› [DEBUG]",e,{context:t,timestamp:new Date().toISOString()})}apiError(e,t,r){this.error(`API Error: ${e}`,t,{...r,endpoint:e})}mutationError(e,t,r){this.error(`Mutation Error: ${e}`,t,{...r,mutationName:e})}queryError(e,t,r){this.error(`Query Error: ${e}`,t,{...r,queryKey:e})}};function r(e){if(!e)return"[NO_EMAIL]";let[t,r]=e.split("@");return r?`${t.substring(0,2)}***@${r}`:"[INVALID_EMAIL]"}function a(e){return e?e.substring(0,8)+"...":"[NO_ID]"}function i(e){return e?{message:e.message,code:e.code,name:e.name,...{}}:{}}e.s(["logger",0,t,"maskEmail",()=>r,"maskId",()=>a,"sanitizeError",()=>i])},997953,(e,t,r)=>{"use strict";t.exports=e.r(442315).vendored["react-rsc"].ReactServerDOMTurbopackServer},458515,e=>{"use strict";e.s(["createClient",()=>t]);let t=(0,e.i(997953).registerClientReference)(function(){throw Error("Attempted to call createClient() from the server but createClient is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/lib/supabase/client.ts <module evaluation>","createClient")},565963,e=>{"use strict";e.s(["createClient",()=>t]);let t=(0,e.i(997953).registerClientReference)(function(){throw Error("Attempted to call createClient() from the server but createClient is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/lib/supabase/client.ts","createClient")},703755,e=>{"use strict";e.i(458515);var t=e.i(565963);e.n(t)},729,e=>{"use strict";var t=e.i(703755);let r=new class{supabase;constructor(e){this.supabase=e||(0,t.createClient)()}async getCategories(e,t=!0){let r=this.supabase.from("documentation_categories").select("*").order("order_index",{ascending:!0});e?r=r.or(`organization_id.eq.${e},is_public.eq.true`):t&&(r=r.eq("is_public",!0));let{data:a,error:i}=await r;if(i)throw i;return a}async getCategoryBySlug(e,t){let r=this.supabase.from("documentation_categories").select("*").eq("slug",e).single();r=t?r.or(`organization_id.eq.${t},is_public.eq.true`):r.eq("is_public",!0);let{data:a,error:i}=await r;if(i)throw i;return a}async createCategory(e){let{data:t,error:r}=await this.supabase.from("documentation_categories").insert(e).select().single();if(r)throw r;return t}async updateCategory(e,t){let{data:r,error:a}=await this.supabase.from("documentation_categories").update(t).eq("id",e).select().single();if(a)throw a;return r}async deleteCategory(e){let{error:t}=await this.supabase.from("documentation_categories").delete().eq("id",e);if(t)throw t}async getArticlesByCategory(e,t="published"){let{data:r,error:a}=await this.supabase.from("documentation_articles").select("*, author:users(id, full_name, email)").eq("category_id",e).eq("status",t).order("order_index",{ascending:!0}).order("published_at",{ascending:!1});if(a)throw a;return r}async getArticleBySlug(e,t){let{data:r,error:a}=await this.supabase.from("documentation_articles").select(`
        *,
        category:documentation_categories(*),
        sections:documentation_sections(*),
        author:users(id, full_name, email)
      `).eq("slug",e).eq("category.slug",t).eq("status","published").single();if(a)throw a;return r&&await this.supabase.rpc("increment_article_view_count",{article_uuid:r.id}),r}async searchArticles(e,t){let r=this.supabase.from("documentation_articles").select("*, category:documentation_categories(*), author:users(id, full_name)").eq("status","published").or(`title.ilike.%${e}%,content.ilike.%${e}%,excerpt.ilike.%${e}%`);r=t?r.or(`organization_id.eq.${t},category.is_public.eq.true`):r.eq("category.is_public",!0);let{data:a,error:i}=await r.order("view_count",{ascending:!1}).limit(50);if(i)throw i;return a}async getPopularArticles(e=10,t){let r=this.supabase.from("documentation_articles").select("*, category:documentation_categories(*), author:users(id, full_name)").eq("status","published").order("view_count",{ascending:!1}).limit(e);r=t?r.or(`organization_id.eq.${t},category.is_public.eq.true`):r.eq("category.is_public",!0);let{data:a,error:i}=await r;if(i)throw i;return a}async getRecentArticles(e=10,t){let r=this.supabase.from("documentation_articles").select("*, category:documentation_categories(*), author:users(id, full_name)").eq("status","published").order("published_at",{ascending:!1}).limit(e);r=t?r.or(`organization_id.eq.${t},category.is_public.eq.true`):r.eq("category.is_public",!0);let{data:a,error:i}=await r;if(i)throw i;return a}async getFeaturedArticles(e=5,t){let r=this.supabase.from("documentation_articles").select("*, category:documentation_categories(*), author:users(id, full_name)").eq("status","published").eq("is_featured",!0).order("published_at",{ascending:!1}).limit(e);r=t?r.or(`organization_id.eq.${t},category.is_public.eq.true`):r.eq("category.is_public",!0);let{data:a,error:i}=await r;if(i)throw i;return a}async createArticle(e){let{data:t,error:r}=await this.supabase.from("documentation_articles").insert(e).select().single();if(r)throw r;return t}async updateArticle(e,t){let{data:r,error:a}=await this.supabase.from("documentation_articles").update(t).eq("id",e).select().single();if(a)throw a;return r}async deleteArticle(e){let{error:t}=await this.supabase.from("documentation_articles").delete().eq("id",e);if(t)throw t}async getArticleSections(e){let{data:t,error:r}=await this.supabase.from("documentation_sections").select("*").eq("article_id",e).order("order_index",{ascending:!0});if(r)throw r;return t}async createSection(e){let{data:t,error:r}=await this.supabase.from("documentation_sections").insert(e).select().single();if(r)throw r;return t}async updateSection(e,t){let{data:r,error:a}=await this.supabase.from("documentation_sections").update(t).eq("id",e).select().single();if(a)throw a;return r}async deleteSection(e){let{error:t}=await this.supabase.from("documentation_sections").delete().eq("id",e);if(t)throw t}async getUserFavorites(e){let{data:t,error:r}=await this.supabase.from("documentation_favorites").select("*, article:documentation_articles(*, category:documentation_categories(*))").eq("user_id",e).order("created_at",{ascending:!1});if(r)throw r;return t}async addFavorite(e,t){let{data:r,error:a}=await this.supabase.from("documentation_favorites").insert({user_id:e,article_id:t}).select().single();if(a)throw a;return r}async removeFavorite(e,t){let{error:r}=await this.supabase.from("documentation_favorites").delete().eq("user_id",e).eq("article_id",t);if(r)throw r}async isFavorite(e,t){let{data:r,error:a}=await this.supabase.from("documentation_favorites").select("id").eq("user_id",e).eq("article_id",t).maybeSingle();if(a)throw a;return!!r}async getUserNotes(e,t){let{data:r,error:a}=await this.supabase.from("documentation_notes").select("*").eq("user_id",e).eq("article_id",t).order("created_at",{ascending:!1}).maybeSingle();if(a)throw a;return r}async upsertNote(e,t,r){let a=await this.getUserNotes(e,t);if(a){let{data:e,error:t}=await this.supabase.from("documentation_notes").update({content:r}).eq("id",a.id).select().single();if(t)throw t;return e}{let{data:a,error:i}=await this.supabase.from("documentation_notes").insert({user_id:e,article_id:t,content:r}).select().single();if(i)throw i;return a}}async deleteNote(e,t){let{error:r}=await this.supabase.from("documentation_notes").delete().eq("user_id",e).eq("article_id",t);if(r)throw r}async createFeedback(e){let{data:t,error:r}=await this.supabase.from("documentation_feedback").insert(e).select().single();if(r)throw r;return t}async getArticleFeedback(e){let{data:t,error:r}=await this.supabase.from("documentation_feedback").select("*, user:users(id, full_name)").eq("article_id",e).order("created_at",{ascending:!1});if(r)throw r;return t}async getArticleFeedbackStats(e){let{data:t,error:r}=await this.supabase.from("documentation_feedback").select("rating, is_helpful").eq("article_id",e);if(r)throw r;let a={total:t.length,averageRating:0,helpfulCount:0,notHelpfulCount:0,ratings:{1:0,2:0,3:0,4:0,5:0}};if(t.length>0){let e=t.filter(e=>e.rating).map(e=>e.rating);e.length>0&&(a.averageRating=e.reduce((e,t)=>e+t,0)/e.length),t.forEach(e=>{e.rating&&a.ratings[e.rating]++,!0===e.is_helpful&&a.helpfulCount++,!1===e.is_helpful&&a.notHelpfulCount++})}return a}async recordSearch(e,t,r){let{error:a}=await this.supabase.from("documentation_search_history").insert({user_id:e,query:t,results_count:r});if(a)throw a}async getSearchHistory(e,t=10){let{data:r,error:a}=await this.supabase.from("documentation_search_history").select("*").eq("user_id",e).order("created_at",{ascending:!1}).limit(t);if(a)throw a;return r}async clearSearchHistory(e){let{error:t}=await this.supabase.from("documentation_search_history").delete().eq("user_id",e);if(t)throw t}};e.s(["documentationService",0,r])},528444,e=>{"use strict";var t=e.i(747909),r=e.i(174017),a=e.i(996250),i=e.i(759756),s=e.i(561916),n=e.i(174677),o=e.i(869741),l=e.i(316795),c=e.i(487718),u=e.i(995169),d=e.i(47587),p=e.i(666012),h=e.i(570101),m=e.i(626937),g=e.i(10372),f=e.i(193695);e.i(52474);var _=e.i(257297),w=e.i(89171),b=e.i(89660),y=e.i(729),v=e.i(981838);async function q(e){try{let t=await (0,b.createClient)(),{data:{user:r}}=await t.auth.getUser();if(!r)return w.NextResponse.json({error:"Non authentifiÃ©"},{status:401});let a=e.nextUrl.searchParams,i=a.get("q"),s=a.get("organization_id")||void 0;if(!i)return w.NextResponse.json({error:"ParamÃ¨tre q requis"},{status:400});let n=await y.documentationService.searchArticles(i,s);return await y.documentationService.recordSearch(r.id,i,n.length),w.NextResponse.json({success:!0,results:n,count:n.length})}catch(e){return v.logger.error("Documentation Search - Error searching",e,{error:(0,v.sanitizeError)(e)}),w.NextResponse.json({success:!1,error:e.message||"Erreur lors de la recherche"},{status:500})}}e.s(["GET",()=>q],236952);var x=e.i(236952);let R=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/documentation/search/route",pathname:"/api/documentation/search",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/app/api/documentation/search/route.ts",nextConfigOutput:"",userland:x}),{workAsyncStorage:E,workUnitAsyncStorage:C,serverHooks:A}=R;function S(){return(0,a.patchFetch)({workAsyncStorage:E,workUnitAsyncStorage:C})}async function k(e,t,a){R.isDev&&(0,i.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let w="/api/documentation/search/route";w=w.replace(/\/index$/,"")||"/";let b=await R.prepare(e,t,{srcPage:w,multiZoneDraftMode:!1});if(!b)return t.statusCode=400,t.end("Bad Request"),null==a.waitUntil||a.waitUntil.call(a,Promise.resolve()),null;let{buildId:y,params:v,nextConfig:q,parsedUrl:x,isDraftMode:E,prerenderManifest:C,routerServerContext:A,isOnDemandRevalidate:S,revalidateOnlyGenerated:k,resolvedPathname:N,clientReferenceManifest:P,serverActionsManifest:I}=b,O=(0,o.normalizeAppPath)(w),D=!!(C.dynamicRoutes[O]||C.routes[N]),T=async()=>((null==A?void 0:A.render404)?await A.render404(e,t,x,!1):t.end("This page could not be found"),null);if(D&&!E){let e=!!C.routes[N],t=C.dynamicRoutes[O];if(t&&!1===t.fallback&&!e){if(q.experimental.adapterPath)return await T();throw new f.NoFallbackError}}let j=null;!D||R.isDev||E||(j="/index"===(j=N)?"/":j);let $=!0===R.isDev||!D,U=D&&!$;I&&P&&(0,n.setManifestsSingleton)({page:w,clientReferenceManifest:P,serverActionsManifest:I});let H=e.method||"GET",F=(0,s.getTracer)(),M=F.getActiveScopeSpan(),z={params:v,prerenderManifest:C,renderOpts:{experimental:{authInterrupts:!!q.experimental.authInterrupts},cacheComponents:!!q.cacheComponents,supportsDynamicResponse:$,incrementalCache:(0,i.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:q.cacheLife,waitUntil:a.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,a,i)=>R.onRequestError(e,t,a,i,A)},sharedContext:{buildId:y}},B=new l.NodeNextRequest(e),L=new l.NodeNextResponse(t),K=c.NextRequestAdapter.fromNodeNextRequest(B,(0,c.signalFromNodeResponse)(t));try{let n=async e=>R.handle(K,z).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=F.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==u.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let a=r.get("next.route");if(a){let t=`${H} ${a}`;e.setAttributes({"next.route":a,"http.route":a,"next.span_name":t}),e.updateName(t)}else e.updateName(`${H} ${w}`)}),o=!!(0,i.getRequestMeta)(e,"minimalMode"),l=async i=>{var s,l;let c=async({previousCacheEntry:r})=>{try{if(!o&&S&&k&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let s=await n(i);e.fetchMetrics=z.renderOpts.fetchMetrics;let l=z.renderOpts.pendingWaitUntil;l&&a.waitUntil&&(a.waitUntil(l),l=void 0);let c=z.renderOpts.collectedTags;if(!D)return await (0,p.sendResponse)(B,L,s,z.renderOpts.pendingWaitUntil),null;{let e=await s.blob(),t=(0,h.toNodeOutgoingHttpHeaders)(s.headers);c&&(t[g.NEXT_CACHE_TAGS_HEADER]=c),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==z.renderOpts.collectedRevalidate&&!(z.renderOpts.collectedRevalidate>=g.INFINITE_CACHE)&&z.renderOpts.collectedRevalidate,a=void 0===z.renderOpts.collectedExpire||z.renderOpts.collectedExpire>=g.INFINITE_CACHE?void 0:z.renderOpts.collectedExpire;return{value:{kind:_.CachedRouteKind.APP_ROUTE,status:s.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:a}}}}catch(t){throw(null==r?void 0:r.isStale)&&await R.onRequestError(e,t,{routerKind:"App Router",routePath:w,routeType:"route",revalidateReason:(0,d.getRevalidateReason)({isStaticGeneration:U,isOnDemandRevalidate:S})},!1,A),t}},u=await R.handleResponse({req:e,nextConfig:q,cacheKey:j,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:C,isRoutePPREnabled:!1,isOnDemandRevalidate:S,revalidateOnlyGenerated:k,responseGenerator:c,waitUntil:a.waitUntil,isMinimalMode:o});if(!D)return null;if((null==u||null==(s=u.value)?void 0:s.kind)!==_.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==u||null==(l=u.value)?void 0:l.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});o||t.setHeader("x-nextjs-cache",S?"REVALIDATED":u.isMiss?"MISS":u.isStale?"STALE":"HIT"),E&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let f=(0,h.fromNodeOutgoingHttpHeaders)(u.value.headers);return o&&D||f.delete(g.NEXT_CACHE_TAGS_HEADER),!u.cacheControl||t.getHeader("Cache-Control")||f.get("Cache-Control")||f.set("Cache-Control",(0,m.getCacheControlHeader)(u.cacheControl)),await (0,p.sendResponse)(B,L,new Response(u.value.body,{headers:f,status:u.value.status||200})),null};M?await l(M):await F.withPropagatedContext(e.headers,()=>F.trace(u.BaseServerSpan.handleRequest,{spanName:`${H} ${w}`,kind:s.SpanKind.SERVER,attributes:{"http.method":H,"http.target":e.url}},l))}catch(t){if(t instanceof f.NoFallbackError||await R.onRequestError(e,t,{routerKind:"App Router",routePath:O,routeType:"route",revalidateReason:(0,d.getRevalidateReason)({isStaticGeneration:U,isOnDemandRevalidate:S})},!1,A),D)throw t;return await (0,p.sendResponse)(B,L,new Response(null,{status:500})),null}}e.s(["handler",()=>k,"patchFetch",()=>S,"routeModule",()=>R,"serverHooks",()=>A,"workAsyncStorage",()=>E,"workUnitAsyncStorage",()=>C],528444)},789044,e=>{e.v(t=>Promise.all(["server/chunks/lib_services_64af2586._.js"].map(t=>e.l(t))).then(()=>t(737492)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__7e0f93be._.js.map