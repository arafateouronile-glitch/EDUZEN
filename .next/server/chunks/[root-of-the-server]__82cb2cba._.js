module.exports=[222260,(e,t,r)=>{"use strict";t.exports=e.r(442315).vendored["react-rsc"].ReactJsxRuntime},299018,e=>e.a(async(t,r)=>{try{let t=await e.y("@react-pdf/renderer-5f716e9bc7d68b8a");e.n(t),r()}catch(e){r(e)}},!0),77445,e=>e.a(async(t,r)=>{try{var n=e.i(222260),a=e.i(299018),o=e.i(10061),i=e.i(162036);e.i(494438),e.i(738654),e.i(498741),e.i(861353),e.i(573172),e.i(953530);var l=t([a,o]);async function s(e,t,r,n){try{let a=e.content?.html||"",o=e.header?.content||"",i=e.footer?.content||"";if(a||o||i)try{return await c(e,t,r,n)}catch(t){console.error("Erreur Puppeteer:",t);let e=t instanceof Error?t.message:String(t);throw Error(`Impossible de g\xe9n\xe9rer le PDF avec Puppeteer: ${e}. Veuillez v\xe9rifier que Chromium est correctement install\xe9.`)}return await g(e,t)}catch(t){console.error("Erreur lors de la génération PDF:",t);let e=t instanceof Error?t.message:String(t);throw Error(`Erreur lors de la g\xe9n\xe9ration PDF: ${e}`)}}async function c(e,t,r,n){let a,l=await (0,i.generateHTML)(e,t,r,n),s=l.html;try{a=await o.default.launch({headless:!0,args:["--no-sandbox","--disable-setuid-sandbox","--disable-dev-shm-usage","--disable-accelerated-2d-canvas","--no-first-run","--no-zygote","--single-process","--disable-gpu"],executablePath:process.env.PUPPETEER_EXECUTABLE_PATH||void 0})}catch(r){console.error("Erreur lors du lancement de Puppeteer:",r);let e=r instanceof Error?r.message:String(r),t=r instanceof Error?r.stack:void 0;throw console.error("Stack trace Puppeteer:",t),Error(`Impossible de lancer Puppeteer. Erreur: ${e}. Veuillez v\xe9rifier que Chromium est correctement install\xe9.`)}try{let t=await a.newPage(),r=e.page_size||"A4";await t.setContent(s,{waitUntil:"networkidle0"});let n=await t.pdf({format:"A4"===r?"A4":"Letter"===r?"Letter":"A4",printBackground:!0,margin:{top:"0mm",right:"0mm",bottom:"0mm",left:"0mm"},preferCSSPageSize:!0}),o=new Blob([n],{type:"application/pdf"}),i=Math.max(1,Math.ceil(n.length/5e4));return{blob:o,pageCount:l.pageCount||i}}finally{await a.close()}}async function g(e,t){var r;let o,i,l,s=(o=e.header_enabled?e.header_height:0,i=e.footer_enabled?e.footer_height:0,l=e.margins||{top:20,right:20,bottom:20,left:20},a.StyleSheet.create({page:{padding:0,margin:0,fontFamily:"Helvetica"},header:{position:"absolute",top:0,left:0,right:0,height:o,backgroundColor:(r=e.header,r?.backgroundColor?"solid"===r.backgroundColor.type?r.backgroundColor.color||"#FFFFFF":r.backgroundColor.from||"#FFFFFF":"#FFFFFF"),paddingTop:10,paddingLeft:l.left,paddingRight:l.right,paddingBottom:10},body:{marginTop:o+l.top,marginBottom:i+l.bottom,marginLeft:l.left,marginRight:l.right,padding:10,minHeight:h(e)},footer:{position:"absolute",bottom:0,left:0,right:0,height:i,backgroundColor:e.footer?.backgroundColor||"#F9FAFB",paddingTop:10,paddingLeft:l.left,paddingRight:l.right,paddingBottom:10,borderTop:e.footer?.border?.top?.enabled?`${e.footer.border.top.width}px solid ${e.footer.border.top.color}`:"none"},element:{marginBottom:10},text:{fontSize:12,color:"#000000",lineHeight:1.5},textBold:{fontWeight:"bold"},textItalic:{fontStyle:"italic"},textCenter:{textAlign:"center"},textRight:{textAlign:"right"},pagination:{fontSize:9,color:"#4D4D4D",textAlign:"center"}})),c=function(e,t){let r=(e.content||{elements:[],pageSize:"A4",margins:{top:20,right:20,bottom:20,left:20}}).elements||[];if(0===r.length)return[[]];let n=h(e),a=[[]],o=0,i=0;return r.forEach(e=>{let r=function(e,t){let r=e.style?.fontSize||12,n=e.style?.lineHeight||1.5;switch(e.type){case"text":if(e.content){let a=p(e.content,t),o=Math.floor(500/(.6*r));return(Math.ceil(a.length/o)||1)*r*n+10}return r*n+10;case"image":return e.size?.height||100;case"table":return((e.tableData?.rows?.length||0)+1)*30+20;case"signature":return e.size?.height||80;case"qrcode":case"barcode":return e.size?.height||60;case"line":return 1;case"spacer":return e.size?.height||20;default:return 30}}(e,t);o+r>n&&o>0&&(a[++i]=[],o=0),a[i].push(e),o+=r+20}),a}(e,t);try{let r=(0,n.jsx)(()=>(0,n.jsx)(a.Document,{children:c.map((r,o)=>(0,n.jsxs)(a.Page,{size:e.page_size||"A4",style:s.page,children:[e.header_enabled&&e.header&&(0,n.jsx)(a.View,{style:s.header,fixed:!0,children:d(e.header.elements||[],t,s)}),(0,n.jsx)(a.View,{style:s.body,children:d(r,t,s)}),e.footer_enabled&&e.footer&&(0,n.jsxs)(a.View,{style:s.footer,fixed:!0,children:[e.footer?.pagination?.enabled&&(0,n.jsx)(a.Text,{style:[s.pagination,{textAlign:"left"===e.footer.pagination.position?"left":"right"===e.footer.pagination.position?"right":"center"}],render:({pageNumber:r,totalPages:n})=>p(e.footer.pagination?.format||"Page {numero_page} / {total_pages}",{...t,numero_page:r,total_pages:n}),fixed:!0}),d(e.footer.elements||[],{...t,numero_page:o+1,total_pages:c.length},s)]})]},o))}),{});return{blob:await (0,a.pdf)(r).toBlob(),pageCount:c.length}}catch(t){console.error("Erreur React-PDF:",t);let e=t instanceof Error?t.message:String(t);throw Error(`Erreur lors de la g\xe9n\xe9ration PDF avec React-PDF: ${e}`)}}function h(e){let t={A4:792,Letter:792,Legal:1008}[e.page_size||"A4"],r=e.header_enabled?e.header_height:0,n=e.footer_enabled?e.footer_height:0,a=e.margins||{top:20,right:20,bottom:20,left:20};return t-r-n-a.top-a.bottom-20}function d(e,t,r){return e.map((e,o)=>{switch(e.type){case"text":return(0,n.jsx)(a.View,{style:r.element,children:(0,n.jsx)(a.Text,{style:[r.text,e.style?.fontSize&&{fontSize:e.style.fontSize},e.style?.color&&{color:e.style.color},e.style?.fontWeight==="bold"&&r.textBold,e.style?.fontStyle==="italic"&&r.textItalic,e.style?.textAlign==="center"&&r.textCenter,e.style?.textAlign==="right"&&r.textRight],children:e.content?p(e.content,t):""})},e.id||o);case"image":return(0,n.jsx)(a.View,{style:r.element,children:(0,n.jsxs)(a.Text,{style:r.text,children:["[Image: ",e.source||"Non définie","]"]})},e.id||o);case"table":if(!e.tableData)return null;return(0,n.jsx)(a.View,{style:r.element,children:(0,n.jsxs)(a.Text,{style:r.text,children:["[Tableau: ",e.tableData.headers.length," colonnes]"]})},e.id||o);case"line":return(0,n.jsx)(a.View,{style:{height:e.style?.border?.width||1,backgroundColor:e.style?.color||"#000000",marginVertical:10}},e.id||o);case"spacer":return(0,n.jsx)(a.View,{style:{height:e.size?.height||20}},e.id||o);case"signature":return(0,n.jsx)(a.View,{style:r.element,children:(0,n.jsxs)(a.View,{style:{height:e.size?.height||80,width:e.size?.width||150,border:"1px solid #000000",padding:10},children:[e.label&&(0,n.jsx)(a.Text,{style:[r.text,{fontSize:10}],children:e.label}),(0,n.jsx)(a.Text,{style:[r.text,{fontSize:8,marginTop:30}],children:"Signature"})]})},e.id||o);case"qrcode":case"barcode":return(0,n.jsx)(a.View,{style:r.element,children:(0,n.jsxs)(a.Text,{style:r.text,children:["[","qrcode"===e.type?"QR Code":"Code-barres",": ",e.qrData||e.barcodeData||"Non défini","]"]})},e.id||o);default:return null}})}function p(e,t){let r=e;return Object.entries(t).forEach(([e,t])=>{let n=RegExp(`\\{${e}\\}`,"g");r=r.replace(n,String(t||""))}),r}[a,o]=l.then?(await l)():l,e.s(["generatePDF",()=>s]),r()}catch(e){r(e)}},!1),107497,e=>{"use strict";var t=e.i(15638),r=e.i(494438),n=e.i(738654),a=e.i(498741),o=e.i(861353),i=e.i(573172),l=e.i(953530),s=e.i(788734);async function c(e,r,n,a){var o,i,l,s;let c,u,f,m=e.margins||{top:20,right:20,bottom:20,left:20},b=0===(c=(e.content||{elements:[],pageSize:"A4",margins:{top:20,right:20,bottom:20,left:20}}).elements||[]).length?[[]]:[c],x=[];b.forEach((e,n)=>{e.forEach(e=>{let t=g(e,r);t&&(Array.isArray(t)?x.push(...t):x.push(t))}),n<b.length-1&&x.push(new t.Paragraph({children:[new t.PageBreak]}))});let y=new t.Document({sections:[{properties:{page:{size:{width:(o=e.page_size||"A4",(u={A4:11906,Letter:12240,Legal:12240})[o]||u.A4),height:(i=e.page_size||"A4",(f={A4:16838,Letter:15840,Legal:20160})[i]||f.A4)},margin:{top:d(m.top+(e.header_enabled?e.header_height:0)),right:d(m.right),bottom:d(m.bottom+(e.footer_enabled?e.footer_height:0)),left:d(m.left)}}},headers:{default:e.header_enabled&&e.header?new t.Header({children:h(e.header.elements||[],r).filter(e=>e instanceof t.Paragraph)}):void 0},children:x,footers:{default:e.footer_enabled&&e.footer?new t.Footer({children:[...e.footer.pagination?.enabled?[new t.Paragraph({alignment:p(e.footer.pagination.position),children:[new t.TextRun({text:(l=e.footer.pagination.format||"Page {numero_page} / {total_pages}",s=b.length,l.replace(/\{numero_page\}/g,"1").replace(/\{total_pages\}/g,String(s)))})],style:"footer"})]:[],...h(e.footer.elements||[],{...r,numero_page:1,total_pages:b.length}).filter(e=>e instanceof t.Paragraph)]}):void 0}}]});return{blob:await t.Packer.toBlob(y),pageCount:b.length}}function g(e,c){switch(e.type){case"text":var g,h;let d,u;return new t.Paragraph({children:[new t.TextRun({text:e.content?(g=e.content,h=c,d=(0,l.flattenVariables)(h),u=g,u=(0,o.processDynamicTables)(u,d),u=(0,n.processLoops)(u,d),u=(0,r.processConditionals)(u,d),u=(0,i.processElementVisibility)(u,d),u=(0,a.processCalculatedVariables)(u,d),u=(0,l.processNestedVariables)(u,d),u=(0,s.processDynamicHyperlinks)(u,d),Object.entries(d).forEach(([e,t])=>{let r=RegExp(`\\{${e}\\}`,"g");u=u.replace(r,String(t||""))}),u):"",bold:e.style?.fontWeight==="bold",italics:e.style?.fontStyle==="italic",color:e.style?.color?.replace("#","")||"000000",size:e.style?.fontSize?2*e.style.fontSize:24})],alignment:p(e.style?.textAlign),spacing:{after:200}});case"line":return new t.Paragraph({children:[new t.TextRun({text:"─".repeat(50),color:e.style?.color?.replace("#","")||"000000"})],spacing:{after:200}});case"spacer":return new t.Paragraph({text:"",spacing:{after:20*(e.size?.height||20)}});case"table":if(!e.tableData)return null;return new t.Paragraph({children:[new t.TextRun({text:`[Tableau: ${e.tableData.headers.join(", ")}]`})]});default:return null}}function h(e,t){let r=[];return e.forEach(e=>{let n=g(e,t);n&&(Array.isArray(n)?r.push(...n):r.push(n))}),r}function d(e){return Math.round(15*e)}function p(e){switch(e){case"center":return t.AlignmentType.CENTER;case"right":return t.AlignmentType.RIGHT;case"justify":return t.AlignmentType.JUSTIFIED;default:return t.AlignmentType.LEFT}}e.s(["generateDOCX",()=>c])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__82cb2cba._.js.map