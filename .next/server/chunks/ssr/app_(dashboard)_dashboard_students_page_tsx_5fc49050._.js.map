{"version":3,"sources":["../../../../app/%28dashboard%29/dashboard/students/page.tsx","../../../../components/ui/pagination.tsx","../../../../components/students/student-import-dialog.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useQuery } from '@tanstack/react-query'\nimport { useAuth } from '@/lib/hooks/use-auth'\nimport { studentService } from '@/lib/services/student.service'\nimport { createClient } from '@/lib/supabase/client'\nimport { Button } from '@/components/ui/button'\nimport { GlassCard } from '@/components/ui/glass-card'\nimport { BentoGrid, BentoCard } from '@/components/ui/bento-grid'\nimport { Plus, Search, Download, Filter, Mail, Phone, Calendar, Users, UserCheck, UserX, Sparkles, SlidersHorizontal, ArrowUpRight, Link as LinkIcon, Copy, Check, FileSpreadsheet, FileText, Upload } from 'lucide-react'\nimport Link from 'next/link'\nimport { cn } from '@/lib/utils'\nimport { exportData, prepareStudentsExport, type ExportFormat } from '@/lib/utils/export'\nimport { Pagination } from '@/components/ui/pagination'\nimport { useToast } from '@/components/ui/toast'\nimport { motion, AnimatePresence } from '@/components/ui/motion'\nimport { Avatar } from '@/components/ui/avatar'\nimport type { StudentWithRelations } from '@/lib/types/query-types'\nimport { useVocabulary } from '@/lib/hooks/use-vocabulary'\nimport { CardTitle } from '@/components/ui/card'\nimport { RoleGuard, ADMIN_ROLES } from '@/components/auth/role-guard'\nimport { SkeletonBentoGrid } from '@/components/ui/skeleton'\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from '@/components/ui/dropdown-menu'\nimport { StudentImportDialog } from '@/components/students/student-import-dialog'\n\nexport default function StudentsPage() {\n  return (\n    <RoleGuard allowedRoles={ADMIN_ROLES}>\n      <StudentsPageContent />\n    </RoleGuard>\n  )\n}\n\nfunction StudentsPageContent() {\n  const { user } = useAuth()\n  const supabase = createClient()\n  const { addToast } = useToast()\n  const vocab = useVocabulary()\n  const [search, setSearch] = useState('')\n  const [statusFilter, setStatusFilter] = useState<string>('all')\n  const [sessionFilter, setSessionFilter] = useState<string>('all')\n  const [showFilters, setShowFilters] = useState(false)\n  const [currentPage, setCurrentPage] = useState(1)\n  const [itemsPerPage, setItemsPerPage] = useState(12) // Réduit pour Bento Grid\n  const [copiedLinks, setCopiedLinks] = useState<Record<string, boolean>>({})\n  const [importDialogOpen, setImportDialogOpen] = useState(false)\n\n  // Récupérer les sessions pour le filtre\n  const { data: sessions } = useQuery({\n    queryKey: ['sessions-for-filter', user?.organization_id],\n    queryFn: async () => {\n      if (!user?.organization_id) return []\n      const { data, error } = await supabase\n        .from('sessions')\n        .select('id, name, start_date, formations!inner(id, name, organization_id, programs(id, name))')\n        .eq('formations.organization_id', user.organization_id)\n        .order('start_date', { ascending: false })\n      if (error) throw error\n      return data || []\n    },\n    enabled: !!user?.organization_id,\n  })\n\n  const { data: studentsData, isLoading } = useQuery({\n    queryKey: ['students', user?.organization_id, search, statusFilter, sessionFilter, currentPage],\n    queryFn: async () => {\n      if (!user?.organization_id) {\n        return { data: [], total: 0, page: 1, limit: itemsPerPage, totalPages: 0 }\n      }\n      \n      const result = await studentService.getAll(user.organization_id, {\n        search,\n        status: statusFilter !== 'all' ? (statusFilter as any) : undefined,\n        classId: sessionFilter !== 'all' ? sessionFilter : undefined,\n        page: currentPage,\n        limit: itemsPerPage,\n      })\n\n      return result\n    },\n    enabled: !!user?.organization_id,\n  })\n\n  // Pagination côté serveur\n  const students = studentsData?.data || []\n  const totalItems = studentsData?.total || 0\n  const totalPages = studentsData?.totalPages || 0\n  const paginatedStudents = students\n\n  // Réinitialiser à la page 1 quand les filtres changent\n  useEffect(() => {\n    setCurrentPage(1)\n  }, [search, statusFilter, sessionFilter])\n\n  // Calculer les statistiques (nécessite une requête séparée pour le total)\n  const { data: stats } = useQuery({\n    queryKey: ['students-stats', user?.organization_id],\n    queryFn: async () => {\n      if (!user?.organization_id) return null\n      \n      const [allResult, activeResult, inactiveResult] = await Promise.all([\n        studentService.getAll(user.organization_id, { limit: 1 }),\n        studentService.getAll(user.organization_id, { status: 'active', limit: 1 }),\n        studentService.getAll(user.organization_id, { status: 'inactive', limit: 1 }),\n      ])\n\n      return {\n        total: allResult.total || 0,\n        active: activeResult.total || 0,\n        inactive: inactiveResult.total || 0,\n      }\n    },\n    enabled: !!user?.organization_id,\n  })\n\n  const [exportFormat, setExportFormat] = useState<ExportFormat>('xlsx')\n\n  const handleExport = async (format: ExportFormat = 'xlsx') => {\n    if (!students || students.length === 0) {\n      addToast({\n        type: 'warning',\n        title: `Aucun ${vocab.student.toLowerCase()}`,\n        description: `Aucun ${vocab.student.toLowerCase()} à exporter.`,\n      })\n      return\n    }\n\n    try {\n      const exportDataPrepared = prepareStudentsExport(students as StudentWithRelations[])\n      await exportData(exportDataPrepared, {\n        filename: `eleves_${new Date().toISOString().split('T')[0]}`,\n        sheetName: vocab.students,\n        format,\n        entityType: 'students',\n        organizationId: user?.organization_id || undefined,\n        userId: user?.id,\n      })\n\n      addToast({\n        type: 'success',\n        title: 'Export réussi',\n        description: `${students.length} ${vocab.student.toLowerCase()}(s) exporté(s) en ${format.toUpperCase()} avec succès.`,\n      })\n    } catch (error) {\n      addToast({\n        type: 'error',\n        title: 'Erreur d\\'export',\n        description: error instanceof Error ? error.message : 'Une erreur est survenue lors de l\\'export.',\n      })\n    }\n  }\n\n  const containerVariants = {\n    hidden: { opacity: 0 },\n    visible: {\n      opacity: 1,\n      transition: { staggerChildren: 0.1 }\n    }\n  }\n\n  const itemVariants = {\n    hidden: { opacity: 0, y: 20 },\n    visible: {\n      opacity: 1,\n      y: 0,\n      transition: { duration: 0.5, ease: [0.16, 1, 0.3, 1] as const }\n    }\n  }\n\n  return (\n    <motion.div \n      className=\"space-y-8 pb-8 max-w-[1600px] mx-auto\"\n      variants={containerVariants}\n      initial=\"hidden\"\n      animate=\"visible\"\n    >\n      {/* Header Premium */}\n      <motion.div variants={itemVariants} className=\"flex flex-col md:flex-row items-start md:items-center justify-between gap-6\">\n        <div className=\"space-y-2\">\n          <div className=\"inline-flex items-center gap-3 mb-2\">\n            <div className=\"p-2.5 bg-gradient-to-br from-brand-blue to-brand-cyan rounded-xl shadow-lg\">\n              <Users className=\"h-7 w-7 text-white\" />\n            </div>\n            <div className=\"flex items-center gap-3\">\n              <h1 className=\"text-3xl lg:text-4xl font-bold bg-gradient-to-r from-brand-blue to-brand-cyan bg-clip-text text-transparent\">\n                {vocab.students}\n              </h1>\n              <span className=\"px-3 py-1 bg-gradient-to-r from-brand-blue-ghost to-brand-cyan-ghost text-brand-blue rounded-full text-sm font-medium border border-brand-blue/20\">\n                {totalItems} total\n              </span>\n            </div>\n          </div>\n          <p className=\"text-gray-600 text-sm lg:text-base ml-1\">\n            Gérez tous vos {vocab.students.toLowerCase()} et leurs informations\n          </p>\n        </div>\n\n        <div className=\"flex items-center gap-3\">\n          <DropdownMenu>\n            <DropdownMenuTrigger asChild>\n              <Button variant=\"outline\" className=\"hover:bg-brand-blue-ghost hover:border-brand-blue/30 hover:text-brand-blue transition-all\">\n                <Download className=\"mr-2 h-4 w-4\" />\n                Exporter\n              </Button>\n            </DropdownMenuTrigger>\n            <DropdownMenuContent align=\"end\" className=\"w-48\">\n              <DropdownMenuItem onClick={() => handleExport('xlsx')} className=\"cursor-pointer\">\n                <FileSpreadsheet className=\"mr-2 h-4 w-4 text-emerald-600\" />\n                <span>Excel (.xlsx)</span>\n              </DropdownMenuItem>\n              <DropdownMenuItem onClick={() => handleExport('csv')} className=\"cursor-pointer\">\n                <FileText className=\"mr-2 h-4 w-4 text-brand-blue\" />\n                <span>CSV (.csv)</span>\n              </DropdownMenuItem>\n            </DropdownMenuContent>\n          </DropdownMenu>\n          <Button\n            variant=\"outline\"\n            onClick={() => setImportDialogOpen(true)}\n            className=\"hover:bg-brand-cyan-ghost hover:border-brand-cyan/30 hover:text-brand-cyan transition-all\"\n          >\n            <Upload className=\"mr-2 h-4 w-4\" />\n            Importer\n          </Button>\n          <Link href=\"/dashboard/students/new\">\n            <Button className=\"bg-gradient-to-r from-brand-blue to-brand-cyan hover:from-brand-blue-dark hover:to-brand-cyan shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105\">\n              <Plus className=\"mr-2 h-4 w-4\" />\n              Nouveau {vocab.student}\n            </Button>\n          </Link>\n        </div>\n      </motion.div>\n\n      {/* Statistiques Premium */}\n      {stats && (\n        <BentoGrid columns={3} gap=\"md\">\n          {[\n            {\n              title: 'Total',\n              value: stats.total,\n              icon: Users,\n              color: 'text-brand-blue',\n              bg: 'bg-gradient-to-br from-brand-blue-ghost to-brand-blue-ghost/50',\n              borderColor: 'border-brand-blue/20',\n              desc: `Tous les ${vocab.students.toLowerCase()}`\n            },\n            {\n              title: 'Actifs',\n              value: stats.active,\n              icon: UserCheck,\n              color: 'text-brand-cyan',\n              bg: 'bg-gradient-to-br from-brand-cyan-ghost to-brand-cyan-ghost/50',\n              borderColor: 'border-brand-cyan/20',\n              desc: 'En cours de formation'\n            },\n            {\n              title: 'Inactifs',\n              value: stats.inactive,\n              icon: UserX,\n              color: 'text-gray-500',\n              bg: 'bg-gradient-to-br from-gray-50 to-gray-100',\n              borderColor: 'border-gray-200',\n              desc: 'Archives ou suspendus'\n            },\n          ].map((stat, index) => (\n            <BentoCard key={stat.title} span={1}>\n              <GlassCard\n                variant=\"premium\"\n                hoverable\n                className={cn(\"h-full p-6 border-2 transition-all duration-300\", stat.borderColor)}\n              >\n                <div className=\"flex items-center justify-between mb-4\">\n                  <div>\n                    <p className=\"text-sm font-semibold text-gray-900\">{stat.title}</p>\n                    <p className=\"text-xs text-gray-500 mt-1\">{stat.desc}</p>\n                  </div>\n                  <motion.div\n                    className={cn(\"p-3 rounded-xl transition-all duration-300 border\", stat.bg, stat.borderColor)}\n                    whileHover={{ scale: 1.1, rotate: 5 }}\n                  >\n                    <stat.icon className={cn(\"h-5 w-5\", stat.color)} />\n                  </motion.div>\n                </div>\n                <div className={cn(\"text-3xl font-bold tracking-tight\",\n                  index === 0 ? \"text-brand-blue\" :\n                  index === 1 ? \"text-brand-cyan\" :\n                  \"text-gray-600\")}>\n                  {stat.value}\n                </div>\n              </GlassCard>\n            </BentoCard>\n          ))}\n        </BentoGrid>\n      )}\n\n      {/* Barre de recherche et filtres */}\n      <motion.div variants={itemVariants}>\n        <GlassCard variant=\"default\" className=\"p-2 border-2 border-brand-blue/20 bg-gradient-to-br from-brand-blue-ghost/20 to-brand-cyan-ghost/20\">\n          <div className=\"flex flex-col md:flex-row gap-2\">\n            <div className=\"relative flex-1 group\">\n              <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-brand-blue group-focus-within:text-brand-cyan transition-colors\" />\n              <input\n                type=\"text\"\n                placeholder={`Rechercher un ${vocab.student.toLowerCase()}...`}\n                value={search}\n                onChange={(e) => setSearch(e.target.value)}\n                className=\"w-full pl-10 pr-4 py-2.5 rounded-lg bg-white border-2 border-brand-blue/20 focus:border-brand-blue focus:ring-4 focus:ring-brand-blue/10 transition-all outline-none text-sm\"\n              />\n            </div>\n\n            <Button\n              variant=\"ghost\"\n              onClick={() => setShowFilters(!showFilters)}\n              className={cn(\n                \"gap-2 transition-all\",\n                showFilters ? \"bg-gradient-to-r from-brand-blue-ghost to-brand-cyan-ghost text-brand-blue border-2 border-brand-blue/30\" : \"text-gray-600 hover:bg-brand-blue-ghost hover:text-brand-blue\"\n              )}\n            >\n              <SlidersHorizontal className=\"h-4 w-4\" />\n              Filtres\n              {(statusFilter !== 'all' || sessionFilter !== 'all') && (\n                <span className=\"w-5 h-5 bg-gradient-to-r from-brand-blue to-brand-cyan text-white text-[10px] font-bold flex items-center justify-center rounded-full ml-1\">\n                  !\n                </span>\n              )}\n            </Button>\n          </div>\n\n          <AnimatePresence>\n            {showFilters && (\n              <motion.div\n                initial={{ height: 0, opacity: 0 }}\n                animate={{ height: 'auto', opacity: 1 }}\n                exit={{ height: 0, opacity: 0 }}\n                className=\"overflow-hidden\"\n              >\n                <div className=\"p-4 grid grid-cols-1 md:grid-cols-2 gap-4 border-t border-brand-blue/20 mt-2\">\n                  <div className=\"space-y-1.5\">\n                    <label className=\"text-xs font-semibold text-brand-blue uppercase tracking-wider\">Statut</label>\n                    <select\n                      value={statusFilter}\n                      onChange={(e) => setStatusFilter(e.target.value)}\n                      className=\"w-full px-3 py-2 rounded-lg bg-white border-2 border-brand-blue/20 focus:border-brand-blue focus:ring-4 focus:ring-brand-blue/10 outline-none text-sm transition-all\"\n                    >\n                      <option value=\"all\">Tous les statuts</option>\n                      <option value=\"active\">Actif</option>\n                      <option value=\"inactive\">Inactif</option>\n                    </select>\n                  </div>\n                  <div className=\"space-y-1.5\">\n                    <label className=\"text-xs font-semibold text-brand-cyan uppercase tracking-wider\">Session</label>\n                    <select\n                      value={sessionFilter}\n                      onChange={(e) => setSessionFilter(e.target.value)}\n                      className=\"w-full px-3 py-2 rounded-lg bg-white border-2 border-brand-cyan/20 focus:border-brand-cyan focus:ring-4 focus:ring-brand-cyan/10 outline-none text-sm transition-all\"\n                    >\n                      <option value=\"all\">Toutes les sessions</option>\n                      {(sessions as any[])?.map((session) => (\n                        <option key={session.id} value={session.id}>\n                          {session.name}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                </div>\n              </motion.div>\n            )}\n          </AnimatePresence>\n        </GlassCard>\n      </motion.div>\n\n      {/* Liste des étudiants (Grid Layout) */}\n      <motion.div variants={itemVariants}>\n        {isLoading ? (\n          <SkeletonBentoGrid items={8} />\n        ) : paginatedStudents.length === 0 ? (\n          <GlassCard variant=\"default\" className=\"p-12 text-center border-2 border-brand-blue/20 bg-gradient-to-br from-brand-blue-ghost/30 to-brand-cyan-ghost/30\">\n            <div className=\"relative inline-block mb-6\">\n              <div className=\"absolute inset-0 flex items-center justify-center\">\n                <div className=\"w-24 h-24 bg-gradient-to-br from-brand-blue-ghost to-brand-cyan-ghost rounded-full opacity-50 blur-2xl\"></div>\n              </div>\n              <div className=\"relative p-6 bg-gradient-to-br from-brand-blue-ghost to-brand-cyan-ghost rounded-2xl inline-block\">\n                <Users className=\"h-16 w-16 mx-auto text-brand-blue\" />\n              </div>\n            </div>\n            <div className=\"space-y-2 mb-6\">\n              <h3 className=\"text-xl font-bold text-gray-900\">Aucun {vocab.student.toLowerCase()} trouvé</h3>\n              <p className=\"text-gray-600\">\n                {search || statusFilter !== 'all' || sessionFilter !== 'all'\n                  ? 'Essayez de modifier vos filtres de recherche.'\n                  : 'Commencez par ajouter votre premier élève.'}\n              </p>\n            </div>\n            {!search && statusFilter === 'all' && sessionFilter === 'all' && (\n              <Link href=\"/dashboard/students/new\">\n                <Button className=\"bg-gradient-to-r from-brand-blue to-brand-cyan hover:from-brand-blue-dark hover:to-brand-cyan shadow-md hover:shadow-lg transition-all\">\n                  <Plus className=\"mr-2 h-4 w-4\" />\n                  Ajouter un élève\n                </Button>\n              </Link>\n            )}\n          </GlassCard>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\">\n            <AnimatePresence mode=\"popLayout\">\n              {paginatedStudents.map((student, index) => {\n                const s = student as StudentWithRelations\n                return (\n                  <motion.div\n                    key={s.id}\n                    layout\n                    initial={{ opacity: 0, scale: 0.9 }}\n                    animate={{ opacity: 1, scale: 1 }}\n                    exit={{ opacity: 0, scale: 0.9 }}\n                    transition={{ delay: index * 0.05 }}\n                  >\n                    <GlassCard\n                      variant=\"default\"\n                      hoverable\n                      className=\"h-full p-5 group flex flex-col justify-between border-2 border-brand-blue/10 hover:border-brand-blue/30 bg-gradient-to-br from-white to-brand-blue-ghost/10 hover:shadow-lg transition-all duration-300\"\n                    >\n                      <div>\n                        <div className=\"flex items-start justify-between mb-4\">\n                          <Link href={`/dashboard/students/${s.id}`}>\n                            <motion.div whileHover={{ scale: 1.05 }} className=\"cursor-pointer relative\">\n                              <div className=\"absolute inset-0 bg-gradient-to-br from-brand-blue/20 to-brand-cyan/20 rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-opacity\" />\n                              <Avatar\n                                fallback={`${s.first_name || ''} ${s.last_name || ''}`}\n                                userId={s.id}\n                                size=\"lg\"\n                                variant=\"auto\"\n                                className=\"shadow-md rounded-2xl ring-2 ring-brand-blue/20 group-hover:ring-brand-blue/40 transition-all relative\"\n                              />\n                            </motion.div>\n                          </Link>\n                          <div className=\"flex items-center gap-1.5\">\n                            <Button\n                              variant=\"ghost\"\n                              size=\"icon\"\n                              className=\"h-8 w-8 hover:bg-brand-blue-ghost transition-all\"\n                              onClick={(e) => {\n                                e.stopPropagation()\n                                e.preventDefault()\n                                const accessLink = `${window.location.origin}/learner/access/${s.id}`\n                                navigator.clipboard.writeText(accessLink).then(() => {\n                                  setCopiedLinks(prev => ({ ...prev, [s.id]: true }))\n                                  addToast({\n                                    title: 'Lien copié',\n                                    description: `Lien d'accès pour ${s.first_name} ${s.last_name} copié`,\n                                    type: 'success',\n                                  })\n                                  setTimeout(() => {\n                                    setCopiedLinks(prev => {\n                                      const newState = { ...prev }\n                                      delete newState[s.id]\n                                      return newState\n                                    })\n                                  }, 2000)\n                                }).catch(() => {\n                                  addToast({\n                                    title: 'Erreur',\n                                    description: 'Impossible de copier le lien',\n                                    type: 'error',\n                                  })\n                                })\n                              }}\n                              title=\"Copier le lien d'accès\"\n                            >\n                              {copiedLinks[s.id] ? (\n                                <Check className=\"h-4 w-4 text-brand-cyan\" />\n                              ) : (\n                                <LinkIcon className=\"h-4 w-4 text-gray-400 group-hover:text-brand-blue\" />\n                              )}\n                            </Button>\n                            <span className={cn(\n                              'px-2.5 py-1 rounded-lg text-xs font-semibold border-2',\n                              s.status === 'active'\n                                ? 'bg-gradient-to-br from-brand-cyan-ghost to-brand-cyan-ghost/50 text-brand-cyan border-brand-cyan/30'\n                                : 'bg-gradient-to-br from-gray-50 to-gray-100 text-gray-600 border-gray-200'\n                            )}>\n                              {s.status === 'active' ? 'Actif' : 'Inactif'}\n                            </span>\n                          </div>\n                        </div>\n\n                        <Link href={`/dashboard/students/${s.id}`}>\n                          <div className=\"mb-4\">\n                            <h3 className=\"font-bold text-gray-900 truncate text-lg group-hover:text-brand-blue transition-colors\">\n                              {s.first_name} {s.last_name}\n                            </h3>\n                            <p className=\"text-sm text-gray-500 font-mono mt-1\">\n                              #{s.student_number || '---'}\n                            </p>\n                          </div>\n                        </Link>\n\n                        <div className=\"space-y-2.5 text-sm\">\n                          {s.email && (\n                            <div className=\"flex items-center gap-2 truncate group/email\">\n                              <div className=\"p-1.5 rounded-lg bg-brand-blue-ghost group-hover/email:bg-brand-blue/20 transition-colors\">\n                                <Mail className=\"h-3.5 w-3.5 flex-shrink-0 text-brand-blue\" />\n                              </div>\n                              <span className=\"truncate text-gray-600\">{s.email}</span>\n                            </div>\n                          )}\n                          {s.phone && (\n                            <div className=\"flex items-center gap-2 truncate group/phone\">\n                              <div className=\"p-1.5 rounded-lg bg-brand-cyan-ghost group-hover/phone:bg-brand-cyan/20 transition-colors\">\n                                <Phone className=\"h-3.5 w-3.5 flex-shrink-0 text-brand-cyan\" />\n                              </div>\n                              <span className=\"truncate text-gray-600\">{s.phone}</span>\n                            </div>\n                          )}\n                        </div>\n                      </div>\n\n                      <Link href={`/dashboard/students/${s.id}`}>\n                        <div className=\"mt-5 pt-4 border-t border-gray-100 group-hover:border-brand-blue/20 flex items-center justify-between text-xs font-semibold text-gray-400 group-hover:text-brand-blue transition-all cursor-pointer\">\n                          <span>Voir le dossier</span>\n                          <ArrowUpRight className=\"h-4 w-4 transform group-hover:translate-x-1 group-hover:-translate-y-1 transition-transform\" />\n                        </div>\n                      </Link>\n                    </GlassCard>\n                  </motion.div>\n                )\n              })}\n            </AnimatePresence>\n          </div>\n        )}\n      </motion.div>\n\n      {/* Pagination Premium */}\n      {totalPages > 1 && (\n        <motion.div\n          variants={itemVariants}\n          className=\"flex justify-center pt-4\"\n        >\n          <GlassCard variant=\"default\" className=\"px-4 py-2 inline-flex\">\n            <Pagination\n              currentPage={currentPage}\n              totalPages={totalPages}\n              onPageChange={setCurrentPage}\n              itemsPerPage={itemsPerPage}\n              totalItems={totalItems}\n            />\n          </GlassCard>\n        </motion.div>\n      )}\n\n      {/* Dialog d'import */}\n      <StudentImportDialog open={importDialogOpen} onOpenChange={setImportDialogOpen} />\n    </motion.div>\n  )\n}\n","'use client'\n\nimport * as React from 'react'\nimport { ChevronLeft, ChevronRight } from 'lucide-react'\nimport { Button } from './button'\nimport { cn } from '@/lib/utils'\n\ninterface PaginationProps {\n  currentPage: number\n  totalPages: number\n  onPageChange: (page: number) => void\n  itemsPerPage: number\n  totalItems: number\n  onItemsPerPageChange?: (itemsPerPage: number) => void\n  itemsPerPageOptions?: number[]\n}\n\nexport function Pagination({\n  currentPage,\n  totalPages,\n  onPageChange,\n  itemsPerPage,\n  totalItems,\n  onItemsPerPageChange,\n  itemsPerPageOptions = [10, 20, 50, 100],\n}: PaginationProps) {\n  const startItem = totalItems === 0 ? 0 : (currentPage - 1) * itemsPerPage + 1\n  const endItem = Math.min(currentPage * itemsPerPage, totalItems)\n\n  const getPageNumbers = () => {\n    const pages: (number | string)[] = []\n    const maxVisible = 5\n\n    if (totalPages <= maxVisible) {\n      // Afficher toutes les pages\n      for (let i = 1; i <= totalPages; i++) {\n        pages.push(i)\n      }\n    } else {\n      // Logique pour afficher les pages avec ellipses\n      if (currentPage <= 3) {\n        for (let i = 1; i <= 4; i++) {\n          pages.push(i)\n        }\n        pages.push('...')\n        pages.push(totalPages)\n      } else if (currentPage >= totalPages - 2) {\n        pages.push(1)\n        pages.push('...')\n        for (let i = totalPages - 3; i <= totalPages; i++) {\n          pages.push(i)\n        }\n      } else {\n        pages.push(1)\n        pages.push('...')\n        for (let i = currentPage - 1; i <= currentPage + 1; i++) {\n          pages.push(i)\n        }\n        pages.push('...')\n        pages.push(totalPages)\n      }\n    }\n\n    return pages\n  }\n\n  return (\n    <div className=\"flex flex-col sm:flex-row items-center justify-between gap-4 px-4 py-3 border-t\">\n      <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n        <span>\n          Affichage de {startItem} à {endItem} sur {totalItems} résultat{totalItems > 1 ? 's' : ''}\n        </span>\n        {onItemsPerPageChange && (\n          <>\n            <span className=\"mx-2\">•</span>\n            <select\n              value={itemsPerPage}\n              onChange={(e) => onItemsPerPageChange(Number(e.target.value))}\n              className=\"px-2 py-1 text-sm border rounded focus:ring-2 focus:ring-primary focus:border-transparent\"\n            >\n              {itemsPerPageOptions.map((option) => (\n                <option key={option} value={option}>\n                  {option} par page\n                </option>\n              ))}\n            </select>\n          </>\n        )}\n      </div>\n\n      <div className=\"flex items-center gap-2\">\n        <Button\n          variant=\"outline\"\n          size=\"sm\"\n          onClick={() => onPageChange(currentPage - 1)}\n          disabled={currentPage === 1}\n          aria-label=\"Page précédente\"\n        >\n          <ChevronLeft className=\"h-4 w-4\" />\n        </Button>\n\n        <div className=\"flex items-center gap-1\">\n          {getPageNumbers().map((page, index) => {\n            if (page === '...') {\n              return (\n                <span key={`ellipsis-${index}`} className=\"px-2 text-muted-foreground\">\n                  ...\n                </span>\n              )\n            }\n\n            const pageNumber = page as number\n            return (\n              <Button\n                key={pageNumber}\n                variant={currentPage === pageNumber ? 'default' : 'outline'}\n                size=\"sm\"\n                onClick={() => onPageChange(pageNumber)}\n                className={cn(\n                  currentPage === pageNumber && 'bg-primary text-primary-foreground'\n                )}\n                aria-label={`Page ${pageNumber}`}\n                aria-current={currentPage === pageNumber ? 'page' : undefined}\n              >\n                {pageNumber}\n              </Button>\n            )\n          })}\n        </div>\n\n        <Button\n          variant=\"outline\"\n          size=\"sm\"\n          onClick={() => onPageChange(currentPage + 1)}\n          disabled={currentPage === totalPages || totalPages === 0}\n          aria-label=\"Page suivante\"\n        >\n          <ChevronRight className=\"h-4 w-4\" />\n        </Button>\n      </div>\n    </div>\n  )\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","'use client'\n\nimport { useState, useRef } from 'react'\nimport { useMutation, useQueryClient } from '@tanstack/react-query'\nimport { useAuth } from '@/lib/hooks/use-auth'\nimport { studentService } from '@/lib/services/student.service'\nimport { Button } from '@/components/ui/button'\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog'\nimport { useToast } from '@/components/ui/toast'\nimport { Upload, FileSpreadsheet, FileText, AlertCircle, CheckCircle2, Loader2, Download } from 'lucide-react'\nimport ExcelJS from 'exceljs'\nimport { cn } from '@/lib/utils'\nimport type { FlexibleInsert } from '@/lib/types/supabase-helpers'\n\ninterface ImportResult {\n  success: number\n  errors: Array<{ row: number; message: string; data: any }>\n  total: number\n}\n\ninterface StudentImportDialogProps {\n  open: boolean\n  onOpenChange: (open: boolean) => void\n}\n\n/**\n * Colonnes attendues dans le fichier d'import\n */\nconst EXPECTED_COLUMNS = [\n  'first_name',\n  'last_name',\n  'email',\n  'phone',\n  'date_of_birth',\n  'gender',\n  'address',\n  'city',\n  'postal_code',\n] as const\n\n/**\n * Mapping des colonnes françaises vers les colonnes de la base\n */\nconst COLUMN_MAPPING: Record<string, string> = {\n  'Prénom': 'first_name',\n  'prénom': 'first_name',\n  'Prenom': 'first_name',\n  'Nom': 'last_name',\n  'nom': 'last_name',\n  'Email': 'email',\n  'email': 'email',\n  'Téléphone': 'phone',\n  'téléphone': 'phone',\n  'Telephone': 'phone',\n  'Date de naissance': 'date_of_birth',\n  'date de naissance': 'date_of_birth',\n  'Date de naissance (JJ/MM/AAAA)': 'date_of_birth',\n  'Genre': 'gender',\n  'genre': 'gender',\n  'Sexe': 'gender',\n  'Adresse': 'address',\n  'adresse': 'address',\n  'Ville': 'city',\n  'ville': 'city',\n  'Code postal': 'postal_code',\n  'code postal': 'postal_code',\n  'Code Postal': 'postal_code',\n  'CP': 'postal_code',\n  'cp': 'postal_code',\n}\n\n/**\n * Parse un fichier Excel (.xlsx)\n */\nasync function parseExcelFile(file: File): Promise<any[]> {\n  const arrayBuffer = await file.arrayBuffer()\n  const workbook = new ExcelJS.Workbook()\n  await workbook.xlsx.load(arrayBuffer)\n\n  const worksheet = workbook.worksheets[0]\n  if (!worksheet) {\n    throw new Error('Le fichier Excel ne contient aucune feuille')\n  }\n\n  const rows: any[] = []\n  const headerRow = worksheet.getRow(1)\n  const headers: string[] = []\n\n  // Lire les en-têtes\n  headerRow.eachCell((cell, colNumber) => {\n    const header = cell.value?.toString()?.trim() || ''\n    // Mapper le header français vers le nom de colonne\n    const mappedHeader = COLUMN_MAPPING[header] || header.toLowerCase().replace(/\\s+/g, '_')\n    headers[colNumber - 1] = mappedHeader\n  })\n\n  // Lire les données (à partir de la ligne 2)\n  worksheet.eachRow((row, rowNumber) => {\n    if (rowNumber === 1) return // Skip header\n\n    const rowData: any = {}\n    row.eachCell((cell, colNumber) => {\n      const header = headers[colNumber - 1]\n      if (header) {\n        let value = cell.value?.toString()?.trim() || ''\n        // Convertir les dates\n        if (header === 'date_of_birth' && value) {\n          // Essayer de parser différentes formats de date\n          const date = parseDate(value)\n          if (date) {\n            value = date\n          }\n        }\n        // Convertir le genre\n        if (header === 'gender' && value) {\n          value = normalizeGender(value)\n        }\n        rowData[header] = value\n      }\n    })\n\n    // Ne pas ajouter les lignes vides\n    if (Object.keys(rowData).length > 0 && (rowData.first_name || rowData.last_name)) {\n      rows.push(rowData)\n    }\n  })\n\n  return rows\n}\n\n/**\n * Parse un fichier CSV\n */\nasync function parseCSVFile(file: File): Promise<any[]> {\n  const text = await file.text()\n  const lines = text.split('\\n').filter(line => line.trim())\n  if (lines.length < 2) {\n    throw new Error('Le fichier CSV doit contenir au moins un en-tête et une ligne de données')\n  }\n\n  // Parser la première ligne (en-têtes)\n  const headers = parseCSVLine(lines[0]).map(header => {\n    const trimmed = header.trim()\n    return COLUMN_MAPPING[trimmed] || trimmed.toLowerCase().replace(/\\s+/g, '_')\n  })\n\n  // Parser les lignes de données\n  const rows: any[] = []\n  for (let i = 1; i < lines.length; i++) {\n    const values = parseCSVLine(lines[i])\n    const rowData: any = {}\n\n    headers.forEach((header, index) => {\n      if (header) {\n        let value = (values[index] || '').trim()\n        // Convertir les dates\n        if (header === 'date_of_birth' && value) {\n          const date = parseDate(value)\n          if (date) {\n            value = date\n          }\n        }\n        // Convertir le genre\n        if (header === 'gender' && value) {\n          value = normalizeGender(value)\n        }\n        rowData[header] = value\n      }\n    })\n\n    // Ne pas ajouter les lignes vides\n    if (Object.keys(rowData).length > 0 && (rowData.first_name || rowData.last_name)) {\n      rows.push(rowData)\n    }\n  }\n\n  return rows\n}\n\n/**\n * Parse une ligne CSV en gérant les guillemets\n */\nfunction parseCSVLine(line: string): string[] {\n  const result: string[] = []\n  let current = ''\n  let inQuotes = false\n\n  for (let i = 0; i < line.length; i++) {\n    const char = line[i]\n    if (char === '\"') {\n      inQuotes = !inQuotes\n    } else if (char === ',' && !inQuotes) {\n      result.push(current)\n      current = ''\n    } else {\n      current += char\n    }\n  }\n  result.push(current)\n\n  return result.map(val => val.replace(/^\"|\"$/g, '').trim())\n}\n\n/**\n * Parse une date depuis différents formats\n */\nfunction parseDate(dateStr: string): string | null {\n  if (!dateStr) return null\n\n  // Formats supportés: DD/MM/YYYY, YYYY-MM-DD, DD-MM-YYYY\n  const formats = [\n    /^(\\d{2})\\/(\\d{2})\\/(\\d{4})$/, // DD/MM/YYYY\n    /^(\\d{4})-(\\d{2})-(\\d{2})$/, // YYYY-MM-DD\n    /^(\\d{2})-(\\d{2})-(\\d{4})$/, // DD-MM-YYYY\n  ]\n\n  for (const format of formats) {\n    const match = dateStr.match(format)\n    if (match) {\n      if (format === formats[0] || format === formats[2]) {\n        // DD/MM/YYYY ou DD-MM-YYYY\n        const [, day, month, year] = match\n        return `${year}-${month}-${day}`\n      } else {\n        // YYYY-MM-DD\n        return dateStr\n      }\n    }\n  }\n\n  // Essayer de parser avec Date\n  const date = new Date(dateStr)\n  if (!isNaN(date.getTime())) {\n    return date.toISOString().split('T')[0]\n  }\n\n  return null\n}\n\n/**\n * Normalise le genre (male/female/other)\n */\nfunction normalizeGender(gender: string): string {\n  const normalized = gender.toLowerCase().trim()\n  if (normalized === 'm' || normalized === 'masculin' || normalized === 'homme' || normalized === 'h') {\n    return 'male'\n  }\n  if (normalized === 'f' || normalized === 'féminin' || normalized === 'femme' || normalized === 'fem') {\n    return 'female'\n  }\n  return 'other'\n}\n\n/**\n * Valide une ligne de données d'étudiant\n */\nfunction validateStudentRow(row: any, rowIndex: number): { valid: boolean; errors: string[] } {\n  const errors: string[] = []\n\n  if (!row.first_name || row.first_name.trim() === '') {\n    errors.push('Le prénom est requis')\n  }\n  if (!row.last_name || row.last_name.trim() === '') {\n    errors.push('Le nom est requis')\n  }\n  if (row.email && !/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(row.email)) {\n    errors.push('L\\'email est invalide')\n  }\n\n  return {\n    valid: errors.length === 0,\n    errors,\n  }\n}\n\nexport function StudentImportDialog({ open, onOpenChange }: StudentImportDialogProps) {\n  const { user } = useAuth()\n  const { addToast } = useToast()\n  const queryClient = useQueryClient()\n  const fileInputRef = useRef<HTMLInputElement>(null)\n  const [file, setFile] = useState<File | null>(null)\n  const [importResult, setImportResult] = useState<ImportResult | null>(null)\n  const [isParsing, setIsParsing] = useState(false)\n\n  const importMutation = useMutation({\n    mutationFn: async (students: FlexibleInsert<'students'>[]) => {\n      if (!user?.organization_id) {\n        throw new Error('Organisation non trouvée')\n      }\n\n      // Ajouter organization_id et status à chaque étudiant\n      const studentsWithOrg = students.map(student => ({\n        ...student,\n        organization_id: user.organization_id,\n        status: 'active' as const,\n      }))\n\n      return await studentService.import(user.organization_id, studentsWithOrg)\n    },\n    onSuccess: (data, variables) => {\n      queryClient.invalidateQueries({ queryKey: ['students'] })\n      queryClient.invalidateQueries({ queryKey: ['students-stats'] })\n      \n      addToast({\n        type: 'success',\n        title: 'Import réussi',\n        description: `${data.length} étudiant(s) importé(s) avec succès.`,\n      })\n\n      // Réinitialiser\n      setFile(null)\n      setImportResult(null)\n      if (fileInputRef.current) {\n        fileInputRef.current.value = ''\n      }\n      onOpenChange(false)\n    },\n    onError: (error: Error) => {\n      addToast({\n        type: 'error',\n        title: 'Erreur d\\'import',\n        description: error.message || 'Une erreur est survenue lors de l\\'import.',\n      })\n    },\n  })\n\n  const handleFileSelect = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const selectedFile = event.target.files?.[0]\n    if (!selectedFile) return\n\n    const isExcel = selectedFile.name.endsWith('.xlsx') || selectedFile.name.endsWith('.xls')\n    const isCSV = selectedFile.name.endsWith('.csv')\n\n    if (!isExcel && !isCSV) {\n      addToast({\n        type: 'error',\n        title: 'Format non supporté',\n        description: 'Veuillez sélectionner un fichier Excel (.xlsx, .xls) ou CSV (.csv)',\n      })\n      return\n    }\n\n    setFile(selectedFile)\n    setImportResult(null)\n    setIsParsing(true)\n\n    try {\n      let rows: any[] = []\n      if (isExcel) {\n        rows = await parseExcelFile(selectedFile)\n      } else {\n        rows = await parseCSVFile(selectedFile)\n      }\n\n      // Valider les lignes\n      const validStudents: FlexibleInsert<'students'>[] = []\n      const errors: Array<{ row: number; message: string; data: any }> = []\n\n      rows.forEach((row, index) => {\n        const validation = validateStudentRow(row, index + 2) // +2 car ligne 1 = header, index 0-based\n        if (validation.valid) {\n          validStudents.push(row)\n        } else {\n          errors.push({\n            row: index + 2,\n            message: validation.errors.join(', '),\n            data: row,\n          })\n        }\n      })\n\n      setImportResult({\n        success: validStudents.length,\n        errors,\n        total: rows.length,\n      })\n    } catch (error) {\n      addToast({\n        type: 'error',\n        title: 'Erreur de parsing',\n        description: error instanceof Error ? error.message : 'Impossible de parser le fichier',\n      })\n      setFile(null)\n    } finally {\n      setIsParsing(false)\n    }\n  }\n\n  const handleImport = () => {\n    if (!importResult || importResult.success === 0) {\n      addToast({\n        type: 'warning',\n        title: 'Aucune donnée valide',\n        description: 'Aucun étudiant valide à importer.',\n      })\n      return\n    }\n\n    // Re-parser le fichier pour obtenir les données valides\n    if (!file) return\n\n    const isExcel = file.name.endsWith('.xlsx') || file.name.endsWith('.xls')\n    \n    setIsParsing(true)\n    Promise.resolve()\n      .then(async () => {\n        const rows = isExcel ? await parseExcelFile(file) : await parseCSVFile(file)\n        const validStudents: FlexibleInsert<'students'>[] = []\n        \n        rows.forEach((row) => {\n          const validation = validateStudentRow(row, 0)\n          if (validation.valid) {\n            validStudents.push(row)\n          }\n        })\n\n        return validStudents\n      })\n      .then((students) => {\n        importMutation.mutate(students)\n      })\n      .catch((error) => {\n        addToast({\n          type: 'error',\n          title: 'Erreur',\n          description: error.message || 'Une erreur est survenue',\n        })\n      })\n      .finally(() => {\n        setIsParsing(false)\n      })\n  }\n\n  const handleDownloadTemplate = () => {\n    // Créer un template Excel avec les colonnes attendues\n    const workbook = new ExcelJS.Workbook()\n    const worksheet = workbook.addWorksheet('Étudiants')\n\n    // En-têtes en français\n    const headers = [\n      'Prénom',\n      'Nom',\n      'Email',\n      'Téléphone',\n      'Date de naissance (JJ/MM/AAAA)',\n      'Genre (M/F/Autre)',\n      'Adresse',\n      'Code postal',\n      'Ville',\n    ]\n\n    worksheet.addRow(headers)\n\n    // Styliser l'en-tête\n    const headerRow = worksheet.getRow(1)\n    headerRow.font = { bold: true, color: { argb: 'FFFFFFFF' } }\n    headerRow.fill = {\n      type: 'pattern',\n      pattern: 'solid',\n      fgColor: { argb: 'FF4F46E5' },\n    }\n\n    // Largeur des colonnes\n    worksheet.columns.forEach((column, index) => {\n      column.width = 20\n    })\n\n    // Ajouter une ligne d'exemple\n    worksheet.addRow([\n      'Jean',\n      'Dupont',\n      'jean.dupont@example.com',\n      '+33 6 12 34 56 78',\n      '15/05/2000',\n      'M',\n      '123 Rue de la République',\n      '75001',\n      'Paris',\n    ])\n\n    // Télécharger\n    workbook.xlsx.writeBuffer().then((buffer) => {\n      const blob = new Blob([buffer], { type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' })\n      const url = URL.createObjectURL(blob)\n      const link = document.createElement('a')\n      link.href = url\n      link.download = 'template_import_etudiants.xlsx'\n      link.click()\n      URL.revokeObjectURL(url)\n    })\n  }\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <Upload className=\"h-5 w-5 text-brand-blue\" />\n            Importer des étudiants\n          </DialogTitle>\n          <DialogDescription>\n            Importez une liste d'étudiants depuis un fichier Excel (.xlsx) ou CSV (.csv)\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-4\">\n          {/* Télécharger le template */}\n          <div className=\"flex items-center justify-between p-4 bg-brand-blue-ghost/20 rounded-lg border border-brand-blue/20\">\n            <div>\n              <p className=\"font-semibold text-sm text-gray-900\">Besoin d'un template ?</p>\n              <p className=\"text-xs text-gray-600 mt-1\">\n                Téléchargez un fichier Excel avec les colonnes pré-remplies\n              </p>\n            </div>\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={handleDownloadTemplate}\n              className=\"gap-2\"\n            >\n              <Download className=\"h-4 w-4\" />\n              Télécharger le template\n            </Button>\n          </div>\n\n          {/* Sélection de fichier */}\n          <div className=\"space-y-2\">\n            <label className=\"text-sm font-semibold text-gray-900\">Fichier à importer</label>\n            <div\n              className={cn(\n                'border-2 border-dashed rounded-lg p-8 text-center transition-all',\n                file\n                  ? 'border-brand-blue bg-brand-blue-ghost/20'\n                  : 'border-gray-300 hover:border-brand-blue/50 hover:bg-gray-50'\n              )}\n            >\n              <input\n                ref={fileInputRef}\n                type=\"file\"\n                accept=\".xlsx,.xls,.csv\"\n                onChange={handleFileSelect}\n                className=\"hidden\"\n                id=\"student-import-file\"\n              />\n              <label\n                htmlFor=\"student-import-file\"\n                className=\"cursor-pointer flex flex-col items-center gap-3\"\n              >\n                {isParsing ? (\n                  <>\n                    <Loader2 className=\"h-8 w-8 text-brand-blue animate-spin\" />\n                    <span className=\"text-sm text-gray-600\">Analyse du fichier...</span>\n                  </>\n                ) : file ? (\n                  <>\n                    {file.name.endsWith('.csv') ? (\n                      <FileText className=\"h-8 w-8 text-brand-blue\" />\n                    ) : (\n                      <FileSpreadsheet className=\"h-8 w-8 text-brand-blue\" />\n                    )}\n                    <div>\n                      <p className=\"font-semibold text-sm text-gray-900\">{file.name}</p>\n                      <p className=\"text-xs text-gray-600 mt-1\">\n                        {(file.size / 1024).toFixed(2)} KB\n                      </p>\n                    </div>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={(e) => {\n                        e.stopPropagation()\n                        setFile(null)\n                        setImportResult(null)\n                        if (fileInputRef.current) {\n                          fileInputRef.current.value = ''\n                        }\n                      }}\n                    >\n                      Changer de fichier\n                    </Button>\n                  </>\n                ) : (\n                  <>\n                    <Upload className=\"h-8 w-8 text-gray-400\" />\n                    <div>\n                      <p className=\"font-semibold text-sm text-gray-900\">\n                        Cliquez pour sélectionner un fichier\n                      </p>\n                      <p className=\"text-xs text-gray-600 mt-1\">\n                        Formats supportés: .xlsx, .xls, .csv\n                      </p>\n                    </div>\n                  </>\n                )}\n              </label>\n            </div>\n          </div>\n\n          {/* Résultats de validation */}\n          {importResult && (\n            <div className=\"space-y-3\">\n              <div className=\"flex items-center gap-2 p-3 bg-gray-50 rounded-lg\">\n                <CheckCircle2 className=\"h-5 w-5 text-green-600\" />\n                <div className=\"flex-1\">\n                  <p className=\"text-sm font-semibold text-gray-900\">\n                    {importResult.success} étudiant(s) valide(s) sur {importResult.total}\n                  </p>\n                  {importResult.errors.length > 0 && (\n                    <p className=\"text-xs text-gray-600 mt-1\">\n                      {importResult.errors.length} erreur(s) détectée(s)\n                    </p>\n                  )}\n                </div>\n              </div>\n\n              {importResult.errors.length > 0 && (\n                <div className=\"max-h-48 overflow-y-auto space-y-2\">\n                  <p className=\"text-xs font-semibold text-red-600 flex items-center gap-1\">\n                    <AlertCircle className=\"h-4 w-4\" />\n                    Erreurs de validation\n                  </p>\n                  {importResult.errors.map((error, index) => (\n                    <div\n                      key={index}\n                      className=\"p-2 bg-red-50 border border-red-200 rounded text-xs\"\n                    >\n                      <p className=\"font-semibold text-red-900\">Ligne {error.row}</p>\n                      <p className=\"text-red-700 mt-1\">{error.message}</p>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Colonnes attendues */}\n          <div className=\"p-3 bg-gray-50 rounded-lg\">\n            <p className=\"text-xs font-semibold text-gray-900 mb-2\">Colonnes attendues :</p>\n            <div className=\"flex flex-wrap gap-2\">\n              {['Prénom', 'Nom', 'Email', 'Téléphone', 'Date de naissance', 'Genre', 'Adresse', 'Code postal', 'Ville'].map(\n                (col) => (\n                  <span\n                    key={col}\n                    className=\"px-2 py-1 bg-white border border-gray-200 rounded text-xs text-gray-700\"\n                  >\n                    {col}\n                  </span>\n                )\n              )}\n            </div>\n          </div>\n        </div>\n\n        <DialogFooter>\n          <Button variant=\"outline\" onClick={() => onOpenChange(false)}>\n            Annuler\n          </Button>\n          <Button\n            onClick={handleImport}\n            disabled={!importResult || importResult.success === 0 || importMutation.isPending || isParsing}\n            className=\"bg-gradient-to-r from-brand-blue to-brand-cyan\"\n          >\n            {importMutation.isPending || isParsing ? (\n              <>\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                Import en cours...\n              </>\n            ) : (\n              <>\n                <Upload className=\"mr-2 h-4 w-4\" />\n                Importer {importResult?.success || 0} étudiant(s)\n              </>\n            )}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  )\n}\n"],"names":[],"mappings":"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"}