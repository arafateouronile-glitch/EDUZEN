module.exports=[209380,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(433217),e=a.i(370025),f=a.i(937927),g=a.i(913216),h=a.i(824115),i=a.i(703130),j=a.i(340695),k=a.i(621958),l=a.i(603314),m=a.i(580208),n=a.i(111269),o=a.i(724669),p=a.i(255225),q=a.i(284505),r=a.i(523312),s=a.i(669520),t=a.i(238246);function u(){let{user:a}=(0,g.useAuth)(),u=(0,f.useQueryClient)(),[v,w]=(0,c.useState)("all"),{data:x,isLoading:y}=(0,d.useQuery)({queryKey:["compliance-report",a?.organization_id,v],queryFn:()=>h.complianceService.generateComplianceReport(a?.organization_id||"","all"===v?void 0:v),enabled:!!a?.organization_id}),{data:z}=(0,d.useQuery)({queryKey:["critical-risks",a?.organization_id],queryFn:()=>h.complianceService.getCriticalRisks(a?.organization_id||""),enabled:!!a?.organization_id}),{data:A}=(0,d.useQuery)({queryKey:["open-incidents",a?.organization_id],queryFn:()=>h.complianceService.getIncidents(a?.organization_id||"",{status:"open"}),enabled:!!a?.organization_id}),B=(0,e.useMutation)({mutationFn:()=>fetch(`/api/compliance/reports/generate?framework=${v}`).then(a=>a.json()),onSuccess:()=>{}}),C=(0,e.useMutation)({mutationFn:()=>fetch("/api/compliance/sync-controls",{method:"POST"}).then(a=>a.json()),onSuccess:()=>{u.invalidateQueries({queryKey:["security-controls"]}),u.invalidateQueries({queryKey:["compliance-report"]})}});return y?(0,b.jsx)("div",{className:"container mx-auto py-8",children:(0,b.jsx)("div",{className:"text-center",children:"Chargement..."})}):(0,b.jsxs)("div",{className:"container mx-auto py-8 px-4 max-w-7xl",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[(0,b.jsx)(l.Shield,{className:"h-8 w-8"}),"Conformité & Sécurité"]}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Gestion de la conformité ISO 27001, SOC 2 et sécurité"})]}),z&&z.length>0||A&&A.length>0?(0,b.jsxs)("div",{className:"mb-6 space-y-2",children:[z&&z.length>0&&(0,b.jsx)(i.Card,{className:"border-red-200 bg-red-50",children:(0,b.jsx)(i.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(m.AlertTriangle,{className:"h-5 w-5 text-red-600"}),(0,b.jsxs)("span",{className:"font-semibold text-red-900",children:[z.length," risque(s) critique(s) nécessitent une attention immédiate"]})]}),(0,b.jsx)(t.default,{href:"/dashboard/compliance/risks?level=critical",children:(0,b.jsx)(j.Button,{variant:"outline",size:"sm",children:"Voir les risques"})})]})})}),A&&A.length>0&&(0,b.jsx)(i.Card,{className:"border-orange-200 bg-orange-50",children:(0,b.jsx)(i.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(r.Bell,{className:"h-5 w-5 text-orange-600"}),(0,b.jsxs)("span",{className:"font-semibold text-orange-900",children:[A.length," incident(s) de sécurité ouvert(s)"]})]}),(0,b.jsx)(t.default,{href:"/dashboard/compliance/incidents?status=open",children:(0,b.jsx)(j.Button,{variant:"outline",size:"sm",children:"Voir les incidents"})})]})})})]}):null,(0,b.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(j.Button,{variant:"all"===v?"default":"outline",onClick:()=>w("all"),size:"sm",children:"Tous"}),(0,b.jsx)(j.Button,{variant:"iso27001"===v?"default":"outline",onClick:()=>w("iso27001"),size:"sm",children:"ISO 27001"}),(0,b.jsx)(j.Button,{variant:"soc2"===v?"default":"outline",onClick:()=>w("soc2"),size:"sm",children:"SOC 2"}),(0,b.jsx)(j.Button,{variant:"gdpr"===v?"default":"outline",onClick:()=>w("gdpr"),size:"sm",children:"GDPR"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(j.Button,{onClick:()=>C.mutate(),variant:"outline",disabled:C.isPending,children:[(0,b.jsx)(s.RefreshCw,{className:`h-4 w-4 mr-2 ${C.isPending?"animate-spin":""}`}),"Synchroniser"]}),(0,b.jsxs)(j.Button,{onClick:()=>B.mutate(),variant:"outline",children:[(0,b.jsx)(q.Download,{className:"h-4 w-4 mr-2"}),"Générer le rapport"]})]})]}),x&&(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[(0,b.jsx)(i.Card,{children:(0,b.jsx)(i.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Conformité"}),(0,b.jsxs)("p",{className:"text-2xl font-bold",children:[x.controls.compliance_percentage.toFixed(1),"%"]})]}),(0,b.jsx)(o.TrendingUp,{className:"h-8 w-8 text-green-500"})]})})}),(0,b.jsx)(i.Card,{children:(0,b.jsx)(i.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Contrôles implémentés"}),(0,b.jsxs)("p",{className:"text-2xl font-bold",children:[x.controls.implemented," / ",x.controls.total]})]}),(0,b.jsx)(n.CheckCircle2,{className:"h-8 w-8 text-blue-500"})]})})}),(0,b.jsx)(i.Card,{children:(0,b.jsx)(i.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Risques critiques"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:x.risks.critical})]}),(0,b.jsx)(m.AlertTriangle,{className:"h-8 w-8 text-red-500"})]})})}),(0,b.jsx)(i.Card,{children:(0,b.jsx)(i.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Score d'audit moyen"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:x.audits.average_score.toFixed(1)})]}),(0,b.jsx)(p.BarChart3,{className:"h-8 w-8 text-purple-500"})]})})})]}),(0,b.jsxs)(k.Tabs,{defaultValue:"overview",className:"space-y-6",children:[(0,b.jsxs)(k.TabsList,{children:[(0,b.jsx)(k.TabsTrigger,{value:"overview",children:"Vue d'ensemble"}),(0,b.jsx)(k.TabsTrigger,{value:"controls",children:"Contrôles"}),(0,b.jsx)(k.TabsTrigger,{value:"risks",children:"Risques"}),(0,b.jsx)(k.TabsTrigger,{value:"incidents",children:"Incidents"}),(0,b.jsx)(k.TabsTrigger,{value:"audits",children:"Audits"}),(0,b.jsx)(k.TabsTrigger,{value:"policies",children:"Politiques"})]}),(0,b.jsx)(k.TabsContent,{value:"overview",children:x&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(i.Card,{children:[(0,b.jsx)(i.CardHeader,{children:(0,b.jsx)(i.CardTitle,{children:"Recommandations"})}),(0,b.jsx)(i.CardContent,{children:(0,b.jsx)("ul",{className:"space-y-2",children:x.recommendations.map((a,c)=>(0,b.jsxs)("li",{className:"flex items-start gap-2",children:[(0,b.jsx)("span",{className:"text-primary",children:"•"}),(0,b.jsx)("span",{children:a})]},c))})})]}),(0,b.jsxs)(i.Card,{children:[(0,b.jsx)(i.CardHeader,{children:(0,b.jsx)(i.CardTitle,{children:"État des contrôles"})}),(0,b.jsx)(i.CardContent,{children:(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Implémentés"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-green-600",children:x.controls.implemented})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Partiels"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:x.controls.partial})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Non implémentés"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-red-600",children:x.controls.not_implemented})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Conformes"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:x.controls.compliant})]})]})})]}),(0,b.jsxs)(i.Card,{children:[(0,b.jsx)(i.CardHeader,{children:(0,b.jsx)(i.CardTitle,{children:"Risques"})}),(0,b.jsx)(i.CardContent,{children:(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:x.risks.total})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Critiques"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-red-600",children:x.risks.critical})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Élevés"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:x.risks.high})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Moyens"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:x.risks.medium})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Atténués"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-green-600",children:x.risks.mitigated})]})]})})]})]})}),(0,b.jsx)(k.TabsContent,{value:"controls",children:(0,b.jsxs)(i.Card,{children:[(0,b.jsxs)(i.CardHeader,{children:[(0,b.jsx)(i.CardTitle,{children:"Contrôles de sécurité"}),(0,b.jsx)(i.CardDescription,{children:"Gestion des contrôles ISO 27001, SOC 2 et autres frameworks"})]}),(0,b.jsx)(i.CardContent,{children:(0,b.jsx)(t.default,{href:"/dashboard/compliance/controls",children:(0,b.jsx)(j.Button,{children:"Gérer les contrôles"})})})]})}),(0,b.jsx)(k.TabsContent,{value:"risks",children:(0,b.jsxs)(i.Card,{children:[(0,b.jsxs)(i.CardHeader,{children:[(0,b.jsx)(i.CardTitle,{children:"Évaluations de risques"}),(0,b.jsx)(i.CardDescription,{children:"Identification, évaluation et traitement des risques"})]}),(0,b.jsx)(i.CardContent,{children:(0,b.jsx)(t.default,{href:"/dashboard/compliance/risks",children:(0,b.jsx)(j.Button,{children:"Gérer les risques"})})})]})}),(0,b.jsx)(k.TabsContent,{value:"incidents",children:(0,b.jsxs)(i.Card,{children:[(0,b.jsxs)(i.CardHeader,{children:[(0,b.jsx)(i.CardTitle,{children:"Incidents de sécurité"}),(0,b.jsx)(i.CardDescription,{children:"Gestion des incidents et violations de sécurité"})]}),(0,b.jsx)(i.CardContent,{children:(0,b.jsx)(t.default,{href:"/dashboard/compliance/incidents",children:(0,b.jsx)(j.Button,{children:"Gérer les incidents"})})})]})}),(0,b.jsx)(k.TabsContent,{value:"audits",children:(0,b.jsxs)(i.Card,{children:[(0,b.jsxs)(i.CardHeader,{children:[(0,b.jsx)(i.CardTitle,{children:"Audits de sécurité"}),(0,b.jsx)(i.CardDescription,{children:"Audits internes et externes de conformité"})]}),(0,b.jsx)(i.CardContent,{children:(0,b.jsx)(t.default,{href:"/dashboard/compliance/audits",children:(0,b.jsx)(j.Button,{children:"Gérer les audits"})})})]})}),(0,b.jsx)(k.TabsContent,{value:"policies",children:(0,b.jsxs)(i.Card,{children:[(0,b.jsxs)(i.CardHeader,{children:[(0,b.jsx)(i.CardTitle,{children:"Politiques de sécurité"}),(0,b.jsx)(i.CardDescription,{children:"Documentation et gestion des politiques de sécurité"})]}),(0,b.jsx)(i.CardContent,{children:(0,b.jsx)(t.default,{href:"/dashboard/compliance/policies",children:(0,b.jsx)(j.Button,{children:"Gérer les politiques"})})})]})})]})]})}a.s(["default",()=>u])}];

//# sourceMappingURL=app_%28dashboard%29_dashboard_compliance_page_tsx_c1ae86a0._.js.map