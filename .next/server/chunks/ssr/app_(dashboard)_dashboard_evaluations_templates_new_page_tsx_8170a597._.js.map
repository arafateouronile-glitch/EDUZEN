{"version":3,"sources":["../../../../app/%28dashboard%29/dashboard/evaluations/templates/new/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { useMutation, useQueryClient } from '@tanstack/react-query'\nimport { useRouter } from 'next/navigation'\nimport { useAuth } from '@/lib/hooks/use-auth'\nimport { evaluationTemplateService, type QuestionOption } from '@/lib/services/evaluation-template.service'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Textarea } from '@/components/ui/textarea'\nimport { useToast } from '@/components/ui/toast'\nimport { ArrowLeft, Plus, Trash2, GripVertical } from 'lucide-react'\nimport Link from 'next/link'\nimport { motion, Reorder } from '@/components/ui/motion'\n\ntype QuestionType = 'multiple_choice' | 'true_false' | 'short_answer' | 'essay' | 'numeric'\n\ninterface Question {\n  id: string\n  question_text: string\n  question_type: QuestionType\n  options?: QuestionOption[]\n  correct_answer?: string\n  correct_answer_pattern?: string\n  points: number\n  explanation?: string\n  order_index: number\n}\n\nexport default function NewEvaluationTemplatePage() {\n  const router = useRouter()\n  const { user } = useAuth()\n  const queryClient = useQueryClient()\n  const { addToast } = useToast()\n\n  const [formData, setFormData] = useState({\n    name: '',\n    description: '',\n    assessment_type: '',\n    subject: '',\n    max_score: 20,\n    passing_score: 70,\n    time_limit_minutes: null as number | null,\n    shuffle_questions: false,\n    show_correct_answers: true,\n  })\n\n  const [questions, setQuestions] = useState<Question[]>([])\n\n  const createMutation = useMutation({\n    mutationFn: async () => {\n      if (!user?.organization_id) throw new Error('Organisation non trouvée')\n      if (!formData.name) throw new Error('Le nom du modèle est requis')\n      if (questions.length === 0) throw new Error('Au moins une question est requise')\n\n      return evaluationTemplateService.createTemplate(\n        user.organization_id,\n        {\n          name: formData.name,\n          description: formData.description || null,\n          assessment_type: formData.assessment_type || null,\n          subject: formData.subject || null,\n          max_score: formData.max_score,\n          passing_score: formData.passing_score || null,\n          time_limit_minutes: formData.time_limit_minutes || null,\n          shuffle_questions: formData.shuffle_questions,\n          show_correct_answers: formData.show_correct_answers,\n        },\n        questions.map((q) => ({\n          question_text: q.question_text,\n          question_type: q.question_type,\n          options: q.options ? JSON.stringify(q.options) as any : null,\n          correct_answer: q.correct_answer || null,\n          correct_answer_pattern: q.correct_answer_pattern || null,\n          points: q.points,\n          explanation: q.explanation || null,\n          order_index: q.order_index,\n        }))\n      )\n    },\n    onSuccess: (template: any) => {\n      queryClient.invalidateQueries({ queryKey: ['evaluation-templates'] })\n      addToast({\n        type: 'success',\n        title: 'Modèle créé',\n        description: 'Le modèle d\\'évaluation a été créé avec succès.',\n      })\n      if (template?.id) {\n        router.push(`/dashboard/evaluations/templates/${template.id}`)\n      }\n    },\n    onError: (error: Error) => {\n      addToast({\n        type: 'error',\n        title: 'Erreur',\n        description: error.message || 'Une erreur est survenue lors de la création.',\n      })\n    },\n  })\n\n  const addQuestion = () => {\n    const newQuestion: Question = {\n      id: `temp-${Date.now()}`,\n      question_text: '',\n      question_type: 'multiple_choice',\n      options: [\n        { text: '', is_correct: false },\n        { text: '', is_correct: false },\n      ],\n      points: 1,\n      order_index: questions.length + 1,\n    }\n    setQuestions([...questions, newQuestion])\n  }\n\n  const removeQuestion = (id: string) => {\n    setQuestions(questions.filter((q) => q.id !== id).map((q, index) => ({ ...q, order_index: index + 1 })))\n  }\n\n  const updateQuestion = (id: string, updates: Partial<Question>) => {\n    setQuestions(\n      questions.map((q) => {\n        if (q.id === id) {\n          const updated = { ...q, ...updates }\n          // Réinitialiser les options si on change de type\n          if (updates.question_type && updates.question_type !== q.question_type) {\n            if (updates.question_type === 'multiple_choice') {\n              updated.options = [\n                { text: '', is_correct: false },\n                { text: '', is_correct: false },\n              ]\n            } else {\n              updated.options = undefined\n            }\n            updated.correct_answer = undefined\n          }\n          return updated\n        }\n        return q\n      })\n    )\n  }\n\n  const addOption = (questionId: string) => {\n    setQuestions(\n      questions.map((q) => {\n        if (q.id === questionId && q.options) {\n          return {\n            ...q,\n            options: [...q.options, { text: '', is_correct: false }],\n          }\n        }\n        return q\n      })\n    )\n  }\n\n  const removeOption = (questionId: string, optionIndex: number) => {\n    setQuestions(\n      questions.map((q) => {\n        if (q.id === questionId && q.options) {\n          const newOptions = q.options.filter((_, i) => i !== optionIndex)\n          return {\n            ...q,\n            options: newOptions.length > 0 ? newOptions : undefined,\n          }\n        }\n        return q\n      })\n    )\n  }\n\n  const updateOption = (questionId: string, optionIndex: number, updates: Partial<QuestionOption>) => {\n    setQuestions(\n      questions.map((q) => {\n        if (q.id === questionId && q.options) {\n          return {\n            ...q,\n            options: q.options.map((opt, i) => (i === optionIndex ? { ...opt, ...updates } : opt)),\n          }\n        }\n        return q\n      })\n    )\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center gap-4\">\n        <Link href=\"/dashboard/evaluations/templates\">\n          <Button variant=\"ghost\" size=\"icon\">\n            <ArrowLeft className=\"h-4 w-4\" />\n          </Button>\n        </Link>\n        <div>\n          <h1 className=\"text-3xl font-bold\">Nouveau modèle d'évaluation</h1>\n          <p className=\"text-muted-foreground mt-1\">\n            Créez un modèle avec questions et réponses pour correction automatique\n          </p>\n        </div>\n      </div>\n\n      <form\n        onSubmit={(e) => {\n          e.preventDefault()\n          createMutation.mutate()\n        }}\n        className=\"space-y-6\"\n      >\n        {/* Informations générales */}\n        <Card>\n          <CardHeader>\n            <CardTitle>Informations générales</CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div>\n              <Label htmlFor=\"name\">Nom du modèle *</Label>\n              <Input\n                id=\"name\"\n                value={formData.name}\n                onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                placeholder=\"Ex: Évaluation de fin de module\"\n                required\n              />\n            </div>\n\n            <div>\n              <Label htmlFor=\"description\">Description</Label>\n              <Textarea\n                id=\"description\"\n                value={formData.description}\n                onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                placeholder=\"Description du modèle d'évaluation\"\n                rows={3}\n              />\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <Label htmlFor=\"subject\">Sujet/Matière</Label>\n                <Input\n                  id=\"subject\"\n                  value={formData.subject}\n                  onChange={(e) => setFormData({ ...formData, subject: e.target.value })}\n                  placeholder=\"Ex: Mathématiques\"\n                />\n              </div>\n\n              <div>\n                <Label htmlFor=\"assessment_type\">Type d'évaluation</Label>\n                <select\n                  id=\"assessment_type\"\n                  value={formData.assessment_type}\n                  onChange={(e) => setFormData({ ...formData, assessment_type: e.target.value })}\n                  className=\"w-full px-4 py-2 border rounded-lg\"\n                >\n                  <option value=\"\">Sélectionner...</option>\n                  <option value=\"pre_formation\">Pré-formation</option>\n                  <option value=\"hot\">À chaud</option>\n                  <option value=\"cold\">À froid</option>\n                  <option value=\"quiz\">Quiz</option>\n                  <option value=\"exam\">Examen</option>\n                  <option value=\"other\">Autre</option>\n                </select>\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-3 gap-4\">\n              <div>\n                <Label htmlFor=\"max_score\">Note maximale</Label>\n                <Input\n                  id=\"max_score\"\n                  type=\"number\"\n                  step=\"0.01\"\n                  min=\"1\"\n                  value={formData.max_score}\n                  onChange={(e) => setFormData({ ...formData, max_score: parseFloat(e.target.value) || 20 })}\n                />\n              </div>\n\n              <div>\n                <Label htmlFor=\"passing_score\">Score de réussite (%)</Label>\n                <Input\n                  id=\"passing_score\"\n                  type=\"number\"\n                  step=\"0.01\"\n                  min=\"0\"\n                  max=\"100\"\n                  value={formData.passing_score}\n                  onChange={(e) => setFormData({ ...formData, passing_score: parseFloat(e.target.value) || 70 })}\n                />\n              </div>\n\n              <div>\n                <Label htmlFor=\"time_limit\">Durée (minutes)</Label>\n                <Input\n                  id=\"time_limit\"\n                  type=\"number\"\n                  min=\"1\"\n                  value={formData.time_limit_minutes || ''}\n                  onChange={(e) => setFormData({ ...formData, time_limit_minutes: e.target.value ? parseInt(e.target.value) : null })}\n                  placeholder=\"Illimité\"\n                />\n              </div>\n            </div>\n\n            <div className=\"flex items-center gap-4\">\n              <label className=\"flex items-center gap-2\">\n                <input\n                  type=\"checkbox\"\n                  checked={formData.shuffle_questions}\n                  onChange={(e) => setFormData({ ...formData, shuffle_questions: e.target.checked })}\n                />\n                <span>Mélanger les questions</span>\n              </label>\n              <label className=\"flex items-center gap-2\">\n                <input\n                  type=\"checkbox\"\n                  checked={formData.show_correct_answers}\n                  onChange={(e) => setFormData({ ...formData, show_correct_answers: e.target.checked })}\n                />\n                <span>Afficher les bonnes réponses après correction</span>\n              </label>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Questions */}\n        <Card>\n          <CardHeader>\n            <div className=\"flex items-center justify-between\">\n              <CardTitle>Questions</CardTitle>\n              <Button type=\"button\" onClick={addQuestion} variant=\"outline\">\n                <Plus className=\"h-4 w-4 mr-2\" />\n                Ajouter une question\n              </Button>\n            </div>\n          </CardHeader>\n          <CardContent className=\"space-y-6\">\n            {questions.length === 0 ? (\n              <div className=\"text-center py-8 text-muted-foreground\">\n                Aucune question. Cliquez sur \"Ajouter une question\" pour commencer.\n              </div>\n            ) : (\n              questions.map((question, index) => (\n                <Card key={question.id} className=\"border-2\">\n                  <CardHeader>\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center gap-2\">\n                        <GripVertical className=\"h-4 w-4 text-muted-foreground\" />\n                        <CardTitle className=\"text-base\">Question {index + 1}</CardTitle>\n                      </div>\n                      <Button\n                        type=\"button\"\n                        variant=\"ghost\"\n                        size=\"icon\"\n                        onClick={() => removeQuestion(question.id)}\n                      >\n                        <Trash2 className=\"h-4 w-4 text-destructive\" />\n                      </Button>\n                    </div>\n                  </CardHeader>\n                  <CardContent className=\"space-y-4\">\n                    <div>\n                      <Label>Texte de la question *</Label>\n                      <Textarea\n                        value={question.question_text}\n                        onChange={(e) => updateQuestion(question.id, { question_text: e.target.value })}\n                        placeholder=\"Entrez la question...\"\n                        rows={2}\n                        required\n                      />\n                    </div>\n\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <div>\n                        <Label>Type de question *</Label>\n                        <select\n                          value={question.question_type}\n                          onChange={(e) => updateQuestion(question.id, { question_type: e.target.value as QuestionType })}\n                          className=\"w-full px-4 py-2 border rounded-lg\"\n                        >\n                          <option value=\"multiple_choice\">Choix multiples</option>\n                          <option value=\"true_false\">Vrai/Faux</option>\n                          <option value=\"short_answer\">Réponse courte</option>\n                          <option value=\"numeric\">Numérique</option>\n                          <option value=\"essay\">Dissertation (correction manuelle)</option>\n                        </select>\n                      </div>\n\n                      <div>\n                        <Label>Points *</Label>\n                        <Input\n                          type=\"number\"\n                          step=\"0.01\"\n                          min=\"0\"\n                          value={question.points}\n                          onChange={(e) => updateQuestion(question.id, { points: parseFloat(e.target.value) || 1 })}\n                          required\n                        />\n                      </div>\n                    </div>\n\n                    {/* Options pour choix multiples */}\n                    {question.question_type === 'multiple_choice' && question.options && (\n                      <div className=\"space-y-2\">\n                        <Label>Options de réponse *</Label>\n                        {question.options.map((option, optIndex) => (\n                          <div key={optIndex} className=\"flex items-center gap-2\">\n                            <input\n                              type=\"checkbox\"\n                              checked={option.is_correct}\n                              onChange={(e) => updateOption(question.id, optIndex, { is_correct: e.target.checked })}\n                            />\n                            <Input\n                              value={option.text}\n                              onChange={(e) => updateOption(question.id, optIndex, { text: e.target.value })}\n                              placeholder={`Option ${optIndex + 1}`}\n                              className=\"flex-1\"\n                            />\n                            {question.options && question.options.length > 2 && (\n                              <Button\n                                type=\"button\"\n                                variant=\"ghost\"\n                                size=\"icon\"\n                                onClick={() => removeOption(question.id, optIndex)}\n                              >\n                                <Trash2 className=\"h-4 w-4\" />\n                              </Button>\n                            )}\n                          </div>\n                        ))}\n                        <Button\n                          type=\"button\"\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={() => addOption(question.id)}\n                        >\n                          <Plus className=\"h-4 w-4 mr-2\" />\n                          Ajouter une option\n                        </Button>\n                      </div>\n                    )}\n\n                    {/* Réponse pour Vrai/Faux */}\n                    {question.question_type === 'true_false' && (\n                      <div>\n                        <Label>Bonne réponse *</Label>\n                        <select\n                          value={question.correct_answer || ''}\n                          onChange={(e) => updateQuestion(question.id, { correct_answer: e.target.value })}\n                          className=\"w-full px-4 py-2 border rounded-lg\"\n                        >\n                          <option value=\"\">Sélectionner...</option>\n                          <option value=\"true\">Vrai</option>\n                          <option value=\"false\">Faux</option>\n                        </select>\n                      </div>\n                    )}\n\n                    {/* Réponse pour réponse courte */}\n                    {question.question_type === 'short_answer' && (\n                      <div className=\"space-y-2\">\n                        <div>\n                          <Label>Bonne réponse *</Label>\n                          <Input\n                            value={question.correct_answer || ''}\n                            onChange={(e) => updateQuestion(question.id, { correct_answer: e.target.value })}\n                            placeholder=\"Réponse attendue\"\n                          />\n                        </div>\n                        <div>\n                          <Label>Pattern regex (optionnel)</Label>\n                          <Input\n                            value={question.correct_answer_pattern || ''}\n                            onChange={(e) => updateQuestion(question.id, { correct_answer_pattern: e.target.value })}\n                            placeholder=\"Ex: ^(oui|yes)$ pour accepter 'oui' ou 'yes'\"\n                          />\n                          <p className=\"text-xs text-muted-foreground mt-1\">\n                            Permet une validation flexible (insensible à la casse par défaut)\n                          </p>\n                        </div>\n                      </div>\n                    )}\n\n                    {/* Réponse pour numérique */}\n                    {question.question_type === 'numeric' && (\n                      <div>\n                        <Label>Bonne réponse (nombre) *</Label>\n                        <Input\n                          type=\"number\"\n                          step=\"0.01\"\n                          value={question.correct_answer || ''}\n                          onChange={(e) => updateQuestion(question.id, { correct_answer: e.target.value })}\n                          placeholder=\"Ex: 42\"\n                        />\n                      </div>\n                    )}\n\n                    {/* Note pour dissertation */}\n                    {question.question_type === 'essay' && (\n                      <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-3 text-sm text-blue-800\">\n                        <strong>Note :</strong> Les questions de type \"Dissertation\" nécessitent une correction manuelle.\n                        La note sera attribuée par l'enseignant après correction.\n                      </div>\n                    )}\n\n                    {/* Explication */}\n                    <div>\n                      <Label>Explication (optionnel)</Label>\n                      <Textarea\n                        value={question.explanation || ''}\n                        onChange={(e) => updateQuestion(question.id, { explanation: e.target.value })}\n                        placeholder=\"Explication de la réponse correcte (affichée après correction)\"\n                        rows={2}\n                      />\n                    </div>\n                  </CardContent>\n                </Card>\n              ))\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Actions */}\n        <div className=\"flex items-center justify-end gap-4\">\n          <Link href=\"/dashboard/evaluations/templates\">\n            <Button type=\"button\" variant=\"outline\">\n              Annuler\n            </Button>\n          </Link>\n          <Button type=\"submit\" disabled={createMutation.isPending || questions.length === 0}>\n            {createMutation.isPending ? 'Création...' : 'Créer le modèle'}\n          </Button>\n        </div>\n      </form>\n    </div>\n  )\n}\n\n\n"],"names":[],"mappings":"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"}