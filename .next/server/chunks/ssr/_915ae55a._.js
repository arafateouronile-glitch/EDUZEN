module.exports=[641710,a=>{"use strict";let b=(0,a.i(170106).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);a.s(["Clock",()=>b],641710)},400187,a=>{"use strict";var b=a.i(298621);let c=a=>"boolean"==typeof a?`${a}`:0===a?"0":a,d=b.clsx;a.s(["cva",0,(a,b)=>e=>{var f;if((null==b?void 0:b.variants)==null)return d(a,null==e?void 0:e.class,null==e?void 0:e.className);let{variants:g,defaultVariants:h}=b,i=Object.keys(g).map(a=>{let b=null==e?void 0:e[a],d=null==h?void 0:h[a];if(null===b)return null;let f=c(b)||c(d);return g[a][f]}),j=e&&Object.entries(e).reduce((a,b)=>{let[c,d]=b;return void 0===d||(a[c]=d),a},{});return d(a,i,null==b||null==(f=b.compoundVariants)?void 0:f.reduce((a,b)=>{let{class:c,className:d,...e}=b;return Object.entries(e).every(a=>{let[b,c]=a;return Array.isArray(c)?c.includes({...h,...j}[b]):({...h,...j})[b]===c})?[...a,c,d]:a},[]),null==e?void 0:e.class,null==e?void 0:e.className)}])},254161,a=>{"use strict";var b=a.i(187924),c=a.i(400187),d=a.i(497895);let e=(0,c.cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground border-border hover:bg-accent hover:text-accent-foreground",success:"border-transparent bg-success-primary text-white shadow hover:bg-brand-blue-dark",warning:"border-transparent bg-warning-primary text-white shadow hover:bg-brand-cyan-dark",premium:"border-transparent bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 text-white shadow-lg shadow-purple-500/50 hover:shadow-xl hover:shadow-purple-500/60",glass:"border-white/20 bg-white/10 backdrop-blur-md text-foreground shadow-lg"},size:{default:"px-2.5 py-0.5 text-xs",sm:"px-2 py-0.5 text-xs",lg:"px-3 py-1 text-sm"}},defaultVariants:{variant:"default",size:"default"}});function f({className:a,variant:c,size:f,dot:g,pulse:h,children:i,...j}){return(0,b.jsxs)("div",{className:(0,d.cn)(e({variant:c,size:f}),a),...j,children:[g&&(0,b.jsx)("span",{className:(0,d.cn)("mr-1.5 h-1.5 w-1.5 rounded-full","success"===c&&"bg-white/80","warning"===c&&"bg-white/80","default"===c&&"bg-white/80",h&&"animate-pulse")}),i]})}a.s(["Badge",()=>f])},284505,a=>{"use strict";let b=(0,a.i(170106).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);a.s(["Download",()=>b],284505)},177156,a=>{"use strict";let b=(0,a.i(170106).default)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Eye",()=>b],177156)},93518,a=>{"use strict";let b=(0,a.i(170106).default)("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);a.s(["Award",()=>b],93518)},52663,a=>{"use strict";var b=a.i(187924),c=a.i(433217),d=a.i(913216),e=a.i(269240),f=a.i(703130),g=a.i(340695),h=a.i(254161),i=a.i(953722),j=a.i(284505),k=a.i(177156),l=a.i(941675),m=a.i(111269),n=a.i(641710),o=a.i(93518),p=a.i(238246),q=a.i(497895);a.i(460355);var r=a.i(346271),s=a.i(325383);function t(){let{user:a}=(0,d.useAuth)(),t=(0,e.createClient)(),{data:u}=(0,c.useQuery)({queryKey:["student-id",a?.email],queryFn:async()=>{if(!a?.email)return null;let{data:b,error:c}=await t.from("students").select("id").eq("email",a.email).single();return c?(s.logger.warn("Portal Portfolios - Student not found",{error:(0,s.sanitizeError)(c)}),null):b?.id},enabled:!!a?.email}),{data:v,isLoading:w}=(0,c.useQuery)({queryKey:["student-portfolios",u],queryFn:async()=>{if(!u)return[];let{data:a,error:b}=await t.from("learning_portfolios").select(`
          *,
          template:learning_portfolio_templates(id, name, description, primary_color, secondary_color),
          session:sessions(id, name, start_date, end_date, formations(id, name))
        `).eq("student_id",u).eq("is_visible_to_student",!0).order("updated_at",{ascending:!1});return b?("PGRST116"===b.code||b.message?.includes("does not exist")?s.logger.info("Portal Portfolios - Table does not exist yet"):s.logger.error("Portal Portfolios - Error fetching portfolios",b,{studentId:(0,s.maskId)(u),error:(0,s.sanitizeError)(b)}),[]):a||[]},enabled:!!u});return(0,b.jsxs)("div",{className:"container mx-auto py-8 px-4 max-w-4xl",children:[(0,b.jsxs)(r.motion.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 mb-2 flex items-center gap-3",children:[(0,b.jsx)(i.BookOpen,{className:"h-8 w-8 text-brand-blue"}),"Mes livrets d'apprentissage"]}),(0,b.jsx)("p",{className:"text-gray-600",children:"Consultez et téléchargez vos livrets d'apprentissage validés par vos formateurs"})]}),w?(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-blue"})}):v?.length===0?(0,b.jsx)(f.Card,{children:(0,b.jsxs)(f.CardContent,{className:"py-12 text-center",children:[(0,b.jsx)(i.BookOpen,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun livret disponible"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Vos livrets d'apprentissage apparaîtront ici une fois qu'ils auront été complétés et validés par vos formateurs."})]})}):(0,b.jsx)("div",{className:"space-y-4",children:v?.map((a,c)=>{var d;let e,o=(d=a.status,(e={draft:{label:"En préparation",color:"bg-gray-100 text-gray-700",icon:(0,b.jsx)(n.Clock,{className:"h-4 w-4"})},in_progress:{label:"En cours",color:"bg-blue-100 text-blue-700",icon:(0,b.jsx)(n.Clock,{className:"h-4 w-4"})},completed:{label:"Terminé",color:"bg-green-100 text-green-700",icon:(0,b.jsx)(m.CheckCircle2,{className:"h-4 w-4"})},validated:{label:"Validé",color:"bg-green-100 text-green-700",icon:(0,b.jsx)(m.CheckCircle2,{className:"h-4 w-4"})}})[d]||e.draft),s=a.template;return(0,b.jsx)(r.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*c},children:(0,b.jsx)(f.Card,{className:"overflow-hidden hover:shadow-lg transition-shadow",style:{borderLeftWidth:4,borderLeftColor:s?.primary_color||"#335ACF"},children:(0,b.jsx)(f.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)("div",{className:"w-14 h-14 rounded-xl flex items-center justify-center flex-shrink-0",style:{backgroundColor:`${s?.primary_color||"#335ACF"}15`},children:(0,b.jsx)(i.BookOpen,{className:"h-7 w-7",style:{color:s?.primary_color||"#335ACF"}})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:s?.name||"Livret d'apprentissage"}),a.session&&(0,b.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[a.session.formations?.name," - ",a.session.name]})]}),(0,b.jsxs)(h.Badge,{className:(0,q.cn)("flex items-center gap-1",o.color),children:[o.icon,o.label]})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-4 mt-3 text-sm text-gray-500",children:[a.session?.start_date&&(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(l.Calendar,{className:"h-4 w-4"}),(0,q.formatDate)(a.session.start_date)," - ",(0,q.formatDate)(a.session.end_date)]}),a.validated_at&&(0,b.jsxs)("span",{className:"flex items-center gap-1 text-green-600",children:[(0,b.jsx)(m.CheckCircle2,{className:"h-4 w-4"}),"Validé le ",(0,q.formatDate)(a.validated_at)]})]}),(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs mb-1",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Progression"}),(0,b.jsxs)("span",{className:"font-medium",style:{color:s?.primary_color||"#335ACF"},children:[Math.round(a.progress_percentage||0),"%"]})]}),(0,b.jsx)("div",{className:"w-full h-2 bg-gray-100 rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${a.progress_percentage||0}%`,backgroundColor:s?.primary_color||"#335ACF"}})})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 mt-4",children:[(0,b.jsx)(p.default,{href:`/portal/portfolios/${a.id}`,children:(0,b.jsxs)(g.Button,{size:"sm",children:[(0,b.jsx)(k.Eye,{className:"h-4 w-4 mr-2"}),"Consulter"]})}),a.pdf_url&&(0,b.jsx)("a",{href:a.pdf_url,target:"_blank",rel:"noopener noreferrer",children:(0,b.jsxs)(g.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(j.Download,{className:"h-4 w-4 mr-2"}),"Télécharger PDF"]})})]})]})]})})})},a.id)})}),(0,b.jsx)(f.Card,{className:"mt-8 bg-blue-50 border-blue-200",children:(0,b.jsx)(f.CardContent,{className:"py-4",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(o.Award,{className:"h-6 w-6 text-blue-600 flex-shrink-0 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-medium text-blue-900",children:"À propos des livrets d'apprentissage"}),(0,b.jsx)("p",{className:"text-sm text-blue-700 mt-1",children:"Vos livrets d'apprentissage documentent votre progression et l'acquisition de vos compétences tout au long de votre formation. Ils sont remplis par vos formateurs et constituent un document officiel attestant de votre parcours."})]})]})})})]})}a.s(["default",()=>t])}];

//# sourceMappingURL=_915ae55a._.js.map