{"version":3,"sources":["../../../../components/public/catalog-styles.tsx/__nextjs-internal-proxy.mjs","../../../../components/public/catalog-navbar.tsx/__nextjs-internal-proxy.mjs","../../../../components/public/catalog-footer.tsx/__nextjs-internal-proxy.mjs","../../../../components/public/program-detail.tsx/__nextjs-internal-proxy.mjs","../../../../app/programmes/%5Bid%5D/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const CatalogStyles = registerClientReference(\n    function() { throw new Error(\"Attempted to call CatalogStyles() from the server but CatalogStyles is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/public/catalog-styles.tsx\",\n    \"CatalogStyles\",\n);\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const CatalogNavbar = registerClientReference(\n    function() { throw new Error(\"Attempted to call CatalogNavbar() from the server but CatalogNavbar is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/public/catalog-navbar.tsx\",\n    \"CatalogNavbar\",\n);\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const CatalogFooter = registerClientReference(\n    function() { throw new Error(\"Attempted to call CatalogFooter() from the server but CatalogFooter is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/public/catalog-footer.tsx\",\n    \"CatalogFooter\",\n);\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const PublicProgramDetail = registerClientReference(\n    function() { throw new Error(\"Attempted to call PublicProgramDetail() from the server but PublicProgramDetail is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/public/program-detail.tsx\",\n    \"PublicProgramDetail\",\n);\n","/**\n * Page publique - Détail d'un programme\n * Route: /programmes/[id]\n * Affiche les détails d'un programme avec ses formations et sessions\n * Personnalisée pour l'organisme de formation\n */\n\nimport { Metadata } from 'next'\nimport { notFound } from 'next/navigation'\nimport { PublicProgramDetail } from '@/components/public/program-detail'\nimport { createClient } from '@/lib/supabase/server'\nimport { CatalogNavbar } from '@/components/public/catalog-navbar'\nimport { CatalogFooter } from '@/components/public/catalog-footer'\nimport { CatalogStyles } from '@/components/public/catalog-styles'\n\ninterface PageProps {\n  params: { id: string }\n}\n\nexport async function generateMetadata({ params }: PageProps): Promise<Metadata> {\n  const supabase = await createClient()\n  const { data: program } = await supabase\n    .from('programs')\n    .select(`\n      *,\n      organizations(name, code)\n    `)\n    .eq('id', params.id)\n    .eq('is_public', true)\n    .eq('is_active', true)\n    .maybeSingle()\n\n  if (!program) {\n    return {\n      title: 'Programme non trouvé',\n    }\n  }\n\n  const organizationName = (program.organizations as any)?.name || 'Organisme de Formation'\n\n  return {\n    title: `${program.name} | ${organizationName}`,\n    description: program.public_description || program.description || '',\n    openGraph: {\n      title: program.name,\n      description: program.public_description || program.description || '',\n      images: program.public_image_url ? [program.public_image_url] : [],\n      type: 'website',\n    },\n  }\n}\n\nexport default async function ProgramDetailPage({ params }: PageProps) {\n  const supabase = await createClient()\n\n  // Récupérer le programme avec ses formations et sessions\n  const { data: program } = await supabase\n    .from('programs')\n    .select(`\n      *,\n      formations(\n        *,\n        sessions(*)\n      ),\n      organizations(*)\n    `)\n    .eq('id', params.id)\n    .eq('is_public', true)\n    .eq('is_active', true)\n    .maybeSingle()\n\n  if (!program) {\n    notFound()\n  }\n\n  const organization = (program.organizations as any) || null\n\n  if (!organization) {\n    notFound()\n  }\n\n  // Récupérer les paramètres du catalogue public\n  const { data: catalogSettings } = await supabase\n    .from('public_catalog_settings')\n    .select('*')\n    .eq('organization_id', organization.id)\n    .eq('is_enabled', true)\n    .maybeSingle()\n\n  // Filtrer les formations et sessions actives\n  const programWithActiveContent = {\n    ...program,\n    formations: (program.formations || [])\n      .filter((f: any) => f.is_active)\n      .map((formation: any) => ({\n        ...formation,\n        sessions: (formation.sessions || []).filter(\n          (s: any) => s.status === 'scheduled' || s.status === 'ongoing'\n        ),\n      })),\n  }\n\n  // Utiliser les valeurs des settings ou celles par défaut\n  const logoUrl = catalogSettings?.logo_url || organization.logo_url\n  const primaryColor = catalogSettings?.primary_color || '#274472'\n\n  return (\n    <>\n      <CatalogStyles primaryColor={primaryColor} />\n      <CatalogNavbar \n        organizationName={organization.name}\n        logoUrl={logoUrl}\n        primaryColor={primaryColor}\n      />\n      <div className=\"min-h-screen bg-white\">\n        <PublicProgramDetail \n          program={programWithActiveContent} \n          primaryColor={primaryColor}\n          organizationCode={organization.code || undefined}\n        />\n      </div>\n      <CatalogFooter\n        organizationName={organization.name}\n        footerContent={catalogSettings?.footer_text}\n        contactEmail={catalogSettings?.contact_email || organization.email}\n        contactPhone={catalogSettings?.contact_phone || organization.phone}\n        contactAddress={catalogSettings?.contact_address || organization.address}\n        primaryColor={primaryColor}\n      />\n    </>\n  )\n}\n"],"names":[],"mappings":"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","ignoreList":[0,1,2,3]}