{"version":3,"sources":["../../../../node_modules/lucide-react/src/icons/arrow-left.ts","../../../../lib/validations/schemas.ts","../../../../lib/errors/error-handler.ts","../../../../lib/utils/supabase-helpers.ts","../../../../lib/utils/validators.ts","../../../../lib/services/invoice.service.ts","../../../../app/%28dashboard%29/dashboard/payments/new/page.tsx"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ArrowLeft\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTIgMTktNy03IDctNyIgLz4KICA8cGF0aCBkPSJNMTkgMTJINSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/arrow-left\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowLeft = createLucideIcon('ArrowLeft', [\n  ['path', { d: 'm12 19-7-7 7-7', key: '1l729n' }],\n  ['path', { d: 'M19 12H5', key: 'x3x0zl' }],\n]);\n\nexport default ArrowLeft;\n","import { z } from 'zod'\n\n// Schéma pour la création d'un étudiant\nexport const studentSchema = z.object({\n  first_name: z.string().min(1, 'Le prénom est requis').max(100, 'Le prénom est trop long'),\n  last_name: z.string().min(1, 'Le nom est requis').max(100, 'Le nom est trop long'),\n  date_of_birth: z.string().optional().or(z.literal('')),\n  gender: z.enum(['male', 'female', 'other']).optional().or(z.literal('')),\n  email: z.string().email('Email invalide').optional().or(z.literal('')),\n  phone: z.string().optional().or(z.literal('')),\n  address: z.string().optional().or(z.literal('')),\n  city: z.string().optional().or(z.literal('')),\n  class_id: z.string().optional().or(z.literal('')),\n  enrollment_date: z.string().min(1, 'La date d\\'inscription est requise'),\n  // Tuteur\n  guardian_first_name: z.string().min(1, 'Le prénom du tuteur est requis'),\n  guardian_last_name: z.string().min(1, 'Le nom du tuteur est requis'),\n  guardian_relationship: z.enum(['parent', 'guardian', 'other']).default('parent'),\n  guardian_phone_primary: z.string().min(1, 'Le téléphone principal du tuteur est requis'),\n  guardian_phone_secondary: z.string().optional().or(z.literal('')),\n  guardian_email: z.string().email('Email invalide').optional().or(z.literal('')),\n  guardian_address: z.string().optional().or(z.literal('')),\n})\n\n// Schéma pour la mise à jour d'un étudiant\nexport const studentUpdateSchema = z.object({\n  first_name: z.string().min(1, 'Le prénom est requis').max(100, 'Le prénom est trop long'),\n  last_name: z.string().min(1, 'Le nom est requis').max(100, 'Le nom est trop long'),\n  date_of_birth: z.string().optional().or(z.literal('')),\n  gender: z.enum(['male', 'female', 'other']).optional().or(z.literal('')),\n  email: z.string().email('Email invalide').optional().or(z.literal('')),\n  phone: z.string().optional().or(z.literal('')),\n  address: z.string().optional().or(z.literal('')),\n  city: z.string().optional().or(z.literal('')),\n  class_id: z.string().optional().or(z.literal('')),\n  enrollment_date: z.string().min(1, 'La date d\\'inscription est requise'),\n  status: z.enum(['active', 'inactive', 'graduated']).default('active'),\n})\n\n// Schéma pour la création d'un programme\nexport const programSchema = z.object({\n  code: z.string().min(1, 'Le code est requis').max(50, 'Le code est trop long'),\n  name: z.string().min(1, 'Le nom est requis').max(200, 'Le nom est trop long'),\n  subtitle: z.string().optional().or(z.literal('')),\n  description: z.string().optional().or(z.literal('')),\n  category: z.string().optional().or(z.literal('')),\n  program_version: z.string().optional().or(z.literal('')),\n  version_date: z.string().optional().or(z.literal('')),\n  duration_hours: z.string().optional().or(z.literal('')),\n  duration_days: z.string().optional().or(z.literal('')),\n  photo_url: z.string().url('URL invalide').optional().or(z.literal('')),\n  price: z.string().optional().or(z.literal('')), // Prix générique ou entreprise\n  price_enterprise: z.string().optional().or(z.literal('')),\n  price_individual: z.string().optional().or(z.literal('')),\n  price_freelance: z.string().optional().or(z.literal('')),\n  currency: z.string().default('XOF'),\n  payment_plan: z.enum(['full', 'installment', 'free']).default('full'),\n  published_online: z.boolean().default(false),\n  is_public: z.boolean().default(false),\n  eligible_cpf: z.boolean().default(false),\n  cpf_code: z.string().optional().or(z.literal('')),\n  modalities: z.string().optional().or(z.literal('')),\n  training_action_type: z.string().optional().or(z.literal('')),\n  pedagogical_objectives: z.string().optional().or(z.literal('')),\n  learner_profile: z.string().optional().or(z.literal('')),\n  training_content: z.string().optional().or(z.literal('')),\n  execution_follow_up: z.string().optional().or(z.literal('')),\n  certification_modalities: z.string().optional().or(z.literal('')),\n  quality: z.string().optional().or(z.literal('')),\n  accounting_product_config: z.string().optional().or(z.literal('')),\n  edof_export_fields: z.string().optional().or(z.literal('')),\n  competence_domains: z.string().optional().or(z.literal('')),\n  prerequisites: z.string().optional().or(z.literal('')),\n  capacity_max: z.string().optional().or(z.literal('')),\n  age_min: z.string().optional().or(z.literal('')),\n  age_max: z.string().optional().or(z.literal('')),\n  certification_issued: z.boolean().default(false),\n  is_active: z.boolean().default(true),\n})\n\n// Schéma pour la création d'une formation\nexport const formationSchema = z.object({\n  program_id: z.string().min(1, 'Le programme est requis'),\n  code: z.string().min(1, 'Le code est requis').max(50, 'Le code est trop long'),\n  name: z.string().min(1, 'Le nom est requis').max(200, 'Le nom est trop long'),\n  subtitle: z.string().optional().or(z.literal('')),\n  photo_url: z.string().url('URL invalide').optional().or(z.literal('')),\n  category: z.string().optional().or(z.literal('')),\n  description: z.string().optional().or(z.literal('')),\n  program_version: z.string().optional().or(z.literal('')),\n  version_date: z.string().optional().or(z.literal('')),\n  duration_hours: z.string().optional().or(z.literal('')),\n  duration_days: z.string().optional().or(z.literal('')),\n  duration_unit: z.enum(['hours', 'days']).default('hours'),\n  price: z.string().optional().or(z.literal('')),\n  currency: z.string().default('XOF'),\n  payment_plan: z.enum(['full', 'installment', 'free']).default('full'),\n  published_online: z.boolean().default(false),\n  eligible_cpf: z.boolean().default(false),\n  cpf_code: z.string().optional().or(z.literal('')),\n  modalities: z.string().optional().or(z.literal('')),\n  training_action_type: z.string().optional().or(z.literal('')),\n  pedagogical_objectives: z.string().optional().or(z.literal('')),\n  learner_profile: z.string().optional().or(z.literal('')),\n  training_content: z.string().optional().or(z.literal('')),\n  execution_follow_up: z.string().optional().or(z.literal('')),\n  certification_modalities: z.string().optional().or(z.literal('')),\n  quality: z.string().optional().or(z.literal('')),\n  accounting_product_config: z.string().optional().or(z.literal('')),\n  edof_export_fields: z.string().optional().or(z.literal('')),\n  competence_domains: z.string().optional().or(z.literal('')),\n  prerequisites: z.string().optional().or(z.literal('')),\n  capacity_max: z.string().optional().or(z.literal('')),\n  age_min: z.string().optional().or(z.literal('')),\n  age_max: z.string().optional().or(z.literal('')),\n  certification_issued: z.boolean().default(false),\n  is_active: z.boolean().default(true),\n})\n\n// Schéma pour la création d'une session\nexport const sessionSchema = z.object({\n  formation_id: z.string().min(1, 'La formation est requise'),\n  name: z.string().min(1, 'Le nom est requis').max(200, 'Le nom est trop long'),\n  code: z.string().optional().or(z.literal('')),\n  start_date: z.string().min(1, 'La date de début est requise'),\n  end_date: z.string().min(1, 'La date de fin est requise'),\n  start_time: z.string().optional().or(z.literal('')),\n  end_time: z.string().optional().or(z.literal('')),\n  location: z.string().optional().or(z.literal('')),\n  capacity_max: z.string().optional().or(z.literal('')).refine((val) => {\n    if (!val) return true\n    const num = parseInt(val)\n    return !isNaN(num) && num > 0\n  }, 'La capacité maximale doit être un nombre entier positif'),\n  currency: z.string().default('XOF'),\n  status: z.enum(['planned', 'ongoing', 'completed', 'cancelled']).default('planned'),\n  teacher_id: z.string().optional().or(z.literal('')),\n  manager1_id: z.string().optional().or(z.literal('')),\n  manager2_id: z.string().optional().or(z.literal('')),\n  inter_entreprise: z.boolean().default(true),\n  sous_traitance: z.boolean().default(false),\n  timezone: z.string().default('Europe/Paris'),\n  program_ids: z.array(z.string()).default([]),\n}).refine((data) => {\n  if (data.start_date && data.end_date) {\n    return new Date(data.end_date) >= new Date(data.start_date)\n  }\n  return true\n}, {\n  message: 'La date de fin doit être postérieure à la date de début',\n  path: ['end_date'],\n})\n\n// Schéma pour la création d'une évaluation\nexport const evaluationSchema = z.object({\n  student_id: z.string().min(1, 'L\\'étudiant est requis'),\n  session_id: z.string().optional().or(z.literal('')),\n  subject: z.string().min(1, 'Le sujet est requis').max(200, 'Le sujet est trop long'),\n  assessment_type: z.enum([\n    'pre_formation',\n    'hot',\n    'cold',\n    'manager',\n    'instructor',\n    'funder',\n    'quiz',\n    'exam',\n    'project',\n    'other',\n  ]).default('quiz'),\n  score: z.string().min(1, 'La note est requise').refine((val) => {\n    const num = parseFloat(val)\n    return !isNaN(num) && num >= 0\n  }, 'La note doit être un nombre valide'),\n  max_score: z.string().optional().or(z.literal('')).refine((val) => {\n    if (!val) return true\n    const num = parseFloat(val)\n    return !isNaN(num) && num > 0\n  }, 'La note maximale doit être un nombre valide supérieur à 0'),\n  notes: z.string().optional().or(z.literal('')),\n  graded_at: z.string().min(1, 'La date d\\'évaluation est requise'),\n  coefficient: z.string().optional().or(z.literal('')).refine((val) => {\n    if (!val) return true\n    const num = parseFloat(val)\n    return !isNaN(num) && num > 0\n  }, 'Le coefficient doit être un nombre valide supérieur à 0'),\n  is_makeup: z.boolean().optional().default(false),\n  original_grade_id: z.string().optional().or(z.literal('')),\n  appreciation: z.string().optional().or(z.literal('')),\n  term_period: z.enum(['Q1', 'Q2', 'Q3', 'Q4', 'S1', 'S2', 'T1', 'T2', 'T3']).optional().or(z.literal('')),\n  academic_year_id: z.string().optional().or(z.literal('')),\n}).refine((data) => {\n  if (data.max_score && data.score) {\n    const score = parseFloat(data.score)\n    const maxScore = parseFloat(data.max_score)\n    return score <= maxScore\n  }\n  return true\n}, {\n  message: 'La note ne peut pas être supérieure à la note maximale',\n  path: ['score'],\n})\n\n// Schéma pour la création d'une facture ou devis\nexport const invoiceSchema = z.object({\n  student_id: z.string().min(1, 'L\\'étudiant est requis'),\n  document_type: z.enum(['quote', 'invoice']).default('invoice'),\n  invoice_number: z.string().optional().or(z.literal('')), // Peut être généré automatiquement\n  type: z.enum(['tuition', 'registration', 'other']).default('tuition'),\n  issue_date: z.string().min(1, 'La date d\\'émission est requise'),\n  due_date: z.string().min(1, 'La date d\\'échéance est requise'),\n  amount: z.string().min(1, 'Le montant est requis').refine((val) => {\n    const num = parseFloat(val)\n    return !isNaN(num) && num >= 0\n  }, 'Le montant doit être un nombre valide supérieur ou égal à 0'),\n  tax_amount: z.string().optional().or(z.literal('')).refine((val) => {\n    if (!val) return true\n    const num = parseFloat(val)\n    return !isNaN(num) && num >= 0\n  }, 'Le montant de la taxe doit être un nombre valide supérieur ou égal à 0'),\n  currency: z.string().default('XOF'),\n  status: z.enum(['draft', 'sent', 'partial', 'paid', 'overdue', 'cancelled']).default('draft'),\n  notes: z.string().optional().or(z.literal('')),\n  enrollment_id: z.string().optional().or(z.literal('')),\n}).refine((data) => {\n  if (data.issue_date && data.due_date) {\n    return new Date(data.due_date) >= new Date(data.issue_date)\n  }\n  return true\n}, {\n  message: 'La date d\\'échéance doit être postérieure à la date d\\'émission',\n  path: ['due_date'],\n})\n\n// Schéma pour la création d'un paiement\nexport const paymentSchema = z.object({\n  invoice_id: z.string().min(1, 'La facture est requise'),\n  student_id: z.string().min(1, 'L\\'étudiant est requis'),\n  amount: z.string().min(1, 'Le montant est requis').refine((val) => {\n    const num = parseFloat(val)\n    return !isNaN(num) && num > 0\n  }, 'Le montant doit être un nombre valide supérieur à 0'),\n  currency: z.string().default('XOF'),\n  payment_method: z.enum(['cash', 'mobile_money', 'card', 'bank_transfer']).default('cash'),\n  payment_provider: z.enum(['mtn', 'orange', 'airtel', 'wave']).optional().or(z.literal('')),\n  transaction_id: z.string().optional().or(z.literal('')),\n  paid_at: z.string().optional().or(z.literal('')),\n  notes: z.string().optional().or(z.literal('')),\n})\n\n// Schéma pour l'inscription\nexport const enrollmentSchema = z.object({\n  student_id: z.string().min(1, 'L\\'étudiant est requis'),\n  session_id: z.string().min(1, 'La session est requise'),\n  enrollment_date: z.string().min(1, 'La date d\\'inscription est requise'),\n  status: z.enum(['pending', 'confirmed', 'completed', 'cancelled', 'failed']).default('confirmed'),\n  payment_status: z.enum(['pending', 'partial', 'paid', 'overdue']).default('pending'),\n  total_amount: z.string().optional().or(z.literal('')).refine((val) => {\n    if (!val) return true\n    const num = parseFloat(val)\n    return !isNaN(num) && num >= 0\n  }, 'Le montant total doit être un nombre valide supérieur ou égal à 0'),\n  paid_amount: z.string().optional().or(z.literal('')).refine((val) => {\n    if (!val) return true\n    const num = parseFloat(val)\n    return !isNaN(num) && num >= 0\n  }, 'Le montant payé doit être un nombre valide supérieur ou égal à 0'),\n}).refine((data) => {\n  // Vérifier que le montant payé ne dépasse pas le montant total\n  if (data.total_amount && data.paid_amount) {\n    const total = parseFloat(data.total_amount)\n    const paid = parseFloat(data.paid_amount)\n    if (!isNaN(total) && !isNaN(paid) && paid > total) {\n      return false\n    }\n  }\n  return true\n}, {\n  message: 'Le montant payé ne peut pas dépasser le montant total',\n  path: ['paid_amount'],\n})\n\n// Type helper pour extraire le type d'un schéma\nexport type StudentFormData = z.infer<typeof studentSchema>\nexport type StudentUpdateFormData = z.infer<typeof studentUpdateSchema>\nexport type ProgramFormData = z.infer<typeof programSchema>\nexport type FormationFormData = z.infer<typeof formationSchema>\nexport type SessionFormData = z.infer<typeof sessionSchema>\nexport type EvaluationFormData = z.infer<typeof evaluationSchema>\nexport type InvoiceFormData = z.infer<typeof invoiceSchema>\nexport type PaymentFormData = z.infer<typeof paymentSchema>\nexport type EnrollmentFormData = z.infer<typeof enrollmentSchema>\n\n\n\n\n\n\n\n\n\n\n\n\n","/**\n * ErrorHandler Global - Gestion centralisée des erreurs\n * \n * Fournit :\n * - Types d'erreurs personnalisés\n * - Classification automatique des erreurs\n * - Messages utilisateur traduits\n * - Logging automatique\n * - Formatage cohérent\n */\n\nimport { logger } from '@/lib/utils/logger'\nimport type { LogContext } from '@/lib/utils/logger'\n\n// ============================================================================\n// TYPES D'ERREURS PERSONNALISÉS\n// ============================================================================\n\nexport enum ErrorCode {\n  // Erreurs d'authentification (1000-1999)\n  AUTH_REQUIRED = 'AUTH_1001',\n  AUTH_INVALID_CREDENTIALS = 'AUTH_1002',\n  AUTH_SESSION_EXPIRED = 'AUTH_1003',\n  AUTH_INSUFFICIENT_PERMISSIONS = 'AUTH_1004',\n  AUTH_2FA_REQUIRED = 'AUTH_1005',\n  AUTH_2FA_INVALID = 'AUTH_1006',\n\n  // Erreurs de validation (2000-2999)\n  VALIDATION_ERROR = 'VALID_2001',\n  VALIDATION_REQUIRED_FIELD = 'VALID_2002',\n  VALIDATION_INVALID_FORMAT = 'VALID_2003',\n  VALIDATION_UNIQUE_CONSTRAINT = 'VALID_2004',\n\n  // Erreurs de base de données (3000-3999)\n  DB_CONNECTION_ERROR = 'DB_3001',\n  DB_QUERY_ERROR = 'DB_3002',\n  DB_NOT_FOUND = 'DB_3003',\n  DB_CONSTRAINT_VIOLATION = 'DB_3004',\n  DB_FOREIGN_KEY_CONSTRAINT = 'DB_3006',\n  DB_RLS_POLICY_VIOLATION = 'DB_3005',\n\n  // Erreurs réseau/API (4000-4999)\n  NETWORK_ERROR = 'NET_4001',\n  API_TIMEOUT = 'NET_4002',\n  API_RATE_LIMIT = 'NET_4003',\n  API_SERVER_ERROR = 'NET_4004',\n  API_NOT_FOUND = 'NET_4005',\n  API_BAD_REQUEST = 'NET_4006',\n\n  // Erreurs métier (5000-5999)\n  BUSINESS_LOGIC_ERROR = 'BIZ_5001',\n  RESOURCE_LOCKED = 'BIZ_5002',\n  OPERATION_NOT_ALLOWED = 'BIZ_5003',\n  QUOTA_EXCEEDED = 'BIZ_5004',\n\n  // Erreurs système (6000-6999)\n  INTERNAL_ERROR = 'SYS_6001',\n  CONFIGURATION_ERROR = 'SYS_6002',\n  SERVICE_UNAVAILABLE = 'SYS_6003',\n}\n\nexport enum ErrorSeverity {\n  LOW = 'low',\n  MEDIUM = 'medium',\n  HIGH = 'high',\n  CRITICAL = 'critical',\n}\n\nexport interface AppErrorContext extends LogContext {\n  code?: ErrorCode\n  severity?: ErrorSeverity\n  userMessage?: string\n  retryable?: boolean\n  timestamp?: string\n}\n\n/**\n * Classe d'erreur personnalisée pour l'application\n */\nexport class AppError extends Error {\n  public readonly code: ErrorCode\n  public readonly severity: ErrorSeverity\n  public readonly userMessage: string\n  public readonly retryable: boolean\n  public readonly context: AppErrorContext\n  public readonly originalError?: Error | unknown\n\n  constructor(\n    message: string,\n    code: ErrorCode = ErrorCode.INTERNAL_ERROR,\n    severity: ErrorSeverity = ErrorSeverity.MEDIUM,\n    context: AppErrorContext = {},\n    originalError?: Error | unknown\n  ) {\n    super(message)\n    this.name = 'AppError'\n    this.code = code\n    this.severity = severity\n    this.userMessage = context.userMessage || this.getDefaultUserMessage(code)\n    this.retryable = context.retryable ?? this.isRetryable(code)\n    this.context = {\n      ...context,\n      code,\n      severity,\n      timestamp: new Date().toISOString(),\n    }\n    this.originalError = originalError\n\n    // Maintenir la stack trace\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, AppError)\n    }\n  }\n\n  /**\n   * Messages utilisateur par défaut selon le code d'erreur\n   */\n  private getDefaultUserMessage(code: ErrorCode): string {\n    const messages: Record<ErrorCode, string> = {\n      // Auth\n      [ErrorCode.AUTH_REQUIRED]: 'Vous devez être connecté pour effectuer cette action.',\n      [ErrorCode.AUTH_INVALID_CREDENTIALS]: 'Email ou mot de passe incorrect.',\n      [ErrorCode.AUTH_SESSION_EXPIRED]: 'Votre session a expiré. Veuillez vous reconnecter.',\n      [ErrorCode.AUTH_INSUFFICIENT_PERMISSIONS]: \"Vous n'avez pas les permissions nécessaires.\",\n      [ErrorCode.AUTH_2FA_REQUIRED]: 'Authentification à deux facteurs requise.',\n      [ErrorCode.AUTH_2FA_INVALID]: 'Code d\\'authentification invalide.',\n\n      // Validation\n      [ErrorCode.VALIDATION_ERROR]: 'Les données fournies ne sont pas valides.',\n      [ErrorCode.VALIDATION_REQUIRED_FIELD]: 'Certains champs obligatoires sont manquants.',\n      [ErrorCode.VALIDATION_INVALID_FORMAT]: 'Le format des données est incorrect.',\n      [ErrorCode.VALIDATION_UNIQUE_CONSTRAINT]: 'Cette valeur existe déjà.',\n\n      // Database\n      [ErrorCode.DB_CONNECTION_ERROR]: 'Impossible de se connecter à la base de données.',\n      [ErrorCode.DB_QUERY_ERROR]: 'Erreur lors de l\\'exécution de la requête.',\n      [ErrorCode.DB_NOT_FOUND]: 'Ressource introuvable.',\n      [ErrorCode.DB_CONSTRAINT_VIOLATION]: 'Cette opération viole une contrainte de la base de données.',\n      [ErrorCode.DB_FOREIGN_KEY_CONSTRAINT]: 'Cette opération viole une contrainte de clé étrangère.',\n      [ErrorCode.DB_RLS_POLICY_VIOLATION]: 'Vous n\\'avez pas accès à cette ressource.',\n\n      // Network\n      [ErrorCode.NETWORK_ERROR]: 'Erreur de connexion réseau. Vérifiez votre connexion internet.',\n      [ErrorCode.API_TIMEOUT]: 'La requête a pris trop de temps. Veuillez réessayer.',\n      [ErrorCode.API_RATE_LIMIT]: 'Trop de requêtes. Veuillez patienter quelques instants.',\n      [ErrorCode.API_SERVER_ERROR]: 'Erreur serveur. Veuillez réessayer plus tard.',\n      [ErrorCode.API_NOT_FOUND]: 'Ressource introuvable.',\n      [ErrorCode.API_BAD_REQUEST]: 'Requête invalide.',\n\n      // Business\n      [ErrorCode.BUSINESS_LOGIC_ERROR]: 'Cette opération n\\'est pas autorisée dans le contexte actuel.',\n      [ErrorCode.RESOURCE_LOCKED]: 'Cette ressource est actuellement verrouillée.',\n      [ErrorCode.OPERATION_NOT_ALLOWED]: 'Cette opération n\\'est pas autorisée.',\n      [ErrorCode.QUOTA_EXCEEDED]: 'Vous avez atteint la limite autorisée.',\n\n      // System\n      [ErrorCode.INTERNAL_ERROR]: 'Une erreur interne est survenue. Veuillez réessayer.',\n      [ErrorCode.CONFIGURATION_ERROR]: 'Erreur de configuration du système.',\n      [ErrorCode.SERVICE_UNAVAILABLE]: 'Service temporairement indisponible.',\n    }\n\n    return messages[code] || 'Une erreur inattendue est survenue.'\n  }\n\n  /**\n   * Détermine si une erreur est retryable selon son code\n   */\n  private isRetryable(code: ErrorCode): boolean {\n    const retryableCodes = [\n      ErrorCode.NETWORK_ERROR,\n      ErrorCode.API_TIMEOUT,\n      ErrorCode.API_SERVER_ERROR,\n      ErrorCode.DB_CONNECTION_ERROR,\n      ErrorCode.SERVICE_UNAVAILABLE,\n    ]\n    return retryableCodes.includes(code)\n  }\n\n  /**\n   * Convertit l'erreur en objet JSON pour logging\n   */\n  toJSON() {\n    return {\n      name: this.name,\n      message: this.message,\n      code: this.code,\n      severity: this.severity,\n      userMessage: this.userMessage,\n      retryable: this.retryable,\n      context: this.context,\n      stack: this.stack,\n      originalError: this.originalError instanceof Error\n        ? {\n            name: this.originalError.name,\n            message: this.originalError.message,\n            stack: this.originalError.stack,\n          }\n        : this.originalError,\n    }\n  }\n}\n\n// ============================================================================\n// ERROR HANDLER PRINCIPAL\n// ============================================================================\n\nexport class ErrorHandler {\n  /**\n   * Analyse et classe une erreur inconnue\n   */\n  handleError(error: unknown, context: AppErrorContext = {}): AppError {\n    // Si c'est déjà une AppError, la retourner telle quelle\n    if (error instanceof AppError) {\n      this.logError(error)\n      return error\n    }\n\n    // Si c'est une Error standard, la convertir\n    if (error instanceof Error) {\n      return this.handleStandardError(error, context)\n    }\n\n    // Si c'est une erreur Supabase\n    if (this.isSupabaseError(error)) {\n      return this.handleSupabaseError(error, context)\n    }\n\n    // Erreur inconnue\n    const appError = new AppError(\n      'Une erreur inattendue est survenue.',\n      ErrorCode.INTERNAL_ERROR,\n      ErrorSeverity.HIGH,\n      context,\n      error\n    )\n    this.logError(appError)\n    return appError\n  }\n\n  /**\n   * Gère les erreurs Error standard\n   */\n  private handleStandardError(error: Error, context: AppErrorContext): AppError {\n    const message = error.message.toLowerCase()\n\n    // Détection par message\n    let code = ErrorCode.INTERNAL_ERROR\n    let severity = ErrorSeverity.MEDIUM\n\n    if (message.includes('network') || message.includes('fetch')) {\n      code = ErrorCode.NETWORK_ERROR\n      severity = ErrorSeverity.MEDIUM\n    } else if (message.includes('timeout')) {\n      code = ErrorCode.API_TIMEOUT\n      severity = ErrorSeverity.MEDIUM\n    } else if (message.includes('unauthorized') || message.includes('401')) {\n      code = ErrorCode.AUTH_REQUIRED\n      severity = ErrorSeverity.HIGH\n    } else if (message.includes('forbidden') || message.includes('403')) {\n      code = ErrorCode.AUTH_INSUFFICIENT_PERMISSIONS\n      severity = ErrorSeverity.HIGH\n    } else if (message.includes('not found') || message.includes('404')) {\n      code = ErrorCode.DB_NOT_FOUND\n      severity = ErrorSeverity.LOW\n    } else if (message.includes('validation') || message.includes('invalid')) {\n      code = ErrorCode.VALIDATION_ERROR\n      severity = ErrorSeverity.LOW\n    }\n\n    const appError = new AppError(error.message, code, severity, context, error)\n    this.logError(appError)\n    return appError\n  }\n\n  /**\n   * Gère les erreurs Supabase\n   */\n  private handleSupabaseError(error: any, context: AppErrorContext): AppError {\n    const code = error.code || error.status\n    const message = error.message || 'Erreur Supabase'\n\n    // Si un code d'erreur est fourni dans le contexte, l'utiliser en priorité\n    let errorCode = context.code || ErrorCode.DB_QUERY_ERROR\n    let severity = ErrorSeverity.MEDIUM\n\n    // Classification par code Supabase (seulement si pas de code dans le contexte)\n    if (!context.code) {\n      switch (code) {\n        case 'PGRST116':\n        case '42P01':\n          errorCode = ErrorCode.DB_NOT_FOUND\n          severity = ErrorSeverity.LOW\n          break\n        case '42501':\n          errorCode = ErrorCode.DB_RLS_POLICY_VIOLATION\n          severity = ErrorSeverity.HIGH\n          break\n        case '23505':\n          errorCode = ErrorCode.VALIDATION_UNIQUE_CONSTRAINT\n          severity = ErrorSeverity.LOW\n          break\n        case '23503':\n          errorCode = ErrorCode.DB_CONSTRAINT_VIOLATION\n          severity = ErrorSeverity.MEDIUM\n          break\n        case 'PGRST301':\n        case '400':\n          errorCode = ErrorCode.API_BAD_REQUEST\n          severity = ErrorSeverity.LOW\n          break\n        case '401':\n          errorCode = ErrorCode.AUTH_REQUIRED\n          severity = ErrorSeverity.HIGH\n          break\n        case '403':\n          errorCode = ErrorCode.AUTH_INSUFFICIENT_PERMISSIONS\n          severity = ErrorSeverity.HIGH\n          break\n        case '404':\n          errorCode = ErrorCode.API_NOT_FOUND\n          severity = ErrorSeverity.LOW\n          break\n        case '500':\n          errorCode = ErrorCode.API_SERVER_ERROR\n          severity = ErrorSeverity.HIGH\n          break\n      }\n    }\n\n    // Ajuster la sévérité selon le code d'erreur\n    if (errorCode === ErrorCode.DB_FOREIGN_KEY_CONSTRAINT) {\n      severity = ErrorSeverity.MEDIUM\n    }\n\n    const appError = new AppError(message, errorCode, severity, context, error)\n    this.logError(appError)\n    return appError\n  }\n\n  /**\n   * Vérifie si une erreur est une erreur Supabase\n   */\n  private isSupabaseError(error: any): boolean {\n    return (\n      error &&\n      (error.code || error.status || error.message) &&\n      (typeof error.code === 'string' || typeof error.status === 'number')\n    )\n  }\n\n  /**\n   * Log l'erreur selon sa sévérité\n   */\n  private logError(error: AppError) {\n    const logContext: LogContext = {\n      ...error.context,\n      code: error.code,\n      severity: error.severity,\n      retryable: error.retryable,\n    }\n\n    switch (error.severity) {\n      case ErrorSeverity.CRITICAL:\n      case ErrorSeverity.HIGH:\n        logger.error(error.message, error.originalError || error, logContext)\n        break\n      case ErrorSeverity.MEDIUM:\n        logger.warn(error.message, logContext)\n        break\n      case ErrorSeverity.LOW:\n        logger.info(`Error: ${error.message}`, logContext)\n        break\n    }\n  }\n\n  /**\n   * Crée une erreur de validation\n   */\n  createValidationError(message: string, field?: string): AppError {\n    return new AppError(\n      message,\n      ErrorCode.VALIDATION_ERROR,\n      ErrorSeverity.LOW,\n      { field, userMessage: message }\n    )\n  }\n\n  /**\n   * Crée une erreur d'authentification\n   */\n  createAuthError(code: ErrorCode, message?: string): AppError {\n    return new AppError(\n      message || 'Erreur d\\'authentification',\n      code,\n      ErrorSeverity.HIGH\n    )\n  }\n\n  /**\n   * Crée une erreur de base de données\n   */\n  createDatabaseError(message: string, originalError?: unknown): AppError {\n    return new AppError(\n      message,\n      ErrorCode.DB_QUERY_ERROR,\n      ErrorSeverity.MEDIUM,\n      {},\n      originalError\n    )\n  }\n\n  /**\n   * Crée une erreur \"Not Found\"\n   */\n  createNotFoundError(message: string, context?: AppErrorContext): AppError {\n    return new AppError(\n      message,\n      ErrorCode.DB_NOT_FOUND,\n      ErrorSeverity.LOW,\n      context\n    )\n  }\n}\n\n// Export d'une instance singleton\nexport const errorHandler = new ErrorHandler()\n\n// Export de fonctions helper pour faciliter l'utilisation\nexport const handleError = (error: unknown, context?: AppErrorContext) =>\n  errorHandler.handleError(error, context)\n\nexport const createValidationError = (message: string, field?: string) =>\n  errorHandler.createValidationError(message, field)\n\nexport const createAuthError = (code: ErrorCode, message?: string) =>\n  errorHandler.createAuthError(code, message)\n\nexport const createDatabaseError = (message: string, originalError?: unknown) =>\n  errorHandler.createDatabaseError(message, originalError)\n\nexport const createNotFoundError = (message: string, context?: AppErrorContext) =>\n  errorHandler.createNotFoundError(message, context)\n\n// Alias pour NotFoundError (compatibilité)\nexport const NotFoundError = createNotFoundError\n\n","/**\n * Helpers réutilisables pour les requêtes Supabase\n * \n * Réduit la duplication de code dans les services\n */\n\nimport { SupabaseClient } from '@supabase/supabase-js'\nimport { errorHandler, AppError, ErrorCode } from '@/lib/errors'\n\nexport interface GetAllByOrganizationOptions {\n  filters?: Record<string, unknown>\n  orderBy?: { column: string; ascending?: boolean }\n  select?: string\n  search?: { field: string; value: string }\n}\n\n/**\n * Récupère tous les enregistrements d'une organisation avec options\n */\nexport async function getAllByOrganization<T>(\n  supabase: SupabaseClient,\n  table: string,\n  organizationId: string,\n  options?: GetAllByOrganizationOptions\n): Promise<T[]> {\n  try {\n    let query = supabase\n      .from(table)\n      .select(options?.select || '*')\n      .eq('organization_id', organizationId)\n\n    // Appliquer les filtres\n    if (options?.filters) {\n      Object.entries(options.filters).forEach(([key, value]) => {\n        if (value !== undefined && value !== null) {\n          query = query.eq(key, value)\n        }\n      })\n    }\n\n    // Appliquer la recherche\n    if (options?.search) {\n      query = query.ilike(options.search.field, `%${options.search.value}%`)\n    }\n\n    // Appliquer le tri\n    if (options?.orderBy) {\n      query = query.order(options.orderBy.column, {\n        ascending: options.orderBy.ascending ?? false,\n      })\n    } else {\n      query = query.order('created_at', { ascending: false })\n    }\n\n    const { data, error } = await query\n\n    if (error) {\n      throw errorHandler.handleError(error, {\n        organizationId,\n        operation: 'getAllByOrganization',\n        table,\n      })\n    }\n\n    return (data || []) as T[]\n  } catch (error) {\n    if (error instanceof AppError) {\n      throw error\n    }\n    throw errorHandler.handleError(error, {\n      organizationId,\n      operation: 'getAllByOrganization',\n      table,\n    })\n  }\n}\n\n/**\n * Récupère un enregistrement par ID avec gestion d'erreur\n */\nexport async function getById<T>(\n  supabase: SupabaseClient,\n  table: string,\n  id: string,\n  select?: string\n): Promise<T> {\n  try {\n    const { data, error } = await supabase\n      .from(table)\n      .select(select || '*')\n      .eq('id', id)\n      .single()\n\n    if (error) {\n      if (error.code === 'PGRST116' || error.code === '42P01') {\n        throw errorHandler.handleError(error, {\n          code: ErrorCode.DB_NOT_FOUND,\n          operation: 'getById',\n          id,\n          table,\n        })\n      }\n      throw errorHandler.handleError(error, {\n        operation: 'getById',\n        id,\n        table,\n      })\n    }\n\n    if (!data) {\n      throw errorHandler.createDatabaseError(\n        `Enregistrement avec l'ID ${id} introuvable dans ${table}`,\n        { id, table }\n      )\n    }\n\n    return data as T\n  } catch (error) {\n    if (error instanceof AppError) {\n      throw error\n    }\n    throw errorHandler.handleError(error, {\n      operation: 'getById',\n      id,\n      table,\n    })\n  }\n}\n\n","/**\n * Validateurs réutilisables pour les données\n * \n * Réduit la duplication de code pour la validation\n */\n\nimport { errorHandler } from '@/lib/errors'\n\n/**\n * Valide que les champs requis sont présents\n */\nexport function validateRequired<T extends Record<string, unknown>>(\n  data: T,\n  fields: (keyof T)[]\n): void {\n  for (const field of fields) {\n    if (!data[field]) {\n      throw errorHandler.createValidationError(\n        `Le champ ${String(field)} est obligatoire`,\n        String(field)\n      )\n    }\n  }\n}\n\n/**\n * Valide qu'un email est valide\n */\nexport function validateEmail(email: string): void {\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\n  if (!emailRegex.test(email)) {\n    throw errorHandler.createValidationError(\n      'Format d\\'email invalide',\n      'email'\n    )\n  }\n}\n\n/**\n * Valide qu'un montant est positif\n */\nexport function validatePositiveAmount(amount: number, fieldName = 'amount'): void {\n  if (amount <= 0) {\n    throw errorHandler.createValidationError(\n      'Le montant doit être supérieur à 0',\n      fieldName\n    )\n  }\n}\n\n/**\n * Valide qu'une date est valide\n */\nexport function validateDate(date: string, fieldName = 'date'): void {\n  const dateObj = new Date(date)\n  if (isNaN(dateObj.getTime())) {\n    throw errorHandler.createValidationError(\n      'Format de date invalide',\n      fieldName\n    )\n  }\n}\n\n/**\n * Valide qu'une date est dans le futur\n */\nexport function validateFutureDate(date: string, fieldName = 'date'): void {\n  validateDate(date, fieldName)\n  const dateObj = new Date(date)\n  const now = new Date()\n  if (dateObj <= now) {\n    throw errorHandler.createValidationError(\n      'La date doit être dans le futur',\n      fieldName\n    )\n  }\n}\n\n\n\n\n\n","import { createClient } from '@/lib/supabase/client'\nimport type { SupabaseClient } from '@supabase/supabase-js'\nimport { Database } from '@/types/database.types'\nimport { errorHandler, ErrorCode, AppError } from '@/lib/errors'\nimport { logger } from '@/lib/utils/logger'\nimport { getAllByOrganization, getById } from '@/lib/utils/supabase-helpers'\nimport { generateUniqueNumber } from '@/lib/utils/number-generator'\nimport { validateRequired, validatePositiveAmount } from '@/lib/utils/validators'\n\ntype Invoice = Database['public']['Tables']['invoices']['Row']\ntype InvoiceInsert = Database['public']['Tables']['invoices']['Insert']\ntype InvoiceUpdate = Database['public']['Tables']['invoices']['Update']\n\nexport class InvoiceService {\n  private supabase: SupabaseClient<Database>\n\n\n  constructor(supabaseClient?: SupabaseClient<Database>) {\n\n    this.supabase = supabaseClient || createClient()\n\n  }\n\n  /**\n   * Récupère toutes les factures d'une organisation\n   */\n  async getAll(organizationId: string, filters?: {\n    studentId?: string\n    status?: Invoice['status']\n    search?: string\n    documentType?: 'quote' | 'invoice'\n  }) {\n    try {\n      // Utiliser le helper pour réduire la duplication\n      const filtersMap: Record<string, unknown> = {}\n      if (filters?.studentId) filtersMap.student_id = filters.studentId\n      if (filters?.status) filtersMap.status = filters.status\n      if (filters?.documentType) filtersMap.document_type = filters.documentType\n\n      return getAllByOrganization<Invoice>(\n        this.supabase,\n        'invoices',\n        organizationId,\n        {\n          select: '*, students(id, first_name, last_name, student_number), payments(id, amount, status, paid_at)',\n          filters: filtersMap,\n          search: filters?.search ? { field: 'invoice_number', value: filters.search } : undefined,\n          orderBy: { column: 'issue_date', ascending: false },\n        }\n      )\n    } catch (error) {\n      if (error instanceof AppError) {\n        throw error\n      }\n      throw errorHandler.handleError(error, {\n        organizationId,\n        operation: 'getAll',\n      })\n    }\n  }\n\n  /**\n   * Récupère une facture par son ID\n   */\n  async getById(id: string) {\n    try {\n      // Utiliser le helper pour réduire la duplication\n      return getById<Invoice>(\n        this.supabase,\n        'invoices',\n        id,\n        '*, students(*), enrollments(*), payments(*)'\n      )\n    } catch (error) {\n      if (error instanceof AppError) {\n        throw error\n      }\n      throw errorHandler.handleError(error, {\n        operation: 'getById',\n        id,\n      })\n    }\n  }\n\n  /**\n   * Génère un numéro de facture unique\n   */\n  private async generateInvoiceNumber(organizationId: string, documentType: 'quote' | 'invoice' = 'invoice'): Promise<string> {\n    const year = new Date().getFullYear().toString()\n    \n    // Trouver le dernier numéro pour cette organisation et ce type pour l'année en cours\n    // Format recherché: ANNEE-NUMERO (ex: 2025-001)\n    const { data: lastInvoice } = await this.supabase\n      .from('invoices')\n      .select('invoice_number')\n      .eq('organization_id', organizationId)\n      .eq('document_type', documentType)\n      .like('invoice_number', `${year}-%`)\n      .order('invoice_number', { ascending: false })\n      .limit(1)\n      .maybeSingle()\n\n    let sequence = 1\n    if (lastInvoice?.invoice_number) {\n      // Extraire le numéro de séquence du format ANNEE-NUMERO\n      const parts = lastInvoice.invoice_number.split('-')\n      if (parts.length >= 2 && parts[0] === year) {\n        const lastSequence = parseInt(parts[1] || '0', 10)\n        sequence = lastSequence + 1\n      }\n    }\n\n    // Format: ANNEE-NUMERO avec 3 chiffres (ex: 2025-001, 2025-002, etc.)\n    return `${year}-${String(sequence).padStart(3, '0')}`\n  }\n\n  /**\n   * Crée une nouvelle facture\n   */\n  async create(invoice: InvoiceInsert) {\n    try {\n      // Utiliser le helper de validation pour réduire la duplication\n      validateRequired(invoice, ['organization_id', 'student_id'])\n\n      // Générer le numéro de facture si vide ou non fourni\n      const invoiceData = invoice as InvoiceInsert & { invoice_number?: string; document_type?: 'quote' | 'invoice' }\n      let invoiceNumber = invoiceData.invoice_number\n      if (!invoiceNumber || invoiceNumber.trim() === '') {\n        const orgId = invoice.organization_id\n        if (!orgId) {\n          throw errorHandler.createValidationError('Organization ID is required to create an invoice.')\n        }\n        invoiceNumber = await this.generateInvoiceNumber(\n          orgId,\n          invoiceData.document_type || 'invoice'\n        )\n      }\n\n      const { data, error } = await this.supabase\n        .from('invoices')\n        .insert({\n          ...invoice,\n          invoice_number: invoiceNumber,\n        } as InvoiceInsert)\n        .select()\n        .single()\n\n      if (error) {\n        if (error.code === '23505') {\n          throw errorHandler.handleError(error, {\n            code: ErrorCode.VALIDATION_UNIQUE_CONSTRAINT,\n            operation: 'create',\n            field: 'invoice_number',\n          })\n        }\n        if (error.code === '42501') {\n          throw errorHandler.handleError(error, {\n            code: ErrorCode.DB_RLS_POLICY_VIOLATION,\n            operation: 'create',\n          })\n        }\n        throw errorHandler.handleError(error, {\n          operation: 'create',\n          invoice,\n        })\n      }\n\n      logger.info('Facture créée avec succès', {\n        id: data?.id,\n        organizationId: invoice.organization_id || undefined,\n        invoiceNumber: data?.invoice_number,\n      })\n\n      return data\n    } catch (error) {\n      if (error instanceof AppError) {\n        throw error\n      }\n      throw errorHandler.handleError(error, {\n        operation: 'create',\n        invoice,\n      })\n    }\n  }\n\n  /**\n   * Met à jour une facture\n   */\n  async update(id: string, updates: InvoiceUpdate) {\n    try {\n      const { data, error } = await this.supabase\n        .from('invoices')\n        .update(updates)\n        .eq('id', id)\n        .select()\n        .single()\n\n      if (error) {\n        if (error.code === 'PGRST116' || error.code === '42P01') {\n          throw errorHandler.handleError(error, {\n            code: ErrorCode.DB_NOT_FOUND,\n            operation: 'update',\n            id,\n          })\n        }\n        if (error.code === '42501') {\n          throw errorHandler.handleError(error, {\n            code: ErrorCode.DB_RLS_POLICY_VIOLATION,\n            operation: 'update',\n            id,\n          })\n        }\n        throw errorHandler.handleError(error, {\n          operation: 'update',\n          id,\n          updates,\n        })\n      }\n\n      if (!data) {\n        throw errorHandler.createDatabaseError(\n          `Facture avec l'ID ${id} introuvable pour la mise à jour`,\n          { id }\n        )\n      }\n\n      logger.info('Facture mise à jour avec succès', {\n        id,\n        updates,\n      })\n\n      return data\n    } catch (error) {\n      if (error instanceof AppError) {\n        throw error\n      }\n      throw errorHandler.handleError(error, {\n        operation: 'update',\n        id,\n        updates,\n      })\n    }\n  }\n\n  /**\n   * Génère des factures en masse pour une classe\n   */\n  async generateForClass(\n    organizationId: string,\n    classId: string,\n    amount: number,\n    currency: string,\n    dueDate: string,\n    type: 'tuition' | 'registration' | 'other' = 'tuition'\n  ) {\n    // Récupérer tous les élèves actifs de la classe\n    const { data: students, error: studentsError } = await this.supabase\n      .from('students')\n      .select('id')\n      .eq('organization_id', organizationId)\n      .eq('class_id', classId)\n      .eq('status', 'active')\n\n    if (studentsError) {\n      throw errorHandler.handleError(studentsError, {\n        operation: 'generateForClass',\n        organizationId,\n        classId,\n        step: 'fetchStudents',\n      })\n    }\n    if (!students || students.length === 0) {\n      throw errorHandler.createValidationError(\n        'Aucun élève actif dans cette classe',\n        'classId'\n      )\n    }\n\n    // Générer le préfixe de numéro\n    const { data: organization } = await this.supabase\n      .from('organizations')\n      .select('code')\n      .eq('id', organizationId)\n      .single()\n\n    const orgCode = organization?.code || 'ORG'\n    const year = new Date().getFullYear().toString().slice(-2)\n    const prefix = 'FAC'\n    \n    // Trouver le dernier numéro pour cette organisation\n    const { data: lastInvoice } = await this.supabase\n      .from('invoices')\n      .select('invoice_number')\n      .eq('organization_id', organizationId)\n      .like('invoice_number', `${prefix}-${orgCode}-${year}-%`)\n      .order('invoice_number', { ascending: false })\n      .limit(1)\n      .maybeSingle()\n\n    let sequence = 1\n    if (lastInvoice?.invoice_number) {\n      const parts = lastInvoice.invoice_number.split('-')\n      const lastSequence = parseInt(parts[parts.length - 1] || '0')\n      sequence = lastSequence + 1\n    }\n\n    // Générer les factures avec numéros uniques\n    const invoices = students.map((student, index) => ({\n      organization_id: organizationId,\n      student_id: student.id,\n      invoice_number: `${prefix}-${orgCode}-${year}-${String(sequence + index).padStart(6, '0')}`,\n      type,\n      document_type: 'invoice' as const,\n      issue_date: new Date().toISOString().split('T')[0],\n      due_date: dueDate,\n      amount: amount,\n      tax_amount: 0,\n      total_amount: amount,\n      currency,\n      status: 'draft' as const,\n      items: [],\n    }))\n\n    const { data, error } = await this.supabase\n      .from('invoices')\n      .insert(invoices as InvoiceInsert[])\n      .select()\n\n    if (error) {\n      throw errorHandler.handleError(error, {\n        operation: 'generateForClass',\n        organizationId,\n        classId,\n        count: invoices.length,\n      })\n    }\n\n    logger.info('Factures générées en masse avec succès', {\n      organizationId,\n      classId,\n      count: data?.length || 0,\n    })\n\n    return data || []\n  }\n\n  /**\n   * Récupère les factures impayées (overdue)\n   */\n  async getOverdue(organizationId: string) {\n    const today = new Date().toISOString().split('T')[0]\n\n    try {\n      const { data, error } = await this.supabase\n        .from('invoices')\n        .select('*, students(id, first_name, last_name, student_number)') // ✅ Jointure optimisée\n        .eq('organization_id', organizationId)\n        .eq('document_type', 'invoice') // Seulement les factures, pas les devis\n        .in('status', ['sent', 'partial'])\n        .lt('due_date', today)\n        .order('due_date', { ascending: true })\n\n      if (error) {\n        throw errorHandler.handleError(error, {\n          operation: 'getOverdue',\n          organizationId,\n        })\n      }\n\n      return data || []\n    } catch (error) {\n      if (error instanceof AppError) {\n        throw error\n      }\n      throw errorHandler.handleError(error, {\n        operation: 'getOverdue',\n        organizationId,\n      })\n    }\n  }\n\n  /**\n   * Transforme un devis en facture\n   */\n  async convertQuoteToInvoice(quoteId: string) {\n    try {\n    const { data: quote, error: quoteError } = await this.supabase\n      .from('invoices')\n      .select('*')\n      .eq('id', quoteId)\n      .eq('document_type', 'quote')\n      .single()\n\n    if (quoteError) {\n      if (quoteError.code === 'PGRST116' || quoteError.code === '42P01') {\n        throw errorHandler.handleError(quoteError, {\n          code: ErrorCode.DB_NOT_FOUND,\n          operation: 'convertQuoteToInvoice',\n          quoteId,\n        })\n      }\n      throw errorHandler.handleError(quoteError, {\n        operation: 'convertQuoteToInvoice',\n        quoteId,\n        step: 'fetchQuote',\n      })\n    }\n    if (!quote) {\n      throw errorHandler.createDatabaseError(\n        `Devis avec l'ID ${quoteId} introuvable`,\n        { quoteId }\n      )\n    }\n\n    // Mettre à jour le devis pour en faire une facture\n    const { data, error } = await this.supabase\n      .from('invoices')\n      .update({\n        document_type: 'invoice',\n        status: 'draft', // Facture créée en brouillon, à envoyer ensuite\n        issue_date: quote.issue_date || new Date().toISOString().split('T')[0],\n      })\n      .eq('id', quoteId)\n      .select()\n      .single()\n\n    if (error) {\n      throw errorHandler.handleError(error, {\n        operation: 'convertQuoteToInvoice',\n        quoteId,\n        step: 'updateInvoice',\n      })\n    }\n\n    logger.info('Devis converti en facture avec succès', {\n      quoteId,\n      invoiceId: data?.id,\n    })\n\n    return data\n    } catch (error) {\n      if (error instanceof AppError) {\n        throw error\n      }\n      throw errorHandler.handleError(error, {\n        operation: 'convertQuoteToInvoice',\n        quoteId,\n      })\n    }\n  }\n}\n\nexport const invoiceService = new InvoiceService()\n\n","'use client'\n\nimport { useState } from 'react'\nimport { useRouter } from 'next/navigation'\nimport { useMutation, useQuery } from '@tanstack/react-query'\nimport { useForm } from 'react-hook-form'\nimport { zodResolver } from '@hookform/resolvers/zod'\nimport { useAuth } from '@/lib/hooks/use-auth'\nimport { createClient } from '@/lib/supabase/client'\nimport { invoiceService } from '@/lib/services/invoice.service'\nimport { Button } from '@/components/ui/button'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { ArrowLeft } from 'lucide-react'\nimport Link from 'next/link'\nimport { invoiceSchema, type InvoiceFormData } from '@/lib/validations/schemas'\n\nexport default function NewInvoicePage() {\n  const router = useRouter()\n  const { user } = useAuth()\n  const supabase = createClient()\n\n  // Récupérer les élèves\n  const { data: students } = useQuery({\n    queryKey: ['students', user?.organization_id],\n    queryFn: async () => {\n      if (!user?.organization_id) return []\n      const { data, error } = await supabase\n        .from('students')\n        .select('id, first_name, last_name, student_number, classes(name)')\n        .eq('organization_id', user.organization_id)\n        .eq('status', 'active')\n        .order('last_name')\n      if (error) throw error\n      return data || []\n    },\n    enabled: !!user?.organization_id,\n  })\n\n  // Récupérer les classes pour génération en masse\n  const { data: classes } = useQuery({\n    queryKey: ['classes', user?.organization_id],\n    queryFn: async () => {\n      if (!user?.organization_id) return []\n      const { data, error } = await supabase\n        .from('classes')\n        .select('*')\n        .eq('organization_id', user.organization_id)\n        .order('name')\n      if (error) throw error\n      return data || []\n    },\n    enabled: !!user?.organization_id,\n  })\n\n  const [invoiceType, setInvoiceType] = useState<'single' | 'bulk'>('single')\n  const [documentType, setDocumentType] = useState<'quote' | 'invoice'>('quote') // Par défaut, créer un devis\n\n  // React Hook Form avec validation Zod\n  const {\n    register,\n    handleSubmit: handleFormSubmit,\n    formState: { errors },\n    watch,\n    setValue,\n  } = useForm<InvoiceFormData>({\n    resolver: zodResolver(invoiceSchema),\n    mode: 'onChange',\n    defaultValues: {\n      student_id: '',\n      document_type: 'quote',\n      type: 'tuition',\n      amount: '',\n      tax_amount: '',\n      currency: 'EUR',\n      issue_date: new Date().toISOString().split('T')[0],\n      due_date: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0], // +30 jours\n      notes: '',\n      status: 'draft',\n    },\n  })\n\n  const formData = watch()\n\n  // Synchroniser document_type avec le state\n  const handleDocumentTypeChange = (type: 'quote' | 'invoice') => {\n    setDocumentType(type)\n    setValue('document_type', type)\n  }\n\n  const createMutation = useMutation({\n    mutationFn: async (data: InvoiceFormData) => {\n      if (!user?.organization_id) throw new Error('Organization ID manquant')\n\n      // Pour l'instant, on gère seulement les factures individuelles avec Zod\n      // La génération en masse nécessiterait un schéma séparé\n      if (invoiceType === 'bulk') {\n        // TODO: Créer un schéma pour la génération en masse\n        throw new Error('La génération en masse n\\'est pas encore validée avec Zod')\n      } else {\n        // Facture individuelle\n        const amount = parseFloat(data.amount) || 0\n        const taxAmount = parseFloat(data.tax_amount || '0') || 0\n        const totalAmount = amount + taxAmount\n\n        return invoiceService.create({\n          organization_id: user.organization_id,\n          student_id: data.student_id,\n          invoice_number: '', // Sera généré par la fonction SQL\n          type: data.type,\n          document_type: data.document_type || 'invoice',\n          issue_date: data.issue_date,\n          due_date: data.due_date,\n          amount: amount,\n          tax_amount: taxAmount,\n          total_amount: totalAmount,\n          currency: data.currency,\n          status: data.status || 'draft',\n          items: [],\n          notes: data.notes || null,\n        } as any) // Type assertion nécessaire car document_type n'est pas encore dans les types générés\n      }\n    },\n    onSuccess: (result) => {\n      if (invoiceType === 'bulk') {\n        router.push('/dashboard/payments')\n      } else {\n        router.push(`/dashboard/payments/${result.id}`)\n      }\n    },\n  })\n\n  const handleSubmit = handleFormSubmit((data) => {\n    createMutation.mutate(data)\n  })\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center space-x-4\">\n        <Link href=\"/dashboard/payments\">\n          <Button variant=\"ghost\" size=\"icon\">\n            <ArrowLeft className=\"h-4 w-4\" />\n          </Button>\n        </Link>\n        <div>\n          <h1 className=\"text-3xl font-bold text-gray-900\">\n            {documentType === 'quote' ? 'Nouveau devis' : 'Nouvelle facture'}\n          </h1>\n          <p className=\"mt-2 text-sm text-gray-600\">\n            Créez un {documentType === 'quote' ? 'devis' : 'facture'} individuel{documentType === 'quote' ? 'le' : 'le'} ou en masse\n          </p>\n        </div>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Type de document</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"flex space-x-4 mb-6\">\n            <button\n              type=\"button\"\n              onClick={() => handleDocumentTypeChange('quote')}\n              className={`flex-1 p-4 border-2 rounded-lg transition-colors ${\n                documentType === 'quote'\n                  ? 'border-primary bg-primary/5'\n                  : 'border-gray-200 hover:border-gray-300'\n              }`}\n            >\n              <div className=\"font-semibold\">Devis</div>\n              <div className=\"text-sm text-muted-foreground mt-1\">\n                Estimation avant formation\n              </div>\n            </button>\n            <button\n              type=\"button\"\n              onClick={() => handleDocumentTypeChange('invoice')}\n              className={`flex-1 p-4 border-2 rounded-lg transition-colors ${\n                documentType === 'invoice'\n                  ? 'border-primary bg-primary/5'\n                  : 'border-gray-200 hover:border-gray-300'\n              }`}\n            >\n              <div className=\"font-semibold\">Facture</div>\n              <div className=\"text-sm text-muted-foreground mt-1\">\n                Facture après formation\n              </div>\n            </button>\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Type de facturation</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"flex space-x-4 mb-6\">\n            <button\n              type=\"button\"\n              onClick={() => setInvoiceType('single')}\n              className={`flex-1 p-4 border-2 rounded-lg transition-colors ${\n                invoiceType === 'single'\n                  ? 'border-primary bg-primary/5'\n                  : 'border-gray-200 hover:border-gray-300'\n              }`}\n            >\n              <div className=\"font-semibold\">{documentType === 'quote' ? 'Devis individuel' : 'Facture individuelle'}</div>\n              <div className=\"text-sm text-muted-foreground mt-1\">\n                Pour un élève spécifique\n              </div>\n            </button>\n            <button\n              type=\"button\"\n              onClick={() => setInvoiceType('bulk')}\n              className={`flex-1 p-4 border-2 rounded-lg transition-colors ${\n                invoiceType === 'bulk'\n                  ? 'border-primary bg-primary/5'\n                  : 'border-gray-200 hover:border-gray-300'\n              }`}\n            >\n              <div className=\"font-semibold\">{documentType === 'quote' ? 'Génération en masse' : 'Facturation en masse'}</div>\n              <div className=\"text-sm text-muted-foreground mt-1\">\n                Pour toute une classe\n              </div>\n            </button>\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Informations du {documentType === 'quote' ? 'devis' : 'facture'}</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            {invoiceType === 'bulk' && (\n              <div className=\"bg-warning-bg border border-warning-border rounded-lg p-4 mb-6\">\n                <p className=\"text-sm text-warning-primary\">\n                  La génération en masse n'est pas encore validée avec Zod. Veuillez utiliser \"Facture individuelle\" pour bénéficier de la validation complète.\n                </p>\n              </div>\n            )}\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">Type *</label>\n                <select\n                  {...register('type')}\n                  className={`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target ${\n                    errors.type ? 'border-danger-primary' : ''\n                  }`}\n                >\n                  <option value=\"tuition\">Scolarité</option>\n                  <option value=\"registration\">Inscription</option>\n                  <option value=\"other\">Autre</option>\n                </select>\n                {errors.type && (\n                  <p className=\"text-sm text-danger-primary mt-1\">{errors.type.message}</p>\n                )}\n              </div>\n\n              {invoiceType === 'single' ? (\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Élève *</label>\n                  <select\n                    {...register('student_id')}\n                    className={`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target ${\n                      errors.student_id ? 'border-danger-primary' : ''\n                    }`}\n                  >\n                    <option value=\"\">Sélectionner un élève</option>\n                    {students?.map((student: any) => (\n                      <option key={student.id} value={student.id}>\n                        {student.first_name} {student.last_name} ({student.student_number})\n                      </option>\n                    ))}\n                  </select>\n                  {errors.student_id && (\n                    <p className=\"text-sm text-danger-primary mt-1\">{errors.student_id.message}</p>\n                  )}\n                </div>\n              ) : (\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Classe *</label>\n                  <div className=\"bg-warning-bg border border-warning-border rounded-lg p-4\">\n                    <p className=\"text-sm text-warning-primary\">\n                      La génération en masse n'est pas encore validée avec Zod. Veuillez utiliser \"Facture individuelle\".\n                    </p>\n                  </div>\n                </div>\n              )}\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">Montant *</label>\n                <input\n                  type=\"number\"\n                  step=\"0.01\"\n                  min=\"0\"\n                  {...register('amount')}\n                  className={`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target ${\n                    errors.amount ? 'border-danger-primary' : ''\n                  }`}\n                  placeholder=\"0.00\"\n                />\n                {errors.amount && (\n                  <p className=\"text-sm text-danger-primary mt-1\">{errors.amount.message}</p>\n                )}\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">TVA</label>\n                <input\n                  type=\"number\"\n                  step=\"0.01\"\n                  min=\"0\"\n                  {...register('tax_amount')}\n                  className={`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target ${\n                    errors.tax_amount ? 'border-danger-primary' : ''\n                  }`}\n                  placeholder=\"0.00\"\n                />\n                {errors.tax_amount && (\n                  <p className=\"text-sm text-danger-primary mt-1\">{errors.tax_amount.message}</p>\n                )}\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">Devise</label>\n                <select\n                  {...register('currency')}\n                  className=\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target\"\n                >\n                  <option value=\"XOF\">XOF (Franc CFA Ouest)</option>\n                  <option value=\"XAF\">XAF (Franc CFA Centre)</option>\n                  <option value=\"EUR\">EUR (Euro)</option>\n                  <option value=\"USD\">USD (Dollar)</option>\n                </select>\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">Date d'émission *</label>\n                <input\n                  type=\"date\"\n                  {...register('issue_date')}\n                  className={`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target ${\n                    errors.issue_date ? 'border-danger-primary' : ''\n                  }`}\n                />\n                {errors.issue_date && (\n                  <p className=\"text-sm text-danger-primary mt-1\">{errors.issue_date.message}</p>\n                )}\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">Date d'échéance *</label>\n                <input\n                  type=\"date\"\n                  {...register('due_date')}\n                  className={`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target ${\n                    errors.due_date ? 'border-danger-primary' : ''\n                  }`}\n                />\n                {errors.due_date && (\n                  <p className=\"text-sm text-danger-primary mt-1\">{errors.due_date.message}</p>\n                )}\n              </div>\n            </div>\n\n            {invoiceType === 'single' && (\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">Notes</label>\n                <textarea\n                  {...register('notes')}\n                  rows={3}\n                  className=\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent\"\n                  placeholder=\"Notes supplémentaires...\"\n                />\n              </div>\n            )}\n\n            {formData.amount && (\n              <div className=\"bg-gray-50 p-4 rounded-lg\">\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-sm text-muted-foreground\">Montant HT:</span>\n                  <span className=\"font-medium\">{formData.amount} {formData.currency}</span>\n                </div>\n                {formData.tax_amount && parseFloat(formData.tax_amount) > 0 && (\n                  <div className=\"flex justify-between items-center mt-2\">\n                    <span className=\"text-sm text-muted-foreground\">TVA:</span>\n                    <span className=\"font-medium\">{formData.tax_amount} {formData.currency}</span>\n                  </div>\n                )}\n                <div className=\"flex justify-between items-center mt-2 pt-2 border-t\">\n                  <span className=\"font-semibold\">Total TTC:</span>\n                  <span className=\"font-bold text-lg\">\n                    {(\n                      parseFloat(formData.amount || '0') +\n                      parseFloat(formData.tax_amount || '0')\n                    ).toFixed(2)}{' '}\n                    {formData.currency}\n                  </span>\n                </div>\n              </div>\n            )}\n\n            {createMutation.error && (\n              <div className=\"bg-destructive/10 text-destructive px-4 py-3 rounded-lg text-sm\">\n                {createMutation.error instanceof Error\n                  ? createMutation.error.message\n                  : 'Une erreur est survenue'}\n              </div>\n            )}\n\n            <div className=\"flex justify-end space-x-4 pt-4\">\n              <Link href=\"/dashboard/payments\">\n                <Button type=\"button\" variant=\"outline\">\n                  Annuler\n                </Button>\n              </Link>\n              <Button type=\"submit\" disabled={createMutation.isPending}>\n                {createMutation.isPending\n                  ? 'Création...'\n                  : invoiceType === 'bulk'\n                  ? (documentType === 'quote' ? 'Générer les devis' : 'Générer les factures')\n                  : (documentType === 'quote' ? 'Créer le devis' : 'Créer la facture')}\n              </Button>\n            </div>\n          </form>\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n\n"],"names":[],"mappings":"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","ignoreList":[0]}