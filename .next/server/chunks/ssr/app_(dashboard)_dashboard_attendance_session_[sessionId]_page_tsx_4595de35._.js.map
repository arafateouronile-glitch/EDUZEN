{"version":3,"sources":["../../../../components/attendance/location-picker.tsx","../../../../app/%28dashboard%29/dashboard/attendance/session/%5BsessionId%5D/page.tsx","../../../../node_modules/lucide-react/src/icons/navigation.ts"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { Button } from '@/components/ui/button'\nimport { Label } from '@/components/ui/label'\nimport { Input } from '@/components/ui/input'\nimport { MapPin, Navigation, AlertCircle, CheckCircle } from 'lucide-react'\ninterface LocationPickerProps {\n  onLocationChange?: (location: { latitude: number; longitude: number; accuracy: number; address?: string }) => void\n  required?: boolean\n  sessionLocation?: { latitude: number; longitude: number; radius?: number }\n}\n\nexport function LocationPicker({ onLocationChange, required = false, sessionLocation }: LocationPickerProps) {\n  const [location, setLocation] = useState<{ latitude: number; longitude: number; accuracy: number } | null>(null)\n  const [address, setAddress] = useState<string>('')\n  const [isLoading, setIsLoading] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n  const [distance, setDistance] = useState<number | null>(null)\n\n  // Demander la géolocalisation au chargement si requise\n  useEffect(() => {\n    if (required) {\n      requestLocation()\n    }\n  }, [required])\n\n  // Calculer la distance si on a la localisation de la session\n  useEffect(() => {\n    if (location && sessionLocation?.latitude && sessionLocation?.longitude) {\n      const dist = calculateDistance(\n        sessionLocation.latitude,\n        sessionLocation.longitude,\n        location.latitude,\n        location.longitude\n      )\n      setDistance(dist)\n\n      if (sessionLocation.radius && dist > sessionLocation.radius) {\n        setError(`Vous êtes trop loin (${Math.round(dist)}m, maximum: ${sessionLocation.radius}m)`)\n      } else {\n        setError(null)\n      }\n    }\n  }, [location, sessionLocation])\n\n  const requestLocation = async () => {\n    setIsLoading(true)\n    setError(null)\n\n    if (!navigator.geolocation) {\n      setError('Géolocalisation non supportée par votre navigateur')\n      setIsLoading(false)\n      return\n    }\n\n    navigator.geolocation.getCurrentPosition(\n      async (position) => {\n        const loc = {\n          latitude: position.coords.latitude,\n          longitude: position.coords.longitude,\n          accuracy: position.coords.accuracy,\n        }\n        setLocation(loc)\n\n        // Récupérer l'adresse\n        try {\n          const response = await fetch(\n            `/api/geolocation/reverse-geocode?latitude=${loc.latitude}&longitude=${loc.longitude}`\n          )\n          if (response.ok) {\n            const data = await response.json()\n            setAddress(data.address || '')\n            onLocationChange?.({ ...loc, address: data.address })\n          } else {\n            onLocationChange?.(loc)\n          }\n        } catch (err) {\n          onLocationChange?.(loc)\n        }\n\n        setIsLoading(false)\n      },\n      (error) => {\n        setError(`Erreur de géolocalisation: ${error.message}`)\n        setIsLoading(false)\n      },\n      {\n        enableHighAccuracy: true,\n        timeout: 10000,\n        maximumAge: 0,\n      }\n    )\n  }\n\n  const calculateDistance = (lat1: number, lon1: number, lat2: number, lon2: number): number => {\n    const R = 6371e3 // Rayon de la Terre en mètres\n    const φ1 = (lat1 * Math.PI) / 180\n    const φ2 = (lat2 * Math.PI) / 180\n    const Δφ = ((lat2 - lat1) * Math.PI) / 180\n    const Δλ = ((lon2 - lon1) * Math.PI) / 180\n\n    const a =\n      Math.sin(Δφ / 2) * Math.sin(Δφ / 2) +\n      Math.cos(φ1) * Math.cos(φ2) * Math.sin(Δλ / 2) * Math.sin(Δλ / 2)\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a))\n\n    return R * c // Distance en mètres\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex items-center justify-between\">\n        <Label>Géolocalisation {required && '*'}</Label>\n        {location && (\n          <div className=\"flex items-center space-x-2 text-sm text-green-600\">\n            <CheckCircle className=\"h-4 w-4\" />\n            <span>Localisation capturée</span>\n          </div>\n        )}\n      </div>\n\n      {location ? (\n        <div className=\"space-y-2 p-4 bg-gray-50 rounded-lg\">\n          <div className=\"flex items-center space-x-2\">\n            <MapPin className=\"h-4 w-4 text-primary\" />\n            <div className=\"flex-1\">\n              <p className=\"text-sm font-medium\">\n                {address || `${location.latitude.toFixed(6)}, ${location.longitude.toFixed(6)}`}\n              </p>\n              <p className=\"text-xs text-muted-foreground\">\n                Précision: {Math.round(location.accuracy)}m\n                {distance !== null && sessionLocation && (\n                  <span className=\"ml-2\">\n                    • Distance: {Math.round(distance)}m\n                    {sessionLocation.radius && (\n                      <span className={distance > sessionLocation.radius ? 'text-red-600' : 'text-green-600'}>\n                        {' '}\n                        ({distance > sessionLocation.radius ? 'hors zone' : 'dans la zone'})\n                      </span>\n                    )}\n                  </span>\n                )}\n              </p>\n            </div>\n          </div>\n          {error && (\n            <div className=\"flex items-center space-x-2 text-sm text-red-600\">\n              <AlertCircle className=\"h-4 w-4\" />\n              <span>{error}</span>\n            </div>\n          )}\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={requestLocation}\n            disabled={isLoading}\n          >\n            <Navigation className=\"h-4 w-4 mr-2\" />\n            {isLoading ? 'Mise à jour...' : 'Mettre à jour la localisation'}\n          </Button>\n        </div>\n      ) : (\n        <div className=\"space-y-2\">\n          <Button\n            variant=\"outline\"\n            onClick={requestLocation}\n            disabled={isLoading}\n            className=\"w-full\"\n          >\n            <Navigation className=\"h-4 w-4 mr-2\" />\n            {isLoading ? 'Récupération de la localisation...' : 'Capturer ma localisation'}\n          </Button>\n          {error && (\n            <div className=\"flex items-center space-x-2 text-sm text-red-600\">\n              <AlertCircle className=\"h-4 w-4\" />\n              <span>{error}</span>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  )\n}\n","'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useParams, useSearchParams, useRouter } from 'next/navigation'\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query'\nimport { createClient } from '@/lib/supabase/client'\nimport { attendanceService } from '@/lib/services/attendance.service'\nimport { sessionService } from '@/lib/services/session.service'\nimport { signatureService } from '@/lib/services/signature.service'\nimport { useAuth } from '@/lib/hooks/use-auth'\nimport { LocationPicker } from '@/components/attendance/location-picker'\nimport { Button } from '@/components/ui/button'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { ArrowLeft, Save, CheckCircle, XCircle, Clock, AlertCircle } from 'lucide-react'\nimport Link from 'next/link'\nimport { formatDate } from '@/lib/utils'\nimport { toast } from 'sonner'\nimport type { SessionWithRelations } from '@/lib/types/query-types'\n\ntype AttendanceStatus = 'present' | 'absent' | 'late' | 'excused'\n\nexport default function SessionAttendancePage() {\n  const params = useParams()\n  const searchParams = useSearchParams()\n  const router = useRouter()\n  const sessionId = params.sessionId as string\n  const date = searchParams.get('date') || new Date().toISOString().split('T')[0]\n  const slotId = searchParams.get('slotId') || ''\n  const { user } = useAuth()\n  const supabase = createClient()\n  const queryClient = useQueryClient()\n\n  // Récupérer la séance sélectionnée\n  const { data: selectedSlot } = useQuery<{\n    id: string;\n    time_slot: string;\n    start_time: string;\n    end_time: string;\n    location?: string;\n    date: string;\n  } | null>({\n    queryKey: ['session-slot', slotId],\n    queryFn: async () => {\n      if (!slotId) return null\n      const { data, error } = await supabase\n        .from('session_slots')\n        .select('*')\n        .eq('id', slotId)\n        .single()\n      if (error) {\n        console.warn('Erreur récupération séance:', error)\n        return null\n      }\n      return data as any\n    },\n    enabled: !!slotId,\n  })\n\n  // Récupérer la session avec les informations de géolocalisation\n  const { data: session } = useQuery({\n    queryKey: ['session', sessionId],\n    queryFn: async () => {\n      const sessionData = await sessionService.getSessionById(sessionId)\n      // NOTE: Les colonnes de géolocalisation (latitude, longitude, etc.) ne sont pas encore\n      // ajoutées à la table sessions. Retourner directement sessionData pour l'instant.\n      // TODO: Activer la requête ci-dessous après avoir ajouté les colonnes à la table sessions\n      return sessionData\n    },\n  })\n\n  // Récupérer les inscriptions à cette session\n  const { data: enrollments } = useQuery({\n    queryKey: ['session-enrollments', sessionId],\n    queryFn: async () => {\n      const { data, error } = await supabase\n        .from('enrollments')\n        .select('*, students(*)')\n        .eq('session_id', sessionId) // Utiliser session_id au lieu de program_session_id\n        .in('status', ['confirmed', 'completed'])\n        .order('students(last_name)', { ascending: true })\n      if (error) throw error\n      return data || []\n    },\n  })\n\n  // Récupérer l'émargement existant\n  const { data: existingAttendance, refetch: refetchAttendance } = useQuery({\n    queryKey: ['attendance-session', sessionId, date],\n    queryFn: () => attendanceService.getBySessionAndDate(sessionId, date),\n  })\n\n  // État local pour les présences\n  const [attendance, setAttendance] = useState<Record<string, {\n    status: AttendanceStatus\n    lateMinutes?: number\n    notes?: string\n    latitude?: number\n    longitude?: number\n    location_accuracy?: number\n  }>>({})\n\n  // Initialiser avec les données existantes\n  useEffect(() => {\n    if (existingAttendance && enrollments) {\n      const initial: Record<string, any> = {}\n      existingAttendance.forEach((att: any) => {\n        initial[att.student_id] = {\n          status: att.status,\n          lateMinutes: att.late_minutes,\n          notes: att.notes || '',\n        }\n      })\n      // Ajouter les étudiants non encore émarginés\n      enrollments.forEach((enrollment: any) => {\n        const studentId = enrollment.student_id\n        if (!initial[studentId]) {\n          initial[studentId] = {\n            status: 'present' as AttendanceStatus,\n            lateMinutes: 0,\n            notes: '',\n          }\n        }\n      })\n      setAttendance(initial)\n    } else if (enrollments) {\n      // Initialiser tous les étudiants comme présents par défaut\n      const initial: Record<string, any> = {}\n      enrollments.forEach((enrollment: any) => {\n        initial[enrollment.student_id] = {\n          status: 'present' as AttendanceStatus,\n          lateMinutes: 0,\n          notes: '',\n        }\n      })\n      setAttendance(initial)\n    }\n  }, [existingAttendance, enrollments])\n\n  const updateAttendance = (\n    studentId: string,\n    field: 'status' | 'lateMinutes' | 'notes' | 'latitude' | 'longitude' | 'location_accuracy',\n    value: any\n  ) => {\n    setAttendance((prev) => ({\n      ...prev,\n      [studentId]: {\n        ...prev[studentId],\n        [field]: value,\n      },\n    }))\n  }\n\n  const saveMutation = useMutation({\n    mutationFn: async () => {\n      if (!user?.organization_id || !enrollments) throw new Error('Données manquantes')\n\n      // Préparer les enregistrements\n      const records = enrollments.map((enrollment: any) => ({\n        student_id: enrollment.student_id,\n        session_id: sessionId, // Utiliser session_id au lieu de program_session_id\n        date: date,\n        status: attendance[enrollment.student_id]?.status || 'present',\n        late_minutes: attendance[enrollment.student_id]?.lateMinutes || 0,\n        teacher_id: user.id,\n        notes: attendance[enrollment.student_id]?.notes || undefined,\n      }))\n\n      return attendanceService.markMultiple(user.organization_id, records)\n    },\n    onSuccess: () => {\n      refetchAttendance()\n      // Invalider les queries liées aux émargements pour rafraîchir la liste sur la page principale\n      queryClient.invalidateQueries({ queryKey: ['recent-attendance'] })\n      queryClient.invalidateQueries({ queryKey: ['attendance-stats'] })\n      queryClient.invalidateQueries({ queryKey: ['attendance-period-stats'] })\n      queryClient.invalidateQueries({ queryKey: ['attendance'] })\n      queryClient.invalidateQueries({ queryKey: ['monthly-attendance-report'] })\n      queryClient.invalidateQueries({ queryKey: ['yearly-attendance-report'] })\n      toast.success('Émargement enregistré avec succès', {\n        description: `${Object.keys(attendance).length} présences enregistrées pour le ${formatDate(date)}`,\n      })\n    },\n    onError: (error: Error) => {\n      toast.error('Erreur lors de l\\'enregistrement', {\n        description: error.message,\n      })\n    },\n  })\n\n  const getStatusIcon = (status: AttendanceStatus) => {\n    switch (status) {\n      case 'present':\n        return <CheckCircle className=\"h-5 w-5 text-success-primary\" />\n      case 'absent':\n        return <XCircle className=\"h-5 w-5 text-red-600\" />\n      case 'late':\n        return <Clock className=\"h-5 w-5 text-warning-primary\" />\n      case 'excused':\n        return <AlertCircle className=\"h-5 w-5 text-blue-600\" />\n    }\n  }\n\n  const getStatusLabel = (status: AttendanceStatus) => {\n    switch (status) {\n      case 'present':\n        return 'Présent'\n      case 'absent':\n        return 'Absent'\n      case 'late':\n        return 'En retard'\n      case 'excused':\n        return 'Justifié'\n    }\n  }\n\n  const students = enrollments?.map((e: any) => e.students).filter(Boolean) || []\n  const stats = students.length > 0\n    ? {\n        total: students.length,\n        present: Object.values(attendance).filter((a) => a.status === 'present').length,\n        absent: Object.values(attendance).filter((a) => a.status === 'absent').length,\n        late: Object.values(attendance).filter((a) => a.status === 'late').length,\n        excused: Object.values(attendance).filter((a) => a.status === 'excused').length,\n      }\n    : null\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center space-x-4\">\n          <Link href=\"/dashboard/attendance\">\n            <Button variant=\"ghost\" size=\"icon\">\n              <ArrowLeft className=\"h-4 w-4\" />\n            </Button>\n          </Link>\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-900\">\n              Émargement - {(session as SessionWithRelations)?.name || 'Session'}\n            </h1>\n            <p className=\"mt-2 text-sm text-gray-600\">\n              {formatDate(date)}\n              {selectedSlot && (\n                <span className=\"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-brand-blue-ghost text-brand-blue\">\n                  {selectedSlot.time_slot === 'morning' ? 'Matin' : \n                   selectedSlot.time_slot === 'afternoon' ? 'Après-midi' : 'Journée complète'}\n                  {' • '}\n                  {selectedSlot.start_time} - {selectedSlot.end_time}\n                </span>\n              )}\n              {(session as SessionWithRelations)?.location && ` - ${(session as SessionWithRelations).location}`}\n              {selectedSlot?.location && !((session as SessionWithRelations)?.location) && ` - ${selectedSlot.location}`}\n            </p>\n          </div>\n        </div>\n        <Button\n          onClick={() => saveMutation.mutate()}\n          disabled={saveMutation.isPending}\n        >\n          <Save className=\"mr-2 h-4 w-4\" />\n          {saveMutation.isPending ? 'Enregistrement...' : 'Enregistrer'}\n        </Button>\n      </div>\n\n      {/* Statistiques */}\n      {stats && (\n        <div className=\"grid grid-cols-2 md:grid-cols-5 gap-4\">\n          <Card>\n            <CardContent className=\"pt-6\">\n              <div className=\"text-center\">\n                <div className=\"text-2xl font-bold\">{stats.total}</div>\n                <div className=\"text-sm text-muted-foreground\">Total</div>\n              </div>\n            </CardContent>\n          </Card>\n          <Card>\n            <CardContent className=\"pt-6\">\n              <div className=\"text-center\">\n                <div className=\"text-2xl font-bold text-success-primary\">{stats.present}</div>\n                <div className=\"text-sm text-muted-foreground\">Présents</div>\n              </div>\n            </CardContent>\n          </Card>\n          <Card>\n            <CardContent className=\"pt-6\">\n              <div className=\"text-center\">\n                <div className=\"text-2xl font-bold text-red-600\">{stats.absent}</div>\n                <div className=\"text-sm text-muted-foreground\">Absents</div>\n              </div>\n            </CardContent>\n          </Card>\n          <Card>\n            <CardContent className=\"pt-6\">\n              <div className=\"text-center\">\n                <div className=\"text-2xl font-bold text-warning-primary\">{stats.late}</div>\n                <div className=\"text-sm text-muted-foreground\">En retard</div>\n              </div>\n            </CardContent>\n          </Card>\n          <Card>\n            <CardContent className=\"pt-6\">\n              <div className=\"text-center\">\n                <div className=\"text-2xl font-bold text-blue-600\">{stats.excused}</div>\n                <div className=\"text-sm text-muted-foreground\">Justifiés</div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      )}\n\n      {/* Liste des participants */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Liste des participants</CardTitle>\n        </CardHeader>\n        <CardContent>\n          {students.length > 0 ? (\n            <div className=\"space-y-4\">\n              {students.map((student: any) => {\n                const studentAttendance = attendance[student.id] || {\n                  status: 'present' as AttendanceStatus,\n                  lateMinutes: 0,\n                  notes: '',\n                }\n\n                return (\n                  <div\n                    key={student.id}\n                    className=\"flex items-center space-x-4 p-4 border rounded-lg hover:bg-gray-50 transition-colors\"\n                  >\n                    <div className=\"flex-shrink-0\">\n                      {student.photo_url ? (\n                        <img\n                          src={student.photo_url}\n                          alt={`${student.first_name} ${student.last_name}`}\n                          className=\"h-12 w-12 rounded-full object-cover\"\n                        />\n                      ) : (\n                        <div className=\"h-12 w-12 rounded-full bg-primary text-white flex items-center justify-center font-semibold\">\n                          {student.first_name.charAt(0)}{student.last_name.charAt(0)}\n                        </div>\n                      )}\n                    </div>\n\n                    <div className=\"flex-1 min-w-0\">\n                      <h3 className=\"font-semibold truncate\">\n                        {student.first_name} {student.last_name}\n                      </h3>\n                      <p className=\"text-sm text-muted-foreground\">{student.student_number}</p>\n                      {session?.require_location_for_attendance && (\n                        <div className=\"mt-2\">\n                          <LocationPicker\n                            required={false}\n                            sessionLocation={\n                              session?.latitude && session?.longitude\n                                ? {\n                                    latitude: session.latitude,\n                                    longitude: session.longitude,\n                                    radius: session.allowed_attendance_radius_meters || undefined,\n                                  }\n                                : undefined\n                            }\n                            onLocationChange={(location) => {\n                              updateAttendance(student.id, 'latitude', location.latitude)\n                              updateAttendance(student.id, 'longitude', location.longitude)\n                              updateAttendance(student.id, 'location_accuracy', location.accuracy)\n                            }}\n                          />\n                        </div>\n                      )}\n                    </div>\n\n                    <div className=\"flex items-center space-x-4\">\n                      {/* Statut */}\n                      <div className=\"flex space-x-2\">\n                        {(['present', 'absent', 'late', 'excused'] as AttendanceStatus[]).map(\n                          (status) => (\n                            <button\n                              key={status}\n                              type=\"button\"\n                              onClick={() => updateAttendance(student.id, 'status', status)}\n                              className={`p-2 rounded-lg transition-colors min-touch-target touch-manipulation ${\n                                studentAttendance.status === status\n                                  ? 'bg-primary text-white'\n                                  : 'bg-gray-100 hover:bg-gray-200'\n                              }`}\n                              title={getStatusLabel(status)}\n                            >\n                              {getStatusIcon(status)}\n                            </button>\n                          )\n                        )}\n                      </div>\n\n                      {/* Minutes de retard */}\n                      {studentAttendance.status === 'late' && (\n                        <div className=\"w-20\">\n                          <input\n                            type=\"number\"\n                            min=\"0\"\n                            value={studentAttendance.lateMinutes || 0}\n                            onChange={(e) =>\n                              updateAttendance(student.id, 'lateMinutes', parseInt(e.target.value) || 0)\n                            }\n                            className=\"w-full px-2 py-1 text-sm border rounded focus:ring-2 focus:ring-primary focus:border-transparent\"\n                            placeholder=\"min\"\n                          />\n                          <p className=\"text-xs text-muted-foreground text-center mt-1\">min</p>\n                        </div>\n                      )}\n\n                      {/* Notes */}\n                      <div className=\"w-32\">\n                        <input\n                          type=\"text\"\n                          value={studentAttendance.notes || ''}\n                          onChange={(e) =>\n                            updateAttendance(student.id, 'notes', e.target.value)\n                          }\n                          className=\"w-full px-2 py-1 text-sm border rounded focus:ring-2 focus:ring-primary focus:border-transparent\"\n                          placeholder=\"Notes...\"\n                        />\n                      </div>\n                    </div>\n                  </div>\n                )\n              })}\n            </div>\n          ) : (\n            <div className=\"text-center py-12 text-muted-foreground\">\n              Aucun participant inscrit à cette session\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {saveMutation.error && (\n        <div className=\"bg-destructive/10 text-destructive px-4 py-3 rounded-lg text-sm\">\n          {saveMutation.error instanceof Error\n            ? saveMutation.error.message\n            : 'Une erreur est survenue lors de l\\'enregistrement'}\n        </div>\n      )}\n\n      {/* Historique des signatures */}\n      {sessionId && user?.organization_id && (\n        <SessionSignaturesHistory sessionId={sessionId} organizationId={user.organization_id} />\n      )}\n    </div>\n  )\n}\n\n// Composant pour afficher l'historique des signatures de session\nfunction SessionSignaturesHistory({ sessionId, organizationId }: { sessionId: string; organizationId: string }) {\n  const { data: signatures, isLoading } = useQuery({\n    queryKey: ['session-signatures', sessionId, organizationId],\n    queryFn: () => signatureService.getSignaturesBySession(sessionId, organizationId),\n    enabled: !!sessionId && !!organizationId,\n  })\n\n  if (isLoading) {\n    return (\n      <Card className=\"mt-6\">\n        <CardHeader>\n          <CardTitle>Historique des signatures</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"text-center py-8 text-muted-foreground\">Chargement...</div>\n        </CardContent>\n      </Card>\n    )\n  }\n\n  if (!signatures || signatures.length === 0) {\n    return null\n  }\n\n  return (\n    <Card className=\"mt-6\">\n      <CardHeader>\n        <CardTitle>Historique des signatures</CardTitle>\n        <p className=\"text-sm text-muted-foreground\">\n          Signatures des documents liés aux étudiants de cette session ({signatures.length} signature(s))\n        </p>\n      </CardHeader>\n      <CardContent>\n        <div className=\"space-y-4\">\n          {signatures.map((signature: any) => (\n            <div\n              key={signature.id}\n              className=\"flex items-start gap-4 p-4 border rounded-lg hover:bg-muted/50 transition-colors\"\n            >\n              <div className=\"flex-shrink-0 w-24 h-16 border rounded bg-white p-1.5 flex items-center justify-center\">\n                <img\n                  src={signature.signature_data}\n                  alt={`Signature de ${signature.signer_name}`}\n                  className=\"max-w-full max-h-full object-contain\"\n                />\n              </div>\n              <div className=\"flex-1 min-w-0\">\n                <div className=\"flex items-start justify-between gap-4\">\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center gap-2 mb-1\">\n                      <p className=\"font-semibold\">\n                        {signature.signer_name || signature.signer?.full_name || 'Signataire inconnu'}\n                      </p>\n                      {signature.status === 'signed' && signature.is_valid && (\n                        <CheckCircle className=\"h-4 w-4 text-green-600\" />\n                      )}\n                    </div>\n                    <p className=\"text-sm text-muted-foreground\">\n                      {signature.signer_role || signature.signer?.role || 'Rôle non spécifié'}\n                    </p>\n                    {signature.document && (\n                      <p className=\"text-sm font-medium mt-1\">\n                        Document : {signature.document.title || 'Sans titre'}\n                      </p>\n                    )}\n                    {signature.document?.students && (\n                      <p className=\"text-xs text-muted-foreground mt-1\">\n                        Étudiant : {signature.document.students.first_name} {signature.document.students.last_name}\n                      </p>\n                    )}\n                    <p className=\"text-xs text-muted-foreground mt-2\">\n                      Signé le {formatDate(signature.signed_at)}\n                    </p>\n                    {signature.comment && (\n                      <p className=\"text-sm text-muted-foreground mt-2 italic border-l-2 border-muted pl-2\">\n                        \"{signature.comment}\"\n                      </p>\n                    )}\n                  </div>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </CardContent>\n    </Card>\n  )\n}\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Navigation\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cG9seWdvbiBwb2ludHM9IjMgMTEgMjIgMiAxMyAyMSAxMSAxMyAzIDExIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/navigation\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Navigation = createLucideIcon('Navigation', [\n  ['polygon', { points: '3 11 22 2 13 21 11 13 3 11', key: '1ltx0t' }],\n]);\n\nexport default Navigation;\n"],"names":[],"mappings":"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","ignoreList":[2]}