{"version":3,"sources":["../../../../app/%28dashboard%29/dashboard/resources/new/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { useRouter } from 'next/navigation'\nimport { useMutation, useQuery } from '@tanstack/react-query'\nimport { useForm } from 'react-hook-form'\nimport { zodResolver } from '@hookform/resolvers/zod'\nimport { z } from 'zod'\nimport { useAuth } from '@/lib/hooks/use-auth'\nimport { educationalResourcesService } from '@/lib/services/educational-resources.service'\nimport { createClient } from '@/lib/supabase/client'\nimport { Button } from '@/components/ui/button'\nimport { GlassCard } from '@/components/ui/glass-card'\nimport { ArrowLeft, Library, Save, Upload, X, FileText, Video, Image, Link as LinkIcon, Music } from 'lucide-react'\nimport Link from 'next/link'\nimport { useToast } from '@/components/ui/toast'\nimport { motion } from '@/components/ui/motion'\nimport { cn } from '@/lib/utils'\n\n// Schéma de validation\nconst resourceSchema = z.object({\n  title: z.string().min(3, 'Le titre doit contenir au moins 3 caractères'),\n  slug: z.string().min(3, 'Le slug doit contenir au moins 3 caractères').regex(/^[a-z0-9-]+$/, 'Le slug ne peut contenir que des lettres minuscules, chiffres et tirets'),\n  description: z.string().optional(),\n  resource_type: z.enum(['document', 'video', 'audio', 'image', 'link', 'interactive', 'other']).default('document'),\n  category_id: z.string().optional(),\n  external_url: z.string().url().optional().or(z.literal('')),\n  tags: z.string().optional(),\n  is_featured: z.boolean().default(false),\n  status: z.enum(['draft', 'published', 'archived']).default('published'),\n})\n\ntype ResourceFormData = z.infer<typeof resourceSchema>\n\nconst RESOURCE_TYPE_ICONS = {\n  document: FileText,\n  video: Video,\n  audio: Music,\n  image: Image,\n  link: LinkIcon,\n  interactive: FileText,\n  other: FileText,\n}\n\nconst RESOURCE_TYPE_LABELS = {\n  document: 'Document',\n  video: 'Vidéo',\n  audio: 'Audio',\n  image: 'Image',\n  link: 'Lien externe',\n  interactive: 'Interactif',\n  other: 'Autre',\n}\n\nexport default function NewResourcePage() {\n  const router = useRouter()\n  const { user } = useAuth()\n  const { addToast } = useToast()\n  const supabase = createClient()\n  const [file, setFile] = useState<File | null>(null)\n  const [filePreview, setFilePreview] = useState<string | null>(null)\n  const [thumbnailFile, setThumbnailFile] = useState<File | null>(null)\n  const [thumbnailPreview, setThumbnailPreview] = useState<string | null>(null)\n\n  // Récupérer les catégories\n  const { data: categories } = useQuery({\n    queryKey: ['resource-categories', user?.organization_id],\n    queryFn: () => educationalResourcesService.getCategories(user?.organization_id || ''),\n    enabled: !!user?.organization_id,\n  })\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n    watch,\n    setValue,\n  } = useForm<ResourceFormData>({\n    resolver: zodResolver(resourceSchema),\n    mode: 'onChange',\n    defaultValues: {\n      resource_type: 'document',\n      status: 'published',\n      is_featured: false,\n    },\n  })\n\n  const resourceType = watch('resource_type')\n\n  // Générer le slug automatiquement à partir du titre\n  const title = watch('title')\n  const generateSlug = (text: string) => {\n    return text\n      .toLowerCase()\n      .normalize('NFD')\n      .replace(/[\\u0300-\\u036f]/g, '')\n      .replace(/[^a-z0-9]+/g, '-')\n      .replace(/^-+|-+$/g, '')\n  }\n\n  // Mettre à jour le slug quand le titre change\n  const handleTitleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const newTitle = e.target.value\n    setValue('title', newTitle)\n    if (newTitle) {\n      setValue('slug', generateSlug(newTitle))\n    }\n  }\n\n  // Gérer l'upload du fichier\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const selectedFile = e.target.files?.[0]\n    if (selectedFile) {\n      setFile(selectedFile)\n      if (selectedFile.type.startsWith('image/')) {\n        const reader = new FileReader()\n        reader.onloadend = () => {\n          setFilePreview(reader.result as string)\n        }\n        reader.readAsDataURL(selectedFile)\n      }\n    }\n  }\n\n  // Gérer l'upload de la miniature\n  const handleThumbnailChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const selectedFile = e.target.files?.[0]\n    if (selectedFile) {\n      setThumbnailFile(selectedFile)\n      const reader = new FileReader()\n      reader.onloadend = () => {\n        setThumbnailPreview(reader.result as string)\n      }\n      reader.readAsDataURL(selectedFile)\n    }\n  }\n\n  const createMutation = useMutation({\n    mutationFn: async (data: ResourceFormData) => {\n      if (!user?.organization_id) throw new Error('Organization ID manquant')\n\n      // Upload du fichier si présent\n      let fileUrl: string | null = null\n      let fileSizeBytes: number | null = null\n      if (file) {\n        const fileExt = file.name.split('.').pop()\n        const fileName = `${user.organization_id}/resources/${Date.now()}.${fileExt}`\n        const { data: uploadData, error: uploadError } = await supabase.storage\n          .from('educational-resources')\n          .upload(fileName, file)\n\n        if (uploadError) throw uploadError\n\n        const { data: urlData } = supabase.storage\n          .from('educational-resources')\n          .getPublicUrl(fileName)\n        fileUrl = urlData.publicUrl\n        fileSizeBytes = file.size\n      }\n\n      // Upload de la miniature si présente\n      let thumbnailUrl: string | null = null\n      if (thumbnailFile) {\n        const fileExt = thumbnailFile.name.split('.').pop()\n        const fileName = `${user.organization_id}/thumbnails/${Date.now()}.${fileExt}`\n        const { data: uploadData, error: uploadError } = await supabase.storage\n          .from('resource-thumbnails')\n          .upload(fileName, thumbnailFile)\n\n        if (uploadError) throw uploadError\n\n        const { data: urlData } = supabase.storage\n          .from('resource-thumbnails')\n          .getPublicUrl(fileName)\n        thumbnailUrl = urlData.publicUrl\n      }\n\n      // Parser les tags\n      const tagsArray = data.tags\n        ? data.tags.split(',').map(tag => tag.trim()).filter(tag => tag.length > 0)\n        : []\n\n      return educationalResourcesService.createResource({\n        organization_id: user.organization_id,\n        title: data.title,\n        slug: data.slug,\n        description: data.description || null,\n        resource_type: data.resource_type,\n        category_id: data.category_id || null,\n        external_url: data.external_url || null,\n        file_url: fileUrl,\n        thumbnail_url: thumbnailUrl,\n        file_size_bytes: fileSizeBytes,\n        tags: tagsArray.length > 0 ? tagsArray : null,\n        is_featured: data.is_featured,\n        status: data.status,\n        author_id: user.id,\n        view_count: 0,\n        download_count: 0,\n        favorite_count: 0,\n      })\n    },\n    onSuccess: (resource) => {\n      addToast({\n        type: 'success',\n        title: 'Ressource créée avec succès',\n        description: 'Votre ressource a été ajoutée à la bibliothèque.',\n      })\n      router.push(`/dashboard/resources/${resource.slug}`)\n    },\n    onError: (error: Error) => {\n      addToast({\n        type: 'error',\n        title: 'Erreur',\n        description: error.message || 'Une erreur est survenue lors de la création de la ressource',\n      })\n    },\n  })\n\n  const onSubmit = (data: ResourceFormData) => {\n    createMutation.mutate(data)\n  }\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      className=\"space-y-8 pb-8 max-w-5xl mx-auto p-6\"\n    >\n      {/* Header */}\n      <div className=\"flex items-center gap-4\">\n        <Link href=\"/dashboard/resources\">\n          <Button variant=\"ghost\" size=\"icon\">\n            <ArrowLeft className=\"h-4 w-4\" />\n          </Button>\n        </Link>\n        <div className=\"flex items-center gap-3\">\n          <div className=\"p-2 bg-brand-blue-ghost rounded-xl\">\n            <Library className=\"h-6 w-6 text-brand-blue\" />\n          </div>\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-900\">Nouvelle ressource</h1>\n            <p className=\"text-gray-500 mt-1\">Ajoutez une ressource à la bibliothèque pédagogique</p>\n          </div>\n        </div>\n      </div>\n\n      <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-6\">\n        {/* Informations principales */}\n        <GlassCard variant=\"premium\" className=\"p-6\">\n          <h2 className=\"text-xl font-bold text-gray-900 mb-6\">Informations principales</h2>\n          \n          <div className=\"space-y-6\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Titre de la ressource *\n              </label>\n              <input\n                type=\"text\"\n                {...register('title')}\n                onChange={handleTitleChange}\n                className={cn(\n                  \"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent transition-all\",\n                  errors.title ? 'border-red-500' : 'border-gray-200'\n                )}\n                placeholder=\"Ex: Guide complet de React\"\n              />\n              {errors.title && (\n                <p className=\"text-sm text-red-600 mt-1\">{errors.title.message}</p>\n              )}\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Slug (URL) *\n              </label>\n              <input\n                type=\"text\"\n                {...register('slug')}\n                className={cn(\n                  \"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent transition-all bg-gray-50\",\n                  errors.slug ? 'border-red-500' : 'border-gray-200'\n                )}\n                placeholder=\"guide-complet-react\"\n              />\n              {errors.slug && (\n                <p className=\"text-sm text-red-600 mt-1\">{errors.slug.message}</p>\n              )}\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Type de ressource\n              </label>\n              <select\n                {...register('resource_type')}\n                className=\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent transition-all\"\n              >\n                {Object.entries(RESOURCE_TYPE_LABELS).map(([value, label]) => {\n                  const Icon = RESOURCE_TYPE_ICONS[value as keyof typeof RESOURCE_TYPE_ICONS]\n                  return (\n                    <option key={value} value={value}>\n                      {label}\n                    </option>\n                  )\n                })}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Description\n              </label>\n              <textarea\n                {...register('description')}\n                rows={6}\n                className=\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent transition-all resize-none\"\n                placeholder=\"Décrivez cette ressource en détail...\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Catégorie\n              </label>\n              <select\n                {...register('category_id')}\n                className=\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent transition-all\"\n              >\n                <option value=\"\">Aucune catégorie</option>\n                {categories?.map((category) => (\n                  <option key={category.id} value={category.id}>\n                    {category.name}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Tags (séparés par des virgules)\n              </label>\n              <input\n                type=\"text\"\n                {...register('tags')}\n                className=\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent transition-all\"\n                placeholder=\"Ex: react, javascript, tutoriel\"\n              />\n              <p className=\"text-xs text-gray-500 mt-1\">Séparez les tags par des virgules</p>\n            </div>\n\n            {resourceType === 'link' && (\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  URL externe *\n                </label>\n                <input\n                  type=\"url\"\n                  {...register('external_url')}\n                  className={cn(\n                    \"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent transition-all\",\n                    errors.external_url ? 'border-red-500' : 'border-gray-200'\n                  )}\n                  placeholder=\"https://example.com\"\n                />\n                {errors.external_url && (\n                  <p className=\"text-sm text-red-600 mt-1\">{errors.external_url.message}</p>\n                )}\n              </div>\n            )}\n          </div>\n        </GlassCard>\n\n        {/* Fichier */}\n        {resourceType !== 'link' && (\n          <GlassCard variant=\"premium\" className=\"p-6\">\n            <h2 className=\"text-xl font-bold text-gray-900 mb-6\">Fichier</h2>\n            \n            <div className=\"space-y-4\">\n              {filePreview ? (\n                <div className=\"relative\">\n                  <img\n                    src={filePreview}\n                    alt=\"Aperçu\"\n                    className=\"w-full h-64 object-cover rounded-lg border border-gray-200\"\n                  />\n                  <button\n                    type=\"button\"\n                    onClick={() => {\n                      setFile(null)\n                      setFilePreview(null)\n                    }}\n                    className=\"absolute top-2 right-2 p-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors\"\n                  >\n                    <X className=\"h-4 w-4\" />\n                  </button>\n                </div>\n              ) : file ? (\n                <div className=\"border border-gray-200 rounded-lg p-4 flex items-center justify-between\">\n                  <div className=\"flex items-center gap-3\">\n                    <FileText className=\"h-8 w-8 text-gray-400\" />\n                    <div>\n                      <p className=\"font-medium text-gray-900\">{file.name}</p>\n                      <p className=\"text-sm text-gray-500\">{(file.size / 1024 / 1024).toFixed(2)} MB</p>\n                    </div>\n                  </div>\n                  <button\n                    type=\"button\"\n                    onClick={() => setFile(null)}\n                    className=\"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors\"\n                  >\n                    <X className=\"h-4 w-4\" />\n                  </button>\n                </div>\n              ) : (\n                <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-12 text-center hover:border-brand-blue transition-colors\">\n                  <Upload className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n                  <p className=\"text-gray-600 mb-2\">Cliquez pour télécharger un fichier</p>\n                  <p className=\"text-sm text-gray-500 mb-4\">Tous les formats acceptés jusqu'à 100MB</p>\n                  <input\n                    type=\"file\"\n                    onChange={handleFileChange}\n                    className=\"hidden\"\n                    id=\"file-upload\"\n                  />\n                  <label\n                    htmlFor=\"file-upload\"\n                    className=\"inline-block px-4 py-2 bg-brand-blue text-white rounded-lg hover:bg-brand-blue/90 transition-colors cursor-pointer\"\n                  >\n                    Choisir un fichier\n                  </label>\n                </div>\n              )}\n            </div>\n          </GlassCard>\n        )}\n\n        {/* Miniature */}\n        <GlassCard variant=\"premium\" className=\"p-6\">\n          <h2 className=\"text-xl font-bold text-gray-900 mb-6\">Miniature (optionnel)</h2>\n          \n          <div className=\"space-y-4\">\n            {thumbnailPreview ? (\n              <div className=\"relative\">\n                <img\n                  src={thumbnailPreview}\n                  alt=\"Aperçu\"\n                  className=\"w-full h-64 object-cover rounded-lg border border-gray-200\"\n                />\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    setThumbnailFile(null)\n                    setThumbnailPreview(null)\n                  }}\n                  className=\"absolute top-2 right-2 p-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors\"\n                >\n                  <X className=\"h-4 w-4\" />\n                </button>\n              </div>\n            ) : (\n              <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-12 text-center hover:border-brand-blue transition-colors\">\n                <Upload className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n                <p className=\"text-gray-600 mb-2\">Cliquez pour télécharger une miniature</p>\n                <p className=\"text-sm text-gray-500\">PNG, JPG jusqu'à 5MB</p>\n                <input\n                  type=\"file\"\n                  accept=\"image/*\"\n                  onChange={handleThumbnailChange}\n                  className=\"hidden\"\n                  id=\"thumbnail-upload\"\n                />\n                <label\n                  htmlFor=\"thumbnail-upload\"\n                  className=\"mt-4 inline-block px-4 py-2 bg-brand-blue text-white rounded-lg hover:bg-brand-blue/90 transition-colors cursor-pointer\"\n                >\n                  Choisir un fichier\n                </label>\n              </div>\n            )}\n          </div>\n        </GlassCard>\n\n        {/* Options de publication */}\n        <GlassCard variant=\"premium\" className=\"p-6\">\n          <h2 className=\"text-xl font-bold text-gray-900 mb-6\">Options de publication</h2>\n          \n          <div className=\"space-y-6\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Statut\n              </label>\n              <select\n                {...register('status')}\n                className=\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent transition-all\"\n              >\n                <option value=\"draft\">Brouillon</option>\n                <option value=\"published\">Publié</option>\n                <option value=\"archived\">Archivé</option>\n              </select>\n            </div>\n\n            <label className=\"flex items-center gap-3 cursor-pointer\">\n              <input\n                type=\"checkbox\"\n                {...register('is_featured')}\n                className=\"w-5 h-5 text-brand-blue border-gray-300 rounded focus:ring-brand-blue\"\n              />\n              <div>\n                <span className=\"font-medium text-gray-900\">Mettre en vedette</span>\n                <p className=\"text-sm text-gray-500\">La ressource apparaîtra dans la section \"En vedette\"</p>\n              </div>\n            </label>\n          </div>\n        </GlassCard>\n\n        {/* Actions */}\n        <div className=\"flex justify-end gap-4\">\n          <Link href=\"/dashboard/resources\">\n            <Button variant=\"ghost\" type=\"button\">\n              Annuler\n            </Button>\n          </Link>\n          <Button\n            type=\"submit\"\n            disabled={createMutation.isPending}\n            className=\"bg-brand-blue hover:bg-brand-blue/90 text-white shadow-lg shadow-brand-blue/20\"\n          >\n            {createMutation.isPending ? (\n              <>Création...</>\n            ) : (\n              <>\n                <Save className=\"h-4 w-4 mr-2\" />\n                Créer la ressource\n              </>\n            )}\n          </Button>\n        </div>\n      </form>\n    </motion.div>\n  )\n}\n\n"],"names":[],"mappings":"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"}