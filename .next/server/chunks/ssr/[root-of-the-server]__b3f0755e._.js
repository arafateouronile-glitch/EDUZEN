module.exports=[224361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},219897,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(497895);a.i(460355);var e=a.i(346271);let f=c.forwardRef(({className:a,variant:c="default",hoverable:f=!1,glow:g=!1,glowColor:h="rgba(51, 90, 207, 0.3)",...i},j)=>(0,b.jsxs)(e.motion.div,{ref:j,className:(0,d.cn)("relative rounded-2xl border backdrop-blur-xl transition-all duration-300",{"bg-white/70 dark:bg-gray-900/70 border-white/20 dark:border-gray-700/30 shadow-lg":"default"===c,"bg-white/80 dark:bg-gray-900/80 border-white/30 dark:border-gray-700/40 shadow-xl":"premium"===c,"bg-white/50 dark:bg-gray-900/50 border-white/10 dark:border-gray-700/20 shadow-md":"subtle"===c,"cursor-pointer":f,"hover:shadow-2xl hover:scale-[1.02]":f,"hover:bg-white/90 dark:hover:bg-gray-900/90":f},a),whileHover:f?{scale:1.02,y:-2}:void 0,transition:{type:"spring",stiffness:300,damping:30},...i,children:[g&&(0,b.jsx)(e.motion.div,{className:"absolute inset-0 rounded-2xl opacity-0 blur-xl",style:{background:`radial-gradient(circle, ${h} 0%, transparent 70%)`},animate:{opacity:[0,.5,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}}),(0,b.jsx)("div",{className:"relative z-10",children:i.children})]}));f.displayName="GlassCard",a.s(["GlassCard",()=>f])},913216,a=>{"use strict";var b=a.i(433217),c=a.i(370025),d=a.i(937927),e=a.i(50944),f=a.i(269240),g=a.i(572131),h=a.i(325383);function i(){let a=(0,f.createClient)(),i=(0,e.useRouter)(),j=(0,d.useQueryClient)(),{data:k,isLoading:l}=(0,b.useQuery)({queryKey:["session"],queryFn:async()=>{try{let b=new Promise((a,b)=>{setTimeout(()=>b(Error("Session timeout")),3e3)}),c=a.auth.getSession().then(({data:{session:a},error:b})=>b?(h.logger.error("Session error",b),null):a);return await Promise.race([c,b])}catch(a){return null}},retry:!1,refetchOnWindowFocus:!1,refetchOnMount:!1,staleTime:3e5}),{data:m,isLoading:n}=(0,b.useQuery)({queryKey:["user",k?.user?.id],queryFn:async()=>{if(!k?.user?.id)return null;try{let b=new Promise((a,b)=>{setTimeout(()=>b(Error("User fetch timeout")),3e3)}),c=a.from("users").select("id, organization_id, email, full_name, phone, avatar_url, role, permissions, is_active, last_login_at, created_at, updated_at").eq("id",k.user.id).maybeSingle().then(async({data:b,error:c})=>{if(c)return"PGRST116"===c.code||c.message?.includes("No rows"),null;if(!b&&k?.user?.id){h.logger.info("User not found in public.users, attempting to sync from auth.users...");try{let{data:b,error:c}=await a.rpc("sync_user_from_auth",{user_id:k.user.id});if(c)h.logger.error("Error syncing user:",c);else if(b?.success){h.logger.info("User synced successfully, refetching...",{syncResult:b}),await new Promise(a=>setTimeout(a,100));let{data:c,error:d}=await a.from("users").select("id, organization_id, email, full_name, phone, avatar_url, role, permissions, is_active, last_login_at, created_at, updated_at").eq("id",k.user.id).maybeSingle();if(d)h.logger.error("Error refetching synced user:",d),j.invalidateQueries({queryKey:["user",k.user.id]});else{if(c)return h.logger.info("Synced user retrieved successfully:",{id:c.id,email:c.email,hasOrg:!!c.organization_id}),c;h.logger.warn("User sync succeeded but refetch returned null - invalidating cache and retrying..."),j.invalidateQueries({queryKey:["user",k.user.id]})}}}catch(a){h.logger.error("Exception during user sync:",a)}return null}return b?(b.organization_id||h.logger.warn("User exists but has no organization_id"),b):null});return await Promise.race([c,b])}catch(a){return null}},enabled:!!k?.user?.id&&!l,retry:!1,refetchOnWindowFocus:!1,refetchOnMount:!1,staleTime:3e5}),o=(0,c.useMutation)({mutationFn:async({email:b,password:c})=>{let{data:d,error:e}=await a.auth.signInWithPassword({email:b,password:c});if(e)throw e;return d},onSuccess:async()=>{j.invalidateQueries({queryKey:["session"]}),j.invalidateQueries({queryKey:["user"]}),await new Promise(a=>setTimeout(a,300)),i.push("/dashboard")}}),p=(0,c.useMutation)({mutationFn:async({email:b,password:c,fullName:d,organizationName:e})=>{let{data:f,error:g}=await a.auth.signUp({email:b,password:c});if(g){if(h.logger.error("Auth signup error",Error(g.message),{status:g.status}),429===g.status||g.message?.includes("2 seconds"))throw Error("Trop de tentatives. Veuillez attendre quelques secondes avant de réessayer.");throw Error(g.message||"Erreur lors de la création du compte")}if(!f.user)throw Error("Erreur lors de la création du compte");let i=f.session;if(!i){await new Promise(a=>setTimeout(a,1e3));let{data:{session:b}}=await a.auth.getSession();i=b}if(!i&&f.user){let{data:{session:b}}=await a.auth.refreshSession();i=b}if(!i){await new Promise(a=>setTimeout(a,2e3));let{data:{session:b}}=await a.auth.getSession();b&&(i=b)}if(!i&&!f.user)throw Error("Erreur : la session n'a pas pu être établie. Vérifiez votre email pour confirmer votre compte si nécessaire.");let k=i?.user?.id||f.user.id,l=e.toUpperCase().replace(/\s+/g,"").slice(0,6),m=null;if(!k)throw Error("Erreur : impossible d'obtenir l'ID utilisateur");try{let{data:b,error:c}=await a.rpc("create_organization_for_user",{org_name:e,org_code:l,org_type:"primary",org_country:"SN",org_currency:"XOF",org_language:"fr",org_timezone:"Africa/Dakar",user_id:k});if(c){if("P0001"===c.code&&c.message?.includes("User must be authenticated")){let b=await a.rpc("create_organization_for_user",{org_name:e,org_code:l,org_type:"primary",org_country:"SN",org_currency:"XOF",org_language:"fr",org_timezone:"Africa/Dakar"});b.error?b.error:b.data&&(m=b.data)}}else b&&(m=b)}catch(a){}let n=null;if(m)n={id:m,name:e,code:l};else{let{data:b,error:c}=await a.from("organizations").insert({name:e,code:l,type:"primary",country:"SN",currency:"XOF",language:"fr",timezone:"Africa/Dakar",subscription_tier:"free",subscription_status:"active",settings:{}}).select("id, name, code").single();if(c){if(console.error("Organization creation error:",c),console.error("Error details:",{code:c.code,message:c.message,details:c.details,hint:c.hint}),"42501"===c.code)throw Error("Erreur de sécurité (RLS) : Impossible de créer l'organisation. Les politiques RLS bloquent la création. INSTRUCTIONS : 1. Exécutez le script supabase/create_organization_function.sql dans Supabase SQL Editor 2. OU exécutez le script supabase/fix_rls_urgent.sql pour corriger les politiques RLS 3. Attendez quelques secondes puis réessayez");throw Error(`Impossible de cr\xe9er l'organisation : ${c.message}`)}n=b,m=b?.id}if(!m)throw Error("Erreur : l'organisation n'a pas été créée correctement");let o=m||n?.id;if(!o)throw Error("Erreur : impossible d'obtenir l'ID de l'organisation");let p=null,q=null;try{let{data:c,error:e}=await a.rpc("create_user_for_organization",{user_id:k,user_email:b,user_full_name:d,organization_id:o});if(e){if(q=e,"42883"===e.code){let{data:c,error:e}=await a.from("users").insert({id:k,organization_id:o,email:b,full_name:d,role:"admin",is_active:!0}).select("id, organization_id, email, full_name, role").single();e?q=e:p=c}}else c&&(p={id:c,organization_id:o,email:b,full_name:d,role:"admin"})}catch(a){q=a}if(q){if("42501"===q.code)throw Error("Erreur RLS lors de la création de l'utilisateur. Exécutez le script supabase/create_user_function.sql dans Supabase SQL Editor, ou utilisez supabase/fix_existing_user.sql pour créer l'utilisateur manuellement.");throw q}if(!p)throw Error("Erreur : l'utilisateur n'a pas été créé");if(!p?.organization_id)throw Error("Erreur : l'utilisateur n'a pas d'organization_id");if(j.invalidateQueries({queryKey:["user",k]}),j.invalidateQueries({queryKey:["session"]}),!i){await new Promise(a=>setTimeout(a,1e3));let{data:{session:b}}=await a.auth.getSession();if(b)return{...f,session:b}}return f},onSuccess:async a=>{await new Promise(a=>setTimeout(a,1500));let b=(0,f.createClient)(),{data:{session:c}}=await b.auth.getSession();j.invalidateQueries({queryKey:["session"]}),a.user&&j.invalidateQueries({queryKey:["user",a.user.id]}),c?i.push("/dashboard"):i.push("/auth/login?message=confirm-email")}}),q=(0,c.useMutation)({mutationFn:async()=>{let{error:b}=await a.auth.signOut();if(b)throw b},onSuccess:()=>{j.clear(),i.push("/")}});return(0,g.useEffect)(()=>{let{data:{subscription:b}}=a.auth.onAuthStateChange((a,b)=>{j.setQueryData(["session"],b),b||j.clear()});return()=>b.unsubscribe()},[a,j]),{session:k,user:m,isLoading:l||n,isAuthenticated:!!k,login:o.mutate,register:p.mutate,logout:q.mutate,isLoggingIn:o.isPending,isRegistering:p.isPending,isLoggingOut:q.isPending,loginError:o.error,registerError:p.error}}a.s(["useAuth",()=>i])},205522,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(497895);a.i(460355);var e=a.i(346271),f=a.i(262036),g=a.i(290821),h=a.i(111269);let i=0,j=c.forwardRef(({className:a,label:j,error:k,helperText:l,variant:m="default",leftIcon:n,rightIcon:o,id:p,...q},r)=>{let[s,t]=c.useState(!1),[u,v]=c.useState(!!q.value||!!q.defaultValue),w=c.useId?.()||null,x=p||w||`input-${++i}`;c.useEffect(()=>{void 0!==q.value&&v(!!q.value)},[q.value]);let y=(0,d.cn)("flex w-full rounded-lg font-medium transition-all duration-300","placeholder:text-muted-foreground/60","focus:outline-none focus:ring-2 focus:ring-primary/20","disabled:cursor-not-allowed disabled:opacity-50",{"border-2 border-input bg-background px-4 py-3":"default"===m,"focus:border-primary focus:bg-white":"default"===m&&!k,"border-destructive focus:border-destructive focus:ring-destructive/20":k,"border-2 border-input bg-transparent px-4 py-3":"outlined"===m,"focus:border-primary focus:shadow-md focus:shadow-primary/10":"outlined"===m&&!k,"border-0 border-b-2 border-input bg-muted/50 px-4 py-3 rounded-b-none":"filled"===m,"focus:bg-muted focus:border-primary":"filled"===m&&!k,"focus:border-destructive bg-destructive/5":"filled"===m&&k},n&&"pl-11",o&&"pr-11",k&&"pr-11",a);return(0,b.jsxs)("div",{className:"w-full space-y-1.5",children:[j&&(0,b.jsxs)(e.motion.label,{htmlFor:x,initial:!1,animate:{color:k?"#EF4444":s?"rgb(37, 99, 235)":"rgb(107, 114, 128)"},className:(0,d.cn)("block text-sm font-medium transition-colors duration-200",k&&"text-destructive"),children:[j,q.required&&(0,b.jsx)("span",{className:"text-destructive ml-1",children:"*"})]}),(0,b.jsxs)("div",{className:"relative",children:[n&&(0,b.jsx)("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground pointer-events-none",children:n}),(0,b.jsx)(e.motion.input,{ref:r,id:x,...q,onChange:a=>{v(!!a.target.value),q.onChange?.(a)},onFocus:a=>{t(!0),q.onFocus?.(a)},onBlur:a=>{t(!1),q.onBlur?.(a)},className:y,animate:{scale:s?1.01:1,borderColor:k?"#EF4444":s?"rgb(37, 99, 235)":"rgb(226, 232, 240)"},transition:{duration:.2}}),(0,b.jsx)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none",children:k?(0,b.jsx)(e.motion.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:500,damping:30},children:(0,b.jsx)(g.AlertCircle,{className:"h-5 w-5 text-destructive"})}):o?(0,b.jsx)("div",{className:"text-muted-foreground",children:o}):u&&!k&&"filled"===m?(0,b.jsx)(e.motion.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:500,damping:30},children:(0,b.jsx)(h.CheckCircle2,{className:"h-5 w-5 text-success"})}):null})]}),(0,b.jsx)(f.AnimatePresence,{mode:"wait",children:(k||l)&&(0,b.jsx)(e.motion.p,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},transition:{duration:.2},className:(0,d.cn)("text-xs transition-colors duration-200",k?"text-destructive":"text-muted-foreground"),children:k||l})})]})});j.displayName="Input",a.s(["Input",()=>j])},917171,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(497895);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("label",{ref:e,className:(0,d.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 text-text-primary",a),...c}));e.displayName="Label",a.s(["Label",0,e])},992258,a=>{"use strict";let b=(0,a.i(170106).default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);a.s(["Mail",()=>b],992258)},603314,a=>{"use strict";let b=(0,a.i(170106).default)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);a.s(["Shield",()=>b],603314)},732860,a=>{"use strict";let b=(0,a.i(170106).default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);a.s(["ArrowRight",()=>b],732860)},254799,(a,b,c)=>{b.exports=a.x("crypto",()=>require("crypto"))},522734,(a,b,c)=>{b.exports=a.x("fs",()=>require("fs"))},500874,(a,b,c)=>{b.exports=a.x("buffer",()=>require("buffer"))},688947,(a,b,c)=>{b.exports=a.x("stream",()=>require("stream"))},406461,(a,b,c)=>{b.exports=a.x("zlib",()=>require("zlib"))},449719,(a,b,c)=>{b.exports=a.x("assert",()=>require("assert"))},943108,a=>{"use strict";let b=(0,a.i(170106).default)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);a.s(["Lock",()=>b],943108)},403888,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(238246),f=a.i(913216),g=a.i(269240),h=a.i(292116),i=a.i(340695),j=a.i(219897),k=a.i(205522),l=a.i(917171),m=a.i(603314),n=a.i(992258),o=a.i(943108),p=a.i(732860),q=a.i(111269),r=a.i(346271),s=a.i(262036),t=a.i(497895);function u({className:a,delay:c=0,duration:d=20,initialX:e=0,initialY:f=0}){return(0,b.jsx)(r.motion.div,{className:(0,t.cn)("absolute pointer-events-none opacity-40 blur-xl",a),initial:{x:e,y:f},animate:{x:[e,e+50,e-30,e],y:[f,f-60,f+40,f],rotate:[0,180,360],scale:[1,1.1,.9,1]},transition:{duration:d,repeat:1/0,ease:"linear",delay:c}})}function v(){return(0,b.jsxs)("div",{className:"absolute inset-0 overflow-hidden perspective-1000",children:[(0,b.jsx)("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"linear-gradient(rgba(59, 130, 246, 0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(59, 130, 246, 0.1) 1px, transparent 1px)",backgroundSize:"50px 50px",transform:"rotateX(60deg) scale(2)",transformOrigin:"center 0"}}),(0,b.jsx)(u,{className:"top-[10%] left-[10%] w-64 h-64 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 mix-blend-multiply filter blur-3xl opacity-30",duration:25,initialX:-50,initialY:-50}),(0,b.jsx)(u,{className:"top-[40%] right-[10%] w-72 h-72 rounded-3xl bg-gradient-to-tr from-purple-400 to-pink-600 mix-blend-multiply filter blur-3xl opacity-30",delay:2,duration:30,initialX:50,initialY:0}),(0,b.jsx)(u,{className:"bottom-[10%] left-[30%] w-96 h-96 rounded-full bg-gradient-to-t from-cyan-300 to-teal-500 mix-blend-multiply filter blur-3xl opacity-30",delay:5,duration:35,initialX:0,initialY:50}),(0,b.jsx)(r.motion.div,{className:"absolute top-[20%] right-[20%] w-20 h-20 border-4 border-blue-200/20 rounded-2xl rotate-45",animate:{rotate:[45,225],y:[0,-20,0]},transition:{duration:20,repeat:1/0,ease:"linear"}}),(0,b.jsx)(r.motion.div,{className:"absolute bottom-[20%] left-[15%] w-16 h-16 border-4 border-purple-200/20 rounded-full",animate:{scale:[1,1.2,1],x:[0,20,0]},transition:{duration:15,repeat:1/0,ease:"easeInOut"}})]})}function w(){let a=(0,d.useRouter)(),{login:t,isLoggingIn:u,loginError:w}=(0,f.useAuth)(),x=(0,g.createClient)(),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)(""),[C,D]=(0,c.useState)(null),[E,F]=(0,c.useState)("login"),[G,H]=(0,c.useState)(null),[I,J]=(0,c.useState)(""),[K,L]=(0,c.useState)(!1),M=async a=>{a.preventDefault(),D(null);try{let{data:a,error:b}=await x.auth.signInWithPassword({email:y,password:A});if(b)return void D(b.message);if(!a.user)return void D("Erreur de connexion");let c=await h.twoFactorAuthService.getConfig(a.user.id);c?.is_enabled?(H(a.user.id),F("2fa"),await x.auth.signOut()):t({email:y,password:A})}catch(a){D(a instanceof Error?a.message:"Une erreur est survenue")}},N=async b=>{b.preventDefault(),D(null),L(!0);try{if(!G||!I)return void D("Code requis");let b=await fetch("/api/2fa/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:G,code:I})}),c=await b.json();if(!c.success)return void D(c.error||"Code invalide");let{error:d}=await x.auth.signInWithPassword({email:y,password:A});if(d)return void D("Erreur de connexion après vérification 2FA");document.cookie=`2fa_session=${c.sessionToken}; path=/; max-age=1800`,await new Promise(a=>setTimeout(a,300)),a.push("/dashboard")}catch(a){D(a instanceof Error?a.message:"Une erreur est survenue")}finally{L(!1)}};return(0,b.jsxs)("div",{className:"min-h-screen flex items-center justify-center relative overflow-hidden bg-gray-50/50",children:[(0,b.jsx)(v,{}),(0,b.jsxs)("div",{className:"w-full max-w-md px-4 relative z-10",children:[(0,b.jsx)(s.AnimatePresence,{mode:"wait",children:"login"===E?(0,b.jsx)(r.motion.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},transition:{duration:.4,ease:[.16,1,.3,1]},children:(0,b.jsxs)(j.GlassCard,{variant:"premium",className:"p-8 border-2 border-white/60 shadow-2xl backdrop-blur-2xl bg-white/40",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsx)(r.motion.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:300,damping:20,delay:.1},className:"w-16 h-16 bg-gradient-to-br from-brand-blue to-brand-cyan rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg shadow-brand-blue/20 rotate-3 transform perspective-500 hover:rotate-6 transition-transform duration-500",children:(0,b.jsx)(m.Shield,{className:"h-8 w-8 text-white drop-shadow-md"})}),(0,b.jsx)(r.motion.h1,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"text-3xl font-display font-bold text-gray-900 tracking-tight mb-2",children:"Bon retour"}),(0,b.jsx)(r.motion.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-gray-600 font-medium",children:"Connectez-vous à votre espace EduZen"})]}),(0,b.jsxs)("form",{onSubmit:M,className:"space-y-5",children:[(0,b.jsxs)(r.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4},className:"space-y-2",children:[(0,b.jsx)(l.Label,{htmlFor:"email",className:"text-gray-700 font-bold ml-1 text-xs uppercase tracking-wider",children:"Email"}),(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsx)(n.Mail,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400 group-focus-within:text-brand-blue transition-colors"}),(0,b.jsx)(k.Input,{id:"email",type:"email",value:y,onChange:a=>z(a.target.value),required:!0,className:"pl-10 h-12 bg-white/60 border-gray-200 focus:bg-white focus:border-brand-blue/30 focus:ring-4 focus:ring-brand-blue/10 transition-all rounded-xl shadow-sm",placeholder:"votre@email.com",autoComplete:"email"})]})]}),(0,b.jsxs)(r.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5},className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)(l.Label,{htmlFor:"password",className:"text-gray-700 font-bold ml-1 text-xs uppercase tracking-wider",children:"Mot de passe"}),(0,b.jsx)(e.default,{href:"/auth/forgot-password",className:"text-xs font-semibold text-brand-blue hover:text-brand-blue-dark hover:underline transition-colors",children:"Mot de passe oublié ?"})]}),(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsx)(o.Lock,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400 group-focus-within:text-brand-blue transition-colors"}),(0,b.jsx)(k.Input,{id:"password",type:"password",value:A,onChange:a=>B(a.target.value),required:!0,className:"pl-10 h-12 bg-white/60 border-gray-200 focus:bg-white focus:border-brand-blue/30 focus:ring-4 focus:ring-brand-blue/10 transition-all rounded-xl shadow-sm",placeholder:"••••••••",autoComplete:"current-password"})]})]}),(0,b.jsx)(s.AnimatePresence,{children:(C||w)&&(0,b.jsxs)(r.motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-red-50/50 border border-red-100 text-red-600 px-4 py-3 rounded-xl text-sm flex items-start gap-2 shadow-sm",children:[(0,b.jsx)(m.Shield,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),(0,b.jsx)("p",{className:"font-medium",children:C||(w instanceof Error?w.message:"Une erreur est survenue")})]})}),(0,b.jsx)(r.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:(0,b.jsx)(i.Button,{type:"submit",className:"w-full h-12 bg-gradient-to-r from-brand-blue to-brand-cyan hover:from-brand-blue-dark hover:to-brand-cyan-dark text-white shadow-lg shadow-brand-blue/25 hover:shadow-xl hover:shadow-brand-blue/30 transition-all duration-300 rounded-xl font-bold text-base transform hover:-translate-y-0.5",disabled:u,children:u?(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"h-4 w-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),(0,b.jsx)("span",{children:"Connexion..."})]}):(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{children:"Se connecter"}),(0,b.jsx)(p.ArrowRight,{className:"h-4 w-4"})]})})})]}),(0,b.jsx)(r.motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.7},className:"mt-8 text-center",children:(0,b.jsxs)("p",{className:"text-gray-500 text-sm font-medium",children:["Pas encore de compte ?"," ",(0,b.jsx)(e.default,{href:"/auth/register",className:"text-brand-blue font-bold hover:text-brand-blue-dark hover:underline transition-colors",children:"Créer un compte"})]})})]})},"login"):(0,b.jsx)(r.motion.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},transition:{duration:.4,ease:[.16,1,.3,1]},children:(0,b.jsxs)(j.GlassCard,{variant:"premium",className:"p-8 border-2 border-white/60 shadow-2xl backdrop-blur-2xl bg-white/40",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsx)(r.motion.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:300,damping:20},className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg shadow-purple-500/20 rotate-3",children:(0,b.jsx)(m.Shield,{className:"h-8 w-8 text-white drop-shadow-md"})}),(0,b.jsx)("h2",{className:"text-2xl font-display font-bold text-gray-900 tracking-tight mb-2",children:"Vérification 2FA"}),(0,b.jsx)("p",{className:"text-gray-600 font-medium",children:"Entrez le code à 6 chiffres de votre application d'authentification"})]}),(0,b.jsxs)("form",{onSubmit:N,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{htmlFor:"2fa-code",className:"sr-only",children:"Code d'authentification"}),(0,b.jsx)("div",{className:"relative",children:(0,b.jsx)(k.Input,{id:"2fa-code",type:"text",inputMode:"numeric",maxLength:6,value:I,onChange:a=>J(a.target.value.replace(/\D/g,"")),placeholder:"000000",className:"h-16 font-mono text-center text-3xl tracking-[0.5em] bg-white/60 border-gray-200 focus:bg-white focus:border-purple-500/30 focus:ring-4 focus:ring-purple-500/10 transition-all rounded-xl shadow-inner",autoFocus:!0})}),(0,b.jsx)("p",{className:"text-xs text-center text-gray-500 font-medium",children:"Vous pouvez également utiliser un code de récupération si vous avez perdu l'accès à votre application."})]}),(0,b.jsx)(s.AnimatePresence,{children:C&&(0,b.jsxs)(r.motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-red-50/50 border border-red-100 text-red-600 px-4 py-3 rounded-xl text-sm flex items-center justify-center gap-2 shadow-sm",children:[(0,b.jsx)(m.Shield,{className:"h-4 w-4"}),(0,b.jsx)("p",{className:"font-medium",children:C})]})}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(i.Button,{type:"submit",className:"w-full h-12 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white shadow-lg shadow-purple-500/25 hover:shadow-xl hover:shadow-purple-500/30 transition-all duration-300 rounded-xl font-bold text-base transform hover:-translate-y-0.5",disabled:K||6!==I.length,children:K?(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"h-4 w-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),(0,b.jsx)("span",{children:"Vérification..."})]}):(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(q.CheckCircle2,{className:"h-5 w-5"}),(0,b.jsx)("span",{children:"Vérifier"})]})}),(0,b.jsx)(i.Button,{type:"button",variant:"ghost",className:"w-full h-12 text-gray-500 hover:text-gray-900 hover:bg-white/50 rounded-xl font-medium border border-transparent hover:border-gray-200 transition-all",onClick:()=>{F("login"),J(""),H(null),D(null)},children:"Retour à la connexion"})]})]})]})},"2fa")}),(0,b.jsx)(r.motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"mt-8 text-center",children:(0,b.jsxs)("p",{className:"text-xs text-gray-400 font-medium",children:["© ",new Date().getFullYear()," EduZen. Tous droits réservés."]})})]})]})}a.s(["default",()=>w])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__b3f0755e._.js.map