module.exports=[400210,a=>{"use strict";let b=(0,a.i(170106).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],400210)},452218,571907,a=>{"use strict";var b,c,d=a.i(325383),e=((b={}).AUTH_REQUIRED="AUTH_1001",b.AUTH_INVALID_CREDENTIALS="AUTH_1002",b.AUTH_SESSION_EXPIRED="AUTH_1003",b.AUTH_INSUFFICIENT_PERMISSIONS="AUTH_1004",b.AUTH_2FA_REQUIRED="AUTH_1005",b.AUTH_2FA_INVALID="AUTH_1006",b.VALIDATION_ERROR="VALID_2001",b.VALIDATION_REQUIRED_FIELD="VALID_2002",b.VALIDATION_INVALID_FORMAT="VALID_2003",b.VALIDATION_UNIQUE_CONSTRAINT="VALID_2004",b.DB_CONNECTION_ERROR="DB_3001",b.DB_QUERY_ERROR="DB_3002",b.DB_NOT_FOUND="DB_3003",b.DB_CONSTRAINT_VIOLATION="DB_3004",b.DB_FOREIGN_KEY_CONSTRAINT="DB_3006",b.DB_RLS_POLICY_VIOLATION="DB_3005",b.NETWORK_ERROR="NET_4001",b.API_TIMEOUT="NET_4002",b.API_RATE_LIMIT="NET_4003",b.API_SERVER_ERROR="NET_4004",b.API_NOT_FOUND="NET_4005",b.API_BAD_REQUEST="NET_4006",b.BUSINESS_LOGIC_ERROR="BIZ_5001",b.RESOURCE_LOCKED="BIZ_5002",b.OPERATION_NOT_ALLOWED="BIZ_5003",b.QUOTA_EXCEEDED="BIZ_5004",b.INTERNAL_ERROR="SYS_6001",b.CONFIGURATION_ERROR="SYS_6002",b.SERVICE_UNAVAILABLE="SYS_6003",b);(c={}).LOW="low",c.MEDIUM="medium",c.HIGH="high",c.CRITICAL="critical";class f extends Error{code;severity;userMessage;retryable;context;originalError;constructor(a,b="SYS_6001",c="medium",d={},e){super(a),this.name="AppError",this.code=b,this.severity=c,this.userMessage=d.userMessage||this.getDefaultUserMessage(b),this.retryable=d.retryable??this.isRetryable(b),this.context={...d,code:b,severity:c,timestamp:new Date().toISOString()},this.originalError=e,Error.captureStackTrace&&Error.captureStackTrace(this,f)}getDefaultUserMessage(a){return({AUTH_1001:"Vous devez être connecté pour effectuer cette action.",AUTH_1002:"Email ou mot de passe incorrect.",AUTH_1003:"Votre session a expiré. Veuillez vous reconnecter.",AUTH_1004:"Vous n'avez pas les permissions nécessaires.",AUTH_1005:"Authentification à deux facteurs requise.",AUTH_1006:"Code d'authentification invalide.",VALID_2001:"Les données fournies ne sont pas valides.",VALID_2002:"Certains champs obligatoires sont manquants.",VALID_2003:"Le format des données est incorrect.",VALID_2004:"Cette valeur existe déjà.",DB_3001:"Impossible de se connecter à la base de données.",DB_3002:"Erreur lors de l'exécution de la requête.",DB_3003:"Ressource introuvable.",DB_3004:"Cette opération viole une contrainte de la base de données.",DB_3006:"Cette opération viole une contrainte de clé étrangère.",DB_3005:"Vous n'avez pas accès à cette ressource.",NET_4001:"Erreur de connexion réseau. Vérifiez votre connexion internet.",NET_4002:"La requête a pris trop de temps. Veuillez réessayer.",NET_4003:"Trop de requêtes. Veuillez patienter quelques instants.",NET_4004:"Erreur serveur. Veuillez réessayer plus tard.",NET_4005:"Ressource introuvable.",NET_4006:"Requête invalide.",BIZ_5001:"Cette opération n'est pas autorisée dans le contexte actuel.",BIZ_5002:"Cette ressource est actuellement verrouillée.",BIZ_5003:"Cette opération n'est pas autorisée.",BIZ_5004:"Vous avez atteint la limite autorisée.",SYS_6001:"Une erreur interne est survenue. Veuillez réessayer.",SYS_6002:"Erreur de configuration du système.",SYS_6003:"Service temporairement indisponible."})[a]||"Une erreur inattendue est survenue."}isRetryable(a){return["NET_4001","NET_4002","NET_4004","DB_3001","SYS_6003"].includes(a)}toJSON(){return{name:this.name,message:this.message,code:this.code,severity:this.severity,userMessage:this.userMessage,retryable:this.retryable,context:this.context,stack:this.stack,originalError:this.originalError instanceof Error?{name:this.originalError.name,message:this.originalError.message,stack:this.originalError.stack}:this.originalError}}}let g=new class{handleError(a,b={}){if(a instanceof f)return this.logError(a),a;if(a instanceof Error)return this.handleStandardError(a,b);if(this.isSupabaseError(a))return this.handleSupabaseError(a,b);let c=new f("Une erreur inattendue est survenue.","SYS_6001","high",b,a);return this.logError(c),c}handleStandardError(a,b){let c=a.message.toLowerCase(),d="SYS_6001",e="medium";c.includes("network")||c.includes("fetch")?(d="NET_4001",e="medium"):c.includes("timeout")?(d="NET_4002",e="medium"):c.includes("unauthorized")||c.includes("401")?(d="AUTH_1001",e="high"):c.includes("forbidden")||c.includes("403")?(d="AUTH_1004",e="high"):c.includes("not found")||c.includes("404")?(d="DB_3003",e="low"):(c.includes("validation")||c.includes("invalid"))&&(d="VALID_2001",e="low");let g=new f(a.message,d,e,b,a);return this.logError(g),g}handleSupabaseError(a,b){let c=a.code||a.status,d=a.message||"Erreur Supabase",e=b.code||"DB_3002",g="medium";if(!b.code)switch(c){case"PGRST116":case"42P01":e="DB_3003",g="low";break;case"42501":e="DB_3005",g="high";break;case"23505":e="VALID_2004",g="low";break;case"23503":e="DB_3004",g="medium";break;case"PGRST301":case"400":e="NET_4006",g="low";break;case"401":e="AUTH_1001",g="high";break;case"403":e="AUTH_1004",g="high";break;case"404":e="NET_4005",g="low";break;case"500":e="NET_4004",g="high"}"DB_3006"===e&&(g="medium");let h=new f(d,e,g,b,a);return this.logError(h),h}isSupabaseError(a){return a&&(a.code||a.status||a.message)&&("string"==typeof a.code||"number"==typeof a.status)}logError(a){let b={...a.context,code:a.code,severity:a.severity,retryable:a.retryable};switch(a.severity){case"critical":case"high":d.logger.error(a.message,a.originalError||a,b);break;case"medium":d.logger.warn(a.message,b);break;case"low":d.logger.info(`Error: ${a.message}`,b)}}createValidationError(a,b){return new f(a,"VALID_2001","low",{field:b,userMessage:a})}createAuthError(a,b){return new f(b||"Erreur d'authentification",a,"high")}createDatabaseError(a,b){return new f(a,"DB_3002","medium",{},b)}createNotFoundError(a,b){return new f(a,"DB_3003","low",b)}};a.s(["AppError",()=>f,"ErrorCode",()=>e,"errorHandler",0,g],571907),a.s([],452218)},49492,a=>{"use strict";a.i(452218);var b=a.i(571907);async function c(a,c,d,e){try{let f=a.from(c).select(e?.select||"*").eq("organization_id",d);e?.filters&&Object.entries(e.filters).forEach(([a,b])=>{null!=b&&(f=f.eq(a,b))}),e?.search&&(f=f.ilike(e.search.field,`%${e.search.value}%`)),f=e?.orderBy?f.order(e.orderBy.column,{ascending:e.orderBy.ascending??!1}):f.order("created_at",{ascending:!1});let{data:g,error:h}=await f;if(h)throw b.errorHandler.handleError(h,{organizationId:d,operation:"getAllByOrganization",table:c});return g||[]}catch(a){if(a instanceof b.AppError)throw a;throw b.errorHandler.handleError(a,{organizationId:d,operation:"getAllByOrganization",table:c})}}async function d(a,c,d,e){try{let{data:f,error:g}=await a.from(c).select(e||"*").eq("id",d).single();if(g){if("PGRST116"===g.code||"42P01"===g.code)throw b.errorHandler.handleError(g,{code:b.ErrorCode.DB_NOT_FOUND,operation:"getById",id:d,table:c});throw b.errorHandler.handleError(g,{operation:"getById",id:d,table:c})}if(!f)throw b.errorHandler.createDatabaseError(`Enregistrement avec l'ID ${d} introuvable dans ${c}`,{id:d,table:c});return f}catch(a){if(a instanceof b.AppError)throw a;throw b.errorHandler.handleError(a,{operation:"getById",id:d,table:c})}}a.s(["getAllByOrganization",()=>c,"getById",()=>d])},697662,a=>{"use strict";a.i(452218);var b=a.i(571907);function c(a,c){for(let d of c)if(!a[d])throw b.errorHandler.createValidationError(`Le champ ${String(d)} est obligatoire`,String(d))}a.s(["validateRequired",()=>c])},542502,a=>{"use strict";var b=a.i(269240);a.i(452218);var c=a.i(571907),d=a.i(325383),e=a.i(49492);async function f(a,b,d,e){try{let f=e.year||new Date().getFullYear().toString().slice(-2),g=e.padding||6,h=e.fieldName||"number",i=`${e.prefix}-${e.orgCode}-${f}-%`,{data:j,error:k}=await a.from(b).select(h).eq("organization_id",d).like(h,i).order(h,{ascending:!1}).limit(1).maybeSingle();if(k&&"PGRST116"!==k.code&&"42P01"!==k.code)throw c.errorHandler.handleError(k,{operation:"generateUniqueNumber",table:b,organizationId:d});let l=1;if(j&&j[h]){let a=String(j[h]).split("-");l=parseInt(a[a.length-1]||"0",10)+1}return`${e.prefix}-${e.orgCode}-${f}-${String(l).padStart(g,"0")}`}catch(a){throw c.errorHandler.handleError(a,{operation:"generateUniqueNumber",table:b,organizationId:d})}}var g=a.i(697662);let h=new class{supabase;constructor(a){this.supabase=a||(0,b.createClient)()}async getAll(a,b){try{let d=b?.page||1,e=b?.limit||50,f=(d-1)*e;if(b?.search){let g=this.supabase.from("students").select("*, classes(id, name, level)",{count:"exact"}).eq("organization_id",a).or(`first_name.ilike.%${b.search}%,last_name.ilike.%${b.search}%,student_number.ilike.%${b.search}%`);b?.classId&&(g=g.eq("class_id",b.classId)),b?.status&&(g=g.eq("status",b.status));let{data:h,error:i,count:j}=await g.order("last_name",{ascending:!0}).range(f,f+e-1);if(i)throw c.errorHandler.handleError(i,{organizationId:a,operation:"getAll",filters:b});return{data:h||[],total:j||0,page:d,limit:e,totalPages:Math.ceil((j||0)/e)}}let g=this.supabase.from("students").select("*, classes(id, name, level)",{count:"exact"}).eq("organization_id",a);b?.classId&&(g=g.eq("class_id",b.classId)),b?.status&&(g=g.eq("status",b.status));let{data:h,error:i,count:j}=await g.order("last_name",{ascending:!0}).range(f,f+e-1);if(i)throw c.errorHandler.handleError(i,{organizationId:a,operation:"getAll",filters:b});return{data:h||[],total:j||0,page:d,limit:e,totalPages:Math.ceil((j||0)/e)}}catch(b){if(b instanceof c.AppError)throw b;throw c.errorHandler.handleError(b,{organizationId:a,operation:"getAll"})}}async getById(a){try{return(0,e.getById)(this.supabase,"students",a,"*, classes(id, name, level)")}catch(b){if(b instanceof c.AppError)throw b;throw c.errorHandler.handleError(b,{operation:"getById",id:a})}}async getByNumber(a,b){try{let{data:d,error:e}=await this.supabase.from("students").select("*").eq("organization_id",a).eq("student_number",b).single();if(e){if("PGRST116"===e.code||"42P01"===e.code)throw c.errorHandler.handleError(e,{code:c.ErrorCode.DB_NOT_FOUND,operation:"getByNumber",organizationId:a,studentNumber:b});throw c.errorHandler.handleError(e,{operation:"getByNumber",organizationId:a,studentNumber:b})}return d}catch(d){if(d instanceof c.AppError)throw d;throw c.errorHandler.handleError(d,{operation:"getByNumber",organizationId:a,studentNumber:b})}}async create(a){try{(0,g.validateRequired)(a,["first_name","last_name","organization_id"]);let b=a.student_number;if(!b||""===b.trim()){let c=a.organization_id;if(!c)throw Error("organization_id is required");let{data:d}=await this.supabase.from("organizations").select("code").eq("id",c).single(),e=d?.code||"ORG",g=new Date().getFullYear().toString().slice(-2);b=await f(this.supabase,"students",c,{prefix:"EDU",orgCode:e,year:g,padding:6,fieldName:"student_number"})}let e={...a,student_number:b},{data:h,error:i}=await this.supabase.from("students").insert(e).select().single();if(i){if("23505"===i.code)throw c.errorHandler.handleError(i,{code:c.ErrorCode.VALIDATION_UNIQUE_CONSTRAINT,operation:"create",field:"student_number"});if("42501"===i.code)throw c.errorHandler.handleError(i,{code:c.ErrorCode.DB_RLS_POLICY_VIOLATION,operation:"create"});throw c.errorHandler.handleError(i,{operation:"create",student:a})}return d.logger.info("Étudiant créé avec succès",{id:h?.id,organizationId:a.organization_id||void 0,studentNumber:h?.student_number}),h}catch(b){if(b instanceof c.AppError)throw b;throw c.errorHandler.handleError(b,{operation:"create",student:a})}}async update(a,b){try{let e={...b};if("class_id"in e)if(""!==e.class_id&&e.class_id){let{data:a,error:b}=await this.supabase.from("classes").select("id").eq("id",e.class_id).maybeSingle();a||b||(e.class_id=null)}else e.class_id=null;let{data:f,error:g}=await this.supabase.from("students").update(e).eq("id",a).select().single();if(g){if("PGRST116"===g.code||"42P01"===g.code)throw c.errorHandler.handleError(g,{code:c.ErrorCode.DB_NOT_FOUND,operation:"update",id:a});if("42501"===g.code)throw c.errorHandler.handleError(g,{code:c.ErrorCode.DB_RLS_POLICY_VIOLATION,operation:"update",id:a});throw c.errorHandler.handleError(g,{operation:"update",id:a,updates:b})}if(!f)throw c.errorHandler.createDatabaseError(`\xc9tudiant avec l'ID ${a} introuvable pour la mise \xe0 jour`,{id:a});return d.logger.info("Étudiant mis à jour avec succès",{id:a,updates:b}),f}catch(d){if(d instanceof c.AppError)throw d;throw c.errorHandler.handleError(d,{operation:"update",id:a,updates:b})}}async delete(a){return this.update(a,{status:"inactive"})}async import(a,b){try{if(!b||0===b.length)throw c.errorHandler.createValidationError("Aucun étudiant à importer","students");let{data:e}=await this.supabase.from("organizations").select("code").eq("id",a).single(),g=e?.code||"ORG",h=new Date().getFullYear().toString().slice(-2),i=await Promise.all(b.map(async b=>{if(b.student_number&&""!==b.student_number.trim())return b;let c=await f(this.supabase,"students",a,{prefix:"EDU",orgCode:g,year:h,padding:6,fieldName:"student_number"});return{...b,student_number:c}})),{data:j,error:k}=await this.supabase.from("students").insert(i).select();if(k){if("23505"===k.code)throw c.errorHandler.handleError(k,{code:c.ErrorCode.VALIDATION_UNIQUE_CONSTRAINT,operation:"import",field:"student_number"});throw c.errorHandler.handleError(k,{operation:"import",organizationId:a,count:b.length})}return d.logger.info("Étudiants importés avec succès",{organizationId:a,count:j?.length||0}),j||[]}catch(b){if(b instanceof c.AppError)throw b;throw c.errorHandler.handleError(b,{operation:"import",organizationId:a})}}};a.s(["studentService",0,h],542502)},34870,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(370025),f=a.i(433217),g=a.i(937927),h=a.i(913216),i=a.i(269240),j=a.i(542502),k=a.i(340695),l=a.i(703130),m=a.i(400210),n=a.i(238246);function o(){let a=(0,d.useRouter)(),o=(0,d.useParams)().id,p=(0,g.useQueryClient)(),{user:q,isLoading:r}=(0,h.useAuth)(),s=(0,i.createClient)(),[t,u]=(0,c.useState)({first_name:"",last_name:"",date_of_birth:"",gender:"",email:"",phone:"",address:"",city:"",class_id:"",enrollment_date:"",status:"active"}),{data:v,isLoading:w}=(0,f.useQuery)({queryKey:["student",o],queryFn:()=>j.studentService.getById(o),enabled:!!o}),{data:x}=(0,f.useQuery)({queryKey:["program-sessions-all",q?.organization_id],queryFn:async()=>{if(!q?.organization_id)return[];let{data:a,error:b}=await s.from("sessions").select("id, name, start_date, end_date, formations!inner(id, name, code, organization_id, programs(id, name))").eq("formations.organization_id",q.organization_id).order("start_date",{ascending:!1});if(b)throw b;return a?.map(a=>({id:a.id,name:`${a.name} - ${a.formations.name}${a.formations.programs?` (${a.formations.programs.name})`:""}`,code:a.formations.code,start_date:a.start_date,end_date:a.end_date}))||[]},enabled:!!q?.organization_id&&!r});(0,c.useEffect)(()=>{v&&u({first_name:v.first_name||"",last_name:v.last_name||"",date_of_birth:v.date_of_birth?v.date_of_birth.split("T")[0]:"",gender:v.gender||"",email:v.email||"",phone:v.phone||"",address:v.address||"",city:v.city||"",class_id:v.class_id||"",enrollment_date:v.enrollment_date?v.enrollment_date.split("T")[0]:"",status:v.status||"active"})},[v]);let y=(0,e.useMutation)({mutationFn:async()=>{if(!q?.organization_id)throw Error("Organization ID manquant");console.log("Mise à jour de l'élève:",o,t);let a=await j.studentService.update(o,{first_name:t.first_name,last_name:t.last_name,date_of_birth:t.date_of_birth||null,gender:t.gender||null,email:t.email||null,phone:t.phone||null,address:t.address||null,city:t.city||null,class_id:t.class_id||null,enrollment_date:t.enrollment_date||new Date().toISOString().split("T")[0],status:t.status});return console.log("Élève mis à jour avec succès:",a),a},onSuccess:b=>{console.log("onSuccess appelé avec:",b),p.invalidateQueries({queryKey:["student",o]}),p.invalidateQueries({queryKey:["students"]}),a.push(`/dashboard/students/${b.id}`)},onError:a=>{console.error("Erreur lors de la mise à jour de l'élève:",a)}});return r||w?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,b.jsx)("p",{children:"Chargement..."})}):q?q.organization_id?v?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,b.jsx)(n.default,{href:`/dashboard/students/${o}`,children:(0,b.jsx)(k.Button,{variant:"ghost",size:"icon",children:(0,b.jsx)(m.ArrowLeft,{className:"h-4 w-4"})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Modifier l'élève"}),(0,b.jsxs)("p",{className:"mt-2 text-sm text-gray-600",children:["Modifiez les informations de ",v.first_name," ",v.last_name]})]})]}),(0,b.jsxs)(l.Card,{children:[(0,b.jsx)(l.CardHeader,{children:(0,b.jsx)(l.CardTitle,{children:"Informations personnelles"})}),(0,b.jsx)(l.CardContent,{children:(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault(),y.mutate()},className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Prénom *"}),(0,b.jsx)("input",{type:"text",required:!0,value:t.first_name,onChange:a=>u({...t,first_name:a.target.value}),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Nom *"}),(0,b.jsx)("input",{type:"text",required:!0,value:t.last_name,onChange:a=>u({...t,last_name:a.target.value}),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Date de naissance"}),(0,b.jsx)("input",{type:"date",value:t.date_of_birth,onChange:a=>u({...t,date_of_birth:a.target.value}),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Genre"}),(0,b.jsxs)("select",{value:t.gender,onChange:a=>u({...t,gender:a.target.value}),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target",children:[(0,b.jsx)("option",{value:"",children:"Sélectionner"}),(0,b.jsx)("option",{value:"male",children:"Masculin"}),(0,b.jsx)("option",{value:"female",children:"Féminin"}),(0,b.jsx)("option",{value:"other",children:"Autre"})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Email"}),(0,b.jsx)("input",{type:"email",value:t.email,onChange:a=>u({...t,email:a.target.value}),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Téléphone"}),(0,b.jsx)("input",{type:"tel",value:t.phone,onChange:a=>u({...t,phone:a.target.value}),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Adresse"}),(0,b.jsx)("input",{type:"text",value:t.address,onChange:a=>u({...t,address:a.target.value}),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Ville"}),(0,b.jsx)("input",{type:"text",value:t.city,onChange:a=>u({...t,city:a.target.value}),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Session"}),(0,b.jsxs)("select",{value:t.class_id,onChange:a=>u({...t,class_id:a.target.value}),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target",children:[(0,b.jsx)("option",{value:"",children:"Aucune session"}),x?.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Statut"}),(0,b.jsxs)("select",{value:t.status,onChange:a=>u({...t,status:a.target.value}),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target",children:[(0,b.jsx)("option",{value:"active",children:"Actif"}),(0,b.jsx)("option",{value:"inactive",children:"Inactif"}),(0,b.jsx)("option",{value:"graduated",children:"Diplômé"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Date d'inscription *"}),(0,b.jsx)("input",{type:"date",required:!0,value:t.enrollment_date,onChange:a=>u({...t,enrollment_date:a.target.value}),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target"})]}),y.error&&(0,b.jsx)("div",{className:"bg-destructive/10 text-destructive px-4 py-3 rounded-lg text-sm",children:y.error instanceof Error?y.error.message:"Une erreur est survenue"}),(0,b.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,b.jsx)(n.default,{href:`/dashboard/students/${o}`,children:(0,b.jsx)(k.Button,{type:"button",variant:"outline",children:"Annuler"})}),(0,b.jsx)(k.Button,{type:"submit",disabled:y.isPending,children:y.isPending?"Enregistrement...":"Enregistrer les modifications"})]})]})})]})]}):(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:"Élève non trouvé"}),(0,b.jsx)(n.default,{href:"/dashboard/students",children:(0,b.jsx)(k.Button,{children:"Retour à la liste"})})]})}):(0,b.jsx)("div",{className:"space-y-6",children:(0,b.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Organization ID manquant"}),(0,b.jsx)("p",{className:"text-red-700 mb-4",children:"Votre compte n'est pas associé à une organisation."})]})}):(0,b.jsx)("div",{className:"space-y-6",children:(0,b.jsxs)("div",{className:"bg-warning-bg border border-warning-border rounded-lg p-4",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-warning-primary mb-2",children:"Utilisateur non trouvé"}),(0,b.jsx)("p",{className:"text-warning-primary",children:"Votre compte n'existe pas encore dans la base de données."})]})})}a.s(["default",()=>o])}];

//# sourceMappingURL=_68e3b7b2._.js.map