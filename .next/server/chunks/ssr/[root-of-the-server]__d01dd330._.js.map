{"version":3,"sources":["../../../../components/public/catalog-styles.tsx/__nextjs-internal-proxy.mjs","../../../../components/public/programs-list.tsx/__nextjs-internal-proxy.mjs","../../../../components/landing/Navbar.tsx/__nextjs-internal-proxy.mjs","../../../../components/landing/Footer.tsx/__nextjs-internal-proxy.mjs","../../../../app/programmes/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const CatalogStyles = registerClientReference(\n    function() { throw new Error(\"Attempted to call CatalogStyles() from the server but CatalogStyles is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/public/catalog-styles.tsx\",\n    \"CatalogStyles\",\n);\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const PublicProgramsList = registerClientReference(\n    function() { throw new Error(\"Attempted to call PublicProgramsList() from the server but PublicProgramsList is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/public/programs-list.tsx\",\n    \"PublicProgramsList\",\n);\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Navbar = registerClientReference(\n    function() { throw new Error(\"Attempted to call Navbar() from the server but Navbar is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/landing/Navbar.tsx\",\n    \"Navbar\",\n);\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Footer = registerClientReference(\n    function() { throw new Error(\"Attempted to call Footer() from the server but Footer is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/landing/Footer.tsx\",\n    \"Footer\",\n);\n","/**\n * Page publique - Catalogue des programmes\n * Route: /programmes\n * Affiche les programmes publics avec leurs formations et sessions\n */\n\nimport { Metadata } from 'next'\nimport { PublicProgramsList } from '@/components/public/programs-list'\nimport { createClient } from '@/lib/supabase/server'\nimport { Navbar } from '@/components/landing/Navbar'\nimport { Footer } from '@/components/landing/Footer'\nimport { CatalogStyles } from '@/components/public/catalog-styles'\n\nexport const metadata: Metadata = {\n  title: 'Catalogue des Formations | EDUZEN',\n  description: 'Découvrez notre catalogue complet de formations professionnelles. Formations certifiées, éligibles CPF, avec inscription en ligne.',\n  keywords: ['formations', 'formation professionnelle', 'CPF', 'certification', 'formation continue'],\n  openGraph: {\n    title: 'Catalogue des Formations | EDUZEN',\n    description: 'Découvrez notre catalogue complet de formations professionnelles',\n    type: 'website',\n  },\n}\n\nexport default async function ProgrammesPage({\n  searchParams,\n}: {\n  searchParams: { [key: string]: string | string[] | undefined }\n}) {\n  const search = typeof searchParams.search === 'string' ? searchParams.search : undefined\n  const organizationId = typeof searchParams.org === 'string' ? searchParams.org : undefined\n\n  const supabase = await createClient()\n\n  // Récupérer les programmes publics avec leurs formations et sessions\n  let programsQuery = supabase\n    .from('programs')\n    .select(`\n      *,\n      formations(\n        *,\n        sessions(*)\n      )\n    `)\n    .eq('is_public', true)\n    .eq('is_active', true)\n\n  if (organizationId) {\n    programsQuery = programsQuery.eq('organization_id', organizationId)\n  }\n\n  if (search) {\n    programsQuery = programsQuery.or(`name.ilike.%${search}%,description.ilike.%${search}%,public_description.ilike.%${search}%`)\n  }\n\n  const { data: programs = [] } = await programsQuery.order('created_at', { ascending: false })\n\n  // Filtrer les formations et sessions inactives\n  const programsWithActiveContent = programs.map((program: any) => ({\n    ...program,\n    formations: (program.formations || []).filter((f: any) => f.is_active).map((formation: any) => ({\n      ...formation,\n      sessions: (formation.sessions || []).filter((s: any) => s.status === 'scheduled' || s.status === 'ongoing'),\n    })),\n  }))\n\n  // Récupérer les informations de l'organisation si une seule organisation\n  let organization = null\n  if (organizationId || (programs.length > 0 && programs[0]?.organization_id)) {\n    const orgId = organizationId || programs[0]?.organization_id\n    const { data: org } = await supabase\n      .from('organizations')\n      .select('*')\n      .eq('id', orgId)\n      .maybeSingle()\n    \n    organization = org\n  }\n\n  // Récupérer les paramètres du catalogue public\n  let catalogSettings = null\n  if (organizationId || (organization && organization.id)) {\n    const orgId = organizationId || organization?.id\n    const { data: settings } = await supabase\n      .from('public_catalog_settings')\n      .select('*')\n      .eq('organization_id', orgId)\n      .eq('is_enabled', true)\n      .maybeSingle()\n    \n    catalogSettings = settings\n  }\n\n  // Utiliser les valeurs des settings ou celles par défaut\n  const heroTitle = catalogSettings?.hero_title || organization?.name || 'Catalogue des Formations'\n  const heroSubtitle = catalogSettings?.hero_subtitle || 'Découvrez nos formations professionnelles certifiées et éligibles au CPF'\n  const heroDescription = catalogSettings?.hero_description\n  const heroButtonText = catalogSettings?.hero_button_text || 'Découvrir nos formations'\n  const heroButtonLink = catalogSettings?.hero_button_link || '/programmes'\n  const logoUrl = catalogSettings?.logo_url || organization?.logo_url\n  const primaryColor = catalogSettings?.primary_color || '#274472'\n  const coverImageUrl = catalogSettings?.cover_image_url\n\n  return (\n    <>\n      <CatalogStyles primaryColor={primaryColor} />\n      <Navbar />\n      <div className=\"min-h-screen bg-gradient-to-b from-gray-50 to-white\">\n        {/* Hero Section avec image de couverture si disponible */}\n        {coverImageUrl ? (\n          <section className=\"relative h-96 w-full\">\n            <div \n              className=\"absolute inset-0 bg-cover bg-center\"\n              style={{ backgroundImage: `url(${coverImageUrl})` }}\n            >\n              <div className=\"absolute inset-0 bg-black/50\" />\n            </div>\n            <div className=\"relative container mx-auto px-4 h-full flex items-center\">\n              <div className=\"max-w-3xl text-white\">\n                <h1 className=\"text-4xl md:text-5xl font-bold mb-4\">\n                  {heroTitle}\n                </h1>\n                {heroSubtitle && (\n                  <p className=\"text-xl text-white/90 mb-4\">\n                    {heroSubtitle}\n                  </p>\n                )}\n                {heroDescription && (\n                  <p className=\"text-lg text-white/80 mb-6\">\n                    {heroDescription}\n                  </p>\n                )}\n                <a\n                  href={heroButtonLink}\n                  className=\"inline-block px-6 py-3 bg-white text-gray-900 rounded-lg font-semibold hover:bg-gray-100 transition-colors\"\n                >\n                  {heroButtonText}\n                </a>\n              </div>\n            </div>\n          </section>\n        ) : (\n          <section className=\"text-white py-16\" style={{ backgroundColor: primaryColor }}>\n            <div className=\"container mx-auto px-4\">\n              <div className=\"max-w-3xl mx-auto text-center\">\n                <h1 className=\"text-4xl md:text-5xl font-bold mb-4\">\n                  {heroTitle}\n                </h1>\n                {heroSubtitle && (\n                  <p className=\"text-xl opacity-90 mb-4\">\n                    {heroSubtitle}\n                  </p>\n                )}\n                {heroDescription && (\n                  <p className=\"text-lg opacity-80 mb-6\">\n                    {heroDescription}\n                  </p>\n                )}\n                <a\n                  href={heroButtonLink}\n                  className=\"inline-block px-6 py-3 bg-white rounded-lg font-semibold hover:bg-gray-100 transition-colors\"\n                  style={{ color: primaryColor }}\n                >\n                  {heroButtonText}\n                </a>\n              </div>\n            </div>\n          </section>\n        )}\n\n        {/* Informations de l'organisme */}\n        {organization && (\n          <section className=\"bg-white border-b py-8\">\n            <div className=\"container mx-auto px-4\">\n              <div className=\"flex flex-col md:flex-row items-center justify-between gap-6\">\n                <div className=\"flex items-center gap-4\">\n                  {logoUrl && (\n                    <img\n                      src={logoUrl}\n                      alt={organization.name}\n                      className=\"h-16 w-auto object-contain\"\n                    />\n                  )}\n                  <div>\n                    <h2 className=\"text-2xl font-bold text-gray-900\">{organization.name}</h2>\n                    {organization.address && (\n                      <p className=\"text-gray-600\">{organization.address}</p>\n                    )}\n                  </div>\n                </div>\n                <div className=\"flex items-center gap-4\">\n                  {/* Lien vers l'attestation Qualiopi */}\n                  {organization.qualiopi_certificate_url && (\n                    <a\n                      href={organization.qualiopi_certificate_url}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\n                    >\n                      <span>Attestation Qualiopi</span>\n                      <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14\" />\n                      </svg>\n                    </a>\n                  )}\n                </div>\n              </div>\n            </div>\n          </section>\n        )}\n\n        {/* Liste des programmes */}\n        <section className=\"py-12\">\n          <div className=\"container mx-auto px-4\">\n            <div className=\"flex justify-between items-center mb-6\">\n              <h2 className=\"text-2xl font-bold text-gray-900\">\n                {search ? `Résultats pour \"${search}\"` : 'Nos programmes de formation'}\n              </h2>\n              <div className=\"text-gray-600\">\n                {programsWithActiveContent.length} programme{programsWithActiveContent.length > 1 ? 's' : ''}\n              </div>\n            </div>\n\n            {programsWithActiveContent.length > 0 ? (\n              <PublicProgramsList programs={programsWithActiveContent} />\n            ) : (\n              <div className=\"text-center py-12\">\n                <p className=\"text-gray-600 text-lg\">\n                  Aucun programme disponible pour le moment.\n                </p>\n              </div>\n            )}\n          </div>\n        </section>\n      </div>\n      <Footer />\n    </>\n  )\n}\n\n"],"names":[],"mappings":"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","ignoreList":[0,1,2,3]}