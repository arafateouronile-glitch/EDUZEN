module.exports=[433336,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(433217),e=a.i(913216),f=a.i(542502),g=a.i(269240),h=a.i(340695),i=a.i(219897),j=a.i(806368),k=a.i(915618),l=a.i(587532),m=a.i(284505),n=a.i(992258),o=a.i(963519),p=a.i(660246),q=a.i(46864),r=a.i(592319),s=a.i(172162),t=a.i(922520),u=a.i(179257),v=a.i(533441),w=a.i(624722),x=a.i(104720),y=a.i(773320),z=a.i(238246),A=a.i(497895),B=a.i(211989),C=a.i(613749),D=a.i(50522);function E({currentPage:a,totalPages:c,onPageChange:d,itemsPerPage:e,totalItems:f,onItemsPerPageChange:g,itemsPerPageOptions:i=[10,20,50,100]}){let j=0===f?0:(a-1)*e+1,k=Math.min(a*e,f);return(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 px-4 py-3 border-t",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsxs)("span",{children:["Affichage de ",j," à ",k," sur ",f," résultat",f>1?"s":""]}),g&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"mx-2",children:"•"}),(0,b.jsx)("select",{value:e,onChange:a=>g(Number(a.target.value)),className:"px-2 py-1 text-sm border rounded focus:ring-2 focus:ring-primary focus:border-transparent",children:i.map(a=>(0,b.jsxs)("option",{value:a,children:[a," par page"]},a))})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(h.Button,{variant:"outline",size:"sm",onClick:()=>d(a-1),disabled:1===a,"aria-label":"Page précédente",children:(0,b.jsx)(C.ChevronLeft,{className:"h-4 w-4"})}),(0,b.jsx)("div",{className:"flex items-center gap-1",children:(()=>{let b=[];if(c<=5)for(let a=1;a<=c;a++)b.push(a);else if(a<=3){for(let a=1;a<=4;a++)b.push(a);b.push("..."),b.push(c)}else if(a>=c-2){b.push(1),b.push("...");for(let a=c-3;a<=c;a++)b.push(a)}else{b.push(1),b.push("...");for(let c=a-1;c<=a+1;c++)b.push(c);b.push("..."),b.push(c)}return b})().map((c,e)=>"..."===c?(0,b.jsx)("span",{className:"px-2 text-muted-foreground",children:"..."},`ellipsis-${e}`):(0,b.jsx)(h.Button,{variant:a===c?"default":"outline",size:"sm",onClick:()=>d(c),className:(0,A.cn)(a===c&&"bg-primary text-primary-foreground"),"aria-label":`Page ${c}`,"aria-current":a===c?"page":void 0,children:c},c))}),(0,b.jsx)(h.Button,{variant:"outline",size:"sm",onClick:()=>d(a+1),disabled:a===c||0===c,"aria-label":"Page suivante",children:(0,b.jsx)(D.ChevronRight,{className:"h-4 w-4"})})]})]})}var F=a.i(864037);a.i(460355);var G=a.i(346271),H=a.i(262036),I=a.i(807706),J=a.i(576030),K=a.i(491829),L=a.i(950463),M=a.i(676504),N=a.i(370025),O=a.i(937927),P=a.i(965733),Q=a.i(290821),R=a.i(111269),S=a.i(526017),T=a.i(970802);let U={Prénom:"first_name",prénom:"first_name",Prenom:"first_name",Nom:"last_name",nom:"last_name",Email:"email",email:"email",Téléphone:"phone",téléphone:"phone",Telephone:"phone","Date de naissance":"date_of_birth","date de naissance":"date_of_birth","Date de naissance (JJ/MM/AAAA)":"date_of_birth",Genre:"gender",genre:"gender",Sexe:"gender",Adresse:"address",adresse:"address",Ville:"city",ville:"city","Code postal":"postal_code","code postal":"postal_code","Code Postal":"postal_code",CP:"postal_code",cp:"postal_code"};async function V(a){let b=await a.arrayBuffer(),c=new T.default.Workbook;await c.xlsx.load(b);let d=c.worksheets[0];if(!d)throw Error("Le fichier Excel ne contient aucune feuille");let e=[],f=d.getRow(1),g=[];return f.eachCell((a,b)=>{let c=a.value?.toString()?.trim()||"",d=U[c]||c.toLowerCase().replace(/\s+/g,"_");g[b-1]=d}),d.eachRow((a,b)=>{if(1===b)return;let c={};a.eachCell((a,b)=>{let d=g[b-1];if(d){let b=a.value?.toString()?.trim()||"";if("date_of_birth"===d&&b){let a=Y(b);a&&(b=a)}"gender"===d&&b&&(b=Z(b)),c[d]=b}}),Object.keys(c).length>0&&(c.first_name||c.last_name)&&e.push(c)}),e}async function W(a){let b=(await a.text()).split("\n").filter(a=>a.trim());if(b.length<2)throw Error("Le fichier CSV doit contenir au moins un en-tête et une ligne de données");let c=X(b[0]).map(a=>{let b=a.trim();return U[b]||b.toLowerCase().replace(/\s+/g,"_")}),d=[];for(let a=1;a<b.length;a++){let e=X(b[a]),f={};c.forEach((a,b)=>{if(a){let c=(e[b]||"").trim();if("date_of_birth"===a&&c){let a=Y(c);a&&(c=a)}"gender"===a&&c&&(c=Z(c)),f[a]=c}}),Object.keys(f).length>0&&(f.first_name||f.last_name)&&d.push(f)}return d}function X(a){let b=[],c="",d=!1;for(let e=0;e<a.length;e++){let f=a[e];'"'===f?d=!d:","!==f||d?c+=f:(b.push(c),c="")}return b.push(c),b.map(a=>a.replace(/^"|"$/g,"").trim())}function Y(a){if(!a)return null;let b=[/^(\d{2})\/(\d{2})\/(\d{4})$/,/^(\d{4})-(\d{2})-(\d{2})$/,/^(\d{2})-(\d{2})-(\d{4})$/];for(let c of b){let d=a.match(c);if(d)if(c!==b[0]&&c!==b[2])return a;else{let[,a,b,c]=d;return`${c}-${b}-${a}`}}let c=new Date(a);return isNaN(c.getTime())?null:c.toISOString().split("T")[0]}function Z(a){let b=a.toLowerCase().trim();return"m"===b||"masculin"===b||"homme"===b||"h"===b?"male":"f"===b||"féminin"===b||"femme"===b||"fem"===b?"female":"other"}function $(a,b){let c=[];return a.first_name&&""!==a.first_name.trim()||c.push("Le prénom est requis"),a.last_name&&""!==a.last_name.trim()||c.push("Le nom est requis"),a.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)&&c.push("L'email est invalide"),{valid:0===c.length,errors:c}}function _({open:a,onOpenChange:d}){let{user:g}=(0,e.useAuth)(),{addToast:i}=(0,F.useToast)(),j=(0,O.useQueryClient)(),k=(0,c.useRef)(null),[l,n]=(0,c.useState)(null),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)(!1),s=(0,N.useMutation)({mutationFn:async a=>{if(!g?.organization_id)throw Error("Organisation non trouvée");let b=a.map(a=>({...a,organization_id:g.organization_id,status:"active"}));return await f.studentService.import(g.organization_id,b)},onSuccess:(a,b)=>{j.invalidateQueries({queryKey:["students"]}),j.invalidateQueries({queryKey:["students-stats"]}),i({type:"success",title:"Import réussi",description:`${a.length} \xe9tudiant(s) import\xe9(s) avec succ\xe8s.`}),n(null),p(null),k.current&&(k.current.value=""),d(!1)},onError:a=>{i({type:"error",title:"Erreur d'import",description:a.message||"Une erreur est survenue lors de l'import."})}}),t=async a=>{let b=a.target.files?.[0];if(!b)return;let c=b.name.endsWith(".xlsx")||b.name.endsWith(".xls"),d=b.name.endsWith(".csv");if(!c&&!d)return void i({type:"error",title:"Format non supporté",description:"Veuillez sélectionner un fichier Excel (.xlsx, .xls) ou CSV (.csv)"});n(b),p(null),r(!0);try{let a=[];a=c?await V(b):await W(b);let d=[],e=[];a.forEach((a,b)=>{let c=$(a,b+2);c.valid?d.push(a):e.push({row:b+2,message:c.errors.join(", "),data:a})}),p({success:d.length,errors:e,total:a.length})}catch(a){i({type:"error",title:"Erreur de parsing",description:a instanceof Error?a.message:"Impossible de parser le fichier"}),n(null)}finally{r(!1)}};return(0,b.jsx)(P.Dialog,{open:a,onOpenChange:d,children:(0,b.jsxs)(P.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(P.DialogHeader,{children:[(0,b.jsxs)(P.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(y.Upload,{className:"h-5 w-5 text-brand-blue"}),"Importer des étudiants"]}),(0,b.jsx)(P.DialogDescription,{children:"Importez une liste d'étudiants depuis un fichier Excel (.xlsx) ou CSV (.csv)"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 bg-brand-blue-ghost/20 rounded-lg border border-brand-blue/20",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold text-sm text-gray-900",children:"Besoin d'un template ?"}),(0,b.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"Téléchargez un fichier Excel avec les colonnes pré-remplies"})]}),(0,b.jsxs)(h.Button,{variant:"outline",size:"sm",onClick:()=>{let a=new T.default.Workbook,b=a.addWorksheet("Étudiants");b.addRow(["Prénom","Nom","Email","Téléphone","Date de naissance (JJ/MM/AAAA)","Genre (M/F/Autre)","Adresse","Code postal","Ville"]);let c=b.getRow(1);c.font={bold:!0,color:{argb:"FFFFFFFF"}},c.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF4F46E5"}},b.columns.forEach((a,b)=>{a.width=20}),b.addRow(["Jean","Dupont","jean.dupont@example.com","+33 6 12 34 56 78","15/05/2000","M","123 Rue de la République","75001","Paris"]),a.xlsx.writeBuffer().then(a=>{let b=new Blob([a],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),c=URL.createObjectURL(b),d=document.createElement("a");d.href=c,d.download="template_import_etudiants.xlsx",d.click(),URL.revokeObjectURL(c)})},className:"gap-2",children:[(0,b.jsx)(m.Download,{className:"h-4 w-4"}),"Télécharger le template"]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-semibold text-gray-900",children:"Fichier à importer"}),(0,b.jsxs)("div",{className:(0,A.cn)("border-2 border-dashed rounded-lg p-8 text-center transition-all",l?"border-brand-blue bg-brand-blue-ghost/20":"border-gray-300 hover:border-brand-blue/50 hover:bg-gray-50"),children:[(0,b.jsx)("input",{ref:k,type:"file",accept:".xlsx,.xls,.csv",onChange:t,className:"hidden",id:"student-import-file"}),(0,b.jsx)("label",{htmlFor:"student-import-file",className:"cursor-pointer flex flex-col items-center gap-3",children:q?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(S.Loader2,{className:"h-8 w-8 text-brand-blue animate-spin"}),(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Analyse du fichier..."})]}):l?(0,b.jsxs)(b.Fragment,{children:[l.name.endsWith(".csv")?(0,b.jsx)(x.FileText,{className:"h-8 w-8 text-brand-blue"}):(0,b.jsx)(w.FileSpreadsheet,{className:"h-8 w-8 text-brand-blue"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold text-sm text-gray-900",children:l.name}),(0,b.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:[(l.size/1024).toFixed(2)," KB"]})]}),(0,b.jsx)(h.Button,{variant:"ghost",size:"sm",onClick:a=>{a.stopPropagation(),n(null),p(null),k.current&&(k.current.value="")},children:"Changer de fichier"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(y.Upload,{className:"h-8 w-8 text-gray-400"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold text-sm text-gray-900",children:"Cliquez pour sélectionner un fichier"}),(0,b.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"Formats supportés: .xlsx, .xls, .csv"})]})]})})]})]}),o&&(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg",children:[(0,b.jsx)(R.CheckCircle2,{className:"h-5 w-5 text-green-600"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("p",{className:"text-sm font-semibold text-gray-900",children:[o.success," étudiant(s) valide(s) sur ",o.total]}),o.errors.length>0&&(0,b.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:[o.errors.length," erreur(s) détectée(s)"]})]})]}),o.errors.length>0&&(0,b.jsxs)("div",{className:"max-h-48 overflow-y-auto space-y-2",children:[(0,b.jsxs)("p",{className:"text-xs font-semibold text-red-600 flex items-center gap-1",children:[(0,b.jsx)(Q.AlertCircle,{className:"h-4 w-4"}),"Erreurs de validation"]}),o.errors.map((a,c)=>(0,b.jsxs)("div",{className:"p-2 bg-red-50 border border-red-200 rounded text-xs",children:[(0,b.jsxs)("p",{className:"font-semibold text-red-900",children:["Ligne ",a.row]}),(0,b.jsx)("p",{className:"text-red-700 mt-1",children:a.message})]},c))]})]}),(0,b.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-gray-900 mb-2",children:"Colonnes attendues :"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:["Prénom","Nom","Email","Téléphone","Date de naissance","Genre","Adresse","Code postal","Ville"].map(a=>(0,b.jsx)("span",{className:"px-2 py-1 bg-white border border-gray-200 rounded text-xs text-gray-700",children:a},a))})]})]}),(0,b.jsxs)(P.DialogFooter,{children:[(0,b.jsx)(h.Button,{variant:"outline",onClick:()=>d(!1),children:"Annuler"}),(0,b.jsx)(h.Button,{onClick:()=>{if(!o||0===o.success)return void i({type:"warning",title:"Aucune donnée valide",description:"Aucun étudiant valide à importer."});if(!l)return;let a=l.name.endsWith(".xlsx")||l.name.endsWith(".xls");r(!0),Promise.resolve().then(async()=>{let b=a?await V(l):await W(l),c=[];return b.forEach(a=>{$(a,0).valid&&c.push(a)}),c}).then(a=>{s.mutate(a)}).catch(a=>{i({type:"error",title:"Erreur",description:a.message||"Une erreur est survenue"})}).finally(()=>{r(!1)})},disabled:!o||0===o.success||s.isPending||q,className:"bg-gradient-to-r from-brand-blue to-brand-cyan",children:s.isPending||q?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(S.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Import en cours..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(y.Upload,{className:"mr-2 h-4 w-4"}),"Importer ",o?.success||0," étudiant(s)"]})})]})]})})}function aa(){return(0,b.jsx)(K.RoleGuard,{allowedRoles:K.ADMIN_ROLES,children:(0,b.jsx)(ab,{})})}function ab(){let{user:a}=(0,e.useAuth)(),C=(0,g.createClient)(),{addToast:D}=(0,F.useToast)(),K=(0,J.useVocabulary)(),[N,O]=(0,c.useState)(""),[P,Q]=(0,c.useState)("all"),[R,S]=(0,c.useState)("all"),[T,U]=(0,c.useState)(!1),[V,W]=(0,c.useState)(1),[X,Y]=(0,c.useState)(12),[Z,$]=(0,c.useState)({}),[aa,ab]=(0,c.useState)(!1),{data:ac}=(0,d.useQuery)({queryKey:["sessions-for-filter",a?.organization_id],queryFn:async()=>{if(!a?.organization_id)return[];let{data:b,error:c}=await C.from("sessions").select("id, name, start_date, formations!inner(id, name, organization_id, programs(id, name))").eq("formations.organization_id",a.organization_id).order("start_date",{ascending:!1});if(c)throw c;return b||[]},enabled:!!a?.organization_id}),{data:ad,isLoading:ae}=(0,d.useQuery)({queryKey:["students",a?.organization_id,N,P,R,V],queryFn:async()=>a?.organization_id?await f.studentService.getAll(a.organization_id,{search:N,status:"all"!==P?P:void 0,classId:"all"!==R?R:void 0,page:V,limit:X}):{data:[],total:0,page:1,limit:X,totalPages:0},enabled:!!a?.organization_id}),af=ad?.data||[],ag=ad?.total||0,ah=ad?.totalPages||0;(0,c.useEffect)(()=>{W(1)},[N,P,R]);let{data:ai}=(0,d.useQuery)({queryKey:["students-stats",a?.organization_id],queryFn:async()=>{if(!a?.organization_id)return null;let[b,c,d]=await Promise.all([f.studentService.getAll(a.organization_id,{limit:1}),f.studentService.getAll(a.organization_id,{status:"active",limit:1}),f.studentService.getAll(a.organization_id,{status:"inactive",limit:1})]);return{total:b.total||0,active:c.total||0,inactive:d.total||0}},enabled:!!a?.organization_id}),[aj,ak]=(0,c.useState)("xlsx"),al=async(b="xlsx")=>{if(!af||0===af.length)return void D({type:"warning",title:`Aucun ${K.student.toLowerCase()}`,description:`Aucun ${K.student.toLowerCase()} \xe0 exporter.`});try{let c=(0,B.prepareStudentsExport)(af);await (0,B.exportData)(c,{filename:`eleves_${new Date().toISOString().split("T")[0]}`,sheetName:K.students,format:b,entityType:"students",organizationId:a?.organization_id||void 0,userId:a?.id}),D({type:"success",title:"Export réussi",description:`${af.length} ${K.student.toLowerCase()}(s) export\xe9(s) en ${b.toUpperCase()} avec succ\xe8s.`})}catch(a){D({type:"error",title:"Erreur d'export",description:a instanceof Error?a.message:"Une erreur est survenue lors de l'export."})}},am={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:[.16,1,.3,1]}}};return(0,b.jsxs)(G.motion.div,{className:"space-y-8 pb-8 max-w-[1600px] mx-auto",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"visible",children:[(0,b.jsxs)(G.motion.div,{variants:am,className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"inline-flex items-center gap-3 mb-2",children:[(0,b.jsx)("div",{className:"p-2.5 bg-gradient-to-br from-brand-blue to-brand-cyan rounded-xl shadow-lg",children:(0,b.jsx)(p.Users,{className:"h-7 w-7 text-white"})}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("h1",{className:"text-3xl lg:text-4xl font-bold bg-gradient-to-r from-brand-blue to-brand-cyan bg-clip-text text-transparent",children:K.students}),(0,b.jsxs)("span",{className:"px-3 py-1 bg-gradient-to-r from-brand-blue-ghost to-brand-cyan-ghost text-brand-blue rounded-full text-sm font-medium border border-brand-blue/20",children:[ag," total"]})]})]}),(0,b.jsxs)("p",{className:"text-gray-600 text-sm lg:text-base ml-1",children:["Gérez tous vos ",K.students.toLowerCase()," et leurs informations"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)(M.DropdownMenu,{children:[(0,b.jsx)(M.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(h.Button,{variant:"outline",className:"hover:bg-brand-blue-ghost hover:border-brand-blue/30 hover:text-brand-blue transition-all",children:[(0,b.jsx)(m.Download,{className:"mr-2 h-4 w-4"}),"Exporter"]})}),(0,b.jsxs)(M.DropdownMenuContent,{align:"end",className:"w-48",children:[(0,b.jsxs)(M.DropdownMenuItem,{onClick:()=>al("xlsx"),className:"cursor-pointer",children:[(0,b.jsx)(w.FileSpreadsheet,{className:"mr-2 h-4 w-4 text-emerald-600"}),(0,b.jsx)("span",{children:"Excel (.xlsx)"})]}),(0,b.jsxs)(M.DropdownMenuItem,{onClick:()=>al("csv"),className:"cursor-pointer",children:[(0,b.jsx)(x.FileText,{className:"mr-2 h-4 w-4 text-brand-blue"}),(0,b.jsx)("span",{children:"CSV (.csv)"})]})]})]}),(0,b.jsxs)(h.Button,{variant:"outline",onClick:()=>ab(!0),className:"hover:bg-brand-cyan-ghost hover:border-brand-cyan/30 hover:text-brand-cyan transition-all",children:[(0,b.jsx)(y.Upload,{className:"mr-2 h-4 w-4"}),"Importer"]}),(0,b.jsx)(z.default,{href:"/dashboard/students/new",children:(0,b.jsxs)(h.Button,{className:"bg-gradient-to-r from-brand-blue to-brand-cyan hover:from-brand-blue-dark hover:to-brand-cyan shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105",children:[(0,b.jsx)(k.Plus,{className:"mr-2 h-4 w-4"}),"Nouveau ",K.student]})})]})]}),ai&&(0,b.jsx)(j.BentoGrid,{columns:3,gap:"md",children:[{title:"Total",value:ai.total,icon:p.Users,color:"text-brand-blue",bg:"bg-gradient-to-br from-brand-blue-ghost to-brand-blue-ghost/50",borderColor:"border-brand-blue/20",desc:`Tous les ${K.students.toLowerCase()}`},{title:"Actifs",value:ai.active,icon:q.UserCheck,color:"text-brand-cyan",bg:"bg-gradient-to-br from-brand-cyan-ghost to-brand-cyan-ghost/50",borderColor:"border-brand-cyan/20",desc:"En cours de formation"},{title:"Inactifs",value:ai.inactive,icon:r.UserX,color:"text-gray-500",bg:"bg-gradient-to-br from-gray-50 to-gray-100",borderColor:"border-gray-200",desc:"Archives ou suspendus"}].map((a,c)=>(0,b.jsx)(j.BentoCard,{span:1,children:(0,b.jsxs)(i.GlassCard,{variant:"premium",hoverable:!0,className:(0,A.cn)("h-full p-6 border-2 transition-all duration-300",a.borderColor),children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:a.title}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:a.desc})]}),(0,b.jsx)(G.motion.div,{className:(0,A.cn)("p-3 rounded-xl transition-all duration-300 border",a.bg,a.borderColor),whileHover:{scale:1.1,rotate:5},children:(0,b.jsx)(a.icon,{className:(0,A.cn)("h-5 w-5",a.color)})})]}),(0,b.jsx)("div",{className:(0,A.cn)("text-3xl font-bold tracking-tight",0===c?"text-brand-blue":1===c?"text-brand-cyan":"text-gray-600"),children:a.value})]})},a.title))}),(0,b.jsx)(G.motion.div,{variants:am,children:(0,b.jsxs)(i.GlassCard,{variant:"default",className:"p-2 border-2 border-brand-blue/20 bg-gradient-to-br from-brand-blue-ghost/20 to-brand-cyan-ghost/20",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-2",children:[(0,b.jsxs)("div",{className:"relative flex-1 group",children:[(0,b.jsx)(l.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-brand-blue group-focus-within:text-brand-cyan transition-colors"}),(0,b.jsx)("input",{type:"text",placeholder:`Rechercher un ${K.student.toLowerCase()}...`,value:N,onChange:a=>O(a.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-lg bg-white border-2 border-brand-blue/20 focus:border-brand-blue focus:ring-4 focus:ring-brand-blue/10 transition-all outline-none text-sm"})]}),(0,b.jsxs)(h.Button,{variant:"ghost",onClick:()=>U(!T),className:(0,A.cn)("gap-2 transition-all",T?"bg-gradient-to-r from-brand-blue-ghost to-brand-cyan-ghost text-brand-blue border-2 border-brand-blue/30":"text-gray-600 hover:bg-brand-blue-ghost hover:text-brand-blue"),children:[(0,b.jsx)(s.SlidersHorizontal,{className:"h-4 w-4"}),"Filtres",("all"!==P||"all"!==R)&&(0,b.jsx)("span",{className:"w-5 h-5 bg-gradient-to-r from-brand-blue to-brand-cyan text-white text-[10px] font-bold flex items-center justify-center rounded-full ml-1",children:"!"})]})]}),(0,b.jsx)(H.AnimatePresence,{children:T&&(0,b.jsx)(G.motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:(0,b.jsxs)("div",{className:"p-4 grid grid-cols-1 md:grid-cols-2 gap-4 border-t border-brand-blue/20 mt-2",children:[(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)("label",{className:"text-xs font-semibold text-brand-blue uppercase tracking-wider",children:"Statut"}),(0,b.jsxs)("select",{value:P,onChange:a=>Q(a.target.value),className:"w-full px-3 py-2 rounded-lg bg-white border-2 border-brand-blue/20 focus:border-brand-blue focus:ring-4 focus:ring-brand-blue/10 outline-none text-sm transition-all",children:[(0,b.jsx)("option",{value:"all",children:"Tous les statuts"}),(0,b.jsx)("option",{value:"active",children:"Actif"}),(0,b.jsx)("option",{value:"inactive",children:"Inactif"})]})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)("label",{className:"text-xs font-semibold text-brand-cyan uppercase tracking-wider",children:"Session"}),(0,b.jsxs)("select",{value:R,onChange:a=>S(a.target.value),className:"w-full px-3 py-2 rounded-lg bg-white border-2 border-brand-cyan/20 focus:border-brand-cyan focus:ring-4 focus:ring-brand-cyan/10 outline-none text-sm transition-all",children:[(0,b.jsx)("option",{value:"all",children:"Toutes les sessions"}),ac?.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})]})]})})})]})}),(0,b.jsx)(G.motion.div,{variants:am,children:ae?(0,b.jsx)(L.SkeletonBentoGrid,{items:8}):0===af.length?(0,b.jsxs)(i.GlassCard,{variant:"default",className:"p-12 text-center border-2 border-brand-blue/20 bg-gradient-to-br from-brand-blue-ghost/30 to-brand-cyan-ghost/30",children:[(0,b.jsxs)("div",{className:"relative inline-block mb-6",children:[(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,b.jsx)("div",{className:"w-24 h-24 bg-gradient-to-br from-brand-blue-ghost to-brand-cyan-ghost rounded-full opacity-50 blur-2xl"})}),(0,b.jsx)("div",{className:"relative p-6 bg-gradient-to-br from-brand-blue-ghost to-brand-cyan-ghost rounded-2xl inline-block",children:(0,b.jsx)(p.Users,{className:"h-16 w-16 mx-auto text-brand-blue"})})]}),(0,b.jsxs)("div",{className:"space-y-2 mb-6",children:[(0,b.jsxs)("h3",{className:"text-xl font-bold text-gray-900",children:["Aucun ",K.student.toLowerCase()," trouvé"]}),(0,b.jsx)("p",{className:"text-gray-600",children:N||"all"!==P||"all"!==R?"Essayez de modifier vos filtres de recherche.":"Commencez par ajouter votre premier élève."})]}),!N&&"all"===P&&"all"===R&&(0,b.jsx)(z.default,{href:"/dashboard/students/new",children:(0,b.jsxs)(h.Button,{className:"bg-gradient-to-r from-brand-blue to-brand-cyan hover:from-brand-blue-dark hover:to-brand-cyan shadow-md hover:shadow-lg transition-all",children:[(0,b.jsx)(k.Plus,{className:"mr-2 h-4 w-4"}),"Ajouter un élève"]})})]}):(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:(0,b.jsx)(H.AnimatePresence,{mode:"popLayout",children:af.map((a,c)=>(0,b.jsx)(G.motion.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{delay:.05*c},children:(0,b.jsxs)(i.GlassCard,{variant:"default",hoverable:!0,className:"h-full p-5 group flex flex-col justify-between border-2 border-brand-blue/10 hover:border-brand-blue/30 bg-gradient-to-br from-white to-brand-blue-ghost/10 hover:shadow-lg transition-all duration-300",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,b.jsx)(z.default,{href:`/dashboard/students/${a.id}`,children:(0,b.jsxs)(G.motion.div,{whileHover:{scale:1.05},className:"cursor-pointer relative",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-brand-blue/20 to-brand-cyan/20 rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-opacity"}),(0,b.jsx)(I.Avatar,{fallback:`${a.first_name||""} ${a.last_name||""}`,userId:a.id,size:"lg",variant:"auto",className:"shadow-md rounded-2xl ring-2 ring-brand-blue/20 group-hover:ring-brand-blue/40 transition-all relative"})]})}),(0,b.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,b.jsx)(h.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-brand-blue-ghost transition-all",onClick:b=>{b.stopPropagation(),b.preventDefault();let c=`${window.location.origin}/learner/access/${a.id}`;navigator.clipboard.writeText(c).then(()=>{$(b=>({...b,[a.id]:!0})),D({title:"Lien copié",description:`Lien d'acc\xe8s pour ${a.first_name} ${a.last_name} copi\xe9`,type:"success"}),setTimeout(()=>{$(b=>{let c={...b};return delete c[a.id],c})},2e3)}).catch(()=>{D({title:"Erreur",description:"Impossible de copier le lien",type:"error"})})},title:"Copier le lien d'accès",children:Z[a.id]?(0,b.jsx)(v.Check,{className:"h-4 w-4 text-brand-cyan"}):(0,b.jsx)(u.Link,{className:"h-4 w-4 text-gray-400 group-hover:text-brand-blue"})}),(0,b.jsx)("span",{className:(0,A.cn)("px-2.5 py-1 rounded-lg text-xs font-semibold border-2","active"===a.status?"bg-gradient-to-br from-brand-cyan-ghost to-brand-cyan-ghost/50 text-brand-cyan border-brand-cyan/30":"bg-gradient-to-br from-gray-50 to-gray-100 text-gray-600 border-gray-200"),children:"active"===a.status?"Actif":"Inactif"})]})]}),(0,b.jsx)(z.default,{href:`/dashboard/students/${a.id}`,children:(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsxs)("h3",{className:"font-bold text-gray-900 truncate text-lg group-hover:text-brand-blue transition-colors",children:[a.first_name," ",a.last_name]}),(0,b.jsxs)("p",{className:"text-sm text-gray-500 font-mono mt-1",children:["#",a.student_number||"---"]})]})}),(0,b.jsxs)("div",{className:"space-y-2.5 text-sm",children:[a.email&&(0,b.jsxs)("div",{className:"flex items-center gap-2 truncate group/email",children:[(0,b.jsx)("div",{className:"p-1.5 rounded-lg bg-brand-blue-ghost group-hover/email:bg-brand-blue/20 transition-colors",children:(0,b.jsx)(n.Mail,{className:"h-3.5 w-3.5 flex-shrink-0 text-brand-blue"})}),(0,b.jsx)("span",{className:"truncate text-gray-600",children:a.email})]}),a.phone&&(0,b.jsxs)("div",{className:"flex items-center gap-2 truncate group/phone",children:[(0,b.jsx)("div",{className:"p-1.5 rounded-lg bg-brand-cyan-ghost group-hover/phone:bg-brand-cyan/20 transition-colors",children:(0,b.jsx)(o.Phone,{className:"h-3.5 w-3.5 flex-shrink-0 text-brand-cyan"})}),(0,b.jsx)("span",{className:"truncate text-gray-600",children:a.phone})]})]})]}),(0,b.jsx)(z.default,{href:`/dashboard/students/${a.id}`,children:(0,b.jsxs)("div",{className:"mt-5 pt-4 border-t border-gray-100 group-hover:border-brand-blue/20 flex items-center justify-between text-xs font-semibold text-gray-400 group-hover:text-brand-blue transition-all cursor-pointer",children:[(0,b.jsx)("span",{children:"Voir le dossier"}),(0,b.jsx)(t.ArrowUpRight,{className:"h-4 w-4 transform group-hover:translate-x-1 group-hover:-translate-y-1 transition-transform"})]})})]})},a.id))})})}),ah>1&&(0,b.jsx)(G.motion.div,{variants:am,className:"flex justify-center pt-4",children:(0,b.jsx)(i.GlassCard,{variant:"default",className:"px-4 py-2 inline-flex",children:(0,b.jsx)(E,{currentPage:V,totalPages:ah,onPageChange:W,itemsPerPage:X,totalItems:ag})})}),(0,b.jsx)(_,{open:aa,onOpenChange:ab})]})}a.s(["default",()=>aa],433336)}];

//# sourceMappingURL=app_%28dashboard%29_dashboard_students_page_tsx_5fc49050._.js.map