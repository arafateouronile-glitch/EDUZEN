module.exports=[641710,a=>{"use strict";let b=(0,a.i(170106).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);a.s(["Clock",()=>b],641710)},724669,a=>{"use strict";let b=(0,a.i(170106).default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);a.s(["TrendingUp",()=>b],724669)},821374,a=>{"use strict";let b=(0,a.i(170106).default)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);a.s(["Star",()=>b],821374)},989451,a=>{"use strict";var b=a.i(269240);let c=new class{supabase;constructor(a){this.supabase=a||(0,b.createClient)()}async getCategories(a,b=!0){let c=this.supabase.from("documentation_categories").select("*").order("order_index",{ascending:!0});a?c=c.or(`organization_id.eq.${a},is_public.eq.true`):b&&(c=c.eq("is_public",!0));let{data:d,error:e}=await c;if(e)throw e;return d}async getCategoryBySlug(a,b){let c=this.supabase.from("documentation_categories").select("*").eq("slug",a).single();c=b?c.or(`organization_id.eq.${b},is_public.eq.true`):c.eq("is_public",!0);let{data:d,error:e}=await c;if(e)throw e;return d}async createCategory(a){let{data:b,error:c}=await this.supabase.from("documentation_categories").insert(a).select().single();if(c)throw c;return b}async updateCategory(a,b){let{data:c,error:d}=await this.supabase.from("documentation_categories").update(b).eq("id",a).select().single();if(d)throw d;return c}async deleteCategory(a){let{error:b}=await this.supabase.from("documentation_categories").delete().eq("id",a);if(b)throw b}async getArticlesByCategory(a,b="published"){let{data:c,error:d}=await this.supabase.from("documentation_articles").select("*, author:users(id, full_name, email)").eq("category_id",a).eq("status",b).order("order_index",{ascending:!0}).order("published_at",{ascending:!1});if(d)throw d;return c}async getArticleBySlug(a,b){let{data:c,error:d}=await this.supabase.from("documentation_articles").select(`
        *,
        category:documentation_categories(*),
        sections:documentation_sections(*),
        author:users(id, full_name, email)
      `).eq("slug",a).eq("category.slug",b).eq("status","published").single();if(d)throw d;return c&&await this.supabase.rpc("increment_article_view_count",{article_uuid:c.id}),c}async searchArticles(a,b){let c=this.supabase.from("documentation_articles").select("*, category:documentation_categories(*), author:users(id, full_name)").eq("status","published").or(`title.ilike.%${a}%,content.ilike.%${a}%,excerpt.ilike.%${a}%`);c=b?c.or(`organization_id.eq.${b},category.is_public.eq.true`):c.eq("category.is_public",!0);let{data:d,error:e}=await c.order("view_count",{ascending:!1}).limit(50);if(e)throw e;return d}async getPopularArticles(a=10,b){let c=this.supabase.from("documentation_articles").select("*, category:documentation_categories(*), author:users(id, full_name)").eq("status","published").order("view_count",{ascending:!1}).limit(a);c=b?c.or(`organization_id.eq.${b},category.is_public.eq.true`):c.eq("category.is_public",!0);let{data:d,error:e}=await c;if(e)throw e;return d}async getRecentArticles(a=10,b){let c=this.supabase.from("documentation_articles").select("*, category:documentation_categories(*), author:users(id, full_name)").eq("status","published").order("published_at",{ascending:!1}).limit(a);c=b?c.or(`organization_id.eq.${b},category.is_public.eq.true`):c.eq("category.is_public",!0);let{data:d,error:e}=await c;if(e)throw e;return d}async getFeaturedArticles(a=5,b){let c=this.supabase.from("documentation_articles").select("*, category:documentation_categories(*), author:users(id, full_name)").eq("status","published").eq("is_featured",!0).order("published_at",{ascending:!1}).limit(a);c=b?c.or(`organization_id.eq.${b},category.is_public.eq.true`):c.eq("category.is_public",!0);let{data:d,error:e}=await c;if(e)throw e;return d}async createArticle(a){let{data:b,error:c}=await this.supabase.from("documentation_articles").insert(a).select().single();if(c)throw c;return b}async updateArticle(a,b){let{data:c,error:d}=await this.supabase.from("documentation_articles").update(b).eq("id",a).select().single();if(d)throw d;return c}async deleteArticle(a){let{error:b}=await this.supabase.from("documentation_articles").delete().eq("id",a);if(b)throw b}async getArticleSections(a){let{data:b,error:c}=await this.supabase.from("documentation_sections").select("*").eq("article_id",a).order("order_index",{ascending:!0});if(c)throw c;return b}async createSection(a){let{data:b,error:c}=await this.supabase.from("documentation_sections").insert(a).select().single();if(c)throw c;return b}async updateSection(a,b){let{data:c,error:d}=await this.supabase.from("documentation_sections").update(b).eq("id",a).select().single();if(d)throw d;return c}async deleteSection(a){let{error:b}=await this.supabase.from("documentation_sections").delete().eq("id",a);if(b)throw b}async getUserFavorites(a){let{data:b,error:c}=await this.supabase.from("documentation_favorites").select("*, article:documentation_articles(*, category:documentation_categories(*))").eq("user_id",a).order("created_at",{ascending:!1});if(c)throw c;return b}async addFavorite(a,b){let{data:c,error:d}=await this.supabase.from("documentation_favorites").insert({user_id:a,article_id:b}).select().single();if(d)throw d;return c}async removeFavorite(a,b){let{error:c}=await this.supabase.from("documentation_favorites").delete().eq("user_id",a).eq("article_id",b);if(c)throw c}async isFavorite(a,b){let{data:c,error:d}=await this.supabase.from("documentation_favorites").select("id").eq("user_id",a).eq("article_id",b).maybeSingle();if(d)throw d;return!!c}async getUserNotes(a,b){let{data:c,error:d}=await this.supabase.from("documentation_notes").select("*").eq("user_id",a).eq("article_id",b).order("created_at",{ascending:!1}).maybeSingle();if(d)throw d;return c}async upsertNote(a,b,c){let d=await this.getUserNotes(a,b);if(d){let{data:a,error:b}=await this.supabase.from("documentation_notes").update({content:c}).eq("id",d.id).select().single();if(b)throw b;return a}{let{data:d,error:e}=await this.supabase.from("documentation_notes").insert({user_id:a,article_id:b,content:c}).select().single();if(e)throw e;return d}}async deleteNote(a,b){let{error:c}=await this.supabase.from("documentation_notes").delete().eq("user_id",a).eq("article_id",b);if(c)throw c}async createFeedback(a){let{data:b,error:c}=await this.supabase.from("documentation_feedback").insert(a).select().single();if(c)throw c;return b}async getArticleFeedback(a){let{data:b,error:c}=await this.supabase.from("documentation_feedback").select("*, user:users(id, full_name)").eq("article_id",a).order("created_at",{ascending:!1});if(c)throw c;return b}async getArticleFeedbackStats(a){let{data:b,error:c}=await this.supabase.from("documentation_feedback").select("rating, is_helpful").eq("article_id",a);if(c)throw c;let d={total:b.length,averageRating:0,helpfulCount:0,notHelpfulCount:0,ratings:{1:0,2:0,3:0,4:0,5:0}};if(b.length>0){let a=b.filter(a=>a.rating).map(a=>a.rating);a.length>0&&(d.averageRating=a.reduce((a,b)=>a+b,0)/a.length),b.forEach(a=>{a.rating&&d.ratings[a.rating]++,!0===a.is_helpful&&d.helpfulCount++,!1===a.is_helpful&&d.notHelpfulCount++})}return d}async recordSearch(a,b,c){let{error:d}=await this.supabase.from("documentation_search_history").insert({user_id:a,query:b,results_count:c});if(d)throw d}async getSearchHistory(a,b=10){let{data:c,error:d}=await this.supabase.from("documentation_search_history").select("*").eq("user_id",a).order("created_at",{ascending:!1}).limit(b);if(d)throw d;return c}async clearSearchHistory(a){let{error:b}=await this.supabase.from("documentation_search_history").delete().eq("user_id",a);if(b)throw b}};a.s(["documentationService",0,c])},26061,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(433217),e=a.i(913216),f=a.i(989451),g=a.i(703130),h=a.i(340695),i=a.i(205522),j=a.i(587532),k=a.i(953722),l=a.i(821374),m=a.i(724669),n=a.i(641710),o=a.i(539833),p=a.i(104720),q=a.i(321161),r=a.i(238246),s=a.i(50944);function t(){let{user:a}=(0,e.useAuth)(),t=(0,s.useRouter)(),[u,v]=(0,c.useState)(""),{data:w}=(0,d.useQuery)({queryKey:["documentation-categories",a?.organization_id],queryFn:()=>f.documentationService.getCategories(a?.organization_id||""),enabled:!!a?.organization_id}),{data:x}=(0,d.useQuery)({queryKey:["documentation-popular",a?.organization_id],queryFn:()=>f.documentationService.getPopularArticles(10,a?.organization_id||""),enabled:!!a?.organization_id}),{data:y}=(0,d.useQuery)({queryKey:["documentation-recent",a?.organization_id],queryFn:()=>f.documentationService.getRecentArticles(10,a?.organization_id||""),enabled:!!a?.organization_id}),{data:z}=(0,d.useQuery)({queryKey:["documentation-featured",a?.organization_id],queryFn:()=>f.documentationService.getFeaturedArticles(5,a?.organization_id||""),enabled:!!a?.organization_id});return(0,b.jsxs)("div",{className:"container mx-auto py-8 px-4 max-w-7xl",children:[(0,b.jsx)("div",{className:"mb-8",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Documentation"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Trouvez des réponses à vos questions et apprenez à utiliser toutes les fonctionnalités"})]}),a?.role==="admin"||a?.role==="super_admin"?(0,b.jsx)(r.default,{href:"/dashboard/documentation/admin",children:(0,b.jsxs)(h.Button,{variant:"outline",children:[(0,b.jsx)(q.Settings,{className:"h-4 w-4 mr-2"}),"Administration"]})}):null]})}),(0,b.jsx)(g.Card,{className:"mb-8",children:(0,b.jsx)(g.CardContent,{className:"pt-6",children:(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault(),u.trim()&&t.push(`/dashboard/documentation/search?q=${encodeURIComponent(u)}`)},className:"flex gap-2",children:[(0,b.jsxs)("div",{className:"flex-1 relative",children:[(0,b.jsx)(j.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),(0,b.jsx)(i.Input,{type:"text",placeholder:"Rechercher dans la documentation...",value:u,onChange:a=>v(a.target.value),className:"pl-10"})]}),(0,b.jsx)(h.Button,{type:"submit",children:"Rechercher"})]})})}),z&&z.length>0&&(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsxs)("h2",{className:"text-2xl font-semibold mb-4 flex items-center gap-2",children:[(0,b.jsx)(l.Star,{className:"h-6 w-6 text-yellow-500"}),"Articles en vedette"]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:z.map(a=>(0,b.jsx)(g.Card,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:(0,b.jsxs)(r.default,{href:`/dashboard/documentation/${a.category.slug}/${a.slug}`,children:[(0,b.jsxs)(g.CardHeader,{children:[(0,b.jsx)(g.CardTitle,{className:"text-lg",children:a.title}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.excerpt})]}),(0,b.jsx)(g.CardContent,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[(0,b.jsx)("span",{children:a.category.name}),(0,b.jsxs)("span",{children:[a.view_count," vues"]})]})})]})},a.id))})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,b.jsxs)("div",{className:"lg:col-span-2",children:[(0,b.jsxs)("h2",{className:"text-2xl font-semibold mb-4 flex items-center gap-2",children:[(0,b.jsx)(k.BookOpen,{className:"h-6 w-6"}),"Catégories"]}),w&&w.length>0?(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:w.map(a=>(0,b.jsx)(g.Card,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:(0,b.jsx)(r.default,{href:`/dashboard/documentation/category/${a.slug}`,children:(0,b.jsxs)(g.CardHeader,{children:[(0,b.jsxs)(g.CardTitle,{className:"flex items-center gap-2",children:[a.icon&&(0,b.jsx)("span",{className:"text-2xl",children:a.icon}),a.name]}),a.description&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.description})]})})},a.id))}):(0,b.jsx)(g.Card,{children:(0,b.jsx)(g.CardContent,{className:"pt-6 text-center text-muted-foreground",children:"Aucune catégorie disponible"})})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[x&&x.length>0&&(0,b.jsxs)(g.Card,{children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsxs)(g.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(m.TrendingUp,{className:"h-5 w-5"}),"Articles populaires"]})}),(0,b.jsx)(g.CardContent,{children:(0,b.jsx)("div",{className:"space-y-3",children:x.slice(0,5).map(a=>(0,b.jsxs)(r.default,{href:`/dashboard/documentation/${a.category.slug}/${a.slug}`,className:"block p-2 rounded hover:bg-gray-50 transition-colors",children:[(0,b.jsx)("p",{className:"font-medium text-sm",children:a.title}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[a.view_count," vues"]})]},a.id))})})]}),y&&y.length>0&&(0,b.jsxs)(g.Card,{children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsxs)(g.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(n.Clock,{className:"h-5 w-5"}),"Articles récents"]})}),(0,b.jsx)(g.CardContent,{children:(0,b.jsx)("div",{className:"space-y-3",children:y.slice(0,5).map(a=>(0,b.jsxs)(r.default,{href:`/dashboard/documentation/${a.category.slug}/${a.slug}`,className:"block p-2 rounded hover:bg-gray-50 transition-colors",children:[(0,b.jsx)("p",{className:"font-medium text-sm",children:a.title}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:a.category.name})]},a.id))})})]}),(0,b.jsxs)(g.Card,{children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsxs)(g.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(o.HelpCircle,{className:"h-5 w-5"}),"Aide rapide"]})}),(0,b.jsx)(g.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(r.default,{href:"/dashboard/documentation/search?q=débuter",className:"flex items-center gap-2 text-sm text-primary hover:underline",children:[(0,b.jsx)(p.FileText,{className:"h-4 w-4"}),"Guide de démarrage"]}),(0,b.jsxs)(r.default,{href:"/dashboard/documentation/search?q=FAQ",className:"flex items-center gap-2 text-sm text-primary hover:underline",children:[(0,b.jsx)(o.HelpCircle,{className:"h-4 w-4"}),"Questions fréquentes"]})]})})]})]})]})]})}a.s(["default",()=>t])}];

//# sourceMappingURL=_634df39a._.js.map