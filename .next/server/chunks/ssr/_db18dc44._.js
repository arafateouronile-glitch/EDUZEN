module.exports=[281688,a=>{"use strict";function b(a,b,c){this.x=a,this.y=b,this.time=c||new Date().getTime()}function c(a,b,c,d){this.startPoint=a,this.control1=b,this.control2=c,this.endPoint=d}function d(a,b){var c,e,f,g,h,i,j,k,l,m=this,n=b||{};(this.velocityFilterWeight=n.velocityFilterWeight||.7,this.minWidth=n.minWidth||.5,this.maxWidth=n.maxWidth||2.5,this.throttle="throttle"in n?n.throttle:16,this.minDistance="minDistance"in n?n.minDistance:5,this.throttle)?this._strokeMoveUpdate=(c=d.prototype._strokeUpdate,e=this.throttle,j=null,k=0,f||(f={}),l=function(){k=!1===f.leading?0:Date.now(),j=null,i=c.apply(g,h),j||(g=h=null)},function(){var a=Date.now();k||!1!==f.leading||(k=a);var b=e-(a-k);return g=this,h=arguments,b<=0||b>e?(j&&(clearTimeout(j),j=null),k=a,i=c.apply(g,h),j||(g=h=null)):j||!1===f.trailing||(j=setTimeout(l,b)),i}):this._strokeMoveUpdate=d.prototype._strokeUpdate,this.dotSize=n.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=n.penColor||"black",this.backgroundColor=n.backgroundColor||"rgba(0,0,0,0)",this.onBegin=n.onBegin,this.onEnd=n.onEnd,this._canvas=a,this._ctx=a.getContext("2d"),this.clear(),this._handleMouseDown=function(a){1===a.which&&(m._mouseButtonDown=!0,m._strokeBegin(a))},this._handleMouseMove=function(a){m._mouseButtonDown&&m._strokeMoveUpdate(a)},this._handleMouseUp=function(a){1===a.which&&m._mouseButtonDown&&(m._mouseButtonDown=!1,m._strokeEnd(a))},this._handleTouchStart=function(a){if(1===a.targetTouches.length){var b=a.changedTouches[0];m._strokeBegin(b)}},this._handleTouchMove=function(a){a.preventDefault();var b=a.targetTouches[0];m._strokeMoveUpdate(b)},this._handleTouchEnd=function(a){a.target===m._canvas&&(a.preventDefault(),m._strokeEnd(a))},this.on()}b.prototype.velocityFrom=function(a){return this.time!==a.time?this.distanceTo(a)/(this.time-a.time):1},b.prototype.distanceTo=function(a){return Math.sqrt(Math.pow(this.x-a.x,2)+Math.pow(this.y-a.y,2))},b.prototype.equals=function(a){return this.x===a.x&&this.y===a.y&&this.time===a.time},c.prototype.length=function(){for(var a=0,b=void 0,c=void 0,d=0;d<=10;d+=1){var e=d/10,f=this._point(e,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),g=this._point(e,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(d>0){var h=f-b,i=g-c;a+=Math.sqrt(h*h+i*i)}b=f,c=g}return a},c.prototype._point=function(a,b,c,d,e){return b*(1-a)*(1-a)*(1-a)+3*c*(1-a)*(1-a)*a+3*d*(1-a)*a*a+e*a*a*a},d.prototype.clear=function(){var a=this._ctx,b=this._canvas;a.fillStyle=this.backgroundColor,a.clearRect(0,0,b.width,b.height),a.fillRect(0,0,b.width,b.height),this._data=[],this._reset(),this._isEmpty=!0},d.prototype.fromDataURL=function(a){var b=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=new Image,e=c.ratio||window.devicePixelRatio||1,f=c.width||this._canvas.width/e,g=c.height||this._canvas.height/e;this._reset(),d.src=a,d.onload=function(){b._ctx.drawImage(d,0,0,f,g)},this._isEmpty=!1},d.prototype.toDataURL=function(a){var b;if("image/svg+xml"===a)return this._toSVG();for(var c=arguments.length,d=Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return(b=this._canvas).toDataURL.apply(b,[a].concat(d))},d.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()},d.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)},d.prototype.isEmpty=function(){return this._isEmpty},d.prototype._strokeBegin=function(a){this._data.push([]),this._reset(),this._strokeUpdate(a),"function"==typeof this.onBegin&&this.onBegin(a)},d.prototype._strokeUpdate=function(a){var b=a.clientX,c=a.clientY,d=this._createPoint(b,c),e=this._data[this._data.length-1],f=e&&e[e.length-1],g=f&&d.distanceTo(f)<this.minDistance;if(!(f&&g)){var h=this._addPoint(d),i=h.curve,j=h.widths;i&&j&&this._drawCurve(i,j.start,j.end),this._data[this._data.length-1].push({x:d.x,y:d.y,time:d.time,color:this.penColor})}},d.prototype._strokeEnd=function(a){var b=this.points.length>2,c=this.points[0];if(!b&&c&&this._drawDot(c),c){var d=this._data[this._data.length-1],e=d[d.length-1];c.equals(e)||d.push({x:c.x,y:c.y,time:c.time,color:this.penColor})}"function"==typeof this.onEnd&&this.onEnd(a)},d.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)},d.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)},d.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor},d.prototype._createPoint=function(a,c,d){var e=this._canvas.getBoundingClientRect();return new b(a-e.left,c-e.top,d||new Date().getTime())},d.prototype._addPoint=function(a){var b=this.points;if(b.push(a),b.length>2){3===b.length&&b.unshift(b[0]);var d=this._calculateCurveControlPoints(b[0],b[1],b[2]).c2,e=this._calculateCurveControlPoints(b[1],b[2],b[3]).c1,f=new c(b[1],d,e,b[2]),g=this._calculateCurveWidths(f);return b.shift(),{curve:f,widths:g}}return{}},d.prototype._calculateCurveControlPoints=function(a,c,d){var e=a.x-c.x,f=a.y-c.y,g=c.x-d.x,h=c.y-d.y,i={x:(a.x+c.x)/2,y:(a.y+c.y)/2},j={x:(c.x+d.x)/2,y:(c.y+d.y)/2},k=Math.sqrt(e*e+f*f),l=Math.sqrt(g*g+h*h),m=i.x-j.x,n=i.y-j.y,o=l/(k+l),p={x:j.x+m*o,y:j.y+n*o},q=c.x-p.x,r=c.y-p.y;return{c1:new b(i.x+q,i.y+r),c2:new b(j.x+q,j.y+r)}},d.prototype._calculateCurveWidths=function(a){var b=a.startPoint,c=a.endPoint,d={start:null,end:null},e=this.velocityFilterWeight*c.velocityFrom(b)+(1-this.velocityFilterWeight)*this._lastVelocity,f=this._strokeWidth(e);return d.start=this._lastWidth,d.end=f,this._lastVelocity=e,this._lastWidth=f,d},d.prototype._strokeWidth=function(a){return Math.max(this.maxWidth/(a+1),this.minWidth)},d.prototype._drawPoint=function(a,b,c){var d=this._ctx;d.moveTo(a,b),d.arc(a,b,c,0,2*Math.PI,!1),this._isEmpty=!1},d.prototype._drawCurve=function(a,b,c){var d=this._ctx,e=c-b,f=Math.floor(a.length());d.beginPath();for(var g=0;g<f;g+=1){var h=g/f,i=h*h,j=i*h,k=1-h,l=k*k,m=l*k,n=m*a.startPoint.x;n+=3*l*h*a.control1.x+3*k*i*a.control2.x+j*a.endPoint.x;var o=m*a.startPoint.y;o+=3*l*h*a.control1.y+3*k*i*a.control2.y+j*a.endPoint.y;var p=b+j*e;this._drawPoint(n,o,p)}d.closePath(),d.fill()},d.prototype._drawDot=function(a){var b=this._ctx,c="function"==typeof this.dotSize?this.dotSize():this.dotSize;b.beginPath(),this._drawPoint(a.x,a.y,c),b.closePath(),b.fill()},d.prototype._fromData=function(a,c,d){for(var e=0;e<a.length;e+=1){var f=a[e];if(f.length>1)for(var g=0;g<f.length;g+=1){var h=f[g],i=new b(h.x,h.y,h.time),j=h.color;if(0===g)this.penColor=j,this._reset(),this._addPoint(i);else if(g!==f.length-1){var k=this._addPoint(i),l=k.curve,m=k.widths;l&&m&&c(l,m,j)}}else this._reset(),d(f[0])}},d.prototype._toSVG=function(){var a=this,b=this._data,c=this._canvas,d=Math.max(window.devicePixelRatio||1,1),e=c.width/d,f=c.height/d,g=document.createElementNS("http://www.w3.org/2000/svg","svg");g.setAttributeNS(null,"width",c.width),g.setAttributeNS(null,"height",c.height),this._fromData(b,function(a,b,c){var d=document.createElement("path");if(!isNaN(a.control1.x)&&!isNaN(a.control1.y)&&!isNaN(a.control2.x)&&!isNaN(a.control2.y)){var e="M "+a.startPoint.x.toFixed(3)+","+a.startPoint.y.toFixed(3)+" "+("C "+a.control1.x.toFixed(3)+",")+a.control1.y.toFixed(3)+" "+(a.control2.x.toFixed(3)+",")+a.control2.y.toFixed(3)+" "+a.endPoint.x.toFixed(3)+","+a.endPoint.y.toFixed(3);d.setAttribute("d",e),d.setAttribute("stroke-width",(2.25*b.end).toFixed(3)),d.setAttribute("stroke",c),d.setAttribute("fill","none"),d.setAttribute("stroke-linecap","round"),g.appendChild(d)}},function(b){var c=document.createElement("circle"),d="function"==typeof a.dotSize?a.dotSize():a.dotSize;c.setAttribute("r",d),c.setAttribute("cx",b.x),c.setAttribute("cy",b.y),c.setAttribute("fill",b.color),g.appendChild(c)});var h='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+(' viewBox="0 0 '+e+" ")+f+'" width="'+e+'" height="'+f+'">',i=g.innerHTML;if(void 0===i){var j=document.createElement("dummy"),k=g.childNodes;j.innerHTML="";for(var l=0;l<k.length;l+=1)j.appendChild(k[l].cloneNode(!0));i=j.innerHTML}return"data:image/svg+xml;base64,"+btoa(h+i+"</svg>")},d.prototype.fromData=function(a){var b=this;this.clear(),this._fromData(a,function(a,c){return b._drawCurve(a,c.start,c.end)},function(a){return b._drawDot(a)}),this._data=a},d.prototype.toData=function(){return this._data},a.s(["default",0,d])},563301,(a,b,c)=>{a.e,b.exports=function(){var a=[function(a,b){"use strict";function c(a,b,c,d){return({red:d[4*(c*b+a)],green:d[4*(c*b+a)+1],blue:d[4*(c*b+a)+2],alpha:d[4*(c*b+a)+3]}).alpha}function d(a,b,d,e){for(var f=a?1:-1,g=a?0:d-1,h=g;a?h<d:h>-1;h+=f)for(var i=0;i<b;i++)if(c(i,h,b,e))return h;return null}function e(a,b,d,e){for(var f=a?1:-1,g=a?0:b-1,h=g;a?h<b:h>-1;h+=f)for(var i=0;i<d;i++)if(c(h,i,b,e))return h;return null}Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(a){var b=a.getContext("2d"),c=a.width,f=a.height,g=b.getImageData(0,0,c,f).data,h=d(!0,c,f,g),i=d(!1,c,f,g),j=e(!0,c,f,g),k=e(!1,c,f,g)-j+1,l=i-h+1,m=b.getImageData(j,h,k,l);return a.width=k,a.height=l,b.clearRect(0,0,k,l),b.putImageData(m,0,0),a}}];function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}()},524865,(a,b,c)=>{a.e,b.exports=function(a,b,c,d){var e=[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!a)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&("object"==typeof b||"function"==typeof b)?b:a}Object.defineProperty(b,"__esModule",{value:!0});var f=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=d(c(1)),i=c(2),j=d(i),k=d(c(3)),l=d(c(4)),m=function(a){function b(){var a,c,d;if(!(this instanceof b))throw TypeError("Cannot call a class as a function");for(var f=arguments.length,g=Array(f),h=0;h<f;h++)g[h]=arguments[h];return c=d=e(this,(a=b.__proto__||Object.getPrototypeOf(b)).call.apply(a,[this].concat(g))),d._sigPad=null,d._excludeOurProps=function(){var a=d.props;return a.canvasProps,a.clearOnResize,function(a,b){var c={};for(var d in a)b.indexOf(d)>=0||Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d]);return c}(a,["canvasProps","clearOnResize"])},d.getCanvas=function(){return d._canvas},d.getTrimmedCanvas=function(){var a=document.createElement("canvas");return a.width=d._canvas.width,a.height=d._canvas.height,a.getContext("2d").drawImage(d._canvas,0,0),(0,l.default)(a)},d.getSignaturePad=function(){return d._sigPad},d._checkClearOnResize=function(){d.props.clearOnResize&&d._resizeCanvas()},d._resizeCanvas=function(){var a=d.props.canvasProps||{},b=a.width,c=a.height;if(!b||!c){var e=d._canvas,f=Math.max(window.devicePixelRatio||1,1);b||(e.width=e.offsetWidth*f),c||(e.height=e.offsetHeight*f),e.getContext("2d").scale(f,f),d.clear()}},d.on=function(){return window.addEventListener("resize",d._checkClearOnResize),d._sigPad.on()},d.off=function(){return window.removeEventListener("resize",d._checkClearOnResize),d._sigPad.off()},d.clear=function(){return d._sigPad.clear()},d.isEmpty=function(){return d._sigPad.isEmpty()},d.fromDataURL=function(a,b){return d._sigPad.fromDataURL(a,b)},d.toDataURL=function(a,b){return d._sigPad.toDataURL(a,b)},d.fromData=function(a){return d._sigPad.fromData(a)},d.toData=function(){return d._sigPad.toData()},e(d,c)}return function(a,b){if("function"!=typeof b&&null!==b)throw TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,a),g(b,[{key:"componentDidMount",value:function(){this._sigPad=new k.default(this._canvas,this._excludeOurProps()),this._resizeCanvas(),this.on()}},{key:"componentWillUnmount",value:function(){this.off()}},{key:"componentDidUpdate",value:function(){Object.assign(this._sigPad,this._excludeOurProps())}},{key:"render",value:function(){var a=this,b=this.props.canvasProps;return j.default.createElement("canvas",f({ref:function(b){a._canvas=b}},b))}}]),b}(i.Component);m.propTypes={velocityFilterWeight:h.default.number,minWidth:h.default.number,maxWidth:h.default.number,minDistance:h.default.number,dotSize:h.default.oneOfType([h.default.number,h.default.func]),penColor:h.default.string,throttle:h.default.number,onEnd:h.default.func,onBegin:h.default.func,canvasProps:h.default.object,clearOnResize:h.default.bool},m.defaultProps={clearOnResize:!0},b.default=m},function(b,c){b.exports=a},function(a,c){a.exports=b},function(a,b){a.exports=c},function(a,b){a.exports=d}];function f(a){if(g[a])return g[a].exports;var b=g[a]={exports:{},id:a,loaded:!1};return e[a].call(b.exports,b,b.exports,f),b.loaded=!0,b.exports}var g={};return f.m=e,f.c=g,f.p="",f(0)}(a.r(341212),a.r(572131),a.r(281688),a.r(563301))},406878,140807,426258,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(524865),e=a.i(340695),f=a.i(703130),g=a.i(787654),h=a.i(284505),i=a.i(773320),j=a.i(497895);function k({width:a=600,height:k=200,backgroundColor:l="#ffffff",penColor:m="#000000",onSave:n,onClear:o,defaultValue:p,className:q,disabled:r=!1,showControls:s=!0,title:t,description:u}){let v=(0,c.useRef)(null),[w,x]=(0,c.useState)(!0),[y,z]=(0,c.useState)(p||null);return(0,c.useEffect)(()=>{if(p&&v.current&&w){let a=new Image;a.src=p,a.onload=()=>{let b=v.current?.getCanvas()?.getContext("2d");b&&(b.drawImage(a,0,0),x(!1),z(p))}}},[p,w]),(0,b.jsxs)(f.Card,{className:(0,j.cn)("w-full",q),children:[(t||u)&&(0,b.jsxs)(f.CardHeader,{children:[t&&(0,b.jsx)(f.CardTitle,{children:t}),u&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:u})]}),(0,b.jsxs)(f.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"relative border-2 border-dashed rounded-lg overflow-hidden bg-white",children:[(0,b.jsx)(d.default,{ref:v,canvasProps:{width:a,height:k,className:"w-full h-full cursor-crosshair",style:{backgroundColor:l,width:"100%",height:`${k}px`}},backgroundColor:l,penColor:m,onEnd:()=>{if(v.current){let a=v.current.isEmpty();if(x(a),!a){let a=v.current.toDataURL("image/png");z(a),n?.(a)}}},disabled:r}),w&&!y&&(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Signez dans la zone ci-dessus"})})]}),s&&(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsxs)(e.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{v.current?.clear(),x(!0),z(null),o?.()},disabled:r||w&&!y,children:[(0,b.jsx)(g.RotateCcw,{className:"h-4 w-4 mr-2"}),"Effacer"]}),y&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(e.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{if(y){let a=document.createElement("a");a.download=`signature-${Date.now()}.png`,a.href=y,a.click()}},disabled:r,children:[(0,b.jsx)(h.Download,{className:"h-4 w-4 mr-2"}),"Télécharger"]}),(0,b.jsxs)("label",{children:[(0,b.jsx)(e.Button,{type:"button",variant:"outline",size:"sm",asChild:!0,disabled:r,children:(0,b.jsxs)("span",{children:[(0,b.jsx)(i.Upload,{className:"h-4 w-4 mr-2"}),"Importer"]})}),(0,b.jsx)("input",{type:"file",accept:"image/*",onChange:a=>{let b=a.target.files?.[0];if(b&&b.type.startsWith("image/")){let a=new FileReader;a.onload=a=>{let b=a.target?.result;if(b&&v.current){let a=new Image;a.src=b,a.onload=()=>{let c=v.current?.getCanvas(),d=c?.getContext("2d");d&&c&&(d.clearRect(0,0,c.width,c.height),d.drawImage(a,0,0,c.width,c.height),x(!1),z(b),n?.(b))}}},a.readAsDataURL(b)}},className:"hidden",disabled:r})]})]}),!w&&!y&&(0,b.jsx)(e.Button,{type:"button",variant:"default",size:"sm",onClick:()=>{if(v.current&&!w){let a=v.current.toDataURL("image/png");z(a),n?.(a)}},disabled:r,children:"Enregistrer la signature"})]}),y&&(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Signature enregistrée le ",new Date().toLocaleString("fr-FR")]})]})]})}a.s(["SignaturePad",()=>k],140807),a.i(553817);var l=a.i(965733),m=a.i(887682),n=a.i(205522),o=a.i(917171),p=a.i(546893),q=a.i(265602),r=a.i(46143),s=a.i(692759),t=a.i(526017),u=a.i(992258);function v({documentId:a,documentTitle:d,availableRecipients:f=[],onSuccess:g,trigger:h}){let[i,j]=(0,c.useState)(!1),[k,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(null),[y,z]=(0,c.useState)("single"),[A,B]=(0,c.useState)(""),[C,D]=(0,c.useState)(""),[E,F]=(0,c.useState)("student"),[G,H]=(0,c.useState)([]),[I,J]=(0,c.useState)(`Demande de signature : ${d}`),[K,L]=(0,c.useState)(""),[M,N]=(0,c.useState)(30),O=async()=>{try{let b;v(!0),x(null);let c=new Date;if(c.setDate(c.getDate()+M),"single"===y){if(!A||!C)return void x("Veuillez remplir tous les champs requis");b=await fetch("/api/signature-requests",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({documentId:a,recipientEmail:A,recipientName:C,recipientType:E,subject:I,message:K||null,expiresAt:c.toISOString()})})}else{if(0===G.length)return void x("Veuillez sélectionner au moins un destinataire");let d=f.filter(a=>G.includes(a.id)).map(a=>({id:a.id,email:a.email,name:a.name,type:a.type}));b=await fetch("/api/signature-requests",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({documentId:a,recipients:d,subject:I,message:K||null,expiresAt:c.toISOString()})})}if(!b.ok){let a=await b.json();throw Error(a.error||"Erreur lors de l'envoi")}B(""),D(""),F("student"),H([]),L(""),j(!1),g&&g()}catch(a){x(a instanceof Error?a.message:"Erreur inconnue")}finally{v(!1)}};return(0,b.jsxs)(l.Dialog,{open:i,onOpenChange:j,children:[(0,b.jsx)(l.DialogTrigger,{asChild:!0,children:h||(0,b.jsxs)(e.Button,{children:[(0,b.jsx)(s.Send,{className:"h-4 w-4 mr-2"}),"Envoyer en signature"]})}),(0,b.jsxs)(l.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(l.DialogHeader,{children:[(0,b.jsx)(l.DialogTitle,{children:"Envoyer une demande de signature"}),(0,b.jsx)(l.DialogDescription,{children:"Envoyez ce document pour signature électronique par email"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Document"}),(0,b.jsx)("p",{className:"font-medium",children:d})]}),f.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)(o.Label,{children:"Mode d'envoi"}),(0,b.jsxs)(m.Select,{value:y,onValueChange:a=>z(a),children:[(0,b.jsx)(m.SelectTrigger,{children:(0,b.jsx)(m.SelectValue,{})}),(0,b.jsxs)(m.SelectContent,{children:[(0,b.jsx)(m.SelectItem,{value:"single",children:"Un seul destinataire"}),(0,b.jsx)(m.SelectItem,{value:"multiple",children:"Plusieurs destinataires"})]})]})]}),"single"===y&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(o.Label,{htmlFor:"recipientEmail",children:"Email du destinataire *"}),(0,b.jsx)(n.Input,{id:"recipientEmail",type:"email",value:A,onChange:a=>B(a.target.value),placeholder:"email@example.com"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(o.Label,{htmlFor:"recipientName",children:"Nom du destinataire *"}),(0,b.jsx)(n.Input,{id:"recipientName",value:C,onChange:a=>D(a.target.value),placeholder:"Jean Dupont"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(o.Label,{htmlFor:"recipientType",children:"Type de destinataire"}),(0,b.jsxs)(m.Select,{value:E,onValueChange:a=>F(a),children:[(0,b.jsx)(m.SelectTrigger,{children:(0,b.jsx)(m.SelectValue,{})}),(0,b.jsxs)(m.SelectContent,{children:[(0,b.jsx)(m.SelectItem,{value:"student",children:"Apprenant"}),(0,b.jsx)(m.SelectItem,{value:"funder",children:"Financeur"}),(0,b.jsx)(m.SelectItem,{value:"teacher",children:"Formateur"}),(0,b.jsx)(m.SelectItem,{value:"other",children:"Autre"})]})]})]})]}),"multiple"===y&&f.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsxs)(o.Label,{children:["Destinataires (",G.length," sélectionné",G.length>1?"s":"",")"]}),(0,b.jsx)("div",{className:"border rounded-lg max-h-60 overflow-y-auto",children:f.map(a=>(0,b.jsxs)("label",{className:"flex items-center gap-3 p-3 hover:bg-gray-50 cursor-pointer border-b last:border-b-0",children:[(0,b.jsx)(r.Checkbox,{checked:G.includes(a.id),onCheckedChange:()=>{var b;return b=a.id,void H(a=>a.includes(b)?a.filter(a=>a!==b):[...a,b])}}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-medium",children:a.name}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:a.email})]}),(0,b.jsxs)("span",{className:"text-xs px-2 py-1 bg-gray-100 rounded",children:["student"===a.type&&"Apprenant","funder"===a.type&&"Financeur","teacher"===a.type&&"Formateur","other"===a.type&&"Autre"]})]},a.id))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(o.Label,{htmlFor:"subject",children:"Sujet de l'email"}),(0,b.jsx)(n.Input,{id:"subject",value:I,onChange:a=>J(a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(o.Label,{htmlFor:"message",children:"Message personnalisé (optionnel)"}),(0,b.jsx)(p.Textarea,{id:"message",value:K,onChange:a=>L(a.target.value),placeholder:"Ajoutez un message personnalisé pour le destinataire...",rows:4})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(o.Label,{htmlFor:"expiresInDays",children:"Expiration (jours)"}),(0,b.jsx)(n.Input,{id:"expiresInDays",type:"number",min:"1",max:"365",value:M,onChange:a=>N(parseInt(a.target.value)||30)}),(0,b.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["La demande expirera dans ",M," jour",M>1?"s":""]})]}),w&&(0,b.jsx)(q.Alert,{variant:"destructive",children:(0,b.jsx)(q.AlertDescription,{children:w})}),(0,b.jsxs)(q.Alert,{children:[(0,b.jsx)(u.Mail,{className:"h-4 w-4"}),(0,b.jsx)(q.AlertDescription,{children:"single"===y?"Un email sera envoyé au destinataire avec un lien sécurisé pour signer le document.":`${G.length} email${G.length>1?"s":""} ${G.length>1?"seront envoyés":"sera envoyé"} avec un lien s\xe9curis\xe9 pour chaque destinataire.`})]})]}),(0,b.jsxs)(l.DialogFooter,{children:[(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>j(!1),disabled:k,children:"Annuler"}),(0,b.jsxs)(e.Button,{onClick:O,disabled:k,children:[k&&(0,b.jsx)(t.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Envoyer"]})]})]})]})}a.s(["SendSignatureRequestDialog",()=>v],426258),a.s([],406878)}];

//# sourceMappingURL=_db18dc44._.js.map