{"version":3,"sources":["../../../../app/%28dashboard%29/dashboard/settings/users/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query'\nimport { useAuth } from '@/lib/hooks/use-auth'\nimport { createClient } from '@/lib/supabase/client'\nimport { Button } from '@/components/ui/button'\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card'\nimport { Input } from '@/components/ui/input'\nimport { Badge } from '@/components/ui/badge'\nimport { useToast } from '@/components/ui/toast'\nimport { RoleGuard, ADMIN_ROLES } from '@/components/auth/role-guard'\nimport {\n  Users,\n  Plus,\n  Search,\n  Mail,\n  Phone,\n  Shield,\n  CheckCircle2,\n  XCircle,\n  RefreshCw,\n  Edit,\n  Trash2,\n  MoreVertical\n} from 'lucide-react'\nimport Link from 'next/link'\nimport { formatDate } from '@/lib/utils'\n\nconst ROLE_LABELS: Record<string, string> = {\n  super_admin: 'Super Administrateur',\n  admin: 'Administrateur',\n  teacher: 'Enseignant',\n  secretary: 'Secr√©taire',\n  accountant: 'Comptable',\n  parent: 'Parent',\n  student: '√âtudiant',\n}\n\nconst ROLE_COLORS: Record<string, string> = {\n  super_admin: 'bg-purple-100 text-purple-800',\n  admin: 'bg-blue-100 text-blue-800',\n  teacher: 'bg-green-100 text-green-800',\n  secretary: 'bg-orange-100 text-orange-800',\n  accountant: 'bg-yellow-100 text-yellow-800',\n  parent: 'bg-gray-100 text-gray-800',\n  student: 'bg-cyan-100 text-cyan-800',\n}\n\nfunction UsersSettingsPageContent() {\n  const { user } = useAuth()\n  const supabase = createClient()\n  const queryClient = useQueryClient()\n  const { addToast } = useToast()\n  const [searchQuery, setSearchQuery] = useState('')\n  const [roleFilter, setRoleFilter] = useState<string | null>(null)\n  \n  // Fonction pour forcer le rafra√Æchissement\n  const handleRefresh = () => {\n    queryClient.invalidateQueries({ queryKey: ['organization-users'] })\n    queryClient.refetchQueries({ queryKey: ['organization-users'] })\n    addToast({\n      type: 'info',\n      title: 'Actualisation',\n      description: 'Liste des utilisateurs actualis√©e',\n    })\n  }\n  \n  // Rafra√Æchir automatiquement quand on revient sur la page\n  useEffect(() => {\n    const handleFocus = () => {\n      queryClient.invalidateQueries({ queryKey: ['organization-users'] })\n    }\n    window.addEventListener('focus', handleFocus)\n    return () => window.removeEventListener('focus', handleFocus)\n  }, [queryClient])\n\n  // R√©cup√©rer TOUS les utilisateurs de l'organisation (tous les r√¥les)\n  const { data: users = [], isLoading } = useQuery({\n    queryKey: ['organization-users', user?.organization_id, searchQuery, roleFilter],\n    queryFn: async () => {\n      if (!user?.organization_id) {\n        console.log('‚ö†Ô∏è [USERS] Pas d\\'organization_id pour l\\'utilisateur:', user?.id)\n        return []\n      }\n      \n      console.log('üîç [USERS] R√©cup√©ration des utilisateurs pour organization_id:', user.organization_id)\n      console.log('üîç [USERS] Utilisateur actuel:', {\n        id: user.id,\n        email: user.email,\n        role: user.role,\n        organization_id: user.organization_id,\n      })\n      \n      // Essayer d'abord avec une requ√™te simple\n      let query = supabase\n        .from('users')\n        .select('id, email, full_name, phone, role, is_active, last_login_at, created_at, updated_at, organization_id')\n        .eq('organization_id', user.organization_id)\n        .order('created_at', { ascending: false })\n      \n      console.log('üîç [USERS] Requ√™te Supabase construite, ex√©cution...')\n\n      if (searchQuery) {\n        query = query.or(`full_name.ilike.%${searchQuery}%,email.ilike.%${searchQuery}%`)\n      }\n\n      if (roleFilter) {\n        query = query.eq('role', roleFilter)\n        console.log('üîç [USERS] Filtre par r√¥le appliqu√©:', roleFilter)\n      }\n\n      const { data, error } = await query\n      \n      if (error) {\n        console.error('‚ùå [USERS] Erreur lors de la r√©cup√©ration:', error)\n        throw error\n      }\n      \n      console.log('‚úÖ [USERS] Utilisateurs r√©cup√©r√©s:', data?.length || 0)\n      if (data && data.length > 0) {\n        const usersDetails = data.map(u => ({\n          id: u.id,\n          email: u.email,\n          full_name: u.full_name,\n          role: u.role,\n          organization_id: u.organization_id,\n          is_active: u.is_active,\n        }))\n        console.log('üìã [USERS] D√©tails des utilisateurs:', usersDetails)\n        console.log('üìã [USERS] D√©tails complets (pour debug):', JSON.stringify(usersDetails, null, 2))\n        console.log('üìä [USERS] R√©partition par r√¥le:', {\n          teachers: data.filter(u => u.role === 'teacher').length,\n          admins: data.filter(u => u.role === 'admin' || u.role === 'super_admin').length,\n          secretaries: data.filter(u => u.role === 'secretary').length,\n          accountants: data.filter(u => u.role === 'accountant').length,\n          others: data.filter(u => !['teacher', 'admin', 'super_admin', 'secretary', 'accountant'].includes(u.role)).length,\n        })\n      } else {\n        console.warn('‚ö†Ô∏è [USERS] Aucun utilisateur trouv√© pour organization_id:', user.organization_id)\n      }\n      \n      return data || []\n    },\n    enabled: !!user?.organization_id,\n    refetchOnMount: true,\n    refetchOnWindowFocus: true,\n    staleTime: 0, // Toujours consid√©rer les donn√©es comme obsol√®tes pour forcer le refetch\n  })\n\n  // Mutation pour activer/d√©sactiver un utilisateur\n  const toggleUserStatusMutation = useMutation({\n    mutationFn: async ({ userId, isActive }: { userId: string; isActive: boolean }) => {\n      const { error } = await supabase\n        .from('users')\n        .update({ is_active: !isActive })\n        .eq('id', userId)\n      if (error) throw error\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['organization-users'] })\n      addToast({\n        title: 'Succ√®s',\n        description: 'Le statut de l\\'utilisateur a √©t√© mis √† jour',\n        type: 'success',\n      })\n    },\n    onError: (error: any) => {\n      addToast({\n        title: 'Erreur',\n        description: error.message || 'Erreur lors de la mise √† jour',\n        type: 'error',\n      })\n    },\n  })\n\n  // Statistiques\n  const stats = {\n    total: users.length,\n    active: users.filter((u) => u.is_active).length,\n    inactive: users.filter((u) => !u.is_active).length,\n    byRole: Object.keys(ROLE_LABELS).reduce((acc, role) => {\n      acc[role] = users.filter((u) => u.role === role).length\n      return acc\n    }, {} as Record<string, number>),\n  }\n\n  if (isLoading) {\n    return (\n      <div className=\"container mx-auto py-8 px-4\">\n        <div className=\"flex items-center justify-center h-64\">\n          <RefreshCw className=\"h-8 w-8 animate-spin text-brand-blue\" />\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"container mx-auto py-8 px-4 max-w-7xl\">\n      {/* Header */}\n      <div className=\"mb-8\">\n        <h1 className=\"text-3xl font-bold mb-2 flex items-center gap-2\">\n          <Users className=\"h-8 w-8 text-brand-blue\" />\n          Gestion des utilisateurs\n        </h1>\n        <p className=\"text-muted-foreground\">\n          G√©rez les utilisateurs de votre organisation\n        </p>\n      </div>\n\n      {/* Statistiques g√©n√©rales */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\">\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-muted-foreground\">Total utilisateurs</p>\n                <p className=\"text-2xl font-bold\">{stats.total}</p>\n              </div>\n              <Users className=\"h-8 w-8 text-blue-500\" />\n            </div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-muted-foreground\">Actifs</p>\n                <p className=\"text-2xl font-bold text-green-600\">{stats.active}</p>\n              </div>\n              <CheckCircle2 className=\"h-8 w-8 text-green-500\" />\n            </div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-muted-foreground\">Inactifs</p>\n                <p className=\"text-2xl font-bold text-red-600\">{stats.inactive}</p>\n              </div>\n              <XCircle className=\"h-8 w-8 text-red-500\" />\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Statistiques par r√¥le */}\n      <div className=\"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 mb-8\">\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"text-center\">\n              <p className=\"text-sm text-muted-foreground mb-1\">Administrateurs</p>\n              <p className=\"text-2xl font-bold text-purple-600\">\n                {(stats.byRole.admin || 0) + (stats.byRole.super_admin || 0)}\n              </p>\n            </div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"text-center\">\n              <p className=\"text-sm text-muted-foreground mb-1\">Enseignants</p>\n              <p className=\"text-2xl font-bold text-green-600\">\n                {stats.byRole.teacher || 0}\n              </p>\n            </div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"text-center\">\n              <p className=\"text-sm text-muted-foreground mb-1\">Secr√©taires</p>\n              <p className=\"text-2xl font-bold text-orange-600\">\n                {stats.byRole.secretary || 0}\n              </p>\n            </div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"text-center\">\n              <p className=\"text-sm text-muted-foreground mb-1\">Comptables</p>\n              <p className=\"text-2xl font-bold text-yellow-600\">\n                {stats.byRole.accountant || 0}\n              </p>\n            </div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"text-center\">\n              <p className=\"text-sm text-muted-foreground mb-1\">Parents</p>\n              <p className=\"text-2xl font-bold text-gray-600\">\n                {stats.byRole.parent || 0}\n              </p>\n            </div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"text-center\">\n              <p className=\"text-sm text-muted-foreground mb-1\">√âtudiants</p>\n              <p className=\"text-2xl font-bold text-cyan-600\">\n                {stats.byRole.student || 0}\n              </p>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Filtres et recherche */}\n      <Card className=\"mb-6\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex flex-col md:flex-row gap-4\">\n            <div className=\"flex-1\">\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground\" />\n                <Input\n                  placeholder=\"Rechercher par nom ou email...\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  className=\"pl-10\"\n                />\n              </div>\n            </div>\n            <div className=\"flex gap-2\">\n              <Button\n                variant={roleFilter === null ? 'default' : 'outline'}\n                onClick={() => setRoleFilter(null)}\n              >\n                Tous\n              </Button>\n              {Object.keys(ROLE_LABELS).map((role) => (\n                <Button\n                  key={role}\n                  variant={roleFilter === role ? 'default' : 'outline'}\n                  onClick={() => setRoleFilter(roleFilter === role ? null : role)}\n                >\n                  {ROLE_LABELS[role]}\n                </Button>\n              ))}\n            </div>\n            <Button\n              variant=\"outline\"\n              onClick={handleRefresh}\n              disabled={isLoading}\n            >\n              <RefreshCw className={`h-4 w-4 mr-2 ${isLoading ? 'animate-spin' : ''}`} />\n              Actualiser\n            </Button>\n            <Button asChild>\n              <Link href=\"/dashboard/settings/users/new\">\n                <Plus className=\"h-4 w-4 mr-2\" />\n                Nouvel utilisateur\n              </Link>\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Liste des utilisateurs */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Liste des utilisateurs</CardTitle>\n          <CardDescription>\n            {users.length} utilisateur{users.length > 1 ? 's' : ''} trouv√©{users.length > 1 ? 's' : ''}\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          {users.length === 0 ? (\n            <div className=\"text-center py-12\">\n              <Users className=\"h-12 w-12 mx-auto text-muted-foreground mb-4\" />\n              <p className=\"text-muted-foreground mb-4\">\n                {searchQuery || roleFilter\n                  ? 'Aucun utilisateur ne correspond √† vos crit√®res'\n                  : 'Aucun utilisateur trouv√©'}\n              </p>\n              {!searchQuery && !roleFilter && (\n                <Button asChild>\n                  <Link href=\"/dashboard/settings/users/new\">\n                    <Plus className=\"h-4 w-4 mr-2\" />\n                    Cr√©er le premier utilisateur\n                  </Link>\n                </Button>\n              )}\n            </div>\n          ) : (\n            <div className=\"space-y-4\">\n              {users.map((userItem) => (\n                <Card key={userItem.id} className=\"hover:shadow-md transition-shadow\">\n                  <CardContent className=\"pt-6\">\n                    <div className=\"flex items-start justify-between\">\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center gap-3 mb-2\">\n                          <h3 className=\"text-lg font-semibold\">\n                            {userItem.full_name || 'Sans nom'}\n                          </h3>\n                          <Badge className={ROLE_COLORS[userItem.role] || 'bg-gray-100 text-gray-800'}>\n                            {ROLE_LABELS[userItem.role] || userItem.role}\n                          </Badge>\n                          {userItem.is_active ? (\n                            <Badge className=\"bg-green-100 text-green-800\">\n                              <CheckCircle2 className=\"h-3 w-3 mr-1\" />\n                              Actif\n                            </Badge>\n                          ) : (\n                            <Badge className=\"bg-red-100 text-red-800\">\n                              <XCircle className=\"h-3 w-3 mr-1\" />\n                              Inactif\n                            </Badge>\n                          )}\n                        </div>\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm mb-3\">\n                          <div className=\"flex items-center gap-2 text-muted-foreground\">\n                            <Mail className=\"h-4 w-4\" />\n                            <span>{userItem.email}</span>\n                          </div>\n                          {userItem.phone && (\n                            <div className=\"flex items-center gap-2 text-muted-foreground\">\n                              <Phone className=\"h-4 w-4\" />\n                              <span>{userItem.phone}</span>\n                            </div>\n                          )}\n                          {userItem.last_login_at && (\n                            <div className=\"text-muted-foreground\">\n                              Derni√®re connexion: {formatDate(userItem.last_login_at)}\n                            </div>\n                          )}\n                          <div className=\"text-muted-foreground\">\n                            Cr√©√© le: {formatDate(userItem.created_at || '')}\n                          </div>\n                        </div>\n                      </div>\n                      <div className=\"flex gap-2\">\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={() =>\n                            toggleUserStatusMutation.mutate({\n                              userId: userItem.id,\n                              isActive: userItem.is_active ?? false,\n                            })\n                          }\n                          disabled={toggleUserStatusMutation.isPending}\n                        >\n                          {userItem.is_active ? (\n                            <>\n                              <XCircle className=\"h-4 w-4 mr-2\" />\n                              D√©sactiver\n                            </>\n                          ) : (\n                            <>\n                              <CheckCircle2 className=\"h-4 w-4 mr-2\" />\n                              Activer\n                            </>\n                          )}\n                        </Button>\n                        <Button variant=\"outline\" size=\"sm\" asChild>\n                          <Link href={`/dashboard/settings/users/${userItem.id}`}>\n                            <Edit className=\"h-4 w-4 mr-2\" />\n                            Modifier\n                          </Link>\n                        </Button>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n\nexport default function UsersSettingsPage() {\n  return (\n    <RoleGuard allowedRoles={ADMIN_ROLES}>\n      <UsersSettingsPageContent />\n    </RoleGuard>\n  )\n}\n"],"names":[],"mappings":"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"}