{"version":3,"sources":["../../../../app/%28dashboard%29/dashboard/sessions/%5Bid%5D/sections/config-programme.tsx"],"sourcesContent":["'use client'\n\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport Link from 'next/link'\nimport type { SessionFormData, SlotConfig } from '../hooks/use-session-detail'\nimport type { TableRow } from '@/lib/types/supabase-helpers'\nimport type { FormationWithRelations } from '@/lib/types/query-types'\n\ntype Program = TableRow<'programs'>\ntype Formation = TableRow<'formations'>\n\ninterface ConfigProgrammeProps {\n  formData: SessionFormData\n  onFormDataChange: (data: SessionFormData) => void\n  programs?: Program[]\n  formations?: FormationWithRelations[]\n  sessionPrograms?: Program[]\n  formation?: FormationWithRelations | null\n  program?: Program | null\n}\n\nexport function ConfigProgramme({\n  formData,\n  onFormDataChange,\n  programs = [],\n  formations = [],\n  sessionPrograms = [],\n  formation,\n  program,\n}: ConfigProgrammeProps) {\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle>Programmes et Formation</CardTitle>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        <div>\n          <label className=\"block text-sm font-medium mb-2\">Programmes *</label>\n          <p className=\"text-xs text-muted-foreground mb-3\">\n            Sélectionnez un ou plusieurs programmes associés à cette session\n          </p>\n          <div className=\"space-y-2 max-h-64 overflow-y-auto border rounded-lg p-3\">\n            {programs.length === 0 ? (\n              <p className=\"text-sm text-muted-foreground\">Aucun programme disponible</p>\n            ) : (\n              programs.map((p) => (\n                <label\n                  key={p.id}\n                  className=\"flex items-center space-x-2 p-2 rounded hover:bg-gray-50 cursor-pointer\"\n                >\n                  <input\n                    type=\"checkbox\"\n                    checked={formData.program_ids.includes(p.id)}\n                    onChange={(e) => {\n                      if (e.target.checked) {\n                        onFormDataChange({\n                          ...formData,\n                          program_ids: [...formData.program_ids, p.id],\n                          formation_id: formData.formation_id && formations.some((f) => \n                            f.id === formData.formation_id && f.program_id && [...formData.program_ids, p.id].includes(f.program_id)\n                          ) ? formData.formation_id : '',\n                        })\n                      } else {\n                        const newProgramIds = formData.program_ids.filter((id) => id !== p.id)\n                        onFormDataChange({\n                          ...formData,\n                          program_ids: newProgramIds,\n                          formation_id: formData.formation_id && formations.some((f) => \n                            f.id === formData.formation_id && f.program_id && newProgramIds.includes(f.program_id)\n                          ) ? formData.formation_id : '',\n                        })\n                      }\n                    }}\n                    className=\"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary\"\n                  />\n                  <span className=\"text-sm\">{p.name}</span>\n                  {p.code && (\n                    <span className=\"text-xs text-muted-foreground\">({p.code})</span>\n                  )}\n                </label>\n              ))\n            )}\n          </div>\n          {formData.program_ids.length > 0 && (\n            <p className=\"text-xs text-muted-foreground mt-2\">\n              {formData.program_ids.length} programme{formData.program_ids.length > 1 ? 's' : ''} sélectionné{formData.program_ids.length > 1 ? 's' : ''}\n            </p>\n          )}\n        </div>\n\n        <div>\n          <label className=\"block text-sm font-medium mb-2\">Formation *</label>\n          <select\n            value={formData.formation_id}\n            onChange={(e) => onFormDataChange({ ...formData, formation_id: e.target.value })}\n            className=\"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent\"\n            disabled={formData.program_ids.length === 0}\n          >\n            <option value=\"\">Sélectionner une formation</option>\n            {formations.map((f) => (\n              <option key={f.id} value={f.id}>\n                {f.name} {f.program_id && formData.program_ids.includes(f.program_id) ? '' : '(hors programmes sélectionnés)'}\n              </option>\n            ))}\n          </select>\n          {formData.program_ids.length === 0 && (\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              Veuillez d'abord sélectionner au moins un programme\n            </p>\n          )}\n        </div>\n\n        {formation && (\n          <div className=\"bg-gray-50 p-4 rounded-lg\">\n            <h4 className=\"font-medium mb-2\">Formation sélectionnée</h4>\n            <p className=\"text-sm text-muted-foreground\">\n              <Link href={`/dashboard/formations/${formation.id}`} className=\"text-primary hover:underline\">\n                {formation.name}\n              </Link>\n            </p>\n            {sessionPrograms.length > 0 ? (\n              <div className=\"mt-2\">\n                <p className=\"text-xs text-muted-foreground font-medium mb-1\">Programmes associés:</p>\n                <ul className=\"list-disc list-inside space-y-1\">\n                  {sessionPrograms.map((p) => (\n                    <li key={p.id} className=\"text-xs text-muted-foreground\">\n                      <Link href={`/dashboard/programs/${p.id}`} className=\"text-primary hover:underline\">\n                        {p.name}\n                      </Link>\n                    </li>\n                  ))}\n                </ul>\n              </div>\n            ) : program && (\n              <p className=\"text-xs text-muted-foreground mt-1\">\n                Programme: <Link href={`/dashboard/programs/${program.id}`} className=\"text-primary hover:underline\">\n                  {program.name}\n                </Link>\n              </p>\n            )}\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  )\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"],"names":[],"mappings":"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"}