{"version":3,"sources":["../../../../node_modules/lucide-react/src/icons/check-circle.ts","../../../../node_modules/lucide-react/src/icons/chevron-left.ts","../../../../lib/services/elearning.service.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name CheckCircle\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjIgMTEuMDhWMTJhMTAgMTAgMCAxIDEtNS45My05LjE0IiAvPgogIDxwYXRoIGQ9Im05IDExIDMgM0wyMiA0IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/check-circle\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CheckCircle = createLucideIcon('CheckCircle', [\n  ['path', { d: 'M22 11.08V12a10 10 0 1 1-5.93-9.14', key: 'g774vq' }],\n  ['path', { d: 'm9 11 3 3L22 4', key: '1pflzl' }],\n]);\n\nexport default CheckCircle;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ChevronLeft\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTUgMTgtNi02IDYtNiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/chevron-left\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ChevronLeft = createLucideIcon('ChevronLeft', [\n  ['path', { d: 'm15 18-6-6 6-6', key: '1wnfg3' }],\n]);\n\nexport default ChevronLeft;\n","import { createClient } from '@/lib/supabase/client'\nimport type { SupabaseClient } from '@supabase/supabase-js'\nimport { Database } from '@/types/database.types'\nimport type { TableRow, TableInsert, TableUpdate } from '@/lib/types/supabase-helpers'\n\ntype Course = TableRow<'courses'>\ntype Lesson = TableRow<'lessons'>\ntype Quiz = TableRow<'quizzes'>\ntype QuizQuestion = TableRow<'quiz_questions'>\ntype CourseEnrollment = TableRow<'course_enrollments'>\ntype LessonProgress = TableRow<'lesson_progress'>\ntype Assignment = TableRow<'assignments'>\ntype AssignmentSubmission = TableRow<'assignment_submissions'>\n\nexport class ELearningService {\n  private supabase: SupabaseClient<Database>\n\n\n  constructor(supabaseClient?: SupabaseClient<Database>) {\n\n    this.supabase = supabaseClient || createClient()\n\n  }\n\n  // ========== COURSES ==========\n\n  async getCourses(organizationId: string, filters?: {\n    instructorId?: string\n    isPublished?: boolean\n    isFeatured?: boolean\n    difficulty?: string\n    search?: string\n  }) {\n    try {\n      let query = this.supabase\n        .from('courses')\n        .select('*, instructor:users(id, full_name, email), formation:formations(*)')\n        .eq('organization_id', organizationId)\n\n    if (filters?.instructorId) {\n      query = query.eq('instructor_id', filters.instructorId)\n    }\n\n    if (filters?.isPublished !== undefined) {\n      query = query.eq('is_published', filters.isPublished)\n    }\n\n    if (filters?.isFeatured) {\n      query = query.eq('is_featured', true)\n    }\n\n    if (filters?.difficulty) {\n      query = query.eq('difficulty_level', filters.difficulty)\n    }\n\n    if (filters?.search) {\n      query = query.or(`title.ilike.%${filters.search}%,description.ilike.%${filters.search}%`)\n    }\n\n      const { data, error } = await query\n        .order('created_at', { ascending: false })\n\n      if (error) {\n        // Si la table n'existe pas encore ou erreur 400, retourner un tableau vide\n        if (\n          error.code === 'PGRST116' ||\n          error.code === '42P01' ||\n          error.code === 'PGRST301' ||\n          (error as any).status === 400 ||\n          error.code === '400' ||\n          error.message?.includes('relation') ||\n          error.message?.includes('relationship') ||\n          error.message?.includes('does not exist') ||\n          error.message?.includes('schema cache')\n        ) {\n          console.warn('Table courses does not exist yet or invalid query:', error.message)\n          return []\n        }\n        throw error\n      }\n      return data || []\n    } catch (error: unknown) {\n      // Gérer les erreurs de table inexistante ou erreurs 400\n      const errorObj = error as { code?: string; status?: number; message?: string }\n      if (\n        errorObj?.code === 'PGRST116' ||\n        errorObj?.code === '42P01' ||\n        errorObj?.code === 'PGRST301' ||\n        errorObj?.status === 400 ||\n        errorObj?.code === '400' ||\n        errorObj?.message?.includes('relation') ||\n        errorObj?.message?.includes('relationship') ||\n        errorObj?.message?.includes('does not exist') ||\n        errorObj?.message?.includes('schema cache')\n      ) {\n        console.warn('Table courses does not exist yet or invalid query:', errorObj?.message || String(error))\n        return []\n      }\n      throw error\n    }\n  }\n\n  async getCourseBySlug(slug: string, organizationId: string) {\n    try {\n      // Essayer d'abord avec toutes les relations\n      let query = this.supabase\n        .from('courses')\n        .select(`\n          *,\n          instructor:users(id, full_name, email),\n          formation:formations(*),\n          sections:course_sections(*),\n          lessons:lessons(*)\n        `)\n        .eq('slug', slug)\n        .eq('organization_id', organizationId)\n      \n      const { data, error } = await query.maybeSingle()\n\n      if (error) {\n        // Si la table n'existe pas encore ou erreur 400, retourner null\n        if (\n          error.code === 'PGRST116' ||\n          error.code === '42P01' ||\n          error.code === 'PGRST301' ||\n          (error as any).status === 400 ||\n          error.code === '400' ||\n          error.message?.includes('relation') ||\n          error.message?.includes('relationship') ||\n          error.message?.includes('does not exist') ||\n          error.message?.includes('schema cache')\n        ) {\n          console.warn('Table courses or relations do not exist yet or invalid query:', error.message)\n          return null\n        }\n        throw error\n      }\n      return data\n    } catch (error: unknown) {\n      // Gérer les erreurs de table inexistante ou erreurs 400\n      const errorObj = error as { code?: string; status?: number; message?: string }\n      if (\n        errorObj?.code === 'PGRST116' ||\n        errorObj?.code === '42P01' ||\n        errorObj?.code === 'PGRST301' ||\n        errorObj?.status === 400 ||\n        errorObj?.code === '400' ||\n        errorObj?.message?.includes('relation') ||\n        errorObj?.message?.includes('relationship') ||\n        errorObj?.message?.includes('does not exist') ||\n        errorObj?.message?.includes('schema cache')\n      ) {\n        console.warn('Table courses or relations do not exist yet or invalid query:', errorObj?.message)\n        return null\n      }\n      throw error\n    }\n  }\n\n  async createCourse(course: TableInsert<'courses'>) {\n    const { data, error } = await this.supabase\n      .from('courses')\n      .insert(course)\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  async updateCourse(id: string, updates: TableUpdate<'courses'>) {\n    const { data, error } = await this.supabase\n      .from('courses')\n      .update(updates)\n      .eq('id', id)\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  async deleteCourse(id: string) {\n    const { error } = await this.supabase\n      .from('courses')\n      .delete()\n      .eq('id', id)\n\n    if (error) throw error\n  }\n\n  // ========== SECTIONS ==========\n\n  async getCourseSections(courseId: string) {\n    const { data, error } = await this.supabase\n      .from('course_sections')\n      .select('*')\n      .eq('course_id', courseId)\n      .order('order_index', { ascending: true })\n\n    if (error) throw error\n    return data\n  }\n\n  async createSection(section: TableInsert<'course_sections'>) {\n    const { data, error } = await this.supabase\n      .from('course_sections')\n      .insert(section)\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  async updateSection(id: string, updates: TableUpdate<'course_sections'>) {\n    const { data, error } = await this.supabase\n      .from('course_sections')\n      .update(updates)\n      .eq('id', id)\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  async deleteSection(id: string) {\n    // Détacher les leçons avant suppression de la section (évite les erreurs FK, et garde les leçons)\n    const { error: detachError } = await this.supabase\n      .from('lessons')\n      .update({ section_id: null })\n      .eq('section_id', id)\n\n    if (detachError) throw detachError\n\n    const { error } = await this.supabase\n      .from('course_sections')\n      .delete()\n      .eq('id', id)\n\n    if (error) throw error\n  }\n\n  // ========== LESSONS ==========\n\n  async getCourseLessons(courseId: string) {\n    const { data, error } = await this.supabase\n      .from('lessons')\n      .select('*')\n      .eq('course_id', courseId)\n      .order('order_index', { ascending: true })\n\n    if (error) throw error\n    return data\n  }\n\n  async getLessonById(id: string) {\n    const { data, error } = await this.supabase\n      .from('lessons')\n      .select('*, course:courses(*), section:course_sections(*)')\n      .eq('id', id)\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  async getLessonBySlug(slug: string, courseId: string) {\n    const { data, error } = await this.supabase\n      .from('lessons')\n      .select('*, course:courses(*), section:course_sections(*)')\n      .eq('slug', slug)\n      .eq('course_id', courseId)\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  async createLesson(lesson: TableInsert<'lessons'>) {\n    const { data, error } = await this.supabase\n      .from('lessons')\n      .insert(lesson)\n      .select()\n      .single()\n\n    if (error) throw error\n\n    // Mettre à jour le nombre total de leçons du cours\n    await this.updateCourseLessonCount(lesson.course_id)\n\n    return data\n  }\n\n  async updateLesson(id: string, updates: TableUpdate<'lessons'>) {\n    const { data, error } = await this.supabase\n      .from('lessons')\n      .update(updates)\n      .eq('id', id)\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  async deleteLesson(id: string) {\n    // Récupérer le course_id avant suppression\n    const { data: lesson } = await this.supabase\n      .from('lessons')\n      .select('course_id')\n      .eq('id', id)\n      .single()\n\n    const { error } = await this.supabase\n      .from('lessons')\n      .delete()\n      .eq('id', id)\n\n    if (error) throw error\n\n    // Mettre à jour le nombre total de leçons du cours\n    if (lesson) {\n      await this.updateCourseLessonCount(lesson.course_id)\n    }\n  }\n\n  private async updateCourseLessonCount(courseId: string) {\n    const { count } = await this.supabase\n      .from('lessons')\n      .select('*', { count: 'exact', head: true })\n      .eq('course_id', courseId)\n\n    await this.supabase\n      .from('courses')\n      .update({ total_lessons: count || 0 })\n      .eq('id', courseId)\n  }\n\n  // ========== ENROLLMENTS ==========\n\n  async enrollInCourse(courseId: string, studentId: string) {\n    const { data, error } = await this.supabase\n      .from('course_enrollments')\n      .insert({\n        course_id: courseId,\n        student_id: studentId,\n        enrollment_status: 'enrolled',\n      })\n      .select()\n      .single()\n\n    if (error) throw error\n\n    // Incrémenter le nombre total d'étudiants\n    await this.incrementCourseStudentCount(courseId)\n\n    return data\n  }\n\n  async getStudentEnrollments(studentId: string) {\n    try {\n      const { data, error } = await this.supabase\n        .from('course_enrollments')\n        .select(`\n          *,\n          course:courses(*, instructor:users(id, full_name, email))\n        `)\n        .eq('student_id', studentId)\n        .order('enrolled_at', { ascending: false })\n\n      if (error) {\n        // Si la table n'existe pas encore ou erreur 400, retourner un tableau vide\n        if (\n          error.code === 'PGRST116' ||\n          error.code === '42P01' ||\n          error.code === 'PGRST301' ||\n          (error as any).status === 400 ||\n          error.code === '400' ||\n          error.message?.includes('relation') ||\n          error.message?.includes('relationship') ||\n          error.message?.includes('does not exist') ||\n          error.message?.includes('schema cache')\n        ) {\n          console.warn('Table course_enrollments does not exist yet or invalid query:', error.message)\n          return []\n        }\n        throw error\n      }\n      return data || []\n    } catch (error: unknown) {\n      // Gérer les erreurs de table inexistante ou erreurs 400\n      const errorObj = error as { code?: string; status?: number; message?: string }\n      if (\n        errorObj?.code === 'PGRST116' ||\n        errorObj?.code === '42P01' ||\n        errorObj?.code === 'PGRST301' ||\n        errorObj?.status === 400 ||\n        errorObj?.code === '400' ||\n        errorObj?.message?.includes('relation') ||\n        errorObj?.message?.includes('relationship') ||\n        errorObj?.message?.includes('does not exist') ||\n        errorObj?.message?.includes('schema cache')\n      ) {\n        console.warn('Table course_enrollments does not exist yet or invalid query:', errorObj?.message || String(error))\n        return []\n      }\n      throw error\n    }\n  }\n\n  async getCourseEnrollments(courseId: string) {\n    const { data, error } = await this.supabase\n      .from('course_enrollments')\n      .select(`\n        *,\n        student:users(id, full_name, email)\n      `)\n      .eq('course_id', courseId)\n      .order('enrolled_at', { ascending: false })\n\n    if (error) throw error\n    return data\n  }\n\n  async updateEnrollment(id: string, updates: TableUpdate<'course_enrollments'>) {\n    const { data, error } = await this.supabase\n      .from('course_enrollments')\n      .update(updates)\n      .eq('id', id)\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  private async incrementCourseStudentCount(courseId: string) {\n    const { data: course } = await this.supabase\n      .from('courses')\n      .select('total_students')\n      .eq('id', courseId)\n      .single()\n\n    if (course) {\n      await this.supabase\n        .from('courses')\n        .update({ total_students: (course.total_students || 0) + 1 })\n        .eq('id', courseId)\n    }\n  }\n\n  // ========== LESSON PROGRESS ==========\n\n  async getLessonProgress(lessonId: string, studentId: string) {\n    const { data, error } = await this.supabase\n      .from('lesson_progress')\n      .select('*')\n      .eq('lesson_id', lessonId)\n      .eq('student_id', studentId)\n      .maybeSingle()\n\n    if (error) throw error\n    return data\n  }\n\n  async updateLessonProgress(\n    lessonId: string,\n    studentId: string,\n    updates: Partial<LessonProgress>\n  ) {\n    // Vérifier si une progression existe déjà\n    const existing = await this.getLessonProgress(lessonId, studentId)\n\n    if (existing) {\n      const { data, error } = await this.supabase\n        .from('lesson_progress')\n        .update({\n          ...updates,\n          last_accessed_at: new Date().toISOString(),\n        })\n        .eq('id', existing.id)\n        .select()\n        .single()\n\n      if (error) throw error\n      return data\n    } else {\n      const { data, error } = await this.supabase\n        .from('lesson_progress')\n        .insert({\n          lesson_id: lessonId,\n          student_id: studentId,\n          ...updates,\n          started_at: new Date().toISOString(),\n          last_accessed_at: new Date().toISOString(),\n        })\n        .select()\n        .single()\n\n      if (error) throw error\n      return data\n    }\n  }\n\n  async markLessonAsCompleted(lessonId: string, studentId: string) {\n    return this.updateLessonProgress(lessonId, studentId, {\n      is_completed: true,\n      completion_percentage: 100,\n      completed_at: new Date().toISOString(),\n    })\n  }\n\n  // ========== QUIZZES ==========\n\n  async getQuiz(quizId: string) {\n    const { data, error } = await this.supabase\n      .from('quizzes')\n      .select('*, questions:quiz_questions(*)')\n      .eq('id', quizId)\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  async createQuiz(quiz: TableInsert<'quizzes'>) {\n    const { data, error } = await this.supabase\n      .from('quizzes')\n      .insert(quiz)\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  async createQuizQuestion(question: TableInsert<'quiz_questions'>) {\n    const { data, error } = await this.supabase\n      .from('quiz_questions')\n      .insert(question)\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  async submitQuizAttempt(attempt: TableInsert<'quiz_attempts'>) {\n    // Calculer le score\n    const quiz = await this.getQuiz(attempt.quiz_id)\n    if (!quiz || !quiz.questions) {\n      throw new Error('Quiz non trouvé')\n    }\n\n    const questions = quiz.questions as Array<{ id: string; question_type: string; options?: unknown[]; correct_answer?: unknown }>\n    const answers = attempt.answers as Record<string, unknown>\n    let correctCount = 0\n    const totalQuestions = questions.length\n\n    questions.forEach((question: { id: string; question_type: string; options?: unknown[]; correct_answer?: unknown }) => {\n      const studentAnswer = answers[question.id]\n      const typedQuestion = {\n        question_type: question.question_type,\n        options: question.options as Array<{ is_correct?: boolean; text?: string }> | undefined,\n        correct_answer: question.correct_answer,\n      }\n      if (this.isAnswerCorrect(typedQuestion, studentAnswer)) {\n        correctCount++\n      }\n    })\n\n    const score = totalQuestions > 0 ? (correctCount / totalQuestions) * 100 : 0\n    const isPassed = score >= (quiz.passing_score || 70)\n\n    const { data, error } = await this.supabase\n      .from('quiz_attempts')\n      .insert({\n        ...attempt,\n        score,\n        total_questions: totalQuestions,\n        correct_answers: correctCount,\n        is_passed: isPassed,\n        completed_at: new Date().toISOString(),\n      })\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  private isAnswerCorrect(question: { question_type: string; options?: Array<{ is_correct?: boolean; text?: string }>; correct_answer?: unknown }, studentAnswer: unknown): boolean {\n    switch (question.question_type) {\n      case 'multiple_choice':\n        const options = question.options as Array<{ is_correct?: boolean; text?: string }> | undefined\n        const correctOption = options?.find((opt) => opt.is_correct)\n        return studentAnswer === correctOption?.text\n      case 'true_false':\n        return studentAnswer === question.correct_answer\n      case 'short_answer':\n        const studentStr = String(studentAnswer || '').toLowerCase().trim()\n        const correctStr = String(question.correct_answer || '').toLowerCase().trim()\n        return studentStr === correctStr\n      default:\n        return false\n    }\n  }\n\n  async getStudentQuizAttempts(quizId: string, studentId: string) {\n    const { data, error } = await this.supabase\n      .from('quiz_attempts')\n      .select('*')\n      .eq('quiz_id', quizId)\n      .eq('student_id', studentId)\n      .order('started_at', { ascending: false })\n\n    if (error) throw error\n    return data\n  }\n\n  // ========== ASSIGNMENTS ==========\n\n  async getCourseAssignments(courseId: string) {\n    const { data, error } = await this.supabase\n      .from('assignments')\n      .select('*')\n      .eq('course_id', courseId)\n      .order('created_at', { ascending: false })\n\n    if (error) throw error\n    return data\n  }\n\n  async createAssignment(assignment: TableInsert<'assignments'>) {\n    const { data, error } = await this.supabase\n      .from('assignments')\n      .insert(assignment)\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  async submitAssignment(submission: TableInsert<'assignment_submissions'>) {\n    const { data, error } = await this.supabase\n      .from('assignment_submissions')\n      .insert(submission)\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  async gradeAssignment(\n    submissionId: string,\n    score: number,\n    feedback: string,\n    gradedBy: string\n  ) {\n    const { data, error } = await this.supabase\n      .from('assignment_submissions')\n      .update({\n        score,\n        feedback,\n        graded_by: gradedBy,\n        graded_at: new Date().toISOString(),\n        status: 'graded',\n      })\n      .eq('id', submissionId)\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  // ========== CERTIFICATES ==========\n\n  async generateCertificate(courseId: string, studentId: string) {\n    // Vérifier que l'étudiant a complété le cours\n    const { data: enrollment } = await this.supabase\n      .from('course_enrollments')\n      .select('*')\n      .eq('course_id', courseId)\n      .eq('student_id', studentId)\n      .eq('enrollment_status', 'completed')\n      .maybeSingle()\n\n    if (!enrollment) {\n      throw new Error('Le cours doit être complété pour générer un certificat')\n    }\n\n    // Vérifier si un certificat existe déjà\n    const { data: existing } = await this.supabase\n      .from('course_certificates')\n      .select('*')\n      .eq('course_id', courseId)\n      .eq('student_id', studentId)\n      .maybeSingle()\n\n    if (existing) {\n      return existing\n    }\n\n    // Créer le certificat (le numéro sera généré automatiquement par le trigger)\n    const { data, error } = await this.supabase\n      .from('course_certificates')\n      .insert({\n        course_id: courseId,\n        student_id: studentId,\n        enrollment_id: enrollment.id,\n        certificate_number: '', // Sera remplacé par le trigger\n      } as any)\n      .select()\n      .single()\n\n    if (error) throw error\n\n    // TODO: Générer le PDF du certificat et uploader vers Supabase Storage\n    // Pour l'instant, on retourne juste l'enregistrement\n\n    return data\n  }\n\n  async getStudentCertificates(studentId: string) {\n    const { data, error } = await this.supabase\n      .from('course_certificates')\n      .select('*, course:courses(*)')\n      .eq('student_id', studentId)\n      .order('issued_at', { ascending: false })\n\n    if (error) throw error\n    return data\n  }\n\n  // ========== REVIEWS ==========\n\n  async createReview(review: TableInsert<'course_reviews'>) {\n    const { data, error } = await this.supabase\n      .from('course_reviews')\n      .insert(review)\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  async getCourseReviews(courseId: string) {\n    const { data, error } = await this.supabase\n      .from('course_reviews')\n      .select('*, student:users(id, full_name, email)')\n      .eq('course_id', courseId)\n      .order('created_at', { ascending: false })\n\n    if (error) throw error\n    return data\n  }\n\n  async getCourseRatingStats(courseId: string) {\n    const { data, error } = await this.supabase\n      .from('course_reviews')\n      .select('rating')\n      .eq('course_id', courseId)\n\n    if (error) throw error\n\n    const stats = {\n      total: data.length,\n      average: 0,\n      distribution: { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0 },\n    }\n\n    if (data.length > 0) {\n      const ratings = data.map((r) => r.rating).filter(Boolean) as number[]\n      stats.average = ratings.reduce((a, b) => a + b, 0) / ratings.length\n\n      ratings.forEach((rating) => {\n        stats.distribution[rating as keyof typeof stats.distribution]++\n      })\n    }\n\n    return stats\n  }\n}\n\nexport const elearningService = new ELearningService()\n"],"names":[],"mappings":"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","ignoreList":[0,1]}