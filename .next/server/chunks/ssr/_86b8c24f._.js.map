{"version":3,"sources":["../../../../node_modules/lucide-react/src/icons/clock.ts","../../../../node_modules/lucide-react/src/icons/mail.ts","../../../../node_modules/lucide-react/src/icons/play.ts","../../../../lib/services/email-template.service.ts","../../../../node_modules/lucide-react/src/icons/pause.ts","../../../../lib/services/email-schedule.service.ts","../../../../app/%28dashboard%29/dashboard/sessions/%5Bid%5D/sections/gestion-automatisation.tsx"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Clock\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8cG9seWxpbmUgcG9pbnRzPSIxMiA2IDEyIDEyIDE2IDE0IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/clock\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Clock = createLucideIcon('Clock', [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['polyline', { points: '12 6 12 12 16 14', key: '68esgv' }],\n]);\n\nexport default Clock;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Mail\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iMjAiIGhlaWdodD0iMTYiIHg9IjIiIHk9IjQiIHJ4PSIyIiAvPgogIDxwYXRoIGQ9Im0yMiA3LTguOTcgNS43YTEuOTQgMS45NCAwIDAgMS0yLjA2IDBMMiA3IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/mail\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Mail = createLucideIcon('Mail', [\n  ['rect', { width: '20', height: '16', x: '2', y: '4', rx: '2', key: '18n3k1' }],\n  ['path', { d: 'm22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7', key: '1ocrg3' }],\n]);\n\nexport default Mail;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Play\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cG9seWdvbiBwb2ludHM9IjUgMyAxOSAxMiA1IDIxIDUgMyIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/play\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Play = createLucideIcon('Play', [\n  ['polygon', { points: '5 3 19 12 5 21 5 3', key: '191637' }],\n]);\n\nexport default Play;\n","import { createClient } from '@/lib/supabase/client'\nimport type { SupabaseClient } from '@supabase/supabase-js'\nimport type { TableRow } from '@/lib/types/supabase-helpers'\n\nexport type EmailTemplate = TableRow<'email_templates'>\n\nexport type EmailType = \n  | 'document_generated' \n  | 'invoice_sent' \n  | 'payment_reminder' \n  | 'notification' \n  | 'enrollment_confirmation'\n  | 'session_reminder'\n  | 'certificate_issued'\n  | 'custom'\n\nexport interface CreateEmailTemplateInput {\n  organization_id: string\n  email_type: EmailType\n  name: string\n  subject: string\n  body_html: string\n  body_text?: string\n  available_variables?: string[]\n  is_default?: boolean\n  is_active?: boolean\n  description?: string\n  metadata?: Record<string, any>\n}\n\nexport interface UpdateEmailTemplateInput {\n  name?: string\n  subject?: string\n  body_html?: string\n  body_text?: string\n  available_variables?: string[]\n  is_default?: boolean\n  is_active?: boolean\n  description?: string\n  metadata?: Record<string, any>\n}\n\nclass EmailTemplateService {\n  private supabase: SupabaseClient<any>\n\n\n  constructor(supabaseClient?: SupabaseClient<any>) {\n\n    this.supabase = supabaseClient || createClient()\n\n  }\n\n  /**\n   * Récupérer tous les modèles d'une organisation\n   */\n  async getAll(organizationId: string): Promise<EmailTemplate[]> {\n    const { data, error } = await this.supabase\n      .from('email_templates')\n      .select('*')\n      .eq('organization_id', organizationId)\n      .eq('is_active', true)\n      .order('email_type', { ascending: true })\n      .order('is_default', { ascending: false })\n      .order('created_at', { ascending: false })\n\n    if (error) throw error\n    return data || []\n  }\n\n  /**\n   * Récupérer les modèles par type\n   */\n  async getByType(organizationId: string, emailType: EmailType): Promise<EmailTemplate[]> {\n    const { data, error } = await this.supabase\n      .from('email_templates')\n      .select('*')\n      .eq('organization_id', organizationId)\n      .eq('email_type', emailType)\n      .eq('is_active', true)\n      .order('is_default', { ascending: false })\n      .order('created_at', { ascending: false })\n\n    if (error) throw error\n    return data || []\n  }\n\n  /**\n   * Récupérer le modèle par défaut pour un type\n   */\n  async getDefault(organizationId: string, emailType: EmailType): Promise<EmailTemplate | null> {\n    const { data, error } = await this.supabase\n      .from('email_templates')\n      .select('*')\n      .eq('organization_id', organizationId)\n      .eq('email_type', emailType)\n      .eq('is_default', true)\n      .eq('is_active', true)\n      .maybeSingle()\n\n    if (error) throw error\n    return data\n  }\n\n  /**\n   * Récupérer un modèle par ID\n   */\n  async getById(id: string): Promise<EmailTemplate | null> {\n    const { data, error } = await this.supabase\n      .from('email_templates')\n      .select('*')\n      .eq('id', id)\n      .maybeSingle()\n\n    if (error) throw error\n    return data\n  }\n\n  /**\n   * Créer un nouveau modèle\n   */\n  async create(input: CreateEmailTemplateInput, userId: string): Promise<EmailTemplate> {\n    // Si ce modèle est marqué comme défaut, désactiver les autres modèles par défaut du même type\n    if (input.is_default) {\n      await this.unsetOtherDefaults(input.organization_id, input.email_type)\n    }\n\n    const { data, error } = await this.supabase\n      .from('email_templates')\n      .insert({\n        ...input,\n        created_by: userId,\n        available_variables: input.available_variables || [],\n      })\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  /**\n   * Mettre à jour un modèle\n   */\n  async update(id: string, input: UpdateEmailTemplateInput): Promise<EmailTemplate> {\n    // Récupérer le modèle actuel pour connaître son type\n    const current = await this.getById(id)\n    if (!current) throw new Error('Modèle non trouvé')\n\n    // Si ce modèle est marqué comme défaut, désactiver les autres modèles par défaut du même type\n    if (input.is_default) {\n      await this.unsetOtherDefaults(current.organization_id, current.email_type as EmailType, id)\n    }\n\n    const { data, error } = await this.supabase\n      .from('email_templates')\n      .update(input)\n      .eq('id', id)\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  /**\n   * Supprimer un modèle (soft delete en désactivant)\n   */\n  async delete(id: string): Promise<void> {\n    const { error } = await this.supabase\n      .from('email_templates')\n      .update({ is_active: false })\n      .eq('id', id)\n\n    if (error) throw error\n  }\n\n  /**\n   * Supprimer définitivement un modèle\n   */\n  async deletePermanently(id: string): Promise<void> {\n    const { error } = await this.supabase\n      .from('email_templates')\n      .delete()\n      .eq('id', id)\n\n    if (error) throw error\n  }\n\n  /**\n   * Désactiver les autres modèles par défaut du même type\n   */\n  private async unsetOtherDefaults(\n    organizationId: string, \n    emailType: EmailType, \n    excludeId?: string\n  ): Promise<void> {\n    let query = this.supabase\n      .from('email_templates')\n      .update({ is_default: false })\n      .eq('organization_id', organizationId)\n      .eq('email_type', emailType)\n      .eq('is_default', true)\n\n    if (excludeId) {\n      query = query.neq('id', excludeId)\n    }\n\n    const { error } = await query\n    if (error) throw error\n  }\n\n  /**\n   * Remplacer les variables dans un template\n   */\n  replaceVariables(template: string, variables: Record<string, string | number | undefined>): string {\n    let result = template\n    for (const [key, value] of Object.entries(variables)) {\n      const regex = new RegExp(`\\\\{${key}\\\\}`, 'g')\n      result = result.replace(regex, value?.toString() || '')\n    }\n    return result\n  }\n\n  /**\n   * Obtenir les types d'emails disponibles avec leurs labels\n   */\n  getEmailTypes(): Array<{ value: EmailType; label: string; description: string; defaultVariables: string[] }> {\n    return [\n      {\n        value: 'document_generated',\n        label: 'Document généré',\n        description: 'Email envoyé lors de la génération d\\'un document',\n        defaultVariables: ['student_name', 'document_title', 'document_type', 'organization_name', 'document_url'],\n      },\n      {\n        value: 'invoice_sent',\n        label: 'Facture envoyée',\n        description: 'Email envoyé lors de l\\'envoi d\\'une facture',\n        defaultVariables: ['student_name', 'invoice_number', 'invoice_amount', 'due_date', 'organization_name', 'invoice_url'],\n      },\n      {\n        value: 'payment_reminder',\n        label: 'Rappel de paiement',\n        description: 'Email de rappel pour un paiement en attente',\n        defaultVariables: ['student_name', 'invoice_number', 'invoice_amount', 'due_date', 'days_overdue', 'organization_name'],\n      },\n      {\n        value: 'enrollment_confirmation',\n        label: 'Confirmation d\\'inscription',\n        description: 'Email de confirmation d\\'inscription à une session',\n        defaultVariables: ['student_name', 'session_name', 'session_start_date', 'session_location', 'organization_name'],\n      },\n      {\n        value: 'session_reminder',\n        label: 'Rappel de session',\n        description: 'Email de rappel avant une session',\n        defaultVariables: ['student_name', 'session_name', 'session_date', 'session_time', 'session_location', 'organization_name'],\n      },\n      {\n        value: 'certificate_issued',\n        label: 'Certificat délivré',\n        description: 'Email lors de la délivrance d\\'un certificat',\n        defaultVariables: ['student_name', 'certificate_name', 'certificate_date', 'organization_name', 'certificate_url'],\n      },\n      {\n        value: 'notification',\n        label: 'Notification générale',\n        description: 'Notification générale personnalisée',\n        defaultVariables: ['recipient_name', 'message', 'organization_name', 'action_url'],\n      },\n      {\n        value: 'custom',\n        label: 'Personnalisé',\n        description: 'Modèle d\\'email personnalisé',\n        defaultVariables: [],\n      },\n    ]\n  }\n}\n\nexport const emailTemplateService = new EmailTemplateService()\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Pause\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iNCIgaGVpZ2h0PSIxNiIgeD0iNiIgeT0iNCIgLz4KICA8cmVjdCB3aWR0aD0iNCIgaGVpZ2h0PSIxNiIgeD0iMTQiIHk9IjQiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/pause\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Pause = createLucideIcon('Pause', [\n  ['rect', { width: '4', height: '16', x: '6', y: '4', key: 'iffhe4' }],\n  ['rect', { width: '4', height: '16', x: '14', y: '4', key: 'sjin7j' }],\n]);\n\nexport default Pause;\n","/**\n * Service pour gérer la planification et l'automatisation d'envoi d'emails\n */\n\nimport { createClient } from '@/lib/supabase/client'\nimport type { SupabaseClient } from '@supabase/supabase-js'\nimport type { Database } from '@/types/database.types'\nimport type { EmailTemplate } from './email-template.service'\n\ntype EmailSchedule = Database['public']['Tables']['email_schedules']['Row']\ntype EmailScheduleInsert = Database['public']['Tables']['email_schedules']['Insert']\ntype EmailScheduleUpdate = Database['public']['Tables']['email_schedules']['Update']\ntype EmailScheduleLog = Database['public']['Tables']['email_schedule_logs']['Row']\ntype EmailScheduleLogInsert = Database['public']['Tables']['email_schedule_logs']['Insert']\n\nexport type EmailScheduleTriggerType = \n  | 'before_session_start'\n  | 'after_session_end'\n  | 'before_evaluation_start'\n  | 'after_evaluation_end'\n  | 'fixed_date'\n\nexport type EmailScheduleTargetType = \n  | 'session'\n  | 'evaluation'\n  | 'student'\n  | 'teacher'\n  | 'all'\n\nexport type DocumentType = \n  | 'convocation'\n  | 'certificat_realisation'\n  | 'evaluation_pre_formation'\n  | 'evaluation_post_formation'\n  | 'attestation'\n  | 'bulletin'\n  | 'releve_notes'\n  | 'certificat_presence'\n\nexport interface CreateEmailScheduleInput {\n  name: string\n  description?: string\n  email_type: string\n  template_id?: string\n  trigger_type: EmailScheduleTriggerType\n  trigger_days?: number\n  trigger_time?: string\n  trigger_datetime?: string\n  target_type: EmailScheduleTargetType\n  session_status?: string[]\n  session_id?: string\n  formation_id?: string\n  program_id?: string\n  is_active?: boolean\n  send_to_students?: boolean\n  send_to_teachers?: boolean\n  send_to_coordinators?: boolean\n  custom_variables?: Record<string, any>\n  send_document?: boolean\n  document_type?: DocumentType\n  document_template_id?: string\n}\n\nexport interface UpdateEmailScheduleInput extends Partial<CreateEmailScheduleInput> {\n  id?: string // Optionnel car passé comme paramètre séparé dans updateSchedule\n}\n\nexport interface EmailScheduleExecutionResult {\n  scheduleId: string\n  status: 'success' | 'failed' | 'partial'\n  totalRecipients: number\n  successfulSends: number\n  failedSends: number\n  errorMessage?: string\n  errorDetails?: Record<string, any>\n}\n\nclass EmailScheduleService {\n  private supabase: SupabaseClient<Database>\n\n\n  constructor(supabaseClient?: SupabaseClient<Database>) {\n\n    this.supabase = supabaseClient || createClient()\n\n  }\n\n  /**\n   * Récupère toutes les règles de planification d'une organisation\n   */\n  async getAllSchedules(organizationId: string, filters?: {\n    isActive?: boolean\n    emailType?: string\n  }) {\n    let query = this.supabase\n      .from('email_schedules')\n      .select('*, email_templates(*)')\n      .eq('organization_id', organizationId)\n      .order('created_at', { ascending: false })\n\n    if (filters?.isActive !== undefined) {\n      query = query.eq('is_active', filters.isActive)\n    }\n\n    if (filters?.emailType) {\n      query = query.eq('email_type', filters.emailType)\n    }\n\n    const { data, error } = await query\n\n    if (error) throw error\n    return data || []\n  }\n\n  /**\n   * Récupère une règle de planification par son ID\n   */\n  async getScheduleById(id: string) {\n    const { data, error } = await this.supabase\n      .from('email_schedules')\n      .select('*, email_templates(*)')\n      .eq('id', id)\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  /**\n   * Crée une nouvelle règle de planification\n   */\n  async createSchedule(organizationId: string, input: CreateEmailScheduleInput) {\n    const { data: user } = await this.supabase.auth.getUser()\n    \n    // Construire l'objet schedule en ne gardant que les champs définis\n    const schedule: Partial<EmailScheduleInsert> = {\n      organization_id: organizationId,\n      name: input.name,\n      email_type: input.email_type,\n      trigger_type: input.trigger_type,\n      target_type: input.target_type,\n      is_active: input.is_active ?? true,\n      send_to_students: input.send_to_students ?? true,\n      send_to_teachers: input.send_to_teachers ?? false,\n      send_to_coordinators: input.send_to_coordinators ?? false,\n    }\n\n    // Ajouter les champs optionnels seulement s'ils sont définis\n    if (input.description !== undefined) {\n      schedule.description = input.description || null\n    }\n    if (input.template_id !== undefined) {\n      schedule.template_id = input.template_id || null\n    }\n    if (input.trigger_days !== undefined) {\n      schedule.trigger_days = input.trigger_days ?? null\n    }\n    if (input.trigger_time !== undefined) {\n      schedule.trigger_time = input.trigger_time || null\n    }\n    if (input.trigger_datetime !== undefined) {\n      schedule.trigger_datetime = input.trigger_datetime || null\n    }\n    if (input.session_status !== undefined) {\n      schedule.session_status = input.session_status || null\n    }\n    if (input.session_id !== undefined) {\n      schedule.session_id = input.session_id || null\n    }\n    if (input.formation_id !== undefined) {\n      schedule.formation_id = input.formation_id || null\n    }\n    if (input.program_id !== undefined) {\n      schedule.program_id = input.program_id || null\n    }\n    if (input.custom_variables !== undefined) {\n      schedule.custom_variables = input.custom_variables || null\n    }\n    if (input.send_document !== undefined) {\n      schedule.send_document = input.send_document ?? false\n    }\n    if (input.document_type !== undefined) {\n      schedule.document_type = input.document_type || null\n    }\n    if (input.document_template_id !== undefined) {\n      schedule.document_template_id = input.document_template_id || null\n    }\n    if (user?.user?.id) {\n      schedule.created_by = user.user.id\n    }\n\n    const { data, error } = await this.supabase\n      .from('email_schedules')\n      .insert(schedule as EmailScheduleInsert)\n      .select()\n      .single()\n\n    if (error) {\n      console.error('Error creating email schedule:', error)\n      throw error\n    }\n    return data\n  }\n\n  /**\n   * Met à jour une règle de planification\n   */\n  async updateSchedule(id: string, input: UpdateEmailScheduleInput) {\n    const update: EmailScheduleUpdate = {\n      name: input.name,\n      description: input.description,\n      email_type: input.email_type,\n      template_id: input.template_id,\n      trigger_type: input.trigger_type,\n      trigger_days: input.trigger_days,\n      trigger_time: input.trigger_time,\n      trigger_datetime: input.trigger_datetime,\n      target_type: input.target_type,\n      session_status: input.session_status,\n      formation_id: input.formation_id,\n      program_id: input.program_id,\n      is_active: input.is_active,\n      send_to_students: input.send_to_students,\n      send_to_teachers: input.send_to_teachers,\n      send_to_coordinators: input.send_to_coordinators,\n      custom_variables: input.custom_variables,\n      send_document: input.send_document,\n      document_type: input.document_type,\n      document_template_id: input.document_template_id,\n    }\n\n    // Supprimer les champs undefined\n    Object.keys(update).forEach(key => {\n      if (update[key as keyof EmailScheduleUpdate] === undefined) {\n        delete update[key as keyof EmailScheduleUpdate]\n      }\n    })\n\n    const { data, error } = await this.supabase\n      .from('email_schedules')\n      .update(update)\n      .eq('id', id)\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  /**\n   * Supprime une règle de planification\n   */\n  async deleteSchedule(id: string) {\n    const { error } = await this.supabase\n      .from('email_schedules')\n      .delete()\n      .eq('id', id)\n\n    if (error) throw error\n  }\n\n  /**\n   * Récupère les règles actives à exécuter\n   */\n  async getActiveSchedulesToExecute() {\n    const { data, error } = await this.supabase\n      .from('email_schedules')\n      .select('*, email_templates(*), organizations(*)')\n      .eq('is_active', true)\n\n    if (error) throw error\n    return data || []\n  }\n\n  /**\n   * Enregistre un log d'exécution\n   */\n  async logExecution(\n    scheduleId: string,\n    organizationId: string,\n    result: EmailScheduleExecutionResult,\n    triggerContext?: Record<string, any>\n  ) {\n    const log: EmailScheduleLogInsert = {\n      schedule_id: scheduleId,\n      organization_id: organizationId,\n      status: result.status,\n      total_recipients: result.totalRecipients,\n      successful_sends: result.successfulSends,\n      failed_sends: result.failedSends,\n      error_message: result.errorMessage || null,\n      error_details: result.errorDetails || null,\n      trigger_context: triggerContext || null,\n    }\n\n    const { data, error } = await this.supabase\n      .from('email_schedule_logs')\n      .insert(log)\n      .select()\n      .single()\n\n    if (error) throw error\n\n    // Mettre à jour les statistiques de la règle\n    // Récupérer la valeur actuelle de total_sent\n    const { data: scheduleData } = await this.supabase\n      .from('email_schedules')\n      .select('total_sent')\n      .eq('id', scheduleId)\n      .single()\n    \n    const currentTotalSent = (scheduleData?.total_sent as number) || 0\n    const newTotalSent = currentTotalSent + result.successfulSends\n\n    await this.supabase\n      .from('email_schedules')\n      .update({\n        last_run_at: new Date().toISOString(),\n        last_run_status: result.status,\n        last_run_error: result.errorMessage || null,\n        total_sent: newTotalSent,\n      })\n      .eq('id', scheduleId)\n\n    return data\n  }\n\n  /**\n   * Récupère l'historique d'exécution d'une règle\n   */\n  async getScheduleLogs(scheduleId: string, limit = 50) {\n    const { data, error } = await this.supabase\n      .from('email_schedule_logs')\n      .select('*')\n      .eq('schedule_id', scheduleId)\n      .order('executed_at', { ascending: false })\n      .limit(limit)\n\n    if (error) throw error\n    return data || []\n  }\n}\n\nexport const emailScheduleService = new EmailScheduleService()\n\n","'use client'\n\nimport { Card, CardContent } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { useToast } from '@/components/ui/toast'\nimport {\n  Mail,\n  Play,\n  Pause,\n  Clock,\n  Calendar,\n  Users,\n  Settings,\n  Info,\n} from 'lucide-react'\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query'\nimport { useAuth } from '@/lib/hooks/use-auth'\nimport { emailScheduleService } from '@/lib/services/email-schedule.service'\nimport { emailTemplateService } from '@/lib/services/email-template.service'\nimport { cn } from '@/lib/utils'\nimport Link from 'next/link'\nimport type { SessionWithRelations } from '@/lib/types/query-types'\n\ninterface GestionAutomatisationProps {\n  sessionId: string\n  sessionData: SessionWithRelations | undefined\n}\n\nexport function GestionAutomatisation({\n  sessionId,\n  sessionData,\n}: GestionAutomatisationProps) {\n  const { user } = useAuth()\n  const queryClient = useQueryClient()\n  const { addToast } = useToast()\n\n  // Récupérer les règles de planification pertinentes pour cette session\n  // Affiche : règles liées à cette session OU règles générales (sans session_id spécifique)\n  const { data: schedules, isLoading } = useQuery({\n    queryKey: ['email-schedules', user?.organization_id, sessionId],\n    queryFn: async () => {\n      if (!user?.organization_id) throw new Error('Organization ID manquant')\n      const allSchedules = await emailScheduleService.getAllSchedules(user.organization_id)\n      \n      // Filtrer les règles pertinentes pour cette session\n      return allSchedules.filter((schedule: any) => {\n        // Règles liées directement à cette session\n        if (schedule.session_id === sessionId) {\n          return true\n        }\n        \n        // Règles générales (sans session_id spécifique) qui peuvent s'appliquer à toutes les sessions\n        // On affiche toutes les règles générales pour que l'utilisateur puisse les activer s'il le souhaite\n        if (!schedule.session_id && (schedule.target_type === 'session' || schedule.target_type === 'all')) {\n          return true\n        }\n        \n        return false\n      })\n    },\n    enabled: !!user?.organization_id && !!sessionId,\n  })\n\n  // Récupérer les templates d'emails pour afficher les noms\n  const { data: emailTemplates } = useQuery({\n    queryKey: ['email-templates', user?.organization_id],\n    queryFn: async () => {\n      if (!user?.organization_id) throw new Error('Organization ID manquant')\n      return emailTemplateService.getAll(user.organization_id)\n    },\n    enabled: !!user?.organization_id,\n  })\n\n  // Mutation pour activer/désactiver une règle\n  const toggleActiveMutation = useMutation({\n    mutationFn: async ({ id, isActive }: { id: string; isActive: boolean }) => {\n      return emailScheduleService.updateSchedule(id, { is_active: isActive })\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['email-schedules'] })\n      addToast({\n        title: 'Règle mise à jour',\n        description: 'Le statut de la règle a été mis à jour.',\n        type: 'success',\n      })\n    },\n    onError: (error: Error) => {\n      addToast({\n        title: 'Erreur',\n        description: error.message || 'Erreur lors de la mise à jour de la règle.',\n        type: 'error',\n      })\n    },\n  })\n\n  const activeSchedules = schedules?.filter((s) => s.is_active) || []\n  const inactiveSchedules = schedules?.filter((s) => !s.is_active) || []\n\n  if (isLoading) {\n    return (\n      <Card>\n        <CardContent className=\"py-12 text-center\">\n          <p className=\"text-gray-500\">Chargement des règles...</p>\n        </CardContent>\n      </Card>\n    )\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* En-tête */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-gray-900\">Automatisation d'emails</h2>\n          <p className=\"text-gray-600 mt-1\">\n            Activez ou désactivez les règles d'automatisation créées dans les paramètres\n          </p>\n        </div>\n        <Link href=\"/dashboard/settings/email-schedules\">\n          <Button\n            variant=\"outline\"\n            className=\"border-brand-blue text-brand-blue hover:bg-brand-blue hover:text-white\"\n          >\n            <Settings className=\"h-4 w-4 mr-2\" />\n            Gérer les règles\n          </Button>\n        </Link>\n      </div>\n\n      {/* Message d'information */}\n      <Card className=\"bg-blue-50 border-blue-200\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex items-start gap-3\">\n            <Info className=\"h-5 w-5 text-blue-600 mt-0.5\" />\n            <div>\n              <p className=\"text-sm text-blue-900 font-medium mb-1\">\n                Gestion des règles d'automatisation\n              </p>\n              <p className=\"text-sm text-blue-800\">\n                Cette page affiche les règles d'automatisation pertinentes pour cette session (règles spécifiques à cette session et règles générales). \n                Les règles doivent être créées dans les paramètres de l'application. \n                Depuis cette page, vous pouvez uniquement activer ou désactiver les règles existantes.\n                Pour créer, modifier ou supprimer une règle, utilisez le bouton \"Gérer les règles\" ci-dessus.\n              </p>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Liste des règles actives */}\n      {activeSchedules.length > 0 && (\n        <div>\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2\">\n            <Play className=\"h-5 w-5 text-green-600\" />\n            Règles actives ({activeSchedules.length})\n          </h3>\n          <div className=\"grid gap-4\">\n            {activeSchedules.map((schedule: any) => {\n              const template = emailTemplates?.find((t: any) => t.id === schedule.template_id)\n              return (\n                <ScheduleCard\n                  key={schedule.id}\n                  schedule={schedule}\n                  template={template}\n                  onToggleActive={(id, isActive) => {\n                    toggleActiveMutation.mutate({ id, isActive })\n                  }}\n                />\n              )\n            })}\n          </div>\n        </div>\n      )}\n\n      {/* Liste des règles inactives */}\n      {inactiveSchedules.length > 0 && (\n        <div className=\"mt-8\">\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2\">\n            <Pause className=\"h-5 w-5 text-gray-400\" />\n            Règles inactives ({inactiveSchedules.length})\n          </h3>\n          <div className=\"grid gap-4\">\n            {inactiveSchedules.map((schedule: any) => {\n              const template = emailTemplates?.find((t: any) => t.id === schedule.template_id)\n              return (\n                <ScheduleCard\n                  key={schedule.id}\n                  schedule={schedule}\n                  template={template}\n                  onToggleActive={(id, isActive) => {\n                    toggleActiveMutation.mutate({ id, isActive })\n                  }}\n                />\n              )\n            })}\n          </div>\n        </div>\n      )}\n\n      {/* Message si aucune règle */}\n      {(!schedules || schedules.length === 0) && (\n        <Card>\n          <CardContent className=\"py-12 text-center\">\n            <Mail className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\n              Aucune règle d'automatisation\n            </h3>\n            <p className=\"text-gray-600 mb-6\">\n              Créez votre première règle dans les paramètres de l'application.\n            </p>\n            <Link href=\"/dashboard/settings/email-schedules\">\n              <Button className=\"bg-brand-blue hover:bg-brand-blue/90\">\n                <Settings className=\"h-4 w-4 mr-2\" />\n                Créer une règle\n              </Button>\n            </Link>\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  )\n}\n\n// Composant simplifié pour afficher une règle (sans édition ni suppression)\nfunction ScheduleCard({\n  schedule,\n  template,\n  onToggleActive,\n}: {\n  schedule: any\n  template?: any\n  onToggleActive: (id: string, isActive: boolean) => void\n}) {\n  return (\n    <Card className={cn(!schedule.is_active && 'opacity-60')}>\n      <CardContent className=\"p-6\">\n        <div className=\"flex items-start justify-between\">\n          <div className=\"flex-1\">\n            <div className=\"flex items-center gap-3 mb-2\">\n              <h3 className=\"text-lg font-semibold text-gray-900\">{schedule.name}</h3>\n              {schedule.is_active ? (\n                <span className=\"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full\">\n                  Active\n                </span>\n              ) : (\n                <span className=\"px-2 py-1 text-xs font-medium bg-gray-100 text-gray-600 rounded-full\">\n                  Inactive\n                </span>\n              )}\n            </div>\n\n            {schedule.description && (\n              <p className=\"text-gray-600 mb-4\">{schedule.description}</p>\n            )}\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm\">\n              <div className=\"flex items-center gap-2 text-gray-600\">\n                <Mail className=\"h-4 w-4\" />\n                <span>\n                  Type: <span className=\"font-medium text-gray-900\">{schedule.email_type}</span>\n                </span>\n              </div>\n              <div className=\"flex items-center gap-2 text-gray-600\">\n                <Clock className=\"h-4 w-4\" />\n                <span>\n                  Déclencheur: <span className=\"font-medium text-gray-900\">{schedule.trigger_type}</span>\n                </span>\n              </div>\n              {schedule.trigger_days !== null && schedule.trigger_days !== undefined && (\n                <div className=\"flex items-center gap-2 text-gray-600\">\n                  <Calendar className=\"h-4 w-4\" />\n                  <span>\n                    {schedule.trigger_days > 0 ? '+' : ''}\n                    {schedule.trigger_days} jour(s)\n                    {schedule.trigger_time && ` à ${schedule.trigger_time}`}\n                  </span>\n                </div>\n              )}\n              {template && (\n                <div className=\"flex items-center gap-2 text-gray-600\">\n                  <Settings className=\"h-4 w-4\" />\n                  <span>Template: {template.name}</span>\n                </div>\n              )}\n            </div>\n\n            <div className=\"mt-4 flex flex-wrap gap-2\">\n              {schedule.send_to_students && (\n                <span className=\"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded\">\n                  Étudiants\n                </span>\n              )}\n              {schedule.send_to_teachers && (\n                <span className=\"px-2 py-1 text-xs bg-purple-100 text-purple-800 rounded\">\n                  Enseignants\n                </span>\n              )}\n              {schedule.send_to_coordinators && (\n                <span className=\"px-2 py-1 text-xs bg-orange-100 text-orange-800 rounded\">\n                  Coordinateurs\n                </span>\n              )}\n            </div>\n          </div>\n\n          <div className=\"flex items-center gap-2 ml-4\">\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => onToggleActive(schedule.id, !schedule.is_active)}\n              title={schedule.is_active ? 'Désactiver' : 'Activer'}\n            >\n              {schedule.is_active ? <Pause className=\"h-4 w-4\" /> : <Play className=\"h-4 w-4\" />}\n            </Button>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  )\n}\n"],"names":[],"mappings":"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","ignoreList":[0,1,2,4]}