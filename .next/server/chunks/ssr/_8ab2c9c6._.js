module.exports=[953722,a=>{"use strict";let b=(0,a.i(170106).default)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);a.s(["BookOpen",()=>b],953722)},495756,a=>{"use strict";let b=(0,a.i(170106).default)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckCircle",()=>b],495756)},54018,a=>{"use strict";let b=(0,a.i(170106).default)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);a.s(["XCircle",()=>b],54018)},546842,a=>{"use strict";let b=(0,a.i(170106).default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);a.s(["User",()=>b],546842)},603314,a=>{"use strict";let b=(0,a.i(170106).default)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);a.s(["Shield",()=>b],603314)},727163,a=>{"use strict";var b=a.i(183160);let c=new Map;function d(a){let d=a||"anonymous",e=c.get(d);if(e)return e;let f={};a&&(f["x-learner-student-id"]=a);let g=(0,b.createClient)("https://ocdlaouymksskmmhmzdr.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9jZGxhb3V5bWtzc2ttbWhtemRyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMwNjEzOTksImV4cCI6MjA3ODYzNzM5OX0.5--WO4j5r1eC6_NqfFbWnyKVDeQqDk5RkhqL91T4wjE",{global:{headers:f},auth:{persistSession:!1,autoRefreshToken:!1,detectSessionInUrl:!1,storage:{getItem:a=>null,setItem:(a,b)=>{},removeItem:a=>{}},storageKey:`sb-learner-auth-token-${d}`}});return c.set(d,g),g}a.s(["createLearnerClient",()=>d])},205987,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944);a.i(460355);var e=a.i(346271),f=a.i(526017),g=a.i(495756),h=a.i(54018),i=a.i(546842),j=a.i(953722),k=a.i(603314),l=a.i(340695),m=a.i(238246),n=a.i(727163),o=a.i(325383);function p(){let a=(0,d.useParams)(),p=(0,d.useRouter)(),q=a.id,[r,s]=(0,c.useState)("validating"),[t,u]=(0,c.useState)("");return(0,c.useEffect)(()=>{let a=async()=>{if(o.logger.info("Learner Access - Validating student ID",{hasStudentId:!!q}),!q||!/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(q)){o.logger.warn("Learner Access - Invalid student ID format"),s("invalid"),u("Format de lien invalide");return}try{let a=(0,n.createLearnerClient)(q),{data:b,error:c}=await a.from("students").select("id, first_name, last_name, status").eq("id",q).maybeSingle();if(c||!b){o.logger.error("Learner Access - Student not found",c,{studentId:(0,o.maskId)(q),error:(0,o.sanitizeError)(c)}),s("invalid"),u("Étudiant introuvable. Ce lien peut avoir expiré ou être invalide.");return}if("active"!==b.status){o.logger.warn("Learner Access - Student not active",{studentId:(0,o.maskId)(q),status:b.status}),s("invalid"),u("Votre compte n'est pas actif. Contactez votre formateur.");return}o.logger.info("Learner Access - Student validated successfully"),s("redirecting"),p.replace("/learner");let d=setTimeout(()=>{},1e3);return()=>clearTimeout(d)}catch(a){o.logger.error("Learner Access - Error validating student",a,{studentId:(0,o.maskId)(q),error:(0,o.sanitizeError)(a)}),s("invalid"),u("Erreur lors de la validation de votre accès. Veuillez réessayer.")}};q&&a()},[q,p]),(0,b.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4",children:[(0,b.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,b.jsx)("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-blue-500/20 rounded-full blur-3xl"}),(0,b.jsx)("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-indigo-500/20 rounded-full blur-3xl"})]}),(0,b.jsxs)(e.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative z-10 bg-white/10 backdrop-blur-xl rounded-3xl p-8 md:p-12 max-w-md w-full border border-white/20 shadow-2xl",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"eduzen"}),(0,b.jsx)("p",{className:"text-blue-200/80",children:"Espace Apprenant"})]}),"validating"===r&&(0,b.jsxs)(e.motion.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center",children:[(0,b.jsx)("div",{className:"w-20 h-20 bg-blue-500/20 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,b.jsx)(f.Loader2,{className:"w-10 h-10 text-blue-400 animate-spin"})}),(0,b.jsx)("h2",{className:"text-xl font-semibold text-white mb-2",children:"Vérification en cours..."}),(0,b.jsx)("p",{className:"text-blue-200/70",children:"Nous préparons votre espace personnel"})]}),"valid"===r&&(0,b.jsxs)(e.motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center",children:[(0,b.jsx)("div",{className:"w-20 h-20 bg-emerald-500/20 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,b.jsx)(g.CheckCircle,{className:"w-10 h-10 text-emerald-400"})}),(0,b.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:"Bienvenue !"}),(0,b.jsx)("p",{className:"text-blue-200/70 text-sm",children:"Redirection vers votre espace personnel..."}),(0,b.jsx)("div",{className:"mt-4 flex justify-center",children:(0,b.jsx)("div",{className:"flex gap-1",children:[0,1,2].map(a=>(0,b.jsx)(e.motion.div,{initial:{opacity:.3},animate:{opacity:[.3,1,.3]},transition:{duration:1,repeat:1/0,delay:.2*a},className:"w-2 h-2 bg-blue-400 rounded-full"},a))})})]}),"redirecting"===r&&(0,b.jsxs)(e.motion.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center",children:[(0,b.jsx)("div",{className:"w-20 h-20 bg-blue-500/20 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,b.jsx)(j.BookOpen,{className:"w-10 h-10 text-blue-400"})}),(0,b.jsx)("h2",{className:"text-xl font-semibold text-white mb-2",children:"Accès à votre espace..."}),(0,b.jsx)("p",{className:"text-blue-200/70",children:"Vous allez être redirigé automatiquement"}),(0,b.jsx)("div",{className:"mt-6",children:(0,b.jsx)(l.Button,{className:"w-full bg-white/10 hover:bg-white/15 border border-white/20 text-white",onClick:()=>{},children:"Continuer"})})]}),"invalid"===r&&(0,b.jsxs)(e.motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center",children:[(0,b.jsx)("div",{className:"w-20 h-20 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,b.jsx)(h.XCircle,{className:"w-10 h-10 text-red-400"})}),(0,b.jsx)("h2",{className:"text-xl font-semibold text-white mb-2",children:"Lien invalide"}),(0,b.jsx)("p",{className:"text-red-200/70 mb-6",children:t}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("p",{className:"text-blue-200/60 text-sm",children:"Ce lien peut avoir expiré ou a été désactivé. Contactez votre formateur pour obtenir un nouveau lien."}),(0,b.jsx)(m.default,{href:"/auth/login",children:(0,b.jsxs)(l.Button,{variant:"outline",className:"w-full border-white/20 text-white hover:bg-white/10",children:[(0,b.jsx)(i.User,{className:"w-4 h-4 mr-2"}),"Se connecter autrement"]})})]})]}),(0,b.jsx)("div",{className:"mt-8 pt-6 border-t border-white/10",children:(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2 text-blue-200/50 text-xs",children:[(0,b.jsx)(k.Shield,{className:"w-4 h-4"}),(0,b.jsx)("span",{children:"Accès sécurisé"})]})})]})]})}a.s(["default",()=>p])}];

//# sourceMappingURL=_8ab2c9c6._.js.map