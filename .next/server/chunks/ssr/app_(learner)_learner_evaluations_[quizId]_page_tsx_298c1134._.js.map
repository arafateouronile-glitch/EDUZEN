{"version":3,"sources":["../../../../app/%28learner%29/learner/evaluations/%5BquizId%5D/page.tsx"],"sourcesContent":["'use client'\n\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query'\nimport { useLearnerContext } from '@/lib/contexts/learner-context'\nimport { createLearnerClient } from '@/lib/supabase/learner-client'\nimport { GlassCard } from '@/components/ui/glass-card'\nimport { Button } from '@/components/ui/button'\nimport { Badge } from '@/components/ui/badge'\nimport { useToast } from '@/components/ui/toast'\nimport { motion, AnimatePresence } from '@/components/ui/motion'\nimport {\n  ClipboardCheck,\n  Clock,\n  CheckCircle2,\n  XCircle,\n  ArrowLeft,\n  ArrowRight,\n  AlertCircle,\n  Award,\n  RotateCcw,\n  Home,\n} from 'lucide-react'\nimport Link from 'next/link'\nimport { useParams, useRouter } from 'next/navigation'\nimport { useMemo, useState, useEffect, useCallback, useRef } from 'react'\nimport { logger, maskId, sanitizeError } from '@/lib/utils/logger'\n\ninterface Question {\n  id: string\n  question: string\n  type: 'multiple_choice' | 'true_false' | 'text'\n  options?: string[]\n  correct_answer: string | string[]\n  points: number\n  explanation?: string\n}\n\nexport default function LearnerQuizPage() {\n  const params = useParams()\n  const router = useRouter()\n  const quizId = params.quizId as string\n  const { student: studentData, studentId } = useLearnerContext()\n  const supabase = useMemo(() => (studentId ? createLearnerClient(studentId) : null), [studentId])\n  const queryClient = useQueryClient()\n  const { addToast } = useToast()\n\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0)\n  const [answers, setAnswers] = useState<Record<string, string | string[]>>({})\n  const [timeLeft, setTimeLeft] = useState<number | null>(null)\n  const [isSubmitting, setIsSubmitting] = useState(false)\n  const [showResults, setShowResults] = useState(false)\n  const [results, setResults] = useState<{\n    score: number\n    total: number\n    passed: boolean\n    answers: Record<string, { correct: boolean; correctAnswer: string | string[] }>\n  } | null>(null)\n\n  // Debug visible (même en production) pour vérifier que le bundle est à jour et que les events arrivent.\n  const QUIZ_UI_VERSION = 'quiz-ui-2025-12-17-01'\n  const [debugTapCount, setDebugTapCount] = useState(0)\n\n  // Sur mobile/desktop, certains environnements déclenchent pointer + click (double).\n  // On évite un double toggle en ignorant le click après un pointer.\n  const ignoreNextClickRef = useRef(false)\n\n  // Récupérer le quiz (si quizId est réellement un quiz.id)\n  const { data: quiz, isLoading: isLoadingQuiz, error: quizError } = useQuery({\n    queryKey: ['learner-quiz', quizId],\n    queryFn: async () => {\n      if (!supabase) return null\n      const { data, error } = await supabase\n        .from('quizzes')\n        .select(`\n          *,\n          lessons(title, courses(title)),\n          quiz_questions(*)\n        `)\n        .eq('id', quizId)\n        .maybeSingle()\n      \n      if (error) {\n        if (error.code === 'PGRST116' || error.code === 'PGRST301') {\n          logger.warn('Quiz not found or access denied', {\n            quizId: maskId(quizId),\n            error: sanitizeError(error),\n          })\n          return null\n        }\n        throw error\n      }\n      return data\n    },\n    enabled: !!quizId && !!supabase,\n  })\n\n  // Fallback: si quiz non trouvé (souvent parce qu'il n'existe pas en base),\n  // on tente de traiter l'URL comme un lessonId et de parser `lessons.content` (blocs quiz).\n  const { data: lessonQuizFallback, isLoading: isLoadingLessonFallback } = useQuery({\n    queryKey: ['learner-quiz-fallback-lesson', quizId],\n    queryFn: async () => {\n      if (!supabase) return null\n\n      const { data: lesson, error } = await supabase\n        .from('lessons')\n        .select('id, title, content')\n        .eq('id', quizId)\n        .maybeSingle()\n\n      if (error || !lesson?.content) return null\n\n      try {\n        const parsed = JSON.parse(lesson.content)\n        if (!Array.isArray(parsed)) return null\n\n        const quizBlocks = parsed.filter((b: any) => b?.type === 'quiz')\n        if (!quizBlocks.length) return null\n\n        const questionsFromBlocks: Question[] = quizBlocks.map((block: any, idx: number) => {\n          const qText = block?.data?.question || `Question ${idx + 1}`\n          const opts = (block?.data?.options || [])\n            .map((o: any) => String(o?.text ?? ''))\n            .filter(Boolean)\n          const correct = (block?.data?.options || [])\n            .filter((o: any) => o?.isCorrect)\n            .map((o: any) => String(o?.text ?? ''))\n            .filter(Boolean)\n\n          const correct_answer: string | string[] =\n            correct.length > 1 ? correct : (correct[0] || '')\n\n          return {\n            id: String(block?.id || `block-${idx}`),\n            question: qText,\n            type: 'multiple_choice',\n            options: opts,\n            correct_answer,\n            points: 1,\n            explanation: block?.data?.explanation || undefined,\n          }\n        })\n\n        return {\n          lessonTitle: lesson.title,\n          questions: questionsFromBlocks,\n          isGraded: questionsFromBlocks.some((q) =>\n            Array.isArray(q.correct_answer) ? q.correct_answer.length > 0 : !!q.correct_answer\n          ),\n        }\n      } catch (_e) {\n        return null\n      }\n    },\n    enabled: !!quizId && !!supabase && !isLoadingQuiz && !quiz,\n  })\n\n  const isLoading = isLoadingQuiz || isLoadingLessonFallback\n\n  // Mapper les questions DB -> format UI\n  const questions: Question[] = quiz\n    ? (quiz?.quiz_questions || [])\n        .sort((a: any, b: any) => (a.order_index || 0) - (b.order_index || 0))\n        .map((q: any) => {\n          const type = (q.question_type || q.type || 'multiple_choice') as Question['type']\n          const question = q.question_text || q.question || ''\n          const explanation = q.explanation || undefined\n          const points = q.points || 1\n\n          let options: string[] | undefined\n          let correct_answer: string | string[] = q.correct_answer as any\n\n          if (type === 'multiple_choice') {\n            const rawOptions = q.options\n            if (Array.isArray(rawOptions)) {\n              // Supabase schema: [{ text, is_correct }, ...]\n              if (rawOptions.length && typeof rawOptions[0] === 'object') {\n                options = rawOptions.map((o: any) => String(o?.text ?? '')).filter(Boolean)\n                const correct = rawOptions\n                  .filter((o: any) => o?.is_correct)\n                  .map((o: any) => String(o?.text ?? ''))\n                  .filter(Boolean)\n                if (correct.length === 1) correct_answer = correct[0]\n                if (correct.length > 1) correct_answer = correct\n              } else {\n                // fallback: array of strings\n                options = rawOptions.map((o: any) => String(o)).filter(Boolean)\n              }\n            }\n          }\n\n          if (type === 'true_false') {\n            // Normaliser en 'vrai'/'faux' car l'UI utilise ces valeurs\n            const ca = String(correct_answer ?? '').toLowerCase()\n            if (['true', 'vrai', '1', 't', 'yes', 'oui'].includes(ca)) correct_answer = 'vrai'\n            if (['false', 'faux', '0', 'f', 'no', 'non'].includes(ca)) correct_answer = 'faux'\n          }\n\n          // Default correct_answer fallback\n          if (correct_answer == null) correct_answer = ''\n\n          return {\n            id: q.id,\n            question,\n            type,\n            options,\n            correct_answer,\n            points,\n            explanation,\n          }\n        })\n        .filter((q: any) => q?.id) || []\n    : (lessonQuizFallback?.questions || [])\n\n  // Timer\n  useEffect(() => {\n    if (quiz?.time_limit_minutes && !showResults) {\n      setTimeLeft(quiz.time_limit_minutes * 60) // Convertir en secondes\n    }\n  }, [quiz, showResults])\n\n  useEffect(() => {\n    if (timeLeft === null || timeLeft <= 0 || showResults) return\n\n    const timer = setInterval(() => {\n      setTimeLeft((prev) => {\n        if (prev && prev <= 1) {\n          handleSubmit()\n          return 0\n        }\n        return prev ? prev - 1 : null\n      })\n    }, 1000)\n\n    return () => clearInterval(timer)\n  }, [timeLeft, showResults])\n\n  const formatTime = (seconds: number) => {\n    const mins = Math.floor(seconds / 60)\n    const secs = seconds % 60\n    return `${mins}:${secs.toString().padStart(2, '0')}`\n  }\n\n  const currentQuestion = questions[currentQuestionIndex]\n  const totalQuestions = questions.length\n  const answeredCount = Object.keys(answers).length\n\n  const handleAnswer = (questionId: string, answer: string | string[]) => {\n    setAnswers((prev) => ({\n      ...prev,\n      [questionId]: answer,\n    }))\n  }\n\n  const selectOption = useCallback(\n    (questionId: string, option: string, isMulti: boolean) => {\n      if (!questionId) return\n      if (!isMulti) {\n        handleAnswer(questionId, option)\n        return\n      }\n      setAnswers((prev) => {\n        const prevVal = prev[questionId]\n        const arr = Array.isArray(prevVal) ? [...prevVal] : []\n        const idx = arr.indexOf(option)\n        if (idx >= 0) arr.splice(idx, 1)\n        else arr.push(option)\n        return { ...prev, [questionId]: arr }\n      })\n    },\n    [setAnswers]\n  )\n\n  const handleSubmit = async () => {\n    if (isSubmitting) return\n    setIsSubmitting(true)\n\n    try {\n      // Calculer le score\n      let correctCount = 0\n      let totalPoints = 0\n      const answerResults: Record<string, { correct: boolean; correctAnswer: string | string[] }> = {}\n\n      questions.forEach((q) => {\n        totalPoints += q.points || 1\n        const userAnswer = answers[q.id]\n        const correctAnswer = q.correct_answer\n\n        let isCorrect = false\n        if (Array.isArray(correctAnswer)) {\n          isCorrect = Array.isArray(userAnswer) \n            ? correctAnswer.every((a) => userAnswer.includes(a)) && userAnswer.length === correctAnswer.length\n            : correctAnswer.includes(userAnswer as string)\n        } else {\n          isCorrect = userAnswer === correctAnswer\n        }\n\n        if (isCorrect) {\n          correctCount += q.points || 1\n        }\n\n        answerResults[q.id] = {\n          correct: isCorrect,\n          correctAnswer,\n        }\n      })\n\n      const hasGrading = questions.some((q) =>\n        Array.isArray(q.correct_answer) ? q.correct_answer.length > 0 : !!q.correct_answer\n      )\n      const score = hasGrading ? Math.round((correctCount / totalPoints) * 100) : 0\n      const passed = hasGrading ? score >= (quiz?.passing_score || 70) : true\n\n      // Sauvegarder le résultat\n      if (studentId && supabase) {\n        try {\n          await (supabase as any)\n            .from('lesson_quiz_responses')\n            .insert({\n              student_id: studentId,\n              lesson_id: quiz?.lesson_id,\n              quiz_id: quizId,\n              answers,\n              score,\n              passed,\n              completed_at: new Date().toISOString(),\n            })\n        } catch (_e) {\n          // Table potentiellement absente selon environnement, on n'empêche pas l'utilisateur de voir le résultat.\n        }\n      }\n\n      setResults({\n        score,\n        total: totalPoints,\n        passed,\n        answers: answerResults,\n      })\n      setShowResults(true)\n\n      addToast({\n        type: passed ? 'success' : 'error',\n        title: passed ? 'Félicitations !' : 'Quiz terminé',\n        description: hasGrading\n          ? passed\n            ? `Vous avez réussi avec ${score}% !`\n            : `Score: ${score}%. Le seuil de réussite est de ${quiz?.passing_score || 70}%.`\n          : 'Quiz non noté : réponses enregistrées.',\n      })\n    } catch (error) {\n      addToast({\n        type: 'error',\n        title: 'Erreur',\n        description: 'Impossible de soumettre le quiz.',\n      })\n    } finally {\n      setIsSubmitting(false)\n    }\n  }\n\n  const handleRetry = () => {\n    setAnswers({})\n    setCurrentQuestionIndex(0)\n    setShowResults(false)\n    setResults(null)\n    if (quiz?.time_limit_minutes) {\n      setTimeLeft(quiz.time_limit_minutes * 60)\n    }\n  }\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-[60vh]\">\n        <div className=\"text-center\">\n          <ClipboardCheck className=\"h-12 w-12 text-gray-300 mx-auto mb-4 animate-pulse\" />\n          <p className=\"text-gray-500\">Chargement du quiz...</p>\n        </div>\n      </div>\n    )\n  }\n\n  if (!quiz && !lessonQuizFallback) {\n    return (\n      <div className=\"text-center py-12\">\n        <AlertCircle className=\"h-16 w-16 text-gray-300 mx-auto mb-4\" />\n        <h2 className=\"text-xl font-semibold text-gray-900 mb-2\">Quiz introuvable</h2>\n        <p className=\"text-sm text-gray-600 mb-6\">\n          Ce quiz n’existe pas encore, ou l’accès n’est pas autorisé côté apprenant. Vérifie qu’un quiz est bien créé pour\n          la leçon, et que la migration `20251217000013_learner_header_access_quizzes.sql` est appliquée.\n        </p>\n        <Link href=\"/learner/evaluations\">\n          <Button variant=\"outline\">\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\n            Retour aux évaluations\n          </Button>\n        </Link>\n      </div>\n    )\n  }\n\n  // Écran de résultats\n  if (showResults && results) {\n    return (\n      <div className=\"max-w-2xl mx-auto space-y-6 pb-24 lg:pb-8\">\n        <GlassCard className=\"p-8 text-center\">\n          <motion.div\n            initial={{ scale: 0 }}\n            animate={{ scale: 1 }}\n            transition={{ type: 'spring', damping: 15 }}\n          >\n            {results.passed ? (\n              <div className=\"w-24 h-24 mx-auto mb-6 rounded-full bg-green-100 flex items-center justify-center\">\n                <Award className=\"h-12 w-12 text-green-600\" />\n              </div>\n            ) : (\n              <div className=\"w-24 h-24 mx-auto mb-6 rounded-full bg-red-100 flex items-center justify-center\">\n                <XCircle className=\"h-12 w-12 text-red-600\" />\n              </div>\n            )}\n          </motion.div>\n\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">\n            {results.passed ? 'Félicitations !' : 'Quiz terminé'}\n          </h1>\n          <p className=\"text-gray-500 mb-6\">\n            {quiz?.title || ''}\n          </p>\n\n          <div className=\"flex justify-center gap-8 mb-8\">\n            <div className=\"text-center\">\n              <div className={`text-4xl font-bold ${results.passed ? 'text-green-600' : 'text-red-600'}`}>\n                {results.score}%\n              </div>\n              <p className=\"text-sm text-gray-500\">Votre score</p>\n            </div>\n            <div className=\"w-px bg-gray-200\" />\n            <div className=\"text-center\">\n              <div className=\"text-4xl font-bold text-gray-400\">\n                {quiz?.passing_score || 70}%\n              </div>\n              <p className=\"text-sm text-gray-500\">Score requis</p>\n            </div>\n          </div>\n\n          {results.passed ? (\n            <Badge className=\"bg-green-100 text-green-700 text-base px-4 py-2\">\n              <CheckCircle2 className=\"h-4 w-4 mr-2\" />\n              Quiz réussi\n            </Badge>\n          ) : (\n            <Badge className=\"bg-red-100 text-red-700 text-base px-4 py-2\">\n              <XCircle className=\"h-4 w-4 mr-2\" />\n              Score insuffisant\n            </Badge>\n          )}\n        </GlassCard>\n\n        {/* Résumé des réponses */}\n        <GlassCard className=\"p-6\">\n          <h3 className=\"font-bold text-gray-900 mb-4\">Résumé des réponses</h3>\n          <div className=\"space-y-3\">\n            {questions.map((q, index) => {\n              const result = results.answers[q.id]\n              return (\n                <div\n                  key={q.id}\n                  className={`p-4 rounded-xl ${\n                    result?.correct ? 'bg-green-50 border border-green-200' : 'bg-red-50 border border-red-200'\n                  }`}\n                >\n                  <div className=\"flex items-start gap-3\">\n                    {result?.correct ? (\n                      <CheckCircle2 className=\"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5\" />\n                    ) : (\n                      <XCircle className=\"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5\" />\n                    )}\n                    <div>\n                      <p className=\"font-medium text-gray-900\">Question {index + 1}</p>\n                      <p className=\"text-sm text-gray-600 mt-1\">{q.question}</p>\n                      {!result?.correct && (\n                        <p className=\"text-sm text-green-600 mt-2\">\n                          Réponse correcte : {Array.isArray(result?.correctAnswer) \n                            ? result?.correctAnswer.join(', ') \n                            : result?.correctAnswer}\n                        </p>\n                      )}\n                      {q.explanation && (\n                        <p className=\"text-sm text-gray-500 mt-2 italic\">{q.explanation}</p>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              )\n            })}\n          </div>\n        </GlassCard>\n\n        {/* Actions */}\n        <div className=\"flex gap-4\">\n          {!results.passed && (\n            <Button onClick={handleRetry} className=\"flex-1\">\n              <RotateCcw className=\"h-4 w-4 mr-2\" />\n              Réessayer\n            </Button>\n          )}\n          <Link href=\"/learner/evaluations\" className=\"flex-1\">\n            <Button variant=\"outline\" className=\"w-full\">\n              <Home className=\"h-4 w-4 mr-2\" />\n              Retour aux évaluations\n            </Button>\n          </Link>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"max-w-3xl mx-auto space-y-6 pb-24 lg:pb-8\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <Link href=\"/learner/evaluations\">\n          <Button variant=\"ghost\" size=\"sm\">\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\n            Quitter\n          </Button>\n        </Link>\n        {timeLeft !== null && (\n          <Badge className={`text-base px-4 py-2 ${timeLeft < 60 ? 'bg-red-100 text-red-700' : 'bg-gray-100 text-gray-700'}`}>\n            <Clock className=\"h-4 w-4 mr-2\" />\n            {formatTime(timeLeft)}\n          </Badge>\n        )}\n      </div>\n\n      {/* Debug bar */}\n      <div className=\"text-xs text-gray-500 flex items-center justify-between\">\n        <span>version: {QUIZ_UI_VERSION}</span>\n        <span>taps: {debugTapCount}</span>\n      </div>\n\n      {/* Progress */}\n      <GlassCard className=\"p-4\">\n        <div className=\"flex items-center justify-between mb-2\">\n          <span className=\"text-sm font-medium text-gray-600\">\n            Question {currentQuestionIndex + 1} sur {totalQuestions}\n          </span>\n          <span className=\"text-sm text-gray-500\">\n            {answeredCount} répondu{answeredCount > 1 ? 'es' : 'e'}\n          </span>\n        </div>\n        <div className=\"w-full h-2 bg-gray-100 rounded-full overflow-hidden\">\n          <motion.div\n            className=\"h-full bg-brand-blue\"\n            initial={{ width: 0 }}\n            animate={{ width: `${((currentQuestionIndex + 1) / totalQuestions) * 100}%` }}\n          />\n        </div>\n      </GlassCard>\n\n      {/* Question */}\n      <AnimatePresence mode=\"wait\">\n        <motion.div\n          key={currentQuestionIndex}\n          initial={{ opacity: 0, x: 20 }}\n          animate={{ opacity: 1, x: 0 }}\n          exit={{ opacity: 0, x: -20 }}\n          transition={{ duration: 0.2 }}\n        >\n          <GlassCard className=\"p-6\">\n            <div\n              onPointerDownCapture={() => setDebugTapCount((c) => c + 1)}\n              onClickCapture={() => setDebugTapCount((c) => c + 1)}\n            >\n            <h2 className=\"text-lg font-bold text-gray-900 mb-6\">\n              {currentQuestion?.question}\n            </h2>\n\n            {/* Options */}\n            {currentQuestion?.type === 'multiple_choice' && currentQuestion.options && (\n              <div className=\"space-y-3\">\n                {currentQuestion.options.map((option, index) => {\n                  const isMulti = Array.isArray(currentQuestion.correct_answer)\n                  const currentValue = answers[currentQuestion.id]\n                  const isSelected = isMulti\n                    ? Array.isArray(currentValue) && currentValue.includes(option)\n                    : currentValue === option\n                  return (\n                    <button\n                      key={index}\n                      type=\"button\"\n                      onPointerDown={(e) => {\n                        ignoreNextClickRef.current = true\n                        e.preventDefault()\n                        e.stopPropagation()\n                        selectOption(currentQuestion.id, option, isMulti)\n                      }}\n                      onClick={(e) => {\n                        e.preventDefault()\n                        e.stopPropagation()\n                        if (ignoreNextClickRef.current) {\n                          ignoreNextClickRef.current = false\n                          return\n                        }\n                        selectOption(currentQuestion.id, option, isMulti)\n                      }}\n                      className={`w-full p-4 rounded-xl text-left transition-all ${\n                        isSelected\n                          ? 'bg-brand-blue text-white ring-2 ring-brand-blue'\n                          : 'bg-gray-50 hover:bg-gray-100 text-gray-700'\n                      }`}\n                    >\n                      <div className=\"flex items-center gap-3\">\n                        <div\n                          className={`w-6 h-6 rounded-full border-2 flex items-center justify-center ${\n                            isSelected ? 'border-white bg-white' : 'border-gray-300'\n                          }`}\n                        >\n                          {isSelected && <div className=\"w-3 h-3 rounded-full bg-brand-blue\" />}\n                        </div>\n                        <span className=\"font-medium\">{option}</span>\n                      </div>\n                    </button>\n                  )\n                })}\n              </div>\n            )}\n\n            {currentQuestion?.type === 'true_false' && (\n              <div className=\"grid grid-cols-2 gap-4\">\n                {['Vrai', 'Faux'].map((option) => {\n                  const isSelected = answers[currentQuestion.id] === option.toLowerCase()\n                  return (\n                    <button\n                      key={option}\n                      type=\"button\"\n                      onPointerDown={(e) => {\n                        ignoreNextClickRef.current = true\n                        e.preventDefault()\n                        e.stopPropagation()\n                        handleAnswer(currentQuestion.id, option.toLowerCase())\n                      }}\n                      onClick={(e) => {\n                        e.preventDefault()\n                        e.stopPropagation()\n                        if (ignoreNextClickRef.current) {\n                          ignoreNextClickRef.current = false\n                          return\n                        }\n                        handleAnswer(currentQuestion.id, option.toLowerCase())\n                      }}\n                      className={`p-6 rounded-xl text-center transition-all ${\n                        isSelected\n                          ? 'bg-brand-blue text-white ring-2 ring-brand-blue'\n                          : 'bg-gray-50 hover:bg-gray-100 text-gray-700'\n                      }`}\n                    >\n                      <span className=\"text-lg font-semibold\">{option}</span>\n                    </button>\n                  )\n                })}\n              </div>\n            )}\n\n            {/* Debug (DEV) */}\n            {process.env.NODE_ENV !== 'production' && (\n              <div className=\"mt-6 text-xs text-gray-500 break-all\">\n                <div>debug.questionId: {String(currentQuestion?.id || '')}</div>\n                <div>debug.selected: {JSON.stringify(answers[currentQuestion?.id || ''] ?? null)}</div>\n              </div>\n            )}\n            </div>\n          </GlassCard>\n        </motion.div>\n      </AnimatePresence>\n\n      {/* Navigation */}\n      <div className=\"flex items-center justify-between\">\n        <Button\n          variant=\"outline\"\n          onClick={() => setCurrentQuestionIndex(Math.max(0, currentQuestionIndex - 1))}\n          disabled={currentQuestionIndex === 0}\n        >\n          <ArrowLeft className=\"h-4 w-4 mr-2\" />\n          Précédent\n        </Button>\n\n        {currentQuestionIndex < totalQuestions - 1 ? (\n          <Button\n            onClick={() => setCurrentQuestionIndex(currentQuestionIndex + 1)}\n          >\n            Suivant\n            <ArrowRight className=\"h-4 w-4 ml-2\" />\n          </Button>\n        ) : (\n          <Button\n            onClick={handleSubmit}\n            disabled={isSubmitting || answeredCount < totalQuestions}\n            className=\"bg-green-600 hover:bg-green-700\"\n          >\n            {isSubmitting ? 'Envoi...' : 'Soumettre'}\n            <CheckCircle2 className=\"h-4 w-4 ml-2\" />\n          </Button>\n        )}\n      </div>\n\n      {/* Question navigation */}\n      <GlassCard className=\"p-4\">\n        <p className=\"text-sm font-medium text-gray-600 mb-3\">Navigation rapide</p>\n        <div className=\"flex flex-wrap gap-2\">\n          {questions.map((q, index) => {\n            const isAnswered = !!answers[q.id]\n            const isCurrent = index === currentQuestionIndex\n            return (\n              <button\n                key={q.id}\n                type=\"button\"\n                onClick={(e) => {\n                  e.preventDefault()\n                  setCurrentQuestionIndex(index)\n                }}\n                className={`w-10 h-10 rounded-lg font-medium transition-all ${\n                  isCurrent\n                    ? 'bg-brand-blue text-white'\n                    : isAnswered\n                    ? 'bg-green-100 text-green-700'\n                    : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\n                }`}\n              >\n                {index + 1}\n              </button>\n            )\n          })}\n        </div>\n      </GlassCard>\n    </div>\n  )\n}\n\n\n"],"names":[],"mappings":"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"}