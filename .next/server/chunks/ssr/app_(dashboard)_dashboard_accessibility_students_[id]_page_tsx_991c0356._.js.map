{"version":3,"sources":["../../../../app/%28dashboard%29/dashboard/accessibility/students/%5Bid%5D/page.tsx","../../../../components/accessibility/student-need-form.tsx","../../../../components/accessibility/accommodation-form.tsx","../../../../components/accessibility/accommodation-card.tsx","../../../../components/accessibility/document-upload.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { useQuery } from '@tanstack/react-query'\nimport { useAuth } from '@/lib/hooks/use-auth'\nimport { accessibilityService } from '@/lib/services/accessibility.service'\nimport { createClient } from '@/lib/supabase/client'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { Badge } from '@/components/ui/badge'\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'\nimport { StudentNeedForm } from '@/components/accessibility/student-need-form'\nimport { AccommodationForm } from '@/components/accessibility/accommodation-form'\nimport { AccommodationCard } from '@/components/accessibility/accommodation-card'\nimport { DocumentUpload } from '@/components/accessibility/document-upload'\nimport {\n  User,\n  FileText,\n  Package,\n  Calendar,\n  ArrowLeft,\n  Plus,\n  AlertCircle,\n  CheckCircle,\n} from 'lucide-react'\nimport Link from 'next/link'\nimport { useParams } from 'next/navigation'\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog'\n\nexport default function StudentAccessibilityPage() {\n  const params = useParams()\n  const studentId = params.id as string\n  const { user } = useAuth()\n  const supabase = createClient()\n\n  const [showNeedForm, setShowNeedForm] = useState(false)\n  const [showAccommodationForm, setShowAccommodationForm] = useState(false)\n  const [editingAccommodation, setEditingAccommodation] = useState<any>(null)\n\n  // Query étudiant\n  const { data: student, isLoading: studentLoading } = useQuery<any>({\n    queryKey: ['student', studentId],\n    queryFn: async () => {\n      const { data, error } = await supabase\n        .from('students')\n        .select('*, programs(name), cohorts(name)')\n        .eq('id', studentId)\n        .single()\n      if (error) throw error\n      return data\n    },\n    enabled: !!studentId,\n  })\n\n  // Query besoins\n  const { data: need, isLoading: needLoading } = useQuery({\n    queryKey: ['accessibility-student-need', studentId],\n    queryFn: async () => {\n      return await accessibilityService.getStudentNeedByStudentId(studentId)\n    },\n    enabled: !!studentId,\n  })\n\n  // Query aménagements\n  const { data: accommodations = [], isLoading: accommodationsLoading } = useQuery({\n    queryKey: ['accessibility-accommodations', studentId],\n    queryFn: async () => {\n      return await accessibilityService.getStudentAccommodations(studentId)\n    },\n    enabled: !!studentId,\n  })\n\n  // Query types de handicap\n  const { data: disabilityTypes = [] } = useQuery({\n    queryKey: ['accessibility-disability-types'],\n    queryFn: async () => {\n      return await accessibilityService.getDisabilityTypes()\n    },\n  })\n\n  const handleEditAccommodation = (accommodation: any) => {\n    setEditingAccommodation(accommodation)\n    setShowAccommodationForm(true)\n  }\n\n  const handleCloseAccommodationForm = () => {\n    setShowAccommodationForm(false)\n    setEditingAccommodation(null)\n  }\n\n  if (!user || studentLoading) {\n    return (\n      <div className=\"p-6\">\n        <p className=\"text-sm text-muted-foreground\">Chargement...</p>\n      </div>\n    )\n  }\n\n  if (!student) {\n    return (\n      <div className=\"p-6\">\n        <Card>\n          <CardContent className=\"p-12 text-center\">\n            <AlertCircle className=\"h-12 w-12 mx-auto text-red-600 mb-4\" />\n            <h3 className=\"text-lg font-semibold mb-2\">Étudiant introuvable</h3>\n            <p className=\"text-sm text-muted-foreground mb-4\">\n              L'étudiant demandé n'existe pas ou vous n'avez pas les permissions pour y accéder.\n            </p>\n            <Link href=\"/dashboard/accessibility\">\n              <Button>\n                <ArrowLeft className=\"h-4 w-4 mr-2\" />\n                Retour\n              </Button>\n            </Link>\n          </CardContent>\n        </Card>\n      </div>\n    )\n  }\n\n  // Calculer les types de handicap déclarés\n  const declaredDisabilityTypes = need?.disability_type_ids\n    ? disabilityTypes.filter((dt) => need.disability_type_ids.includes(dt.id))\n    : []\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-4\">\n          <Link href=\"/dashboard/accessibility\">\n            <Button variant=\"ghost\" size=\"sm\">\n              <ArrowLeft className=\"h-4 w-4 mr-2\" />\n              Retour\n            </Button>\n          </Link>\n          <div>\n            <h1 className=\"text-3xl font-bold flex items-center gap-3\">\n              <User className=\"h-8 w-8 text-primary\" />\n              {student.first_name} {student.last_name}\n            </h1>\n            <p className=\"text-muted-foreground mt-1\">\n              Suivi de l'accessibilité et des aménagements\n            </p>\n          </div>\n        </div>\n      </div>\n\n      {/* Informations étudiant */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <User className=\"h-5 w-5\" />\n            Informations générales\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div>\n            <p className=\"text-sm text-muted-foreground\">Email</p>\n            <p className=\"font-medium\">{student.email || 'Non renseigné'}</p>\n          </div>\n          <div>\n            <p className=\"text-sm text-muted-foreground\">Programme</p>\n            <p className=\"font-medium\">{student.programs?.name || 'Non affecté'}</p>\n          </div>\n          <div>\n            <p className=\"text-sm text-muted-foreground\">Cohorte</p>\n            <p className=\"font-medium\">{student.cohorts?.name || 'Non affecté'}</p>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Statut déclaration */}\n      {!need ? (\n        <Card className=\"border-amber-200 bg-amber-50\">\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-start gap-4\">\n              <AlertCircle className=\"h-6 w-6 text-amber-600 flex-shrink-0 mt-1\" />\n              <div className=\"flex-1\">\n                <h3 className=\"font-semibold text-amber-900 mb-2\">\n                  Aucune déclaration de besoins spécifiques\n                </h3>\n                <p className=\"text-sm text-amber-800 mb-4\">\n                  Cet étudiant n'a pas encore rempli le formulaire d'auto-déclaration des besoins spécifiques.\n                </p>\n                <Button onClick={() => setShowNeedForm(true)} variant=\"outline\">\n                  <Plus className=\"h-4 w-4 mr-2\" />\n                  Remplir la déclaration\n                </Button>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      ) : (\n        <Card>\n          <CardHeader>\n            <div className=\"flex items-center justify-between\">\n              <CardTitle className=\"flex items-center gap-2\">\n                <FileText className=\"h-5 w-5\" />\n                Déclaration de besoins spécifiques\n              </CardTitle>\n              <div className=\"flex items-center gap-2\">\n                {need.status === 'pending' && (\n                  <Badge className=\"bg-amber-100 text-amber-800\">En attente de revue</Badge>\n                )}\n                {need.status === 'reviewed' && (\n                  <Badge className=\"bg-blue-100 text-blue-800\">Revue effectuée</Badge>\n                )}\n                {need.status === 'implemented' && (\n                  <Badge className=\"bg-green-100 text-green-800\">\n                    <CheckCircle className=\"h-3 w-3 mr-1\" />\n                    Aménagements en place\n                  </Badge>\n                )}\n                <Button onClick={() => setShowNeedForm(true)} variant=\"outline\" size=\"sm\">\n                  Modifier\n                </Button>\n              </div>\n            </div>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            {/* Handicap déclaré */}\n            <div>\n              <p className=\"text-sm text-muted-foreground mb-2\">Déclaration de handicap</p>\n              <p className=\"font-medium\">\n                {need.has_disability ? (\n                  <span className=\"text-blue-600\">Oui, un handicap est déclaré</span>\n                ) : (\n                  <span>Aucun handicap déclaré</span>\n                )}\n              </p>\n            </div>\n\n            {/* Types de handicap */}\n            {need.has_disability && declaredDisabilityTypes.length > 0 && (\n              <div>\n                <p className=\"text-sm text-muted-foreground mb-2\">Types de handicap</p>\n                <div className=\"flex flex-wrap gap-2\">\n                  {declaredDisabilityTypes.map((dt) => (\n                    <Badge key={dt.id} variant=\"outline\">\n                      {dt.name_fr}\n                    </Badge>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {/* Description */}\n            {need.disability_description && (\n              <div>\n                <p className=\"text-sm text-muted-foreground mb-2\">Description</p>\n                <p className=\"text-sm\">{need.disability_description}</p>\n              </div>\n            )}\n\n            {/* Reconnaissance MDPH */}\n            {need.has_mdph_recognition && (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 bg-blue-50 rounded-lg\">\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">Reconnaissance MDPH/RQTH</p>\n                  <p className=\"font-medium text-blue-900\">Oui</p>\n                </div>\n                {need.mdph_number && (\n                  <div>\n                    <p className=\"text-sm text-muted-foreground\">Numéro MDPH</p>\n                    <p className=\"font-medium text-blue-900\">{need.mdph_number}</p>\n                  </div>\n                )}\n                {need.mdph_expiry_date && (\n                  <div>\n                    <p className=\"text-sm text-muted-foreground\">Date d'expiration</p>\n                    <p className=\"font-medium text-blue-900\">\n                      {new Date(need.mdph_expiry_date).toLocaleDateString('fr-FR')}\n                    </p>\n                  </div>\n                )}\n              </div>\n            )}\n\n            {/* Besoins */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              {need.needs_physical_accommodations && (\n                <div className=\"p-3 border rounded-lg\">\n                  <p className=\"text-sm font-medium mb-1\">Aménagements physiques</p>\n                  <p className=\"text-xs text-muted-foreground\">\n                    {need.physical_accommodations_detail || 'Demandés'}\n                  </p>\n                </div>\n              )}\n              {need.needs_pedagogical_accommodations && (\n                <div className=\"p-3 border rounded-lg\">\n                  <p className=\"text-sm font-medium mb-1\">Aménagements pédagogiques</p>\n                  <p className=\"text-xs text-muted-foreground\">\n                    {need.pedagogical_accommodations_detail || 'Demandés'}\n                  </p>\n                </div>\n              )}\n              {need.needs_exam_accommodations && (\n                <div className=\"p-3 border rounded-lg\">\n                  <p className=\"text-sm font-medium mb-1\">Aménagements examens</p>\n                  <p className=\"text-xs text-muted-foreground\">\n                    {need.exam_accommodations_detail || 'Demandés'}\n                  </p>\n                </div>\n              )}\n              {need.needs_technical_aids && (\n                <div className=\"p-3 border rounded-lg\">\n                  <p className=\"text-sm font-medium mb-1\">Aides techniques</p>\n                  <p className=\"text-xs text-muted-foreground\">\n                    {need.technical_aids_detail || 'Demandées'}\n                  </p>\n                </div>\n              )}\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Tabs: Aménagements et Documents */}\n      <Tabs defaultValue=\"accommodations\" className=\"w-full\">\n        <TabsList className=\"grid w-full grid-cols-2\">\n          <TabsTrigger value=\"accommodations\">\n            Aménagements ({accommodations.length})\n          </TabsTrigger>\n          <TabsTrigger value=\"documents\">\n            Documents justificatifs\n          </TabsTrigger>\n        </TabsList>\n\n        {/* Aménagements */}\n        <TabsContent value=\"accommodations\" className=\"space-y-4\">\n          <div className=\"flex items-center justify-between\">\n            <h3 className=\"text-lg font-semibold\">Aménagements mis en place</h3>\n            <Button onClick={() => setShowAccommodationForm(true)} size=\"sm\">\n              <Plus className=\"h-4 w-4 mr-2\" />\n              Nouvel aménagement\n            </Button>\n          </div>\n\n          {accommodationsLoading ? (\n            <Card>\n              <CardContent className=\"p-6\">\n                <p className=\"text-sm text-muted-foreground\">Chargement des aménagements...</p>\n              </CardContent>\n            </Card>\n          ) : accommodations.length === 0 ? (\n            <Card>\n              <CardContent className=\"p-12 text-center\">\n                <Package className=\"h-12 w-12 mx-auto text-muted-foreground mb-4\" />\n                <h3 className=\"text-lg font-semibold mb-2\">Aucun aménagement</h3>\n                <p className=\"text-sm text-muted-foreground mb-4\">\n                  Aucun aménagement n'a encore été mis en place pour cet étudiant.\n                </p>\n                <Button onClick={() => setShowAccommodationForm(true)}>\n                  <Plus className=\"h-4 w-4 mr-2\" />\n                  Créer un aménagement\n                </Button>\n              </CardContent>\n            </Card>\n          ) : (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              {accommodations.map((accommodation) => (\n                <AccommodationCard\n                  key={accommodation.id}\n                  accommodation={accommodation}\n                  onEdit={() => handleEditAccommodation(accommodation)}\n                  showActions\n                />\n              ))}\n            </div>\n          )}\n        </TabsContent>\n\n        {/* Documents */}\n        <TabsContent value=\"documents\">\n          <DocumentUpload\n            organizationId={user.organization_id || ''}\n            studentId={studentId}\n            studentNeedId={need?.id}\n            showExisting\n          />\n        </TabsContent>\n      </Tabs>\n\n      {/* Dialog formulaire besoins */}\n      <Dialog open={showNeedForm} onOpenChange={setShowNeedForm}>\n        <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>Déclaration de besoins spécifiques</DialogTitle>\n            <DialogDescription>\n              Formulaire d'auto-déclaration des besoins d'accessibilité\n            </DialogDescription>\n          </DialogHeader>\n          <StudentNeedForm\n            studentId={studentId}\n            organizationId={user.organization_id || ''}\n            onSuccess={() => setShowNeedForm(false)}\n            onCancel={() => setShowNeedForm(false)}\n          />\n        </DialogContent>\n      </Dialog>\n\n      {/* Dialog formulaire aménagement */}\n      <Dialog open={showAccommodationForm} onOpenChange={setShowAccommodationForm}>\n        <DialogContent className=\"max-w-3xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>\n              {editingAccommodation ? 'Modifier l\\'aménagement' : 'Nouvel aménagement'}\n            </DialogTitle>\n            <DialogDescription>\n              {editingAccommodation\n                ? 'Modifiez les informations de l\\'aménagement'\n                : 'Créez un nouvel aménagement pour cet étudiant'}\n            </DialogDescription>\n          </DialogHeader>\n          <AccommodationForm\n            organizationId={user.organization_id || ''}\n            studentId={studentId}\n            studentNeedId={need?.id}\n            accommodationId={editingAccommodation?.id}\n            initialData={editingAccommodation}\n            onSuccess={handleCloseAccommodationForm}\n            onCancel={handleCloseAccommodationForm}\n          />\n        </DialogContent>\n      </Dialog>\n    </div>\n  )\n}\n","'use client'\n\nimport { useState } from 'react'\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query'\nimport { accessibilityService } from '@/lib/services/accessibility.service'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Textarea } from '@/components/ui/textarea'\nimport { Checkbox } from '@/components/ui/checkbox'\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card'\nimport { useToast } from '@/components/ui/toast'\nimport { ChevronLeft, ChevronRight, Save } from 'lucide-react'\n\ninterface StudentNeedFormProps {\n  studentId: string\n  organizationId: string\n  onSuccess?: () => void\n  onCancel?: () => void\n}\n\nexport function StudentNeedForm({ studentId, organizationId, onSuccess, onCancel }: StudentNeedFormProps) {\n  const queryClient = useQueryClient()\n  const { addToast } = useToast()\n  const [step, setStep] = useState(1)\n  const totalSteps = 5\n\n  // Charger les types de handicap\n  const { data: disabilityTypes = [] } = useQuery({\n    queryKey: ['disability-types'],\n    queryFn: () => accessibilityService.getDisabilityTypes(),\n    retry: false,\n  })\n\n  // Charger les besoins existants\n  const { data: existingNeed } = useQuery({\n    queryKey: ['student-need', studentId],\n    queryFn: () => accessibilityService.getStudentNeedByStudentId(studentId),\n    retry: false,\n  })\n\n  // State du formulaire\n  const [formData, setFormData] = useState({\n    has_disability: existingNeed?.has_disability || false,\n    disability_type_ids: existingNeed?.disability_type_ids || [],\n    disability_description: existingNeed?.disability_description || '',\n    has_mdph_recognition: existingNeed?.has_mdph_recognition || false,\n    mdph_number: existingNeed?.mdph_number || '',\n    mdph_expiry_date: existingNeed?.mdph_expiry_date || '',\n    needs_physical_accommodations: existingNeed?.needs_physical_accommodations || false,\n    physical_accommodations_detail: existingNeed?.physical_accommodations_detail || '',\n    needs_pedagogical_accommodations: existingNeed?.needs_pedagogical_accommodations || false,\n    pedagogical_accommodations_detail: existingNeed?.pedagogical_accommodations_detail || '',\n    needs_exam_accommodations: existingNeed?.needs_exam_accommodations || false,\n    exam_accommodations_detail: existingNeed?.exam_accommodations_detail || '',\n    needs_technical_aids: existingNeed?.needs_technical_aids || false,\n    technical_aids_detail: existingNeed?.technical_aids_detail || '',\n    external_referent_name: existingNeed?.external_referent_name || '',\n    external_referent_contact: existingNeed?.external_referent_contact || '',\n    consent_share_info: existingNeed?.consent_share_info || false,\n  })\n\n  // Mutation pour sauvegarder\n  const saveMutation = useMutation({\n    mutationFn: async () => {\n      const data = {\n        organization_id: organizationId,\n        student_id: studentId,\n        ...formData,\n      }\n\n      if (existingNeed) {\n        return await accessibilityService.updateStudentNeed(existingNeed.id, data)\n      } else {\n        return await accessibilityService.createStudentNeed(data)\n      }\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['student-need'] })\n      queryClient.invalidateQueries({ queryKey: ['accessibility-needs'] })\n      addToast({\n        type: 'success',\n        title: 'Déclaration enregistrée',\n        description: 'Vos besoins spécifiques ont été enregistrés avec succès.',\n      })\n      onSuccess?.()\n    },\n    onError: (error: any) => {\n      addToast({\n        type: 'error',\n        title: 'Erreur',\n        description: error?.message || 'Impossible d\\'enregistrer la déclaration.',\n      })\n    },\n  })\n\n  const handleInputChange = (field: string, value: any) => {\n    setFormData((prev) => ({ ...prev, [field]: value }))\n  }\n\n  const toggleDisabilityType = (typeId: string) => {\n    setFormData((prev) => {\n      const current = prev.disability_type_ids as string[]\n      if (current.includes(typeId)) {\n        return { ...prev, disability_type_ids: current.filter((id) => id !== typeId) }\n      } else {\n        return { ...prev, disability_type_ids: [...current, typeId] }\n      }\n    })\n  }\n\n  const nextStep = () => {\n    if (step < totalSteps) setStep(step + 1)\n  }\n\n  const prevStep = () => {\n    if (step > 1) setStep(step - 1)\n  }\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault()\n    saveMutation.mutate()\n  }\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-6\">\n      {/* Progress indicator */}\n      <div className=\"flex items-center justify-between mb-6\">\n        <div className=\"flex-1\">\n          <div className=\"flex items-center\">\n            {Array.from({ length: totalSteps }).map((_, i) => (\n              <div key={i} className=\"flex items-center flex-1\">\n                <div\n                  className={`w-8 h-8 rounded-full flex items-center justify-center ${\n                    i + 1 <= step ? 'bg-brand-blue text-white' : 'bg-gray-200 text-gray-500'\n                  }`}\n                >\n                  {i + 1}\n                </div>\n                {i < totalSteps - 1 && (\n                  <div className={`flex-1 h-1 ${i + 1 < step ? 'bg-brand-blue' : 'bg-gray-200'}`} />\n                )}\n              </div>\n            ))}\n          </div>\n          <div className=\"flex justify-between mt-2\">\n            <span className=\"text-xs text-muted-foreground\">Déclaration</span>\n            <span className=\"text-xs text-muted-foreground\">Types</span>\n            <span className=\"text-xs text-muted-foreground\">Besoins</span>\n            <span className=\"text-xs text-muted-foreground\">Référent</span>\n            <span className=\"text-xs text-muted-foreground\">Consentement</span>\n          </div>\n        </div>\n      </div>\n\n      {/* Step 1: Déclaration initiale */}\n      {step === 1 && (\n        <Card>\n          <CardHeader>\n            <CardTitle>Déclaration de besoins spécifiques</CardTitle>\n            <CardDescription>Indiquez si vous avez des besoins spécifiques liés à un handicap</CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"flex items-center space-x-2\">\n              <Checkbox\n                id=\"has_disability\"\n                checked={formData.has_disability}\n                onCheckedChange={(checked) => handleInputChange('has_disability', checked)}\n              />\n              <label htmlFor=\"has_disability\" className=\"text-sm font-medium\">\n                Je déclare une situation de handicap ou des besoins spécifiques\n              </label>\n            </div>\n\n            {formData.has_disability && (\n              <>\n                <div>\n                  <Label htmlFor=\"disability_description\">Description (optionnel)</Label>\n                  <Textarea\n                    id=\"disability_description\"\n                    placeholder=\"Décrivez brièvement votre situation si vous le souhaitez...\"\n                    rows={4}\n                    value={formData.disability_description}\n                    onChange={(e) => handleInputChange('disability_description', e.target.value)}\n                  />\n                </div>\n\n                <div className=\"border-t pt-4\">\n                  <div className=\"flex items-center space-x-2 mb-3\">\n                    <Checkbox\n                      id=\"has_mdph_recognition\"\n                      checked={formData.has_mdph_recognition}\n                      onCheckedChange={(checked) => handleInputChange('has_mdph_recognition', checked)}\n                    />\n                    <label htmlFor=\"has_mdph_recognition\" className=\"text-sm font-medium\">\n                      J'ai une reconnaissance MDPH / RQTH\n                    </label>\n                  </div>\n\n                  {formData.has_mdph_recognition && (\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 ml-6\">\n                      <div>\n                        <Label htmlFor=\"mdph_number\">Numéro de dossier MDPH</Label>\n                        <Input\n                          id=\"mdph_number\"\n                          value={formData.mdph_number}\n                          onChange={(e) => handleInputChange('mdph_number', e.target.value)}\n                        />\n                      </div>\n                      <div>\n                        <Label htmlFor=\"mdph_expiry_date\">Date d'expiration</Label>\n                        <Input\n                          id=\"mdph_expiry_date\"\n                          type=\"date\"\n                          value={formData.mdph_expiry_date}\n                          onChange={(e) => handleInputChange('mdph_expiry_date', e.target.value)}\n                        />\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </>\n            )}\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Step 2: Types de handicap */}\n      {step === 2 && (\n        <Card>\n          <CardHeader>\n            <CardTitle>Types de handicap</CardTitle>\n            <CardDescription>\n              Sélectionnez le ou les types de handicap qui correspondent à votre situation (optionnel)\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              {disabilityTypes.map((type) => (\n                <div\n                  key={type.id}\n                  className={`p-4 border rounded-lg cursor-pointer transition-colors ${\n                    (formData.disability_type_ids as string[]).includes(type.id)\n                      ? 'border-brand-blue bg-blue-50'\n                      : 'border-gray-200 hover:border-gray-300'\n                  }`}\n                  onClick={() => toggleDisabilityType(type.id)}\n                >\n                  <div className=\"flex items-start gap-3\">\n                    <Checkbox\n                      checked={(formData.disability_type_ids as string[]).includes(type.id)}\n                      onCheckedChange={() => toggleDisabilityType(type.id)}\n                    />\n                    <div>\n                      <p className=\"font-medium\">{type.name_fr}</p>\n                      <p className=\"text-sm text-muted-foreground\">{type.description}</p>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Step 3: Besoins détaillés */}\n      {step === 3 && (\n        <Card>\n          <CardHeader>\n            <CardTitle>Besoins spécifiques</CardTitle>\n            <CardDescription>Indiquez vos besoins pour faciliter votre parcours de formation</CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-6\">\n            {/* Aménagements physiques */}\n            <div className=\"space-y-3\">\n              <div className=\"flex items-center space-x-2\">\n                <Checkbox\n                  id=\"needs_physical_accommodations\"\n                  checked={formData.needs_physical_accommodations}\n                  onCheckedChange={(checked) => handleInputChange('needs_physical_accommodations', checked)}\n                />\n                <label htmlFor=\"needs_physical_accommodations\" className=\"text-sm font-medium\">\n                  Aménagements physiques (accès, mobilité)\n                </label>\n              </div>\n              {formData.needs_physical_accommodations && (\n                <Textarea\n                  placeholder=\"Ex: Besoin d'une salle accessible en fauteuil roulant, place de parking réservée...\"\n                  rows={3}\n                  value={formData.physical_accommodations_detail}\n                  onChange={(e) => handleInputChange('physical_accommodations_detail', e.target.value)}\n                  className=\"ml-6\"\n                />\n              )}\n            </div>\n\n            {/* Aménagements pédagogiques */}\n            <div className=\"space-y-3\">\n              <div className=\"flex items-center space-x-2\">\n                <Checkbox\n                  id=\"needs_pedagogical_accommodations\"\n                  checked={formData.needs_pedagogical_accommodations}\n                  onCheckedChange={(checked) => handleInputChange('needs_pedagogical_accommodations', checked)}\n                />\n                <label htmlFor=\"needs_pedagogical_accommodations\" className=\"text-sm font-medium\">\n                  Aménagements pédagogiques\n                </label>\n              </div>\n              {formData.needs_pedagogical_accommodations && (\n                <Textarea\n                  placeholder=\"Ex: Documents en gros caractères, supports audio, interprète LSF...\"\n                  rows={3}\n                  value={formData.pedagogical_accommodations_detail}\n                  onChange={(e) => handleInputChange('pedagogical_accommodations_detail', e.target.value)}\n                  className=\"ml-6\"\n                />\n              )}\n            </div>\n\n            {/* Aménagements examens */}\n            <div className=\"space-y-3\">\n              <div className=\"flex items-center space-x-2\">\n                <Checkbox\n                  id=\"needs_exam_accommodations\"\n                  checked={formData.needs_exam_accommodations}\n                  onCheckedChange={(checked) => handleInputChange('needs_exam_accommodations', checked)}\n                />\n                <label htmlFor=\"needs_exam_accommodations\" className=\"text-sm font-medium\">\n                  Aménagements pour les examens\n                </label>\n              </div>\n              {formData.needs_exam_accommodations && (\n                <Textarea\n                  placeholder=\"Ex: Temps supplémentaire, salle isolée, assistance humaine...\"\n                  rows={3}\n                  value={formData.exam_accommodations_detail}\n                  onChange={(e) => handleInputChange('exam_accommodations_detail', e.target.value)}\n                  className=\"ml-6\"\n                />\n              )}\n            </div>\n\n            {/* Aides techniques */}\n            <div className=\"space-y-3\">\n              <div className=\"flex items-center space-x-2\">\n                <Checkbox\n                  id=\"needs_technical_aids\"\n                  checked={formData.needs_technical_aids}\n                  onCheckedChange={(checked) => handleInputChange('needs_technical_aids', checked)}\n                />\n                <label htmlFor=\"needs_technical_aids\" className=\"text-sm font-medium\">\n                  Aides techniques / matériel adapté\n                </label>\n              </div>\n              {formData.needs_technical_aids && (\n                <Textarea\n                  placeholder=\"Ex: Logiciel de grossissement, clavier braille, ordinateur adapté...\"\n                  rows={3}\n                  value={formData.technical_aids_detail}\n                  onChange={(e) => handleInputChange('technical_aids_detail', e.target.value)}\n                  className=\"ml-6\"\n                />\n              )}\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Step 4: Référent externe */}\n      {step === 4 && (\n        <Card>\n          <CardHeader>\n            <CardTitle>Référent externe</CardTitle>\n            <CardDescription>\n              Personne à contacter en cas de besoin (médecin, référent MDPH, etc.) - Optionnel\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div>\n              <Label htmlFor=\"external_referent_name\">Nom du référent</Label>\n              <Input\n                id=\"external_referent_name\"\n                placeholder=\"Dr. Dupont, Référent MDPH...\"\n                value={formData.external_referent_name}\n                onChange={(e) => handleInputChange('external_referent_name', e.target.value)}\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"external_referent_contact\">Contact (email ou téléphone)</Label>\n              <Input\n                id=\"external_referent_contact\"\n                placeholder=\"contact@exemple.fr ou 01 23 45 67 89\"\n                value={formData.external_referent_contact}\n                onChange={(e) => handleInputChange('external_referent_contact', e.target.value)}\n              />\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Step 5: Consentement */}\n      {step === 5 && (\n        <Card>\n          <CardHeader>\n            <CardTitle>Consentement</CardTitle>\n            <CardDescription>Autorisation de partage des informations</CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"p-4 bg-blue-50 border border-blue-200 rounded-lg\">\n              <p className=\"text-sm text-blue-900 mb-4\">\n                Vos informations sont confidentielles et protégées. Le partage avec les formateurs permet de mieux\n                adapter votre parcours de formation.\n              </p>\n              <div className=\"flex items-start space-x-2\">\n                <Checkbox\n                  id=\"consent_share_info\"\n                  checked={formData.consent_share_info}\n                  onCheckedChange={(checked) => handleInputChange('consent_share_info', checked)}\n                />\n                <label htmlFor=\"consent_share_info\" className=\"text-sm\">\n                  J'autorise le partage de mes besoins spécifiques avec les formateurs et le personnel pédagogique\n                  afin de bénéficier des aménagements nécessaires.\n                </label>\n              </div>\n            </div>\n\n            <div className=\"text-xs text-muted-foreground\">\n              <p>Conformément au RGPD, vous disposez d'un droit d'accès, de modification et de suppression de vos données.</p>\n              <p className=\"mt-1\">\n                Ces informations seront conservées pendant la durée de votre formation et archivées ensuite selon les\n                obligations légales.\n              </p>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Navigation */}\n      <div className=\"flex justify-between pt-6\">\n        <div>\n          {step > 1 && (\n            <Button type=\"button\" variant=\"outline\" onClick={prevStep}>\n              <ChevronLeft className=\"h-4 w-4 mr-2\" />\n              Précédent\n            </Button>\n          )}\n        </div>\n        <div className=\"flex gap-2\">\n          {onCancel && (\n            <Button type=\"button\" variant=\"ghost\" onClick={onCancel}>\n              Annuler\n            </Button>\n          )}\n          {step < totalSteps ? (\n            <Button type=\"button\" onClick={nextStep}>\n              Suivant\n              <ChevronRight className=\"h-4 w-4 ml-2\" />\n            </Button>\n          ) : (\n            <Button type=\"submit\" disabled={saveMutation.isPending}>\n              <Save className=\"h-4 w-4 mr-2\" />\n              {saveMutation.isPending ? 'Enregistrement...' : 'Enregistrer la déclaration'}\n            </Button>\n          )}\n        </div>\n      </div>\n    </form>\n  )\n}\n","'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useMutation, useQueryClient } from '@tanstack/react-query'\nimport { accessibilityService } from '@/lib/services/accessibility.service'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Textarea } from '@/components/ui/textarea'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { useToast } from '@/components/ui/toast'\nimport { Save, X } from 'lucide-react'\n\ninterface AccommodationFormProps {\n  organizationId: string\n  studentId: string\n  studentNeedId?: string\n  accommodationId?: string // Pour l'édition\n  initialData?: any\n  onSuccess?: () => void\n  onCancel?: () => void\n}\n\nconst ACCOMMODATION_TYPES = [\n  { value: 'physical', label: 'Physique' },\n  { value: 'pedagogical', label: 'Pédagogique' },\n  { value: 'exam', label: 'Examen' },\n  { value: 'technical', label: 'Aide technique' },\n  { value: 'schedule', label: 'Emploi du temps' },\n]\n\nconst ACCOMMODATION_CATEGORIES = {\n  physical: [\n    { value: 'accessible_room', label: 'Salle accessible' },\n    { value: 'adapted_furniture', label: 'Mobilier adapté' },\n    { value: 'parking', label: 'Stationnement réservé' },\n    { value: 'elevator', label: 'Accès ascenseur' },\n  ],\n  pedagogical: [\n    { value: 'extra_time', label: 'Temps supplémentaire' },\n    { value: 'adapted_materials', label: 'Supports adaptés' },\n    { value: 'tutoring', label: 'Tutorat renforcé' },\n    { value: 'small_group', label: 'Petit groupe' },\n  ],\n  exam: [\n    { value: 'extra_time', label: 'Tiers-temps' },\n    { value: 'separate_room', label: 'Salle séparée' },\n    { value: 'assistant', label: 'Assistant (lecteur/scripteur)' },\n    { value: 'computer', label: 'Ordinateur' },\n  ],\n  technical: [\n    { value: 'screen_reader', label: 'Lecteur d\\'écran' },\n    { value: 'magnifier', label: 'Loupe électronique' },\n    { value: 'wheelchair', label: 'Fauteuil roulant' },\n    { value: 'hearing_aid', label: 'Aide auditive' },\n  ],\n  schedule: [\n    { value: 'flexible_hours', label: 'Horaires aménagés' },\n    { value: 'breaks', label: 'Pauses supplémentaires' },\n    { value: 'reduced_schedule', label: 'Temps partiel' },\n    { value: 'remote_learning', label: 'Formation à distance' },\n  ],\n}\n\nconst STATUS_OPTIONS = [\n  { value: 'active', label: 'Actif' },\n  { value: 'inactive', label: 'Inactif' },\n  { value: 'expired', label: 'Expiré' },\n]\n\nexport function AccommodationForm({\n  organizationId,\n  studentId,\n  studentNeedId,\n  accommodationId,\n  initialData,\n  onSuccess,\n  onCancel,\n}: AccommodationFormProps) {\n  const queryClient = useQueryClient()\n  const { addToast } = useToast()\n\n  const [formData, setFormData] = useState({\n    accommodation_type: initialData?.accommodation_type || 'pedagogical',\n    category: initialData?.category || '',\n    title: initialData?.title || '',\n    description: initialData?.description || '',\n    start_date: initialData?.start_date || new Date().toISOString().split('T')[0],\n    end_date: initialData?.end_date || '',\n    status: initialData?.status || 'active',\n    completion_rate: initialData?.completion_rate || 0,\n    metadata: initialData?.metadata || {},\n  })\n\n  // Mettre à jour les catégories disponibles quand le type change\n  const availableCategories = ACCOMMODATION_CATEGORIES[formData.accommodation_type as keyof typeof ACCOMMODATION_CATEGORIES] || []\n\n  useEffect(() => {\n    // Réinitialiser la catégorie si elle n'est plus valide pour le type sélectionné\n    if (formData.category && !availableCategories.find((c) => c.value === formData.category)) {\n      setFormData((prev) => ({ ...prev, category: '' }))\n    }\n  }, [formData.accommodation_type])\n\n  const saveMutation = useMutation({\n    mutationFn: async () => {\n      const data = {\n        organization_id: organizationId,\n        student_id: studentId,\n        student_need_id: studentNeedId || null,\n        ...formData,\n      }\n\n      if (accommodationId) {\n        return await accessibilityService.updateAccommodation(accommodationId, data)\n      } else {\n        return await accessibilityService.createAccommodation(data)\n      }\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['accessibility-accommodations'] })\n      queryClient.invalidateQueries({ queryKey: ['accessibility-stats'] })\n      addToast({\n        type: 'success',\n        title: accommodationId ? 'Aménagement mis à jour' : 'Aménagement créé',\n        description: `L'aménagement a été ${accommodationId ? 'mis à jour' : 'créé'} avec succès.`,\n      })\n      onSuccess?.()\n    },\n    onError: (error: any) => {\n      addToast({\n        type: 'error',\n        title: 'Erreur',\n        description: error?.message || 'Impossible de sauvegarder l\\'aménagement.',\n      })\n    },\n  })\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault()\n\n    // Validation\n    if (!formData.accommodation_type || !formData.title) {\n      addToast({\n        type: 'error',\n        title: 'Validation échouée',\n        description: 'Veuillez remplir tous les champs obligatoires.',\n      })\n      return\n    }\n\n    saveMutation.mutate()\n  }\n\n  const handleInputChange = (field: string, value: any) => {\n    setFormData((prev) => ({ ...prev, [field]: value }))\n  }\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle>{accommodationId ? 'Modifier l\\'aménagement' : 'Nouvel aménagement'}</CardTitle>\n      </CardHeader>\n      <CardContent>\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\n          {/* Type d'aménagement */}\n          <div>\n            <Label htmlFor=\"accommodation_type\">Type d'aménagement *</Label>\n            <select\n              id=\"accommodation_type\"\n              value={formData.accommodation_type}\n              onChange={(e) => handleInputChange('accommodation_type', e.target.value)}\n              className=\"w-full px-4 py-3 border-2 border-input rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors\"\n              required\n            >\n              {ACCOMMODATION_TYPES.map((type) => (\n                <option key={type.value} value={type.value}>\n                  {type.label}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          {/* Catégorie */}\n          <div>\n            <Label htmlFor=\"category\">Catégorie</Label>\n            <select\n              id=\"category\"\n              value={formData.category}\n              onChange={(e) => handleInputChange('category', e.target.value)}\n              className=\"w-full px-4 py-3 border-2 border-input rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors\"\n            >\n              <option value=\"\">Sélectionner une catégorie...</option>\n              {availableCategories.map((cat) => (\n                <option key={cat.value} value={cat.value}>\n                  {cat.label}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          {/* Titre */}\n          <div>\n            <Label htmlFor=\"title\">Titre *</Label>\n            <Input\n              id=\"title\"\n              value={formData.title}\n              onChange={(e) => handleInputChange('title', e.target.value)}\n              placeholder=\"Ex: Tiers-temps aux examens\"\n              required\n            />\n          </div>\n\n          {/* Description */}\n          <div>\n            <Label htmlFor=\"description\">Description</Label>\n            <Textarea\n              id=\"description\"\n              value={formData.description}\n              onChange={(e) => handleInputChange('description', e.target.value)}\n              placeholder=\"Décrivez l'aménagement en détail...\"\n              rows={4}\n            />\n          </div>\n\n          {/* Dates */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <Label htmlFor=\"start_date\">Date de début *</Label>\n              <Input\n                id=\"start_date\"\n                type=\"date\"\n                value={formData.start_date}\n                onChange={(e) => handleInputChange('start_date', e.target.value)}\n                required\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"end_date\">Date de fin</Label>\n              <Input\n                id=\"end_date\"\n                type=\"date\"\n                value={formData.end_date}\n                onChange={(e) => handleInputChange('end_date', e.target.value)}\n              />\n              <p className=\"text-xs text-muted-foreground mt-1\">Laisser vide si indéterminé</p>\n            </div>\n          </div>\n\n          {/* Statut et progression */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <Label htmlFor=\"status\">Statut</Label>\n              <select\n                id=\"status\"\n                value={formData.status}\n                onChange={(e) => handleInputChange('status', e.target.value)}\n                className=\"w-full px-4 py-3 border-2 border-input rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors\"\n              >\n                {STATUS_OPTIONS.map((status) => (\n                  <option key={status.value} value={status.value}>\n                    {status.label}\n                  </option>\n                ))}\n              </select>\n            </div>\n            <div>\n              <Label htmlFor=\"completion_rate\">Progression (%)</Label>\n              <Input\n                id=\"completion_rate\"\n                type=\"number\"\n                min=\"0\"\n                max=\"100\"\n                value={formData.completion_rate}\n                onChange={(e) => handleInputChange('completion_rate', parseInt(e.target.value) || 0)}\n              />\n              <p className=\"text-xs text-muted-foreground mt-1\">0-100%</p>\n            </div>\n          </div>\n\n          {/* Actions */}\n          <div className=\"flex justify-end gap-3 pt-4 border-t\">\n            {onCancel && (\n              <Button type=\"button\" variant=\"outline\" onClick={onCancel}>\n                <X className=\"h-4 w-4 mr-2\" />\n                Annuler\n              </Button>\n            )}\n            <Button type=\"submit\" disabled={saveMutation.isPending}>\n              <Save className=\"h-4 w-4 mr-2\" />\n              {saveMutation.isPending ? 'Enregistrement...' : 'Enregistrer'}\n            </Button>\n          </div>\n        </form>\n      </CardContent>\n    </Card>\n  )\n}\n","'use client'\n\nimport { Accommodation } from '@/lib/services/accessibility.service'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Badge } from '@/components/ui/badge'\nimport { Button } from '@/components/ui/button'\nimport { Progress } from '@/components/ui/progress'\nimport { Calendar, User, MoreVertical } from 'lucide-react'\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu'\n\ninterface AccommodationCardProps {\n  accommodation: Accommodation\n  onEdit?: () => void\n  onArchive?: () => void\n  showActions?: boolean\n}\n\nconst TYPE_LABELS: Record<string, string> = {\n  physical: 'Physique',\n  pedagogical: 'Pédagogique',\n  exam: 'Examen',\n  technical: 'Aide technique',\n  schedule: 'Emploi du temps',\n}\n\nconst STATUS_COLORS: Record<string, string> = {\n  active: 'bg-green-100 text-green-800',\n  inactive: 'bg-gray-100 text-gray-800',\n  expired: 'bg-red-100 text-red-800',\n}\n\nexport function AccommodationCard({ accommodation, onEdit, onArchive, showActions = true }: AccommodationCardProps) {\n  const isActive = accommodation.status === 'active'\n  const isExpired = accommodation.end_date && new Date(accommodation.end_date) < new Date()\n\n  return (\n    <Card className={`${isActive ? 'border-green-200' : ''} hover:shadow-md transition-shadow`}>\n      <CardHeader>\n        <div className=\"flex items-start justify-between\">\n          <div className=\"flex-1\">\n            <CardTitle className=\"text-base\">{accommodation.title}</CardTitle>\n            <div className=\"flex items-center gap-2 mt-2\">\n              <Badge variant=\"outline\" className=\"text-xs\">\n                {TYPE_LABELS[accommodation.accommodation_type] || accommodation.accommodation_type}\n              </Badge>\n              <Badge className={`${STATUS_COLORS[accommodation.status]} text-xs`}>\n                {accommodation.status === 'active'\n                  ? 'Actif'\n                  : accommodation.status === 'inactive'\n                    ? 'Inactif'\n                    : 'Expiré'}\n              </Badge>\n            </div>\n          </div>\n          {showActions && (\n            <DropdownMenu>\n              <DropdownMenuTrigger asChild>\n                <Button variant=\"ghost\" size=\"sm\">\n                  <MoreVertical className=\"h-4 w-4\" />\n                </Button>\n              </DropdownMenuTrigger>\n              <DropdownMenuContent align=\"end\">\n                <DropdownMenuItem onClick={onEdit}>Modifier</DropdownMenuItem>\n                <DropdownMenuItem onClick={onArchive} className=\"text-red-600\">\n                  Archiver\n                </DropdownMenuItem>\n              </DropdownMenuContent>\n            </DropdownMenu>\n          )}\n        </div>\n      </CardHeader>\n      <CardContent className=\"space-y-3\">\n        {accommodation.description && (\n          <p className=\"text-sm text-muted-foreground line-clamp-2\">{accommodation.description}</p>\n        )}\n\n        {/* Période */}\n        <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\n          <Calendar className=\"h-3 w-3\" />\n          <span>\n            {accommodation.start_date ? new Date(accommodation.start_date).toLocaleDateString('fr-FR') : 'Non défini'}\n            {' → '}\n            {accommodation.end_date ? new Date(accommodation.end_date).toLocaleDateString('fr-FR') : 'Indéterminé'}\n          </span>\n        </div>\n\n        {/* Responsable */}\n        {accommodation.assigned_to_user_id && (\n          <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\n            <User className=\"h-3 w-3\" />\n            <span>Responsable: {accommodation.assigned_to_user_id.slice(0, 8)}...</span>\n          </div>\n        )}\n\n        {/* Progression */}\n        <div className=\"space-y-1\">\n          <div className=\"flex items-center justify-between text-xs\">\n            <span className=\"text-muted-foreground\">Progression</span>\n            <span className=\"font-medium\">{accommodation.completion_rate}%</span>\n          </div>\n          <Progress value={accommodation.completion_rate} className=\"h-2\" />\n        </div>\n\n        {isExpired && (\n          <p className=\"text-xs text-red-600 font-medium\">⚠️ Cet aménagement a expiré</p>\n        )}\n      </CardContent>\n    </Card>\n  )\n}\n","'use client'\n\nimport { useState } from 'react'\nimport { useMutation, useQuery, useQueryClient } from '@tanstack/react-query'\nimport { accessibilityService } from '@/lib/services/accessibility.service'\nimport { createClient } from '@/lib/supabase/client'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Badge } from '@/components/ui/badge'\nimport { useToast } from '@/components/ui/toast'\nimport { Upload, File, Trash2, Eye, CheckCircle, AlertCircle, Download } from 'lucide-react'\n\ninterface DocumentUploadProps {\n  organizationId: string\n  studentId: string\n  studentNeedId?: string\n  showExisting?: boolean\n}\n\nconst DOCUMENT_TYPES = [\n  { value: 'mdph_certificate', label: 'Certificat MDPH' },\n  { value: 'medical_certificate', label: 'Certificat médical' },\n  { value: 'rqth', label: 'Reconnaissance RQTH' },\n  { value: 'disability_card', label: 'Carte d\\'invalidité' },\n  { value: 'other', label: 'Autre' },\n]\n\nexport function DocumentUpload({\n  organizationId,\n  studentId,\n  studentNeedId,\n  showExisting = true,\n}: DocumentUploadProps) {\n  const queryClient = useQueryClient()\n  const { addToast } = useToast()\n  const supabase = createClient()\n\n  const [uploading, setUploading] = useState(false)\n  const [formData, setFormData] = useState({\n    document_type: 'mdph_certificate',\n    title: '',\n    issue_date: '',\n    expiry_date: '',\n    issuer: '',\n    reference_number: '',\n    is_confidential: true,\n    notes: '',\n  })\n\n  // Charger les documents existants\n  const { data: documents = [], isLoading } = useQuery({\n    queryKey: ['accessibility-documents', studentId],\n    queryFn: async () => {\n      return await accessibilityService.getDocuments(organizationId, studentId)\n    },\n    enabled: showExisting && !!studentId,\n  })\n\n  const uploadMutation = useMutation({\n    mutationFn: async ({ file, metadata }: { file: File; metadata: any }) => {\n      // 1. Upload le fichier vers Supabase Storage\n      const fileExt = file.name.split('.').pop()\n      const fileName = `${studentId}/${Date.now()}.${fileExt}`\n      const filePath = `accessibility-documents/${fileName}`\n\n      const { data: uploadData, error: uploadError } = await supabase.storage\n        .from('accessibility-documents')\n        .upload(fileName, file, {\n          cacheControl: '3600',\n          upsert: false,\n        })\n\n      if (uploadError) {\n        console.error('Upload error:', uploadError)\n        throw new Error(`Erreur d'upload: ${uploadError.message}`)\n      }\n\n      // 2. Créer l'entrée dans la base de données\n      return await accessibilityService.uploadDocument({\n        organization_id: organizationId,\n        student_id: studentId,\n        student_need_id: studentNeedId || null,\n        file_path: uploadData.path,\n        file_name: file.name,\n        file_size: file.size,\n        mime_type: file.type,\n        ...metadata,\n      })\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['accessibility-documents'] })\n      addToast({\n        type: 'success',\n        title: 'Document uploadé',\n        description: 'Le document a été uploadé avec succès.',\n      })\n      // Réinitialiser le formulaire\n      setFormData({\n        document_type: 'mdph_certificate',\n        title: '',\n        issue_date: '',\n        expiry_date: '',\n        issuer: '',\n        reference_number: '',\n        is_confidential: true,\n        notes: '',\n      })\n      setUploading(false)\n    },\n    onError: (error: any) => {\n      setUploading(false)\n      addToast({\n        type: 'error',\n        title: 'Erreur d\\'upload',\n        description: error?.message || 'Impossible d\\'uploader le document.',\n      })\n    },\n  })\n\n  const deleteMutation = useMutation({\n    mutationFn: async (documentId: string) => {\n      // Récupérer le document pour obtenir le file_path\n      const doc = documents.find((d) => d.id === documentId)\n      if (doc?.file_path) {\n        // Supprimer du storage\n        await supabase.storage.from('accessibility-documents').remove([doc.file_path])\n      }\n      // Supprimer de la DB\n      return await accessibilityService.deleteDocument(documentId)\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['accessibility-documents'] })\n      addToast({\n        type: 'success',\n        title: 'Document supprimé',\n        description: 'Le document a été supprimé avec succès.',\n      })\n    },\n    onError: (error: any) => {\n      addToast({\n        type: 'error',\n        title: 'Erreur',\n        description: error?.message || 'Impossible de supprimer le document.',\n      })\n    },\n  })\n\n  const handleFileSelect = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0]\n    if (!file) return\n\n    // Validation taille (10MB max)\n    if (file.size > 10 * 1024 * 1024) {\n      addToast({\n        type: 'error',\n        title: 'Fichier trop volumineux',\n        description: 'Le fichier ne doit pas dépasser 10 MB.',\n      })\n      return\n    }\n\n    // Validation type\n    const allowedTypes = ['application/pdf', 'image/jpeg', 'image/png', 'image/jpg']\n    if (!allowedTypes.includes(file.type)) {\n      addToast({\n        type: 'error',\n        title: 'Type de fichier non autorisé',\n        description: 'Formats acceptés: PDF, JPG, PNG',\n      })\n      return\n    }\n\n    setUploading(true)\n    uploadMutation.mutate({ file, metadata: formData })\n  }\n\n  const handleDownload = async (document: any) => {\n    try {\n      const { data, error } = await supabase.storage\n        .from('accessibility-documents')\n        .download(document.file_path)\n\n      if (error) throw error\n\n      // Créer un lien de téléchargement\n      const url = URL.createObjectURL(data)\n      const a = window.document.createElement('a')\n      a.href = url\n      a.download = document.file_name\n      a.click()\n      URL.revokeObjectURL(url)\n    } catch (error: any) {\n      addToast({\n        type: 'error',\n        title: 'Erreur de téléchargement',\n        description: error?.message || 'Impossible de télécharger le document.',\n      })\n    }\n  }\n\n  const formatFileSize = (bytes: number) => {\n    if (bytes < 1024) return bytes + ' B'\n    if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB'\n    return (bytes / (1024 * 1024)).toFixed(1) + ' MB'\n  }\n\n  const formatDate = (dateStr: string | null) => {\n    if (!dateStr) return 'Non défini'\n    return new Date(dateStr).toLocaleDateString('fr-FR')\n  }\n\n  const isExpired = (expiryDate: string | null) => {\n    if (!expiryDate) return false\n    return new Date(expiryDate) < new Date()\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Formulaire d'upload */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Upload className=\"h-5 w-5\" />\n            Uploader un document\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <Label htmlFor=\"document_type\">Type de document *</Label>\n              <select\n                id=\"document_type\"\n                value={formData.document_type}\n                onChange={(e) => setFormData((prev) => ({ ...prev, document_type: e.target.value }))}\n                className=\"w-full px-4 py-3 border-2 border-input rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors\"\n              >\n                {DOCUMENT_TYPES.map((type) => (\n                  <option key={type.value} value={type.value}>\n                    {type.label}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <Label htmlFor=\"title\">Titre *</Label>\n              <Input\n                id=\"title\"\n                value={formData.title}\n                onChange={(e) => setFormData((prev) => ({ ...prev, title: e.target.value }))}\n                placeholder=\"Ex: Certificat MDPH 2024\"\n              />\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <Label htmlFor=\"issue_date\">Date d'émission</Label>\n              <Input\n                id=\"issue_date\"\n                type=\"date\"\n                value={formData.issue_date}\n                onChange={(e) => setFormData((prev) => ({ ...prev, issue_date: e.target.value }))}\n              />\n            </div>\n\n            <div>\n              <Label htmlFor=\"expiry_date\">Date d'expiration</Label>\n              <Input\n                id=\"expiry_date\"\n                type=\"date\"\n                value={formData.expiry_date}\n                onChange={(e) => setFormData((prev) => ({ ...prev, expiry_date: e.target.value }))}\n              />\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <Label htmlFor=\"issuer\">Organisme émetteur</Label>\n              <Input\n                id=\"issuer\"\n                value={formData.issuer}\n                onChange={(e) => setFormData((prev) => ({ ...prev, issuer: e.target.value }))}\n                placeholder=\"Ex: MDPH Paris\"\n              />\n            </div>\n\n            <div>\n              <Label htmlFor=\"reference_number\">Numéro de référence</Label>\n              <Input\n                id=\"reference_number\"\n                value={formData.reference_number}\n                onChange={(e) => setFormData((prev) => ({ ...prev, reference_number: e.target.value }))}\n                placeholder=\"Ex: MDPH-2024-12345\"\n              />\n            </div>\n          </div>\n\n          <div>\n            <Label htmlFor=\"file_upload\">Fichier (PDF, JPG, PNG - 10MB max) *</Label>\n            <Input\n              id=\"file_upload\"\n              type=\"file\"\n              accept=\".pdf,.jpg,.jpeg,.png\"\n              onChange={handleFileSelect}\n              disabled={uploading || !formData.title}\n            />\n            {!formData.title && (\n              <p className=\"text-xs text-amber-600 mt-1\">Veuillez d'abord renseigner un titre</p>\n            )}\n          </div>\n\n          {uploading && (\n            <div className=\"flex items-center gap-2 text-sm text-primary\">\n              <div className=\"animate-spin h-4 w-4 border-2 border-primary border-t-transparent rounded-full\" />\n              Upload en cours...\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Liste des documents existants */}\n      {showExisting && (\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <File className=\"h-5 w-5\" />\n              Documents uploadés ({documents.length})\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            {isLoading ? (\n              <p className=\"text-sm text-muted-foreground\">Chargement...</p>\n            ) : documents.length === 0 ? (\n              <p className=\"text-sm text-muted-foreground\">Aucun document uploadé</p>\n            ) : (\n              <div className=\"space-y-3\">\n                {documents.map((doc) => (\n                  <div\n                    key={doc.id}\n                    className=\"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors\"\n                  >\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center gap-2\">\n                        <File className=\"h-4 w-4 text-muted-foreground\" />\n                        <span className=\"font-medium\">{doc.title}</span>\n                        {doc.verified && (\n                          <Badge variant=\"outline\" className=\"bg-green-100 text-green-800 text-xs\">\n                            <CheckCircle className=\"h-3 w-3 mr-1\" />\n                            Vérifié\n                          </Badge>\n                        )}\n                        {isExpired(doc.expiry_date) && (\n                          <Badge variant=\"outline\" className=\"bg-red-100 text-red-800 text-xs\">\n                            <AlertCircle className=\"h-3 w-3 mr-1\" />\n                            Expiré\n                          </Badge>\n                        )}\n                      </div>\n                      <div className=\"flex items-center gap-4 mt-1 text-xs text-muted-foreground\">\n                        <span>{doc.file_name}</span>\n                        <span>{formatFileSize(doc.file_size || 0)}</span>\n                        {doc.issue_date && <span>Émis le {formatDate(doc.issue_date)}</span>}\n                        {doc.expiry_date && <span>Expire le {formatDate(doc.expiry_date)}</span>}\n                      </div>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <Button variant=\"ghost\" size=\"sm\" onClick={() => handleDownload(doc)}>\n                        <Download className=\"h-4 w-4\" />\n                      </Button>\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={() => deleteMutation.mutate(doc.id)}\n                        disabled={deleteMutation.isPending}\n                      >\n                        <Trash2 className=\"h-4 w-4 text-red-600\" />\n                      </Button>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":"0DAEA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QCPA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAGA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,OAEA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,QASO,SAAS,EAAgB,WAAE,CAAS,gBAAE,CAAc,WAAE,CAAS,UAAE,CAAQ,CAAwB,EACtG,IAAM,EAAc,CAAA,EAAA,EAAA,cAAc,AAAd,IACd,CAAE,UAAQ,CAAE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,IACvB,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,GAI3B,CAAE,KAAM,EAAkB,EAAE,CAAE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,CAC9C,SAAU,CAAC,mBAAmB,CAC9B,QAAS,IAAM,EAAA,oBAAoB,CAAC,kBAAkB,GACtD,OAAO,CACT,GAGM,CAAE,KAAM,CAAY,CAAE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,CACtC,SAAU,CAAC,eAAgB,EAAU,CACrC,QAAS,IAAM,EAAA,oBAAoB,CAAC,yBAAyB,CAAC,GAC9D,OAAO,CACT,GAGM,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,CACvC,eAAgB,GAAc,iBAAkB,EAChD,oBAAqB,GAAc,qBAAuB,EAAE,CAC5D,uBAAwB,GAAc,wBAA0B,GAChE,qBAAsB,GAAc,uBAAwB,EAC5D,YAAa,GAAc,aAAe,GAC1C,iBAAkB,GAAc,kBAAoB,GACpD,8BAA+B,GAAc,gCAAiC,EAC9E,+BAAgC,GAAc,gCAAkC,GAChF,iCAAkC,GAAc,kCAAoC,GACpF,kCAAmC,GAAc,mCAAqC,GACtF,0BAA2B,GAAc,4BAA6B,EACtE,2BAA4B,GAAc,4BAA8B,GACxE,qBAAsB,GAAc,uBAAwB,EAC5D,sBAAuB,GAAc,uBAAyB,GAC9D,uBAAwB,GAAc,wBAA0B,GAChE,0BAA2B,GAAc,2BAA6B,GACtE,mBAAoB,GAAc,qBAAsB,CAC1D,GAGM,EAAe,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,CAC/B,WAAY,UACV,IAAM,EAAO,CACX,gBAAiB,EACjB,WAAY,EACZ,GAAG,CAAQ,AACb,SAEA,AAAI,EACK,MAAM,EAAA,IADG,gBACiB,CAAC,iBAAiB,CAAC,EAAa,EAAE,CAAE,GAE9D,MAAM,EAAA,oBAAoB,CAAC,iBAAiB,CAAC,EAExD,EACA,UAAW,KACT,EAAY,iBAAiB,CAAC,CAAE,SAAU,CAAC,eAAe,AAAC,GAC3D,EAAY,iBAAiB,CAAC,CAAE,SAAU,CAAC,sBAAsB,AAAC,GAClE,EAAS,CACP,KAAM,UACN,MAAO,0BACP,YAAa,0DACf,GACA,KACF,EACA,QAAS,AAAC,IACR,EAAS,CACP,KAAM,QACN,MAAO,SACP,YAAa,GAAO,SAAW,0CACjC,EACF,CACF,GAEM,EAAoB,CAAC,EAAe,KACxC,EAAY,AAAC,IAAU,CAAE,EAAH,CAAM,CAAI,CAAE,CAAC,EAAM,CAAE,EAAM,CAAC,CACpD,EAEM,EAAwB,AAAD,IAC3B,EAAY,AAAC,IACX,IAAM,EAAU,EAAK,mBAAmB,QACxC,AAAI,EAAQ,QAAQ,CAAC,GACZ,CAAE,GAAG,CAAI,CAAE,AADU,oBACW,EAAQ,MAAM,CAAC,AAAC,GAAO,IAAO,EAAQ,EAEtE,CAAE,GAAG,CAAI,CAAE,oBAAqB,IAAI,EAAS,EAAO,AAAC,CAEhE,EACF,EAeA,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,SANc,AAAD,CAMH,GALhB,EAAE,cAAc,GAChB,EAAa,MAAM,EACrB,EAGgC,UAAU,sBAEtC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6BACZ,MAAM,IAAI,CAAC,CAAE,QAAQ,AAAW,GAAG,GAAG,CAAC,CAAC,EAAG,IAC1C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAY,UAAU,qCACrB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,UAAW,CAAC,sDAAsD,EAChE,EAAI,GAAK,EAAO,2BAA6B,4BAAA,CAC7C,UAED,EAAI,IAEN,EAAI,GACH,CAAA,EAAA,EAAA,GAAA,EADgB,AACf,MAAA,CAAI,UAAW,CAAC,WAAW,EAAE,EAAI,EAAI,EAAO,gBAAkB,cAAA,CAAe,KATxE,MAcd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sCACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,yCAAgC,gBAChD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,yCAAgC,UAChD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,yCAAgC,YAChD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,yCAAgC,aAChD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,yCAAgC,yBAM5C,IAAT,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,WACH,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,WACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,uCACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,UAAC,wEAEnB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,sBACrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CACP,GAAG,iBACH,QAAS,EAAS,cAAc,CAChC,gBAAkB,AAAD,GAAa,EAAkB,iBAAkB,KAEpE,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,QAAQ,iBAAiB,UAAU,+BAAsB,uEAKjE,EAAS,cAAc,EACtB,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,kCAAyB,4BACxC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CACP,GAAG,yBACH,YAAY,8DACZ,KAAM,EACN,MAAO,EAAS,sBAAsB,CACtC,SAAU,AAAC,GAAM,EAAkB,yBAA0B,EAAE,MAAM,CAAC,KAAK,OAI/E,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6CACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CACP,GAAG,uBACH,QAAS,EAAS,oBAAoB,CACtC,gBAAiB,AAAC,GAAY,EAAkB,uBAAwB,KAE1E,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,QAAQ,uBAAuB,UAAU,+BAAsB,2CAKvE,EAAS,oBAAoB,EAC5B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,uBAAc,2BAC7B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,cACH,MAAO,EAAS,WAAW,CAC3B,SAAU,AAAC,GAAM,EAAkB,cAAe,EAAE,MAAM,CAAC,KAAK,OAGpE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,4BAAmB,sBAClC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,mBACH,KAAK,OACL,MAAO,EAAS,gBAAgB,CAChC,SAAW,AAAD,GAAO,EAAkB,mBAAoB,EAAE,MAAM,CAAC,KAAK,sBAa/E,IAAT,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,WACH,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,WACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,sBACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,UAAC,gGAInB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iDACZ,EAAgB,GAAG,CAAC,AAAC,GACpB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAEC,UAAW,CAAC,uDAAuD,EAChE,EAAS,mBAAmB,CAAc,QAAQ,CAAC,EAAK,EAAE,EACvD,+BACA,wCAAA,CACJ,CACF,QAAS,IAAM,EAAqB,EAAK,EAAE,WAE3C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CACP,QAAU,EAAS,mBAAmB,CAAc,QAAQ,CAAC,EAAK,EAAE,EACpE,gBAAiB,IAAM,EAAqB,EAAK,EAAE,IAErD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,uBAAe,EAAK,OAAO,GACxC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCAAiC,EAAK,WAAW,UAf7D,EAAK,EAAE,UA0Bd,IAAT,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,WACH,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,WACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,wBACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,UAAC,uEAEnB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,sBAErB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CACP,GAAG,gCACH,QAAS,EAAS,6BAA6B,CAC/C,gBAAiB,AAAC,GAAY,EAAkB,gCAAiC,KAEnF,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,QAAQ,gCAAgC,UAAU,+BAAsB,gDAIhF,EAAS,6BAA6B,EACrC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CACP,YAAY,sFACZ,KAAM,EACN,MAAO,EAAS,8BAA8B,CAC9C,SAAU,AAAC,GAAM,EAAkB,iCAAkC,EAAE,MAAM,CAAC,KAAK,EACnF,UAAU,YAMhB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CACP,GAAG,mCACH,QAAS,EAAS,gCAAgC,CAClD,gBAAiB,AAAC,GAAY,EAAkB,mCAAoC,KAEtF,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,QAAQ,mCAAmC,UAAU,+BAAsB,iCAInF,EAAS,gCAAgC,EACxC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CACP,YAAY,sEACZ,KAAM,EACN,MAAO,EAAS,iCAAiC,CACjD,SAAU,AAAC,GAAM,EAAkB,oCAAqC,EAAE,MAAM,CAAC,KAAK,EACtF,UAAU,YAMhB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CACP,GAAG,4BACH,QAAS,EAAS,yBAAyB,CAC3C,gBAAiB,AAAC,GAAY,EAAkB,4BAA6B,KAE/E,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,QAAQ,4BAA4B,UAAU,+BAAsB,qCAI5E,EAAS,yBAAyB,EACjC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CACP,YAAY,gEACZ,KAAM,EACN,MAAO,EAAS,0BAA0B,CAC1C,SAAU,AAAC,GAAM,EAAkB,6BAA8B,EAAE,MAAM,CAAC,KAAK,EAC/E,UAAU,YAMhB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CACP,GAAG,uBACH,QAAS,EAAS,oBAAoB,CACtC,gBAAiB,AAAC,GAAY,EAAkB,uBAAwB,KAE1E,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,QAAQ,uBAAuB,UAAU,+BAAsB,0CAIvE,EAAS,oBAAoB,EAC5B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CACP,YAAY,uEACZ,KAAM,EACN,MAAO,EAAS,qBAAqB,CACrC,SAAU,AAAC,GAAM,EAAkB,wBAAyB,EAAE,MAAM,CAAC,KAAK,EAC1E,UAAU,kBASZ,IAAT,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,WACH,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,WACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,qBACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,UAAC,wFAInB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,sBACrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,kCAAyB,oBACxC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,yBACH,YAAY,+BACZ,MAAO,EAAS,sBAAsB,CACtC,SAAU,AAAC,GAAM,EAAkB,yBAA0B,EAAE,MAAM,CAAC,KAAK,OAG/E,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,qCAA4B,iCAC3C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,4BACH,YAAY,uCACZ,MAAO,EAAS,yBAAyB,CACzC,SAAU,AAAC,GAAM,EAAkB,4BAA6B,EAAE,MAAM,CAAC,KAAK,aAQ9E,IAAT,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,WACH,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,WACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,iBACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,UAAC,gDAEnB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,sBACrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6DACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sCAA6B,4IAI1C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CACP,GAAG,qBACH,QAAS,EAAS,kBAAkB,CACpC,gBAAiB,AAAC,GAAY,EAAkB,qBAAsB,KAExE,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,QAAQ,qBAAqB,UAAU,mBAAU,4JAO5D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0CACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,UAAE,8GACH,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,gBAAO,wIAU5B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,UACE,EAAO,GACN,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAK,SAAS,QAAQ,UAAU,QAtUjC,CAsU0C,IArUrD,EAAO,GAAG,EAAQ,EAAO,EAC/B,YAqUY,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,iBAAiB,iBAK9C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACZ,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAK,SAAS,QAAQ,QAAQ,QAAS,WAAU,YAI1D,EA5aU,EA6aT,CAAA,EADM,AACN,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAK,SAAS,QAvVf,CAuVwB,IAtVnC,KAAmB,EAAZ,AAAoB,EAAO,EACxC,YAqVmD,UAEvC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,YAAY,CAAA,CAAC,UAAU,oBAG1B,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAK,SAAS,SAAU,EAAa,SAAS,WACpD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,iBACf,EAAa,SAAS,CAAG,oBAAsB,wCAO9D,CCzcA,IAAA,EAAA,EAAA,CAAA,CAAA,QAYA,IAAM,EAAsB,CAC1B,CAAE,MAAO,WAAY,MAAO,UAAW,EACvC,CAAE,MAAO,cAAe,MAAO,aAAc,EAC7C,CAAE,MAAO,OAAQ,MAAO,QAAS,EACjC,CAAE,MAAO,YAAa,MAAO,gBAAiB,EAC9C,CAAE,MAAO,WAAY,MAAO,iBAAkB,EAC/C,CAEK,EAA2B,CAC/B,SAAU,CACR,CAAE,MAAO,kBAAmB,MAAO,kBAAmB,EACtD,CAAE,MAAO,oBAAqB,MAAO,iBAAkB,EACvD,CAAE,MAAO,UAAW,MAAO,uBAAwB,EACnD,CAAE,MAAO,WAAY,MAAO,iBAAkB,EAC/C,CACD,YAAa,CACX,CAAE,MAAO,aAAc,MAAO,sBAAuB,EACrD,CAAE,MAAO,oBAAqB,MAAO,kBAAmB,EACxD,CAAE,MAAO,WAAY,MAAO,kBAAmB,EAC/C,CAAE,MAAO,cAAe,MAAO,cAAe,EAC/C,CACD,KAAM,CACJ,CAAE,MAAO,aAAc,MAAO,aAAc,EAC5C,CAAE,MAAO,gBAAiB,MAAO,eAAgB,EACjD,CAAE,MAAO,YAAa,MAAO,+BAAgC,EAC7D,CAAE,MAAO,WAAY,MAAO,YAAa,EAC1C,CACD,UAAW,CACT,CAAE,MAAO,gBAAiB,MAAO,iBAAmB,EACpD,CAAE,MAAO,YAAa,MAAO,oBAAqB,EAClD,CAAE,MAAO,aAAc,MAAO,kBAAmB,EACjD,CAAE,MAAO,cAAe,MAAO,eAAgB,EAChD,CACD,SAAU,CACR,CAAE,MAAO,iBAAkB,MAAO,mBAAoB,EACtD,CAAE,MAAO,SAAU,MAAO,wBAAyB,EACnD,CAAE,MAAO,mBAAoB,MAAO,eAAgB,EACpD,CAAE,MAAO,kBAAmB,MAAO,sBAAuB,EAC3D,AACH,EAEM,EAAiB,CACrB,CAAE,MAAO,SAAU,MAAO,OAAQ,EAClC,CAAE,MAAO,WAAY,MAAO,SAAU,EACtC,CAAE,MAAO,UAAW,MAAO,QAAS,EACrC,CAEM,SAAS,EAAkB,CAChC,gBAAc,CACd,WAAS,eACT,CAAa,iBACb,CAAe,aACf,CAAW,WACX,CAAS,UACT,CAAQ,CACe,EACvB,IAAM,EAAc,CAAA,EAAA,EAAA,cAAc,AAAd,IACd,UAAE,CAAQ,CAAE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,IAEvB,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,CACvC,mBAAoB,GAAa,oBAAsB,cACvD,SAAU,GAAa,UAAY,GACnC,MAAO,GAAa,OAAS,GAC7B,YAAa,GAAa,aAAe,GACzC,WAAY,GAAa,YAAc,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,CAC7E,SAAU,GAAa,UAAY,GACnC,OAAQ,GAAa,QAAU,SAC/B,gBAAiB,GAAa,iBAAmB,EACjD,SAAU,GAAa,UAAY,CAAC,CACtC,GAGM,EAAsB,CAAwB,CAAC,EAAS,kBAAkB,CAA0C,EAAI,EAAE,CAEhI,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KAEJ,EAAS,QAAQ,EAAI,CAAC,EAAoB,IAAI,CAAE,AAAD,GAAO,EAAE,KAAK,GAAK,EAAS,QAAQ,GAAG,AACxF,EAAY,AAAC,IAAU,CAAE,EAAH,CAAM,CAAI,CAAE,SAAU,EAAG,CAAC,EAEpD,EAAG,CAAC,EAAS,kBAAkB,CAAC,EAEhC,IAAM,EAAe,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,CAC/B,WAAY,UACV,IAAM,EAAO,CACX,gBAAiB,EACjB,WAAY,EACZ,gBAAiB,GAAiB,KAClC,GAAG,CAAQ,AACb,SAEA,AAAI,EACK,MAAM,EAAA,OADM,aACc,CAAC,mBAAmB,CAAC,EAAiB,GAEhE,MAAM,EAAA,oBAAoB,CAAC,mBAAmB,CAAC,EAE1D,EACA,UAAW,KACT,EAAY,iBAAiB,CAAC,CAAE,SAAU,CAAC,+BAA+B,AAAC,GAC3E,EAAY,iBAAiB,CAAC,CAAE,SAAU,CAAC,sBAAsB,AAAC,GAClE,EAAS,CACP,KAAM,UACN,MAAO,EAAkB,yBAA2B,mBACpD,YAAa,CAAC,6BAAoB,EAAE,EAAkB,aAAe,OAAO,gBAAa,CAAC,AAC5F,GACA,KACF,EACA,QAAS,AAAC,IACR,EAAS,CACP,KAAM,QACN,MAAO,SACP,YAAa,GAAO,SAAW,0CACjC,EACF,CACF,GAkBM,EAAoB,CAAC,EAAe,KACxC,EAAY,AAAC,IAAU,CAAE,EAAH,CAAM,CAAI,CAAE,CAAC,EAAM,CAAE,EAAM,CAAC,CACpD,EAEA,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,WACH,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,UACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAE,EAAkB,yBAA4B,yBAE5D,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACV,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,SA1BU,AAAD,CA0BC,GAtBpB,CAHA,EAAE,cAAc,GAGZ,AAAC,EAAS,kBAAkB,EAAK,EAAD,AAAU,KAAK,EAAE,AASrD,EAAa,MAAM,GARjB,EAAS,CACP,KAAM,QACN,MAAO,qBACP,YAAa,gDACf,EAKJ,EAYoC,UAAU,sBAEtC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,8BAAqB,yBACpC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,GAAG,qBACH,MAAO,EAAS,kBAAkB,CAClC,SAAU,AAAC,GAAM,EAAkB,qBAAsB,EAAE,MAAM,CAAC,KAAK,EACvE,UAAU,2HACV,QAAQ,CAAA,CAAA,WAEP,EAAoB,GAAG,CAAC,AAAC,GACxB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAwB,MAAO,EAAK,KAAK,UACvC,EAAK,KAAK,EADA,EAAK,KAAK,QAQ7B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,oBAAW,cAC1B,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,GAAG,WACH,MAAO,EAAS,QAAQ,CACxB,SAAW,AAAD,GAAO,EAAkB,WAAY,EAAE,MAAM,CAAC,KAAK,EAC7D,UAAU,qIAEV,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,YAAG,kCAChB,EAAoB,GAAG,CAAC,AAAC,GACxB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAuB,MAAO,EAAI,KAAK,UACrC,EAAI,KAAK,EADC,EAAI,KAAK,SAQ5B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,iBAAQ,YACvB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,QACH,MAAO,EAAS,KAAK,CACrB,SAAU,AAAC,GAAM,EAAkB,QAAS,EAAE,MAAM,CAAC,KAAK,EAC1D,YAAY,8BACZ,QAAQ,CAAA,CAAA,OAKZ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,uBAAc,gBAC7B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CACP,GAAG,cACH,MAAO,EAAS,WAAW,CAC3B,SAAU,AAAC,GAAM,EAAkB,cAAe,EAAE,MAAM,CAAC,KAAK,EAChE,YAAY,sCACZ,KAAM,OAKV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,sBAAa,oBAC5B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,aACH,KAAK,OACL,MAAO,EAAS,UAAU,CAC1B,SAAU,AAAC,GAAM,EAAkB,aAAc,EAAE,MAAM,CAAC,KAAK,EAC/D,QAAQ,CAAA,CAAA,OAGZ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,oBAAW,gBAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,WACH,KAAK,OACL,MAAO,EAAS,QAAQ,CACxB,SAAU,AAAC,GAAM,EAAkB,WAAY,EAAE,MAAM,CAAC,KAAK,IAE/D,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,8CAAqC,sCAKtD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,kBAAS,WACxB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,GAAG,SACH,MAAO,EAAS,MAAM,CACtB,SAAU,AAAC,GAAM,EAAkB,SAAU,EAAE,MAAM,CAAC,KAAK,EAC3D,UAAU,oIAET,EAAe,GAAG,CAAC,AAAC,GACnB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAA0B,MAAO,EAAO,KAAK,UAC3C,EAAO,KAAK,EADF,EAAO,KAAK,QAM/B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,2BAAkB,oBACjC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,kBACH,KAAK,SACL,IAAI,IACJ,IAAI,MACJ,MAAO,EAAS,eAAe,CAC/B,SAAU,AAAC,GAAM,EAAkB,kBAAmB,SAAS,EAAE,MAAM,CAAC,KAAK,GAAK,KAEpF,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,8CAAqC,iBAKtD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iDACZ,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAK,SAAS,QAAQ,UAAU,QAAS,YAC/C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAC,CAAA,CAAC,UAAU,iBAAiB,aAIlC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAK,SAAS,SAAU,EAAa,SAAS,WACpD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,iBACf,EAAa,SAAS,CAAG,oBAAsB,2BAO9D,CCnSA,IAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAcA,IAAM,EAAsC,CAC1C,SAAU,WACV,YAAa,cACb,KAAM,SACN,UAAW,iBACX,SAAU,iBACZ,EAEM,EAAwC,CAC5C,OAAQ,8BACR,SAAU,4BACV,QAAS,yBACX,EAEO,SAAS,EAAkB,eAAE,CAAa,QAAE,CAAM,WAAE,CAAS,aAAE,GAAc,CAAI,CAA0B,EAChH,IAAM,EAAoC,WAAzB,EAAc,MAAM,CAC/B,EAAY,EAAc,QAAQ,EAAI,IAAI,KAAK,EAAc,QAAQ,EAAI,IAAI,KAEnF,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,CAAA,EAAG,EAAW,mBAAqB,GAAG,kCAAkC,CAAC,WACxF,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,UACT,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,qBAAa,EAAc,KAAK,GACrD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,UAAU,UAAU,mBAChC,CAAW,CAAC,EAAc,kBAAkB,CAAC,EAAI,EAAc,kBAAkB,GAEpF,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAW,CAAA,EAAG,CAAa,CAAC,EAAc,MAAM,CAAC,CAAC,QAAQ,CAAC,UACtC,WAAzB,EAAc,MAAM,CACjB,QACA,AAAyB,eAAX,MAAM,CAClB,UACA,iBAIX,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,YAAY,CAAA,WACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,mBAAmB,CAAA,CAAC,OAAO,CAAA,CAAA,WAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,QAAQ,KAAK,cAC3B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,YAAY,CAAA,CAAC,UAAU,gBAG5B,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,mBAAmB,CAAA,CAAC,MAAM,gBACzB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,gBAAgB,CAAA,CAAC,QAAS,WAAQ,aACnC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,gBAAgB,CAAA,CAAC,QAAS,EAAW,UAAU,wBAAe,wBAQzE,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,sBACpB,EAAc,WAAW,EACxB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sDAA8C,EAAc,WAAW,GAItF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kEACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,YACpB,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,WACE,EAAc,UAAU,CAAG,IAAI,KAAK,EAAc,UAAU,EAAE,kBAAkB,CAAC,SAAW,aAC5F,MACA,EAAc,QAAQ,CAAG,IAAI,KAAK,EAAc,QAAQ,EAAE,kBAAkB,CAAC,SAAW,oBAK5F,EAAc,mBAAmB,EAChC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kEACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,YAChB,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,WAAK,gBAAc,EAAc,mBAAmB,CAAC,KAAK,CAAC,EAAG,GAAG,YAKtE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sDACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,iCAAwB,gBACxC,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,wBAAe,EAAc,eAAe,CAAC,UAE/D,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,MAAO,EAAc,eAAe,CAAE,UAAU,WAG3D,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,4CAAmC,qCAK1D,CCtGA,IAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QASA,IAAM,EAAiB,CACrB,CAAE,MAAO,mBAAoB,MAAO,iBAAkB,EACtD,CAAE,MAAO,sBAAuB,MAAO,oBAAqB,EAC5D,CAAE,MAAO,OAAQ,MAAO,qBAAsB,EAC9C,CAAE,MAAO,kBAAmB,MAAO,oBAAsB,EACzD,CAAE,MAAO,QAAS,MAAO,OAAQ,EAClC,CAEM,SAAS,EAAe,gBAC7B,CAAc,WACd,CAAS,eACT,CAAa,cACb,GAAe,CAAI,CACC,EACpB,IAAM,EAAc,CAAA,EAAA,EAAA,cAAA,AAAc,IAC5B,UAAE,CAAQ,CAAE,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,IACf,EAAW,CAAA,EAAA,EAAA,YAAA,AAAY,IAEvB,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACrC,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,CACvC,cAAe,mBACf,MAAO,GACP,WAAY,GACZ,YAAa,GACb,OAAQ,GACR,iBAAkB,GAClB,iBAAiB,EACjB,MAAO,EACT,GAGM,CAAE,KAAM,EAAY,EAAE,CAAE,WAAS,CAAE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,CACnD,SAAU,CAAC,0BAA2B,EAAU,CAChD,QAAS,SACA,MAAM,EAAA,oBAAoB,CAAC,YAAY,CAAC,EAAgB,GAEjE,QAAS,GAAgB,CAAC,CAAC,CAC7B,GAEM,EAAiB,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,CACjC,WAAY,MAAO,MAAE,CAAI,UAAE,CAAQ,CAAiC,IAElE,IAAM,EAAU,EAAK,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,GAClC,EAAW,CAAA,EAAG,EAAU,CAAC,EAAE,KAAK,GAAG,GAAG,CAAC,EAAE,EAAA,CAAS,CAGlD,CAAE,KAAM,CAAU,CAAE,MAAO,CAAW,CAAE,CAAG,MAAM,EAAS,OAAO,CACpE,IAAI,CAAC,2BACL,MAAM,CAAC,EAAU,EAAM,CACtB,aAAc,OACd,QAAQ,CACV,GAEF,GAAI,EAEF,MADA,KADe,GACP,KAAK,CAAC,gBAAiB,GACrB,AAAJ,MAAU,CAAC,iBAAiB,EAAE,EAAY,OAAO,CAAA,CAAE,EAI3D,OAAO,MAAM,EAAA,oBAAoB,CAAC,cAAc,CAAC,CAC/C,gBAAiB,EACjB,WAAY,EACZ,gBAAiB,GAAiB,KAClC,UAAW,EAAW,IAAI,CAC1B,UAAW,EAAK,IAAI,CACpB,UAAW,EAAK,IAAI,CACpB,UAAW,EAAK,IAAI,CACpB,GAAG,CAAQ,AACb,EACF,EACA,UAAW,KACT,EAAY,iBAAiB,CAAC,CAAE,SAAU,CAAC,0BAA0B,AAAC,GACtE,EAAS,CACP,KAAM,UACN,MAAO,mBACP,YAAa,wCACf,GAEA,EAAY,CACV,cAAe,mBACf,MAAO,GACP,WAAY,GACZ,YAAa,GACb,OAAQ,GACR,iBAAkB,GAClB,gBAAiB,GACjB,MAAO,EACT,GACA,EAAa,GACf,EACA,QAAS,AAAC,IACR,GAAa,GACb,EAAS,CACP,KAAM,QACN,MAAO,kBACP,YAAa,GAAO,SAAW,oCACjC,EACF,CACF,GAEM,EAAiB,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,CACjC,WAAY,MAAO,IAEjB,IAAM,EAAM,EAAU,IAAI,CAAC,AAAC,GAAM,EAAE,EAAE,GAAK,GAM3C,OALI,GAAK,WAAW,AAElB,MAAM,EAAS,OAAO,CAAC,IAAI,CAAC,2BAA2B,MAAM,CAAC,CAAC,EAAI,SAAS,CAAC,EAGxE,MAAM,EAAA,oBAAoB,CAAC,cAAc,CAAC,EACnD,EACA,UAAW,KACT,EAAY,iBAAiB,CAAC,CAAE,SAAU,CAAC,0BAA0B,AAAC,GACtE,EAAS,CACP,KAAM,UACN,MAAO,oBACP,YAAa,yCACf,EACF,EACA,QAAS,AAAC,IACR,EAAS,CACP,KAAM,QACN,MAAO,SACP,YAAa,GAAO,SAAW,sCACjC,EACF,CACF,GAEM,EAAmB,MAAO,IAC9B,IAAM,EAAO,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,AAChC,CAAK,GAAD,CAGA,EAHO,AAGF,IAAI,CAAG,KAAK,IACnB,EAAS,CADiB,AAExB,KAAM,CAFwB,OAG9B,MAAO,0BACP,YAAa,wCACf,GAKmB,AAChB,CADiB,kBAAmB,aAAc,YAAa,YAAY,CAC9D,QAAQ,CAAC,EAAK,IAAI,GASpC,AATuC,GAS1B,GACb,EAAe,MAAM,CAAC,MAAE,EAAM,SAAU,CAAS,IAT/C,EAAS,CACP,KAAM,QACN,MAAO,+BACP,YAAa,iCACf,GAMJ,EAEM,EAAiB,MAAO,IAC5B,GAAI,CACF,GAAM,CAAE,MAAI,OAAE,CAAK,CAAE,CAAG,MAAM,EAAS,OAAO,CAC3C,IAAI,CAAC,2BACL,QAAQ,CAAC,EAAS,SAAS,EAE9B,GAAI,EAAO,MAAM,EAGjB,IAAM,EAAM,IAAI,eAAe,CAAC,GAC1B,EAAI,OAAO,QAAQ,CAAC,aAAa,CAAC,KACxC,EAAE,IAAI,CAAG,EACT,EAAE,QAAQ,CAAG,EAAS,SAAS,CAC/B,EAAE,KAAK,GACP,IAAI,eAAe,CAAC,EACtB,CAAE,MAAO,EAAY,CACnB,EAAS,CACP,KAAM,QACN,MAAO,2BACP,YAAa,GAAO,SAAW,wCACjC,EACF,CACF,EAQM,EAAa,AAAC,GAClB,AAAK,EACE,EADH,EACO,GADG,EACE,GAAS,kBAAkB,CAAC,SADvB,aASvB,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBAEb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,WACH,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,UACT,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,oCACnB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,YAAY,4BAIlC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,sBACrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,yBAAgB,uBAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,GAAG,gBACH,MAAO,EAAS,aAAa,CAC7B,SAAU,AAAC,GAAM,EAAY,AAAC,GAAU,EAAE,EAAH,CAAM,CAAI,CAAE,cAAe,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC,EAClF,UAAU,oIAET,EAAe,GAAG,CAAE,AAAD,GAClB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAwB,MAAO,EAAK,KAAK,UACvC,EAAK,KAAK,EADA,EAAK,KAAK,QAO7B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,iBAAQ,YACvB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,QACH,MAAO,EAAS,KAAK,CACrB,SAAU,AAAC,GAAM,EAAY,AAAC,IAAU,CAAE,EAAH,CAAM,CAAI,CAAE,MAAO,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC,EAC1E,YAAY,mCAKlB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,sBAAa,oBAC5B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,aACH,KAAK,OACL,MAAO,EAAS,UAAU,CAC1B,SAAU,AAAC,GAAM,EAAY,AAAC,IAAU,CAAE,EAAH,CAAM,CAAI,CAAE,WAAY,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC,OAInF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,uBAAc,sBAC7B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,cACH,KAAK,OACL,MAAO,EAAS,WAAW,CAC3B,SAAU,AAAC,GAAM,EAAY,AAAC,IAAU,CAAE,EAAH,CAAM,CAAI,CAAE,YAAa,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC,UAKtF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,kBAAS,uBACxB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,SACH,MAAO,EAAS,MAAM,CACtB,SAAU,AAAC,GAAM,EAAY,AAAC,IAAU,CAAE,EAAH,CAAM,CAAI,CAAE,OAAQ,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC,EAC3E,YAAY,sBAIhB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,4BAAmB,wBAClC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,mBACH,MAAO,EAAS,gBAAgB,CAChC,SAAU,AAAC,GAAM,EAAa,AAAD,IAAW,CAAE,EAAH,CAAM,CAAI,CAAE,iBAAkB,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC,EACrF,YAAY,8BAKlB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,uBAAc,yCAC7B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,cACH,KAAK,OACL,OAAO,uBACP,SAAU,EACV,SAAU,GAAa,CAAC,EAAS,KAAK,GAEvC,CAAC,EAAS,KAAK,EACd,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,uCAA8B,4CAI9C,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yDACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mFAAmF,8BAQzG,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,WACH,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,UACT,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,oCACnB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,YAAY,uBACP,EAAU,MAAM,CAAC,SAG1C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACT,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCAAgC,kBACtB,IAArB,EAAU,MAAM,CAClB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCAAgC,2BAE7C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACZ,EAAU,GAAG,CAAC,AAAC,QA/HX,EAXK,QA2IR,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAEC,UAAU,uGAEV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,kCAChB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,uBAAe,EAAI,KAAK,GACvC,EAAI,QAAQ,EACX,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,UAAU,UAAU,gDACjC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,iBAAiB,aAI3C,CA7IjB,CAAC,GA6I0B,EAAI,OA7IlB,IA6I6B,GA5IvC,AADiB,IACb,KAAK,GAAc,IAAI,MA6IZ,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,UAAU,UAAU,4CACjC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,iBAAiB,eAK9C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uEACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAM,EAAI,SAAS,GACpB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAjKrB,AAAI,CAiKuB,EAAe,EAAI,SAAS,EAAI,GAjK/C,KAAa,CAAP,CAAe,KAC7B,EAAQ,OAAO,CAAa,CAAC,EAAQ,EAAhB,EAAgB,CAAI,CAAE,OAAO,CAAC,GAAK,MACrD,CAAC,EAAS,MAAD,CAAQ,AAAI,CAAC,CAAE,OAAO,CAAC,GAAK,QAgKvB,EAAI,UAAU,EAAI,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,WAAK,WAAS,EAAW,EAAI,UAAU,KAC1D,EAAI,WAAW,EAAI,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,WAAK,aAAW,EAAW,EAAI,WAAW,WAGnE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,QAAQ,KAAK,KAAK,QAAS,IAAM,EAAe,YAC9D,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,cAEtB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,QAAQ,QACR,KAAK,KACL,QAAS,IAAM,EAAe,MAAM,CAAC,EAAI,EAAE,EAC3C,SAAU,EAAe,SAAS,UAElC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,gCArCjB,EAAI,EAAE,aAiD/B,CJxXA,IAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAUA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,QAQe,SAAS,IAEtB,IAAM,EADS,AACG,AADH,CAAA,EAAA,EAAA,SAAA,AAAS,IACC,EAAE,CACrB,MAAE,CAAI,CAAE,CAAG,CAAA,EAAA,EAAA,OAAA,AAAO,IAClB,EAAW,CAAA,EAAA,EAAA,YAAA,AAAY,IAEvB,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAC3C,CAAC,EAAuB,EAAyB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAC7D,CAAC,EAAsB,EAAwB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAM,MAGhE,CAAE,KAAM,CAAO,CAAE,UAAW,CAAc,CAAE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAM,CACjE,SAAU,CAAC,UAAW,EAAU,CAChC,QAAS,UACP,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,EAC3B,IAAI,CAAC,YACL,MAAM,CAAC,oCACP,EAAE,CAAC,KAAM,GACT,MAAM,GACT,GAAI,EAAO,MAAM,EACjB,OAAO,CACT,EACA,QAAS,CAAC,CAAC,CACb,GAGM,CAAE,KAAM,CAAI,CAAE,UAAW,CAAW,CAAE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,CACtD,SAAU,CAAC,6BAA8B,EAAU,CACnD,QAAS,SACA,MAAM,EAAA,oBAAoB,CAAC,yBAAyB,CAAC,GAE9D,QAAS,CAAC,CAAC,CACb,GAGM,CAAE,KAAM,EAAiB,EAAE,CAAE,UAAW,CAAqB,CAAE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,CAC/E,SAAU,CAAC,+BAAgC,EAAU,CACrD,QAAS,SACA,MAAM,EAAA,oBAAoB,CAAC,wBAAwB,CAAC,GAE7D,QAAS,CAAC,CAAC,CACb,GAGM,CAAE,KAAM,EAAkB,EAAE,CAAE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,CAC9C,SAAU,CAAC,iCAAiC,CAC5C,QAAS,SACA,MAAM,EAAA,oBAAoB,CAAC,kBAAkB,EAExD,GAOM,EAA+B,KACnC,GAAyB,GACzB,EAAwB,KAC1B,EAEA,GAAI,CAAC,GAAQ,EACX,MACE,CAAA,EAAA,EAAA,GAAA,AAFyB,EAExB,MAAA,CAAI,UAAU,eACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCAAgC,oBAKnD,GAAI,CAAC,EACH,MACE,CAFU,AAEV,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,eACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,UACH,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,6BACrB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,wCACvB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,sCAA6B,yBAC3C,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,8CAAqC,uFAGlD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,oCACT,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,WACL,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,iBAAiB,qBAWpD,IAAM,EAA0B,GAAM,oBAClC,EAAgB,MAAM,CAAC,AAAC,GAAO,EAAK,mBAAmB,CAAC,QAAQ,CAAC,EAAG,EAAE,GACtE,EAAE,CAEN,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BAEb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,oCACT,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,QAAQ,KAAK,eAC3B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,iBAAiB,cAI1C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,uDACZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,yBACf,EAAQ,UAAU,CAAC,IAAE,EAAQ,SAAS,IAEzC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sCAA6B,yDAQhD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,WACH,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,UACT,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,oCACnB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,YAAY,8BAIhC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,kDACrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCAAgC,UAC7C,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,uBAAe,EAAQ,KAAK,EAAI,qBAE/C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCAAgC,cAC7C,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,uBAAe,EAAQ,QAAQ,EAAE,MAAQ,mBAExD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCAAgC,YAC7C,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,uBAAe,EAAQ,OAAO,EAAE,MAAQ,yBAM1D,AAAC,EAqBA,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,WACH,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,UACT,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,oCACnB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,YAAY,wCAGlC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACI,YAAhB,EAAK,MAAM,EACV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,uCAA8B,wBAEhD,AAAgB,eAAX,MAAM,EACV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,qCAA4B,oBAE9B,gBAAhB,EAAK,MAAM,EACV,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,wCACf,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,iBAAiB,2BAI5C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAS,IAAM,GAAgB,GAAO,QAAQ,UAAU,KAAK,cAAK,qBAMhF,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,sBAErB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,8CAAqC,4BAClD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,uBACV,EAAK,cAAc,CAClB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,yBAAgB,iCAEhC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,gCAMX,EAAK,cAAc,EAAI,EAAwB,MAAM,CAAG,GACvD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,8CAAqC,sBAClD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gCACZ,EAAwB,GAAG,CAAC,AAAC,GAC5B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAa,QAAQ,mBACxB,EAAG,OAAO,EADD,EAAG,EAAE,QASxB,EAAK,sBAAsB,EAC1B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,8CAAqC,gBAClD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,mBAAW,EAAK,sBAAsB,MAKtD,EAAK,oBAAoB,EACxB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4EACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCAAgC,6BAC7C,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,qCAA4B,WAE1C,EAAK,WAAW,EACf,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCAAgC,gBAC7C,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,qCAA6B,EAAK,WAAW,MAG7D,EAAK,gBAAgB,EACpB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCAAgC,sBAC7C,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,qCACV,IAAI,KAAK,EAAK,gBAAgB,EAAE,kBAAkB,CAAC,iBAQ9D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDACZ,EAAK,6BAA6B,EACjC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kCACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,oCAA2B,2BACxC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCACV,EAAK,8BAA8B,EAAI,gBAI7C,EAAK,gCAAgC,EACpC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kCACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,oCAA2B,8BACxC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCACV,EAAK,iCAAiC,EAAI,gBAIhD,EAAK,yBAAyB,EAC7B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kCACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,oCAA2B,yBACxC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCACV,EAAK,0BAA0B,EAAI,gBAIzC,EAAK,oBAAoB,EACxB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kCACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,oCAA2B,qBACxC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCACV,EAAK,qBAAqB,EAAI,0BAvI3C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,wCACd,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,eACrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,8CACvB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mBACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,6CAAoC,8CAGlD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,uCAA8B,iGAG3C,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAS,IAAM,GAAgB,GAAO,QAAQ,oBACpD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,iBAAiB,sCAqI7C,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,aAAa,iBAAiB,UAAU,mBAC5C,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,oCAClB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,CAAC,MAAM,2BAAiB,iBACnB,EAAe,MAAM,CAAC,OAEvC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,MAAM,qBAAY,+BAMjC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,CAAC,MAAM,iBAAiB,UAAU,sBAC5C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,iCAAwB,8BACtC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAS,IAAM,GAAyB,GAAO,KAAK,eAC1D,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,iBAAiB,2BAKpC,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,UACH,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,eACrB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCAAgC,uCAGrB,IAA1B,EAAe,MAAM,CACvB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,UACH,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,6BACrB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,iDACnB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,sCAA6B,sBAC3C,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,8CAAqC,qEAGlD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAS,IAAM,GAAyB,aAC9C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,iBAAiB,+BAMvC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iDACZ,EAAe,GAAG,CAAC,AAAC,GACnB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAEC,cAAe,EACf,OAAQ,IAAM,CA5R5B,EA4RoD,GA3RpD,GAAyB,IA4RX,WAAW,CA7RD,AA6RC,CAAA,GAHN,EAAc,EAAE,QAW/B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,MAAM,qBACjB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACC,eAAgB,EAAK,eAAe,EAAI,GACxC,UAAW,EACX,cAAe,GAAM,GACrB,YAAY,CAAA,CAAA,SAMlB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAM,EAAc,aAAc,WACxC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,mDACvB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,YAAY,CAAA,WACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UAAC,uCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,iBAAiB,CAAA,UAAC,iEAIrB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACC,UAAW,EACX,eAAgB,EAAK,eAAe,EAAI,GACxC,UAAW,IAAM,GAAgB,GACjC,SAAU,IAAM,GAAgB,UAMtC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAM,EAAuB,aAAc,WACjD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,mDACvB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,YAAY,CAAA,WACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACT,EAAuB,yBAA4B,uBAEtD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,iBAAiB,CAAA,UACf,EACG,6CACA,qDAGR,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACC,eAAgB,EAAK,eAAe,EAAI,GACxC,UAAW,EACX,cAAe,GAAM,GACrB,gBAAiB,GAAsB,GACvC,YAAa,EACb,UAAW,EACX,SAAU,WAMtB"}