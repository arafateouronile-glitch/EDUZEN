module.exports=[510586,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(433217),e=a.i(370025),f=a.i(937927),g=a.i(913216),h=a.i(989451),i=a.i(703130),j=a.i(340695),k=a.i(205522),l=a.i(917171),m=a.i(546893),n=a.i(280281),o=a.i(965733),p=a.i(621958),q=a.i(915618),r=a.i(683245),s=a.i(781560),t=a.i(953722),u=a.i(104720),v=a.i(321161),w=a.i(177156),x=a.i(400210),y=a.i(238246),z=a.i(50944),A=a.i(800006);function B(){let{user:a}=(0,g.useAuth)();(0,z.useRouter)();let B=(0,f.useQueryClient)(),[C,D]=(0,c.useState)("categories"),[E,F]=(0,c.useState)(!1),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)(null),[K,L]=(0,c.useState)(null),{data:M}=(0,d.useQuery)({queryKey:["documentation-categories",a?.organization_id],queryFn:()=>h.documentationService.getCategories(a?.organization_id||""),enabled:!!a?.organization_id}),{data:N}=(0,d.useQuery)({queryKey:["documentation-all-articles",a?.organization_id],queryFn:async()=>{if(!M||0===M.length)return[];let a=M.map(a=>h.documentationService.getArticlesByCategory(a.id,"draft").catch(()=>[]));return(await Promise.all(a)).flat()},enabled:!!M&&M.length>0}),O=(0,e.useMutation)({mutationFn:async b=>h.documentationService.createCategory({...b,organization_id:a?.organization_id}),onSuccess:()=>{B.invalidateQueries({queryKey:["documentation-categories"]}),F(!1),J(null)}}),P=(0,e.useMutation)({mutationFn:async({id:a,data:b})=>h.documentationService.updateCategory(a,b),onSuccess:()=>{B.invalidateQueries({queryKey:["documentation-categories"]}),F(!1),J(null)}}),Q=(0,e.useMutation)({mutationFn:async a=>h.documentationService.deleteCategory(a),onSuccess:()=>{B.invalidateQueries({queryKey:["documentation-categories"]})}}),R=(0,e.useMutation)({mutationFn:async b=>h.documentationService.createArticle({...b,organization_id:a?.organization_id,author_id:a?.id,status:"draft"}),onSuccess:()=>{B.invalidateQueries({queryKey:["documentation-all-articles"]}),H(!1),L(null)}}),S=(0,e.useMutation)({mutationFn:async({id:a,data:b})=>h.documentationService.updateArticle(a,b),onSuccess:()=>{B.invalidateQueries({queryKey:["documentation-all-articles"]}),H(!1),L(null)}}),T=(0,e.useMutation)({mutationFn:async a=>h.documentationService.deleteArticle(a),onSuccess:()=>{B.invalidateQueries({queryKey:["documentation-all-articles"]})}});return(0,b.jsxs)("div",{className:"container mx-auto py-8 px-4 max-w-7xl",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)(y.default,{href:"/dashboard/documentation",children:(0,b.jsxs)(j.Button,{variant:"ghost",size:"sm",className:"mb-4",children:[(0,b.jsx)(x.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Retour à la documentation"]})}),(0,b.jsxs)("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[(0,b.jsx)(v.Settings,{className:"h-8 w-8"}),"Administration de la documentation"]}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Gérez les catégories et articles de la documentation"})]}),(0,b.jsxs)(p.Tabs,{value:C,onValueChange:D,children:[(0,b.jsxs)(p.TabsList,{className:"mb-6",children:[(0,b.jsxs)(p.TabsTrigger,{value:"categories",children:[(0,b.jsx)(t.BookOpen,{className:"h-4 w-4 mr-2"}),"Catégories"]}),(0,b.jsxs)(p.TabsTrigger,{value:"articles",children:[(0,b.jsx)(u.FileText,{className:"h-4 w-4 mr-2"}),"Articles"]})]}),(0,b.jsx)(p.TabsContent,{value:"categories",children:(0,b.jsxs)(i.Card,{children:[(0,b.jsx)(i.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(i.CardTitle,{children:"Catégories"}),(0,b.jsxs)(o.Dialog,{open:E,onOpenChange:F,children:[(0,b.jsx)(o.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(j.Button,{onClick:()=>{J(null),F(!0)},children:[(0,b.jsx)(q.Plus,{className:"h-4 w-4 mr-2"}),"Nouvelle catégorie"]})}),(0,b.jsxs)(o.DialogContent,{className:"max-w-2xl",children:[(0,b.jsxs)(o.DialogHeader,{children:[(0,b.jsx)(o.DialogTitle,{children:I?"Modifier la catégorie":"Nouvelle catégorie"}),(0,b.jsx)(o.DialogDescription,{children:"Créez ou modifiez une catégorie de documentation"})]}),(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault();let b=new FormData(a.currentTarget),c={name:b.get("name"),slug:b.get("slug"),description:b.get("description"),icon:b.get("icon"),order_index:parseInt(b.get("order_index"))||0,is_public:"on"===b.get("is_public")};I?P.mutate({id:I.id,data:c}):O.mutate(c)},children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(l.Label,{htmlFor:"name",children:"Nom *"}),(0,b.jsx)(k.Input,{id:"name",name:"name",defaultValue:I?.name,required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(l.Label,{htmlFor:"slug",children:"Slug *"}),(0,b.jsx)(k.Input,{id:"slug",name:"slug",defaultValue:I?.slug,required:!0,placeholder:"exemple-categorie"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(l.Label,{htmlFor:"description",children:"Description"}),(0,b.jsx)(m.Textarea,{id:"description",name:"description",defaultValue:I?.description,rows:3})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(l.Label,{htmlFor:"icon",children:"Icône (nom lucide-react)"}),(0,b.jsx)(k.Input,{id:"icon",name:"icon",defaultValue:I?.icon,placeholder:"BookOpen"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(l.Label,{htmlFor:"order_index",children:"Ordre d'affichage"}),(0,b.jsx)(k.Input,{id:"order_index",name:"order_index",type:"number",defaultValue:I?.order_index||0})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(n.Switch,{checked:I?.is_public||!1,onCheckedChange:a=>{I&&J({...I,is_public:a})}}),(0,b.jsx)(l.Label,{htmlFor:"is_public",children:"Documentation publique"})]})]}),(0,b.jsxs)(o.DialogFooter,{className:"mt-6",children:[(0,b.jsx)(j.Button,{type:"button",variant:"outline",onClick:()=>{F(!1),J(null)},children:"Annuler"}),(0,b.jsx)(j.Button,{type:"submit",disabled:O.isPending,children:I?"Modifier":"Créer"})]})]})]})]})]})}),(0,b.jsx)(i.CardContent,{children:M&&M.length>0?(0,b.jsx)("div",{className:"space-y-2",children:M.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"font-semibold",children:a.name}),a.description&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.description}),(0,b.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-muted-foreground",children:[(0,b.jsxs)("span",{children:["Slug: ",a.slug]}),(0,b.jsxs)("span",{children:["Ordre: ",a.order_index]}),(0,b.jsx)("span",{children:a.is_public?"Publique":"Privée"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(j.Button,{variant:"outline",size:"sm",onClick:()=>{J(a),F(!0)},children:(0,b.jsx)(r.Edit,{className:"h-4 w-4"})}),(0,b.jsx)(j.Button,{variant:"outline",size:"sm",onClick:()=>{confirm("Êtes-vous sûr de vouloir supprimer cette catégorie ?")&&Q.mutate(a.id)},children:(0,b.jsx)(s.Trash2,{className:"h-4 w-4 text-red-600"})})]})]},a.id))}):(0,b.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"Aucune catégorie. Créez-en une pour commencer."})})]})}),(0,b.jsx)(p.TabsContent,{value:"articles",children:(0,b.jsxs)(i.Card,{children:[(0,b.jsx)(i.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(i.CardTitle,{children:"Articles"}),(0,b.jsxs)(o.Dialog,{open:G,onOpenChange:H,children:[(0,b.jsx)(o.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(j.Button,{onClick:()=>{L(null),H(!0)},children:[(0,b.jsx)(q.Plus,{className:"h-4 w-4 mr-2"}),"Nouvel article"]})}),(0,b.jsxs)(o.DialogContent,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(o.DialogHeader,{children:[(0,b.jsx)(o.DialogTitle,{children:K?"Modifier l'article":"Nouvel article"}),(0,b.jsx)(o.DialogDescription,{children:"Créez ou modifiez un article de documentation"})]}),(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault();let b=new FormData(a.currentTarget),c={category_id:b.get("category_id"),title:b.get("title"),slug:b.get("slug"),content:b.get("content"),excerpt:b.get("excerpt"),status:b.get("status"),is_featured:"on"===b.get("is_featured"),order_index:parseInt(b.get("order_index"))||0,tags:b.get("tags")?.split(",").map(a=>a.trim()).filter(Boolean)||[],meta_title:b.get("meta_title"),meta_description:b.get("meta_description"),published_at:"published"===b.get("status")?new Date().toISOString():null};K?S.mutate({id:K.id,data:c}):R.mutate(c)},children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(l.Label,{htmlFor:"article_category_id",children:"Catégorie *"}),(0,b.jsxs)(A.Select,{value:K?.category_id||"",onValueChange:a=>{K&&L({...K,category_id:a})},children:[(0,b.jsx)(A.SelectTrigger,{children:(0,b.jsx)(A.SelectValue,{placeholder:"Sélectionner une catégorie"})}),(0,b.jsx)(A.SelectContent,{children:M?.map(a=>(0,b.jsx)(A.SelectItem,{value:a.id,children:a.name},a.id))})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(l.Label,{htmlFor:"article_title",children:"Titre *"}),(0,b.jsx)(k.Input,{id:"article_title",name:"title",defaultValue:K?.title,required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(l.Label,{htmlFor:"article_slug",children:"Slug *"}),(0,b.jsx)(k.Input,{id:"article_slug",name:"slug",defaultValue:K?.slug,required:!0,placeholder:"exemple-article"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(l.Label,{htmlFor:"article_excerpt",children:"Résumé"}),(0,b.jsx)(m.Textarea,{id:"article_excerpt",name:"excerpt",defaultValue:K?.excerpt,rows:2})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(l.Label,{htmlFor:"article_content",children:"Contenu (Markdown) *"}),(0,b.jsx)(m.Textarea,{id:"article_content",name:"content",defaultValue:K?.content,required:!0,rows:15,className:"font-mono text-sm"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(l.Label,{htmlFor:"article_status",children:"Statut"}),(0,b.jsxs)(A.Select,{value:K?.status||"draft",onValueChange:a=>{K&&L({...K,status:a})},children:[(0,b.jsx)(A.SelectTrigger,{children:(0,b.jsx)(A.SelectValue,{})}),(0,b.jsxs)(A.SelectContent,{children:[(0,b.jsx)(A.SelectItem,{value:"draft",children:"Brouillon"}),(0,b.jsx)(A.SelectItem,{value:"published",children:"Publié"}),(0,b.jsx)(A.SelectItem,{value:"archived",children:"Archivé"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(l.Label,{htmlFor:"article_order_index",children:"Ordre d'affichage"}),(0,b.jsx)(k.Input,{id:"article_order_index",name:"order_index",type:"number",defaultValue:K?.order_index||0})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(l.Label,{htmlFor:"article_tags",children:"Tags (séparés par des virgules)"}),(0,b.jsx)(k.Input,{id:"article_tags",name:"tags",defaultValue:K?.tags?.join(", "),placeholder:"tag1, tag2, tag3"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(n.Switch,{checked:K?.is_featured||!1,onCheckedChange:a=>{K&&L({...K,is_featured:a})}}),(0,b.jsx)(l.Label,{htmlFor:"article_is_featured",children:"Article en vedette"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(l.Label,{htmlFor:"article_meta_title",children:"Titre SEO"}),(0,b.jsx)(k.Input,{id:"article_meta_title",name:"meta_title",defaultValue:K?.meta_title})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(l.Label,{htmlFor:"article_meta_description",children:"Description SEO"}),(0,b.jsx)(m.Textarea,{id:"article_meta_description",name:"meta_description",defaultValue:K?.meta_description,rows:2})]})]}),(0,b.jsxs)(o.DialogFooter,{className:"mt-6",children:[(0,b.jsx)(j.Button,{type:"button",variant:"outline",onClick:()=>{H(!1),L(null)},children:"Annuler"}),(0,b.jsx)(j.Button,{type:"submit",disabled:R.isPending,children:K?"Modifier":"Créer"})]})]})]})]})]})}),(0,b.jsx)(i.CardContent,{children:N&&N.length>0?(0,b.jsx)("div",{className:"space-y-2",children:N.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("h3",{className:"font-semibold",children:a.title}),(0,b.jsx)("span",{className:`text-xs px-2 py-1 rounded ${"published"===a.status?"bg-green-100 text-green-800":"draft"===a.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:"published"===a.status?"Publié":"draft"===a.status?"Brouillon":"Archivé"}),a.is_featured&&(0,b.jsx)("span",{className:"text-xs px-2 py-1 rounded bg-blue-100 text-blue-800",children:"En vedette"})]}),a.excerpt&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:a.excerpt}),(0,b.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-muted-foreground",children:[(0,b.jsxs)("span",{children:["Slug: ",a.slug]}),(0,b.jsxs)("span",{children:[a.view_count," vues"]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:["published"===a.status&&(0,b.jsx)(y.default,{href:`/dashboard/documentation/${a.category?.slug}/${a.slug}`,children:(0,b.jsx)(j.Button,{variant:"outline",size:"sm",children:(0,b.jsx)(w.Eye,{className:"h-4 w-4"})})}),(0,b.jsx)(j.Button,{variant:"outline",size:"sm",onClick:()=>{L(a),H(!0)},children:(0,b.jsx)(r.Edit,{className:"h-4 w-4"})}),(0,b.jsx)(j.Button,{variant:"outline",size:"sm",onClick:()=>{confirm("Êtes-vous sûr de vouloir supprimer cet article ?")&&T.mutate(a.id)},children:(0,b.jsx)(s.Trash2,{className:"h-4 w-4 text-red-600"})})]})]},a.id))}):(0,b.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"Aucun article. Créez-en un pour commencer."})})]})})]})]})}a.s(["default",()=>B])}];

//# sourceMappingURL=app_%28dashboard%29_dashboard_documentation_admin_page_tsx_cc7dda5f._.js.map