module.exports=[224361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},814747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},915618,a=>{"use strict";let b=(0,a.i(170106).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],915618)},400210,a=>{"use strict";let b=(0,a.i(170106).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],400210)},114548,a=>{"use strict";let b=(0,a.i(170106).default)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);a.s(["Save",()=>b],114548)},773320,a=>{"use strict";let b=(0,a.i(170106).default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);a.s(["Upload",()=>b],773320)},426099,a=>{"use strict";var b=a.i(269240);let c=new class{supabase;constructor(a){this.supabase=a||(0,b.createClient)()}async getAllPrograms(a,b){let c=this.supabase.from("programs").select("*").eq("organization_id",a);b?.isActive!==void 0&&(c=c.eq("is_active",b.isActive)),b?.search&&(c=c.or(`name.ilike.%${b.search}%,code.ilike.%${b.search}%,description.ilike.%${b.search}%`));let{data:d,error:e}=await c.order("created_at",{ascending:!1});if(e)throw e;return d}async getProgramById(a){let{data:b,error:c}=await this.supabase.from("programs").select(`
        *,
        formations(*)
      `).eq("id",a).single();if(c)throw c;return b}async createProgram(a){let{data:b,error:c}=await this.supabase.from("programs").insert(a).select().single();if(c)throw c;return b}async updateProgram(a,b){let{data:c,error:d}=await this.supabase.from("programs").update(b).eq("id",a).select().single();if(d)throw d;return c}async deleteProgram(a){return this.updateProgram(a,{is_active:!1})}async getFormationsByProgram(a){let{data:b,error:c}=await this.supabase.from("formations").select("*").eq("program_id",a).order("created_at",{ascending:!1});if(c)throw c;return b}async getGlobalStats(a){let{data:b,error:c}=await this.supabase.from("programs").select("id, is_active, created_at").eq("organization_id",a);if(c)throw c;let d=b||[],e=d.length,f=d.filter(a=>a.is_active).length,g=d.filter(a=>!a.is_active).length,h=0,i=d.map(a=>a.id);if(i.length>0){let{count:a,error:b}=await this.supabase.from("formations").select("*",{count:"exact",head:!0}).in("program_id",i);if(b)throw b;h=a||0}let j=0;if(i.length>0){let{data:a,error:b}=await this.supabase.from("formations").select("id").in("program_id",i);if(b)throw b;let c=a?.map(a=>a.id)||[];if(c.length>0){let{count:a,error:b}=await this.supabase.from("sessions").select("*",{count:"exact",head:!0}).in("formation_id",c);if(b)throw b;j=a||0}}let k=0;if(i.length>0){let{data:a,error:b}=await this.supabase.from("formations").select("id").in("program_id",i);if(b)throw b;let c=a?.map(a=>a.id)||[];if(c.length>0){let{data:a,error:b}=await this.supabase.from("sessions").select("id").in("formation_id",c);if(b)throw b;let d=a?.map(a=>a.id)||[];if(d.length>0){let{count:a,error:b}=await this.supabase.from("enrollments").select("*",{count:"exact",head:!0}).in("session_id",d);if(b)throw b;k=a||0}}}let l=[{name:"Actifs",value:f,color:"#335ACF"},{name:"Inactifs",value:g,color:"#6B7280"}].filter(a=>a.value>0),m={};return d.forEach(a=>{if(a.created_at){let b=new Date(a.created_at),c=`${b.getFullYear()}-${String(b.getMonth()+1).padStart(2,"0")}`;m[c]=(m[c]||0)+1}}),{total:e,active:f,inactive:g,totalFormations:h,totalSessions:j,totalEnrollments:k,statusData:l,monthlyData:Object.entries(m).sort(([a],[b])=>a.localeCompare(b)).slice(-6).map(([a,b])=>({month:new Date(a+"-01").toLocaleDateString("fr-FR",{month:"short",year:"numeric"}),programmes:b}))}}};a.s(["programService",0,c])},437536,a=>{"use strict";var b=a.i(88780);let c=b.z.object({first_name:b.z.string().min(1,"Le prénom est requis").max(100,"Le prénom est trop long"),last_name:b.z.string().min(1,"Le nom est requis").max(100,"Le nom est trop long"),date_of_birth:b.z.string().optional().or(b.z.literal("")),gender:b.z.enum(["male","female","other"]).optional().or(b.z.literal("")),email:b.z.string().email("Email invalide").optional().or(b.z.literal("")),phone:b.z.string().optional().or(b.z.literal("")),address:b.z.string().optional().or(b.z.literal("")),city:b.z.string().optional().or(b.z.literal("")),class_id:b.z.string().optional().or(b.z.literal("")),enrollment_date:b.z.string().min(1,"La date d'inscription est requise"),guardian_first_name:b.z.string().min(1,"Le prénom du tuteur est requis"),guardian_last_name:b.z.string().min(1,"Le nom du tuteur est requis"),guardian_relationship:b.z.enum(["parent","guardian","other"]).default("parent"),guardian_phone_primary:b.z.string().min(1,"Le téléphone principal du tuteur est requis"),guardian_phone_secondary:b.z.string().optional().or(b.z.literal("")),guardian_email:b.z.string().email("Email invalide").optional().or(b.z.literal("")),guardian_address:b.z.string().optional().or(b.z.literal(""))});b.z.object({first_name:b.z.string().min(1,"Le prénom est requis").max(100,"Le prénom est trop long"),last_name:b.z.string().min(1,"Le nom est requis").max(100,"Le nom est trop long"),date_of_birth:b.z.string().optional().or(b.z.literal("")),gender:b.z.enum(["male","female","other"]).optional().or(b.z.literal("")),email:b.z.string().email("Email invalide").optional().or(b.z.literal("")),phone:b.z.string().optional().or(b.z.literal("")),address:b.z.string().optional().or(b.z.literal("")),city:b.z.string().optional().or(b.z.literal("")),class_id:b.z.string().optional().or(b.z.literal("")),enrollment_date:b.z.string().min(1,"La date d'inscription est requise"),status:b.z.enum(["active","inactive","graduated"]).default("active")});let d=b.z.object({code:b.z.string().min(1,"Le code est requis").max(50,"Le code est trop long"),name:b.z.string().min(1,"Le nom est requis").max(200,"Le nom est trop long"),subtitle:b.z.string().optional().or(b.z.literal("")),description:b.z.string().optional().or(b.z.literal("")),category:b.z.string().optional().or(b.z.literal("")),program_version:b.z.string().optional().or(b.z.literal("")),version_date:b.z.string().optional().or(b.z.literal("")),duration_hours:b.z.string().optional().or(b.z.literal("")),duration_days:b.z.string().optional().or(b.z.literal("")),photo_url:b.z.string().url("URL invalide").optional().or(b.z.literal("")),price:b.z.string().optional().or(b.z.literal("")),price_enterprise:b.z.string().optional().or(b.z.literal("")),price_individual:b.z.string().optional().or(b.z.literal("")),price_freelance:b.z.string().optional().or(b.z.literal("")),currency:b.z.string().default("XOF"),payment_plan:b.z.enum(["full","installment","free"]).default("full"),published_online:b.z.boolean().default(!1),is_public:b.z.boolean().default(!1),eligible_cpf:b.z.boolean().default(!1),cpf_code:b.z.string().optional().or(b.z.literal("")),modalities:b.z.string().optional().or(b.z.literal("")),training_action_type:b.z.string().optional().or(b.z.literal("")),pedagogical_objectives:b.z.string().optional().or(b.z.literal("")),learner_profile:b.z.string().optional().or(b.z.literal("")),training_content:b.z.string().optional().or(b.z.literal("")),execution_follow_up:b.z.string().optional().or(b.z.literal("")),certification_modalities:b.z.string().optional().or(b.z.literal("")),quality:b.z.string().optional().or(b.z.literal("")),accounting_product_config:b.z.string().optional().or(b.z.literal("")),edof_export_fields:b.z.string().optional().or(b.z.literal("")),competence_domains:b.z.string().optional().or(b.z.literal("")),prerequisites:b.z.string().optional().or(b.z.literal("")),capacity_max:b.z.string().optional().or(b.z.literal("")),age_min:b.z.string().optional().or(b.z.literal("")),age_max:b.z.string().optional().or(b.z.literal("")),certification_issued:b.z.boolean().default(!1),is_active:b.z.boolean().default(!0)}),e=b.z.object({program_id:b.z.string().min(1,"Le programme est requis"),code:b.z.string().min(1,"Le code est requis").max(50,"Le code est trop long"),name:b.z.string().min(1,"Le nom est requis").max(200,"Le nom est trop long"),subtitle:b.z.string().optional().or(b.z.literal("")),photo_url:b.z.string().url("URL invalide").optional().or(b.z.literal("")),category:b.z.string().optional().or(b.z.literal("")),description:b.z.string().optional().or(b.z.literal("")),program_version:b.z.string().optional().or(b.z.literal("")),version_date:b.z.string().optional().or(b.z.literal("")),duration_hours:b.z.string().optional().or(b.z.literal("")),duration_days:b.z.string().optional().or(b.z.literal("")),duration_unit:b.z.enum(["hours","days"]).default("hours"),price:b.z.string().optional().or(b.z.literal("")),currency:b.z.string().default("XOF"),payment_plan:b.z.enum(["full","installment","free"]).default("full"),published_online:b.z.boolean().default(!1),eligible_cpf:b.z.boolean().default(!1),cpf_code:b.z.string().optional().or(b.z.literal("")),modalities:b.z.string().optional().or(b.z.literal("")),training_action_type:b.z.string().optional().or(b.z.literal("")),pedagogical_objectives:b.z.string().optional().or(b.z.literal("")),learner_profile:b.z.string().optional().or(b.z.literal("")),training_content:b.z.string().optional().or(b.z.literal("")),execution_follow_up:b.z.string().optional().or(b.z.literal("")),certification_modalities:b.z.string().optional().or(b.z.literal("")),quality:b.z.string().optional().or(b.z.literal("")),accounting_product_config:b.z.string().optional().or(b.z.literal("")),edof_export_fields:b.z.string().optional().or(b.z.literal("")),competence_domains:b.z.string().optional().or(b.z.literal("")),prerequisites:b.z.string().optional().or(b.z.literal("")),capacity_max:b.z.string().optional().or(b.z.literal("")),age_min:b.z.string().optional().or(b.z.literal("")),age_max:b.z.string().optional().or(b.z.literal("")),certification_issued:b.z.boolean().default(!1),is_active:b.z.boolean().default(!0)}),f=b.z.object({formation_id:b.z.string().min(1,"La formation est requise"),name:b.z.string().min(1,"Le nom est requis").max(200,"Le nom est trop long"),code:b.z.string().optional().or(b.z.literal("")),start_date:b.z.string().min(1,"La date de début est requise"),end_date:b.z.string().min(1,"La date de fin est requise"),start_time:b.z.string().optional().or(b.z.literal("")),end_time:b.z.string().optional().or(b.z.literal("")),location:b.z.string().optional().or(b.z.literal("")),capacity_max:b.z.string().optional().or(b.z.literal("")).refine(a=>{if(!a)return!0;let b=parseInt(a);return!isNaN(b)&&b>0},"La capacité maximale doit être un nombre entier positif"),currency:b.z.string().default("XOF"),status:b.z.enum(["planned","ongoing","completed","cancelled"]).default("planned"),teacher_id:b.z.string().optional().or(b.z.literal("")),manager1_id:b.z.string().optional().or(b.z.literal("")),manager2_id:b.z.string().optional().or(b.z.literal("")),inter_entreprise:b.z.boolean().default(!0),sous_traitance:b.z.boolean().default(!1),timezone:b.z.string().default("Europe/Paris"),program_ids:b.z.array(b.z.string()).default([])}).refine(a=>!a.start_date||!a.end_date||new Date(a.end_date)>=new Date(a.start_date),{message:"La date de fin doit être postérieure à la date de début",path:["end_date"]}),g=b.z.object({student_id:b.z.string().min(1,"L'étudiant est requis"),session_id:b.z.string().optional().or(b.z.literal("")),subject:b.z.string().min(1,"Le sujet est requis").max(200,"Le sujet est trop long"),assessment_type:b.z.enum(["pre_formation","hot","cold","manager","instructor","funder","quiz","exam","project","other"]).default("quiz"),score:b.z.string().min(1,"La note est requise").refine(a=>{let b=parseFloat(a);return!isNaN(b)&&b>=0},"La note doit être un nombre valide"),max_score:b.z.string().optional().or(b.z.literal("")).refine(a=>{if(!a)return!0;let b=parseFloat(a);return!isNaN(b)&&b>0},"La note maximale doit être un nombre valide supérieur à 0"),notes:b.z.string().optional().or(b.z.literal("")),graded_at:b.z.string().min(1,"La date d'évaluation est requise"),coefficient:b.z.string().optional().or(b.z.literal("")).refine(a=>{if(!a)return!0;let b=parseFloat(a);return!isNaN(b)&&b>0},"Le coefficient doit être un nombre valide supérieur à 0"),is_makeup:b.z.boolean().optional().default(!1),original_grade_id:b.z.string().optional().or(b.z.literal("")),appreciation:b.z.string().optional().or(b.z.literal("")),term_period:b.z.enum(["Q1","Q2","Q3","Q4","S1","S2","T1","T2","T3"]).optional().or(b.z.literal("")),academic_year_id:b.z.string().optional().or(b.z.literal(""))}).refine(a=>!a.max_score||!a.score||parseFloat(a.score)<=parseFloat(a.max_score),{message:"La note ne peut pas être supérieure à la note maximale",path:["score"]}),h=b.z.object({student_id:b.z.string().min(1,"L'étudiant est requis"),document_type:b.z.enum(["quote","invoice"]).default("invoice"),invoice_number:b.z.string().optional().or(b.z.literal("")),type:b.z.enum(["tuition","registration","other"]).default("tuition"),issue_date:b.z.string().min(1,"La date d'émission est requise"),due_date:b.z.string().min(1,"La date d'échéance est requise"),amount:b.z.string().min(1,"Le montant est requis").refine(a=>{let b=parseFloat(a);return!isNaN(b)&&b>=0},"Le montant doit être un nombre valide supérieur ou égal à 0"),tax_amount:b.z.string().optional().or(b.z.literal("")).refine(a=>{if(!a)return!0;let b=parseFloat(a);return!isNaN(b)&&b>=0},"Le montant de la taxe doit être un nombre valide supérieur ou égal à 0"),currency:b.z.string().default("XOF"),status:b.z.enum(["draft","sent","partial","paid","overdue","cancelled"]).default("draft"),notes:b.z.string().optional().or(b.z.literal("")),enrollment_id:b.z.string().optional().or(b.z.literal(""))}).refine(a=>!a.issue_date||!a.due_date||new Date(a.due_date)>=new Date(a.issue_date),{message:"La date d'échéance doit être postérieure à la date d'émission",path:["due_date"]});b.z.object({invoice_id:b.z.string().min(1,"La facture est requise"),student_id:b.z.string().min(1,"L'étudiant est requis"),amount:b.z.string().min(1,"Le montant est requis").refine(a=>{let b=parseFloat(a);return!isNaN(b)&&b>0},"Le montant doit être un nombre valide supérieur à 0"),currency:b.z.string().default("XOF"),payment_method:b.z.enum(["cash","mobile_money","card","bank_transfer"]).default("cash"),payment_provider:b.z.enum(["mtn","orange","airtel","wave"]).optional().or(b.z.literal("")),transaction_id:b.z.string().optional().or(b.z.literal("")),paid_at:b.z.string().optional().or(b.z.literal("")),notes:b.z.string().optional().or(b.z.literal(""))});let i=b.z.object({student_id:b.z.string().min(1,"L'étudiant est requis"),session_id:b.z.string().min(1,"La session est requise"),enrollment_date:b.z.string().min(1,"La date d'inscription est requise"),status:b.z.enum(["pending","confirmed","completed","cancelled","failed"]).default("confirmed"),payment_status:b.z.enum(["pending","partial","paid","overdue"]).default("pending"),total_amount:b.z.string().optional().or(b.z.literal("")).refine(a=>{if(!a)return!0;let b=parseFloat(a);return!isNaN(b)&&b>=0},"Le montant total doit être un nombre valide supérieur ou égal à 0"),paid_amount:b.z.string().optional().or(b.z.literal("")).refine(a=>{if(!a)return!0;let b=parseFloat(a);return!isNaN(b)&&b>=0},"Le montant payé doit être un nombre valide supérieur ou égal à 0")}).refine(a=>{if(a.total_amount&&a.paid_amount){let b=parseFloat(a.total_amount),c=parseFloat(a.paid_amount);if(!isNaN(b)&&!isNaN(c)&&c>b)return!1}return!0},{message:"Le montant payé ne peut pas dépasser le montant total",path:["paid_amount"]});a.s(["enrollmentSchema",0,i,"evaluationSchema",0,g,"formationSchema",0,e,"invoiceSchema",0,h,"programSchema",0,d,"sessionSchema",0,f,"studentSchema",0,c])},522734,(a,b,c)=>{b.exports=a.x("fs",()=>require("fs"))},500874,(a,b,c)=>{b.exports=a.x("buffer",()=>require("buffer"))},688947,(a,b,c)=>{b.exports=a.x("stream",()=>require("stream"))},427699,(a,b,c)=>{b.exports=a.x("events",()=>require("events"))},716802,a=>{"use strict";var b=a.i(932596),c=a.i(33926),d=a.i(307739);async function e(a,d="document.pdf",f){let g=document.getElementById(a);if(!g)throw Error(`\xc9l\xe9ment avec l'ID "${a}" non trouv\xe9`);try{let a,e=g.getBoundingClientRect();(0===e.width||0===e.height)&&(console.warn("Élément sans dimensions, tentative de correction..."),g instanceof HTMLElement&&(g.style.width=g.style.width||"210mm",g.style.minHeight=g.style.minHeight||"297mm",await new Promise(a=>setTimeout(a,100))));let h=g.querySelectorAll("img");await Promise.all(Array.from(h).map(a=>a.complete&&a.naturalWidth>0?Promise.resolve():new Promise(b=>{a.onload=b,a.onerror=b,setTimeout(b,5e3)})));let i=e.width||g.scrollWidth||794,j=g.scrollHeight||1123,k=await (0,c.default)(g,{scale:2,useCORS:!0,allowTaint:!0,logging:!1,backgroundColor:"#ffffff",removeContainer:!1,imageTimeout:15e3,width:i,height:j,windowWidth:i,windowHeight:j,x:0,y:0,onclone:(a,b)=>{if(a.querySelectorAll("img").forEach(a=>{a.complete&&0!==a.naturalWidth||(a.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iI2YzZjRmNiIvPjwvc3ZnPg==")}),b instanceof HTMLElement){let a=b.getBoundingClientRect();(0===a.width||0===a.height)&&(b.style.width="210mm",b.style.minHeight="297mm")}}});if(!k)throw Error("Le canvas n'a pas pu être généré");if(0===k.width||0===k.height)throw console.error("Canvas invalide:",{width:k.width,height:k.height}),Error(`Le canvas g\xe9n\xe9r\xe9 est invalide (${k.width}x${k.height})`);try{if(!(a=k.toDataURL("image/png",.95))||a.length<100)throw Error("Data URL invalide")}catch(b){console.error("Erreur lors de la conversion du canvas en data URL:",b),a=k.toDataURL("image/jpeg",.95)}let l=new b.jsPDF({orientation:f?.orientation||"portrait",unit:"mm",format:f?.format||"a4",compress:!0}),m=l.internal.pageSize.getWidth(),n=k.height*m/k.width,o=n,p=0;try{l.addImage(a,"PNG",0,p,m,n,void 0,"FAST")}catch(b){if(console.error("Erreur lors de l'ajout de l'image au PDF:",b),a.startsWith("data:image/png")){let a=k.toDataURL("image/jpeg",.95);l.addImage(a,"JPEG",0,p,m,n,void 0,"FAST")}else throw b}for(o-=l.internal.pageSize.getHeight();o>=0;){p=o-n,l.addPage();try{l.addImage(a,"PNG",0,p,m,n,void 0,"FAST")}catch(b){if(a.startsWith("data:image/png")){let a=k.toDataURL("image/jpeg",.95);l.addImage(a,"JPEG",0,p,m,n,void 0,"FAST")}}o-=l.internal.pageSize.getHeight()}return l.save(d),l.output("blob")}catch(a){throw console.error("Erreur lors de la génération du PDF:",a),Error(`Erreur lors de la g\xe9n\xe9ration du PDF: ${a instanceof Error?a.message:"Erreur inconnue"}`)}}function f(a,b="fr-FR"){let c="string"==typeof a?new Date(a):a;return new Intl.DateTimeFormat(b,{year:"numeric",month:"long",day:"numeric"}).format(c)}async function g(a,d){let e,f=document.getElementById(a);if(!f)throw Error(`\xc9l\xe9ment avec l'ID "${a}" non trouv\xe9`);let g=f.getBoundingClientRect();(0===g.width||0===g.height)&&(console.warn("Élément sans dimensions, tentative de correction..."),f instanceof HTMLElement&&(f.style.width=f.style.width||"794px",f.style.minHeight=f.style.minHeight||"1123px",await new Promise(a=>setTimeout(a,100))));let h=f.querySelectorAll("img");await Promise.all(Array.from(h).map(a=>a.complete&&a.naturalWidth>0?Promise.resolve():new Promise(b=>{a.onload=b,a.onerror=b,setTimeout(b,5e3)})));let i=f.querySelector(".header"),j=f.querySelector(".footer");f.querySelector(".content");let k=i?.getAttribute("data-repeat-on-all-pages")==="true",l=window.getComputedStyle(f),m=parseFloat(l.paddingTop)||75.6,n=parseFloat(l.paddingBottom)||75.6,o=parseFloat(l.paddingLeft)||75.6,p=parseFloat(l.paddingRight)||75.6,q=f.scrollWidth||g.width||794,r=f.scrollHeight||g.height||1123,s=null,t=0;if(j)try{t=j.offsetHeight||60,s=await (0,c.default)(j,{scale:2,useCORS:!0,allowTaint:!0,logging:!1,backgroundColor:"#ffffff",width:q-o-p,height:t}),console.log("[PDF Generator] Footer capturé séparément:",{width:s.width,height:s.height,footerHeight:t})}catch(a){console.warn("[PDF Generator] Erreur lors de la capture du footer:",a)}console.log("[PDF Generator] Capturing element:",{elementId:a,width:q,height:r,scrollWidth:f.scrollWidth,scrollHeight:f.scrollHeight,rectWidth:g.width,rectHeight:g.height,computedPadding:l.padding,paddingTop:m,paddingBottom:n,paddingLeft:o,paddingRight:p});let u=await (0,c.default)(f,{scale:2,useCORS:!0,allowTaint:!0,logging:!1,backgroundColor:"#ffffff",removeContainer:!1,imageTimeout:15e3,width:q,height:r,windowWidth:q,windowHeight:r,x:0,y:0,scrollX:0,scrollY:0,onclone:(a,b)=>{if(a.querySelectorAll("img").forEach(a=>{a.complete&&0!==a.naturalWidth||(a.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iI2YzZjRmNiIvPjwvc3ZnPg==")}),b instanceof HTMLElement){b.style.width="794px",b.style.minHeight="1123px",b.style.backgroundColor="#ffffff",b.style.boxSizing="border-box",b.style.position="relative",b.style.padding=`${m}px ${p}px ${n}px ${o}px`,b.style.display="flex",b.style.flexDirection="column",console.log("[PDF Generator] Clone styles applied:",{padding:b.style.padding,width:b.style.width,minHeight:b.style.minHeight,display:b.style.display});let a=b.querySelector(".header"),c=b.querySelector(".footer"),d=b.querySelector(".content");a?(a.style.display="block",a.style.visibility="visible",a.style.opacity="1",a.style.width="100%",a.style.marginBottom="20px",a.style.flexShrink="0",a.style.position="relative",a.style.zIndex="1",console.log("[PDF Generator] Header cloné activé:",{display:a.style.display,visibility:a.style.visibility,innerHTML:a.innerHTML.substring(0,100),offsetHeight:a.offsetHeight})):console.warn("[PDF Generator] Header non trouvé dans le clone"),c&&(c.style.display="none",console.log("[PDF Generator] Footer masqué dans le clone principal (sera ajouté séparément)")),d&&(d.style.flex="1",d.style.width="100%",d.style.overflow="visible")}}});if(!u||0===u.width||0===u.height)throw Error(`Le canvas g\xe9n\xe9r\xe9 est invalide (${u?.width||0}x${u?.height||0})`);try{if(!(e=u.toDataURL("image/png",.95))||e.length<100)throw Error("Data URL invalide")}catch(a){console.error("Erreur lors de la conversion du canvas en data URL:",a),e=u.toDataURL("image/jpeg",.95)}let v=null;if(i&&!k){let a=i.style.display;i.style.display="none";try{await new Promise(a=>setTimeout(a,100)),v=(await (0,c.default)(f,{scale:2,useCORS:!0,allowTaint:!0,logging:!1,backgroundColor:"#ffffff",removeContainer:!1,imageTimeout:15e3,width:q,height:r,windowWidth:q,windowHeight:r,x:0,y:0,scrollX:0,scrollY:0,onclone:(a,b)=>{let c=b.querySelector(".header");c&&(c.style.display="none");let d=b.querySelector(".footer");d&&(d.style.display="none")}})).toDataURL("image/png",.95),console.log("[PDF Generator] Canvas sans header créé pour les pages suivantes")}catch(a){console.warn("[PDF Generator] Erreur lors de la création du canvas sans header:",a),v=e}finally{i.style.display=a}}else v=e;let w=new b.jsPDF({orientation:d?.orientation||"portrait",unit:"mm",format:d?.format||"a4",compress:!0}),x=w.internal.pageSize.getWidth(),y=u.height*x/u.width,z=w.internal.pageSize.getHeight(),A=n/3.78,B=y,C=0,D=1,E=Math.ceil(y/z),F=(a,b,c)=>{if(s)try{let d=s.toDataURL("image/png",.95),e=s.height*x/s.width,f=z-e-A;a.addImage(d,"PNG",0,f,x,e,void 0,"FAST"),console.log(`[PDF Generator] Footer ajout\xe9 sur la page ${b}/${c} \xe0 ${f}mm du bas`)}catch(a){console.warn("[PDF Generator] Erreur lors de l'ajout du footer:",a)}},G=e;try{w.addImage(G,"PNG",0,C,x,y,void 0,"FAST"),F(w,D,E)}catch(a){if(console.error("Erreur lors de l'ajout de l'image au PDF:",a),G.startsWith("data:image/png")){let a=u.toDataURL("image/jpeg",.95);w.addImage(a,"JPEG",0,C,x,y,void 0,"FAST"),F(w,D,E)}else throw a}B-=z,D++;let H=v||e;for(;B>=0;){C=B-y,w.addPage();try{w.addImage(H,"PNG",0,C,x,y,void 0,"FAST"),F(w,D,E)}catch(a){if(H.startsWith("data:image/png")){let a=H.replace("data:image/png","data:image/jpeg");w.addImage(a,"JPEG",0,C,x,y,void 0,"FAST"),F(w,D,E)}}B-=z,D++}return w.output("blob")}async function h(a,b="documents.zip"){let c=new d.default;for(let b of a)c.file(b.name,b.blob);let e=await c.generateAsync({type:"blob"}),f=URL.createObjectURL(e),g=document.createElement("a");g.href=f,g.download=b,document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(f)}a.s(["createZipFromPDFs",()=>h,"formatDateForDocument",()=>f,"generatePDFBlobFromHTML",()=>g,"generatePDFFromHTML",()=>e])},586547,a=>{"use strict";var b=a.i(187924),c=a.i(572131);a.i(460355);var d=a.i(346271),e=a.i(262036),f=a.i(405784),g=a.i(497895);let h=c.createContext({openItems:[],toggleItem:()=>{}}),i=({type:a="single",defaultValue:d,className:e,children:f})=>{let[g,i]=c.useState(Array.isArray(d)?d:d?[d]:[]);return(0,b.jsx)(h.Provider,{value:{openItems:g,toggleItem:b=>{i(c=>"single"===a?c.includes(b)?[]:[b]:c.includes(b)?c.filter(a=>a!==b):[...c,b])}},children:(0,b.jsx)("div",{className:e,children:f})})},j=({value:a,className:d,children:e})=>(0,b.jsx)("div",{className:(0,g.cn)("border-b border-gray-100 last:border-0",d),children:c.Children.map(e,b=>c.isValidElement(b)?c.cloneElement(b,{value:a}):b)}),k=({className:a,children:d,value:e})=>{let{openItems:i,toggleItem:j}=c.useContext(h),k=!!e&&i.includes(e);return(0,b.jsxs)("button",{type:"button",onClick:()=>e&&j(e),className:(0,g.cn)("flex flex-1 items-center justify-between py-4 w-full font-medium transition-all hover:text-brand-blue text-left",k?"text-brand-blue":"text-gray-700",a),children:[d,(0,b.jsx)(f.ChevronDown,{className:(0,g.cn)("h-4 w-4 shrink-0 transition-transform duration-200 text-gray-400",k&&"rotate-180 text-brand-blue")})]})},l=({className:a,children:f,value:i})=>{let{openItems:j}=c.useContext(h),k=!!i&&j.includes(i);return(0,b.jsx)(e.AnimatePresence,{initial:!1,children:k&&(0,b.jsx)(d.motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2,ease:"easeInOut"},className:"overflow-hidden",children:(0,b.jsx)("div",{className:(0,g.cn)("pb-4 pt-0 text-sm text-gray-600",a),children:f})})})};a.s(["Accordion",()=>i,"AccordionContent",()=>l,"AccordionItem",()=>j,"AccordionTrigger",()=>k])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__195f30af._.js.map