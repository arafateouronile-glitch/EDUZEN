{"version":3,"sources":["../../../../app/%28dashboard%29/dashboard/settings/security/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query'\nimport { useAuth } from '@/lib/hooks/use-auth'\nimport { twoFactorAuthService } from '@/lib/services/2fa.service'\nimport { Button } from '@/components/ui/button'\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Switch } from '@/components/ui/switch'\nimport { useToast } from '@/components/ui/toast'\nimport {\n  Shield, CheckCircle, AlertCircle, Download, RefreshCw, Eye, EyeOff, Key, Save\n} from 'lucide-react'\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from '@/components/ui/dialog'\n\nexport default function SecuritySettingsPage() {\n  const { user } = useAuth()\n  const queryClient = useQueryClient()\n  const { addToast } = useToast()\n\n  const [showBackupCodes, setShowBackupCodes] = useState(false)\n  const [activationCode, setActivationCode] = useState('')\n  const [disablePassword, setDisablePassword] = useState('')\n  const [showDisableDialog, setShowDisableDialog] = useState(false)\n\n  // Récupérer la configuration 2FA\n  const { data: config, isLoading } = useQuery({\n    queryKey: ['2fa-config', user?.id],\n    queryFn: async () => {\n      if (!user?.id) return null\n      return twoFactorAuthService.getConfig(user.id)\n    },\n    enabled: !!user?.id,\n  })\n\n  // Mutation pour générer le secret\n  const generateSecretMutation = useMutation({\n    mutationFn: async () => {\n      const response = await fetch('/api/2fa/generate-secret', {\n        method: 'POST',\n      })\n      if (!response.ok) {\n        const error = await response.json()\n        throw new Error(error.error || 'Erreur lors de la génération du secret')\n      }\n      return response.json()\n    },\n    onSuccess: (data) => {\n      queryClient.invalidateQueries({ queryKey: ['2fa-config'] })\n      setShowBackupCodes(true)\n      addToast({\n        type: 'success',\n        title: 'Secret généré',\n        description: 'Scannez le QR code avec votre application d\\'authentification.',\n      })\n    },\n    onError: (error: Error) => {\n      addToast({\n        type: 'error',\n        title: 'Erreur',\n        description: error.message || 'Une erreur est survenue.',\n      })\n    },\n  })\n\n  // Mutation pour vérifier l'activation\n  const verifyActivationMutation = useMutation({\n    mutationFn: async (code: string) => {\n      const response = await fetch('/api/2fa/verify-activation', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ code }),\n      })\n      if (!response.ok) {\n        const error = await response.json()\n        throw new Error(error.error || 'Code invalide')\n      }\n      return response.json()\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['2fa-config'] })\n      setActivationCode('')\n      setShowBackupCodes(false)\n      addToast({\n        type: 'success',\n        title: '2FA activée',\n        description: 'L\\'authentification à deux facteurs est maintenant activée.',\n      })\n    },\n    onError: (error: Error) => {\n      addToast({\n        type: 'error',\n        title: 'Code invalide',\n        description: error.message || 'Le code saisi est incorrect.',\n      })\n    },\n  })\n\n  // Mutation pour désactiver\n  const disableMutation = useMutation({\n    mutationFn: async (password: string) => {\n      const response = await fetch('/api/2fa/disable', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ password }),\n      })\n      if (!response.ok) {\n        const error = await response.json()\n        throw new Error(error.error || 'Erreur lors de la désactivation')\n      }\n      return response.json()\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['2fa-config'] })\n      setDisablePassword('')\n      setShowDisableDialog(false)\n      addToast({\n        type: 'success',\n        title: '2FA désactivée',\n        description: 'L\\'authentification à deux facteurs a été désactivée.',\n      })\n    },\n    onError: (error: Error) => {\n      addToast({\n        type: 'error',\n        title: 'Erreur',\n        description: error.message || 'Une erreur est survenue.',\n      })\n    },\n  })\n\n  // Mutation pour régénérer les codes de récupération\n  const regenerateBackupCodesMutation = useMutation({\n    mutationFn: async () => {\n      const response = await fetch('/api/2fa/regenerate-backup-codes', {\n        method: 'POST',\n      })\n      if (!response.ok) {\n        const error = await response.json()\n        throw new Error(error.error || 'Erreur lors de la régénération')\n      }\n      return response.json()\n    },\n    onSuccess: (data) => {\n      setShowBackupCodes(true)\n      addToast({\n        type: 'success',\n        title: 'Codes régénérés',\n        description: 'Nouveaux codes de récupération générés.',\n      })\n    },\n    onError: (error: Error) => {\n      addToast({\n        type: 'error',\n        title: 'Erreur',\n        description: error.message || 'Une erreur est survenue.',\n      })\n    },\n  })\n\n  const handleActivate = () => {\n    generateSecretMutation.mutate()\n  }\n\n  const handleVerifyActivation = () => {\n    if (activationCode.length !== 6) {\n      addToast({\n        type: 'error',\n        title: 'Code invalide',\n        description: 'Le code doit contenir 6 chiffres.',\n      })\n      return\n    }\n    verifyActivationMutation.mutate(activationCode)\n  }\n\n  const handleDisable = () => {\n    if (!disablePassword) {\n      addToast({\n        type: 'error',\n        title: 'Mot de passe requis',\n        description: 'Veuillez entrer votre mot de passe.',\n      })\n      return\n    }\n    disableMutation.mutate(disablePassword)\n  }\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"text-center\">\n          <div className=\"text-muted-foreground\">Chargement...</div>\n        </div>\n      </div>\n    )\n  }\n\n  const isEnabled = config?.is_enabled || false\n  const isVerified = config?.is_verified || false\n  const hasSecret = !!generateSecretMutation.data\n\n  return (\n    <div className=\"space-y-6\">\n      {/* En-tête */}\n      <div>\n        <h1 className=\"text-3xl font-bold text-gray-900 flex items-center\">\n          <Shield className=\"mr-3 h-8 w-8 text-primary\" />\n          Sécurité\n        </h1>\n        <p className=\"mt-2 text-sm text-gray-600\">\n          Gérez votre authentification à deux facteurs (2FA) pour renforcer la sécurité de votre compte\n        </p>\n      </div>\n\n      {/* Statut 2FA */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Authentification à deux facteurs (2FA)</CardTitle>\n          <CardDescription>\n            Ajoutez une couche de sécurité supplémentaire à votre compte\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-6\">\n          {/* Statut actuel */}\n          <div className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\">\n            <div className=\"flex items-center space-x-3\">\n              {isEnabled ? (\n                <>\n                  <CheckCircle className=\"h-5 w-5 text-green-600\" />\n                  <div>\n                    <p className=\"font-semibold text-green-800\">2FA Activée</p>\n                    {config?.last_used_at && (\n                      <p className=\"text-sm text-green-600\">\n                        Dernière utilisation: {new Date(config.last_used_at).toLocaleString('fr-FR')}\n                      </p>\n                    )}\n                  </div>\n                </>\n              ) : (\n                <>\n                  <AlertCircle className=\"h-5 w-5 text-gray-400\" />\n                  <div>\n                    <p className=\"font-semibold text-gray-800\">2FA Désactivée</p>\n                    <p className=\"text-sm text-gray-600\">\n                      Votre compte n'est pas protégé par l'authentification à deux facteurs\n                    </p>\n                  </div>\n                </>\n              )}\n            </div>\n          </div>\n\n          {/* Activation */}\n          {!isEnabled && (\n            <div className=\"space-y-4\">\n              <div>\n                <h3 className=\"font-semibold mb-2\">Activer la 2FA</h3>\n                <p className=\"text-sm text-muted-foreground mb-4\">\n                  Scannez le QR code avec une application d'authentification comme Google Authenticator ou Authy.\n                </p>\n                <Button\n                  onClick={handleActivate}\n                  disabled={generateSecretMutation.isPending}\n                >\n                  <Key className=\"h-4 w-4 mr-2\" />\n                  {hasSecret ? 'Régénérer le QR code' : 'Générer le QR code'}\n                </Button>\n              </div>\n\n              {/* QR Code */}\n              {generateSecretMutation.data?.qrCodeUrl && (\n                <div className=\"space-y-4 p-4 bg-gray-50 rounded-lg\">\n                  <div className=\"flex justify-center\">\n                    <img\n                      src={generateSecretMutation.data.qrCodeUrl}\n                      alt=\"QR Code 2FA\"\n                      className=\"w-64 h-64\"\n                    />\n                  </div>\n                  <div>\n                    <Label>Code secret (manuel)</Label>\n                    <div className=\"flex items-center space-x-2 mt-2\">\n                      <Input\n                        value={generateSecretMutation.data.secret}\n                        readOnly\n                        className=\"font-mono text-sm\"\n                      />\n                      <Button\n                        variant=\"outline\"\n                        size=\"icon\"\n                        onClick={() => {\n                          navigator.clipboard.writeText(generateSecretMutation.data.secret)\n                          addToast({\n                            type: 'success',\n                            title: 'Copié',\n                            description: 'Le secret a été copié dans le presse-papiers.',\n                          })\n                        }}\n                      >\n                        <Key className=\"h-4 w-4\" />\n                      </Button>\n                    </div>\n                  </div>\n\n                  {/* Codes de récupération */}\n                  {showBackupCodes && generateSecretMutation.data.backupCodes && (\n                    <div className=\"space-y-2\">\n                      <Label>Codes de récupération</Label>\n                      <p className=\"text-sm text-muted-foreground\">\n                        Conservez ces codes en lieu sûr. Vous en aurez besoin si vous perdez l'accès à votre application d'authentification.\n                      </p>\n                      <div className=\"grid grid-cols-2 gap-2 p-4 bg-white rounded border\">\n                        {generateSecretMutation.data.backupCodes.map((code: string, index: number) => (\n                          <div key={index} className=\"font-mono text-sm text-center\">\n                            {code}\n                          </div>\n                        ))}\n                      </div>\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => {\n                          const codesText = generateSecretMutation.data.backupCodes.join('\\n')\n                          const blob = new Blob([codesText], { type: 'text/plain' })\n                          const url = URL.createObjectURL(blob)\n                          const a = document.createElement('a')\n                          a.href = url\n                          a.download = 'eduzen-backup-codes.txt'\n                          a.click()\n                          URL.revokeObjectURL(url)\n                        }}\n                      >\n                        <Download className=\"h-4 w-4 mr-2\" />\n                        Télécharger les codes\n                      </Button>\n                    </div>\n                  )}\n\n                  {/* Vérification du code */}\n                  <div className=\"space-y-2\">\n                    <Label>Vérifier l'activation</Label>\n                    <p className=\"text-sm text-muted-foreground\">\n                      Entrez le code à 6 chiffres affiché dans votre application d'authentification pour confirmer l'activation.\n                    </p>\n                    <div className=\"flex items-center space-x-2\">\n                      <Input\n                        type=\"text\"\n                        inputMode=\"numeric\"\n                        maxLength={6}\n                        value={activationCode}\n                        onChange={(e) => setActivationCode(e.target.value.replace(/\\D/g, ''))}\n                        placeholder=\"000000\"\n                        className=\"font-mono text-center text-2xl tracking-widest\"\n                      />\n                      <Button\n                        onClick={handleVerifyActivation}\n                        disabled={verifyActivationMutation.isPending || activationCode.length !== 6}\n                      >\n                        {verifyActivationMutation.isPending ? (\n                          <RefreshCw className=\"h-4 w-4 mr-2 animate-spin\" />\n                        ) : (\n                          <CheckCircle className=\"h-4 w-4 mr-2\" />\n                        )}\n                        Vérifier\n                      </Button>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Désactivation */}\n          {isEnabled && (\n            <div className=\"space-y-4\">\n              <div>\n                <h3 className=\"font-semibold mb-2\">Désactiver la 2FA</h3>\n                <p className=\"text-sm text-muted-foreground mb-4\">\n                  Vous devrez entrer votre mot de passe pour désactiver l'authentification à deux facteurs.\n                </p>\n                <Button\n                  variant=\"destructive\"\n                  onClick={() => setShowDisableDialog(true)}\n                >\n                  Désactiver la 2FA\n                </Button>\n              </div>\n\n              {/* Régénérer les codes de récupération */}\n              <div>\n                <h3 className=\"font-semibold mb-2\">Codes de récupération</h3>\n                <p className=\"text-sm text-muted-foreground mb-4\">\n                  Régénérez vos codes de récupération si vous les avez perdus ou utilisés.\n                </p>\n                <Button\n                  variant=\"outline\"\n                  onClick={() => regenerateBackupCodesMutation.mutate()}\n                  disabled={regenerateBackupCodesMutation.isPending}\n                >\n                  <RefreshCw className=\"h-4 w-4 mr-2\" />\n                  Régénérer les codes\n                </Button>\n              </div>\n\n              {/* Afficher les nouveaux codes */}\n              {showBackupCodes && regenerateBackupCodesMutation.data?.backupCodes && (\n                <div className=\"space-y-2 p-4 bg-yellow-50 border border-yellow-200 rounded-lg\">\n                  <Label className=\"text-yellow-800\">Nouveaux codes de récupération</Label>\n                  <p className=\"text-sm text-yellow-700 mb-2\">\n                    Conservez ces codes en lieu sûr. Les anciens codes ne fonctionneront plus.\n                  </p>\n                  <div className=\"grid grid-cols-2 gap-2 p-4 bg-white rounded border\">\n                    {regenerateBackupCodesMutation.data.backupCodes.map((code: string, index: number) => (\n                      <div key={index} className=\"font-mono text-sm text-center\">\n                        {code}\n                      </div>\n                    ))}\n                  </div>\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => {\n                      const codesText = regenerateBackupCodesMutation.data.backupCodes.join('\\n')\n                      const blob = new Blob([codesText], { type: 'text/plain' })\n                      const url = URL.createObjectURL(blob)\n                      const a = document.createElement('a')\n                      a.href = url\n                      a.download = 'eduzen-backup-codes.txt'\n                      a.click()\n                      URL.revokeObjectURL(url)\n                    }}\n                  >\n                    <Download className=\"h-4 w-4 mr-2\" />\n                    Télécharger les codes\n                  </Button>\n                </div>\n              )}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Dialog de désactivation */}\n      <Dialog open={showDisableDialog} onOpenChange={setShowDisableDialog}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>Désactiver la 2FA</DialogTitle>\n            <DialogDescription>\n              Entrez votre mot de passe pour confirmer la désactivation de l'authentification à deux facteurs.\n            </DialogDescription>\n          </DialogHeader>\n          <div className=\"space-y-4\">\n            <div>\n              <Label htmlFor=\"disable-password\">Mot de passe</Label>\n              <Input\n                id=\"disable-password\"\n                type=\"password\"\n                value={disablePassword}\n                onChange={(e) => setDisablePassword(e.target.value)}\n                placeholder=\"Votre mot de passe\"\n                className=\"mt-2\"\n              />\n            </div>\n            <div className=\"flex justify-end space-x-2\">\n              <Button\n                variant=\"outline\"\n                onClick={() => {\n                  setShowDisableDialog(false)\n                  setDisablePassword('')\n                }}\n              >\n                Annuler\n              </Button>\n              <Button\n                variant=\"destructive\"\n                onClick={handleDisable}\n                disabled={disableMutation.isPending || !disablePassword}\n              >\n                {disableMutation.isPending ? (\n                  <RefreshCw className=\"h-4 w-4 mr-2 animate-spin\" />\n                ) : null}\n                Désactiver\n              </Button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n\n      {/* Gestion des sessions actives */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Sessions actives</CardTitle>\n          <CardDescription>\n            Gérez vos sessions actives sur différents appareils\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <ActiveSessionsList />\n        </CardContent>\n      </Card>\n\n      {/* Règles de timeout */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Règles de timeout</CardTitle>\n          <CardDescription>\n            Configurez les règles de timeout et de gestion des sessions\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <TimeoutRulesSettings />\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n\n// Composant pour afficher les sessions actives\nfunction ActiveSessionsList() {\n  const { user } = useAuth()\n  const queryClient = useQueryClient()\n  const { addToast } = useToast()\n\n  const { data: sessions, isLoading, refetch } = useQuery({\n    queryKey: ['active-sessions', user?.id],\n    queryFn: async () => {\n      const response = await fetch('/api/sessions/active')\n      if (!response.ok) throw new Error('Erreur lors de la récupération des sessions')\n      const data = await response.json()\n      return data.sessions || []\n    },\n    enabled: !!user?.id,\n  })\n\n  const revokeMutation = useMutation({\n    mutationFn: async (sessionId: string) => {\n      const response = await fetch('/api/sessions/revoke', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ session_id: sessionId }),\n      })\n      if (!response.ok) {\n        const error = await response.json()\n        throw new Error(error.error || 'Erreur lors de la révocation')\n      }\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['active-sessions'] })\n      addToast({\n        type: 'success',\n        title: 'Session révoquée',\n        description: 'La session a été révoquée avec succès.',\n      })\n    },\n    onError: (error: Error) => {\n      addToast({\n        type: 'error',\n        title: 'Erreur',\n        description: error.message || 'Une erreur est survenue.',\n      })\n    },\n  })\n\n  const revokeAllMutation = useMutation({\n    mutationFn: async () => {\n      const response = await fetch('/api/sessions/revoke', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ revoke_all: true }),\n      })\n      if (!response.ok) {\n        const error = await response.json()\n        throw new Error(error.error || 'Erreur lors de la révocation')\n      }\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['active-sessions'] })\n      addToast({\n        type: 'success',\n        title: 'Toutes les sessions révoquées',\n        description: 'Toutes les sessions ont été révoquées avec succès.',\n      })\n    },\n    onError: (error: Error) => {\n      addToast({\n        type: 'error',\n        title: 'Erreur',\n        description: error.message || 'Une erreur est survenue.',\n      })\n    },\n  })\n\n  if (isLoading) {\n    return <div className=\"text-center text-muted-foreground\">Chargement...</div>\n  }\n\n  if (!sessions || sessions.length === 0) {\n    return <div className=\"text-center text-muted-foreground\">Aucune session active</div>\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex justify-end\">\n        <Button\n          variant=\"outline\"\n          size=\"sm\"\n          onClick={() => revokeAllMutation.mutate()}\n          disabled={revokeAllMutation.isPending}\n        >\n          Révoquer toutes les sessions\n        </Button>\n      </div>\n      <div className=\"space-y-2\">\n        {sessions.map((session: any) => (\n          <div\n            key={session.id}\n            className=\"flex items-center justify-between p-4 border rounded-lg\"\n          >\n            <div className=\"flex-1\">\n              <div className=\"flex items-center space-x-2\">\n                <p className=\"font-semibold\">{session.device_name}</p>\n                {session.is_current && (\n                  <span className=\"text-xs bg-green-100 text-green-800 px-2 py-1 rounded\">\n                    Session actuelle\n                  </span>\n                )}\n              </div>\n              <p className=\"text-sm text-muted-foreground\">\n                {session.device_type} • {session.ip_address} • {session.country || 'Inconnu'}\n              </p>\n              <p className=\"text-xs text-muted-foreground\">\n                Dernière activité: {new Date(session.last_activity_at).toLocaleString('fr-FR')}\n              </p>\n            </div>\n            {!session.is_current && (\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => revokeMutation.mutate(session.id)}\n                disabled={revokeMutation.isPending}\n              >\n                Révoquer\n              </Button>\n            )}\n          </div>\n        ))}\n      </div>\n    </div>\n  )\n}\n\n// Composant pour les règles de timeout\nfunction TimeoutRulesSettings() {\n  const { user } = useAuth()\n  const queryClient = useQueryClient()\n  const { addToast } = useToast()\n\n  const { data: rules, isLoading } = useQuery({\n    queryKey: ['timeout-rules', user?.organization_id],\n    queryFn: async () => {\n      const response = await fetch('/api/sessions/timeout-rules')\n      if (!response.ok) throw new Error('Erreur lors de la récupération des règles')\n      const data = await response.json()\n      return data.rules\n    },\n    enabled: !!user?.organization_id,\n  })\n\n  const [formData, setFormData] = useState({\n    idle_timeout_minutes: rules?.idle_timeout_minutes || 30,\n    absolute_timeout_minutes: rules?.absolute_timeout_minutes || 480,\n    max_concurrent_sessions: rules?.max_concurrent_sessions || 5,\n    allow_multiple_devices: rules?.allow_multiple_devices !== false,\n    require_device_verification: rules?.require_device_verification || false,\n    notify_on_new_device: rules?.notify_on_new_device !== false,\n    notify_on_suspicious_activity: rules?.notify_on_suspicious_activity !== false,\n  })\n\n  useEffect(() => {\n    if (rules) {\n      setFormData({\n        idle_timeout_minutes: rules.idle_timeout_minutes || 30,\n        absolute_timeout_minutes: rules.absolute_timeout_minutes || 480,\n        max_concurrent_sessions: rules.max_concurrent_sessions || 5,\n        allow_multiple_devices: rules.allow_multiple_devices !== false,\n        require_device_verification: rules.require_device_verification || false,\n        notify_on_new_device: rules.notify_on_new_device !== false,\n        notify_on_suspicious_activity: rules.notify_on_suspicious_activity !== false,\n      })\n    }\n  }, [rules])\n\n  const saveMutation = useMutation({\n    mutationFn: async () => {\n      const response = await fetch('/api/sessions/timeout-rules', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(formData),\n      })\n      if (!response.ok) {\n        const error = await response.json()\n        throw new Error(error.error || 'Erreur lors de la sauvegarde')\n      }\n      return response.json()\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['timeout-rules'] })\n      addToast({\n        type: 'success',\n        title: 'Règles sauvegardées',\n        description: 'Les règles de timeout ont été sauvegardées avec succès.',\n      })\n    },\n    onError: (error: Error) => {\n      addToast({\n        type: 'error',\n        title: 'Erreur',\n        description: error.message || 'Une erreur est survenue.',\n      })\n    },\n  })\n\n  if (isLoading) {\n    return <div className=\"text-center text-muted-foreground\">Chargement...</div>\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"grid grid-cols-2 gap-4\">\n        <div>\n          <Label htmlFor=\"idle-timeout\">Timeout d'inactivité (minutes)</Label>\n          <Input\n            id=\"idle-timeout\"\n            type=\"number\"\n            value={formData.idle_timeout_minutes}\n            onChange={(e) => setFormData({ ...formData, idle_timeout_minutes: parseInt(e.target.value) || 30 })}\n            min={5}\n            max={1440}\n          />\n          <p className=\"text-xs text-muted-foreground mt-1\">\n            Temps d'inactivité avant déconnexion automatique\n          </p>\n        </div>\n        <div>\n          <Label htmlFor=\"absolute-timeout\">Timeout absolu (minutes)</Label>\n          <Input\n            id=\"absolute-timeout\"\n            type=\"number\"\n            value={formData.absolute_timeout_minutes}\n            onChange={(e) => setFormData({ ...formData, absolute_timeout_minutes: parseInt(e.target.value) || 480 })}\n            min={60}\n            max={10080}\n          />\n          <p className=\"text-xs text-muted-foreground mt-1\">\n            Durée maximale d'une session (même avec activité)\n          </p>\n        </div>\n      </div>\n\n      <div>\n        <Label htmlFor=\"max-sessions\">Nombre maximum de sessions simultanées</Label>\n        <Input\n          id=\"max-sessions\"\n          type=\"number\"\n          value={formData.max_concurrent_sessions}\n          onChange={(e) => setFormData({ ...formData, max_concurrent_sessions: parseInt(e.target.value) || 5 })}\n          min={1}\n          max={20}\n        />\n      </div>\n\n      <div className=\"space-y-4\">\n        <div className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\">\n          <div>\n            <Label>Autoriser plusieurs appareils</Label>\n            <p className=\"text-sm text-muted-foreground\">\n              Permettre aux utilisateurs d'être connectés sur plusieurs appareils simultanément\n            </p>\n          </div>\n          <Switch\n            checked={formData.allow_multiple_devices}\n            onCheckedChange={(checked) => setFormData({ ...formData, allow_multiple_devices: checked })}\n          />\n        </div>\n\n        <div className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\">\n          <div>\n            <Label>Vérification des appareils</Label>\n            <p className=\"text-sm text-muted-foreground\">\n              Exiger une vérification pour les nouveaux appareils\n            </p>\n          </div>\n          <Switch\n            checked={formData.require_device_verification}\n            onCheckedChange={(checked) => setFormData({ ...formData, require_device_verification: checked })}\n          />\n        </div>\n\n        <div className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\">\n          <div>\n            <Label>Notifier nouveaux appareils</Label>\n            <p className=\"text-sm text-muted-foreground\">\n              Envoyer une notification lors d'une connexion depuis un nouvel appareil\n            </p>\n          </div>\n          <Switch\n            checked={formData.notify_on_new_device}\n            onCheckedChange={(checked) => setFormData({ ...formData, notify_on_new_device: checked })}\n          />\n        </div>\n\n        <div className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\">\n          <div>\n            <Label>Notifier activité suspecte</Label>\n            <p className=\"text-sm text-muted-foreground\">\n              Envoyer une notification en cas d'activité suspecte détectée\n            </p>\n          </div>\n          <Switch\n            checked={formData.notify_on_suspicious_activity}\n            onCheckedChange={(checked) => setFormData({ ...formData, notify_on_suspicious_activity: checked })}\n          />\n        </div>\n      </div>\n\n      <div className=\"flex justify-end\">\n        <Button\n          onClick={() => saveMutation.mutate()}\n          disabled={saveMutation.isPending}\n        >\n          <Save className=\"h-4 w-4 mr-2\" />\n          Sauvegarder les règles\n        </Button>\n      </div>\n    </div>\n  )\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"],"names":[],"mappings":"0DAEA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAGA,EAAA,EAAA,CAAA,CAAA,QAEe,SAAS,IACtB,GAAM,MAAE,CAAI,CAAE,CAAG,CAAA,EAAA,EAAA,OAAO,AAAP,IACX,EAAc,CAAA,EAAA,EAAA,cAAA,AAAc,IAC5B,UAAE,CAAQ,CAAE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,IAEvB,CAAC,EAAiB,EAAmB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjD,CAAC,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC/C,CAAC,EAAiB,EAAmB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACjD,CAAC,EAAmB,EAAqB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAGrD,CAAE,KAAM,CAAM,WAAE,CAAS,CAAE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,CAC3C,SAAU,CAAC,aAAc,GAAM,GAAG,CAClC,QAAS,SACP,AAAK,GAAM,CAAP,EACG,CADQ,CACR,oBAAoB,CAAC,SAAS,CAAC,EAAK,EAAE,EADvB,KAGxB,QAAS,CAAC,CAAC,GAAM,EACnB,GAGM,EAAyB,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,CACzC,WAAY,UACV,IAAM,EAAW,MAAM,MAAM,2BAA4B,CACvD,OAAQ,MACV,GACA,GAAI,CAAC,EAAS,EAAE,CAEd,CAFgB,KAEV,AAAI,MAAM,CADF,MAAM,EAAS,IAAI,EAAA,EACX,KAAK,EAAI,0CAEjC,OAAO,EAAS,IAAI,EACtB,EACA,UAAW,AAAC,IACV,EAAY,iBAAiB,CAAC,CAAE,SAAU,CAAC,aAAa,AAAC,GACzD,GAAmB,GACnB,EAAS,CACP,KAAM,UACN,MAAO,gBACP,YAAa,+DACf,EACF,EACA,QAAS,AAAC,IACR,EAAS,CACP,KAAM,QACN,MAAO,SACP,YAAa,EAAM,OAAO,EAAI,0BAChC,EACF,CACF,GAGM,EAA2B,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,CAC3C,WAAY,MAAO,IACjB,IAAM,EAAW,MAAM,MAAM,6BAA8B,CACzD,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,SAAS,CAAC,MAAE,CAAK,EAC9B,GACA,GAAI,CAAC,EAAS,EAAE,CAEd,CAFgB,KAEV,AAAI,MAAM,CADF,MAAM,EAAS,IAAI,EAAA,EACX,KAAK,EAAI,iBAEjC,OAAO,EAAS,IAAI,EACtB,EACA,UAAW,KACT,EAAY,iBAAiB,CAAC,CAAE,SAAU,CAAC,aAAc,AAAD,GACxD,EAAkB,IAClB,GAAmB,GACnB,EAAS,CACP,KAAM,UACN,MAAO,cACP,YAAa,4DACf,EACF,EACA,QAAS,AAAC,IACR,EAAS,CACP,KAAM,QACN,MAAO,gBACP,YAAa,EAAM,OAAO,EAAI,8BAChC,EACF,CACF,GAGM,EAAkB,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,CAClC,WAAY,MAAO,IACjB,IAAM,EAAW,MAAM,MAAM,mBAAoB,CAC/C,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,SAAS,CAAC,UAAE,CAAS,EAClC,GACA,GAAI,CAAC,EAAS,EAAE,CAEd,CAFgB,KAEV,AAAI,MAAM,CADF,MAAM,EAAS,IAAI,EAAA,EACX,KAAK,EAAI,mCAEjC,OAAO,EAAS,IAAI,EACtB,EACA,UAAW,KACT,EAAY,iBAAiB,CAAC,CAAE,SAAU,CAAC,aAAa,AAAC,GACzD,EAAmB,IACnB,GAAqB,GACrB,EAAS,CACP,KAAM,UACN,MAAO,iBACP,YAAa,sDACf,EACF,EACA,QAAS,AAAC,IACR,EAAS,CACP,KAAM,QACN,MAAO,SACP,YAAa,EAAM,OAAO,EAAI,0BAChC,EACF,CACF,GAGM,EAAgC,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,CAChD,WAAY,UACV,IAAM,EAAW,MAAM,MAAM,mCAAoC,CAC/D,OAAQ,MACV,GACA,GAAI,CAAC,EAAS,EAAE,CAEd,CAFgB,KAEV,AAAI,MAAM,CADF,MAAM,EAAS,IAAI,EAAA,EACX,KAAK,EAAI,kCAEjC,OAAO,EAAS,IAAI,EACtB,EACA,UAAW,AAAC,IACV,GAAmB,GACnB,EAAS,CACP,KAAM,UACN,MAAO,kBACP,YAAa,yCACf,EACF,EACA,QAAS,AAAC,IACR,EAAS,CACP,KAAM,QACN,MAAO,SACP,YAAa,EAAM,OAAO,EAAI,0BAChC,EACF,CACF,GA8BA,GAAI,EACF,MACE,CAAA,EAAA,AAFW,EAEX,GAAA,EAAC,MAAA,CAAI,UAAU,yDACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCAAwB,sBAM/C,IAAM,EAAY,GAAQ,aAAc,EACrB,GAAQ,YAC3B,GAD0C,CACpC,EAAY,CAAC,CAAC,EAAuB,IAAI,CAE/C,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,+DACZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,8BAA8B,cAGlD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sCAA6B,qGAM5C,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,WACH,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,WACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,2CACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,UAAC,oEAInB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,sBAErB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uEACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uCACZ,EACC,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,2BACvB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,wCAA+B,gBAC3C,GAAQ,cACP,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,mCAAyB,yBACb,IAAI,KAAK,EAAO,YAAY,EAAE,cAAc,CAAC,kBAM5E,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,0BACvB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,uCAA8B,mBAC3C,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCAAwB,oFAU9C,CAAC,GACA,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,8BAAqB,mBACnC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,8CAAqC,oGAGlD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CACL,QAtGO,CAsGE,IArGvB,EAAuB,MAAM,EAC/B,EAqGgB,SAAU,EAAuB,SAAS,WAE1C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,GAAG,CAAA,CAAC,UAAU,iBACd,EAAY,uBAAyB,2BAKzC,EAAuB,IAAI,EAAE,WAC5B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gDACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+BACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,IAAK,EAAuB,IAAI,CAAC,SAAS,CAC1C,IAAI,cACJ,UAAU,gBAGd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,UAAC,yBACP,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6CACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,MAAO,EAAuB,IAAI,CAAC,MAAM,CACzC,QAAQ,CAAA,CAAA,EACR,UAAU,sBAEZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,QAAQ,UACR,KAAK,OACL,QAAS,KACP,UAAU,SAAS,CAAC,SAAS,CAAC,EAAuB,IAAI,CAAC,MAAM,EAChE,EAAS,CACP,KAAM,UACN,MAAO,QACP,YAAa,+CACf,EACF,WAEA,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,GAAG,CAAA,CAAC,UAAU,oBAMpB,GAAmB,EAAuB,IAAI,CAAC,WAAW,EACzD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,UAAC,0BACP,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCAAgC,yHAG7C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8DACZ,EAAuB,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,EAAc,IAC1D,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAgB,UAAU,yCACxB,GADO,MAKd,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CACL,QAAQ,UACR,KAAK,KACL,QAAS,KAEP,IAAM,EAAO,IAAI,KAAK,CADJ,EAAuB,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,MAC9B,CAAE,CAAE,KAAM,YAAa,GAClD,EAAM,IAAI,eAAe,CAAC,GAC1B,EAAI,SAAS,aAAa,CAAC,KACjC,EAAE,IAAI,CAAG,EACT,EAAE,QAAQ,CAAG,0BACb,EAAE,KAAK,GACP,IAAI,eAAe,CAAC,EACtB,YAEA,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,iBAAiB,8BAO3C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,UAAC,0BACP,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCAAgC,+GAG7C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,KAAK,OACL,UAAU,UACV,UAAW,EACX,MAAO,EACP,SAAU,AAAC,GAAM,EAAkB,EAAE,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,MAAO,KACjE,YAAY,SACZ,UAAU,mDAEZ,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CACL,QAhMS,CAgMA,IA/L7B,AAA8B,GAAG,CAA7B,EAAe,MAAM,CACvB,EAAS,CACP,KAAM,QACN,MAAO,gBACP,YAAa,mCACf,GAGF,EAAyB,MAAM,CAAC,EAClC,EAuLsB,SAAU,EAAyB,SAAS,EAA8B,IAA1B,EAAe,MAAM,WAEpE,EAAyB,SAAS,CACjC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,8BAErB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,iBACvB,0BAWf,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,8BAAqB,sBACnC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,8CAAqC,8FAGlD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,QAAQ,cACR,QAAS,IAAM,GAAqB,YACrC,yBAMH,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,8BAAqB,0BACnC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,8CAAqC,6EAGlD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CACL,QAAQ,UACR,QAAS,IAAM,EAA8B,MAAM,GACnD,SAAU,EAA8B,SAAS,WAEjD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,iBAAiB,4BAMzC,GAAmB,EAA8B,IAAI,EAAE,aACtD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2EACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,2BAAkB,mCACnC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,wCAA+B,+EAG5C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8DACZ,EAA8B,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,EAAc,IACjE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAgB,UAAU,yCACxB,GADO,MAKd,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CACL,QAAQ,UACR,KAAK,KACL,QAAS,KAEP,IAAM,EAAO,IAAI,KAAK,CADJ,EAA8B,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,MACrC,CAAE,CAAE,KAAM,YAAa,GAClD,EAAM,IAAI,eAAe,CAAC,GAC1B,EAAI,SAAS,aAAa,CAAC,KACjC,EAAE,IAAI,CAAG,EACT,EAAE,QAAQ,CAAG,0BACb,EAAE,KAAK,GACP,IAAI,eAAe,CAAC,EACtB,YAEA,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,iBAAiB,uCAWnD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAM,EAAmB,aAAc,WAC7C,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,aAAa,CAAA,WACZ,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,YAAY,CAAA,WACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UAAC,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,iBAAiB,CAAA,UAAC,wGAIrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,4BAAmB,iBAClC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,mBACH,KAAK,WACL,MAAO,EACP,SAAU,AAAC,GAAM,EAAmB,EAAE,MAAM,CAAC,KAAK,EAClD,YAAY,qBACZ,UAAU,YAGd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,QAAQ,UACR,QAAS,KACP,GAAqB,GACrB,EAAmB,GACrB,WACD,YAGD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CACL,QAAQ,cACR,QA5SQ,CA4SC,IA3SrB,AAAK,EAQL,EARI,AAQY,MAAM,CAAC,GAPrB,EAAS,CADW,AAElB,KAAM,QACN,MAAO,sBACP,YAAa,qCACf,EAIJ,EAmSc,SAAU,EAAgB,SAAS,EAAI,CAAC,YAEvC,EAAgB,SAAS,CACxB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,8BACnB,KAAK,2BASnB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,WACH,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,WACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,qBACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,UAAC,2DAInB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAA,QAKL,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,WACH,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,WACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,sBACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,UAAC,mEAInB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAA,UAKX,CAGA,SAAS,IACP,GAAM,MAAE,CAAI,CAAE,CAAG,CAAA,EAAA,EAAA,OAAA,AAAO,IAClB,EAAc,CAAA,EAAA,EAAA,cAAA,AAAc,IAC5B,UAAE,CAAQ,CAAE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,IAEvB,CAAE,KAAM,CAAQ,WAAE,CAAS,CAAE,SAAO,CAAE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,CACtD,SAAU,CAAC,kBAAmB,GAAM,GAAG,CACvC,QAAS,UACP,IAAM,EAAW,MAAM,MAAM,wBAC7B,GAAI,CAAC,EAAS,EAAE,CAAE,MAAM,AAAI,MAAM,+CAElC,MAAO,CADM,MAAM,EAAS,IAAI,EAAA,EACpB,QAAQ,EAAI,EAAE,AAC5B,EACA,QAAS,CAAC,CAAC,GAAM,EACnB,GAEM,EAAiB,CAAA,EAAA,EAAA,WAAW,AAAX,EAAY,CACjC,WAAY,MAAO,IACjB,IAAM,EAAW,MAAM,MAAM,uBAAwB,CACnD,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,SAAS,CAAC,CAAE,WAAY,CAAU,EAC/C,GACA,GAAI,CAAC,EAAS,EAAE,CAEd,CAFgB,KAEV,AAAI,MAAM,CADF,MAAM,EAAS,IAAI,EAAA,EACX,KAAK,EAAI,+BAEnC,EACA,UAAW,KACT,EAAY,iBAAiB,CAAC,CAAE,SAAU,CAAC,kBAAkB,AAAC,GAC9D,EAAS,CACP,KAAM,UACN,MAAO,mBACP,YAAa,wCACf,EACF,EACA,QAAS,AAAC,IACR,EAAS,CACP,KAAM,QACN,MAAO,SACP,YAAa,EAAM,OAAO,EAAI,0BAChC,EACF,CACF,GAEM,EAAoB,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,CACpC,WAAY,UACV,IAAM,EAAW,MAAM,MAAM,uBAAwB,CACnD,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,SAAS,CAAC,CAAE,YAAY,CAAK,EAC1C,GACA,GAAI,CAAC,EAAS,EAAE,CAEd,CAFgB,KAEV,AAAI,MAAM,CADF,MAAM,EAAS,IAAI,EAAA,EACX,KAAK,EAAI,+BAEnC,EACA,UAAW,KACT,EAAY,iBAAiB,CAAC,CAAE,SAAU,CAAC,kBAAkB,AAAC,GAC9D,EAAS,CACP,KAAM,UACN,MAAO,gCACP,YAAa,oDACf,EACF,EACA,QAAS,AAAC,IACR,EAAS,CACP,KAAM,QACN,MAAO,SACP,YAAa,EAAM,OAAO,EAAI,0BAChC,EACF,CACF,UAEA,AAAI,EACK,CAAA,EAAA,EAAA,GAAA,CADM,CACL,MAAA,CAAI,UAAU,6CAAoC,kBAGvD,AAAD,GAAa,AAAoB,GAAG,GAAd,MAAM,CAK9B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4BACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,QAAQ,UACR,KAAK,KACL,QAAS,IAAM,EAAkB,MAAM,GACvC,SAAU,EAAkB,SAAS,UACtC,mCAIH,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACZ,EAAS,GAAG,CAAC,AAAC,GACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAEC,UAAU,oEAEV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wCACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yBAAiB,EAAQ,WAAW,GAChD,EAAQ,UAAU,EACjB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,iEAAwD,wBAK5E,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,0CACV,EAAQ,WAAW,CAAC,MAAI,EAAQ,UAAU,CAAC,MAAI,EAAQ,OAAO,EAAI,aAErE,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,0CAAgC,sBACvB,IAAI,KAAK,EAAQ,gBAAgB,EAAE,cAAc,CAAC,eAGzE,CAAC,EAAQ,UAAU,EAClB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,QAAQ,UACR,KAAK,KACL,QAAS,IAAM,EAAe,MAAM,CAAC,EAAQ,EAAE,EAC/C,SAAU,EAAe,SAAS,UACnC,eAzBE,EAAQ,EAAE,QAlBhB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6CAAoC,yBAoD9D,CAGA,SAAS,IACP,GAAM,MAAE,CAAI,CAAE,CAAG,CAAA,EAAA,EAAA,OAAA,AAAO,IAClB,EAAc,CAAA,EAAA,EAAA,cAAA,AAAc,IAC5B,UAAE,CAAQ,CAAE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,IAEvB,CAAE,KAAM,CAAK,WAAE,CAAS,CAAE,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAS,CAC1C,SAAU,CAAC,gBAAiB,GAAM,gBAAgB,CAClD,QAAS,UACP,IAAM,EAAW,MAAM,MAAM,+BAC7B,GAAI,CAAC,EAAS,EAAE,CAAE,MAAM,AAAI,MAAM,6CAElC,MAAO,CADM,MAAM,EAAS,IAAI,EAAA,EACpB,KAAK,AACnB,EACA,QAAS,CAAC,CAAC,GAAM,eACnB,GAEM,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,CACvC,qBAAsB,GAAO,sBAAwB,GACrD,yBAA0B,GAAO,0BAA4B,IAC7D,wBAAyB,GAAO,yBAA2B,EAC3D,uBAAwB,GAAO,0BAA2B,EAC1D,4BAA6B,GAAO,8BAA+B,EACnE,qBAAsB,GAAO,wBAAyB,EACtD,8BAA+B,GAAO,iCAAkC,CAC1E,GAEA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACJ,GACF,EAAY,CACV,CAFO,oBAEe,EAAM,oBAAoB,EAAI,GACpD,yBAA0B,EAAM,wBAAwB,EAAI,IAC5D,wBAAyB,EAAM,uBAAuB,EAAI,EAC1D,wBAAyD,IAAjC,EAAM,sBAAsB,CACpD,4BAA6B,EAAM,2BAA2B,GAAI,EAClE,qBAAqD,KAA/B,EAAM,oBAAoB,CAChD,+BAAuE,IAAxC,EAAM,6BAA6B,AACpE,EAEJ,EAAG,CAAC,EAAM,EAEV,IAAM,EAAe,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,CAC/B,WAAY,UACV,IAAM,EAAW,MAAM,MAAM,8BAA+B,CAC1D,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,SAAS,CAAC,EACvB,GACA,GAAI,CAAC,EAAS,EAAE,CAEd,CAFgB,KAEV,AAAI,MAAM,CADF,MAAM,EAAS,IAAI,EAAA,EACX,KAAK,EAAI,gCAEjC,OAAO,EAAS,IAAI,EACtB,EACA,UAAW,KACT,EAAY,iBAAiB,CAAC,CAAE,SAAU,CAAC,gBAAgB,AAAC,GAC5D,EAAS,CACP,KAAM,UACN,MAAO,sBACP,YAAa,yDACf,EACF,EACA,QAAS,AAAC,IACR,EAAS,CACP,KAAM,QACN,MAAO,SACP,YAAa,EAAM,OAAO,EAAI,0BAChC,EACF,CACF,UAEA,AAAI,EACK,CAAA,EAAA,EAAA,GAAA,CADM,CACL,MAAA,CAAI,UAAU,6CAAoC,kBAI1D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,wBAAe,mCAC9B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,eACH,KAAK,SACL,MAAO,EAAS,oBAAoB,CACpC,SAAU,AAAC,GAAM,EAAY,CAAE,GAAG,CAAQ,CAAE,qBAAsB,SAAS,EAAE,MAAM,CAAC,KAAK,GAAK,EAAG,GACjG,IAAK,EACL,IAAK,OAEP,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,8CAAqC,wDAIpD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,4BAAmB,6BAClC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,mBACH,KAAK,SACL,MAAO,EAAS,wBAAwB,CACxC,SAAU,AAAC,GAAM,EAAY,CAAE,GAAG,CAAQ,CAAE,yBAA0B,SAAS,EAAE,MAAM,CAAC,KAAK,GAAK,GAAI,GACtG,IAAK,GACL,IAAK,QAEP,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,8CAAqC,4DAMtD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,wBAAe,2CAC9B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,eACH,KAAK,SACL,MAAO,EAAS,uBAAuB,CACvC,SAAU,AAAC,GAAM,EAAY,CAAE,GAAG,CAAQ,CAAE,wBAAyB,SAAS,EAAE,MAAM,CAAC,KAAK,GAAK,CAAE,GACnG,IAAK,EACL,IAAK,QAIT,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wEACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,UAAC,kCACP,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCAAgC,yFAI/C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,QAAS,EAAS,sBAAsB,CACxC,gBAAiB,AAAC,GAAY,EAAY,CAAE,GAAG,CAAQ,CAAE,uBAAwB,CAAQ,QAI7F,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wEACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,UAAC,+BACP,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCAAgC,2DAI/C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,QAAS,EAAS,2BAA2B,CAC7C,gBAAiB,AAAC,GAAY,EAAY,CAAE,GAAG,CAAQ,CAAE,4BAA6B,CAAQ,QAIlG,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wEACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,UAAC,gCACP,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCAAgC,+EAI/C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,QAAS,EAAS,oBAAoB,CACtC,gBAAkB,AAAD,GAAa,EAAY,CAAE,GAAG,CAAQ,CAAE,qBAAsB,CAAQ,QAI3F,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wEACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,UAAC,+BACP,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCAAgC,oEAI/C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,QAAS,EAAS,6BAA6B,CAC/C,gBAAiB,AAAC,GAAY,EAAY,CAAE,GAAG,CAAQ,CAAE,8BAA+B,CAAQ,WAKtG,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4BACb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CACL,QAAS,IAAM,EAAa,MAAM,GAClC,SAAU,EAAa,SAAS,WAEhC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,iBAAiB,gCAM3C"}