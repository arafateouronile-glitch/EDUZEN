{"version":3,"sources":["../../../../app/%28dashboard%29/dashboard/dashboard/page.tsx","../../../../lib/utils/report-pdf-export.ts"],"sourcesContent":["'use client'\n\nimport { useQuery } from '@tanstack/react-query'\nimport { createClient } from '@/lib/supabase/client'\nimport { useAuth } from '@/lib/hooks/use-auth'\nimport dynamic from 'next/dynamic'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Users, DollarSign, TrendingUp, AlertCircle, BookOpen, ClipboardList, Calendar, Award, TrendingDown, ExternalLink, Clock, Activity, UserCheck } from 'lucide-react'\nimport Link from 'next/link'\nimport { Button } from '@/components/ui/button'\nimport { formatCurrency } from '@/lib/utils'\nimport type { TableRow } from '@/lib/types/supabase-helpers'\nimport type { PaymentWithRelations, InvoiceWithRelations, AttendanceWithRelations, EnrollmentWithRelations, SessionWithRelations } from '@/lib/types/query-types'\nimport { motion } from '@/components/ui/motion'\nimport { downloadReportPDF } from '@/lib/utils/report-pdf-export'\nimport { FileDown } from 'lucide-react'\nimport { useToast } from '@/components/ui/toast'\n\n// Lazy load des composants de graphiques lourds\nconst PremiumLineChart = dynamic(() => import('@/components/charts/premium-line-chart').then((mod) => mod.PremiumLineChart), { \n  ssr: false,\n  loading: () => <div className=\"h-64 bg-gray-100 rounded-lg animate-pulse\" />\n})\nconst PremiumBarChart = dynamic(() => import('@/components/charts/premium-bar-chart').then((mod) => mod.PremiumBarChart), { \n  ssr: false,\n  loading: () => <div className=\"h-64 bg-gray-100 rounded-lg animate-pulse\" />\n})\nconst PremiumPieChart = dynamic(() => import('@/components/charts/premium-pie-chart').then((mod) => mod.PremiumPieChart), { \n  ssr: false,\n  loading: () => <div className=\"h-64 bg-gray-100 rounded-lg animate-pulse\" />\n})\n\n// Import des composants recharts pour les graphiques personnalisés\nimport { \n  LineChart, \n  Line, \n  XAxis, \n  YAxis, \n  CartesianGrid, \n  Tooltip, \n  ResponsiveContainer \n} from 'recharts'\n\nimport { performanceMonitor } from '@/lib/utils/performance-monitor'\n\ntype Payment = TableRow<'payments'>\ntype Invoice = TableRow<'invoices'>\n\nexport default function DashboardPage() {\n  const supabase = createClient() as any // Cast pour éviter les erreurs de types\n  const { user } = useAuth()\n  const { addToast } = useToast()\n\n  // Récupérer les statistiques générales (optimisé avec Promise.all)\n  const { data: stats } = useQuery({\n    queryKey: ['dashboard-stats', user?.organization_id],\n    staleTime: 2 * 60 * 1000, // Cache 2 minutes (données dashboard changent peu)\n    gcTime: 10 * 60 * 1000, // Garder en cache 10 minutes\n    refetchOnWindowFocus: false, // Ne pas refetch au focus\n    refetchOnMount: false, // Utiliser cache si disponible\n    queryFn: async () => {\n      if (!user?.organization_id) return null\n      const orgId = user.organization_id // Capture pour TypeScript\n\n      return await performanceMonitor.measure('dashboard_stats', async () => {\n\n      const currentMonth = new Date()\n      currentMonth.setDate(1)\n      const today = new Date().toISOString().split('T')[0]\n\n      // Paralléliser toutes les requêtes indépendantes\n      const [\n        studentsResult,\n        paymentsResult,\n        invoicesResult,\n        attendanceResult,\n        teachersResult,\n        activeSessionsResult,\n        activeFormationsResult,\n        activeProgramsResult,\n        formationsResult,\n        completedSessionsResult,\n      ] = await Promise.all([\n        // Nombre d'élèves actifs\n        supabase\n          .from('students')\n          .select('*', { count: 'exact', head: true })\n          .eq('organization_id', orgId)\n          .eq('status', 'active'),\n\n        // Revenus du mois\n        supabase\n          .from('payments')\n          .select('amount, currency, paid_at')\n          .eq('organization_id', user.organization_id)\n          .eq('status', 'completed')\n          .gte('paid_at', currentMonth.toISOString()),\n\n        // Impayés\n        supabase\n          .from('invoices')\n          .select('total_amount, document_type')\n          .eq('organization_id', user.organization_id)\n          .eq('status', 'overdue')\n          .or('document_type.eq.invoice,document_type.is.null'),\n\n        // Taux de présence\n        supabase\n          .from('attendance')\n          .select('status')\n          .eq('organization_id', user.organization_id)\n          .eq('date', today),\n\n        // Nombre d'enseignants actifs\n        supabase\n          .from('users')\n          .select('*', { count: 'exact', head: true })\n          .eq('organization_id', user.organization_id)\n          .eq('role', 'teacher')\n          .eq('is_active', true),\n\n        // Sessions en cours\n        supabase\n          .from('sessions')\n          .select('*, formations!inner(organization_id)', { count: 'exact', head: true })\n          .eq('formations.organization_id', user.organization_id)\n          .eq('status', 'ongoing'),\n\n        // Formations actives\n        supabase\n          .from('formations')\n          .select('*', { count: 'exact', head: true })\n          .eq('organization_id', user.organization_id)\n          .eq('is_active', true),\n\n        // Programmes actifs\n        supabase\n          .from('programs')\n          .select('*', { count: 'exact', head: true })\n          .eq('organization_id', user.organization_id)\n          .eq('is_active', true),\n\n        // Formations pour calculer les inscriptions\n        supabase\n          .from('formations')\n          .select('id')\n          .eq('organization_id', user.organization_id),\n\n        // Sessions terminées\n        supabase\n          .from('sessions')\n          .select('*, formations!inner(organization_id)', { count: 'exact', head: true })\n          .eq('formations.organization_id', user.organization_id)\n          .eq('status', 'completed'),\n      ])\n\n      // Traiter les résultats\n      const studentsCount = studentsResult.count || 0\n\n      const paymentsArray = (paymentsResult.data as Payment[]) || []\n      const monthlyRevenue = paymentsArray.reduce((sum, p) => sum + Number(p.amount), 0)\n\n      const invoicesArray = (invoicesResult.data as Invoice[]) || []\n      const overdueAmount = invoicesArray.reduce((sum, inv) => sum + Number(inv.total_amount), 0)\n\n      const attendanceData = (attendanceResult.data as AttendanceWithRelations[]) || []\n      const totalAttendance = attendanceData.length\n      const presentCount = attendanceData.filter((a) => a.status === 'present').length\n      const avgAttendance = totalAttendance > 0 ? (presentCount / totalAttendance) * 100 : 0\n\n      const teachersCount = teachersResult.count || 0\n      const activeSessionsCount = activeSessionsResult.count || 0\n      const activeFormationsCount = activeFormationsResult.count || 0\n      const activeProgramsCount = activeProgramsResult.count || 0\n      const completedSessions = completedSessionsResult.count || 0\n\n      // Calculer les inscriptions totales (requête séparée car dépend de formations)\n      let totalEnrollments = 0\n      if (formationsResult.data && formationsResult.data.length > 0) {\n        const formationIds = formationsResult.data.map((f: any) => f.id)\n        const { data: sessions } = await supabase\n          .from('sessions')\n          .select('id')\n          .in('formation_id', formationIds)\n\n        if (sessions && sessions.length > 0) {\n          const sessionIds = sessions.map((s: any) => s.id)\n          const { count } = await supabase\n            .from('enrollments')\n            .select('*', { count: 'exact', head: true })\n            .in('session_id', sessionIds)\n          totalEnrollments = count || 0\n        }\n      }\n\n      return {\n        studentsCount: studentsCount || 0,\n        monthlyRevenue,\n        overdueAmount,\n        avgAttendance: Math.round(avgAttendance),\n        teachersCount: teachersCount || 0,\n        activeSessionsCount: activeSessionsCount || 0,\n        activeFormationsCount: activeFormationsCount || 0,\n        activeProgramsCount: activeProgramsCount || 0,\n        totalEnrollments: totalEnrollments || 0,\n        completedSessions: completedSessions || 0,\n      }\n      }, {\n        organizationId: user.organization_id,\n      })\n    },\n    enabled: !!user?.organization_id,\n  })\n\n  // Récupérer l'évolution des revenus (6 derniers mois)\n  const { data: revenueData } = useQuery({\n    queryKey: ['revenue-evolution', user?.organization_id],\n    queryFn: async () => {\n      if (!user?.organization_id) return []\n\n      const months = []\n      const now = new Date()\n      \n      for (let i = 5; i >= 0; i--) {\n        const month = new Date(now.getFullYear(), now.getMonth() - i, 1)\n        const nextMonth = new Date(now.getFullYear(), now.getMonth() - i + 1, 1)\n        \n        const { data: payments } = await supabase\n          .from('payments')\n          .select('amount')\n          .eq('organization_id', user.organization_id)\n          .eq('status', 'completed')\n          .gte('paid_at', month.toISOString())\n          .lt('paid_at', nextMonth.toISOString())\n\n        const monthlyPayments = (payments as Payment[]) || []\n        const revenue = monthlyPayments.reduce((sum, p) => sum + Number(p.amount), 0)\n        \n        months.push({\n          month: month.toLocaleDateString('fr-FR', { month: 'short', year: 'numeric' }),\n          revenue: Math.round(revenue),\n        })\n      }\n\n      return months\n    },\n    enabled: !!user?.organization_id,\n  })\n\n  // Récupérer les élèves par session (remplace les classes)\n  const { data: studentsBySession } = useQuery({\n    queryKey: ['students-by-session', user?.organization_id],\n    queryFn: async () => {\n      if (!user?.organization_id) return []\n\n      const { data: sessions } = await supabase\n        .from('sessions')\n        .select('id, name, formations!inner(id, name, organization_id, programs(id, name))')\n        .eq('formations.organization_id', user.organization_id)\n\n      if (!sessions) return []\n\n      const sessionData = await Promise.all(\n        sessions.map(async (session: any) => {\n          const { count } = await supabase\n            .from('students')\n            .select('*', { count: 'exact', head: true })\n            .eq('class_id', session.id) // class_id stocke maintenant l'ID de session\n            .eq('status', 'active')\n\n          const formationName = session.formations?.name || ''\n          const programName = session.formations?.programs?.name\n          const displayName = programName \n            ? `${session.name} - ${formationName} (${programName})`\n            : `${session.name} - ${formationName}`\n\n          return {\n            name: displayName,\n            students: count || 0,\n          }\n        })\n      )\n\n      return sessionData.filter((s) => s.students > 0)\n    },\n    enabled: !!user?.organization_id,\n  })\n\n  // Récupérer les statuts de factures (uniquement les factures, pas les devis)\n  const { data: invoiceStatus } = useQuery({\n    queryKey: ['invoice-status', user?.organization_id],\n    queryFn: async () => {\n      if (!user?.organization_id) return []\n\n      const { data: invoices } = await supabase\n        .from('invoices')\n        .select('status, document_type')\n        .eq('organization_id', user.organization_id)\n        .or('document_type.eq.invoice,document_type.is.null') // Uniquement les factures\n\n      if (!invoices) return []\n\n      let paidCount = 0\n      let sentCount = 0\n      let partialCount = 0\n      let overdueCount = 0\n      let draftCount = 0\n\n      ;(invoices as Invoice[]).forEach((inv: Invoice) => {\n        const status = inv.status\n        if (status === 'paid') paidCount++\n        else if (status === 'sent') sentCount++\n        else if (status === 'partial') partialCount++\n        else if (status === 'overdue') overdueCount++\n        else if (status === 'draft') draftCount++\n      })\n\n      return [\n        { name: 'Payées', value: paidCount, color: '#335ACF' },\n        { name: 'Envoyées', value: sentCount, color: '#3B82F6' },\n        { name: 'Partielles', value: partialCount, color: '#34B9EE' },\n        { name: 'En retard', value: overdueCount, color: '#EF4444' },\n        { name: 'Brouillons', value: draftCount, color: '#6B7280' },\n      ].filter((item) => item.value > 0)\n    },\n    enabled: !!user?.organization_id,\n  })\n\n  // Récupérer les inscriptions récentes\n  const { data: recentEnrollments } = useQuery({\n    queryKey: ['recent-enrollments', user?.organization_id],\n    queryFn: async () => {\n      if (!user?.organization_id) return []\n\n      // D'abord, récupérer les formations de l'organisation\n      const { data: formations } = await supabase\n        .from('formations')\n        .select('id')\n        .eq('organization_id', user.organization_id)\n\n      if (!formations || formations.length === 0) return []\n\n      const formationIds = formations.map((f: any) => f.id)\n\n      // Ensuite, récupérer les sessions de ces formations\n      const { data: sessions } = await supabase\n        .from('sessions')\n        .select('id')\n        .in('formation_id', formationIds)\n\n      if (!sessions || sessions.length === 0) return []\n\n      const sessionIds = sessions.map((s: any) => s.id)\n\n      // Enfin, récupérer les inscriptions pour ces sessions\n      const { data, error } = await supabase\n        .from('enrollments')\n        .select('*, students(first_name, last_name), sessions(name, formations(name, programs(name)))')\n        .in('session_id', sessionIds)\n        .order('created_at', { ascending: false })\n        .limit(5)\n\n      if (error) {\n        console.error('Erreur lors de la récupération des inscriptions:', error)\n        return []\n      }\n\n      return data || []\n    },\n    enabled: !!user?.organization_id,\n  })\n\n  // Récupérer les événements à venir (sessions)\n  const { data: upcomingEvents } = useQuery({\n    queryKey: ['upcoming-events', user?.organization_id],\n    queryFn: async () => {\n      if (!user?.organization_id) return []\n\n      const today = new Date().toISOString().split('T')[0]\n      const { data: sessions } = await supabase\n        .from('sessions')\n        .select('*, formations!inner(name, organization_id, programs(name))')\n        .eq('formations.organization_id', user.organization_id)\n        .gte('start_date', today)\n        .in('status', ['planned', 'ongoing'])\n        .order('start_date', { ascending: true })\n        .limit(5)\n\n      return (sessions || []).map((session: any) => ({\n        id: session.id,\n        name: session.name,\n        formation: session.formations?.name || '',\n        program: session.formations?.programs?.name || '',\n        start_date: session.start_date,\n        end_date: session.end_date,\n        status: session.status,\n      }))\n    },\n    enabled: !!user?.organization_id,\n  })\n\n  // Récupérer les top programmes par nombre d'inscriptions\n  const { data: topPrograms } = useQuery({\n    queryKey: ['top-programs', user?.organization_id],\n    queryFn: async () => {\n      if (!user?.organization_id) return []\n\n      // Récupérer tous les programmes avec leurs formations\n      const { data: programs } = await supabase\n        .from('programs')\n        .select('id, name, code, formations(id)')\n        .eq('organization_id', user.organization_id)\n        .eq('is_active', true)\n\n      if (!programs) return []\n\n      // Pour chaque programme, compter les inscriptions via ses formations\n      const programsWithStats = await Promise.all(\n        programs.map(async (program: any) => {\n          let totalEnrollments = 0\n          \n          // Pour chaque formation, récupérer ses sessions et leurs inscriptions\n          for (const formation of program.formations || []) {\n            const { data: sessions } = await supabase\n              .from('sessions')\n              .select('id')\n              .eq('formation_id', formation.id)\n            \n            const sessionIds = (sessions || []).map((s: any) => s.id).filter((id: any): id is string => !!id)\n            \n            if (sessionIds && sessionIds.length > 0) {\n              const { count, error: enrollmentsError } = await supabase\n                .from('enrollments')\n                .select('*', { count: 'exact', head: true })\n                .in('session_id', sessionIds)\n              if (enrollmentsError) throw enrollmentsError\n              \n              totalEnrollments += count || 0\n            }\n          }\n\n          return {\n            id: program.id,\n            name: program.name,\n            code: program.code,\n            enrollments: totalEnrollments,\n          }\n        })\n      )\n\n      // Trier par nombre d'inscriptions et prendre le top 5\n      return programsWithStats\n        .filter(p => p.enrollments > 0)\n        .sort((a, b) => b.enrollments - a.enrollments)\n        .slice(0, 5)\n    },\n    enabled: !!user?.organization_id,\n  })\n\n  const COLORS = ['#335ACF', '#34B9EE', '#3B82F6', '#EF4444', '#8B5CF6', '#EC4899']\n\n  // KPIs principaux avec design futuriste\n  const mainKPIs = [\n    {\n      title: 'Inscriptions',\n      value: stats?.totalEnrollments || 0,\n      icon: UserCheck,\n      gradient: 'from-[#34B9EE] to-[#335ACF]',\n      neon: '#34B9EE',\n    },\n    {\n      title: 'Chiffre d\\'affaires',\n      value: formatCurrency(stats?.monthlyRevenue || 0, 'XOF'),\n      icon: DollarSign,\n      gradient: 'from-[#335ACF] to-[#34B9EE]',\n      neon: '#335ACF',\n    },\n    {\n      title: 'Apprenants',\n      value: stats?.studentsCount || 0,\n      icon: Users,\n      gradient: 'from-[#34B9EE] via-[#335ACF] to-[#34B9EE]',\n      neon: '#34B9EE',\n    },\n    {\n      title: 'Sessions en cours',\n      value: stats?.activeSessionsCount || 0,\n      icon: Activity,\n      gradient: 'from-[#335ACF] to-[#34B9EE]',\n      neon: '#335ACF',\n    },\n    {\n      title: 'Taux de présence',\n      value: `${stats?.avgAttendance || 0}%`,\n      icon: TrendingUp,\n      gradient: 'from-[#34B9EE] to-[#335ACF]',\n      neon: '#34B9EE',\n    },\n  ]\n\n  return (\n    <div className=\"fixed inset-0 bg-[#0A0A0F] overflow-y-auto\">\n      {/* Animated background gradient */}\n      <div className=\"absolute inset-0 bg-gradient-to-br from-[#1A1A2E] via-[#0A0A0F] to-[#16213E] opacity-100\"></div>\n      <div className=\"absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(51,90,207,0.15),transparent_50%),radial-gradient(circle_at_70%_80%,rgba(52,185,238,0.15),transparent_50%)]\"></div>\n      \n      <div className=\"relative z-10 space-y-8 p-6 md:p-8 min-h-full\">\n        {/* Header */}\n        <motion.div\n          initial={{ opacity: 0, y: -20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.6 }}\n          className=\"flex items-center justify-between\"\n        >\n          <div>\n            <h1 className=\"text-5xl font-light tracking-tight text-white mb-2\" style={{ fontFamily: 'Inter, sans-serif', fontWeight: 200 }}>\n              Dashboard\n            </h1>\n            <p className=\"text-white/60 text-sm font-light\" style={{ fontFamily: 'Inter, sans-serif', fontWeight: 300 }}>\n              Vue d'ensemble en temps réel\n            </p>\n          </div>\n          <Button\n            onClick={async () => {\n              try {\n                if (!stats || !user?.organization_id) {\n                  addToast({\n                    type: 'warning',\n                    title: 'Données indisponibles',\n                    description: 'Les statistiques ne sont pas encore chargées.',\n                  })\n                  return\n                }\n\n                // Récupérer les informations de l'organisation\n                const { data: org } = await supabase\n                  .from('organizations')\n                  .select('name, address')\n                  .eq('id', user.organization_id)\n                  .single()\n\n                await downloadReportPDF(\n                  {\n                    title: 'Rapport du Dashboard',\n                    organization: {\n                      name: org?.name || 'Organisation',\n                      address: org?.address || undefined,\n                    },\n                    stats: {\n                      totalStudents: stats.studentsCount || 0,\n                      activeSessions: stats.activeSessionsCount || 0,\n                      monthlyRevenue: stats.monthlyRevenue || 0,\n                      pendingInvoices: (stats as any).pendingInvoices || 0,\n                      attendanceRate: stats.avgAttendance,\n                      completedPayments: (stats as any).completedPayments || 0,\n                    },\n                    generatedAt: new Date().toISOString(),\n                  },\n                  undefined,\n                  {\n                    organizationId: user.organization_id,\n                    userId: user.id,\n                  }\n                )\n\n                addToast({\n                  type: 'success',\n                  title: 'Export réussi',\n                  description: 'Le rapport PDF a été téléchargé avec succès.',\n                })\n\n                // Track l'événement\n                if (typeof window !== 'undefined') {\n                  const { analytics } = await import('@/lib/utils/analytics')\n                  analytics.export.pdf('dashboard_report')\n                }\n              } catch (error) {\n                console.error('Erreur lors de l\\'export PDF:', error)\n                addToast({\n                  type: 'error',\n                  title: 'Erreur d\\'export',\n                  description: 'Une erreur est survenue lors de la génération du PDF.',\n                })\n              }\n            }}\n            variant=\"outline\"\n            className=\"bg-white/5 backdrop-blur-xl border-white/10 text-white hover:bg-white/10\"\n          >\n            <FileDown className=\"mr-2 h-4 w-4\" />\n            Exporter en PDF\n          </Button>\n          <Button\n            onClick={async () => {\n              try {\n                if (!stats || !user?.organization_id) {\n                  addToast({\n                    type: 'warning',\n                    title: 'Données indisponibles',\n                    description: 'Les statistiques ne sont pas encore chargées.',\n                  })\n                  return\n                }\n\n                // Récupérer les informations de l'organisation\n                const { data: org } = await supabase\n                  .from('organizations')\n                  .select('name, address')\n                  .eq('id', user.organization_id)\n                  .single()\n\n                await downloadReportPDF({\n                  title: 'Rapport du Dashboard',\n                  organization: {\n                    name: org?.name || 'Organisation',\n                    address: org?.address || undefined,\n                  },\n                  stats: {\n                    totalStudents: stats.studentsCount || 0,\n                    activeSessions: stats.activeSessionsCount || 0,\n                    monthlyRevenue: stats.monthlyRevenue || 0,\n                    pendingInvoices: (stats as any).pendingInvoices || 0,\n                    attendanceRate: stats.avgAttendance,\n                    completedPayments: (stats as any).completedPayments || 0,\n                  },\n                  generatedAt: new Date().toISOString(),\n                })\n\n                addToast({\n                  type: 'success',\n                  title: 'Export réussi',\n                  description: 'Le rapport PDF a été téléchargé avec succès.',\n                })\n\n                // Track l'événement\n                if (typeof window !== 'undefined') {\n                  const { analytics } = await import('@/lib/utils/analytics')\n                  analytics.export.pdf('dashboard_report')\n                }\n              } catch (error) {\n                console.error('Erreur lors de l\\'export PDF:', error)\n                addToast({\n                  type: 'error',\n                  title: 'Erreur d\\'export',\n                  description: 'Une erreur est survenue lors de la génération du PDF.',\n                })\n              }\n            }}\n            variant=\"outline\"\n            className=\"bg-white/5 backdrop-blur-xl border-white/10 text-white hover:bg-white/10\"\n          >\n            <FileDown className=\"mr-2 h-4 w-4\" />\n            Exporter en PDF\n          </Button>\n        </motion.div>\n\n        {/* KPIs Principaux avec Glassmorphism */}\n        <div className=\"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5\">\n          {mainKPIs.map((kpi, index) => (\n            <motion.div\n              key={kpi.title}\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.6, delay: index * 0.1 }}\n            >\n              <div className=\"relative group\">\n                {/* Gradient Border */}\n                <div className={`absolute -inset-0.5 bg-gradient-to-r ${kpi.gradient} rounded-2xl opacity-75 group-hover:opacity-100 blur-sm transition-opacity`}></div>\n                \n                {/* Glassmorphism Card */}\n                <div className=\"relative bg-white/5 backdrop-blur-xl rounded-2xl border border-white/10 p-6 hover:bg-white/[0.08] transition-all duration-300\">\n                  <div className=\"flex items-start justify-between mb-4\">\n                    <div className={`p-3 rounded-xl bg-gradient-to-br ${kpi.gradient} opacity-90`}>\n                      <kpi.icon className=\"h-5 w-5 text-white\" />\n                    </div>\n                  </div>\n                  \n                  <div className=\"space-y-1\">\n                    <p className=\"text-white/60 text-xs font-light uppercase tracking-wider\" style={{ fontFamily: 'Inter, sans-serif', fontWeight: 300 }}>\n                      {kpi.title}\n                    </p>\n                    <p \n                      className=\"text-3xl font-light text-white\" \n                      style={{ \n                        fontFamily: 'Inter, sans-serif', \n                        fontWeight: 200,\n                        textShadow: `0 0 20px ${kpi.neon}, 0 0 40px ${kpi.neon}40`\n                      }}\n                    >\n                      {kpi.value}\n                    </p>\n                  </div>\n\n                  {/* Neon glow effect on hover */}\n                  <div \n                    className=\"absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300\"\n                    style={{\n                      boxShadow: `0 0 30px ${kpi.neon}40, inset 0 0 30px ${kpi.neon}20`\n                    }}\n                  ></div>\n                </div>\n              </div>\n            </motion.div>\n          ))}\n        </div>\n\n        {/* Graphique Évolution CA avec style néon */}\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.6, delay: 0.3 }}\n          className=\"relative group\"\n        >\n          <div className=\"absolute -inset-0.5 bg-gradient-to-r from-[#335ACF] via-[#34B9EE] to-[#335ACF] rounded-2xl opacity-50 group-hover:opacity-75 blur-sm transition-opacity\"></div>\n          \n          <div className=\"relative bg-white/5 backdrop-blur-xl rounded-2xl border border-white/10 p-6 hover:bg-white/[0.08] transition-all duration-300\">\n            <h3 className=\"text-white/90 text-lg font-light mb-6\" style={{ fontFamily: 'Inter, sans-serif', fontWeight: 300 }}>\n              Évolution du chiffre d'affaires\n            </h3>\n            \n            {revenueData && revenueData.length > 0 ? (\n              // @ts-ignore - Composants recharts chargés dynamiquement sans types\n              <ResponsiveContainer width=\"100%\" height={300} {...({} as any)}>\n                <LineChart data={revenueData} {...({} as any)}>\n                  <defs>\n                    <linearGradient id=\"revenueGradient\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                      <stop offset=\"5%\" stopColor=\"#34B9EE\" stopOpacity={0.8}/>\n                      <stop offset=\"95%\" stopColor=\"#335ACF\" stopOpacity={0.1}/>\n                    </linearGradient>\n                  </defs>\n                  <CartesianGrid {...({ strokeDasharray: \"3 3\", stroke: \"#ffffff20\" } as any)} />\n                  <XAxis \n                    {...({\n                      dataKey: \"month\", \n                      stroke: \"#ffffff60\",\n                      style: { fontFamily: 'Inter, sans-serif', fontSize: '12px', fontWeight: 300 }\n                    } as any)}\n                  />\n                  <YAxis \n                    {...({\n                      stroke: \"#ffffff60\",\n                      style: { fontFamily: 'Inter, sans-serif', fontSize: '12px', fontWeight: 300 }\n                    } as any)}\n                  />\n                  <Tooltip\n                    {...({\n                      contentStyle: {\n                        backgroundColor: 'rgba(10, 10, 15, 0.95)',\n                        border: '1px solid rgba(52, 185, 238, 0.5)',\n                        borderRadius: '12px',\n                        backdropFilter: 'blur(20px)',\n                        color: '#fff',\n                        fontFamily: 'Inter, sans-serif',\n                        fontWeight: 300,\n                      },\n                      formatter: (value: any) => formatCurrency(value, 'XOF')\n                    } as any)}\n                  />\n                  <Line\n                    {...({\n                      type: \"monotone\",\n                      dataKey: \"revenue\",\n                      stroke: \"#34B9EE\",\n                      strokeWidth: 3,\n                      dot: { fill: '#34B9EE', r: 5, filter: 'drop-shadow(0 0 6px #34B9EE)' },\n                      activeDot: { r: 7, fill: '#34B9EE', filter: 'drop-shadow(0 0 12px #34B9EE)' },\n                      strokeDasharray: \"0\"\n                    } as any)}\n                  />\n                </LineChart>\n              </ResponsiveContainer>\n            ) : (\n              <div className=\"text-center py-12 text-white/40 text-sm font-light\" style={{ fontFamily: 'Inter, sans-serif', fontWeight: 300 }}>\n                Aucune donnée disponible\n              </div>\n            )}\n          </div>\n        </motion.div>\n\n        {/* Section Événements à venir */}\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.6, delay: 0.4 }}\n          className=\"relative group\"\n        >\n          <div className=\"absolute -inset-0.5 bg-gradient-to-r from-[#34B9EE] via-[#335ACF] to-[#34B9EE] rounded-2xl opacity-50 group-hover:opacity-75 blur-sm transition-opacity\"></div>\n          \n          <div className=\"relative bg-white/5 backdrop-blur-xl rounded-2xl border border-white/10 p-6 hover:bg-white/[0.08] transition-all duration-300\">\n            <div className=\"flex items-center justify-between mb-6\">\n              <h3 className=\"text-white/90 text-lg font-light\" style={{ fontFamily: 'Inter, sans-serif', fontWeight: 300 }}>\n                Événements à venir\n              </h3>\n              <Calendar className=\"h-5 w-5 text-[#34B9EE]\" />\n            </div>\n            \n            {upcomingEvents && upcomingEvents.length > 0 ? (\n              <div className=\"space-y-4\">\n                {upcomingEvents.map((event: any, index: number) => (\n                  <motion.div\n                    key={event.id}\n                    initial={{ opacity: 0, x: -20 }}\n                    animate={{ opacity: 1, x: 0 }}\n                    transition={{ duration: 0.4, delay: 0.5 + index * 0.1 }}\n                    className=\"flex items-center justify-between p-4 bg-white/5 rounded-xl border border-white/10 hover:bg-white/[0.08] transition-all group/item\"\n                  >\n                    <div className=\"flex items-center space-x-4 flex-1\">\n                      <div className=\"p-2 rounded-lg bg-gradient-to-br from-[#34B9EE] to-[#335ACF] opacity-80\">\n                        <Clock className=\"h-4 w-4 text-white\" />\n                      </div>\n                      <div className=\"flex-1 min-w-0\">\n                        <p className=\"text-white/90 font-light text-sm truncate\" style={{ fontFamily: 'Inter, sans-serif', fontWeight: 400 }}>\n                          {event.name}\n                        </p>\n                        <p className=\"text-white/50 text-xs font-light mt-1\" style={{ fontFamily: 'Inter, sans-serif', fontWeight: 300 }}>\n                          {event.program && `${event.program} - `}{event.formation}\n                        </p>\n                        <p className=\"text-white/40 text-xs font-light mt-1\" style={{ fontFamily: 'Inter, sans-serif', fontWeight: 300 }}>\n                          {new Date(event.start_date).toLocaleDateString('fr-FR', { day: 'numeric', month: 'short' })}\n                        </p>\n                      </div>\n                    </div>\n                    <div \n                      className=\"px-3 py-1 rounded-lg text-xs font-light border\"\n                      style={{\n                        backgroundColor: event.status === 'ongoing' ? 'rgba(52, 185, 238, 0.2)' : 'rgba(51, 90, 207, 0.2)',\n                        borderColor: event.status === 'ongoing' ? 'rgba(52, 185, 238, 0.5)' : 'rgba(51, 90, 207, 0.5)',\n                        color: event.status === 'ongoing' ? '#34B9EE' : '#335ACF',\n                        fontFamily: 'Inter, sans-serif',\n                        fontWeight: 300,\n                      }}\n                    >\n                      {event.status === 'ongoing' ? 'En cours' : 'Planifié'}\n                    </div>\n                  </motion.div>\n                ))}\n              </div>\n            ) : (\n              <div className=\"text-center py-12 text-white/40 text-sm font-light\" style={{ fontFamily: 'Inter, sans-serif', fontWeight: 300 }}>\n                Aucun événement à venir\n              </div>\n            )}\n          </div>\n        </motion.div>\n      </div>\n    </div>\n  )\n}\n","/**\n * Utilitaires pour exporter les rapports en PDF\n */\n\nimport { jsPDF } from 'jspdf'\nimport { formatDate, formatCurrency } from '@/lib/utils/format'\n\nexport interface DashboardStats {\n  totalStudents: number\n  activeSessions: number\n  monthlyRevenue: number\n  pendingInvoices: number\n  attendanceRate?: number\n  completedPayments?: number\n}\n\nexport interface ReportData {\n  title: string\n  organization: {\n    name: string\n    address?: string\n    logo?: string\n  }\n  period?: {\n    start: string\n    end: string\n  }\n  stats: DashboardStats\n  charts?: Array<{\n    title: string\n    data: any[]\n    type: 'line' | 'bar' | 'pie'\n  }>\n  generatedAt: string\n}\n\n/**\n * Génère un PDF de rapport à partir des données du dashboard\n */\nexport async function generateReportPDF(data: ReportData): Promise<Blob> {\n  const doc = new jsPDF({\n    orientation: 'portrait',\n    unit: 'mm',\n    format: 'a4',\n  })\n\n  const pageWidth = doc.internal.pageSize.getWidth()\n  const pageHeight = doc.internal.pageSize.getHeight()\n  const margin = 20\n  let yPosition = margin\n\n  // Couleurs\n  const primaryColor: [number, number, number] = [37, 99, 235] // brand-blue\n  const textColor: [number, number, number] = [31, 41, 55] // gray-800\n  const lightGray: [number, number, number] = [243, 244, 246] // gray-100\n\n  // En-tête avec logo\n  if (data.organization.logo) {\n    try {\n      // Si le logo est une URL, on pourrait l'inclure\n      // Pour l'instant, on passe cette partie\n    } catch (error) {\n      console.warn('Impossible de charger le logo:', error)\n    }\n  }\n\n  // Titre du rapport\n  doc.setFontSize(24)\n  doc.setTextColor(...primaryColor)\n  doc.setFont('helvetica', 'bold')\n  doc.text(data.title, margin, yPosition)\n  yPosition += 10\n\n  // Informations de l'organisation\n  doc.setFontSize(12)\n  doc.setTextColor(...textColor)\n  doc.setFont('helvetica', 'normal')\n  doc.text(data.organization.name, margin, yPosition)\n  yPosition += 5\n\n  if (data.organization.address) {\n    doc.setFontSize(10)\n    doc.setTextColor(107, 114, 128) // gray-500\n    doc.text(data.organization.address, margin, yPosition)\n    yPosition += 5\n  }\n\n  // Période du rapport\n  if (data.period) {\n    doc.setFontSize(10)\n    doc.setTextColor(107, 114, 128)\n    doc.text(\n      `Période: ${formatDate(data.period.start)} - ${formatDate(data.period.end)}`,\n      margin,\n      yPosition\n    )\n    yPosition += 8\n  } else {\n    yPosition += 5\n  }\n\n  // Ligne de séparation\n  doc.setDrawColor(...lightGray)\n  doc.setLineWidth(0.5)\n  doc.line(margin, yPosition, pageWidth - margin, yPosition)\n  yPosition += 10\n\n  // Statistiques principales\n  doc.setFontSize(16)\n  doc.setTextColor(...textColor)\n  doc.setFont('helvetica', 'bold')\n  doc.text('Statistiques Principales', margin, yPosition)\n  yPosition += 10\n\n  // Grille de statistiques (2 colonnes)\n  const stats = [\n    { label: 'Étudiants totaux', value: data.stats.totalStudents.toString() },\n    { label: 'Sessions actives', value: data.stats.activeSessions.toString() },\n    {\n      label: 'Revenus mensuels',\n      value: formatCurrency(data.stats.monthlyRevenue),\n    },\n    {\n      label: 'Factures en attente',\n      value: data.stats.pendingInvoices.toString(),\n    },\n  ]\n\n  if (data.stats.attendanceRate !== undefined) {\n    stats.push({\n      label: 'Taux de présence',\n      value: `${data.stats.attendanceRate}%`,\n    })\n  }\n\n  if (data.stats.completedPayments !== undefined) {\n    stats.push({\n      label: 'Paiements complétés',\n      value: data.stats.completedPayments.toString(),\n    })\n  }\n\n  const colWidth = (pageWidth - 2 * margin) / 2\n  const rowHeight = 15\n  let col = 0\n  let row = 0\n\n  stats.forEach((stat, index) => {\n    const x = margin + col * colWidth\n    const y = yPosition + row * rowHeight\n\n    // Fond gris clair\n    doc.setFillColor(...lightGray)\n    doc.roundedRect(x, y - 8, colWidth - 5, 12, 2, 2, 'F')\n\n    // Label\n    doc.setFontSize(9)\n    doc.setTextColor(107, 114, 128)\n    doc.setFont('helvetica', 'normal')\n    doc.text(stat.label, x + 3, y - 2)\n\n    // Valeur\n    doc.setFontSize(14)\n    doc.setTextColor(...textColor)\n    doc.setFont('helvetica', 'bold')\n    doc.text(stat.value, x + 3, y + 4)\n\n    // Passer à la colonne suivante\n    col++\n    if (col >= 2) {\n      col = 0\n      row++\n    }\n  })\n\n  yPosition += row * rowHeight + 15\n\n  // Vérifier si on doit créer une nouvelle page\n  if (yPosition > pageHeight - 40) {\n    doc.addPage()\n    yPosition = margin\n  }\n\n  // Informations de génération\n  doc.setFontSize(8)\n  doc.setTextColor(156, 163, 175) // gray-400\n  doc.setFont('helvetica', 'italic')\n  doc.text(\n    `Généré le ${formatDate(data.generatedAt)}`,\n    margin,\n    pageHeight - 15\n  )\n\n  // Retourner le blob\n  return doc.output('blob')\n}\n\n/**\n * Télécharge un PDF de rapport\n * \n * @param data - Données du rapport\n * @param filename - Nom du fichier (optionnel)\n * @param options - Options supplémentaires (organizationId, userId pour l'historique)\n */\nexport async function downloadReportPDF(\n  data: ReportData,\n  filename?: string,\n  options?: {\n    organizationId?: string\n    userId?: string\n  }\n): Promise<void> {\n  const blob = await generateReportPDF(data)\n  const url = URL.createObjectURL(blob)\n  const link = document.createElement('a')\n  const finalFilename = filename || `rapport_${new Date().toISOString().split('T')[0]}.pdf`\n  link.href = url\n  link.download = finalFilename\n  document.body.appendChild(link)\n  link.click()\n  document.body.removeChild(link)\n  URL.revokeObjectURL(url)\n\n  // Enregistrer dans l'historique si organizationId et userId sont fournis\n  if (options?.organizationId && options?.userId) {\n    try {\n      const { exportHistoryService } = await import('@/lib/services/export-history.service')\n      await exportHistoryService.create({\n        organizationId: options.organizationId,\n        userId: options.userId,\n        exportType: 'pdf',\n        entityType: 'dashboard_report',\n        filename: finalFilename,\n        recordCount: 0, // Les rapports n'ont pas de \"records\" au sens strict\n        fileSizeBytes: blob.size,\n      })\n    } catch (error) {\n      // Ne pas bloquer l'export si l'enregistrement de l'historique échoue\n      console.warn('Erreur lors de l\\'enregistrement de l\\'historique d\\'export:', error)\n    }\n  }\n}\n\n/**\n * Génère un PDF de rapport d'attendance\n */\nexport async function generateAttendanceReportPDF(data: {\n  title: string\n  organization: { name: string; address?: string }\n  session: { name: string; startDate: string; endDate: string }\n  stats: {\n    total: number\n    present: number\n    absent: number\n    late: number\n    excused: number\n    rate: number\n  }\n  students: Array<{\n    name: string\n    present: number\n    absent: number\n    late: number\n    excused: number\n    rate: number\n  }>\n  generatedAt: string\n}): Promise<Blob> {\n  const doc = new jsPDF({\n    orientation: 'portrait',\n    unit: 'mm',\n    format: 'a4',\n  })\n\n  const pageWidth = doc.internal.pageSize.getWidth()\n  const margin = 20\n  let yPosition = margin\n\n  // Titre\n  doc.setFontSize(20)\n  doc.setTextColor(37, 99, 235)\n  doc.setFont('helvetica', 'bold')\n  doc.text(data.title, margin, yPosition)\n  yPosition += 10\n\n  // Organisation et session\n  doc.setFontSize(10)\n  doc.setTextColor(31, 41, 55)\n  doc.setFont('helvetica', 'normal')\n  doc.text(data.organization.name, margin, yPosition)\n  yPosition += 5\n  doc.text(`Session: ${data.session.name}`, margin, yPosition)\n  yPosition += 5\n  doc.text(\n    `Période: ${formatDate(data.session.startDate)} - ${formatDate(data.session.endDate)}`,\n    margin,\n    yPosition\n  )\n  yPosition += 10\n\n  // Statistiques globales\n  doc.setFontSize(14)\n  doc.setFont('helvetica', 'bold')\n  doc.text('Statistiques Globales', margin, yPosition)\n  yPosition += 8\n\n  const globalStats = [\n    { label: 'Total', value: data.stats.total },\n    { label: 'Présents', value: data.stats.present },\n    { label: 'Absents', value: data.stats.absent },\n    { label: 'En retard', value: data.stats.late },\n    { label: 'Excusés', value: data.stats.excused },\n    { label: 'Taux de présence', value: `${data.stats.rate}%` },\n  ]\n\n  globalStats.forEach((stat) => {\n    doc.setFontSize(10)\n    doc.setFont('helvetica', 'normal')\n    doc.text(`${stat.label}:`, margin, yPosition)\n    doc.setFont('helvetica', 'bold')\n    doc.text(stat.value.toString(), margin + 50, yPosition)\n    yPosition += 6\n  })\n\n  yPosition += 5\n\n  // Tableau des étudiants\n  if (data.students.length > 0) {\n    // Vérifier si on doit créer une nouvelle page\n    if (yPosition > 200) {\n      doc.addPage()\n      yPosition = margin\n    }\n\n    doc.setFontSize(14)\n    doc.setFont('helvetica', 'bold')\n    doc.text('Détail par étudiant', margin, yPosition)\n    yPosition += 8\n\n    // En-têtes du tableau\n    doc.setFontSize(9)\n    doc.setFont('helvetica', 'bold')\n    doc.setFillColor(243, 244, 246)\n    doc.rect(margin, yPosition - 5, pageWidth - 2 * margin, 8, 'F')\n    doc.text('Étudiant', margin + 2, yPosition)\n    doc.text('Présent', margin + 70, yPosition)\n    doc.text('Absent', margin + 85, yPosition)\n    doc.text('Retard', margin + 100, yPosition)\n    doc.text('Excusé', margin + 115, yPosition)\n    doc.text('Taux', margin + 130, yPosition)\n    yPosition += 8\n\n    // Lignes du tableau\n    data.students.forEach((student, index) => {\n      if (yPosition > 270) {\n        doc.addPage()\n        yPosition = margin\n        // Réimprimer les en-têtes\n        doc.setFont('helvetica', 'bold')\n        doc.setFillColor(243, 244, 246)\n        doc.rect(margin, yPosition - 5, pageWidth - 2 * margin, 8, 'F')\n        doc.text('Étudiant', margin + 2, yPosition)\n        doc.text('Présent', margin + 70, yPosition)\n        doc.text('Absent', margin + 85, yPosition)\n        doc.text('Retard', margin + 100, yPosition)\n        doc.text('Excusé', margin + 115, yPosition)\n        doc.text('Taux', margin + 130, yPosition)\n        yPosition += 8\n      }\n\n      doc.setFont('helvetica', 'normal')\n      doc.setFontSize(8)\n      doc.text(student.name.substring(0, 30), margin + 2, yPosition)\n      doc.text(student.present.toString(), margin + 70, yPosition)\n      doc.text(student.absent.toString(), margin + 85, yPosition)\n      doc.text(student.late.toString(), margin + 100, yPosition)\n      doc.text(student.excused.toString(), margin + 115, yPosition)\n      doc.text(`${student.rate}%`, margin + 130, yPosition)\n      yPosition += 6\n    })\n  }\n\n  // Pied de page\n  doc.setFontSize(8)\n  doc.setTextColor(156, 163, 175)\n  doc.setFont('helvetica', 'italic')\n  doc.text(\n    `Généré le ${formatDate(data.generatedAt)}`,\n    margin,\n    doc.internal.pageSize.getHeight() - 15\n  )\n\n  return doc.output('blob')\n}\n\n"],"names":[],"mappings":"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"}