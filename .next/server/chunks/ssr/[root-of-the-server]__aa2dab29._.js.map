{"version":3,"sources":["../../../../node_modules/lucide-react/src/icons/plus.ts","../../../../node_modules/lucide-react/src/icons/eye.ts","../../../../node_modules/lucide-react/src/icons/pen-square.ts","../../../../node_modules/lucide-react/src/icons/receipt.ts","../../../../node_modules/lucide-react/src/icons/chevron-up.ts","../../../../lib/utils/document-generation/variable-extractor.ts","../../../../lib/services/session-charges.service.ts","../../../../node_modules/lucide-react/src/icons/trending-down.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Plus\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNSAxMmgxNCIgLz4KICA8cGF0aCBkPSJNMTIgNXYxNCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/plus\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Plus = createLucideIcon('Plus', [\n  ['path', { d: 'M5 12h14', key: '1ays0h' }],\n  ['path', { d: 'M12 5v14', key: 's699le' }],\n]);\n\nexport default Plus;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Eye\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMiAxMnMzLTcgMTAtNyAxMCA3IDEwIDctMyA3LTEwIDctMTAtNy0xMC03WiIgLz4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIzIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/eye\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Eye = createLucideIcon('Eye', [\n  ['path', { d: 'M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z', key: 'rwhkz3' }],\n  ['circle', { cx: '12', cy: '12', r: '3', key: '1v7zrd' }],\n]);\n\nexport default Eye;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name PenSquare\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTEgNEg0YTIgMiAwIDAgMC0yIDJ2MTRhMiAyIDAgMCAwIDIgMmgxNGEyIDIgMCAwIDAgMi0ydi03IiAvPgogIDxwYXRoIGQ9Ik0xOC41IDIuNWEyLjEyIDIuMTIgMCAwIDEgMyAzTDEyIDE1bC00IDEgMS00WiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/pen-square\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst PenSquare = createLucideIcon('PenSquare', [\n  ['path', { d: 'M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7', key: '1qinfi' }],\n  ['path', { d: 'M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z', key: 'w2jsv5' }],\n]);\n\nexport default PenSquare;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Receipt\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNCAydjIwbDItMSAyIDEgMi0xIDIgMSAyLTEgMiAxIDItMSAyIDFWMmwtMiAxLTItMS0yIDEtMi0xLTIgMS0yLTEtMiAxLTItMVoiIC8+CiAgPHBhdGggZD0iTTE2IDhoLTZhMiAyIDAgMSAwIDAgNGg0YTIgMiAwIDEgMSAwIDRIOCIgLz4KICA8cGF0aCBkPSJNMTIgMTdWNyIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/receipt\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Receipt = createLucideIcon('Receipt', [\n  [\n    'path',\n    {\n      d: 'M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z',\n      key: 'wqdwcb',\n    },\n  ],\n  ['path', { d: 'M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8', key: '1h4pet' }],\n  ['path', { d: 'M12 17V7', key: 'pyj7ub' }],\n]);\n\nexport default Receipt;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ChevronUp\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTggMTUtNi02LTYgNiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/chevron-up\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ChevronUp = createLucideIcon('ChevronUp', [['path', { d: 'm18 15-6-6-6 6', key: '153udz' }]]);\n\nexport default ChevronUp;\n","/**\n * Extrait les variables pour la génération de documents\n */\n\nimport type { DocumentVariables } from '@/lib/types/document-templates'\nimport type { StudentWithRelations, SessionWithRelations, InvoiceWithRelations } from '@/lib/types/query-types'\nimport type { TableRow } from '@/lib/types/supabase-helpers'\n\ntype Organization = TableRow<'organizations'>\ntype Student = TableRow<'students'>\ntype Session = TableRow<'sessions'>\ntype Invoice = TableRow<'invoices'>\n\ntype Program = TableRow<'programs'>\n\nexport interface ExtractVariablesOptions {\n  student?: StudentWithRelations | Student\n  organization?: Organization\n  session?: SessionWithRelations | Session\n  invoice?: InvoiceWithRelations | Invoice\n  program?: Program & { formations?: Array<{ id: string; name: string; duration_hours?: number }> }\n  academicYear?: { name: string } | null\n  language?: 'fr' | 'en'\n  issueDate?: string\n}\n\n/**\n * Extrait les variables de document depuis les données fournies\n */\nexport function extractDocumentVariables(options: ExtractVariablesOptions): DocumentVariables {\n  const {\n    student,\n    organization,\n    session,\n    invoice,\n    program,\n    academicYear,\n    language = 'fr',\n    issueDate = new Date().toISOString(),\n  } = options\n\n  const variables: any = {\n    // Date actuelle\n    date_emission: new Date().toLocaleDateString('fr-FR'),\n    date_aujourd_hui: new Date().toLocaleDateString('fr-FR'),\n    date_jour: new Date().toLocaleDateString('fr-FR'),\n    annee_courante: new Date().getFullYear().toString(),\n    annee_actuelle: new Date().getFullYear().toString(),\n    date_generation: new Date().toLocaleDateString('fr-FR'),\n    heure: new Date().toLocaleTimeString('fr-FR', { hour: '2-digit', minute: '2-digit' }),\n\n    // Organisation/École (utiliser les deux formats pour compatibilité)\n    // Format standard (ecole_*)\n    ecole_nom: organization?.name || '',\n    ecole_logo: organization?.logo_url || '',\n    ecole_adresse: organization?.address || '',\n    ecole_ville: (organization?.address || '').split(',').pop()?.trim() || '',\n    ecole_telephone: organization?.phone || '',\n    ecole_email: organization?.email || '',\n    ecole_site_web: (organization as any)?.website || '',\n    ecole_code_postal: (organization?.address || '').match(/\\d{5}/)?.[0] || '',\n    \n    // Format alternatif (organisation_*) pour compatibilité avec anciens templates\n    organisation_nom: organization?.name || '',\n    organisation_adresse: organization?.address || '',\n    organisation_telephone: organization?.phone || '',\n    organisation_email: organization?.email || '',\n    organisation_logo: organization?.logo_url || '',\n    organisation_site_web: (organization as any)?.website || '',\n\n    // Étudiant/Élève (utiliser les deux formats pour compatibilité)\n    // Format standard (eleve_*)\n    eleve_nom: student?.last_name || '',\n    eleve_prenom: student?.first_name || '',\n    eleve_numero: student?.student_number || '',\n    eleve_date_naissance: student?.date_of_birth\n      ? new Date(student.date_of_birth).toLocaleDateString('fr-FR')\n      : '',\n    eleve_classe: ((student as StudentWithRelations) as any)?.classes\n      ? (((student as StudentWithRelations) as any).classes as { name: string }).name\n      : '',\n    eleve_photo: (student as any)?.photo_url || '',\n    eleve_adresse: (student as any)?.address || '',\n    eleve_telephone: (student as any)?.phone || '',\n    eleve_email: (student as any)?.email || '',\n    \n    // Format alternatif (etudiant_*) pour compatibilité\n    etudiant_nom: student?.last_name || '',\n    etudiant_prenom: student?.first_name || '',\n    etudiant_nom_complet: student\n      ? `${student.first_name} ${student.last_name}`\n      : '',\n    etudiant_numero: student?.student_number || '',\n    etudiant_date_naissance: student?.date_of_birth\n      ? new Date(student.date_of_birth).toLocaleDateString('fr-FR')\n      : '',\n    etudiant_adresse: (student as any)?.address || '',\n    etudiant_telephone: (student as any)?.phone || '',\n    etudiant_email: (student as any)?.email || '',\n    etudiant_photo: (student as any)?.photo_url || '',\n\n    // Classe\n    classe_nom: ((student as StudentWithRelations) as any)?.classes\n      ? (((student as StudentWithRelations) as any).classes as { name: string }).name\n      : '',\n\n    // Année académique\n    annee_academique: academicYear?.name || new Date().getFullYear().toString(),\n    annee_scolaire: academicYear?.name || new Date().getFullYear().toString(),\n\n    // Session/Formation\n    session_nom: session?.name || '',\n    session_debut: session?.start_date\n      ? new Date(session.start_date).toLocaleDateString('fr-FR')\n      : '',\n    session_fin: session?.end_date\n      ? new Date(session.end_date).toLocaleDateString('fr-FR')\n      : '',\n    session_date_debut: session?.start_date\n      ? new Date(session.start_date).toLocaleDateString('fr-FR')\n      : '',\n    session_date_fin: session?.end_date\n      ? new Date(session.end_date).toLocaleDateString('fr-FR')\n      : '',\n    formation_nom: (session as SessionWithRelations)?.formations?.name || '',\n    formation_duree: (session as SessionWithRelations)?.formations?.duration_hours\n      ? `${(session as SessionWithRelations).formations?.duration_hours} heures`\n      : '',\n    formation_objectifs: ((session as SessionWithRelations)?.formations as any)?.objectives || (program as any)?.objectives || '',\n    formation_public_concerne: ((session as SessionWithRelations)?.formations as any)?.target_audience || (program as any)?.target_audience || '',\n    formation_prerequis: ((session as SessionWithRelations)?.formations as any)?.prerequisites || (program as any)?.prerequisites || '',\n    formation_qualite_et_resultats: ((session as SessionWithRelations)?.formations as any)?.quality_indicators || (program as any)?.quality_indicators || '',\n    formation_contenu: ((session as SessionWithRelations)?.formations as any)?.content || (program as any)?.content || '',\n    formation_equipe_pedagogique: ((session as SessionWithRelations)?.formations as any)?.pedagogical_team || (program as any)?.pedagogical_team || '',\n    formation_ressources: ((session as SessionWithRelations)?.formations as any)?.resources || (program as any)?.resources || '',\n    formation_supports: ((session as SessionWithRelations)?.formations as any)?.materials || (program as any)?.materials || '',\n    session_lieu: (session as any)?.location || (session as any)?.venue || '',\n    session_effectif: (session as any)?.enrollment_count?.toString() || (session as any)?.student_count?.toString() || '',\n    diplome_ou_certification: ((session as SessionWithRelations)?.formations as any)?.certification || (program as any)?.certification || '',\n    ecole_region: (organization as any)?.region || (organization as any)?.administrative_region || '',\n    // Programme\n    programme_nom: program?.name || (session as SessionWithRelations)?.formations?.programs?.name || '',\n    programme_code: (program as any)?.code || '',\n    programme_description: (program as any)?.description || '',\n    programme_objectifs: (program as any)?.objectives || '',\n    programme_duree_totale: program?.formations\n      ? `${program.formations.reduce((total, f) => total + (f.duration_hours || 0), 0)} heures`\n      : '',\n    programme_nombre_formations: program?.formations ? `${program.formations.length}` : '',\n    programme_nombre_sessions: '', // À calculer si nécessaire\n    programme_public_concerne: (program as any)?.target_audience || '',\n    programme_modalites: (program as any)?.modalities || '',\n    programme_certification: (program as any)?.certification || '',\n\n    // Facture\n    numero_facture: invoice?.invoice_number || '',\n    facture_numero: invoice?.invoice_number || '',\n    facture_date_emission: invoice?.issue_date\n      ? new Date(invoice.issue_date).toLocaleDateString('fr-FR')\n      : '',\n    facture_date_echeance: invoice?.due_date\n      ? new Date(invoice.due_date).toLocaleDateString('fr-FR')\n      : '',\n    date_echeance: invoice?.due_date\n      ? new Date(invoice.due_date).toLocaleDateString('fr-FR')\n      : '',\n    montant: invoice?.amount ? Number(invoice.amount).toFixed(2) : '0.00',\n    montant_ht: invoice?.amount ? Number(invoice.amount).toFixed(2) : '0.00',\n    montant_ttc: invoice?.total_amount\n      ? Number(invoice.total_amount).toFixed(2)\n      : '0.00',\n    tva: invoice?.tax_amount\n      ? Number(invoice.tax_amount).toFixed(2)\n      : '0.00',\n    taux_tva: invoice?.tax_amount && invoice?.amount\n      ? ((Number(invoice.tax_amount) / Number(invoice.amount)) * 100).toFixed(2)\n      : '0.00',\n    facture_montant: invoice?.amount ? Number(invoice.amount).toFixed(2) : '0.00',\n    facture_tva: invoice?.tax_amount\n      ? Number(invoice.tax_amount).toFixed(2)\n      : '0.00',\n    facture_total: invoice?.total_amount\n      ? Number(invoice.total_amount).toFixed(2)\n      : '0.00',\n    facture_devise: invoice?.currency || 'EUR',\n    facture_items: invoice?.items\n      ? JSON.stringify(invoice.items)\n      : '[]',\n\n    // Variables supplémentaires pour factures\n    montant_lettres: invoice?.total_amount\n      ? convertNumberToWords(Number(invoice.total_amount), language)\n      : '',\n    mode_paiement: (invoice as any)?.payment_method || '',\n    date_paiement: (invoice as any)?.paid_at\n      ? new Date((invoice as any).paid_at).toLocaleDateString('fr-FR')\n      : '',\n    ecole_siret: (organization as any)?.siret || '',\n    ecole_numero_declaration: (organization as any)?.declaration_number || '',\n    ecole_representant: (organization as any)?.representative_name || '',\n\n    // Langue\n    langue: language,\n  }\n\n  return variables\n}\n\n/**\n * Convertit un nombre en lettres (français)\n */\nfunction convertNumberToWords(num: number, language: 'fr' | 'en' = 'fr'): string {\n  if (language === 'en') {\n    return convertNumberToWordsEN(num)\n  }\n  return convertNumberToWordsFR(num)\n}\n\n/**\n * Convertit un nombre en lettres en français\n */\nfunction convertNumberToWordsFR(num: number): string {\n  if (num === 0) return 'zéro euro'\n  if (num < 0) return 'moins ' + convertNumberToWordsFR(-num)\n  \n  const integerPart = Math.floor(num)\n  const decimalPart = Math.round((num - integerPart) * 100)\n  \n  let result = convertIntegerToWordsFR(integerPart)\n  \n  if (decimalPart > 0) {\n    result += ' virgule ' + convertIntegerToWordsFR(decimalPart)\n  }\n  \n  return result + (integerPart > 1 ? ' euros' : ' euro')\n}\n\nfunction convertIntegerToWordsFR(num: number): string {\n  if (num === 0) return ''\n  if (num < 10) {\n    const units = ['', 'un', 'deux', 'trois', 'quatre', 'cinq', 'six', 'sept', 'huit', 'neuf']\n    return units[num]\n  }\n  if (num < 20) {\n    const teens = ['dix', 'onze', 'douze', 'treize', 'quatorze', 'quinze', 'seize', 'dix-sept', 'dix-huit', 'dix-neuf']\n    return teens[num - 10]\n  }\n  if (num < 100) {\n    const tens = ['', '', 'vingt', 'trente', 'quarante', 'cinquante', 'soixante', 'soixante', 'quatre-vingt', 'quatre-vingt']\n    const ten = Math.floor(num / 10)\n    const unit = num % 10\n    let result = tens[ten]\n    if (ten === 7 || ten === 9) {\n      result += '-' + (unit === 1 ? 'et-' : '') + convertIntegerToWordsFR(10 + unit)\n    } else if (unit > 0) {\n      result += (unit === 1 && ten !== 8 ? '-et-' : '-') + convertIntegerToWordsFR(unit)\n    } else if (ten === 8) {\n      result += 's'\n    }\n    return result\n  }\n  if (num < 1000) {\n    const hundred = Math.floor(num / 100)\n    const remainder = num % 100\n    let result = hundred === 1 ? 'cent' : convertIntegerToWordsFR(hundred) + '-cent'\n    if (remainder > 0) {\n      result += '-' + convertIntegerToWordsFR(remainder)\n    } else if (hundred > 1) {\n      result += 's'\n    }\n    return result\n  }\n  if (num < 1000000) {\n    const thousand = Math.floor(num / 1000)\n    const remainder = num % 1000\n    let result = thousand === 1 ? 'mille' : convertIntegerToWordsFR(thousand) + '-mille'\n    if (remainder > 0) {\n      result += '-' + convertIntegerToWordsFR(remainder)\n    }\n    return result\n  }\n  // Pour les nombres plus grands, on simplifie\n  return num.toString()\n}\n\nfunction convertNumberToWordsEN(num: number): string {\n  // Implémentation simplifiée en anglais\n  return num.toFixed(2) + ' euros'\n}\n\n/**\n * Mappe les anciens types de documents vers les nouveaux types\n */\nexport function mapDocumentTypeToTemplateType(\n  oldType: string\n): string {\n  const mapping: Record<string, string> = {\n    // Mapping vers les valeurs valides de l'enum document_type\n    attestation: 'attestation_reussite', // Utilise attestation_reussite (peut être changé selon le contexte)\n    certificate: 'certificat_scolarite',\n    invoice: 'facture',\n    receipt: 'facture', // Les reçus utilisent le même type que les factures\n    transcript: 'releve_notes',\n    report_card: 'releve_notes',\n    convocation: 'convocation',\n    contract: 'contrat',\n  }\n\n  return mapping[oldType] || oldType\n}\n\n","import { createClient } from '@/lib/supabase/client'\nimport type { SupabaseClient } from '@supabase/supabase-js'\nimport { Database } from '@/types/database.types'\nimport type { TableRow, TableInsert, TableUpdate } from '@/lib/types/supabase-helpers'\n\ntype SessionCharge = TableRow<'session_charges'>\ntype ChargeCategory = TableRow<'charge_categories'>\n\ntype SessionChargeInsert = TableInsert<'session_charges'>\ntype ChargeCategoryInsert = TableInsert<'charge_categories'>\n\nexport interface SessionChargeWithCategory extends SessionCharge {\n  id: string // Explicitement inclure id pour éviter les erreurs TypeScript\n  description: string\n  amount: number\n  currency: string\n  charge_date: string\n  category_id: string | null\n  payment_method: string | null\n  payment_status: 'pending' | 'paid' | 'cancelled'\n  paid_at: string | null\n  vendor: string | null\n  vendor_invoice_number: string | null\n  vendor_invoice_date: string | null\n  notes: string | null\n  charge_categories?: ChargeCategory | null\n}\n\nexport interface SessionChargesSummary {\n  total_amount: number\n  paid_amount: number\n  pending_amount: number\n  charge_count: number\n}\n\nclass SessionChargesService {\n  private supabase: SupabaseClient<Database>\n\n\n  constructor(supabaseClient?: SupabaseClient<Database>) {\n\n    this.supabase = supabaseClient || createClient()\n\n  }\n\n  // =====================================================\n  // Catégories de charges\n  // =====================================================\n\n  /**\n   * Récupère toutes les catégories de charges d'une organisation\n   */\n  async getCategories(organizationId: string): Promise<ChargeCategory[]> {\n    const { data, error } = await this.supabase\n      .from('charge_categories')\n      .select('*')\n      .eq('organization_id', organizationId)\n      .eq('is_active', true)\n      .order('name', { ascending: true })\n\n    if (error) {\n      console.error('Erreur récupération catégories:', error)\n      return []\n    }\n    return data || []\n  }\n\n  /**\n   * Crée une nouvelle catégorie de charge\n   */\n  async createCategory(\n    organizationId: string,\n    category: Omit<ChargeCategoryInsert, 'organization_id' | 'created_at' | 'updated_at'>\n  ): Promise<ChargeCategory> {\n    const { data, error } = await this.supabase\n      .from('charge_categories')\n      .insert({\n        ...category,\n        organization_id: organizationId,\n      })\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  /**\n   * Initialise les catégories par défaut pour une organisation\n   */\n  async initDefaultCategories(organizationId: string): Promise<void> {\n    const { error } = await this.supabase.rpc('init_default_charge_categories', {\n      p_organization_id: organizationId,\n    })\n\n    if (error) throw error\n  }\n\n  // =====================================================\n  // Charges de session\n  // =====================================================\n\n  /**\n   * Récupère toutes les charges d'une session\n   */\n  async getBySession(sessionId: string): Promise<SessionChargeWithCategory[]> {\n    const { data, error } = await this.supabase\n      .from('session_charges')\n      .select(`\n        *,\n        charge_categories(*)\n      `)\n      .eq('session_id', sessionId)\n      .order('charge_date', { ascending: false })\n\n    if (error) {\n      console.error('Erreur récupération charges:', error)\n      return []\n    }\n    return (data || []) as SessionChargeWithCategory[]\n  }\n\n  /**\n   * Récupère toutes les charges d'une organisation\n   */\n  async getAll(organizationId: string, filters?: {\n    sessionId?: string\n    categoryId?: string\n    paymentStatus?: string\n    startDate?: string\n    endDate?: string\n  }): Promise<SessionChargeWithCategory[]> {\n    let query = this.supabase\n      .from('session_charges')\n      .select(`\n        *,\n        charge_categories(*),\n        sessions(id, name)\n      `)\n      .eq('organization_id', organizationId)\n\n    if (filters?.sessionId) {\n      query = query.eq('session_id', filters.sessionId)\n    }\n\n    if (filters?.categoryId) {\n      query = query.eq('category_id', filters.categoryId)\n    }\n\n    if (filters?.paymentStatus) {\n      query = query.eq('payment_status', filters.paymentStatus)\n    }\n\n    if (filters?.startDate) {\n      query = query.gte('charge_date', filters.startDate)\n    }\n\n    if (filters?.endDate) {\n      query = query.lte('charge_date', filters.endDate)\n    }\n\n    const { data, error } = await query.order('charge_date', { ascending: false })\n\n    if (error) {\n      console.error('Erreur récupération charges:', error)\n      return []\n    }\n    return (data || []) as SessionChargeWithCategory[]\n  }\n\n  /**\n   * Récupère une charge par son ID\n   */\n  async getById(id: string): Promise<SessionChargeWithCategory | null> {\n    const { data, error } = await this.supabase\n      .from('session_charges')\n      .select(`\n        *,\n        charge_categories(*),\n        sessions(id, name)\n      `)\n      .eq('id', id)\n      .single()\n\n    if (error) {\n      if (error.code === 'PGRST116') return null\n      throw error\n    }\n    return data as SessionChargeWithCategory\n  }\n\n  /**\n   * Crée une nouvelle charge\n   */\n  async create(\n    organizationId: string,\n    sessionId: string,\n    charge: Omit<SessionChargeInsert, 'organization_id' | 'session_id' | 'created_at' | 'updated_at'>\n  ): Promise<SessionChargeWithCategory> {\n    const { data, error } = await this.supabase\n      .from('session_charges')\n      .insert({\n        ...charge,\n        organization_id: organizationId,\n        session_id: sessionId,\n      })\n      .select(`\n        *,\n        charge_categories(*)\n      `)\n      .single()\n\n    if (error) throw error\n    return data as SessionChargeWithCategory\n  }\n\n  /**\n   * Met à jour une charge\n   */\n  async update(\n    id: string,\n    updates: Partial<SessionChargeInsert>\n  ): Promise<SessionChargeWithCategory> {\n    const { data, error } = await this.supabase\n      .from('session_charges')\n      .update(updates)\n      .eq('id', id)\n      .select(`\n        *,\n        charge_categories(*)\n      `)\n      .single()\n\n    if (error) throw error\n    return data as SessionChargeWithCategory\n  }\n\n  /**\n   * Supprime une charge\n   */\n  async delete(id: string): Promise<void> {\n    const { error } = await this.supabase\n      .from('session_charges')\n      .delete()\n      .eq('id', id)\n\n    if (error) throw error\n  }\n\n  /**\n   * Calcule le résumé des charges d'une session\n   */\n  async getSessionSummary(sessionId: string): Promise<SessionChargesSummary | null> {\n    const { data, error } = await this.supabase.rpc('calculate_session_charges_total', {\n      p_session_id: sessionId,\n    })\n\n    if (error) {\n      console.error('Erreur calcul résumé charges:', error)\n      return null\n    }\n\n    if (!data || data.length === 0) {\n      return {\n        total_amount: 0,\n        paid_amount: 0,\n        pending_amount: 0,\n        charge_count: 0,\n      }\n    }\n\n    return {\n      total_amount: Number(data[0].total_amount) || 0,\n      paid_amount: Number(data[0].paid_amount) || 0,\n      pending_amount: Number(data[0].pending_amount) || 0,\n      charge_count: Number(data[0].charge_count) || 0,\n    }\n  }\n}\n\nexport const sessionChargesService = new SessionChargesService()\n\n\n\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name TrendingDown\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cG9seWxpbmUgcG9pbnRzPSIyMiAxNyAxMy41IDguNSA4LjUgMTMuNSAyIDciIC8+CiAgPHBvbHlsaW5lIHBvaW50cz0iMTYgMTcgMjIgMTcgMjIgMTEiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/trending-down\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst TrendingDown = createLucideIcon('TrendingDown', [\n  ['polyline', { points: '22 17 13.5 8.5 8.5 13.5 2 7', key: '1r2t7k' }],\n  ['polyline', { points: '16 17 22 17 22 11', key: '11uiuu' }],\n]);\n\nexport default TrendingDown;\n"],"names":[],"mappings":"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","ignoreList":[0,1,2,3,4,7]}