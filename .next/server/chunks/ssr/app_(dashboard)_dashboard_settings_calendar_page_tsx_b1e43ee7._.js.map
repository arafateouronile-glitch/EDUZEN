{"version":3,"sources":["../../../../app/%28dashboard%29/dashboard/settings/calendar/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query'\nimport { useAuth } from '@/lib/hooks/use-auth'\nimport { calendarService } from '@/lib/services/calendar.service'\nimport { Button } from '@/components/ui/button'\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Switch } from '@/components/ui/switch'\nimport { useToast } from '@/components/ui/toast'\nimport {\n  Calendar, Save, TestTube, CheckCircle, AlertCircle,\n  Eye, EyeOff, Info, RefreshCw, ExternalLink\n} from 'lucide-react'\nimport type { CalendarProvider } from '@/lib/services/calendar/calendar.types'\n\nconst PROVIDERS: Array<{ value: CalendarProvider; label: string; color: string; docs: string }> = [\n  { value: 'google', label: 'Google Calendar', color: 'bg-blue-500', docs: 'https://developers.google.com/calendar/api' },\n  { value: 'outlook', label: 'Microsoft Outlook', color: 'bg-orange-500', docs: 'https://learn.microsoft.com/en-us/graph/api/resources/calendar' },\n]\n\nexport default function CalendarSettingsPage() {\n  const { user } = useAuth()\n  const queryClient = useQueryClient()\n  const { addToast } = useToast()\n\n  const [selectedProvider, setSelectedProvider] = useState<CalendarProvider>('google')\n  const [showSecrets, setShowSecrets] = useState<Record<string, boolean>>({})\n  const [isAuthenticating, setIsAuthenticating] = useState(false)\n\n  // États pour chaque provider\n  const [configs, setConfigs] = useState<Record<CalendarProvider, any>>({\n    google: {\n      api_key: '',\n      api_secret: '',\n      sync_sessions: true,\n      sync_attendance: false,\n      auto_sync: false,\n      sync_frequency: 'realtime',\n      create_events_for_sessions: true,\n      include_students_in_events: false,\n      include_location: true,\n      send_reminders: false,\n      reminder_minutes: 15,\n      is_test_mode: true,\n    },\n    outlook: {\n      api_key: '',\n      api_secret: '',\n      sync_sessions: true,\n      sync_attendance: false,\n      auto_sync: false,\n      sync_frequency: 'realtime',\n      create_events_for_sessions: true,\n      include_students_in_events: false,\n      include_location: true,\n      send_reminders: false,\n      reminder_minutes: 15,\n      is_test_mode: true,\n    },\n  })\n\n  // Récupérer les configurations existantes\n  const { data: existingConfigs, isLoading } = useQuery({\n    queryKey: ['calendar-configs', user?.organization_id],\n    queryFn: async () => {\n      if (!user?.organization_id) return {}\n\n      const results: Record<string, any> = {}\n      for (const provider of ['google', 'outlook'] as CalendarProvider[]) {\n        const config = await calendarService.getConfig(user.organization_id, provider)\n        if (config) {\n          results[provider] = config\n          setConfigs((prev) => ({\n            ...prev,\n            [provider]: {\n              api_key: config.api_key || '',\n              api_secret: config.api_secret || '',\n              sync_sessions: config.sync_sessions,\n              sync_attendance: config.sync_attendance,\n              auto_sync: config.auto_sync,\n              sync_frequency: config.sync_frequency,\n              create_events_for_sessions: config.create_events_for_sessions,\n              include_students_in_events: config.include_students_in_events,\n              include_location: config.include_location,\n              send_reminders: config.send_reminders,\n              reminder_minutes: config.reminder_minutes || 15,\n              is_test_mode: config.is_test_mode,\n            },\n          }))\n        }\n      }\n      return results\n    },\n    enabled: !!user?.organization_id,\n  })\n\n  // Mutation pour sauvegarder\n  const saveMutation = useMutation({\n    mutationFn: async (provider: CalendarProvider) => {\n      if (!user?.organization_id) throw new Error('Organization ID manquant')\n      return calendarService.upsertConfig(user.organization_id, provider, configs[provider])\n    },\n    onSuccess: (data, provider) => {\n      queryClient.invalidateQueries({ queryKey: ['calendar-configs'] })\n      addToast({\n        type: 'success',\n        title: 'Configuration sauvegardée',\n        description: `La configuration ${PROVIDERS.find((p) => p.value === provider)?.label} a été sauvegardée.`,\n      })\n    },\n    onError: (error: Error) => {\n      addToast({\n        type: 'error',\n        title: 'Erreur',\n        description: error.message || 'Une erreur est survenue lors de la sauvegarde.',\n      })\n    },\n  })\n\n  // Mutation pour authentifier\n  const authenticateMutation = useMutation({\n    mutationFn: async (provider: CalendarProvider) => {\n      const response = await fetch(`/api/calendar/authenticate/${provider}`)\n      if (!response.ok) {\n        const error = await response.json()\n        throw new Error(error.error || 'Erreur lors de l\\'authentification')\n      }\n      const data = await response.json()\n      if (data.auth_url) {\n        window.location.href = data.auth_url\n      }\n    },\n    onError: (error: Error) => {\n      addToast({\n        type: 'error',\n        title: 'Erreur',\n        description: error.message || 'Une erreur est survenue lors de l\\'authentification.',\n      })\n      setIsAuthenticating(false)\n    },\n  })\n\n  const handleSave = (provider: CalendarProvider) => {\n    saveMutation.mutate(provider)\n  }\n\n  const handleAuthenticate = (provider: CalendarProvider) => {\n    setIsAuthenticating(true)\n    authenticateMutation.mutate(provider)\n  }\n\n  const updateConfig = (provider: CalendarProvider, field: string, value: any) => {\n    setConfigs((prev) => ({\n      ...prev,\n      [provider]: {\n        ...prev[provider],\n        [field]: value,\n      },\n    }))\n  }\n\n  const toggleSecret = (provider: string) => {\n    setShowSecrets((prev) => ({\n      ...prev,\n      [provider]: !prev[provider],\n    }))\n  }\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"text-center\">\n          <div className=\"text-muted-foreground\">Chargement...</div>\n        </div>\n      </div>\n    )\n  }\n\n  const currentConfig = existingConfigs?.[selectedProvider]\n\n  return (\n    <div className=\"space-y-6\">\n      {/* En-tête */}\n      <div>\n        <h1 className=\"text-3xl font-bold text-gray-900 flex items-center\">\n          <Calendar className=\"mr-3 h-8 w-8 text-primary\" />\n          Intégrations Calendrier\n        </h1>\n        <p className=\"mt-2 text-sm text-gray-600\">\n          Synchronisez vos sessions avec Google Calendar ou Microsoft Outlook\n        </p>\n      </div>\n\n      {/* Sélecteur de provider */}\n      <div className=\"flex space-x-4\">\n        {PROVIDERS.map((provider) => {\n          const config = existingConfigs?.[provider.value]\n          const isActive = config?.is_active || false\n\n          return (\n            <button\n              key={provider.value}\n              onClick={() => setSelectedProvider(provider.value)}\n              className={`flex-1 p-4 border-2 rounded-lg transition-all ${\n                selectedProvider === provider.value\n                  ? 'border-primary bg-primary/5'\n                  : 'border-gray-200 hover:border-gray-300'\n              }`}\n            >\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center space-x-3\">\n                  <div className={`w-3 h-3 rounded-full ${provider.color}`} />\n                  <span className=\"font-semibold\">{provider.label}</span>\n                </div>\n                {isActive && (\n                  <CheckCircle className=\"h-5 w-5 text-green-600\" />\n                )}\n              </div>\n            </button>\n          )\n        })}\n      </div>\n\n      {/* Formulaire de configuration */}\n      {selectedProvider && (\n        <Card>\n          <CardHeader>\n            <CardTitle>\n              Configuration {PROVIDERS.find((p) => p.value === selectedProvider)?.label}\n            </CardTitle>\n            <CardDescription>\n              Configurez les paramètres d'API pour {PROVIDERS.find((p) => p.value === selectedProvider)?.label}\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-6\">\n            {/* Mode test/production */}\n            <div className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\">\n              <div>\n                <Label htmlFor={`test-mode-${selectedProvider}`}>Mode test</Label>\n                <p className=\"text-sm text-muted-foreground\">\n                  Activez le mode test pour tester les intégrations sans impact sur vos calendriers réels\n                </p>\n              </div>\n              <Switch\n                checked={configs[selectedProvider].is_test_mode}\n                onCheckedChange={(checked) => updateConfig(selectedProvider, 'is_test_mode', checked)}\n              />\n            </div>\n\n            {/* Informations API */}\n            <div className=\"space-y-4\">\n              <div>\n                <Label htmlFor={`api-key-${selectedProvider}`}>Clé API (Client ID)</Label>\n                <div className=\"relative\">\n                  <Input\n                    id={`api-key-${selectedProvider}`}\n                    type={showSecrets[`${selectedProvider}-api-key`] ? 'text' : 'password'}\n                    value={configs[selectedProvider].api_key}\n                    onChange={(e) => updateConfig(selectedProvider, 'api_key', e.target.value)}\n                    placeholder=\"Votre clé API\"\n                  />\n                  <button\n                    type=\"button\"\n                    onClick={() => toggleSecret(`${selectedProvider}-api-key`)}\n                    className=\"absolute right-3 top-1/2 -translate-y-1/2\"\n                  >\n                    {showSecrets[`${selectedProvider}-api-key`] ? (\n                      <EyeOff className=\"h-4 w-4 text-gray-400\" />\n                    ) : (\n                      <Eye className=\"h-4 w-4 text-gray-400\" />\n                    )}\n                  </button>\n                </div>\n              </div>\n\n              <div>\n                <Label htmlFor={`api-secret-${selectedProvider}`}>Secret API (Client Secret)</Label>\n                <div className=\"relative\">\n                  <Input\n                    id={`api-secret-${selectedProvider}`}\n                    type={showSecrets[`${selectedProvider}-api-secret`] ? 'text' : 'password'}\n                    value={configs[selectedProvider].api_secret}\n                    onChange={(e) => updateConfig(selectedProvider, 'api_secret', e.target.value)}\n                    placeholder=\"Votre secret API\"\n                  />\n                  <button\n                    type=\"button\"\n                    onClick={() => toggleSecret(`${selectedProvider}-api-secret`)}\n                    className=\"absolute right-3 top-1/2 -translate-y-1/2\"\n                  >\n                    {showSecrets[`${selectedProvider}-api-secret`] ? (\n                      <EyeOff className=\"h-4 w-4 text-gray-400\" />\n                    ) : (\n                      <Eye className=\"h-4 w-4 text-gray-400\" />\n                    )}\n                  </button>\n                </div>\n              </div>\n            </div>\n\n            {/* Options de synchronisation */}\n            <div className=\"space-y-4\">\n              <h3 className=\"font-semibold\">Options de synchronisation</h3>\n\n              <div className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\">\n                <div>\n                  <Label htmlFor={`sync-sessions-${selectedProvider}`}>Synchroniser les sessions</Label>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Créer automatiquement des événements calendrier pour chaque session\n                  </p>\n                </div>\n                <Switch\n                  checked={configs[selectedProvider].sync_sessions}\n                  onCheckedChange={(checked) => updateConfig(selectedProvider, 'sync_sessions', checked)}\n                />\n              </div>\n\n              <div className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\">\n                <div>\n                  <Label htmlFor={`create-events-${selectedProvider}`}>Créer des événements pour les sessions</Label>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Créer automatiquement un événement lors de la création d'une session\n                  </p>\n                </div>\n                <Switch\n                  checked={configs[selectedProvider].create_events_for_sessions}\n                  onCheckedChange={(checked) => updateConfig(selectedProvider, 'create_events_for_sessions', checked)}\n                />\n              </div>\n\n              <div className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\">\n                <div>\n                  <Label htmlFor={`include-students-${selectedProvider}`}>Inclure les étudiants dans les événements</Label>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Ajouter les étudiants comme participants aux événements calendrier\n                  </p>\n                </div>\n                <Switch\n                  checked={configs[selectedProvider].include_students_in_events}\n                  onCheckedChange={(checked) => updateConfig(selectedProvider, 'include_students_in_events', checked)}\n                />\n              </div>\n\n              <div className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\">\n                <div>\n                  <Label htmlFor={`include-location-${selectedProvider}`}>Inclure le lieu</Label>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Ajouter le lieu de la session dans l'événement calendrier\n                  </p>\n                </div>\n                <Switch\n                  checked={configs[selectedProvider].include_location}\n                  onCheckedChange={(checked) => updateConfig(selectedProvider, 'include_location', checked)}\n                />\n              </div>\n\n              <div className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\">\n                <div>\n                  <Label htmlFor={`send-reminders-${selectedProvider}`}>Envoyer des rappels</Label>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Activer les rappels pour les événements calendrier\n                  </p>\n                </div>\n                <Switch\n                  checked={configs[selectedProvider].send_reminders}\n                  onCheckedChange={(checked) => updateConfig(selectedProvider, 'send_reminders', checked)}\n                />\n              </div>\n\n              {configs[selectedProvider].send_reminders && (\n                <div>\n                  <Label htmlFor={`reminder-minutes-${selectedProvider}`}>Minutes avant l'événement</Label>\n                  <Input\n                    id={`reminder-minutes-${selectedProvider}`}\n                    type=\"number\"\n                    min=\"0\"\n                    max=\"20160\"\n                    value={configs[selectedProvider].reminder_minutes}\n                    onChange={(e) => updateConfig(selectedProvider, 'reminder_minutes', parseInt(e.target.value) || 15)}\n                    className=\"mt-2\"\n                  />\n                </div>\n              )}\n            </div>\n\n            {/* Statut de connexion */}\n            {currentConfig?.is_active && (\n              <div className=\"p-4 bg-green-50 border border-green-200 rounded-lg\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"font-semibold text-green-800\">Connecté</p>\n                    {currentConfig.default_calendar_name && (\n                      <p className=\"text-sm text-green-600\">Calendrier: {currentConfig.default_calendar_name}</p>\n                    )}\n                    {currentConfig.last_sync_at && (\n                      <p className=\"text-xs text-green-600 mt-1\">\n                        Dernière synchronisation: {new Date(currentConfig.last_sync_at).toLocaleString('fr-FR')}\n                      </p>\n                    )}\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    {currentConfig.last_sync_status === 'success' && (\n                      <CheckCircle className=\"h-5 w-5 text-green-600\" />\n                    )}\n                    {currentConfig.last_sync_status === 'failed' && (\n                      <AlertCircle className=\"h-5 w-5 text-red-600\" />\n                    )}\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {/* Informations */}\n            <div className=\"p-4 bg-blue-50 border border-blue-200 rounded-lg\">\n              <div className=\"flex items-start space-x-2\">\n                <Info className=\"h-5 w-5 text-blue-600 mt-0.5\" />\n                <div className=\"text-sm text-blue-800\">\n                  <p className=\"font-semibold mb-1\">Comment obtenir vos identifiants API ?</p>\n                  <p className=\"mb-2\">\n                    Consultez la documentation de {PROVIDERS.find((p) => p.value === selectedProvider)?.label} pour créer une application et obtenir vos identifiants.\n                  </p>\n                  <a\n                    href={PROVIDERS.find((p) => p.value === selectedProvider)?.docs}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"text-blue-600 hover:underline flex items-center space-x-1\"\n                  >\n                    <span>Documentation</span>\n                    <ExternalLink className=\"h-3 w-3\" />\n                  </a>\n                </div>\n              </div>\n            </div>\n\n            {/* Boutons d'action */}\n            <div className=\"flex items-center justify-end space-x-2\">\n              <Button\n                variant=\"outline\"\n                onClick={() => handleSave(selectedProvider)}\n                disabled={saveMutation.isPending}\n              >\n                <Save className=\"h-4 w-4 mr-2\" />\n                Sauvegarder\n              </Button>\n\n              {currentConfig?.api_key && currentConfig?.api_secret && (\n                <>\n                  {!currentConfig.is_active ? (\n                    <Button\n                      onClick={() => handleAuthenticate(selectedProvider)}\n                      disabled={isAuthenticating || authenticateMutation.isPending}\n                    >\n                      {isAuthenticating ? (\n                        <>\n                          <RefreshCw className=\"h-4 w-4 mr-2 animate-spin\" />\n                          Authentification...\n                        </>\n                      ) : (\n                        <>\n                          <ExternalLink className=\"h-4 w-4 mr-2\" />\n                          Connecter\n                        </>\n                      )}\n                    </Button>\n                  ) : (\n                    <Button\n                      variant=\"outline\"\n                      onClick={() => {\n                        addToast({\n                          type: 'info',\n                          title: 'Synchronisation',\n                          description: 'La synchronisation se fait automatiquement lors de la création/modification de sessions.',\n                        })\n                      }}\n                    >\n                      <RefreshCw className=\"h-4 w-4 mr-2\" />\n                      Info Sync\n                    </Button>\n                  )}\n                </>\n              )}\n            </div>\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  )\n}\n\n\n\n\n\n\n\n\n\n\n\n\n"],"names":[],"mappings":"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"}