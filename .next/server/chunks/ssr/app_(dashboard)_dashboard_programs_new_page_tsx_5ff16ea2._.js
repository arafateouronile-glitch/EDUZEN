module.exports=[1121,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(370025),f=a.i(695245),g=a.i(159501),h=a.i(913216),i=a.i(426099),j=a.i(340695),k=a.i(114548),l=a.i(915618),m=a.i(321161),n=a.i(773320),o=a.i(238246),p=a.i(437536),q=a.i(586547),r=a.i(497895),s=a.i(864037);function t(){let a=(0,d.useRouter)(),{user:t,isLoading:u}=(0,h.useAuth)(),{addToast:v}=(0,s.useToast)(),[w,x]=(0,c.useState)(null),{register:y,handleSubmit:z,formState:{errors:A},watch:B,setValue:C}=(0,f.useForm)({resolver:(0,g.zodResolver)(p.programSchema),mode:"onChange",defaultValues:{code:"",name:"",subtitle:"",description:"",category:"",program_version:"1",version_date:new Date().toISOString().split("T")[0],duration_hours:"",duration_days:"",price:"",currency:"EUR",published_online:!0,eligible_cpf:!1,certification_issued:!1,is_active:!0}}),D=(0,e.useMutation)({mutationFn:async a=>{if(!t?.organization_id)throw Error("Organization ID manquant");let b=a.duration_days?parseFloat(a.duration_days):null;return a.price&&parseFloat(a.price),i.programService.createProgram({organization_id:t.organization_id,code:a.code,name:a.name,subtitle:a.subtitle,description:a.description,category:a.category,program_version:a.program_version,version_date:a.version_date,duration_days:b,published_online:a.published_online,eligible_cpf:a.eligible_cpf,cpf_code:a.cpf_code,modalities:a.modalities,training_action_type:a.training_action_type,pedagogical_objectives:a.pedagogical_objectives,learner_profile:a.learner_profile,training_content:a.training_content,execution_follow_up:a.execution_follow_up,certification_modalities:a.certification_modalities,quality:a.quality,accounting_product_config:a.accounting_product_config,competence_domains:a.competence_domains,photo_url:a.photo_url,is_active:!0})},onSuccess:b=>{v({type:"success",title:"Programme crÃ©Ã©",description:"Le programme a Ã©tÃ© crÃ©Ã© avec succÃ¨s."}),a.push(`/dashboard/programs/${b.id}`)},onError:a=>{v({type:"error",title:"Erreur",description:a instanceof Error?a.message:"Une erreur est survenue"})}});if(u)return(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-blue"})});if(!t?.organization_id)return(0,b.jsx)("div",{className:"space-y-6",children:(0,b.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Organization ID manquant"}),(0,b.jsx)("p",{className:"text-red-700 mb-4",children:"Votre compte n'est pas associÃ© Ã  une organisation."})]})});let E=a=>{D.mutate(a)};return(0,b.jsxs)("div",{className:"space-y-6 pb-20",children:[(0,b.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,b.jsxs)("nav",{className:"flex items-center text-sm text-gray-500",children:[(0,b.jsx)(o.default,{href:"/dashboard/programs",className:"hover:text-brand-blue",children:"BibliothÃ¨que"}),(0,b.jsx)("span",{className:"mx-2",children:"â€º"}),(0,b.jsx)("span",{className:"font-medium text-gray-900",children:"Nouveau programme"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("div",{className:"flex items-center gap-4",children:(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900 uppercase tracking-tight",children:B("name")||"NOUVEAU PROGRAMME"})}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)(j.Button,{onClick:z(E),className:"bg-brand-blue hover:bg-brand-blue/90 text-white",disabled:D.isPending,children:[D.isPending?(0,b.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):(0,b.jsx)(k.Save,{className:"h-4 w-4 mr-2"}),"Enregistrer"]}),(0,b.jsxs)(j.Button,{variant:"outline",className:"border-brand-blue text-brand-blue hover:bg-brand-blue/5",children:[(0,b.jsx)(l.Plus,{className:"h-4 w-4 mr-2"}),"Ajouter un bloc"]}),(0,b.jsxs)(j.Button,{variant:"outline",className:"border-gray-200",children:[(0,b.jsx)(m.Settings,{className:"h-4 w-4 mr-2"}),"Inscription"]})]})]})]}),(0,b.jsxs)("form",{onSubmit:z(E),className:"space-y-8",children:[(0,b.jsx)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8",children:[(0,b.jsxs)("div",{className:"flex-1 space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Titre du programme"}),(0,b.jsx)("input",{type:"text",...y("name"),className:(0,r.cn)("w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent",A.name?"border-red-500":"border-gray-200"),placeholder:"Ex: AIPR CONCEPTEUR"}),A.name&&(0,b.jsx)("p",{className:"text-sm text-red-500 mt-1",children:A.name.message})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sous-titre"}),(0,b.jsx)("input",{type:"text",...y("subtitle"),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code interne"}),(0,b.jsx)("input",{type:"text",...y("code"),className:(0,r.cn)("w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent",A.code?"border-red-500":"border-gray-200"),placeholder:"Ex: PROG-2024-001"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CatÃ©gorie"}),(0,b.jsxs)("select",{...y("category"),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent bg-white",children:[(0,b.jsx)("option",{value:"",children:"SÃ©lectionner une catÃ©gorie"}),(0,b.jsx)("option",{value:"Prevention",children:"PrÃ©vention et SÃ©curitÃ©"}),(0,b.jsx)("option",{value:"Informatique",children:"Informatique"}),(0,b.jsx)("option",{value:"Management",children:"Management"}),(0,b.jsx)("option",{value:"Langues",children:"Langues"})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Version du programme"}),(0,b.jsx)("input",{type:"text",...y("program_version"),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de la version"}),(0,b.jsx)("input",{type:"date",...y("version_date"),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"DurÃ©e du programme"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{type:"text",...y("duration_hours"),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent pr-16"}),(0,b.jsx)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"heure(s)"})]})]}),(0,b.jsx)("div",{className:"flex items-end",children:(0,b.jsxs)("div",{className:"relative w-full",children:[(0,b.jsx)("input",{type:"text",...y("duration_days"),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent pr-14"}),(0,b.jsx)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"jour(s)"})]})})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center gap-2",children:["Prix de la formation ",(0,b.jsx)("span",{className:"text-gray-400",children:"ðŸ”—"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,b.jsx)("span",{className:"text-gray-500 sm:text-sm",children:"Ent."})}),(0,b.jsx)("input",{type:"text",...y("price_enterprise"),className:"w-full pl-10 px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent",placeholder:"Entreprise"}),(0,b.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,b.jsx)("span",{className:"text-gray-500 sm:text-sm",children:"â‚¬"})})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,b.jsx)("span",{className:"text-gray-500 sm:text-sm",children:"Par."})}),(0,b.jsx)("input",{type:"text",...y("price_individual"),className:"w-full pl-10 px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent",placeholder:"Particulier"}),(0,b.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,b.jsx)("span",{className:"text-gray-500 sm:text-sm",children:"â‚¬"})})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,b.jsx)("span",{className:"text-gray-500 sm:text-sm",children:"Ind."})}),(0,b.jsx)("input",{type:"text",...y("price_freelance"),className:"w-full pl-10 px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent",placeholder:"IndÃ©pendant"}),(0,b.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,b.jsx)("span",{className:"text-gray-500 sm:text-sm",children:"â‚¬"})})]})]})]})]}),(0,b.jsxs)("div",{className:"w-full lg:w-80 space-y-6",children:[(0,b.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-100",children:[(0,b.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:"Photo du programme"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mb-4",children:"JPG, PNG ou WebP, â‰¤ 500Ko"}),w?(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsx)("img",{src:w,alt:"Preview",className:"w-full h-40 object-cover rounded-lg border border-gray-200"}),(0,b.jsx)("button",{type:"button",onClick:()=>x(null),className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:(0,b.jsx)("div",{className:"h-4 w-4",children:"Ã—"})})]}):(0,b.jsxs)("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[(0,b.jsx)(n.Upload,{className:"w-8 h-8 text-gray-400 mb-2"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 font-medium",children:"Charger"})]}),(0,b.jsx)("input",{type:"file",className:"hidden",accept:"image/*",onChange:a=>{let b=a.target.files?.[0];if(b){let a=new FileReader;a.onloadend=()=>{x(a.result)},a.readAsDataURL(b)}}})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("label",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer border border-transparent hover:border-gray-100",children:[(0,b.jsx)("input",{type:"checkbox",...y("published_online"),className:"w-5 h-5 text-brand-blue rounded border-gray-300 focus:ring-brand-blue"}),(0,b.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Publier sur le catalogue en ligne"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("label",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer border border-transparent hover:border-gray-100",children:[(0,b.jsx)("input",{type:"checkbox",...y("eligible_cpf"),className:"w-5 h-5 text-brand-blue rounded border-gray-300 focus:ring-brand-blue"}),(0,b.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Eligible CPF (Compte Personnel Formation)"})]}),B("eligible_cpf")&&(0,b.jsx)("input",{type:"text",...y("cpf_code"),className:"w-full px-4 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent ml-8 mt-1",placeholder:"Code CPF"})]})]})]})]})}),(0,b.jsx)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:(0,b.jsxs)(q.Accordion,{type:"multiple",className:"w-full",children:[(0,b.jsxs)(q.AccordionItem,{value:"modalities",children:[(0,b.jsx)(q.AccordionTrigger,{className:"px-6 hover:bg-gray-50",children:"ModalitÃ©s"}),(0,b.jsx)(q.AccordionContent,{className:"px-6",children:(0,b.jsx)("textarea",{...y("modalities"),rows:4,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent",placeholder:"ModalitÃ©s de la formation..."})})]}),(0,b.jsxs)(q.AccordionItem,{value:"type",children:[(0,b.jsx)(q.AccordionTrigger,{className:"px-6 hover:bg-gray-50",children:"Type d'action de formation"}),(0,b.jsx)(q.AccordionContent,{className:"px-6",children:(0,b.jsx)("textarea",{...y("training_action_type"),rows:3,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent"})})]}),(0,b.jsxs)(q.AccordionItem,{value:"description",children:[(0,b.jsx)(q.AccordionTrigger,{className:"px-6 hover:bg-gray-50",children:"Description du programme"}),(0,b.jsx)(q.AccordionContent,{className:"px-6",children:(0,b.jsx)("textarea",{...y("description"),rows:6,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent"})})]}),(0,b.jsxs)(q.AccordionItem,{value:"objectives",children:[(0,b.jsx)(q.AccordionTrigger,{className:"px-6 hover:bg-gray-50",children:"Objectifs pÃ©dagogiques"}),(0,b.jsx)(q.AccordionContent,{className:"px-6",children:(0,b.jsx)("textarea",{...y("pedagogical_objectives"),rows:4,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent"})})]}),(0,b.jsxs)(q.AccordionItem,{value:"profile",children:[(0,b.jsx)(q.AccordionTrigger,{className:"px-6 hover:bg-gray-50",children:"Profil des apprenants"}),(0,b.jsx)(q.AccordionContent,{className:"px-6",children:(0,b.jsx)("textarea",{...y("learner_profile"),rows:4,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent"})})]}),(0,b.jsxs)(q.AccordionItem,{value:"content",children:[(0,b.jsx)(q.AccordionTrigger,{className:"px-6 hover:bg-gray-50",children:"Contenu de la formation (progression pÃ©dagogique)"}),(0,b.jsx)(q.AccordionContent,{className:"px-6",children:(0,b.jsx)("textarea",{...y("training_content"),rows:8,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent"})})]}),(0,b.jsxs)(q.AccordionItem,{value:"followup",children:[(0,b.jsx)(q.AccordionTrigger,{className:"px-6 hover:bg-gray-50",children:"Suivi de l'exÃ©cution"}),(0,b.jsx)(q.AccordionContent,{className:"px-6",children:(0,b.jsx)("textarea",{...y("execution_follow_up"),rows:4,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent"})})]}),(0,b.jsxs)(q.AccordionItem,{value:"certification",children:[(0,b.jsx)(q.AccordionTrigger,{className:"px-6 hover:bg-gray-50",children:"ModalitÃ©s de certification"}),(0,b.jsx)(q.AccordionContent,{className:"px-6",children:(0,b.jsx)("textarea",{...y("certification_modalities"),rows:4,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent"})})]}),(0,b.jsxs)(q.AccordionItem,{value:"quality",children:[(0,b.jsx)(q.AccordionTrigger,{className:"px-6 hover:bg-gray-50",children:"QualitÃ©"}),(0,b.jsx)(q.AccordionContent,{className:"px-6",children:(0,b.jsx)("textarea",{...y("quality"),rows:4,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent"})})]}),(0,b.jsxs)(q.AccordionItem,{value:"accounting",children:[(0,b.jsx)(q.AccordionTrigger,{className:"px-6 hover:bg-gray-50",children:"Configuration comptable du produit"}),(0,b.jsx)(q.AccordionContent,{className:"px-6",children:(0,b.jsx)("textarea",{...y("accounting_product_config"),rows:2,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent"})})]}),(0,b.jsxs)(q.AccordionItem,{value:"competences",children:[(0,b.jsx)(q.AccordionTrigger,{className:"px-6 hover:bg-gray-50",children:"Domaines de compÃ©tences"}),(0,b.jsx)(q.AccordionContent,{className:"px-6",children:(0,b.jsx)("textarea",{...y("competence_domains"),rows:2,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent"})})]})]})}),(0,b.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4 lg:pl-72 flex justify-between items-center z-50",children:(0,b.jsxs)(j.Button,{onClick:z(E),className:"bg-brand-blue hover:bg-brand-blue/90 text-white",disabled:D.isPending,children:[D.isPending?(0,b.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):(0,b.jsx)(k.Save,{className:"h-4 w-4 mr-2"}),"Enregistrer"]})})]})]})}a.s(["default",()=>t])}];

//# sourceMappingURL=app_%28dashboard%29_dashboard_programs_new_page_tsx_5ff16ea2._.js.map