{"version":3,"sources":["../../../../app/%28dashboard%29/dashboard/elearning/courses/%5Bslug%5D/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { useParams, useRouter } from 'next/navigation'\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query'\nimport { useAuth } from '@/lib/hooks/use-auth'\nimport { elearningService } from '@/lib/services/elearning.service'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { ArrowLeft, Play, CheckCircle, Circle, Star, Users, Clock, BookOpen, Award, Plus } from 'lucide-react'\nimport Link from 'next/link'\nimport { formatDate } from '@/lib/utils'\nimport ReactMarkdown from 'react-markdown'\n\nexport default function CourseDetailPage() {\n  const params = useParams()\n  const router = useRouter()\n  const slug = params.slug as string\n  const { user } = useAuth()\n  const queryClient = useQueryClient()\n\n  // Récupérer le cours\n  const { data: course } = useQuery<{ id: string; [key: string]: any } | null>({\n    queryKey: ['course', slug, user?.organization_id],\n    queryFn: async () => {\n      const result = await elearningService.getCourseBySlug(slug, user?.organization_id || '')\n      return result as any\n    },\n    enabled: !!slug && !!user?.organization_id,\n  })\n\n  // Vérifier si l'utilisateur est inscrit\n  const { data: enrollment } = useQuery<any>({\n    queryKey: ['course-enrollment', course?.id, user?.id],\n    queryFn: async () => {\n      if (!course?.id || !user?.id) return null\n      const enrollments = await elearningService.getStudentEnrollments(user.id)\n      return enrollments.find((e: any) => e.course_id === (course as any).id)\n    },\n    enabled: !!course?.id && !!user?.id,\n  })\n\n  // Récupérer les statistiques de notation\n  const { data: ratingStats } = useQuery<any>({\n    queryKey: ['course-rating-stats', course?.id],\n    queryFn: async () => {\n      const result = await elearningService.getCourseRatingStats((course as any)?.id || '')\n      return result as any\n    },\n    enabled: !!course?.id,\n  })\n\n  // S'inscrire au cours\n  const enrollMutation = useMutation({\n    mutationFn: async () => {\n      if (!course?.id || !user?.id) throw new Error('Données manquantes')\n      return elearningService.enrollInCourse(course.id, user.id)\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['course-enrollment'] })\n      queryClient.invalidateQueries({ queryKey: ['my-enrollments'] })\n      router.push(`/dashboard/elearning/courses/${slug}/learn`)\n    },\n  })\n\n  const getDifficultyColor = (difficulty: string) => {\n    switch (difficulty) {\n      case 'beginner':\n        return 'bg-green-100 text-green-800'\n      case 'intermediate':\n        return 'bg-yellow-100 text-yellow-800'\n      case 'advanced':\n        return 'bg-red-100 text-red-800'\n      default:\n        return 'bg-gray-100 text-gray-800'\n    }\n  }\n\n  const getDifficultyLabel = (difficulty: string) => {\n    switch (difficulty) {\n      case 'beginner':\n        return 'Débutant'\n      case 'intermediate':\n        return 'Intermédiaire'\n      case 'advanced':\n        return 'Avancé'\n      default:\n        return difficulty\n    }\n  }\n\n  if (!course) {\n    return (\n      <div className=\"container mx-auto py-8 px-4 max-w-7xl\">\n        <div className=\"text-center py-12\">Chargement...</div>\n      </div>\n    )\n  }\n\n  // Organiser les leçons par section\n  const lessonsBySection: Record<string, any[]> = {}\n  course.lessons?.forEach((lesson: any) => {\n    const sectionId = lesson.section_id || 'no-section'\n    if (!lessonsBySection[sectionId]) {\n      lessonsBySection[sectionId] = []\n    }\n    lessonsBySection[sectionId].push(lesson)\n  })\n\n  return (\n    <div className=\"container mx-auto py-8 px-4 max-w-7xl\">\n      <div className=\"mb-6\">\n        <Link href=\"/dashboard/elearning\">\n          <Button variant=\"ghost\" size=\"sm\" className=\"mb-4\">\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\n            Retour aux cours\n          </Button>\n        </Link>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        {/* Contenu principal */}\n        <div className=\"lg:col-span-2\">\n          {/* En-tête du cours */}\n          <Card className=\"mb-6\">\n            {course.cover_image_url && (\n              <div className=\"h-64 w-full overflow-hidden rounded-t-lg\">\n                <img\n                  src={course.cover_image_url}\n                  alt={course.title}\n                  className=\"w-full h-full object-cover\"\n                />\n              </div>\n            )}\n            <CardHeader>\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  <CardTitle className=\"text-3xl mb-2\">{course.title}</CardTitle>\n                  {course.description && (\n                    <p className=\"text-muted-foreground mb-4\">{course.description}</p>\n                  )}\n                  <div className=\"flex items-center gap-4 text-sm text-muted-foreground\">\n                    <span\n                      className={`px-2 py-1 rounded ${getDifficultyColor(course.difficulty_level)}`}\n                    >\n                      {getDifficultyLabel(course.difficulty_level)}\n                    </span>\n                    {course.estimated_duration_hours && (\n                      <div className=\"flex items-center gap-1\">\n                        <Clock className=\"h-4 w-4\" />\n                        <span>{course.estimated_duration_hours} heures</span>\n                      </div>\n                    )}\n                    <div className=\"flex items-center gap-1\">\n                      <Users className=\"h-4 w-4\" />\n                      <span>{course.total_students || 0} étudiants</span>\n                    </div>\n                    <div className=\"flex items-center gap-1\">\n                      <BookOpen className=\"h-4 w-4\" />\n                      <span>{course.total_lessons || 0} leçons</span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </CardHeader>\n            <CardContent>\n              <div className=\"prose prose-sm max-w-none\">\n                {course.description && <ReactMarkdown>{course.description}</ReactMarkdown>}\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Contenu du cours */}\n          <Card>\n            <CardHeader>\n              <CardTitle>Contenu du cours</CardTitle>\n            </CardHeader>\n            <CardContent>\n              {course.sections && course.sections.length > 0 ? (\n                <div className=\"space-y-6\">\n                  {course.sections.map((section: any) => {\n                    const sectionLessons = lessonsBySection[section.id] || []\n                    return (\n                      <div key={section.id}>\n                        <h3 className=\"font-semibold text-lg mb-3\">{section.title}</h3>\n                        {section.description && (\n                          <p className=\"text-sm text-muted-foreground mb-3\">{section.description}</p>\n                        )}\n                        <div className=\"space-y-2\">\n                          {sectionLessons.map((lesson: any) => (\n                            <div\n                              key={lesson.id}\n                              className=\"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50\"\n                            >\n                              <div className=\"flex items-center gap-3 flex-1\">\n                                {lesson.lesson_type === 'video' ? (\n                                  <Play className=\"h-5 w-5 text-primary\" />\n                                ) : (\n                                  <BookOpen className=\"h-5 w-5 text-primary\" />\n                                )}\n                                <div className=\"flex-1\">\n                                  <h4 className=\"font-medium\">{lesson.title}</h4>\n                                  {lesson.description && (\n                                    <p className=\"text-sm text-muted-foreground line-clamp-1\">\n                                      {lesson.description}\n                                    </p>\n                                  )}\n                                  {lesson.video_duration_minutes && (\n                                    <span className=\"text-xs text-muted-foreground\">\n                                      {lesson.video_duration_minutes} min\n                                    </span>\n                                  )}\n                                </div>\n                              </div>\n                              {lesson.is_preview && (\n                                <span className=\"text-xs px-2 py-1 rounded bg-blue-100 text-blue-800\">\n                                  Aperçu\n                                </span>\n                              )}\n                              {enrollment && (\n                                <Link\n                                  href={`/dashboard/elearning/courses/${slug}/lessons/${lesson.slug}`}\n                                >\n                                  <Button size=\"sm\" variant=\"outline\">\n                                    {enrollment.completed_lessons?.includes(parseInt(lesson.id)) ? (\n                                      <CheckCircle className=\"h-4 w-4 mr-2 text-green-600\" />\n                                    ) : (\n                                      <Play className=\"h-4 w-4 mr-2\" />\n                                    )}\n                                    {enrollment.completed_lessons?.includes(parseInt(lesson.id))\n                                      ? 'Revoir'\n                                      : 'Commencer'}\n                                  </Button>\n                                </Link>\n                              )}\n                            </div>\n                          ))}\n                        </div>\n                      </div>\n                    )\n                  })}\n                </div>\n              ) : course.lessons && course.lessons.length > 0 ? (\n                <div className=\"space-y-2\">\n                  {course.lessons.map((lesson: any) => (\n                    <div\n                      key={lesson.id}\n                      className=\"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50\"\n                    >\n                      <div className=\"flex items-center gap-3 flex-1\">\n                        {lesson.lesson_type === 'video' ? (\n                          <Play className=\"h-5 w-5 text-primary\" />\n                        ) : (\n                          <BookOpen className=\"h-5 w-5 text-primary\" />\n                        )}\n                        <div className=\"flex-1\">\n                          <h4 className=\"font-medium\">{lesson.title}</h4>\n                          {lesson.video_duration_minutes && (\n                            <span className=\"text-xs text-muted-foreground\">\n                              {lesson.video_duration_minutes} min\n                            </span>\n                          )}\n                        </div>\n                      </div>\n                      {enrollment && (\n                        <Link\n                          href={`/dashboard/elearning/courses/${slug}/lessons/${lesson.slug}`}\n                        >\n                          <Button size=\"sm\" variant=\"outline\">\n                            <Play className=\"h-4 w-4 mr-2\" />\n                            Commencer\n                          </Button>\n                        </Link>\n                      )}\n                    </div>\n                  ))}\n                </div>\n              ) : (\n                <div className=\"text-center py-8 text-muted-foreground\">\n                  Aucune leçon disponible\n                </div>\n              )}\n            </CardContent>\n          </Card>\n\n          {/* Avis */}\n          {course.reviews && course.reviews.length > 0 && (\n            <Card className=\"mt-6\">\n              <CardHeader>\n                <CardTitle>Avis des étudiants</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-4\">\n                  {course.reviews.slice(0, 5).map((review: any) => (\n                    <div key={review.id} className=\"border-b pb-4 last:border-0 last:pb-0\">\n                      <div className=\"flex items-center gap-2 mb-2\">\n                        <div className=\"flex items-center\">\n                          {[1, 2, 3, 4, 5].map((star) => (\n                            <Star\n                              key={star}\n                              className={`h-4 w-4 ${\n                                star <= (review.rating || 0)\n                                  ? 'text-yellow-500 fill-yellow-500'\n                                  : 'text-gray-300'\n                              }`}\n                            />\n                          ))}\n                        </div>\n                        <span className=\"text-sm font-medium\">\n                          {review.student?.full_name || review.student?.email || 'Utilisateur'}\n                        </span>\n                        <span className=\"text-xs text-muted-foreground\">\n                          {formatDate(review.created_at)}\n                        </span>\n                      </div>\n                      {review.review_text && (\n                        <p className=\"text-sm text-muted-foreground\">{review.review_text}</p>\n                      )}\n                    </div>\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n          )}\n        </div>\n\n        {/* Sidebar */}\n        <div className=\"space-y-6\">\n          {/* Actions */}\n          <Card>\n            <CardHeader>\n              <CardTitle>Actions</CardTitle>\n            </CardHeader>\n            <CardContent>\n              {enrollment ? (\n                <div className=\"space-y-4\">\n                  <div>\n                    <div className=\"flex items-center justify-between mb-2\">\n                      <span className=\"text-sm font-medium\">Progression</span>\n                      <span className=\"text-sm text-muted-foreground\">\n                        {Math.round(enrollment.progress_percentage || 0)}%\n                      </span>\n                    </div>\n                    <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                      <div\n                        className=\"bg-primary h-2 rounded-full transition-all\"\n                        style={{ width: `${enrollment.progress_percentage || 0}%` }}\n                      />\n                    </div>\n                  </div>\n                  <Link href={`/dashboard/elearning/courses/${slug}/learn`}>\n                    <Button className=\"w-full\">\n                      <Play className=\"h-4 w-4 mr-2\" />\n                      Continuer le cours\n                    </Button>\n                  </Link>\n                  {enrollment.enrollment_status === 'completed' && (\n                    <Button variant=\"outline\" className=\"w-full\">\n                      <Award className=\"h-4 w-4 mr-2\" />\n                      Télécharger le certificat\n                    </Button>\n                  )}\n                </div>\n              ) : (\n                <Button\n                  className=\"w-full\"\n                  onClick={() => enrollMutation.mutate()}\n                  disabled={enrollMutation.isPending}\n                >\n                  {enrollMutation.isPending ? 'Inscription...' : 'S\\'inscrire au cours'}\n                </Button>\n              )}\n            </CardContent>\n          </Card>\n\n          {/* Informations */}\n          <Card>\n            <CardHeader>\n              <CardTitle>Informations</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-3 text-sm\">\n              {course.instructor && (\n                <div>\n                  <span className=\"text-muted-foreground\">Instructeur:</span>\n                  <p className=\"font-medium\">\n                    {course.instructor.full_name || course.instructor.email}\n                  </p>\n                </div>\n              )}\n              {course.published_at && (\n                <div>\n                  <span className=\"text-muted-foreground\">Publié le:</span>\n                  <p className=\"font-medium\">{formatDate(course.published_at)}</p>\n                </div>\n              )}\n              {ratingStats && ratingStats.total > 0 && (\n                <div>\n                  <span className=\"text-muted-foreground\">Note moyenne:</span>\n                  <div className=\"flex items-center gap-2\">\n                    <Star className=\"h-4 w-4 text-yellow-500 fill-yellow-500\" />\n                    <span className=\"font-medium\">{ratingStats.average.toFixed(1)} / 5</span>\n                    <span className=\"text-muted-foreground\">({ratingStats.total} avis)</span>\n                  </div>\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    </div>\n  )\n}\n\n\n\nfunction CourseDetailPage_DUPLICATE_1() {\n  const params = useParams()\n  const router = useRouter()\n  const slug = params.slug as string\n  const { user } = useAuth()\n  const queryClient = useQueryClient()\n\n  // Récupérer le cours\n  const { data: course } = useQuery<{ id: string; [key: string]: any } | null>({\n    queryKey: ['course', slug, user?.organization_id],\n    queryFn: async () => {\n      const result = await elearningService.getCourseBySlug(slug, user?.organization_id || '')\n      return result as any\n    },\n    enabled: !!slug && !!user?.organization_id,\n  })\n\n  // Vérifier si l'utilisateur est inscrit\n  const { data: enrollment } = useQuery<any>({\n    queryKey: ['course-enrollment', course?.id, user?.id],\n    queryFn: async () => {\n      if (!course?.id || !user?.id) return null\n      const enrollments = await elearningService.getStudentEnrollments(user.id)\n      return enrollments.find((e: any) => e.course_id === (course as any).id)\n    },\n    enabled: !!course?.id && !!user?.id,\n  })\n\n  // Récupérer les statistiques de notation\n  const { data: ratingStats } = useQuery<any>({\n    queryKey: ['course-rating-stats', course?.id],\n    queryFn: async () => {\n      const result = await elearningService.getCourseRatingStats((course as any)?.id || '')\n      return result as any\n    },\n    enabled: !!course?.id,\n  })\n\n  // S'inscrire au cours\n  const enrollMutation = useMutation({\n    mutationFn: async () => {\n      if (!course?.id || !user?.id) throw new Error('Données manquantes')\n      return elearningService.enrollInCourse(course.id, user.id)\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['course-enrollment'] })\n      queryClient.invalidateQueries({ queryKey: ['my-enrollments'] })\n      router.push(`/dashboard/elearning/courses/${slug}/learn`)\n    },\n  })\n\n  const getDifficultyColor = (difficulty: string) => {\n    switch (difficulty) {\n      case 'beginner':\n        return 'bg-green-100 text-green-800'\n      case 'intermediate':\n        return 'bg-yellow-100 text-yellow-800'\n      case 'advanced':\n        return 'bg-red-100 text-red-800'\n      default:\n        return 'bg-gray-100 text-gray-800'\n    }\n  }\n\n  const getDifficultyLabel = (difficulty: string) => {\n    switch (difficulty) {\n      case 'beginner':\n        return 'Débutant'\n      case 'intermediate':\n        return 'Intermédiaire'\n      case 'advanced':\n        return 'Avancé'\n      default:\n        return difficulty\n    }\n  }\n\n  if (!course) {\n    return (\n      <div className=\"container mx-auto py-8 px-4 max-w-7xl\">\n        <div className=\"text-center py-12\">Chargement...</div>\n      </div>\n    )\n  }\n\n  // Organiser les leçons par section\n  const lessonsBySection: Record<string, any[]> = {}\n  course.lessons?.forEach((lesson: any) => {\n    const sectionId = lesson.section_id || 'no-section'\n    if (!lessonsBySection[sectionId]) {\n      lessonsBySection[sectionId] = []\n    }\n    lessonsBySection[sectionId].push(lesson)\n  })\n\n  return (\n    <div className=\"container mx-auto py-8 px-4 max-w-7xl\">\n      <div className=\"mb-6\">\n        <Link href=\"/dashboard/elearning\">\n          <Button variant=\"ghost\" size=\"sm\" className=\"mb-4\">\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\n            Retour aux cours\n          </Button>\n        </Link>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        {/* Contenu principal */}\n        <div className=\"lg:col-span-2\">\n          {/* En-tête du cours */}\n          <Card className=\"mb-6\">\n            {course.cover_image_url && (\n              <div className=\"h-64 w-full overflow-hidden rounded-t-lg\">\n                <img\n                  src={course.cover_image_url}\n                  alt={course.title}\n                  className=\"w-full h-full object-cover\"\n                />\n              </div>\n            )}\n            <CardHeader>\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  <CardTitle className=\"text-3xl mb-2\">{course.title}</CardTitle>\n                  {course.description && (\n                    <p className=\"text-muted-foreground mb-4\">{course.description}</p>\n                  )}\n                  <div className=\"flex items-center gap-4 text-sm text-muted-foreground\">\n                    <span\n                      className={`px-2 py-1 rounded ${getDifficultyColor(course.difficulty_level)}`}\n                    >\n                      {getDifficultyLabel(course.difficulty_level)}\n                    </span>\n                    {course.estimated_duration_hours && (\n                      <div className=\"flex items-center gap-1\">\n                        <Clock className=\"h-4 w-4\" />\n                        <span>{course.estimated_duration_hours} heures</span>\n                      </div>\n                    )}\n                    <div className=\"flex items-center gap-1\">\n                      <Users className=\"h-4 w-4\" />\n                      <span>{course.total_students || 0} étudiants</span>\n                    </div>\n                    <div className=\"flex items-center gap-1\">\n                      <BookOpen className=\"h-4 w-4\" />\n                      <span>{course.total_lessons || 0} leçons</span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </CardHeader>\n            <CardContent>\n              <div className=\"prose prose-sm max-w-none\">\n                {course.description && <ReactMarkdown>{course.description}</ReactMarkdown>}\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Contenu du cours */}\n          <Card>\n            <CardHeader>\n              <CardTitle>Contenu du cours</CardTitle>\n            </CardHeader>\n            <CardContent>\n              {course.sections && course.sections.length > 0 ? (\n                <div className=\"space-y-6\">\n                  {course.sections.map((section: any) => {\n                    const sectionLessons = lessonsBySection[section.id] || []\n                    return (\n                      <div key={section.id}>\n                        <h3 className=\"font-semibold text-lg mb-3\">{section.title}</h3>\n                        {section.description && (\n                          <p className=\"text-sm text-muted-foreground mb-3\">{section.description}</p>\n                        )}\n                        <div className=\"space-y-2\">\n                          {sectionLessons.map((lesson: any) => (\n                            <div\n                              key={lesson.id}\n                              className=\"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50\"\n                            >\n                              <div className=\"flex items-center gap-3 flex-1\">\n                                {lesson.lesson_type === 'video' ? (\n                                  <Play className=\"h-5 w-5 text-primary\" />\n                                ) : (\n                                  <BookOpen className=\"h-5 w-5 text-primary\" />\n                                )}\n                                <div className=\"flex-1\">\n                                  <h4 className=\"font-medium\">{lesson.title}</h4>\n                                  {lesson.description && (\n                                    <p className=\"text-sm text-muted-foreground line-clamp-1\">\n                                      {lesson.description}\n                                    </p>\n                                  )}\n                                  {lesson.video_duration_minutes && (\n                                    <span className=\"text-xs text-muted-foreground\">\n                                      {lesson.video_duration_minutes} min\n                                    </span>\n                                  )}\n                                </div>\n                              </div>\n                              {lesson.is_preview && (\n                                <span className=\"text-xs px-2 py-1 rounded bg-blue-100 text-blue-800\">\n                                  Aperçu\n                                </span>\n                              )}\n                              {enrollment && (\n                                <Link\n                                  href={`/dashboard/elearning/courses/${slug}/lessons/${lesson.slug}`}\n                                >\n                                  <Button size=\"sm\" variant=\"outline\">\n                                    {enrollment.completed_lessons?.includes(parseInt(lesson.id)) ? (\n                                      <CheckCircle className=\"h-4 w-4 mr-2 text-green-600\" />\n                                    ) : (\n                                      <Play className=\"h-4 w-4 mr-2\" />\n                                    )}\n                                    {enrollment.completed_lessons?.includes(parseInt(lesson.id))\n                                      ? 'Revoir'\n                                      : 'Commencer'}\n                                  </Button>\n                                </Link>\n                              )}\n                            </div>\n                          ))}\n                        </div>\n                      </div>\n                    )\n                  })}\n                </div>\n              ) : course.lessons && course.lessons.length > 0 ? (\n                <div className=\"space-y-2\">\n                  {course.lessons.map((lesson: any) => (\n                    <div\n                      key={lesson.id}\n                      className=\"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50\"\n                    >\n                      <div className=\"flex items-center gap-3 flex-1\">\n                        {lesson.lesson_type === 'video' ? (\n                          <Play className=\"h-5 w-5 text-primary\" />\n                        ) : (\n                          <BookOpen className=\"h-5 w-5 text-primary\" />\n                        )}\n                        <div className=\"flex-1\">\n                          <h4 className=\"font-medium\">{lesson.title}</h4>\n                          {lesson.video_duration_minutes && (\n                            <span className=\"text-xs text-muted-foreground\">\n                              {lesson.video_duration_minutes} min\n                            </span>\n                          )}\n                        </div>\n                      </div>\n                      {enrollment && (\n                        <Link\n                          href={`/dashboard/elearning/courses/${slug}/lessons/${lesson.slug}`}\n                        >\n                          <Button size=\"sm\" variant=\"outline\">\n                            <Play className=\"h-4 w-4 mr-2\" />\n                            Commencer\n                          </Button>\n                        </Link>\n                      )}\n                    </div>\n                  ))}\n                </div>\n              ) : (\n                <div className=\"text-center py-8 text-muted-foreground\">\n                  Aucune leçon disponible\n                </div>\n              )}\n            </CardContent>\n          </Card>\n\n          {/* Avis */}\n          {course.reviews && course.reviews.length > 0 && (\n            <Card className=\"mt-6\">\n              <CardHeader>\n                <CardTitle>Avis des étudiants</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-4\">\n                  {course.reviews.slice(0, 5).map((review: any) => (\n                    <div key={review.id} className=\"border-b pb-4 last:border-0 last:pb-0\">\n                      <div className=\"flex items-center gap-2 mb-2\">\n                        <div className=\"flex items-center\">\n                          {[1, 2, 3, 4, 5].map((star) => (\n                            <Star\n                              key={star}\n                              className={`h-4 w-4 ${\n                                star <= (review.rating || 0)\n                                  ? 'text-yellow-500 fill-yellow-500'\n                                  : 'text-gray-300'\n                              }`}\n                            />\n                          ))}\n                        </div>\n                        <span className=\"text-sm font-medium\">\n                          {review.student?.full_name || review.student?.email || 'Utilisateur'}\n                        </span>\n                        <span className=\"text-xs text-muted-foreground\">\n                          {formatDate(review.created_at)}\n                        </span>\n                      </div>\n                      {review.review_text && (\n                        <p className=\"text-sm text-muted-foreground\">{review.review_text}</p>\n                      )}\n                    </div>\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n          )}\n        </div>\n\n        {/* Sidebar */}\n        <div className=\"space-y-6\">\n          {/* Actions */}\n          <Card>\n            <CardHeader>\n              <CardTitle>Actions</CardTitle>\n            </CardHeader>\n            <CardContent>\n              {enrollment ? (\n                <div className=\"space-y-4\">\n                  <div>\n                    <div className=\"flex items-center justify-between mb-2\">\n                      <span className=\"text-sm font-medium\">Progression</span>\n                      <span className=\"text-sm text-muted-foreground\">\n                        {Math.round(enrollment.progress_percentage || 0)}%\n                      </span>\n                    </div>\n                    <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                      <div\n                        className=\"bg-primary h-2 rounded-full transition-all\"\n                        style={{ width: `${enrollment.progress_percentage || 0}%` }}\n                      />\n                    </div>\n                  </div>\n                  <Link href={`/dashboard/elearning/courses/${slug}/learn`}>\n                    <Button className=\"w-full\">\n                      <Play className=\"h-4 w-4 mr-2\" />\n                      Continuer le cours\n                    </Button>\n                  </Link>\n                  {enrollment.enrollment_status === 'completed' && (\n                    <Button variant=\"outline\" className=\"w-full\">\n                      <Award className=\"h-4 w-4 mr-2\" />\n                      Télécharger le certificat\n                    </Button>\n                  )}\n                </div>\n              ) : (\n                <Button\n                  className=\"w-full\"\n                  onClick={() => enrollMutation.mutate()}\n                  disabled={enrollMutation.isPending}\n                >\n                  {enrollMutation.isPending ? 'Inscription...' : 'S\\'inscrire au cours'}\n                </Button>\n              )}\n            </CardContent>\n          </Card>\n\n          {/* Informations */}\n          <Card>\n            <CardHeader>\n              <CardTitle>Informations</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-3 text-sm\">\n              {course.instructor && (\n                <div>\n                  <span className=\"text-muted-foreground\">Instructeur:</span>\n                  <p className=\"font-medium\">\n                    {course.instructor.full_name || course.instructor.email}\n                  </p>\n                </div>\n              )}\n              {course.published_at && (\n                <div>\n                  <span className=\"text-muted-foreground\">Publié le:</span>\n                  <p className=\"font-medium\">{formatDate(course.published_at)}</p>\n                </div>\n              )}\n              {ratingStats && ratingStats.total > 0 && (\n                <div>\n                  <span className=\"text-muted-foreground\">Note moyenne:</span>\n                  <div className=\"flex items-center gap-2\">\n                    <Star className=\"h-4 w-4 text-yellow-500 fill-yellow-500\" />\n                    <span className=\"font-medium\">{ratingStats.average.toFixed(1)} / 5</span>\n                    <span className=\"text-muted-foreground\">({ratingStats.total} avis)</span>\n                  </div>\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    </div>\n  )\n}\n\n\n\nfunction CourseDetailPage_DUPLICATE_2() {\n  const params = useParams()\n  const router = useRouter()\n  const slug = params.slug as string\n  const { user } = useAuth()\n  const queryClient = useQueryClient()\n\n  // Récupérer le cours\n  const { data: course } = useQuery<{ id: string; [key: string]: any } | null>({\n    queryKey: ['course', slug, user?.organization_id],\n    queryFn: async () => {\n      const result = await elearningService.getCourseBySlug(slug, user?.organization_id || '')\n      return result as any\n    },\n    enabled: !!slug && !!user?.organization_id,\n  })\n\n  // Vérifier si l'utilisateur est inscrit\n  const { data: enrollment } = useQuery<any>({\n    queryKey: ['course-enrollment', course?.id, user?.id],\n    queryFn: async () => {\n      if (!course?.id || !user?.id) return null\n      const enrollments = await elearningService.getStudentEnrollments(user.id)\n      return enrollments.find((e: any) => e.course_id === (course as any).id)\n    },\n    enabled: !!course?.id && !!user?.id,\n  })\n\n  // Récupérer les statistiques de notation\n  const { data: ratingStats } = useQuery<any>({\n    queryKey: ['course-rating-stats', course?.id],\n    queryFn: async () => {\n      const result = await elearningService.getCourseRatingStats((course as any)?.id || '')\n      return result as any\n    },\n    enabled: !!course?.id,\n  })\n\n  // S'inscrire au cours\n  const enrollMutation = useMutation({\n    mutationFn: async () => {\n      if (!course?.id || !user?.id) throw new Error('Données manquantes')\n      return elearningService.enrollInCourse(course.id, user.id)\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['course-enrollment'] })\n      queryClient.invalidateQueries({ queryKey: ['my-enrollments'] })\n      router.push(`/dashboard/elearning/courses/${slug}/learn`)\n    },\n  })\n\n  const getDifficultyColor = (difficulty: string) => {\n    switch (difficulty) {\n      case 'beginner':\n        return 'bg-green-100 text-green-800'\n      case 'intermediate':\n        return 'bg-yellow-100 text-yellow-800'\n      case 'advanced':\n        return 'bg-red-100 text-red-800'\n      default:\n        return 'bg-gray-100 text-gray-800'\n    }\n  }\n\n  const getDifficultyLabel = (difficulty: string) => {\n    switch (difficulty) {\n      case 'beginner':\n        return 'Débutant'\n      case 'intermediate':\n        return 'Intermédiaire'\n      case 'advanced':\n        return 'Avancé'\n      default:\n        return difficulty\n    }\n  }\n\n  if (!course) {\n    return (\n      <div className=\"container mx-auto py-8 px-4 max-w-7xl\">\n        <div className=\"text-center py-12\">Chargement...</div>\n      </div>\n    )\n  }\n\n  // Organiser les leçons par section\n  const lessonsBySection: Record<string, any[]> = {}\n  course.lessons?.forEach((lesson: any) => {\n    const sectionId = lesson.section_id || 'no-section'\n    if (!lessonsBySection[sectionId]) {\n      lessonsBySection[sectionId] = []\n    }\n    lessonsBySection[sectionId].push(lesson)\n  })\n\n  return (\n    <div className=\"container mx-auto py-8 px-4 max-w-7xl\">\n      <div className=\"mb-6\">\n        <Link href=\"/dashboard/elearning\">\n          <Button variant=\"ghost\" size=\"sm\" className=\"mb-4\">\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\n            Retour aux cours\n          </Button>\n        </Link>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        {/* Contenu principal */}\n        <div className=\"lg:col-span-2\">\n          {/* En-tête du cours */}\n          <Card className=\"mb-6\">\n            {course.cover_image_url && (\n              <div className=\"h-64 w-full overflow-hidden rounded-t-lg\">\n                <img\n                  src={course.cover_image_url}\n                  alt={course.title}\n                  className=\"w-full h-full object-cover\"\n                />\n              </div>\n            )}\n            <CardHeader>\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  <CardTitle className=\"text-3xl mb-2\">{course.title}</CardTitle>\n                  {course.description && (\n                    <p className=\"text-muted-foreground mb-4\">{course.description}</p>\n                  )}\n                  <div className=\"flex items-center gap-4 text-sm text-muted-foreground\">\n                    <span\n                      className={`px-2 py-1 rounded ${getDifficultyColor(course.difficulty_level)}`}\n                    >\n                      {getDifficultyLabel(course.difficulty_level)}\n                    </span>\n                    {course.estimated_duration_hours && (\n                      <div className=\"flex items-center gap-1\">\n                        <Clock className=\"h-4 w-4\" />\n                        <span>{course.estimated_duration_hours} heures</span>\n                      </div>\n                    )}\n                    <div className=\"flex items-center gap-1\">\n                      <Users className=\"h-4 w-4\" />\n                      <span>{course.total_students || 0} étudiants</span>\n                    </div>\n                    <div className=\"flex items-center gap-1\">\n                      <BookOpen className=\"h-4 w-4\" />\n                      <span>{course.total_lessons || 0} leçons</span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </CardHeader>\n            <CardContent>\n              <div className=\"prose prose-sm max-w-none\">\n                {course.description && <ReactMarkdown>{course.description}</ReactMarkdown>}\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Contenu du cours */}\n          <Card>\n            <CardHeader>\n              <CardTitle>Contenu du cours</CardTitle>\n            </CardHeader>\n            <CardContent>\n              {course.sections && course.sections.length > 0 ? (\n                <div className=\"space-y-6\">\n                  {course.sections.map((section: any) => {\n                    const sectionLessons = lessonsBySection[section.id] || []\n                    return (\n                      <div key={section.id}>\n                        <h3 className=\"font-semibold text-lg mb-3\">{section.title}</h3>\n                        {section.description && (\n                          <p className=\"text-sm text-muted-foreground mb-3\">{section.description}</p>\n                        )}\n                        <div className=\"space-y-2\">\n                          {sectionLessons.map((lesson: any) => (\n                            <div\n                              key={lesson.id}\n                              className=\"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50\"\n                            >\n                              <div className=\"flex items-center gap-3 flex-1\">\n                                {lesson.lesson_type === 'video' ? (\n                                  <Play className=\"h-5 w-5 text-primary\" />\n                                ) : (\n                                  <BookOpen className=\"h-5 w-5 text-primary\" />\n                                )}\n                                <div className=\"flex-1\">\n                                  <h4 className=\"font-medium\">{lesson.title}</h4>\n                                  {lesson.description && (\n                                    <p className=\"text-sm text-muted-foreground line-clamp-1\">\n                                      {lesson.description}\n                                    </p>\n                                  )}\n                                  {lesson.video_duration_minutes && (\n                                    <span className=\"text-xs text-muted-foreground\">\n                                      {lesson.video_duration_minutes} min\n                                    </span>\n                                  )}\n                                </div>\n                              </div>\n                              {lesson.is_preview && (\n                                <span className=\"text-xs px-2 py-1 rounded bg-blue-100 text-blue-800\">\n                                  Aperçu\n                                </span>\n                              )}\n                              {enrollment && (\n                                <Link\n                                  href={`/dashboard/elearning/courses/${slug}/lessons/${lesson.slug}`}\n                                >\n                                  <Button size=\"sm\" variant=\"outline\">\n                                    {enrollment.completed_lessons?.includes(parseInt(lesson.id)) ? (\n                                      <CheckCircle className=\"h-4 w-4 mr-2 text-green-600\" />\n                                    ) : (\n                                      <Play className=\"h-4 w-4 mr-2\" />\n                                    )}\n                                    {enrollment.completed_lessons?.includes(parseInt(lesson.id))\n                                      ? 'Revoir'\n                                      : 'Commencer'}\n                                  </Button>\n                                </Link>\n                              )}\n                            </div>\n                          ))}\n                        </div>\n                      </div>\n                    )\n                  })}\n                </div>\n              ) : course.lessons && course.lessons.length > 0 ? (\n                <div className=\"space-y-2\">\n                  {course.lessons.map((lesson: any) => (\n                    <div\n                      key={lesson.id}\n                      className=\"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50\"\n                    >\n                      <div className=\"flex items-center gap-3 flex-1\">\n                        {lesson.lesson_type === 'video' ? (\n                          <Play className=\"h-5 w-5 text-primary\" />\n                        ) : (\n                          <BookOpen className=\"h-5 w-5 text-primary\" />\n                        )}\n                        <div className=\"flex-1\">\n                          <h4 className=\"font-medium\">{lesson.title}</h4>\n                          {lesson.video_duration_minutes && (\n                            <span className=\"text-xs text-muted-foreground\">\n                              {lesson.video_duration_minutes} min\n                            </span>\n                          )}\n                        </div>\n                      </div>\n                      {enrollment && (\n                        <Link\n                          href={`/dashboard/elearning/courses/${slug}/lessons/${lesson.slug}`}\n                        >\n                          <Button size=\"sm\" variant=\"outline\">\n                            <Play className=\"h-4 w-4 mr-2\" />\n                            Commencer\n                          </Button>\n                        </Link>\n                      )}\n                    </div>\n                  ))}\n                </div>\n              ) : (\n                <div className=\"text-center py-8 text-muted-foreground\">\n                  Aucune leçon disponible\n                </div>\n              )}\n            </CardContent>\n          </Card>\n\n          {/* Avis */}\n          {course.reviews && course.reviews.length > 0 && (\n            <Card className=\"mt-6\">\n              <CardHeader>\n                <CardTitle>Avis des étudiants</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-4\">\n                  {course.reviews.slice(0, 5).map((review: any) => (\n                    <div key={review.id} className=\"border-b pb-4 last:border-0 last:pb-0\">\n                      <div className=\"flex items-center gap-2 mb-2\">\n                        <div className=\"flex items-center\">\n                          {[1, 2, 3, 4, 5].map((star) => (\n                            <Star\n                              key={star}\n                              className={`h-4 w-4 ${\n                                star <= (review.rating || 0)\n                                  ? 'text-yellow-500 fill-yellow-500'\n                                  : 'text-gray-300'\n                              }`}\n                            />\n                          ))}\n                        </div>\n                        <span className=\"text-sm font-medium\">\n                          {review.student?.full_name || review.student?.email || 'Utilisateur'}\n                        </span>\n                        <span className=\"text-xs text-muted-foreground\">\n                          {formatDate(review.created_at)}\n                        </span>\n                      </div>\n                      {review.review_text && (\n                        <p className=\"text-sm text-muted-foreground\">{review.review_text}</p>\n                      )}\n                    </div>\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n          )}\n        </div>\n\n        {/* Sidebar */}\n        <div className=\"space-y-6\">\n          {/* Actions */}\n          <Card>\n            <CardHeader>\n              <CardTitle>Actions</CardTitle>\n            </CardHeader>\n            <CardContent>\n              {enrollment ? (\n                <div className=\"space-y-4\">\n                  <div>\n                    <div className=\"flex items-center justify-between mb-2\">\n                      <span className=\"text-sm font-medium\">Progression</span>\n                      <span className=\"text-sm text-muted-foreground\">\n                        {Math.round(enrollment.progress_percentage || 0)}%\n                      </span>\n                    </div>\n                    <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                      <div\n                        className=\"bg-primary h-2 rounded-full transition-all\"\n                        style={{ width: `${enrollment.progress_percentage || 0}%` }}\n                      />\n                    </div>\n                  </div>\n                  <Link href={`/dashboard/elearning/courses/${slug}/learn`}>\n                    <Button className=\"w-full\">\n                      <Play className=\"h-4 w-4 mr-2\" />\n                      Continuer le cours\n                    </Button>\n                  </Link>\n                  {enrollment.enrollment_status === 'completed' && (\n                    <Button variant=\"outline\" className=\"w-full\">\n                      <Award className=\"h-4 w-4 mr-2\" />\n                      Télécharger le certificat\n                    </Button>\n                  )}\n                </div>\n              ) : (\n                <Button\n                  className=\"w-full\"\n                  onClick={() => enrollMutation.mutate()}\n                  disabled={enrollMutation.isPending}\n                >\n                  {enrollMutation.isPending ? 'Inscription...' : 'S\\'inscrire au cours'}\n                </Button>\n              )}\n            </CardContent>\n          </Card>\n\n          {/* Informations */}\n          <Card>\n            <CardHeader>\n              <CardTitle>Informations</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-3 text-sm\">\n              {course.instructor && (\n                <div>\n                  <span className=\"text-muted-foreground\">Instructeur:</span>\n                  <p className=\"font-medium\">\n                    {course.instructor.full_name || course.instructor.email}\n                  </p>\n                </div>\n              )}\n              {course.published_at && (\n                <div>\n                  <span className=\"text-muted-foreground\">Publié le:</span>\n                  <p className=\"font-medium\">{formatDate(course.published_at)}</p>\n                </div>\n              )}\n              {ratingStats && ratingStats.total > 0 && (\n                <div>\n                  <span className=\"text-muted-foreground\">Note moyenne:</span>\n                  <div className=\"flex items-center gap-2\">\n                    <Star className=\"h-4 w-4 text-yellow-500 fill-yellow-500\" />\n                    <span className=\"font-medium\">{ratingStats.average.toFixed(1)} / 5</span>\n                    <span className=\"text-muted-foreground\">({ratingStats.total} avis)</span>\n                  </div>\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    </div>\n  )\n}\n\n\n"],"names":[],"mappings":"0DAGA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAEe,SAAS,IACtB,IAAM,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,EAAO,EAAO,IAAI,CAClB,MAAE,CAAI,CAAE,CAAG,CAAA,EAAA,EAAA,OAAA,AAAO,IAClB,EAAc,CAAA,EAAA,EAAA,cAAA,AAAc,IAG5B,CAAE,KAAM,CAAM,CAAE,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAoD,CAC3E,SAAU,CAAC,SAAU,EAAM,GAAM,gBAAgB,CACjD,QAAS,SACQ,MAAM,EAAA,gBAAgB,CAAC,eAAe,CAAC,EAAM,GAAM,iBAAmB,IAGvF,QAAS,CAAC,CAAC,GAAQ,CAAC,CAAC,GAAM,eAC7B,GAGM,CAAE,KAAM,CAAU,CAAE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAM,CACzC,SAAU,CAAC,oBAAqB,GAAQ,GAAI,GAAM,GAAG,CACrD,QAAS,SACF,AAAL,AAAI,GAAS,IAAO,EAAD,CAAO,GAEnB,CAFuB,AACV,MAAM,EAAA,gBAAgB,CAAC,qBAAqB,CAAC,EAAK,GAAE,EACrD,IAAI,CAAC,AAAC,GAAW,EAAE,SAAS,GAAM,EAAe,EAAE,EAFjC,KAIvC,QAAS,CAAC,CAAC,GAAQ,IAAM,CAAC,CAAC,GAAM,EACnC,GAGM,CAAE,KAAM,CAAW,CAAE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAM,CAC1C,SAAU,CAAC,sBAAuB,GAAQ,GAAG,CAC7C,QAAS,SACQ,MAAM,EAAA,gBAAgB,CAAC,oBAAoB,CAAE,GAAgB,IAAM,IAGpF,QAAS,CAAC,CAAC,GAAQ,EACrB,GAGM,EAAiB,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,CACjC,WAAY,UACV,GAAI,CAAC,GAAQ,IAAM,CAAC,GAAM,GAAI,MAAM,AAAI,MAAM,sBAC9C,OAAO,EAAA,gBAAgB,CAAC,cAAc,CAAC,EAAO,EAAE,CAAE,EAAK,EAAE,CAC3D,EACA,UAAW,KACT,EAAY,iBAAiB,CAAC,CAAE,SAAU,CAAC,oBAAoB,AAAC,GAChE,EAAY,iBAAiB,CAAC,CAAE,SAAU,CAAC,iBAAiB,AAAC,GAC7D,EAAO,IAAI,CAAC,CAAC,6BAA6B,EAAE,EAAK,MAAM,CAAC,CAC1D,CACF,GA4BA,GAAI,CAAC,EACH,MADW,AAET,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iDACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6BAAoB,oBAMzC,IAAM,EAA0C,CAAC,EASjD,OARA,EAAO,OAAO,EAAE,QAAQ,AAAC,IACvB,IAAM,EAAY,EAAO,UAAU,EAAI,YACnC,CAAC,CAAgB,CAAC,EAAU,EAAE,CAChC,CAAgB,CAAC,EAAU,CAAG,EAAA,AAAE,EAElC,CAAgB,CAAC,EAAU,CAAC,IAAI,CAAC,EACnC,GAGE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,gCACT,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,QAAQ,KAAK,KAAK,UAAU,iBAC1C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,iBAAiB,0BAM5C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BAEb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,iBACb,EAAO,eAAe,EACrB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,oDACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,IAAK,EAAO,eAAe,CAC3B,IAAK,EAAO,KAAK,CACjB,UAAU,iCAIhB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,UACT,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,yBAAiB,EAAO,KAAK,GACjD,EAAO,WAAW,EACjB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sCAA8B,EAAO,WAAW,GAE/D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kEACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CACC,UAAW,CAAC,kBAAkB,EAAE,CA9EzB,AAAC,IAC1B,OAAQ,GACN,IAAK,WACH,MAAO,6BACT,KAAK,eACH,MAAO,+BACT,KAAK,WACH,MAAO,yBACT,SACE,MAAO,2BACX,EACF,EAmEuE,EAAO,gBAAgB,EAAA,CAAG,UAE5E,CAnEM,AAAC,IAC1B,OAAQ,GACN,IAAK,WACH,MAAO,UACT,KAAK,eACH,MAAO,eACT,KAAK,WACH,MAAO,QACT,SACE,OAAO,CACX,CACF,GAwDwC,EAAO,gBAAgB,IAE5C,EAAO,wBAAwB,EAC9B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,YACjB,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,WAAM,EAAO,wBAAwB,CAAC,gBAG3C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,YACjB,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,WAAM,EAAO,cAAc,EAAI,EAAE,mBAEpC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,YACpB,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,WAAM,EAAO,aAAa,EAAI,EAAE,0BAM3C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qCACZ,EAAO,WAAW,EAAI,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAa,CAAA,UAAE,EAAO,WAAW,UAM/D,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,WACH,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,UACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,uBAEb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACT,EAAO,QAAQ,EAAI,EAAO,QAAQ,CAAC,MAAM,CAAG,EAC3C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACZ,EAAO,QAAQ,CAAC,GAAG,CAAE,AAAD,IACnB,IAAM,EAAiB,CAAgB,CAAC,EAAQ,EAAE,CAAC,EAAI,EAAE,CACzD,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,sCAA8B,EAAQ,KAAK,GACxD,EAAQ,WAAW,EAClB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,8CAAsC,EAAQ,WAAW,GAExE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACZ,EAAe,GAAG,CAAC,AAAC,GACnB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAEC,UAAU,qFAEV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2CACW,UAAvB,EAAO,WAAW,CACjB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,yBAEhB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,yBAEtB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mBACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,uBAAe,EAAO,KAAK,GACxC,EAAO,WAAW,EACjB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sDACV,EAAO,WAAW,GAGtB,EAAO,sBAAsB,EAC5B,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,0CACb,EAAO,sBAAsB,CAAC,gBAKtC,EAAO,UAAU,EAChB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,+DAAsD,WAIvE,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CACH,KAAM,CAAC,6BAA6B,EAAE,EAAK,SAAS,EAAE,EAAO,IAAI,CAAA,CAAE,UAEnE,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAK,KAAK,QAAQ,oBACvB,EAAW,iBAAiB,EAAE,SAAS,SAAS,EAAO,EAAE,GACxD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,gCAEvB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,iBAEjB,EAAW,iBAAiB,EAAE,SAAS,SAAS,EAAO,EAAE,GACtD,SACA,mBAxCL,EAAO,EAAE,OARZ,EAAQ,EAAE,CAyDxB,KAEA,EAAO,OAAO,EAAI,EAAO,OAAO,CAAC,MAAM,CAAG,EAC5C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACZ,EAAO,OAAO,CAAC,GAAG,CAAC,AAAC,GACnB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAEC,UAAU,qFAEV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2CACW,UAAvB,EAAO,WAAW,CACjB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,yBAEhB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,yBAEtB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mBACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,uBAAe,EAAO,KAAK,GACxC,EAAO,sBAAsB,EAC5B,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,0CACb,EAAO,sBAAsB,CAAC,gBAKtC,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CACH,KAAM,CAAC,6BAA6B,EAAE,EAAK,SAAS,EAAE,EAAO,IAAI,CAAA,CAAE,UAEnE,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAK,KAAK,QAAQ,oBACxB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,iBAAiB,mBAvBlC,EAAO,EAAE,KAgCpB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kDAAyC,iCAQ7D,EAAO,OAAO,EAAI,EAAO,OAAO,CAAC,MAAM,CAAG,GACzC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,iBACd,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,UACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,yBAEb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACZ,EAAO,OAAO,CAAC,KAAK,CAAC,EAAG,GAAG,GAAG,CAAC,AAAC,GAC/B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAoB,UAAU,kDAC7B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6BACZ,CAAC,EAAG,EAAG,EAAG,EAAG,EAAE,CAAC,GAAG,CAAC,AAAC,GACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAEH,UAAW,CAAC,QAAQ,EAClB,IAAS,EAAO,EAAR,IAAc,GAAI,CAAC,CACvB,kCACA,gBAAA,CACJ,EALG,MASX,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,+BACb,EAAO,OAAO,EAAE,WAAa,EAAO,OAAO,EAAE,OAAS,gBAEzD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,yCACb,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,EAAO,UAAU,OAGhC,EAAO,WAAW,EACjB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCAAiC,EAAO,WAAW,KAtB1D,EAAO,EAAE,aAiC/B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBAEb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,WACH,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,UACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,cAEb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACT,EACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,+BAAsB,gBACtC,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,0CACb,KAAK,KAAK,CAAC,EAAW,mBAAmB,EAAI,GAAG,UAGrD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+CACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,UAAU,6CACV,MAAO,CAAE,MAAO,CAAA,EAAG,EAAW,mBAAmB,EAAI,EAAE,CAAC,CAAC,AAAC,SAIhE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAM,CAAC,6BAA6B,EAAE,EAAK,MAAM,CAAC,UACtD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,mBAChB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,iBAAiB,0BAIH,cAAjC,EAAW,iBAAiB,EAC3B,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,UAAU,UAAU,mBAClC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,iBAAiB,kCAMxC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,UAAU,SACV,QAAS,IAAM,EAAe,MAAM,GACpC,SAAU,EAAe,SAAS,UAEjC,EAAe,SAAS,CAAG,iBAAmB,6BAOvD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,WACH,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,UACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,mBAEb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,8BACpB,EAAO,UAAU,EAChB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,iCAAwB,iBACxC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,uBACV,EAAO,UAAU,CAAC,SAAS,EAAI,EAAO,UAAU,CAAC,KAAK,MAI5D,EAAO,YAAY,EAClB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,iCAAwB,eACxC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,uBAAe,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,EAAO,YAAY,OAG7D,GAAe,EAAY,KAAK,CAAG,GAClC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,iCAAwB,kBACxC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,4CAChB,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,wBAAe,EAAY,OAAO,CAAC,OAAO,CAAC,GAAG,UAC9D,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,kCAAwB,IAAE,EAAY,KAAK,CAAC,gCAUhF"}