module.exports=[67393,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(571987),e=a.i(238246),f=a.i(641710),g=a.i(124987),h=a.i(100336),i=a.i(941675),j=a.i(660246),k=a.i(495756),l=a.i(400210),m=a.i(340695),n=a.i(703130),o=a.i(695245),p=a.i(159501),q=a.i(88780),r=a.i(205522),s=a.i(917171),t=a.i(546893),u=a.i(864037),v=a.i(783876),w=a.i(526017);let x=q.z.object({first_name:q.z.string().min(2,"Le prénom doit contenir au moins 2 caractères"),last_name:q.z.string().min(2,"Le nom doit contenir au moins 2 caractères"),email:q.z.string().email("Adresse email invalide"),phone:q.z.string().optional(),address:q.z.string().optional(),city:q.z.string().optional(),postal_code:q.z.string().optional(),country:q.z.string().default("FR"),candidate_notes:q.z.string().optional(),site_id:q.z.string().uuid().optional().nullable()});function y({formation:a,onSuccess:d,onCancel:e}){let{addToast:f}=(0,u.useToast)(),[g,h]=(0,c.useState)(!1),{register:i,handleSubmit:j,formState:{errors:k},reset:l}=(0,o.useForm)({resolver:(0,p.zodResolver)(x),defaultValues:{country:"FR"}}),n=async b=>{h(!0);try{await v.publicCatalogService.createEnrollment({organization_id:a.organization_id,public_formation_id:a.id,site_id:b.site_id||null,first_name:b.first_name,last_name:b.last_name,email:b.email,phone:b.phone||null,address:b.address||null,city:b.city||null,postal_code:b.postal_code||null,country:b.country,candidate_notes:b.candidate_notes||null,status:"pending"}),f({title:"Inscription réussie",description:"Votre demande d'inscription a été envoyée. Un responsable vous contactera prochainement.",variant:"success"}),l(),d?.()}catch(a){console.error("Erreur lors de l'inscription:",a),f({title:"Erreur",description:a.message||"Une erreur est survenue lors de l'inscription. Veuillez réessayer.",variant:"error"})}finally{h(!1)}};return(0,b.jsxs)("form",{onSubmit:j(n),className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)(s.Label,{htmlFor:"first_name",children:["Prénom ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(r.Input,{id:"first_name",...i("first_name"),placeholder:"Jean",disabled:g}),k.first_name&&(0,b.jsx)("p",{className:"text-sm text-red-600 mt-1",children:k.first_name.message})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)(s.Label,{htmlFor:"last_name",children:["Nom ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(r.Input,{id:"last_name",...i("last_name"),placeholder:"Dupont",disabled:g}),k.last_name&&(0,b.jsx)("p",{className:"text-sm text-red-600 mt-1",children:k.last_name.message})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)(s.Label,{htmlFor:"email",children:["Email ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(r.Input,{id:"email",type:"email",...i("email"),placeholder:"jean.dupont@example.com",disabled:g}),k.email&&(0,b.jsx)("p",{className:"text-sm text-red-600 mt-1",children:k.email.message})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(s.Label,{htmlFor:"phone",children:"Téléphone"}),(0,b.jsx)(r.Input,{id:"phone",type:"tel",...i("phone"),placeholder:"+33 6 12 34 56 78",disabled:g}),k.phone&&(0,b.jsx)("p",{className:"text-sm text-red-600 mt-1",children:k.phone.message})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(s.Label,{htmlFor:"address",children:"Adresse"}),(0,b.jsx)(r.Input,{id:"address",...i("address"),placeholder:"123 rue de la République",disabled:g})]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(s.Label,{htmlFor:"postal_code",children:"Code postal"}),(0,b.jsx)(r.Input,{id:"postal_code",...i("postal_code"),placeholder:"75001",disabled:g})]}),(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsx)(s.Label,{htmlFor:"city",children:"Ville"}),(0,b.jsx)(r.Input,{id:"city",...i("city"),placeholder:"Paris",disabled:g})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(s.Label,{htmlFor:"candidate_notes",children:"Message (optionnel)"}),(0,b.jsx)(t.Textarea,{id:"candidate_notes",...i("candidate_notes"),placeholder:"Informations complémentaires, questions...",rows:4,disabled:g})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e&&(0,b.jsx)(m.Button,{type:"button",variant:"outline",onClick:e,disabled:g,children:"Annuler"}),(0,b.jsx)(m.Button,{type:"submit",disabled:g,className:"bg-brand-blue hover:bg-brand-blue-dark",children:g?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(w.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Envoi en cours..."]}):"Envoyer l'inscription"})]})]})}var z=a.i(965733),A=a.i(46406),B=a.i(878828);function C({formation:a}){var o,p;let[q,r]=(0,c.useState)(!1),s=a.allow_online_registration&&(!a.registration_deadline||new Date(a.registration_deadline)>new Date);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(A.Navbar,{}),(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[a.cover_image_url&&(0,b.jsxs)("div",{className:"relative h-64 md:h-96 w-full bg-gray-200",children:[(0,b.jsx)(d.default,{src:a.cover_image_url,alt:a.public_title,fill:!0,className:"object-cover"}),(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),(0,b.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 p-6 md:p-12",children:[(0,b.jsxs)(e.default,{href:"/formations",className:"inline-flex items-center text-white hover:text-gray-200 mb-4",children:[(0,b.jsx)(l.ArrowLeft,{className:"w-4 h-4 mr-2"}),"Retour au catalogue"]}),(0,b.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-white",children:a.public_title})]})]}),(0,b.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,b.jsxs)("div",{className:"grid md:grid-cols-3 gap-8",children:[(0,b.jsxs)("div",{className:"md:col-span-2 space-y-6",children:[(0,b.jsxs)(n.Card,{children:[(0,b.jsx)(n.CardHeader,{children:(0,b.jsx)(n.CardTitle,{children:"Informations clés"})}),(0,b.jsxs)(n.CardContent,{className:"space-y-4",children:[a.public_duration_hours&&(0,b.jsxs)("div",{className:"flex items-start",children:[(0,b.jsx)(f.Clock,{className:"w-5 h-5 mr-3 text-brand-blue mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-semibold",children:"Durée"}),(0,b.jsxs)("div",{className:"text-gray-600",children:[a.public_duration_hours," heures",a.public_duration_days&&` (${a.public_duration_days} jours)`]})]})]}),null!==a.public_price&&(0,b.jsxs)("div",{className:"flex items-start",children:[(0,b.jsx)(h.Euro,{className:"w-5 h-5 mr-3 text-brand-blue mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-semibold",children:"Prix"}),(0,b.jsx)("div",{className:"text-gray-600",children:(o=a.public_price,p=a.public_price_label,o?`${p?p+" ":""}${o.toFixed(2)} €`:p||"Sur devis")})]})]}),a.min_participants&&a.max_participants&&(0,b.jsxs)("div",{className:"flex items-start",children:[(0,b.jsx)(j.Users,{className:"w-5 h-5 mr-3 text-brand-blue mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-semibold",children:"Effectif"}),(0,b.jsxs)("div",{className:"text-gray-600",children:["De ",a.min_participants," à ",a.max_participants," participants"]})]})]}),a.registration_deadline&&(0,b.jsxs)("div",{className:"flex items-start",children:[(0,b.jsx)(i.Calendar,{className:"w-5 h-5 mr-3 text-brand-blue mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-semibold",children:"Date limite d'inscription"}),(0,b.jsx)("div",{className:"text-gray-600",children:new Date(a.registration_deadline).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})})]})]})]})]}),a.public_description&&(0,b.jsxs)(n.Card,{children:[(0,b.jsx)(n.CardHeader,{children:(0,b.jsx)(n.CardTitle,{children:"Description"})}),(0,b.jsx)(n.CardContent,{children:(0,b.jsx)("div",{className:"prose max-w-none",children:(0,b.jsx)("p",{className:"whitespace-pre-line",children:a.public_description})})})]}),a.public_objectives&&(0,b.jsxs)(n.Card,{children:[(0,b.jsx)(n.CardHeader,{children:(0,b.jsx)(n.CardTitle,{children:"Objectifs"})}),(0,b.jsx)(n.CardContent,{children:(0,b.jsx)("div",{className:"prose max-w-none",children:(0,b.jsx)("p",{className:"whitespace-pre-line",children:a.public_objectives})})})]}),a.public_prerequisites&&(0,b.jsxs)(n.Card,{children:[(0,b.jsx)(n.CardHeader,{children:(0,b.jsx)(n.CardTitle,{children:"Prérequis"})}),(0,b.jsx)(n.CardContent,{children:(0,b.jsx)("div",{className:"prose max-w-none",children:(0,b.jsx)("p",{className:"whitespace-pre-line",children:a.public_prerequisites})})})]}),a.gallery_images&&a.gallery_images.length>0&&(0,b.jsxs)(n.Card,{children:[(0,b.jsx)(n.CardHeader,{children:(0,b.jsx)(n.CardTitle,{children:"Galerie"})}),(0,b.jsx)(n.CardContent,{children:(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:a.gallery_images.map((c,e)=>(0,b.jsx)("div",{className:"relative h-48 bg-gray-200 rounded-lg overflow-hidden",children:(0,b.jsx)(d.default,{src:c,alt:`${a.public_title} - Image ${e+1}`,fill:!0,className:"object-cover"})},e))})})]})]}),(0,b.jsx)("div",{className:"md:col-span-1",children:(0,b.jsxs)(n.Card,{className:"sticky top-8",children:[(0,b.jsx)(n.CardHeader,{children:(0,b.jsx)(n.CardTitle,{children:"Inscription"})}),(0,b.jsxs)(n.CardContent,{className:"space-y-4",children:[s?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Inscrivez-vous en ligne à cette formation. Un responsable vous contactera pour finaliser votre inscription."}),(0,b.jsx)(m.Button,{onClick:()=>r(!0),className:"w-full bg-brand-blue hover:bg-brand-blue-dark",size:"lg",children:"S'inscrire en ligne"})]}):(0,b.jsxs)("div",{className:"text-center py-4",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:a.registration_deadline?"Les inscriptions sont closes pour cette formation.":"Les inscriptions en ligne ne sont pas disponibles pour cette formation."}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Contactez-nous pour plus d'informations."})]}),(0,b.jsxs)("div",{className:"pt-4 border-t",children:[(0,b.jsxs)("div",{className:"flex items-center text-sm text-gray-600 mb-2",children:[(0,b.jsx)(k.CheckCircle,{className:"w-4 h-4 mr-2 text-green-600"}),"Formation certifiée"]}),a.available_at_sites&&a.available_at_sites.length>0&&(0,b.jsxs)("div",{className:"flex items-start text-sm text-gray-600",children:[(0,b.jsx)(g.MapPin,{className:"w-4 h-4 mr-2 mt-0.5 text-brand-blue"}),(0,b.jsxs)("span",{children:["Disponible dans ",a.available_at_sites.length," site",a.available_at_sites.length>1?"s":""]})]})]})]})]})})]})}),(0,b.jsx)(z.Dialog,{open:q,onOpenChange:r,children:(0,b.jsxs)(z.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)(z.DialogHeader,{children:(0,b.jsx)(z.DialogTitle,{children:"Inscription en ligne"})}),(0,b.jsx)(y,{formation:a,onSuccess:()=>r(!1),onCancel:()=>r(!1)})]})})]}),(0,b.jsx)(B.Footer,{})]})}a.s(["PublicFormationDetail",()=>C],67393)}];

//# sourceMappingURL=components_public_formation-detail_tsx_c2a3d8ad._.js.map