{"version":3,"sources":["../../../../node_modules/lucide-react/src/icons/plus.ts","../../../../components/ui/glass-card.tsx","../../../../node_modules/lucide-react/src/icons/mail.ts","../../../../node_modules/lucide-react/src/icons/upload.ts","../../../../components/auth/role-guard.tsx","../../../../node_modules/lucide-react/src/icons/shield-alert.ts","../../../../node_modules/lucide-react/src/icons/phone.ts","../../../../components/ui/bento-grid.tsx","../../../../node_modules/lucide-react/src/icons/chevron-left.ts","../../../../node_modules/lucide-react/src/icons/user-check.ts","../../../../components/ui/skeleton.tsx","../../../../lib/errors/error-handler.ts","../../../../lib/utils/supabase-helpers.ts","../../../../lib/utils/validators.ts","../../../../lib/services/student.service.ts","../../../../lib/utils/number-generator.ts","../../../../node_modules/lucide-react/src/icons/link.ts","../../../../node_modules/lucide-react/src/icons/arrow-up-right.ts","../../../../node_modules/lucide-react/src/icons/sliders-horizontal.ts","../../../../lib/services/export-history.service.ts","../../../../node_modules/lucide-react/src/icons/user-x.ts","../../../../node_modules/lucide-react/src/icons/file-spreadsheet.ts","../../../../lib/utils/export.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Plus\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNSAxMmgxNCIgLz4KICA8cGF0aCBkPSJNMTIgNXYxNCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/plus\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Plus = createLucideIcon('Plus', [\n  ['path', { d: 'M5 12h14', key: '1ays0h' }],\n  ['path', { d: 'M12 5v14', key: 's699le' }],\n]);\n\nexport default Plus;\n","'use client'\n\nimport * as React from 'react'\nimport { cn } from '@/lib/utils'\nimport { motion } from '@/components/ui/motion'\n\nexport interface GlassCardProps extends React.HTMLAttributes<HTMLDivElement> {\n  variant?: 'default' | 'premium' | 'subtle'\n  hoverable?: boolean\n  glow?: boolean\n  glowColor?: string\n}\n\nconst GlassCard = React.forwardRef<HTMLDivElement, GlassCardProps>(\n  ({ className, variant = 'default', hoverable = false, glow = false, glowColor = 'rgba(51, 90, 207, 0.3)', ...props }, ref) => {\n    return (\n      <motion.div\n        ref={ref}\n        className={cn(\n          'relative rounded-2xl border backdrop-blur-xl transition-all duration-300',\n          {\n            // Default variant\n            'bg-white/70 dark:bg-gray-900/70 border-white/20 dark:border-gray-700/30 shadow-lg': variant === 'default',\n            \n            // Premium variant with stronger glass effect\n            'bg-white/80 dark:bg-gray-900/80 border-white/30 dark:border-gray-700/40 shadow-xl': variant === 'premium',\n            \n            // Subtle variant\n            'bg-white/50 dark:bg-gray-900/50 border-white/10 dark:border-gray-700/20 shadow-md': variant === 'subtle',\n            \n            // Hoverable effects\n            'cursor-pointer': hoverable,\n            'hover:shadow-2xl hover:scale-[1.02]': hoverable,\n            'hover:bg-white/90 dark:hover:bg-gray-900/90': hoverable,\n          },\n          className\n        )}\n        whileHover={hoverable ? { scale: 1.02, y: -2 } : undefined}\n        transition={{ type: 'spring', stiffness: 300, damping: 30 }}\n        {...props}\n      >\n        {/* Glow effect */}\n        {glow && (\n          <motion.div\n            className=\"absolute inset-0 rounded-2xl opacity-0 blur-xl\"\n            style={{\n              background: `radial-gradient(circle, ${glowColor} 0%, transparent 70%)`,\n            }}\n            animate={{\n              opacity: [0, 0.5, 0],\n            }}\n            transition={{\n              duration: 3,\n              repeat: Infinity,\n              ease: 'easeInOut',\n            }}\n          />\n        )}\n        \n        {/* Content */}\n        <div className=\"relative z-10\">\n          {props.children}\n        </div>\n      </motion.div>\n    )\n  }\n)\nGlassCard.displayName = 'GlassCard'\n\nexport { GlassCard }\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Mail\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iMjAiIGhlaWdodD0iMTYiIHg9IjIiIHk9IjQiIHJ4PSIyIiAvPgogIDxwYXRoIGQ9Im0yMiA3LTguOTcgNS43YTEuOTQgMS45NCAwIDAgMS0yLjA2IDBMMiA3IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/mail\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Mail = createLucideIcon('Mail', [\n  ['rect', { width: '20', height: '16', x: '2', y: '4', rx: '2', key: '18n3k1' }],\n  ['path', { d: 'm22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7', key: '1ocrg3' }],\n]);\n\nexport default Mail;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Upload\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEgMTV2NGEyIDIgMCAwIDEtMiAySDVhMiAyIDAgMCAxLTItMnYtNCIgLz4KICA8cG9seWxpbmUgcG9pbnRzPSIxNyA4IDEyIDMgNyA4IiAvPgogIDxsaW5lIHgxPSIxMiIgeDI9IjEyIiB5MT0iMyIgeTI9IjE1IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/upload\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Upload = createLucideIcon('Upload', [\n  ['path', { d: 'M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4', key: 'ih7n3h' }],\n  ['polyline', { points: '17 8 12 3 7 8', key: 't8dd8p' }],\n  ['line', { x1: '12', x2: '12', y1: '3', y2: '15', key: 'widbto' }],\n]);\n\nexport default Upload;\n","'use client'\n\nimport { useAuth } from '@/lib/hooks/use-auth'\nimport { useRouter } from 'next/navigation'\nimport { useEffect, useState } from 'react'\nimport { AlertCircle, ShieldAlert } from 'lucide-react'\nimport { Button } from '@/components/ui/button'\nimport { Card, CardContent } from '@/components/ui/card'\nimport Link from 'next/link'\n\ninterface RoleGuardProps {\n  children: React.ReactNode\n  allowedRoles: string[]\n  fallback?: React.ReactNode\n  redirectTo?: string\n}\n\n// Rôles avec accès administratif\nexport const ADMIN_ROLES = ['super_admin', 'admin', 'secretary', 'accountant']\n// Rôles avec accès aux finances (incluant secrétaire)\nexport const FINANCE_ROLES = ['super_admin', 'admin', 'secretary', 'accountant']\n// Rôles avec accès à la gestion des formations\nexport const FORMATION_MANAGEMENT_ROLES = ['super_admin', 'admin', 'secretary']\n\nexport function RoleGuard({ \n  children, \n  allowedRoles, \n  fallback,\n  redirectTo = '/dashboard'\n}: RoleGuardProps) {\n  const { user, isLoading } = useAuth()\n  const router = useRouter()\n  const [hasAccess, setHasAccess] = useState<boolean | null>(null)\n\n  useEffect(() => {\n    if (!isLoading && user) {\n      const userRole = user.role || ''\n      const access = allowedRoles.includes(userRole)\n      setHasAccess(access)\n      \n      // Si l'utilisateur n'a pas accès et qu'une redirection est définie\n      if (!access && redirectTo && !fallback) {\n        router.push(redirectTo)\n      }\n    }\n  }, [user, isLoading, allowedRoles, redirectTo, router, fallback])\n\n  // Pendant le chargement\n  if (isLoading || hasAccess === null) {\n    return (\n      <div className=\"flex items-center justify-center min-h-[200px]\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-blue\"></div>\n      </div>\n    )\n  }\n\n  // Si l'utilisateur n'a pas accès\n  if (!hasAccess) {\n    if (fallback) {\n      return <>{fallback}</>\n    }\n    \n    return (\n      <div className=\"container mx-auto py-16 px-4\">\n        <Card className=\"max-w-md mx-auto\">\n          <CardContent className=\"py-12 text-center\">\n            <div className=\"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6\">\n              <ShieldAlert className=\"h-8 w-8 text-red-600\" />\n            </div>\n            <h2 className=\"text-xl font-semibold text-gray-900 mb-2\">\n              Accès non autorisé\n            </h2>\n            <p className=\"text-gray-600 mb-6\">\n              Vous n'avez pas les permissions nécessaires pour accéder à cette page.\n            </p>\n            <Link href=\"/dashboard\">\n              <Button>\n                Retour au tableau de bord\n              </Button>\n            </Link>\n          </CardContent>\n        </Card>\n      </div>\n    )\n  }\n\n  // L'utilisateur a accès\n  return <>{children}</>\n}\n\n// Hook pour vérifier l'accès basé sur le rôle\nexport function useRoleAccess(allowedRoles: string[]): boolean {\n  const { user, isLoading } = useAuth()\n  \n  if (isLoading || !user) {\n    return false\n  }\n  \n  return allowedRoles.includes(user.role || '')\n}\n\n// Vérifier si l'utilisateur est un administrateur\nexport function useIsAdmin(): boolean {\n  return useRoleAccess(ADMIN_ROLES)\n}\n\n// Vérifier si l'utilisateur peut accéder aux finances\nexport function useCanAccessFinances(): boolean {\n  return useRoleAccess(FINANCE_ROLES)\n}\n\n// Vérifier si l'utilisateur est un enseignant\nexport function useIsTeacher(): boolean {\n  const { user } = useAuth()\n  return user?.role === 'teacher'\n}\n\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ShieldAlert\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgMjJzOC00IDgtMTBWNWwtOC0zLTggM3Y3YzAgNiA4IDEwIDggMTAiIC8+CiAgPHBhdGggZD0iTTEyIDh2NCIgLz4KICA8cGF0aCBkPSJNMTIgMTZoLjAxIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/shield-alert\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ShieldAlert = createLucideIcon('ShieldAlert', [\n  ['path', { d: 'M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10', key: '1irkt0' }],\n  ['path', { d: 'M12 8v4', key: '1got3b' }],\n  ['path', { d: 'M12 16h.01', key: '1drbdi' }],\n]);\n\nexport default ShieldAlert;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Phone\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjIgMTYuOTJ2M2EyIDIgMCAwIDEtMi4xOCAyIDE5Ljc5IDE5Ljc5IDAgMCAxLTguNjMtMy4wNyAxOS41IDE5LjUgMCAwIDEtNi02IDE5Ljc5IDE5Ljc5IDAgMCAxLTMuMDctOC42N0EyIDIgMCAwIDEgNC4xMSAyaDNhMiAyIDAgMCAxIDIgMS43MiAxMi44NCAxMi44NCAwIDAgMCAuNyAyLjgxIDIgMiAwIDAgMS0uNDUgMi4xMUw4LjA5IDkuOTFhMTYgMTYgMCAwIDAgNiA2bDEuMjctMS4yN2EyIDIgMCAwIDEgMi4xMS0uNDUgMTIuODQgMTIuODQgMCAwIDAgMi44MS43QTIgMiAwIDAgMSAyMiAxNi45MnoiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/phone\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Phone = createLucideIcon('Phone', [\n  [\n    'path',\n    {\n      d: 'M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z',\n      key: 'foiqr5',\n    },\n  ],\n]);\n\nexport default Phone;\n","'use client'\n\nimport * as React from 'react'\nimport { cn } from '@/lib/utils'\nimport { motion } from '@/components/ui/motion'\n\nexport interface BentoGridProps extends React.HTMLAttributes<HTMLDivElement> {\n  columns?: 1 | 2 | 3 | 4\n  gap?: 'sm' | 'md' | 'lg'\n}\n\nconst BentoGrid = React.forwardRef<HTMLDivElement, BentoGridProps>(\n  ({ className, columns = 4, gap = 'md', children, ...props }, ref) => {\n    const gapClass = {\n      sm: 'gap-4',\n      md: 'gap-6',\n      lg: 'gap-8',\n    }[gap]\n\n    const gridCols = {\n      1: 'grid-cols-1',\n      2: 'grid-cols-1 md:grid-cols-2',\n      3: 'grid-cols-1 md:grid-cols-2 lg:grid-cols-3',\n      4: 'grid-cols-1 md:grid-cols-2 lg:grid-cols-4',\n    }[columns]\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          'grid',\n          gridCols,\n          gapClass,\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n)\nBentoGrid.displayName = 'BentoGrid'\n\nexport interface BentoCardProps extends React.HTMLAttributes<HTMLDivElement> {\n  span?: 1 | 2 | 3 | 4\n  rowSpan?: 1 | 2 | 3\n  className?: string\n}\n\nconst BentoCard = React.forwardRef<HTMLDivElement, BentoCardProps>(\n  ({ className, span = 1, rowSpan = 1, children, ...props }, ref) => {\n    const colSpan = {\n      1: 'col-span-1',\n      2: 'col-span-1 md:col-span-2',\n      3: 'col-span-1 md:col-span-2 lg:col-span-3',\n      4: 'col-span-1 md:col-span-2 lg:col-span-4',\n    }[span]\n\n    const rowSpanClass = {\n      1: 'row-span-1',\n      2: 'row-span-1 md:row-span-2',\n      3: 'row-span-1 md:row-span-3',\n    }[rowSpan]\n\n    return (\n      <motion.div\n        ref={ref}\n        className={cn(\n          colSpan,\n          rowSpanClass,\n          className\n        )}\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ duration: 0.5, ease: [0.16, 1, 0.3, 1] }}\n        {...props}\n      >\n        {children}\n      </motion.div>\n    )\n  }\n)\nBentoCard.displayName = 'BentoCard'\n\nexport { BentoGrid, BentoCard }\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ChevronLeft\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTUgMTgtNi02IDYtNiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/chevron-left\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ChevronLeft = createLucideIcon('ChevronLeft', [\n  ['path', { d: 'm15 18-6-6 6-6', key: '1wnfg3' }],\n]);\n\nexport default ChevronLeft;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name UserCheck\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTYgMjF2LTJhNCA0IDAgMCAwLTQtNEg2YTQgNCAwIDAgMC00IDR2MiIgLz4KICA8Y2lyY2xlIGN4PSI5IiBjeT0iNyIgcj0iNCIgLz4KICA8cG9seWxpbmUgcG9pbnRzPSIxNiAxMSAxOCAxMyAyMiA5IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/user-check\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst UserCheck = createLucideIcon('UserCheck', [\n  ['path', { d: 'M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2', key: '1yyitq' }],\n  ['circle', { cx: '9', cy: '7', r: '4', key: 'nufk8' }],\n  ['polyline', { points: '16 11 18 13 22 9', key: '1pwet4' }],\n]);\n\nexport default UserCheck;\n","import { cn } from '@/lib/utils'\n\n/**\n * Composant Skeleton pour les états de chargement\n */\nexport function Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn('animate-pulse rounded-md bg-gray-200', className)}\n      {...props}\n    />\n  )\n}\n\n/**\n * Skeleton pour les cartes de statistiques\n */\nexport function StatsCardSkeleton() {\n  return (\n    <div className=\"rounded-2xl p-6 border-2 border-gray-200 bg-white\">\n      <div className=\"flex items-start justify-between mb-4\">\n        <Skeleton className=\"h-12 w-12 rounded-2xl\" />\n        <Skeleton className=\"h-6 w-20\" />\n      </div>\n      <Skeleton className=\"h-8 w-24 mb-2\" />\n      <Skeleton className=\"h-4 w-32\" />\n    </div>\n  )\n}\n\n/**\n * Skeleton pour les graphiques\n */\nexport function ChartSkeleton() {\n  return (\n    <div className=\"rounded-2xl p-6 border-2 border-gray-200 bg-white\">\n      <Skeleton className=\"h-6 w-48 mb-4\" />\n      <Skeleton className=\"h-64 w-full\" />\n    </div>\n  )\n}\n\n/**\n * Skeleton pour les listes\n */\nexport function ListSkeleton({ count = 3 }: { count?: number }) {\n  return (\n    <div className=\"space-y-3\">\n      {Array.from({ length: count }).map((_, i) => (\n        <div key={i} className=\"flex items-center gap-4 p-4 border rounded-lg\">\n          <Skeleton className=\"h-12 w-12 rounded-full\" />\n          <div className=\"flex-1 space-y-2\">\n            <Skeleton className=\"h-4 w-3/4\" />\n            <Skeleton className=\"h-3 w-1/2\" />\n          </div>\n          <Skeleton className=\"h-8 w-20\" />\n        </div>\n      ))}\n    </div>\n  )\n}\n\n/**\n * Alias pour ListSkeleton (compatibilité)\n */\nexport function SkeletonList({ count = 3 }: { count?: number }) {\n  return <ListSkeleton count={count} />\n}\n\n/**\n * Skeleton pour les grilles Bento\n */\nexport function SkeletonBentoGrid({ items = 4 }: { items?: number }) {\n  return (\n    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n      {Array.from({ length: items }).map((_, i) => (\n        <StatsCardSkeleton key={i} />\n      ))}\n    </div>\n  )\n}\n","/**\n * ErrorHandler Global - Gestion centralisée des erreurs\n * \n * Fournit :\n * - Types d'erreurs personnalisés\n * - Classification automatique des erreurs\n * - Messages utilisateur traduits\n * - Logging automatique\n * - Formatage cohérent\n */\n\nimport { logger } from '@/lib/utils/logger'\nimport type { LogContext } from '@/lib/utils/logger'\n\n// ============================================================================\n// TYPES D'ERREURS PERSONNALISÉS\n// ============================================================================\n\nexport enum ErrorCode {\n  // Erreurs d'authentification (1000-1999)\n  AUTH_REQUIRED = 'AUTH_1001',\n  AUTH_INVALID_CREDENTIALS = 'AUTH_1002',\n  AUTH_SESSION_EXPIRED = 'AUTH_1003',\n  AUTH_INSUFFICIENT_PERMISSIONS = 'AUTH_1004',\n  AUTH_2FA_REQUIRED = 'AUTH_1005',\n  AUTH_2FA_INVALID = 'AUTH_1006',\n\n  // Erreurs de validation (2000-2999)\n  VALIDATION_ERROR = 'VALID_2001',\n  VALIDATION_REQUIRED_FIELD = 'VALID_2002',\n  VALIDATION_INVALID_FORMAT = 'VALID_2003',\n  VALIDATION_UNIQUE_CONSTRAINT = 'VALID_2004',\n\n  // Erreurs de base de données (3000-3999)\n  DB_CONNECTION_ERROR = 'DB_3001',\n  DB_QUERY_ERROR = 'DB_3002',\n  DB_NOT_FOUND = 'DB_3003',\n  DB_CONSTRAINT_VIOLATION = 'DB_3004',\n  DB_FOREIGN_KEY_CONSTRAINT = 'DB_3006',\n  DB_RLS_POLICY_VIOLATION = 'DB_3005',\n\n  // Erreurs réseau/API (4000-4999)\n  NETWORK_ERROR = 'NET_4001',\n  API_TIMEOUT = 'NET_4002',\n  API_RATE_LIMIT = 'NET_4003',\n  API_SERVER_ERROR = 'NET_4004',\n  API_NOT_FOUND = 'NET_4005',\n  API_BAD_REQUEST = 'NET_4006',\n\n  // Erreurs métier (5000-5999)\n  BUSINESS_LOGIC_ERROR = 'BIZ_5001',\n  RESOURCE_LOCKED = 'BIZ_5002',\n  OPERATION_NOT_ALLOWED = 'BIZ_5003',\n  QUOTA_EXCEEDED = 'BIZ_5004',\n\n  // Erreurs système (6000-6999)\n  INTERNAL_ERROR = 'SYS_6001',\n  CONFIGURATION_ERROR = 'SYS_6002',\n  SERVICE_UNAVAILABLE = 'SYS_6003',\n}\n\nexport enum ErrorSeverity {\n  LOW = 'low',\n  MEDIUM = 'medium',\n  HIGH = 'high',\n  CRITICAL = 'critical',\n}\n\nexport interface AppErrorContext extends LogContext {\n  code?: ErrorCode\n  severity?: ErrorSeverity\n  userMessage?: string\n  retryable?: boolean\n  timestamp?: string\n}\n\n/**\n * Classe d'erreur personnalisée pour l'application\n */\nexport class AppError extends Error {\n  public readonly code: ErrorCode\n  public readonly severity: ErrorSeverity\n  public readonly userMessage: string\n  public readonly retryable: boolean\n  public readonly context: AppErrorContext\n  public readonly originalError?: Error | unknown\n\n  constructor(\n    message: string,\n    code: ErrorCode = ErrorCode.INTERNAL_ERROR,\n    severity: ErrorSeverity = ErrorSeverity.MEDIUM,\n    context: AppErrorContext = {},\n    originalError?: Error | unknown\n  ) {\n    super(message)\n    this.name = 'AppError'\n    this.code = code\n    this.severity = severity\n    this.userMessage = context.userMessage || this.getDefaultUserMessage(code)\n    this.retryable = context.retryable ?? this.isRetryable(code)\n    this.context = {\n      ...context,\n      code,\n      severity,\n      timestamp: new Date().toISOString(),\n    }\n    this.originalError = originalError\n\n    // Maintenir la stack trace\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, AppError)\n    }\n  }\n\n  /**\n   * Messages utilisateur par défaut selon le code d'erreur\n   */\n  private getDefaultUserMessage(code: ErrorCode): string {\n    const messages: Record<ErrorCode, string> = {\n      // Auth\n      [ErrorCode.AUTH_REQUIRED]: 'Vous devez être connecté pour effectuer cette action.',\n      [ErrorCode.AUTH_INVALID_CREDENTIALS]: 'Email ou mot de passe incorrect.',\n      [ErrorCode.AUTH_SESSION_EXPIRED]: 'Votre session a expiré. Veuillez vous reconnecter.',\n      [ErrorCode.AUTH_INSUFFICIENT_PERMISSIONS]: \"Vous n'avez pas les permissions nécessaires.\",\n      [ErrorCode.AUTH_2FA_REQUIRED]: 'Authentification à deux facteurs requise.',\n      [ErrorCode.AUTH_2FA_INVALID]: 'Code d\\'authentification invalide.',\n\n      // Validation\n      [ErrorCode.VALIDATION_ERROR]: 'Les données fournies ne sont pas valides.',\n      [ErrorCode.VALIDATION_REQUIRED_FIELD]: 'Certains champs obligatoires sont manquants.',\n      [ErrorCode.VALIDATION_INVALID_FORMAT]: 'Le format des données est incorrect.',\n      [ErrorCode.VALIDATION_UNIQUE_CONSTRAINT]: 'Cette valeur existe déjà.',\n\n      // Database\n      [ErrorCode.DB_CONNECTION_ERROR]: 'Impossible de se connecter à la base de données.',\n      [ErrorCode.DB_QUERY_ERROR]: 'Erreur lors de l\\'exécution de la requête.',\n      [ErrorCode.DB_NOT_FOUND]: 'Ressource introuvable.',\n      [ErrorCode.DB_CONSTRAINT_VIOLATION]: 'Cette opération viole une contrainte de la base de données.',\n      [ErrorCode.DB_FOREIGN_KEY_CONSTRAINT]: 'Cette opération viole une contrainte de clé étrangère.',\n      [ErrorCode.DB_RLS_POLICY_VIOLATION]: 'Vous n\\'avez pas accès à cette ressource.',\n\n      // Network\n      [ErrorCode.NETWORK_ERROR]: 'Erreur de connexion réseau. Vérifiez votre connexion internet.',\n      [ErrorCode.API_TIMEOUT]: 'La requête a pris trop de temps. Veuillez réessayer.',\n      [ErrorCode.API_RATE_LIMIT]: 'Trop de requêtes. Veuillez patienter quelques instants.',\n      [ErrorCode.API_SERVER_ERROR]: 'Erreur serveur. Veuillez réessayer plus tard.',\n      [ErrorCode.API_NOT_FOUND]: 'Ressource introuvable.',\n      [ErrorCode.API_BAD_REQUEST]: 'Requête invalide.',\n\n      // Business\n      [ErrorCode.BUSINESS_LOGIC_ERROR]: 'Cette opération n\\'est pas autorisée dans le contexte actuel.',\n      [ErrorCode.RESOURCE_LOCKED]: 'Cette ressource est actuellement verrouillée.',\n      [ErrorCode.OPERATION_NOT_ALLOWED]: 'Cette opération n\\'est pas autorisée.',\n      [ErrorCode.QUOTA_EXCEEDED]: 'Vous avez atteint la limite autorisée.',\n\n      // System\n      [ErrorCode.INTERNAL_ERROR]: 'Une erreur interne est survenue. Veuillez réessayer.',\n      [ErrorCode.CONFIGURATION_ERROR]: 'Erreur de configuration du système.',\n      [ErrorCode.SERVICE_UNAVAILABLE]: 'Service temporairement indisponible.',\n    }\n\n    return messages[code] || 'Une erreur inattendue est survenue.'\n  }\n\n  /**\n   * Détermine si une erreur est retryable selon son code\n   */\n  private isRetryable(code: ErrorCode): boolean {\n    const retryableCodes = [\n      ErrorCode.NETWORK_ERROR,\n      ErrorCode.API_TIMEOUT,\n      ErrorCode.API_SERVER_ERROR,\n      ErrorCode.DB_CONNECTION_ERROR,\n      ErrorCode.SERVICE_UNAVAILABLE,\n    ]\n    return retryableCodes.includes(code)\n  }\n\n  /**\n   * Convertit l'erreur en objet JSON pour logging\n   */\n  toJSON() {\n    return {\n      name: this.name,\n      message: this.message,\n      code: this.code,\n      severity: this.severity,\n      userMessage: this.userMessage,\n      retryable: this.retryable,\n      context: this.context,\n      stack: this.stack,\n      originalError: this.originalError instanceof Error\n        ? {\n            name: this.originalError.name,\n            message: this.originalError.message,\n            stack: this.originalError.stack,\n          }\n        : this.originalError,\n    }\n  }\n}\n\n// ============================================================================\n// ERROR HANDLER PRINCIPAL\n// ============================================================================\n\nexport class ErrorHandler {\n  /**\n   * Analyse et classe une erreur inconnue\n   */\n  handleError(error: unknown, context: AppErrorContext = {}): AppError {\n    // Si c'est déjà une AppError, la retourner telle quelle\n    if (error instanceof AppError) {\n      this.logError(error)\n      return error\n    }\n\n    // Si c'est une Error standard, la convertir\n    if (error instanceof Error) {\n      return this.handleStandardError(error, context)\n    }\n\n    // Si c'est une erreur Supabase\n    if (this.isSupabaseError(error)) {\n      return this.handleSupabaseError(error, context)\n    }\n\n    // Erreur inconnue\n    const appError = new AppError(\n      'Une erreur inattendue est survenue.',\n      ErrorCode.INTERNAL_ERROR,\n      ErrorSeverity.HIGH,\n      context,\n      error\n    )\n    this.logError(appError)\n    return appError\n  }\n\n  /**\n   * Gère les erreurs Error standard\n   */\n  private handleStandardError(error: Error, context: AppErrorContext): AppError {\n    const message = error.message.toLowerCase()\n\n    // Détection par message\n    let code = ErrorCode.INTERNAL_ERROR\n    let severity = ErrorSeverity.MEDIUM\n\n    if (message.includes('network') || message.includes('fetch')) {\n      code = ErrorCode.NETWORK_ERROR\n      severity = ErrorSeverity.MEDIUM\n    } else if (message.includes('timeout')) {\n      code = ErrorCode.API_TIMEOUT\n      severity = ErrorSeverity.MEDIUM\n    } else if (message.includes('unauthorized') || message.includes('401')) {\n      code = ErrorCode.AUTH_REQUIRED\n      severity = ErrorSeverity.HIGH\n    } else if (message.includes('forbidden') || message.includes('403')) {\n      code = ErrorCode.AUTH_INSUFFICIENT_PERMISSIONS\n      severity = ErrorSeverity.HIGH\n    } else if (message.includes('not found') || message.includes('404')) {\n      code = ErrorCode.DB_NOT_FOUND\n      severity = ErrorSeverity.LOW\n    } else if (message.includes('validation') || message.includes('invalid')) {\n      code = ErrorCode.VALIDATION_ERROR\n      severity = ErrorSeverity.LOW\n    }\n\n    const appError = new AppError(error.message, code, severity, context, error)\n    this.logError(appError)\n    return appError\n  }\n\n  /**\n   * Gère les erreurs Supabase\n   */\n  private handleSupabaseError(error: any, context: AppErrorContext): AppError {\n    const code = error.code || error.status\n    const message = error.message || 'Erreur Supabase'\n\n    // Si un code d'erreur est fourni dans le contexte, l'utiliser en priorité\n    let errorCode = context.code || ErrorCode.DB_QUERY_ERROR\n    let severity = ErrorSeverity.MEDIUM\n\n    // Classification par code Supabase (seulement si pas de code dans le contexte)\n    if (!context.code) {\n      switch (code) {\n        case 'PGRST116':\n        case '42P01':\n          errorCode = ErrorCode.DB_NOT_FOUND\n          severity = ErrorSeverity.LOW\n          break\n        case '42501':\n          errorCode = ErrorCode.DB_RLS_POLICY_VIOLATION\n          severity = ErrorSeverity.HIGH\n          break\n        case '23505':\n          errorCode = ErrorCode.VALIDATION_UNIQUE_CONSTRAINT\n          severity = ErrorSeverity.LOW\n          break\n        case '23503':\n          errorCode = ErrorCode.DB_CONSTRAINT_VIOLATION\n          severity = ErrorSeverity.MEDIUM\n          break\n        case 'PGRST301':\n        case '400':\n          errorCode = ErrorCode.API_BAD_REQUEST\n          severity = ErrorSeverity.LOW\n          break\n        case '401':\n          errorCode = ErrorCode.AUTH_REQUIRED\n          severity = ErrorSeverity.HIGH\n          break\n        case '403':\n          errorCode = ErrorCode.AUTH_INSUFFICIENT_PERMISSIONS\n          severity = ErrorSeverity.HIGH\n          break\n        case '404':\n          errorCode = ErrorCode.API_NOT_FOUND\n          severity = ErrorSeverity.LOW\n          break\n        case '500':\n          errorCode = ErrorCode.API_SERVER_ERROR\n          severity = ErrorSeverity.HIGH\n          break\n      }\n    }\n\n    // Ajuster la sévérité selon le code d'erreur\n    if (errorCode === ErrorCode.DB_FOREIGN_KEY_CONSTRAINT) {\n      severity = ErrorSeverity.MEDIUM\n    }\n\n    const appError = new AppError(message, errorCode, severity, context, error)\n    this.logError(appError)\n    return appError\n  }\n\n  /**\n   * Vérifie si une erreur est une erreur Supabase\n   */\n  private isSupabaseError(error: any): boolean {\n    return (\n      error &&\n      (error.code || error.status || error.message) &&\n      (typeof error.code === 'string' || typeof error.status === 'number')\n    )\n  }\n\n  /**\n   * Log l'erreur selon sa sévérité\n   */\n  private logError(error: AppError) {\n    const logContext: LogContext = {\n      ...error.context,\n      code: error.code,\n      severity: error.severity,\n      retryable: error.retryable,\n    }\n\n    switch (error.severity) {\n      case ErrorSeverity.CRITICAL:\n      case ErrorSeverity.HIGH:\n        logger.error(error.message, error.originalError || error, logContext)\n        break\n      case ErrorSeverity.MEDIUM:\n        logger.warn(error.message, logContext)\n        break\n      case ErrorSeverity.LOW:\n        logger.info(`Error: ${error.message}`, logContext)\n        break\n    }\n  }\n\n  /**\n   * Crée une erreur de validation\n   */\n  createValidationError(message: string, field?: string): AppError {\n    return new AppError(\n      message,\n      ErrorCode.VALIDATION_ERROR,\n      ErrorSeverity.LOW,\n      { field, userMessage: message }\n    )\n  }\n\n  /**\n   * Crée une erreur d'authentification\n   */\n  createAuthError(code: ErrorCode, message?: string): AppError {\n    return new AppError(\n      message || 'Erreur d\\'authentification',\n      code,\n      ErrorSeverity.HIGH\n    )\n  }\n\n  /**\n   * Crée une erreur de base de données\n   */\n  createDatabaseError(message: string, originalError?: unknown): AppError {\n    return new AppError(\n      message,\n      ErrorCode.DB_QUERY_ERROR,\n      ErrorSeverity.MEDIUM,\n      {},\n      originalError\n    )\n  }\n\n  /**\n   * Crée une erreur \"Not Found\"\n   */\n  createNotFoundError(message: string, context?: AppErrorContext): AppError {\n    return new AppError(\n      message,\n      ErrorCode.DB_NOT_FOUND,\n      ErrorSeverity.LOW,\n      context\n    )\n  }\n}\n\n// Export d'une instance singleton\nexport const errorHandler = new ErrorHandler()\n\n// Export de fonctions helper pour faciliter l'utilisation\nexport const handleError = (error: unknown, context?: AppErrorContext) =>\n  errorHandler.handleError(error, context)\n\nexport const createValidationError = (message: string, field?: string) =>\n  errorHandler.createValidationError(message, field)\n\nexport const createAuthError = (code: ErrorCode, message?: string) =>\n  errorHandler.createAuthError(code, message)\n\nexport const createDatabaseError = (message: string, originalError?: unknown) =>\n  errorHandler.createDatabaseError(message, originalError)\n\nexport const createNotFoundError = (message: string, context?: AppErrorContext) =>\n  errorHandler.createNotFoundError(message, context)\n\n// Alias pour NotFoundError (compatibilité)\nexport const NotFoundError = createNotFoundError\n\n","/**\n * Helpers réutilisables pour les requêtes Supabase\n * \n * Réduit la duplication de code dans les services\n */\n\nimport { SupabaseClient } from '@supabase/supabase-js'\nimport { errorHandler, AppError, ErrorCode } from '@/lib/errors'\n\nexport interface GetAllByOrganizationOptions {\n  filters?: Record<string, unknown>\n  orderBy?: { column: string; ascending?: boolean }\n  select?: string\n  search?: { field: string; value: string }\n}\n\n/**\n * Récupère tous les enregistrements d'une organisation avec options\n */\nexport async function getAllByOrganization<T>(\n  supabase: SupabaseClient,\n  table: string,\n  organizationId: string,\n  options?: GetAllByOrganizationOptions\n): Promise<T[]> {\n  try {\n    let query = supabase\n      .from(table)\n      .select(options?.select || '*')\n      .eq('organization_id', organizationId)\n\n    // Appliquer les filtres\n    if (options?.filters) {\n      Object.entries(options.filters).forEach(([key, value]) => {\n        if (value !== undefined && value !== null) {\n          query = query.eq(key, value)\n        }\n      })\n    }\n\n    // Appliquer la recherche\n    if (options?.search) {\n      query = query.ilike(options.search.field, `%${options.search.value}%`)\n    }\n\n    // Appliquer le tri\n    if (options?.orderBy) {\n      query = query.order(options.orderBy.column, {\n        ascending: options.orderBy.ascending ?? false,\n      })\n    } else {\n      query = query.order('created_at', { ascending: false })\n    }\n\n    const { data, error } = await query\n\n    if (error) {\n      throw errorHandler.handleError(error, {\n        organizationId,\n        operation: 'getAllByOrganization',\n        table,\n      })\n    }\n\n    return (data || []) as T[]\n  } catch (error) {\n    if (error instanceof AppError) {\n      throw error\n    }\n    throw errorHandler.handleError(error, {\n      organizationId,\n      operation: 'getAllByOrganization',\n      table,\n    })\n  }\n}\n\n/**\n * Récupère un enregistrement par ID avec gestion d'erreur\n */\nexport async function getById<T>(\n  supabase: SupabaseClient,\n  table: string,\n  id: string,\n  select?: string\n): Promise<T> {\n  try {\n    const { data, error } = await supabase\n      .from(table)\n      .select(select || '*')\n      .eq('id', id)\n      .single()\n\n    if (error) {\n      if (error.code === 'PGRST116' || error.code === '42P01') {\n        throw errorHandler.handleError(error, {\n          code: ErrorCode.DB_NOT_FOUND,\n          operation: 'getById',\n          id,\n          table,\n        })\n      }\n      throw errorHandler.handleError(error, {\n        operation: 'getById',\n        id,\n        table,\n      })\n    }\n\n    if (!data) {\n      throw errorHandler.createDatabaseError(\n        `Enregistrement avec l'ID ${id} introuvable dans ${table}`,\n        { id, table }\n      )\n    }\n\n    return data as T\n  } catch (error) {\n    if (error instanceof AppError) {\n      throw error\n    }\n    throw errorHandler.handleError(error, {\n      operation: 'getById',\n      id,\n      table,\n    })\n  }\n}\n\n","/**\n * Validateurs réutilisables pour les données\n * \n * Réduit la duplication de code pour la validation\n */\n\nimport { errorHandler } from '@/lib/errors'\n\n/**\n * Valide que les champs requis sont présents\n */\nexport function validateRequired<T extends Record<string, unknown>>(\n  data: T,\n  fields: (keyof T)[]\n): void {\n  for (const field of fields) {\n    if (!data[field]) {\n      throw errorHandler.createValidationError(\n        `Le champ ${String(field)} est obligatoire`,\n        String(field)\n      )\n    }\n  }\n}\n\n/**\n * Valide qu'un email est valide\n */\nexport function validateEmail(email: string): void {\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\n  if (!emailRegex.test(email)) {\n    throw errorHandler.createValidationError(\n      'Format d\\'email invalide',\n      'email'\n    )\n  }\n}\n\n/**\n * Valide qu'un montant est positif\n */\nexport function validatePositiveAmount(amount: number, fieldName = 'amount'): void {\n  if (amount <= 0) {\n    throw errorHandler.createValidationError(\n      'Le montant doit être supérieur à 0',\n      fieldName\n    )\n  }\n}\n\n/**\n * Valide qu'une date est valide\n */\nexport function validateDate(date: string, fieldName = 'date'): void {\n  const dateObj = new Date(date)\n  if (isNaN(dateObj.getTime())) {\n    throw errorHandler.createValidationError(\n      'Format de date invalide',\n      fieldName\n    )\n  }\n}\n\n/**\n * Valide qu'une date est dans le futur\n */\nexport function validateFutureDate(date: string, fieldName = 'date'): void {\n  validateDate(date, fieldName)\n  const dateObj = new Date(date)\n  const now = new Date()\n  if (dateObj <= now) {\n    throw errorHandler.createValidationError(\n      'La date doit être dans le futur',\n      fieldName\n    )\n  }\n}\n\n\n\n\n\n","import { createClient } from '@/lib/supabase/client'\nimport type { SupabaseClient } from '@supabase/supabase-js'\nimport { Database } from '@/types/database.types'\nimport type { TableRow, TableInsert, TableUpdate, FlexibleInsert, FlexibleUpdate } from '@/lib/types/supabase-helpers'\nimport { errorHandler, ErrorCode, AppError } from '@/lib/errors'\nimport { logger } from '@/lib/utils/logger'\nimport { getAllByOrganization, getById } from '@/lib/utils/supabase-helpers'\nimport { generateUniqueNumber } from '@/lib/utils/number-generator'\nimport { validateRequired } from '@/lib/utils/validators'\n\ntype Student = TableRow<'students'>\ntype StudentInsert = TableInsert<'students'>\ntype StudentUpdate = TableUpdate<'students'>\n\n/**\n * Service de gestion des étudiants\n * \n * Fournit des méthodes pour CRUD des étudiants avec :\n * - Pagination côté serveur\n * - Recherche textuelle (nom, prénom, numéro, email)\n * - Filtrage par classe et statut\n * - Génération automatique de numéros d'étudiant uniques\n */\nexport class StudentService {\n  private supabase: SupabaseClient<Database>\n\n\n  constructor(supabaseClient?: SupabaseClient<Database>) {\n\n    this.supabase = supabaseClient || createClient()\n\n  }\n\n  /**\n   * Récupère tous les étudiants d'une organisation avec pagination\n   * \n   * @param organizationId - ID de l'organisation\n   * @param filters - Filtres optionnels (classe, statut, recherche, pagination)\n   * @returns Objet avec data, total, page, limit, totalPages\n   */\n  async getAll(organizationId: string, filters?: {\n    classId?: string\n    status?: Student['status']\n    search?: string\n    page?: number\n    limit?: number\n  }) {\n    try {\n      const page = filters?.page || 1\n      const limit = filters?.limit || 50\n      const offset = (page - 1) * limit\n\n      // Pour la recherche, on doit utiliser une requête personnalisée car elle utilise `or`\n      if (filters?.search) {\n        let query = this.supabase\n          .from('students')\n          .select('*, classes(id, name, level)', { count: 'exact' })\n          .eq('organization_id', organizationId)\n          .or(`first_name.ilike.%${filters.search}%,last_name.ilike.%${filters.search}%,student_number.ilike.%${filters.search}%`)\n\n        if (filters?.classId) query = query.eq('class_id', filters.classId)\n        if (filters?.status) query = query.eq('status', filters.status)\n\n        const { data, error, count } = await query\n          .order('last_name', { ascending: true })\n          .range(offset, offset + limit - 1)\n\n        if (error) {\n          throw errorHandler.handleError(error, {\n            organizationId,\n            operation: 'getAll',\n            filters,\n          })\n        }\n\n        return {\n          data: data || [],\n          total: count || 0,\n          page,\n          limit,\n          totalPages: Math.ceil((count || 0) / limit),\n        }\n      }\n\n      // Sinon, utiliser une requête avec pagination\n      let query = this.supabase\n        .from('students')\n        .select('*, classes(id, name, level)', { count: 'exact' })\n        .eq('organization_id', organizationId)\n\n      if (filters?.classId) query = query.eq('class_id', filters.classId)\n      if (filters?.status) query = query.eq('status', filters.status)\n\n      const { data, error, count } = await query\n        .order('last_name', { ascending: true })\n        .range(offset, offset + limit - 1)\n\n      if (error) {\n        throw errorHandler.handleError(error, {\n          organizationId,\n          operation: 'getAll',\n          filters,\n        })\n      }\n\n      return {\n        data: data || [],\n        total: count || 0,\n        page,\n        limit,\n        totalPages: Math.ceil((count || 0) / limit),\n      }\n    } catch (error) {\n      if (error instanceof AppError) {\n        throw error\n      }\n      throw errorHandler.handleError(error, {\n        organizationId,\n        operation: 'getAll',\n      })\n    }\n  }\n\n  /**\n   * Récupère un étudiant par son ID\n   */\n  async getById(id: string) {\n    try {\n      // Utiliser le helper pour réduire la duplication\n      return getById<Student>(\n        this.supabase,\n        'students',\n        id,\n        '*, classes(id, name, level)'\n      )\n    } catch (error) {\n      if (error instanceof AppError) {\n        throw error\n      }\n      throw errorHandler.handleError(error, {\n        operation: 'getById',\n        id,\n      })\n    }\n  }\n\n  /**\n   * Récupère un étudiant par son numéro\n   */\n  async getByNumber(organizationId: string, studentNumber: string) {\n    try {\n      const { data, error } = await this.supabase\n        .from('students')\n        .select('*')\n        .eq('organization_id', organizationId)\n        .eq('student_number', studentNumber)\n        .single()\n\n      if (error) {\n        if (error.code === 'PGRST116' || error.code === '42P01') {\n          throw errorHandler.handleError(error, {\n            code: ErrorCode.DB_NOT_FOUND,\n            operation: 'getByNumber',\n            organizationId,\n            studentNumber,\n          })\n        }\n        throw errorHandler.handleError(error, {\n          operation: 'getByNumber',\n          organizationId,\n          studentNumber,\n        })\n      }\n\n      return data\n    } catch (error) {\n      if (error instanceof AppError) {\n        throw error\n      }\n      throw errorHandler.handleError(error, {\n        operation: 'getByNumber',\n        organizationId,\n        studentNumber,\n      })\n    }\n  }\n\n  /**\n   * Crée un nouvel étudiant\n   */\n  async create(student: FlexibleInsert<'students'>) {\n    try {\n      // Validation avec helper\n      validateRequired(student, ['first_name', 'last_name', 'organization_id'])\n\n      // Générer un numéro d'étudiant si non fourni\n      let studentNumber = student.student_number\n      if (!studentNumber || studentNumber.trim() === '') {\n        // Récupérer le code de l'organisation\n        const orgId = student.organization_id\n        if (!orgId) throw new Error('organization_id is required')\n        \n        const { data: org } = await this.supabase\n          .from('organizations')\n          .select('code')\n          .eq('id', orgId)\n          .single()\n\n        const orgCode = org?.code || 'ORG'\n        const year = new Date().getFullYear().toString().slice(-2)\n\n        // Générer le numéro avec le helper\n        studentNumber = await generateUniqueNumber(\n          this.supabase,\n          'students',\n          orgId,\n          {\n            prefix: 'EDU',\n            orgCode,\n            year,\n            padding: 6,\n            fieldName: 'student_number',\n          }\n        )\n      }\n\n      const studentData = {\n        ...student,\n        student_number: studentNumber,\n      } as StudentInsert\n\n      const { data, error } = await this.supabase\n        .from('students')\n        .insert(studentData)\n        .select()\n        .single()\n\n      if (error) {\n        if (error.code === '23505') {\n          throw errorHandler.handleError(error, {\n            code: ErrorCode.VALIDATION_UNIQUE_CONSTRAINT,\n            operation: 'create',\n            field: 'student_number',\n          })\n        }\n        if (error.code === '42501') {\n          throw errorHandler.handleError(error, {\n            code: ErrorCode.DB_RLS_POLICY_VIOLATION,\n            operation: 'create',\n          })\n        }\n        throw errorHandler.handleError(error, {\n          operation: 'create',\n          student,\n        })\n      }\n\n      logger.info('Étudiant créé avec succès', {\n        id: data?.id,\n        organizationId: student.organization_id || undefined,\n        studentNumber: data?.student_number,\n      })\n\n      return data\n    } catch (error) {\n      if (error instanceof AppError) {\n        throw error\n      }\n      throw errorHandler.handleError(error, {\n        operation: 'create',\n        student,\n      })\n    }\n  }\n\n  /**\n   * Met à jour un étudiant\n   */\n  async update(id: string, updates: FlexibleUpdate<'students'>) {\n    try {\n      // Nettoyer les valeurs avant la mise à jour\n      const cleanUpdates = { ...updates }\n      \n      // Convertir les chaînes vides en null pour class_id (pour éviter les erreurs de contrainte FK)\n      if ('class_id' in cleanUpdates) {\n        if (cleanUpdates.class_id === '' || !cleanUpdates.class_id) {\n          cleanUpdates.class_id = null\n        } else {\n          // Vérifier si class_id existe dans la table classes\n          // Si ce n'est pas le cas, cela pourrait être une session ID, on le met à null\n          const { data: classExists, error: classError } = await this.supabase\n            .from('classes')\n            .select('id')\n            .eq('id', cleanUpdates.class_id)\n            .maybeSingle()\n          \n          // Si la classe n'existe pas, on met class_id à null\n          // (car class_id ne devrait pas référencer une session)\n          if (!classExists && !classError) {\n            cleanUpdates.class_id = null\n          }\n        }\n      }\n\n      const { data, error } = await this.supabase\n        .from('students')\n        .update(cleanUpdates as StudentUpdate)\n        .eq('id', id)\n        .select()\n        .single()\n\n      if (error) {\n        if (error.code === 'PGRST116' || error.code === '42P01') {\n          throw errorHandler.handleError(error, {\n            code: ErrorCode.DB_NOT_FOUND,\n            operation: 'update',\n            id,\n          })\n        }\n        if (error.code === '42501') {\n          throw errorHandler.handleError(error, {\n            code: ErrorCode.DB_RLS_POLICY_VIOLATION,\n            operation: 'update',\n            id,\n          })\n        }\n        throw errorHandler.handleError(error, {\n          operation: 'update',\n          id,\n          updates,\n        })\n      }\n\n      if (!data) {\n        throw errorHandler.createDatabaseError(\n          `Étudiant avec l'ID ${id} introuvable pour la mise à jour`,\n          { id }\n        )\n      }\n\n      logger.info('Étudiant mis à jour avec succès', {\n        id,\n        updates,\n      })\n\n      return data\n    } catch (error) {\n      if (error instanceof AppError) {\n        throw error\n      }\n      throw errorHandler.handleError(error, {\n        operation: 'update',\n        id,\n        updates,\n      })\n    }\n  }\n\n  /**\n   * Supprime un étudiant (soft delete en changeant le statut)\n   */\n  async delete(id: string) {\n    return this.update(id, { status: 'inactive' })\n  }\n\n  /**\n   * Importe plusieurs étudiants depuis un fichier CSV/Excel\n   */\n  async import(organizationId: string, students: FlexibleInsert<'students'>[]) {\n    try {\n      if (!students || students.length === 0) {\n        throw errorHandler.createValidationError(\n          'Aucun étudiant à importer',\n          'students'\n        )\n      }\n\n      // Récupérer le code de l'organisation pour générer les numéros\n      const { data: org } = await this.supabase\n        .from('organizations')\n        .select('code')\n        .eq('id', organizationId)\n        .single()\n\n      const orgCode = org?.code || 'ORG'\n      const year = new Date().getFullYear().toString().slice(-2)\n\n      // Générer les numéros d'étudiants pour ceux qui n'en ont pas\n      const studentsWithNumbers = await Promise.all(\n        students.map(async (student) => {\n          if (student.student_number && student.student_number.trim() !== '') {\n            return student\n          }\n\n          // Générer un numéro unique\n          const studentNumber = await generateUniqueNumber(\n            this.supabase,\n            'students',\n            organizationId,\n            {\n              prefix: 'EDU',\n              orgCode,\n              year,\n              padding: 6,\n              fieldName: 'student_number',\n            }\n          )\n\n          return {\n            ...student,\n            student_number: studentNumber,\n          }\n        })\n      )\n\n      const { data, error } = await this.supabase\n        .from('students')\n        .insert(studentsWithNumbers as StudentInsert[])\n        .select()\n\n      if (error) {\n        if (error.code === '23505') {\n          throw errorHandler.handleError(error, {\n            code: ErrorCode.VALIDATION_UNIQUE_CONSTRAINT,\n            operation: 'import',\n            field: 'student_number',\n          })\n        }\n        throw errorHandler.handleError(error, {\n          operation: 'import',\n          organizationId,\n          count: students.length,\n        })\n      }\n\n      logger.info('Étudiants importés avec succès', {\n        organizationId,\n        count: data?.length || 0,\n      })\n\n      return data || []\n    } catch (error) {\n      if (error instanceof AppError) {\n        throw error\n      }\n      throw errorHandler.handleError(error, {\n        operation: 'import',\n        organizationId,\n      })\n    }\n  }\n}\n\nexport const studentService = new StudentService()\n\n","/**\n * Générateur de numéros uniques pour factures, étudiants, etc.\n * \n * Réduit la duplication de code pour la génération de numéros\n */\n\nimport { SupabaseClient } from '@supabase/supabase-js'\nimport { errorHandler } from '@/lib/errors'\n\nexport interface GenerateUniqueNumberOptions {\n  prefix: string\n  orgCode: string\n  year?: string\n  padding?: number\n  fieldName?: string\n}\n\n/**\n * Génère un numéro unique pour une table\n */\nexport async function generateUniqueNumber(\n  supabase: SupabaseClient,\n  table: string,\n  organizationId: string,\n  options: GenerateUniqueNumberOptions\n): Promise<string> {\n  try {\n    const year = options.year || new Date().getFullYear().toString().slice(-2)\n    const padding = options.padding || 6\n    const fieldName = options.fieldName || 'number'\n    const pattern = `${options.prefix}-${options.orgCode}-${year}-%`\n\n    const { data: lastRecord, error } = await supabase\n      .from(table)\n      .select(fieldName)\n      .eq('organization_id', organizationId)\n      .like(fieldName, pattern)\n      .order(fieldName, { ascending: false })\n      .limit(1)\n      .maybeSingle()\n\n    if (error && error.code !== 'PGRST116' && error.code !== '42P01') {\n      throw errorHandler.handleError(error, {\n        operation: 'generateUniqueNumber',\n        table,\n        organizationId,\n      })\n    }\n\n    let sequence = 1\n    if (lastRecord && (lastRecord as any)[fieldName]) {\n      const parts = String((lastRecord as any)[fieldName]).split('-')\n      const lastSequence = parseInt(parts[parts.length - 1] || '0', 10)\n      sequence = lastSequence + 1\n    }\n\n    return `${options.prefix}-${options.orgCode}-${year}-${String(sequence).padStart(padding, '0')}`\n  } catch (error) {\n    throw errorHandler.handleError(error, {\n      operation: 'generateUniqueNumber',\n      table,\n      organizationId,\n    })\n  }\n}\n\n\n\n\n\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Link\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTAgMTNhNSA1IDAgMCAwIDcuNTQuNTRsMy0zYTUgNSAwIDAgMC03LjA3LTcuMDdsLTEuNzIgMS43MSIgLz4KICA8cGF0aCBkPSJNMTQgMTFhNSA1IDAgMCAwLTcuNTQtLjU0bC0zIDNhNSA1IDAgMCAwIDcuMDcgNy4wN2wxLjcxLTEuNzEiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/link\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Link = createLucideIcon('Link', [\n  ['path', { d: 'M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71', key: '1cjeqo' }],\n  ['path', { d: 'M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71', key: '19qd67' }],\n]);\n\nexport default Link;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ArrowUpRight\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNyA3aDEwdjEwIiAvPgogIDxwYXRoIGQ9Ik03IDE3IDE3IDciIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/arrow-up-right\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowUpRight = createLucideIcon('ArrowUpRight', [\n  ['path', { d: 'M7 7h10v10', key: '1tivn9' }],\n  ['path', { d: 'M7 17 17 7', key: '1vkiza' }],\n]);\n\nexport default ArrowUpRight;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name SlidersHorizontal\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8bGluZSB4MT0iMjEiIHgyPSIxNCIgeTE9IjQiIHkyPSI0IiAvPgogIDxsaW5lIHgxPSIxMCIgeDI9IjMiIHkxPSI0IiB5Mj0iNCIgLz4KICA8bGluZSB4MT0iMjEiIHgyPSIxMiIgeTE9IjEyIiB5Mj0iMTIiIC8+CiAgPGxpbmUgeDE9IjgiIHgyPSIzIiB5MT0iMTIiIHkyPSIxMiIgLz4KICA8bGluZSB4MT0iMjEiIHgyPSIxNiIgeTE9IjIwIiB5Mj0iMjAiIC8+CiAgPGxpbmUgeDE9IjEyIiB4Mj0iMyIgeTE9IjIwIiB5Mj0iMjAiIC8+CiAgPGxpbmUgeDE9IjE0IiB4Mj0iMTQiIHkxPSIyIiB5Mj0iNiIgLz4KICA8bGluZSB4MT0iOCIgeDI9IjgiIHkxPSIxMCIgeTI9IjE0IiAvPgogIDxsaW5lIHgxPSIxNiIgeDI9IjE2IiB5MT0iMTgiIHkyPSIyMiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/sliders-horizontal\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst SlidersHorizontal = createLucideIcon('SlidersHorizontal', [\n  ['line', { x1: '21', x2: '14', y1: '4', y2: '4', key: 'obuewd' }],\n  ['line', { x1: '10', x2: '3', y1: '4', y2: '4', key: '1q6298' }],\n  ['line', { x1: '21', x2: '12', y1: '12', y2: '12', key: '1iu8h1' }],\n  ['line', { x1: '8', x2: '3', y1: '12', y2: '12', key: 'ntss68' }],\n  ['line', { x1: '21', x2: '16', y1: '20', y2: '20', key: '14d8ph' }],\n  ['line', { x1: '12', x2: '3', y1: '20', y2: '20', key: 'm0wm8r' }],\n  ['line', { x1: '14', x2: '14', y1: '2', y2: '6', key: '14e1ph' }],\n  ['line', { x1: '8', x2: '8', y1: '10', y2: '14', key: '1i6ji0' }],\n  ['line', { x1: '16', x2: '16', y1: '18', y2: '22', key: '1lctlv' }],\n]);\n\nexport default SlidersHorizontal;\n","/**\n * Service pour gérer l'historique des exports\n *\n * NOTE: La table 'export_history' n'existe pas encore dans Supabase.\n * Les types sont définis manuellement ici jusqu'à ce que la table soit créée\n * et les types régénérés avec: supabase gen types typescript\n */\n\nimport { createClient } from '@/lib/supabase/client'\nimport type { SupabaseClient } from '@supabase/supabase-js'\n\n// Types définis manuellement car la table n'existe pas encore dans database.types.ts\n// TODO: Supprimer ces définitions après avoir créé la table et régénéré les types\nexport type ExportType = 'excel' | 'csv' | 'pdf'\nexport type EntityType = 'students' | 'documents' | 'payments' | 'dashboard_report' | 'attendance_report' | 'other'\n\nexport interface ExportHistory {\n  id: string\n  organization_id: string\n  user_id: string\n  export_type: ExportType\n  entity_type: EntityType\n  filename: string\n  record_count: number\n  file_size_bytes: number | null\n  filters: string | null\n  created_at: string\n}\n\ntype ExportHistoryInsert = Omit<ExportHistory, 'id' | 'created_at'>\n\nexport interface ExportHistoryWithUser extends ExportHistory {\n  users?: {\n    full_name: string | null\n    email: string\n  } | null\n}\n\nexport interface CreateExportHistoryParams {\n  organizationId: string\n  userId: string\n  exportType: ExportType\n  entityType: EntityType\n  filename: string\n  recordCount?: number\n  fileSizeBytes?: number\n  filters?: Record<string, any>\n}\n\nexport class ExportHistoryService {\n  private supabase: SupabaseClient<any>\n\n\n  constructor(supabaseClient?: SupabaseClient<any>) {\n\n    this.supabase = supabaseClient || createClient()\n\n  }\n\n  /**\n   * Enregistre un export dans l'historique\n   * Retourne null si la table n'existe pas (non bloquant)\n   */\n  async create(params: CreateExportHistoryParams): Promise<ExportHistory | null> {\n    try {\n      const { data, error } = await this.supabase\n        .from('export_history')\n        .insert({\n          organization_id: params.organizationId,\n          user_id: params.userId,\n          export_type: params.exportType,\n          entity_type: params.entityType,\n          filename: params.filename,\n          record_count: params.recordCount || 0,\n          file_size_bytes: params.fileSizeBytes,\n          filters: params.filters ? JSON.stringify(params.filters) : null,\n        })\n        .select()\n        .single()\n\n      if (error) {\n        // Si la table n'existe pas, retourner null silencieusement\n        if (error.code === 'PGRST205' || error.message?.includes('Could not find the table')) {\n          return null\n        }\n        throw error\n      }\n      return data\n    } catch (error: any) {\n      // Si la table n'existe pas, retourner null silencieusement\n      if (error?.code === 'PGRST205' || error?.message?.includes('Could not find the table')) {\n        return null\n      }\n      throw error\n    }\n  }\n\n  /**\n   * Récupère l'historique des exports d'une organisation\n   */\n  async getByOrganization(\n    organizationId: string,\n    filters?: {\n      userId?: string\n      exportType?: ExportType\n      entityType?: EntityType\n      page?: number\n      limit?: number\n    }\n  ) {\n    try {\n      const page = filters?.page || 1\n      const limit = filters?.limit || 50\n      const offset = (page - 1) * limit\n\n      let query = this.supabase\n        .from('export_history')\n        .select('*, users(full_name, email)', { count: 'exact' })\n        .eq('organization_id', organizationId)\n        .order('created_at', { ascending: false })\n\n      if (filters?.userId) {\n        query = query.eq('user_id', filters.userId)\n      }\n\n      if (filters?.exportType) {\n        query = query.eq('export_type', filters.exportType)\n      }\n\n      if (filters?.entityType) {\n        query = query.eq('entity_type', filters.entityType)\n      }\n\n      const { data, error, count } = await query.range(offset, offset + limit - 1)\n\n      if (error) {\n        // Si la table n'existe pas encore ou erreur 400/404, retourner un résultat vide\n        if (\n          error.code === 'PGRST116' ||\n          error.code === 'PGRST200' ||\n          error.code === '42P01' ||\n          error.code === 'PGRST301' ||\n          (error as any).status === 400 ||\n          (error as any).status === 404 ||\n          error.code === '400' ||\n          error.code === '404' ||\n          error.message?.includes('relation') ||\n          error.message?.includes('does not exist')\n        ) {\n          return {\n            data: [],\n            total: 0,\n            page,\n            limit,\n            totalPages: 0,\n          }\n        }\n        throw error\n      }\n\n      return {\n        data: (data || []) as ExportHistoryWithUser[],\n        total: count || 0,\n        page,\n        limit,\n        totalPages: Math.ceil((count || 0) / limit),\n      }\n    } catch (error: any) {\n      // Gérer les erreurs de table inexistante\n      if (\n        error?.code === 'PGRST116' ||\n        error?.code === 'PGRST200' ||\n        error?.code === '42P01' ||\n        error?.code === 'PGRST301' ||\n        error?.status === 400 ||\n        error?.status === 404 ||\n        error?.code === '400' ||\n        error?.code === '404' ||\n        error?.message?.includes('relation') ||\n        error?.message?.includes('does not exist')\n      ) {\n        return {\n          data: [],\n          total: 0,\n          page: filters?.page || 1,\n          limit: filters?.limit || 50,\n          totalPages: 0,\n        }\n      }\n      throw error\n    }\n  }\n\n  /**\n   * Récupère les statistiques d'export d'une organisation\n   */\n  async getStats(organizationId: string) {\n    try {\n      const { data, error } = await this.supabase\n        .from('export_history')\n        .select('export_type, entity_type, record_count, file_size_bytes')\n        .eq('organization_id', organizationId)\n\n      if (error) {\n        // Si la table n'existe pas encore ou erreur 400/404, retourner des stats vides\n        if (\n          error.code === 'PGRST116' ||\n          error.code === 'PGRST200' ||\n          error.code === '42P01' ||\n          error.code === 'PGRST301' ||\n          (error as any).status === 400 ||\n          (error as any).status === 404 ||\n          error.code === '400' ||\n          error.code === '404' ||\n          error.message?.includes('relation') ||\n          error.message?.includes('does not exist')\n        ) {\n          return {\n            total: 0,\n            byType: {} as Record<ExportType, number>,\n            byEntity: {} as Record<EntityType, number>,\n            totalRecords: 0,\n            totalSizeBytes: 0,\n          }\n        }\n        throw error\n      }\n\n      const stats = {\n        total: data?.length || 0,\n        byType: {} as Record<ExportType, number>,\n        byEntity: {} as Record<EntityType, number>,\n        totalRecords: 0,\n        totalSizeBytes: 0,\n      }\n\n      data?.forEach((export_) => {\n        stats.byType[export_.export_type as ExportType] =\n          (stats.byType[export_.export_type as ExportType] || 0) + 1\n        stats.byEntity[export_.entity_type as EntityType] =\n          (stats.byEntity[export_.entity_type as EntityType] || 0) + 1\n        stats.totalRecords += export_.record_count || 0\n        stats.totalSizeBytes += export_.file_size_bytes || 0\n      })\n\n      return stats\n    } catch (error: any) {\n      // Gérer les erreurs de table inexistante\n      if (\n        error?.code === 'PGRST116' ||\n        error?.code === 'PGRST200' ||\n        error?.code === '42P01' ||\n        error?.code === 'PGRST301' ||\n        error?.status === 400 ||\n        error?.status === 404 ||\n        error?.code === '400' ||\n        error?.code === '404' ||\n        error?.message?.includes('relation') ||\n        error?.message?.includes('does not exist')\n      ) {\n        return {\n          total: 0,\n          byType: {} as Record<ExportType, number>,\n          byEntity: {} as Record<EntityType, number>,\n          totalRecords: 0,\n          totalSizeBytes: 0,\n        }\n      }\n      throw error\n    }\n  }\n\n  /**\n   * Supprime un export de l'historique\n   */\n  async delete(exportId: string, userId: string): Promise<void> {\n    const { error } = await this.supabase\n      .from('export_history')\n      .delete()\n      .eq('id', exportId)\n      .eq('user_id', userId) // Sécurité : seul le créateur peut supprimer\n\n    if (error) throw error\n  }\n\n  /**\n   * Supprime tous les exports d'un utilisateur\n   */\n  async deleteByUser(userId: string, organizationId: string): Promise<void> {\n    const { error } = await this.supabase\n      .from('export_history')\n      .delete()\n      .eq('user_id', userId)\n      .eq('organization_id', organizationId)\n\n    if (error) throw error\n  }\n}\n\nexport const exportHistoryService = new ExportHistoryService()\n\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name UserX\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTYgMjF2LTJhNCA0IDAgMCAwLTQtNEg2YTQgNCAwIDAgMC00IDR2MiIgLz4KICA8Y2lyY2xlIGN4PSI5IiBjeT0iNyIgcj0iNCIgLz4KICA8bGluZSB4MT0iMTciIHgyPSIyMiIgeTE9IjgiIHkyPSIxMyIgLz4KICA8bGluZSB4MT0iMjIiIHgyPSIxNyIgeTE9IjgiIHkyPSIxMyIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/user-x\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst UserX = createLucideIcon('UserX', [\n  ['path', { d: 'M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2', key: '1yyitq' }],\n  ['circle', { cx: '9', cy: '7', r: '4', key: 'nufk8' }],\n  ['line', { x1: '17', x2: '22', y1: '8', y2: '13', key: '3nzzx3' }],\n  ['line', { x1: '22', x2: '17', y1: '8', y2: '13', key: '1swrse' }],\n]);\n\nexport default UserX;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name FileSpreadsheet\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTQuNSAySDZhMiAyIDAgMCAwLTIgMnYxNmEyIDIgMCAwIDAgMiAyaDEyYTIgMiAwIDAgMCAyLTJWNy41TDE0LjUgMnoiIC8+CiAgPHBvbHlsaW5lIHBvaW50cz0iMTQgMiAxNCA4IDIwIDgiIC8+CiAgPHBhdGggZD0iTTggMTNoMiIgLz4KICA8cGF0aCBkPSJNOCAxN2gyIiAvPgogIDxwYXRoIGQ9Ik0xNCAxM2gyIiAvPgogIDxwYXRoIGQ9Ik0xNCAxN2gyIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/file-spreadsheet\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst FileSpreadsheet = createLucideIcon('FileSpreadsheet', [\n  [\n    'path',\n    { d: 'M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z', key: '1nnpy2' },\n  ],\n  ['polyline', { points: '14 2 14 8 20 8', key: '1ew0cm' }],\n  ['path', { d: 'M8 13h2', key: 'yr2amv' }],\n  ['path', { d: 'M8 17h2', key: '2yhykz' }],\n  ['path', { d: 'M14 13h2', key: 'un5t4a' }],\n  ['path', { d: 'M14 17h2', key: '10kma7' }],\n]);\n\nexport default FileSpreadsheet;\n","/**\n * Utilitaires pour l'export de données (Excel, CSV)\n */\n\nimport { exportToExcel as excelJSExport, exportToCSV as csvExport } from './excel-export'\nimport { formatDate } from './format'\nimport { analytics } from './analytics'\nimport { exportHistoryService } from '@/lib/services/export-history.service'\n\nexport type ExportFormat = 'xlsx' | 'csv'\n\nexport interface ExportOptions {\n  filename?: string\n  sheetName?: string\n  format?: ExportFormat\n}\n\n/**\n * Exporte des données vers Excel ou CSV\n * \n * @param data - Données à exporter\n * @param options - Options d'export (filename, sheetName, format, entityType, organizationId, userId)\n */\nexport async function exportData<T extends Record<string, any>>(\n  data: T[],\n  options: ExportOptions & {\n    entityType?: 'students' | 'documents' | 'payments' | 'other'\n    organizationId?: string\n    userId?: string\n  } = {}\n): Promise<void> {\n  if (!data || data.length === 0) {\n    throw new Error('Aucune donnée à exporter')\n  }\n\n  const {\n    filename = `export_${new Date().toISOString().split('T')[0]}`,\n    sheetName = 'Données',\n    format = 'xlsx',\n    entityType = 'other',\n    organizationId,\n    userId,\n  } = options\n\n  const fullFilename = `${filename}.${format === 'csv' ? 'csv' : 'xlsx'}`\n\n  if (format === 'csv') {\n    csvExport(fullFilename, data)\n    analytics.export.csv(sheetName, data.length)\n  } else {\n    // Convertir les données en format avec colonnes définies\n    const columns = Object.keys(data[0] || {}).map((key) => ({\n      header: key,\n      key,\n      width: 20,\n    }))\n    await excelJSExport({\n      filename: fullFilename,\n      sheetName,\n      columns,\n      data,\n    })\n    analytics.export.excel(sheetName, data.length)\n  }\n\n  // Enregistrer dans l'historique si organizationId et userId sont fournis\n  // Note: L'historique est optionnel - si la table n'existe pas, on ignore silencieusement\n  if (organizationId && userId) {\n    try {\n      const result = await exportHistoryService.create({\n        organizationId,\n        userId,\n        exportType: format === 'csv' ? 'csv' : 'excel',\n        entityType: entityType || 'other',\n        filename: fullFilename,\n        recordCount: data.length,\n      })\n      // Si result est null, la table n'existe pas - c'est OK, on continue\n    } catch (error: any) {\n      // Ne pas bloquer l'export si l'enregistrement de l'historique échoue\n      // Le service gère déjà les erreurs de table manquante, mais on garde cette sécurité\n      if (error?.code === 'PGRST205' || error?.message?.includes('Could not find the table')) {\n        // Table n'existe pas encore - ignorer silencieusement\n        return\n      }\n      // Pour les autres erreurs, logger en mode debug uniquement\n      if (process.env.NODE_ENV === 'development') {\n        console.debug('Erreur lors de l\\'enregistrement de l\\'historique d\\'export:', error)\n      }\n    }\n  }\n}\n\n// Les fonctions exportToExcel et exportToCSV sont maintenant importées depuis excel-export.ts\n\n/**\n * Prépare les données d'étudiants pour l'export\n */\nexport function prepareStudentsExport(students: any[]) {\n  return students.map((student) => ({\n    'Numéro': student.student_number || '',\n    'Prénom': student.first_name || '',\n    'Nom': student.last_name || '',\n    'Email': student.email || '',\n    'Téléphone': student.phone || '',\n    'Date de naissance': student.date_of_birth ? formatDate(student.date_of_birth) : '',\n    'Statut': student.status === 'active' ? 'Actif' : 'Inactif',\n    'Date d\\'inscription': student.enrollment_date ? formatDate(student.enrollment_date) : '',\n    'Classe': student.classes?.name || '',\n    'Niveau': student.classes?.level || '',\n  }))\n}\n\n/**\n * Prépare les données de documents pour l'export\n */\nexport function prepareDocumentsExport(documents: any[]) {\n  return documents.map((doc) => ({\n    'Titre': doc.title || '',\n    'Type': doc.type || '',\n    'Étudiant': doc.students\n      ? `${doc.students.first_name || ''} ${doc.students.last_name || ''}`.trim()\n      : '',\n    'Date de création': doc.created_at ? formatDate(doc.created_at) : '',\n    'URL': doc.file_url || '',\n  }))\n}\n\n/**\n * Prépare les données de paiements pour l'export\n */\nexport function preparePaymentsExport(payments: any[]) {\n  return payments.map((payment) => ({\n    'ID': payment.id || '',\n    'Montant': payment.amount || '',\n    'Devise': payment.currency || '',\n    'Statut': payment.status || '',\n    'Méthode': payment.payment_method || '',\n    'Date': payment.paid_at ? formatDate(payment.paid_at) : '',\n    'Description': payment.description || '',\n  }))\n}\n\n"],"names":[],"mappings":"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","ignoreList":[0,2,3,5,6,8,9,16,17,18,20,21]}