{"version":3,"sources":["../../../../node_modules/lucide-react/src/icons/arrow-left.ts","../../../../lib/errors/error-handler.ts","../../../../lib/utils/supabase-helpers.ts","../../../../lib/utils/validators.ts","../../../../lib/services/student.service.ts","../../../../lib/utils/number-generator.ts","../../../../app/%28dashboard%29/dashboard/students/%5Bid%5D/edit/page.tsx"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ArrowLeft\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTIgMTktNy03IDctNyIgLz4KICA8cGF0aCBkPSJNMTkgMTJINSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/arrow-left\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowLeft = createLucideIcon('ArrowLeft', [\n  ['path', { d: 'm12 19-7-7 7-7', key: '1l729n' }],\n  ['path', { d: 'M19 12H5', key: 'x3x0zl' }],\n]);\n\nexport default ArrowLeft;\n","/**\n * ErrorHandler Global - Gestion centralisée des erreurs\n * \n * Fournit :\n * - Types d'erreurs personnalisés\n * - Classification automatique des erreurs\n * - Messages utilisateur traduits\n * - Logging automatique\n * - Formatage cohérent\n */\n\nimport { logger } from '@/lib/utils/logger'\nimport type { LogContext } from '@/lib/utils/logger'\n\n// ============================================================================\n// TYPES D'ERREURS PERSONNALISÉS\n// ============================================================================\n\nexport enum ErrorCode {\n  // Erreurs d'authentification (1000-1999)\n  AUTH_REQUIRED = 'AUTH_1001',\n  AUTH_INVALID_CREDENTIALS = 'AUTH_1002',\n  AUTH_SESSION_EXPIRED = 'AUTH_1003',\n  AUTH_INSUFFICIENT_PERMISSIONS = 'AUTH_1004',\n  AUTH_2FA_REQUIRED = 'AUTH_1005',\n  AUTH_2FA_INVALID = 'AUTH_1006',\n\n  // Erreurs de validation (2000-2999)\n  VALIDATION_ERROR = 'VALID_2001',\n  VALIDATION_REQUIRED_FIELD = 'VALID_2002',\n  VALIDATION_INVALID_FORMAT = 'VALID_2003',\n  VALIDATION_UNIQUE_CONSTRAINT = 'VALID_2004',\n\n  // Erreurs de base de données (3000-3999)\n  DB_CONNECTION_ERROR = 'DB_3001',\n  DB_QUERY_ERROR = 'DB_3002',\n  DB_NOT_FOUND = 'DB_3003',\n  DB_CONSTRAINT_VIOLATION = 'DB_3004',\n  DB_FOREIGN_KEY_CONSTRAINT = 'DB_3006',\n  DB_RLS_POLICY_VIOLATION = 'DB_3005',\n\n  // Erreurs réseau/API (4000-4999)\n  NETWORK_ERROR = 'NET_4001',\n  API_TIMEOUT = 'NET_4002',\n  API_RATE_LIMIT = 'NET_4003',\n  API_SERVER_ERROR = 'NET_4004',\n  API_NOT_FOUND = 'NET_4005',\n  API_BAD_REQUEST = 'NET_4006',\n\n  // Erreurs métier (5000-5999)\n  BUSINESS_LOGIC_ERROR = 'BIZ_5001',\n  RESOURCE_LOCKED = 'BIZ_5002',\n  OPERATION_NOT_ALLOWED = 'BIZ_5003',\n  QUOTA_EXCEEDED = 'BIZ_5004',\n\n  // Erreurs système (6000-6999)\n  INTERNAL_ERROR = 'SYS_6001',\n  CONFIGURATION_ERROR = 'SYS_6002',\n  SERVICE_UNAVAILABLE = 'SYS_6003',\n}\n\nexport enum ErrorSeverity {\n  LOW = 'low',\n  MEDIUM = 'medium',\n  HIGH = 'high',\n  CRITICAL = 'critical',\n}\n\nexport interface AppErrorContext extends LogContext {\n  code?: ErrorCode\n  severity?: ErrorSeverity\n  userMessage?: string\n  retryable?: boolean\n  timestamp?: string\n}\n\n/**\n * Classe d'erreur personnalisée pour l'application\n */\nexport class AppError extends Error {\n  public readonly code: ErrorCode\n  public readonly severity: ErrorSeverity\n  public readonly userMessage: string\n  public readonly retryable: boolean\n  public readonly context: AppErrorContext\n  public readonly originalError?: Error | unknown\n\n  constructor(\n    message: string,\n    code: ErrorCode = ErrorCode.INTERNAL_ERROR,\n    severity: ErrorSeverity = ErrorSeverity.MEDIUM,\n    context: AppErrorContext = {},\n    originalError?: Error | unknown\n  ) {\n    super(message)\n    this.name = 'AppError'\n    this.code = code\n    this.severity = severity\n    this.userMessage = context.userMessage || this.getDefaultUserMessage(code)\n    this.retryable = context.retryable ?? this.isRetryable(code)\n    this.context = {\n      ...context,\n      code,\n      severity,\n      timestamp: new Date().toISOString(),\n    }\n    this.originalError = originalError\n\n    // Maintenir la stack trace\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, AppError)\n    }\n  }\n\n  /**\n   * Messages utilisateur par défaut selon le code d'erreur\n   */\n  private getDefaultUserMessage(code: ErrorCode): string {\n    const messages: Record<ErrorCode, string> = {\n      // Auth\n      [ErrorCode.AUTH_REQUIRED]: 'Vous devez être connecté pour effectuer cette action.',\n      [ErrorCode.AUTH_INVALID_CREDENTIALS]: 'Email ou mot de passe incorrect.',\n      [ErrorCode.AUTH_SESSION_EXPIRED]: 'Votre session a expiré. Veuillez vous reconnecter.',\n      [ErrorCode.AUTH_INSUFFICIENT_PERMISSIONS]: \"Vous n'avez pas les permissions nécessaires.\",\n      [ErrorCode.AUTH_2FA_REQUIRED]: 'Authentification à deux facteurs requise.',\n      [ErrorCode.AUTH_2FA_INVALID]: 'Code d\\'authentification invalide.',\n\n      // Validation\n      [ErrorCode.VALIDATION_ERROR]: 'Les données fournies ne sont pas valides.',\n      [ErrorCode.VALIDATION_REQUIRED_FIELD]: 'Certains champs obligatoires sont manquants.',\n      [ErrorCode.VALIDATION_INVALID_FORMAT]: 'Le format des données est incorrect.',\n      [ErrorCode.VALIDATION_UNIQUE_CONSTRAINT]: 'Cette valeur existe déjà.',\n\n      // Database\n      [ErrorCode.DB_CONNECTION_ERROR]: 'Impossible de se connecter à la base de données.',\n      [ErrorCode.DB_QUERY_ERROR]: 'Erreur lors de l\\'exécution de la requête.',\n      [ErrorCode.DB_NOT_FOUND]: 'Ressource introuvable.',\n      [ErrorCode.DB_CONSTRAINT_VIOLATION]: 'Cette opération viole une contrainte de la base de données.',\n      [ErrorCode.DB_FOREIGN_KEY_CONSTRAINT]: 'Cette opération viole une contrainte de clé étrangère.',\n      [ErrorCode.DB_RLS_POLICY_VIOLATION]: 'Vous n\\'avez pas accès à cette ressource.',\n\n      // Network\n      [ErrorCode.NETWORK_ERROR]: 'Erreur de connexion réseau. Vérifiez votre connexion internet.',\n      [ErrorCode.API_TIMEOUT]: 'La requête a pris trop de temps. Veuillez réessayer.',\n      [ErrorCode.API_RATE_LIMIT]: 'Trop de requêtes. Veuillez patienter quelques instants.',\n      [ErrorCode.API_SERVER_ERROR]: 'Erreur serveur. Veuillez réessayer plus tard.',\n      [ErrorCode.API_NOT_FOUND]: 'Ressource introuvable.',\n      [ErrorCode.API_BAD_REQUEST]: 'Requête invalide.',\n\n      // Business\n      [ErrorCode.BUSINESS_LOGIC_ERROR]: 'Cette opération n\\'est pas autorisée dans le contexte actuel.',\n      [ErrorCode.RESOURCE_LOCKED]: 'Cette ressource est actuellement verrouillée.',\n      [ErrorCode.OPERATION_NOT_ALLOWED]: 'Cette opération n\\'est pas autorisée.',\n      [ErrorCode.QUOTA_EXCEEDED]: 'Vous avez atteint la limite autorisée.',\n\n      // System\n      [ErrorCode.INTERNAL_ERROR]: 'Une erreur interne est survenue. Veuillez réessayer.',\n      [ErrorCode.CONFIGURATION_ERROR]: 'Erreur de configuration du système.',\n      [ErrorCode.SERVICE_UNAVAILABLE]: 'Service temporairement indisponible.',\n    }\n\n    return messages[code] || 'Une erreur inattendue est survenue.'\n  }\n\n  /**\n   * Détermine si une erreur est retryable selon son code\n   */\n  private isRetryable(code: ErrorCode): boolean {\n    const retryableCodes = [\n      ErrorCode.NETWORK_ERROR,\n      ErrorCode.API_TIMEOUT,\n      ErrorCode.API_SERVER_ERROR,\n      ErrorCode.DB_CONNECTION_ERROR,\n      ErrorCode.SERVICE_UNAVAILABLE,\n    ]\n    return retryableCodes.includes(code)\n  }\n\n  /**\n   * Convertit l'erreur en objet JSON pour logging\n   */\n  toJSON() {\n    return {\n      name: this.name,\n      message: this.message,\n      code: this.code,\n      severity: this.severity,\n      userMessage: this.userMessage,\n      retryable: this.retryable,\n      context: this.context,\n      stack: this.stack,\n      originalError: this.originalError instanceof Error\n        ? {\n            name: this.originalError.name,\n            message: this.originalError.message,\n            stack: this.originalError.stack,\n          }\n        : this.originalError,\n    }\n  }\n}\n\n// ============================================================================\n// ERROR HANDLER PRINCIPAL\n// ============================================================================\n\nexport class ErrorHandler {\n  /**\n   * Analyse et classe une erreur inconnue\n   */\n  handleError(error: unknown, context: AppErrorContext = {}): AppError {\n    // Si c'est déjà une AppError, la retourner telle quelle\n    if (error instanceof AppError) {\n      this.logError(error)\n      return error\n    }\n\n    // Si c'est une Error standard, la convertir\n    if (error instanceof Error) {\n      return this.handleStandardError(error, context)\n    }\n\n    // Si c'est une erreur Supabase\n    if (this.isSupabaseError(error)) {\n      return this.handleSupabaseError(error, context)\n    }\n\n    // Erreur inconnue\n    const appError = new AppError(\n      'Une erreur inattendue est survenue.',\n      ErrorCode.INTERNAL_ERROR,\n      ErrorSeverity.HIGH,\n      context,\n      error\n    )\n    this.logError(appError)\n    return appError\n  }\n\n  /**\n   * Gère les erreurs Error standard\n   */\n  private handleStandardError(error: Error, context: AppErrorContext): AppError {\n    const message = error.message.toLowerCase()\n\n    // Détection par message\n    let code = ErrorCode.INTERNAL_ERROR\n    let severity = ErrorSeverity.MEDIUM\n\n    if (message.includes('network') || message.includes('fetch')) {\n      code = ErrorCode.NETWORK_ERROR\n      severity = ErrorSeverity.MEDIUM\n    } else if (message.includes('timeout')) {\n      code = ErrorCode.API_TIMEOUT\n      severity = ErrorSeverity.MEDIUM\n    } else if (message.includes('unauthorized') || message.includes('401')) {\n      code = ErrorCode.AUTH_REQUIRED\n      severity = ErrorSeverity.HIGH\n    } else if (message.includes('forbidden') || message.includes('403')) {\n      code = ErrorCode.AUTH_INSUFFICIENT_PERMISSIONS\n      severity = ErrorSeverity.HIGH\n    } else if (message.includes('not found') || message.includes('404')) {\n      code = ErrorCode.DB_NOT_FOUND\n      severity = ErrorSeverity.LOW\n    } else if (message.includes('validation') || message.includes('invalid')) {\n      code = ErrorCode.VALIDATION_ERROR\n      severity = ErrorSeverity.LOW\n    }\n\n    const appError = new AppError(error.message, code, severity, context, error)\n    this.logError(appError)\n    return appError\n  }\n\n  /**\n   * Gère les erreurs Supabase\n   */\n  private handleSupabaseError(error: any, context: AppErrorContext): AppError {\n    const code = error.code || error.status\n    const message = error.message || 'Erreur Supabase'\n\n    // Si un code d'erreur est fourni dans le contexte, l'utiliser en priorité\n    let errorCode = context.code || ErrorCode.DB_QUERY_ERROR\n    let severity = ErrorSeverity.MEDIUM\n\n    // Classification par code Supabase (seulement si pas de code dans le contexte)\n    if (!context.code) {\n      switch (code) {\n        case 'PGRST116':\n        case '42P01':\n          errorCode = ErrorCode.DB_NOT_FOUND\n          severity = ErrorSeverity.LOW\n          break\n        case '42501':\n          errorCode = ErrorCode.DB_RLS_POLICY_VIOLATION\n          severity = ErrorSeverity.HIGH\n          break\n        case '23505':\n          errorCode = ErrorCode.VALIDATION_UNIQUE_CONSTRAINT\n          severity = ErrorSeverity.LOW\n          break\n        case '23503':\n          errorCode = ErrorCode.DB_CONSTRAINT_VIOLATION\n          severity = ErrorSeverity.MEDIUM\n          break\n        case 'PGRST301':\n        case '400':\n          errorCode = ErrorCode.API_BAD_REQUEST\n          severity = ErrorSeverity.LOW\n          break\n        case '401':\n          errorCode = ErrorCode.AUTH_REQUIRED\n          severity = ErrorSeverity.HIGH\n          break\n        case '403':\n          errorCode = ErrorCode.AUTH_INSUFFICIENT_PERMISSIONS\n          severity = ErrorSeverity.HIGH\n          break\n        case '404':\n          errorCode = ErrorCode.API_NOT_FOUND\n          severity = ErrorSeverity.LOW\n          break\n        case '500':\n          errorCode = ErrorCode.API_SERVER_ERROR\n          severity = ErrorSeverity.HIGH\n          break\n      }\n    }\n\n    // Ajuster la sévérité selon le code d'erreur\n    if (errorCode === ErrorCode.DB_FOREIGN_KEY_CONSTRAINT) {\n      severity = ErrorSeverity.MEDIUM\n    }\n\n    const appError = new AppError(message, errorCode, severity, context, error)\n    this.logError(appError)\n    return appError\n  }\n\n  /**\n   * Vérifie si une erreur est une erreur Supabase\n   */\n  private isSupabaseError(error: any): boolean {\n    return (\n      error &&\n      (error.code || error.status || error.message) &&\n      (typeof error.code === 'string' || typeof error.status === 'number')\n    )\n  }\n\n  /**\n   * Log l'erreur selon sa sévérité\n   */\n  private logError(error: AppError) {\n    const logContext: LogContext = {\n      ...error.context,\n      code: error.code,\n      severity: error.severity,\n      retryable: error.retryable,\n    }\n\n    switch (error.severity) {\n      case ErrorSeverity.CRITICAL:\n      case ErrorSeverity.HIGH:\n        logger.error(error.message, error.originalError || error, logContext)\n        break\n      case ErrorSeverity.MEDIUM:\n        logger.warn(error.message, logContext)\n        break\n      case ErrorSeverity.LOW:\n        logger.info(`Error: ${error.message}`, logContext)\n        break\n    }\n  }\n\n  /**\n   * Crée une erreur de validation\n   */\n  createValidationError(message: string, field?: string): AppError {\n    return new AppError(\n      message,\n      ErrorCode.VALIDATION_ERROR,\n      ErrorSeverity.LOW,\n      { field, userMessage: message }\n    )\n  }\n\n  /**\n   * Crée une erreur d'authentification\n   */\n  createAuthError(code: ErrorCode, message?: string): AppError {\n    return new AppError(\n      message || 'Erreur d\\'authentification',\n      code,\n      ErrorSeverity.HIGH\n    )\n  }\n\n  /**\n   * Crée une erreur de base de données\n   */\n  createDatabaseError(message: string, originalError?: unknown): AppError {\n    return new AppError(\n      message,\n      ErrorCode.DB_QUERY_ERROR,\n      ErrorSeverity.MEDIUM,\n      {},\n      originalError\n    )\n  }\n\n  /**\n   * Crée une erreur \"Not Found\"\n   */\n  createNotFoundError(message: string, context?: AppErrorContext): AppError {\n    return new AppError(\n      message,\n      ErrorCode.DB_NOT_FOUND,\n      ErrorSeverity.LOW,\n      context\n    )\n  }\n}\n\n// Export d'une instance singleton\nexport const errorHandler = new ErrorHandler()\n\n// Export de fonctions helper pour faciliter l'utilisation\nexport const handleError = (error: unknown, context?: AppErrorContext) =>\n  errorHandler.handleError(error, context)\n\nexport const createValidationError = (message: string, field?: string) =>\n  errorHandler.createValidationError(message, field)\n\nexport const createAuthError = (code: ErrorCode, message?: string) =>\n  errorHandler.createAuthError(code, message)\n\nexport const createDatabaseError = (message: string, originalError?: unknown) =>\n  errorHandler.createDatabaseError(message, originalError)\n\nexport const createNotFoundError = (message: string, context?: AppErrorContext) =>\n  errorHandler.createNotFoundError(message, context)\n\n// Alias pour NotFoundError (compatibilité)\nexport const NotFoundError = createNotFoundError\n\n","/**\n * Helpers réutilisables pour les requêtes Supabase\n * \n * Réduit la duplication de code dans les services\n */\n\nimport { SupabaseClient } from '@supabase/supabase-js'\nimport { errorHandler, AppError, ErrorCode } from '@/lib/errors'\n\nexport interface GetAllByOrganizationOptions {\n  filters?: Record<string, unknown>\n  orderBy?: { column: string; ascending?: boolean }\n  select?: string\n  search?: { field: string; value: string }\n}\n\n/**\n * Récupère tous les enregistrements d'une organisation avec options\n */\nexport async function getAllByOrganization<T>(\n  supabase: SupabaseClient,\n  table: string,\n  organizationId: string,\n  options?: GetAllByOrganizationOptions\n): Promise<T[]> {\n  try {\n    let query = supabase\n      .from(table)\n      .select(options?.select || '*')\n      .eq('organization_id', organizationId)\n\n    // Appliquer les filtres\n    if (options?.filters) {\n      Object.entries(options.filters).forEach(([key, value]) => {\n        if (value !== undefined && value !== null) {\n          query = query.eq(key, value)\n        }\n      })\n    }\n\n    // Appliquer la recherche\n    if (options?.search) {\n      query = query.ilike(options.search.field, `%${options.search.value}%`)\n    }\n\n    // Appliquer le tri\n    if (options?.orderBy) {\n      query = query.order(options.orderBy.column, {\n        ascending: options.orderBy.ascending ?? false,\n      })\n    } else {\n      query = query.order('created_at', { ascending: false })\n    }\n\n    const { data, error } = await query\n\n    if (error) {\n      throw errorHandler.handleError(error, {\n        organizationId,\n        operation: 'getAllByOrganization',\n        table,\n      })\n    }\n\n    return (data || []) as T[]\n  } catch (error) {\n    if (error instanceof AppError) {\n      throw error\n    }\n    throw errorHandler.handleError(error, {\n      organizationId,\n      operation: 'getAllByOrganization',\n      table,\n    })\n  }\n}\n\n/**\n * Récupère un enregistrement par ID avec gestion d'erreur\n */\nexport async function getById<T>(\n  supabase: SupabaseClient,\n  table: string,\n  id: string,\n  select?: string\n): Promise<T> {\n  try {\n    const { data, error } = await supabase\n      .from(table)\n      .select(select || '*')\n      .eq('id', id)\n      .single()\n\n    if (error) {\n      if (error.code === 'PGRST116' || error.code === '42P01') {\n        throw errorHandler.handleError(error, {\n          code: ErrorCode.DB_NOT_FOUND,\n          operation: 'getById',\n          id,\n          table,\n        })\n      }\n      throw errorHandler.handleError(error, {\n        operation: 'getById',\n        id,\n        table,\n      })\n    }\n\n    if (!data) {\n      throw errorHandler.createDatabaseError(\n        `Enregistrement avec l'ID ${id} introuvable dans ${table}`,\n        { id, table }\n      )\n    }\n\n    return data as T\n  } catch (error) {\n    if (error instanceof AppError) {\n      throw error\n    }\n    throw errorHandler.handleError(error, {\n      operation: 'getById',\n      id,\n      table,\n    })\n  }\n}\n\n","/**\n * Validateurs réutilisables pour les données\n * \n * Réduit la duplication de code pour la validation\n */\n\nimport { errorHandler } from '@/lib/errors'\n\n/**\n * Valide que les champs requis sont présents\n */\nexport function validateRequired<T extends Record<string, unknown>>(\n  data: T,\n  fields: (keyof T)[]\n): void {\n  for (const field of fields) {\n    if (!data[field]) {\n      throw errorHandler.createValidationError(\n        `Le champ ${String(field)} est obligatoire`,\n        String(field)\n      )\n    }\n  }\n}\n\n/**\n * Valide qu'un email est valide\n */\nexport function validateEmail(email: string): void {\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\n  if (!emailRegex.test(email)) {\n    throw errorHandler.createValidationError(\n      'Format d\\'email invalide',\n      'email'\n    )\n  }\n}\n\n/**\n * Valide qu'un montant est positif\n */\nexport function validatePositiveAmount(amount: number, fieldName = 'amount'): void {\n  if (amount <= 0) {\n    throw errorHandler.createValidationError(\n      'Le montant doit être supérieur à 0',\n      fieldName\n    )\n  }\n}\n\n/**\n * Valide qu'une date est valide\n */\nexport function validateDate(date: string, fieldName = 'date'): void {\n  const dateObj = new Date(date)\n  if (isNaN(dateObj.getTime())) {\n    throw errorHandler.createValidationError(\n      'Format de date invalide',\n      fieldName\n    )\n  }\n}\n\n/**\n * Valide qu'une date est dans le futur\n */\nexport function validateFutureDate(date: string, fieldName = 'date'): void {\n  validateDate(date, fieldName)\n  const dateObj = new Date(date)\n  const now = new Date()\n  if (dateObj <= now) {\n    throw errorHandler.createValidationError(\n      'La date doit être dans le futur',\n      fieldName\n    )\n  }\n}\n\n\n\n\n\n","import { createClient } from '@/lib/supabase/client'\nimport type { SupabaseClient } from '@supabase/supabase-js'\nimport { Database } from '@/types/database.types'\nimport type { TableRow, TableInsert, TableUpdate, FlexibleInsert, FlexibleUpdate } from '@/lib/types/supabase-helpers'\nimport { errorHandler, ErrorCode, AppError } from '@/lib/errors'\nimport { logger } from '@/lib/utils/logger'\nimport { getAllByOrganization, getById } from '@/lib/utils/supabase-helpers'\nimport { generateUniqueNumber } from '@/lib/utils/number-generator'\nimport { validateRequired } from '@/lib/utils/validators'\n\ntype Student = TableRow<'students'>\ntype StudentInsert = TableInsert<'students'>\ntype StudentUpdate = TableUpdate<'students'>\n\n/**\n * Service de gestion des étudiants\n * \n * Fournit des méthodes pour CRUD des étudiants avec :\n * - Pagination côté serveur\n * - Recherche textuelle (nom, prénom, numéro, email)\n * - Filtrage par classe et statut\n * - Génération automatique de numéros d'étudiant uniques\n */\nexport class StudentService {\n  private supabase: SupabaseClient<Database>\n\n\n  constructor(supabaseClient?: SupabaseClient<Database>) {\n\n    this.supabase = supabaseClient || createClient()\n\n  }\n\n  /**\n   * Récupère tous les étudiants d'une organisation avec pagination\n   * \n   * @param organizationId - ID de l'organisation\n   * @param filters - Filtres optionnels (classe, statut, recherche, pagination)\n   * @returns Objet avec data, total, page, limit, totalPages\n   */\n  async getAll(organizationId: string, filters?: {\n    classId?: string\n    status?: Student['status']\n    search?: string\n    page?: number\n    limit?: number\n  }) {\n    try {\n      const page = filters?.page || 1\n      const limit = filters?.limit || 50\n      const offset = (page - 1) * limit\n\n      // Pour la recherche, on doit utiliser une requête personnalisée car elle utilise `or`\n      if (filters?.search) {\n        let query = this.supabase\n          .from('students')\n          .select('*, classes(id, name, level)', { count: 'exact' })\n          .eq('organization_id', organizationId)\n          .or(`first_name.ilike.%${filters.search}%,last_name.ilike.%${filters.search}%,student_number.ilike.%${filters.search}%`)\n\n        if (filters?.classId) query = query.eq('class_id', filters.classId)\n        if (filters?.status) query = query.eq('status', filters.status)\n\n        const { data, error, count } = await query\n          .order('last_name', { ascending: true })\n          .range(offset, offset + limit - 1)\n\n        if (error) {\n          throw errorHandler.handleError(error, {\n            organizationId,\n            operation: 'getAll',\n            filters,\n          })\n        }\n\n        return {\n          data: data || [],\n          total: count || 0,\n          page,\n          limit,\n          totalPages: Math.ceil((count || 0) / limit),\n        }\n      }\n\n      // Sinon, utiliser une requête avec pagination\n      let query = this.supabase\n        .from('students')\n        .select('*, classes(id, name, level)', { count: 'exact' })\n        .eq('organization_id', organizationId)\n\n      if (filters?.classId) query = query.eq('class_id', filters.classId)\n      if (filters?.status) query = query.eq('status', filters.status)\n\n      const { data, error, count } = await query\n        .order('last_name', { ascending: true })\n        .range(offset, offset + limit - 1)\n\n      if (error) {\n        throw errorHandler.handleError(error, {\n          organizationId,\n          operation: 'getAll',\n          filters,\n        })\n      }\n\n      return {\n        data: data || [],\n        total: count || 0,\n        page,\n        limit,\n        totalPages: Math.ceil((count || 0) / limit),\n      }\n    } catch (error) {\n      if (error instanceof AppError) {\n        throw error\n      }\n      throw errorHandler.handleError(error, {\n        organizationId,\n        operation: 'getAll',\n      })\n    }\n  }\n\n  /**\n   * Récupère un étudiant par son ID\n   */\n  async getById(id: string) {\n    try {\n      // Utiliser le helper pour réduire la duplication\n      return getById<Student>(\n        this.supabase,\n        'students',\n        id,\n        '*, classes(id, name, level)'\n      )\n    } catch (error) {\n      if (error instanceof AppError) {\n        throw error\n      }\n      throw errorHandler.handleError(error, {\n        operation: 'getById',\n        id,\n      })\n    }\n  }\n\n  /**\n   * Récupère un étudiant par son numéro\n   */\n  async getByNumber(organizationId: string, studentNumber: string) {\n    try {\n      const { data, error } = await this.supabase\n        .from('students')\n        .select('*')\n        .eq('organization_id', organizationId)\n        .eq('student_number', studentNumber)\n        .single()\n\n      if (error) {\n        if (error.code === 'PGRST116' || error.code === '42P01') {\n          throw errorHandler.handleError(error, {\n            code: ErrorCode.DB_NOT_FOUND,\n            operation: 'getByNumber',\n            organizationId,\n            studentNumber,\n          })\n        }\n        throw errorHandler.handleError(error, {\n          operation: 'getByNumber',\n          organizationId,\n          studentNumber,\n        })\n      }\n\n      return data\n    } catch (error) {\n      if (error instanceof AppError) {\n        throw error\n      }\n      throw errorHandler.handleError(error, {\n        operation: 'getByNumber',\n        organizationId,\n        studentNumber,\n      })\n    }\n  }\n\n  /**\n   * Crée un nouvel étudiant\n   */\n  async create(student: FlexibleInsert<'students'>) {\n    try {\n      // Validation avec helper\n      validateRequired(student, ['first_name', 'last_name', 'organization_id'])\n\n      // Générer un numéro d'étudiant si non fourni\n      let studentNumber = student.student_number\n      if (!studentNumber || studentNumber.trim() === '') {\n        // Récupérer le code de l'organisation\n        const orgId = student.organization_id\n        if (!orgId) throw new Error('organization_id is required')\n        \n        const { data: org } = await this.supabase\n          .from('organizations')\n          .select('code')\n          .eq('id', orgId)\n          .single()\n\n        const orgCode = org?.code || 'ORG'\n        const year = new Date().getFullYear().toString().slice(-2)\n\n        // Générer le numéro avec le helper\n        studentNumber = await generateUniqueNumber(\n          this.supabase,\n          'students',\n          orgId,\n          {\n            prefix: 'EDU',\n            orgCode,\n            year,\n            padding: 6,\n            fieldName: 'student_number',\n          }\n        )\n      }\n\n      const studentData = {\n        ...student,\n        student_number: studentNumber,\n      } as StudentInsert\n\n      const { data, error } = await this.supabase\n        .from('students')\n        .insert(studentData)\n        .select()\n        .single()\n\n      if (error) {\n        if (error.code === '23505') {\n          throw errorHandler.handleError(error, {\n            code: ErrorCode.VALIDATION_UNIQUE_CONSTRAINT,\n            operation: 'create',\n            field: 'student_number',\n          })\n        }\n        if (error.code === '42501') {\n          throw errorHandler.handleError(error, {\n            code: ErrorCode.DB_RLS_POLICY_VIOLATION,\n            operation: 'create',\n          })\n        }\n        throw errorHandler.handleError(error, {\n          operation: 'create',\n          student,\n        })\n      }\n\n      logger.info('Étudiant créé avec succès', {\n        id: data?.id,\n        organizationId: student.organization_id || undefined,\n        studentNumber: data?.student_number,\n      })\n\n      return data\n    } catch (error) {\n      if (error instanceof AppError) {\n        throw error\n      }\n      throw errorHandler.handleError(error, {\n        operation: 'create',\n        student,\n      })\n    }\n  }\n\n  /**\n   * Met à jour un étudiant\n   */\n  async update(id: string, updates: FlexibleUpdate<'students'>) {\n    try {\n      // Nettoyer les valeurs avant la mise à jour\n      const cleanUpdates = { ...updates }\n      \n      // Convertir les chaînes vides en null pour class_id (pour éviter les erreurs de contrainte FK)\n      if ('class_id' in cleanUpdates) {\n        if (cleanUpdates.class_id === '' || !cleanUpdates.class_id) {\n          cleanUpdates.class_id = null\n        } else {\n          // Vérifier si class_id existe dans la table classes\n          // Si ce n'est pas le cas, cela pourrait être une session ID, on le met à null\n          const { data: classExists, error: classError } = await this.supabase\n            .from('classes')\n            .select('id')\n            .eq('id', cleanUpdates.class_id)\n            .maybeSingle()\n          \n          // Si la classe n'existe pas, on met class_id à null\n          // (car class_id ne devrait pas référencer une session)\n          if (!classExists && !classError) {\n            cleanUpdates.class_id = null\n          }\n        }\n      }\n\n      const { data, error } = await this.supabase\n        .from('students')\n        .update(cleanUpdates as StudentUpdate)\n        .eq('id', id)\n        .select()\n        .single()\n\n      if (error) {\n        if (error.code === 'PGRST116' || error.code === '42P01') {\n          throw errorHandler.handleError(error, {\n            code: ErrorCode.DB_NOT_FOUND,\n            operation: 'update',\n            id,\n          })\n        }\n        if (error.code === '42501') {\n          throw errorHandler.handleError(error, {\n            code: ErrorCode.DB_RLS_POLICY_VIOLATION,\n            operation: 'update',\n            id,\n          })\n        }\n        throw errorHandler.handleError(error, {\n          operation: 'update',\n          id,\n          updates,\n        })\n      }\n\n      if (!data) {\n        throw errorHandler.createDatabaseError(\n          `Étudiant avec l'ID ${id} introuvable pour la mise à jour`,\n          { id }\n        )\n      }\n\n      logger.info('Étudiant mis à jour avec succès', {\n        id,\n        updates,\n      })\n\n      return data\n    } catch (error) {\n      if (error instanceof AppError) {\n        throw error\n      }\n      throw errorHandler.handleError(error, {\n        operation: 'update',\n        id,\n        updates,\n      })\n    }\n  }\n\n  /**\n   * Supprime un étudiant (soft delete en changeant le statut)\n   */\n  async delete(id: string) {\n    return this.update(id, { status: 'inactive' })\n  }\n\n  /**\n   * Importe plusieurs étudiants depuis un fichier CSV/Excel\n   */\n  async import(organizationId: string, students: FlexibleInsert<'students'>[]) {\n    try {\n      if (!students || students.length === 0) {\n        throw errorHandler.createValidationError(\n          'Aucun étudiant à importer',\n          'students'\n        )\n      }\n\n      // Récupérer le code de l'organisation pour générer les numéros\n      const { data: org } = await this.supabase\n        .from('organizations')\n        .select('code')\n        .eq('id', organizationId)\n        .single()\n\n      const orgCode = org?.code || 'ORG'\n      const year = new Date().getFullYear().toString().slice(-2)\n\n      // Générer les numéros d'étudiants pour ceux qui n'en ont pas\n      const studentsWithNumbers = await Promise.all(\n        students.map(async (student) => {\n          if (student.student_number && student.student_number.trim() !== '') {\n            return student\n          }\n\n          // Générer un numéro unique\n          const studentNumber = await generateUniqueNumber(\n            this.supabase,\n            'students',\n            organizationId,\n            {\n              prefix: 'EDU',\n              orgCode,\n              year,\n              padding: 6,\n              fieldName: 'student_number',\n            }\n          )\n\n          return {\n            ...student,\n            student_number: studentNumber,\n          }\n        })\n      )\n\n      const { data, error } = await this.supabase\n        .from('students')\n        .insert(studentsWithNumbers as StudentInsert[])\n        .select()\n\n      if (error) {\n        if (error.code === '23505') {\n          throw errorHandler.handleError(error, {\n            code: ErrorCode.VALIDATION_UNIQUE_CONSTRAINT,\n            operation: 'import',\n            field: 'student_number',\n          })\n        }\n        throw errorHandler.handleError(error, {\n          operation: 'import',\n          organizationId,\n          count: students.length,\n        })\n      }\n\n      logger.info('Étudiants importés avec succès', {\n        organizationId,\n        count: data?.length || 0,\n      })\n\n      return data || []\n    } catch (error) {\n      if (error instanceof AppError) {\n        throw error\n      }\n      throw errorHandler.handleError(error, {\n        operation: 'import',\n        organizationId,\n      })\n    }\n  }\n}\n\nexport const studentService = new StudentService()\n\n","/**\n * Générateur de numéros uniques pour factures, étudiants, etc.\n * \n * Réduit la duplication de code pour la génération de numéros\n */\n\nimport { SupabaseClient } from '@supabase/supabase-js'\nimport { errorHandler } from '@/lib/errors'\n\nexport interface GenerateUniqueNumberOptions {\n  prefix: string\n  orgCode: string\n  year?: string\n  padding?: number\n  fieldName?: string\n}\n\n/**\n * Génère un numéro unique pour une table\n */\nexport async function generateUniqueNumber(\n  supabase: SupabaseClient,\n  table: string,\n  organizationId: string,\n  options: GenerateUniqueNumberOptions\n): Promise<string> {\n  try {\n    const year = options.year || new Date().getFullYear().toString().slice(-2)\n    const padding = options.padding || 6\n    const fieldName = options.fieldName || 'number'\n    const pattern = `${options.prefix}-${options.orgCode}-${year}-%`\n\n    const { data: lastRecord, error } = await supabase\n      .from(table)\n      .select(fieldName)\n      .eq('organization_id', organizationId)\n      .like(fieldName, pattern)\n      .order(fieldName, { ascending: false })\n      .limit(1)\n      .maybeSingle()\n\n    if (error && error.code !== 'PGRST116' && error.code !== '42P01') {\n      throw errorHandler.handleError(error, {\n        operation: 'generateUniqueNumber',\n        table,\n        organizationId,\n      })\n    }\n\n    let sequence = 1\n    if (lastRecord && (lastRecord as any)[fieldName]) {\n      const parts = String((lastRecord as any)[fieldName]).split('-')\n      const lastSequence = parseInt(parts[parts.length - 1] || '0', 10)\n      sequence = lastSequence + 1\n    }\n\n    return `${options.prefix}-${options.orgCode}-${year}-${String(sequence).padStart(padding, '0')}`\n  } catch (error) {\n    throw errorHandler.handleError(error, {\n      operation: 'generateUniqueNumber',\n      table,\n      organizationId,\n    })\n  }\n}\n\n\n\n\n\n","'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useRouter, useParams } from 'next/navigation'\nimport { useMutation, useQuery, useQueryClient } from '@tanstack/react-query'\nimport { useAuth } from '@/lib/hooks/use-auth'\nimport { createClient } from '@/lib/supabase/client'\nimport { studentService } from '@/lib/services/student.service'\nimport type { TableRow } from '@/lib/types/supabase-helpers'\nimport { Button } from '@/components/ui/button'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { ArrowLeft } from 'lucide-react'\nimport Link from 'next/link'\n\nexport default function EditStudentPage() {\n  const router = useRouter()\n  const params = useParams()\n  const studentId = params.id as string\n  const queryClient = useQueryClient()\n  const auth = useAuth()\n  const { user, isLoading: userLoading } = auth\n  const supabase = createClient()\n\n  // Tous les hooks doivent être appelés de manière inconditionnelle, avant les retours conditionnels\n  const [formData, setFormData] = useState({\n    first_name: '',\n    last_name: '',\n    date_of_birth: '',\n    gender: '',\n    email: '',\n    phone: '',\n    address: '',\n    city: '',\n    class_id: '',\n    enrollment_date: '',\n    status: 'active' as 'active' | 'inactive' | 'graduated',\n  })\n\n  // Charger les données de l'étudiant existant\n  const { data: student, isLoading: studentLoading } = useQuery({\n    queryKey: ['student', studentId],\n    queryFn: () => studentService.getById(studentId),\n    enabled: !!studentId,\n  })\n\n  // Récupérer les sessions (remplace les classes)\n  const { data: sessions } = useQuery({\n    queryKey: ['program-sessions-all', user?.organization_id],\n    queryFn: async () => {\n      if (!user?.organization_id) return []\n      const { data, error } = await supabase\n        .from('sessions')\n        .select('id, name, start_date, end_date, formations!inner(id, name, code, organization_id, programs(id, name))')\n        .eq('formations.organization_id', user.organization_id)\n        .order('start_date', { ascending: false })\n      if (error) throw error\n      return data?.map((session: any) => ({\n        id: session.id,\n        name: `${session.name} - ${session.formations.name}${session.formations.programs ? ` (${session.formations.programs.name})` : ''}`,\n        code: session.formations.code,\n        start_date: session.start_date,\n        end_date: session.end_date,\n      })) || []\n    },\n    enabled: !!user?.organization_id && !userLoading,\n  })\n\n  // Pré-remplir le formulaire avec les données existantes\n  useEffect(() => {\n    if (student) {\n      setFormData({\n        first_name: student.first_name || '',\n        last_name: student.last_name || '',\n        date_of_birth: student.date_of_birth ? student.date_of_birth.split('T')[0] : '',\n        gender: student.gender || '',\n        email: student.email || '',\n        phone: student.phone || '',\n        address: student.address || '',\n        city: student.city || '',\n        class_id: student.class_id || '',\n        enrollment_date: student.enrollment_date ? student.enrollment_date.split('T')[0] : '',\n        status: (student.status || 'active') as 'active' | 'inactive' | 'graduated',\n      })\n    }\n  }, [student])\n\n  const updateMutation = useMutation({\n    mutationFn: async () => {\n      if (!user?.organization_id) throw new Error('Organization ID manquant')\n\n      console.log('Mise à jour de l\\'élève:', studentId, formData)\n      const result = await studentService.update(studentId, {\n        first_name: formData.first_name,\n        last_name: formData.last_name,\n        date_of_birth: formData.date_of_birth || null,\n        gender: formData.gender || null,\n        email: formData.email || null,\n        phone: formData.phone || null,\n        address: formData.address || null,\n        city: formData.city || null,\n        class_id: formData.class_id || null,\n        enrollment_date: formData.enrollment_date || new Date().toISOString().split('T')[0],\n        status: formData.status,\n      })\n      console.log('Élève mis à jour avec succès:', result)\n      return result\n    },\n    onSuccess: (updatedStudent) => {\n      console.log('onSuccess appelé avec:', updatedStudent)\n      // Invalider les queries pour forcer le rafraîchissement\n      queryClient.invalidateQueries({ queryKey: ['student', studentId] })\n      queryClient.invalidateQueries({ queryKey: ['students'] })\n      router.push(`/dashboard/students/${updatedStudent.id}`)\n    },\n    onError: (error) => {\n      console.error('Erreur lors de la mise à jour de l\\'élève:', error)\n    },\n  })\n\n  // Vérifications conditionnelles APRÈS tous les hooks\n  if (userLoading || studentLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <p>Chargement...</p>\n      </div>\n    )\n  }\n\n  if (!user) {\n    return (\n      <div className=\"space-y-6\">\n        <div className=\"bg-warning-bg border border-warning-border rounded-lg p-4\">\n          <h2 className=\"text-lg font-semibold text-warning-primary mb-2\">\n            Utilisateur non trouvé\n          </h2>\n          <p className=\"text-warning-primary\">\n            Votre compte n'existe pas encore dans la base de données.\n          </p>\n        </div>\n      </div>\n    )\n  }\n\n  if (!user.organization_id) {\n    return (\n      <div className=\"space-y-6\">\n        <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n          <h2 className=\"text-lg font-semibold text-red-800 mb-2\">\n            Organization ID manquant\n          </h2>\n          <p className=\"text-red-700 mb-4\">\n            Votre compte n'est pas associé à une organisation.\n          </p>\n        </div>\n      </div>\n    )\n  }\n\n  if (!student) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"text-center\">\n          <p className=\"text-muted-foreground mb-4\">Élève non trouvé</p>\n          <Link href=\"/dashboard/students\">\n            <Button>Retour à la liste</Button>\n          </Link>\n        </div>\n      </div>\n    )\n  }\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault()\n    updateMutation.mutate()\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center space-x-4\">\n        <Link href={`/dashboard/students/${studentId}`}>\n          <Button variant=\"ghost\" size=\"icon\">\n            <ArrowLeft className=\"h-4 w-4\" />\n          </Button>\n        </Link>\n        <div>\n          <h1 className=\"text-3xl font-bold text-gray-900\">Modifier l'élève</h1>\n          <p className=\"mt-2 text-sm text-gray-600\">\n            Modifiez les informations de {student.first_name} {student.last_name}\n          </p>\n        </div>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Informations personnelles</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">\n                  Prénom *\n                </label>\n                <input\n                  type=\"text\"\n                  required\n                  value={formData.first_name}\n                  onChange={(e) =>\n                    setFormData({ ...formData, first_name: e.target.value })\n                  }\n                  className=\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target\"\n                />\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">\n                  Nom *\n                </label>\n                <input\n                  type=\"text\"\n                  required\n                  value={formData.last_name}\n                  onChange={(e) =>\n                    setFormData({ ...formData, last_name: e.target.value })\n                  }\n                  className=\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target\"\n                />\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">\n                  Date de naissance\n                </label>\n                <input\n                  type=\"date\"\n                  value={formData.date_of_birth}\n                  onChange={(e) =>\n                    setFormData({ ...formData, date_of_birth: e.target.value })\n                  }\n                  className=\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target\"\n                />\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">Genre</label>\n                <select\n                  value={formData.gender}\n                  onChange={(e) =>\n                    setFormData({ ...formData, gender: e.target.value })\n                  }\n                  className=\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target\"\n                >\n                  <option value=\"\">Sélectionner</option>\n                  <option value=\"male\">Masculin</option>\n                  <option value=\"female\">Féminin</option>\n                  <option value=\"other\">Autre</option>\n                </select>\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">Email</label>\n                <input\n                  type=\"email\"\n                  value={formData.email}\n                  onChange={(e) =>\n                    setFormData({ ...formData, email: e.target.value })\n                  }\n                  className=\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target\"\n                />\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">Téléphone</label>\n                <input\n                  type=\"tel\"\n                  value={formData.phone}\n                  onChange={(e) =>\n                    setFormData({ ...formData, phone: e.target.value })\n                  }\n                  className=\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium mb-2\">Adresse</label>\n              <input\n                type=\"text\"\n                value={formData.address}\n                onChange={(e) =>\n                  setFormData({ ...formData, address: e.target.value })\n                }\n                className=\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium mb-2\">Ville</label>\n              <input\n                type=\"text\"\n                value={formData.city}\n                onChange={(e) =>\n                  setFormData({ ...formData, city: e.target.value })\n                }\n                className=\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target\"\n              />\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">Session</label>\n                <select\n                  value={formData.class_id}\n                  onChange={(e) =>\n                    setFormData({ ...formData, class_id: e.target.value })\n                  }\n                  className=\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target\"\n                >\n                  <option value=\"\">Aucune session</option>\n                  {sessions?.map((session) => (\n                    <option key={session.id} value={session.id}>\n                      {session.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">Statut</label>\n                <select\n                  value={formData.status}\n                  onChange={(e) =>\n                    setFormData({ ...formData, status: e.target.value as 'active' | 'inactive' | 'graduated' })\n                  }\n                  className=\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target\"\n                >\n                  <option value=\"active\">Actif</option>\n                  <option value=\"inactive\">Inactif</option>\n                  <option value=\"graduated\">Diplômé</option>\n                </select>\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium mb-2\">\n                Date d'inscription *\n              </label>\n              <input\n                type=\"date\"\n                required\n                value={formData.enrollment_date}\n                onChange={(e) =>\n                  setFormData({ ...formData, enrollment_date: e.target.value })\n                }\n                className=\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target\"\n              />\n            </div>\n\n            {updateMutation.error && (\n              <div className=\"bg-destructive/10 text-destructive px-4 py-3 rounded-lg text-sm\">\n                {updateMutation.error instanceof Error\n                  ? updateMutation.error.message\n                  : 'Une erreur est survenue'}\n              </div>\n            )}\n\n            <div className=\"flex justify-end space-x-4 pt-4\">\n              <Link href={`/dashboard/students/${studentId}`}>\n                <Button type=\"button\" variant=\"outline\">\n                  Annuler\n                </Button>\n              </Link>\n              <Button type=\"submit\" disabled={updateMutation.isPending}>\n                {updateMutation.isPending ? 'Enregistrement...' : 'Enregistrer les modifications'}\n              </Button>\n            </div>\n          </form>\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n\n"],"names":[],"mappings":"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","ignoreList":[0]}