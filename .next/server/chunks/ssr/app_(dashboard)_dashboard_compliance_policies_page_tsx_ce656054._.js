module.exports=[30001,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(433217),e=a.i(370025),f=a.i(937927),g=a.i(913216),h=a.i(824115),i=a.i(703130),j=a.i(340695),k=a.i(205522),l=a.i(917171),m=a.i(546893),n=a.i(254161),o=a.i(965733),p=a.i(887682),q=a.i(104720),r=a.i(915618),s=a.i(587532),t=a.i(111269),u=a.i(641710),v=a.i(177156),w=a.i(54018),x=a.i(683245),y=a.i(238246),z=a.i(497895);function A(){let{user:a}=(0,g.useAuth)(),A=(0,f.useQueryClient)(),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useState)("all"),[F,G]=(0,c.useState)("all"),[H,I]=(0,c.useState)(!1),[J,K]=(0,c.useState)({code:"",title:"",category:"access_control",description:"",content:"",version:"1.0",iso27001_control:"",soc2_control:""}),{data:L}=(0,d.useQuery)({queryKey:["security-policies",a?.organization_id,D,F],queryFn:()=>h.complianceService.getPolicies(a?.organization_id||"",{status:"all"===D?void 0:D,category:"all"===F?void 0:F}),enabled:!!a?.organization_id}),M=L?.filter(a=>!B||!!a.title.toLowerCase().includes(B.toLowerCase())||!!a.code.toLowerCase().includes(B.toLowerCase())),N=(0,e.useMutation)({mutationFn:()=>h.complianceService.createPolicy({...J,organization_id:a?.organization_id||""}),onSuccess:()=>{A.invalidateQueries({queryKey:["security-policies"]}),I(!1),K({code:"",title:"",category:"access_control",description:"",content:"",version:"1.0",iso27001_control:"",soc2_control:""})}}),O={draft:"bg-gray-100 text-gray-800",active:"bg-green-100 text-green-800",archived:"bg-red-100 text-red-800"},P={pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"},Q={access_control:"Contrôle d'accès",data_protection:"Protection des données",incident_response:"Réponse aux incidents",business_continuity:"Continuité d'activité",encryption:"Chiffrement",network_security:"Sécurité réseau",physical_security:"Sécurité physique",vendor_management:"Gestion des fournisseurs",other:"Autre"};return(0,b.jsxs)("div",{className:"container mx-auto py-8 px-4 max-w-7xl",children:[(0,b.jsxs)("div",{className:"mb-8 flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[(0,b.jsx)(q.FileText,{className:"h-8 w-8"}),"Politiques de sécurité"]}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Documentation et gestion des politiques de sécurité"})]}),(0,b.jsxs)(o.Dialog,{open:H,onOpenChange:I,children:[(0,b.jsx)(o.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(j.Button,{children:[(0,b.jsx)(r.Plus,{className:"h-4 w-4 mr-2"}),"Nouvelle politique"]})}),(0,b.jsxs)(o.DialogContent,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(o.DialogHeader,{children:[(0,b.jsx)(o.DialogTitle,{children:"Créer une nouvelle politique"}),(0,b.jsx)(o.DialogDescription,{children:"Documentez une politique de sécurité pour votre organisation"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(l.Label,{children:"Code"}),(0,b.jsx)(k.Input,{value:J.code,onChange:a=>K({...J,code:a.target.value}),placeholder:"Ex: POL-001"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(l.Label,{children:"Version"}),(0,b.jsx)(k.Input,{value:J.version,onChange:a=>K({...J,version:a.target.value}),placeholder:"1.0"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(l.Label,{children:"Titre"}),(0,b.jsx)(k.Input,{value:J.title,onChange:a=>K({...J,title:a.target.value}),placeholder:"Titre de la politique"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(l.Label,{children:"Catégorie"}),(0,b.jsxs)(p.Select,{value:J.category,onValueChange:a=>K({...J,category:a}),children:[(0,b.jsx)(p.SelectTrigger,{children:(0,b.jsx)(p.SelectValue,{})}),(0,b.jsxs)(p.SelectContent,{children:[(0,b.jsx)(p.SelectItem,{value:"access_control",children:"Contrôle d'accès"}),(0,b.jsx)(p.SelectItem,{value:"data_protection",children:"Protection des données"}),(0,b.jsx)(p.SelectItem,{value:"incident_response",children:"Réponse aux incidents"}),(0,b.jsx)(p.SelectItem,{value:"business_continuity",children:"Continuité d'activité"}),(0,b.jsx)(p.SelectItem,{value:"encryption",children:"Chiffrement"}),(0,b.jsx)(p.SelectItem,{value:"network_security",children:"Sécurité réseau"}),(0,b.jsx)(p.SelectItem,{value:"physical_security",children:"Sécurité physique"}),(0,b.jsx)(p.SelectItem,{value:"vendor_management",children:"Gestion des fournisseurs"}),(0,b.jsx)(p.SelectItem,{value:"other",children:"Autre"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(l.Label,{children:"Description"}),(0,b.jsx)(m.Textarea,{value:J.description,onChange:a=>K({...J,description:a.target.value}),placeholder:"Description de la politique",rows:2})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(l.Label,{children:"Contenu"}),(0,b.jsx)(m.Textarea,{value:J.content,onChange:a=>K({...J,content:a.target.value}),placeholder:"Contenu complet de la politique",rows:8})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(l.Label,{children:"Contrôle ISO 27001 (optionnel)"}),(0,b.jsx)(k.Input,{value:J.iso27001_control,onChange:a=>K({...J,iso27001_control:a.target.value}),placeholder:"Ex: A.9.2.1"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(l.Label,{children:"Contrôle SOC 2 (optionnel)"}),(0,b.jsx)(k.Input,{value:J.soc2_control,onChange:a=>K({...J,soc2_control:a.target.value}),placeholder:"Ex: CC6.1"})]})]}),(0,b.jsx)(j.Button,{onClick:()=>N.mutate(),disabled:!J.code||!J.title||!J.content,className:"w-full",children:"Créer la politique"})]})]})]})]}),(0,b.jsxs)("div",{className:"mb-6 flex gap-4",children:[(0,b.jsxs)("div",{className:"flex-1 relative",children:[(0,b.jsx)(s.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),(0,b.jsx)(k.Input,{placeholder:"Rechercher une politique...",value:B,onChange:a=>C(a.target.value),className:"pl-10"})]}),(0,b.jsxs)(p.Select,{value:D,onValueChange:E,children:[(0,b.jsx)(p.SelectTrigger,{className:"w-48",children:(0,b.jsx)(p.SelectValue,{})}),(0,b.jsxs)(p.SelectContent,{children:[(0,b.jsx)(p.SelectItem,{value:"all",children:"Tous les statuts"}),(0,b.jsx)(p.SelectItem,{value:"draft",children:"Brouillon"}),(0,b.jsx)(p.SelectItem,{value:"active",children:"Active"}),(0,b.jsx)(p.SelectItem,{value:"archived",children:"Archivée"})]})]}),(0,b.jsxs)(p.Select,{value:F,onValueChange:G,children:[(0,b.jsx)(p.SelectTrigger,{className:"w-56",children:(0,b.jsx)(p.SelectValue,{})}),(0,b.jsxs)(p.SelectContent,{children:[(0,b.jsx)(p.SelectItem,{value:"all",children:"Toutes les catégories"}),(0,b.jsx)(p.SelectItem,{value:"access_control",children:"Contrôle d'accès"}),(0,b.jsx)(p.SelectItem,{value:"data_protection",children:"Protection des données"}),(0,b.jsx)(p.SelectItem,{value:"incident_response",children:"Réponse aux incidents"}),(0,b.jsx)(p.SelectItem,{value:"business_continuity",children:"Continuité d'activité"}),(0,b.jsx)(p.SelectItem,{value:"encryption",children:"Chiffrement"}),(0,b.jsx)(p.SelectItem,{value:"network_security",children:"Sécurité réseau"}),(0,b.jsx)(p.SelectItem,{value:"physical_security",children:"Sécurité physique"}),(0,b.jsx)(p.SelectItem,{value:"vendor_management",children:"Gestion des fournisseurs"})]})]})]}),M&&M.length>0?(0,b.jsx)("div",{className:"grid grid-cols-1 gap-4",children:M.map(a=>(0,b.jsxs)(i.Card,{children:[(0,b.jsx)(i.CardHeader,{children:(0,b.jsx)("div",{className:"flex items-start justify-between",children:(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(i.CardTitle,{className:"text-lg",children:a.title}),(0,b.jsx)(n.Badge,{variant:"outline",children:a.code}),(0,b.jsxs)(n.Badge,{children:["v",a.version]}),(0,b.jsxs)(n.Badge,{className:O[a.status]||"bg-gray-100 text-gray-800",children:["draft"===a.status?(0,b.jsx)(x.Edit,{className:"h-3 w-3 mr-1"}):"active"===a.status?(0,b.jsx)(t.CheckCircle2,{className:"h-3 w-3 mr-1"}):(0,b.jsx)(w.XCircle,{className:"h-3 w-3 mr-1"}),"draft"===a.status?"Brouillon":"active"===a.status?"Active":"Archivée"]}),(0,b.jsxs)(n.Badge,{className:P[a.approval_status]||"bg-gray-100 text-gray-800",children:["pending"===a.approval_status?(0,b.jsx)(u.Clock,{className:"h-3 w-3 mr-1"}):"approved"===a.approval_status?(0,b.jsx)(t.CheckCircle2,{className:"h-3 w-3 mr-1"}):(0,b.jsx)(w.XCircle,{className:"h-3 w-3 mr-1"}),"pending"===a.approval_status?"En attente":"approved"===a.approval_status?"Approuvée":"Rejetée"]})]}),a.description&&(0,b.jsx)(i.CardDescription,{className:"mt-2",children:a.description})]})})}),(0,b.jsx)(i.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Catégorie: "}),(0,b.jsx)(n.Badge,{variant:"outline",children:Q[a.category]||a.category})]}),a.iso27001_control&&(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"ISO 27001: "}),(0,b.jsx)(n.Badge,{variant:"outline",children:a.iso27001_control})]}),a.soc2_control&&(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"SOC 2: "}),(0,b.jsx)(n.Badge,{variant:"outline",children:a.soc2_control})]}),a.effective_date&&(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"En vigueur depuis: "}),(0,b.jsx)("span",{className:"text-sm",children:(0,z.formatDate)(a.effective_date)})]})]}),a.approved_by_user&&(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Approuvée par: "}),(0,b.jsx)("span",{className:"text-sm",children:a.approved_by_user.full_name||a.approved_by_user.email}),a.approved_at&&(0,b.jsxs)("span",{className:"text-sm text-muted-foreground ml-2",children:["le ",(0,z.formatDate)(a.approved_at)]})]}),(0,b.jsx)("div",{className:"flex items-center gap-2 pt-2",children:(0,b.jsx)(y.default,{href:`/dashboard/compliance/policies/${a.id}`,children:(0,b.jsxs)(j.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(v.Eye,{className:"h-4 w-4 mr-2"}),"Voir les détails"]})})})]})})]},a.id))}):(0,b.jsx)(i.Card,{children:(0,b.jsxs)(i.CardContent,{className:"pt-6 text-center text-muted-foreground",children:["Aucune politique trouvée. ",B&&"Essayez une autre recherche."]})})]})}a.s(["default",()=>A])}];

//# sourceMappingURL=app_%28dashboard%29_dashboard_compliance_policies_page_tsx_ce656054._.js.map