{"version":3,"sources":["../../../../app/%28dashboard%29/dashboard/sessions/%5Bid%5D/components/student-documents-section.tsx","../../../../app/%28dashboard%29/dashboard/sessions/%5Bid%5D/components/session-elearning-section.tsx","../../../../app/%28dashboard%29/dashboard/sessions/%5Bid%5D/sections/espace-apprenant.tsx","../../../../node_modules/lucide-react/src/icons/link-2.ts"],"sourcesContent":["'use client'\n\nimport { useQuery } from '@tanstack/react-query'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { FileText, Download, Plus, Mail, Award } from 'lucide-react'\nimport { formatDate } from '@/lib/utils'\nimport { documentService } from '@/lib/services/document.service'\nimport { useToast } from '@/components/ui/toast'\nimport type { DocumentWithRelations } from '@/lib/types/query-types'\n\ninterface StudentDocumentsSectionProps {\n  studentId: string\n  organizationId: string\n}\n\nexport function StudentDocumentsSection({\n  studentId,\n  organizationId,\n}: StudentDocumentsSectionProps) {\n  const { addToast } = useToast()\n  const { data: documents, isLoading } = useQuery<{ data: any[]; total: number; page: number; limit: number; totalPages: number }>({\n    queryKey: ['student-documents', studentId, organizationId],\n    queryFn: async () => {\n      if (!organizationId) return { data: [], total: 0, page: 1, limit: 50, totalPages: 0 }\n      return documentService.getAll(organizationId, {\n        studentId: studentId,\n      })\n    },\n    enabled: !!studentId && !!organizationId,\n  })\n\n  const getDocumentTypeIcon = (type: string) => {\n    switch (type) {\n      case 'certificate':\n        return <Award className=\"h-4 w-4\" />\n      case 'transcript':\n        return <FileText className=\"h-4 w-4\" />\n      case 'attestation':\n        return <FileText className=\"h-4 w-4\" />\n      case 'contract':\n        return <FileText className=\"h-4 w-4\" />\n      case 'convocation':\n        return <Mail className=\"h-4 w-4\" />\n      default:\n        return <FileText className=\"h-4 w-4\" />\n    }\n  }\n\n  const getDocumentTypeLabel = (type: string) => {\n    switch (type) {\n      case 'certificate':\n        return 'Certificat'\n      case 'transcript':\n        return 'Relevé de notes'\n      case 'attestation':\n        return 'Attestation'\n      case 'contract':\n        return 'Contrat'\n      case 'convocation':\n        return 'Convocation'\n      case 'invoice':\n        return 'Facture'\n      case 'receipt':\n        return 'Reçu'\n      default:\n        return type\n    }\n  }\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle className=\"text-base flex items-center justify-between\">\n          <span className=\"flex items-center\">\n            <FileText className=\"h-5 w-5 mr-2\" />\n            Documents partagés\n          </span>\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() => {\n              addToast({\n                type: 'info',\n                title: 'Fonctionnalité à venir',\n                description: 'L\\'upload de documents sera implémenté prochainement. Vous pourrez ajouter des supports de cours, exercices et autres documents.',\n                duration: 7000,\n              })\n            }}\n          >\n            <Plus className=\"h-4 w-4 mr-2\" />\n            Ajouter un document\n          </Button>\n        </CardTitle>\n      </CardHeader>\n      <CardContent>\n        {isLoading ? (\n          <p className=\"text-sm text-muted-foreground\">Chargement des documents...</p>\n        ) : documents && documents.data && documents.data.length > 0 ? (\n          <div className=\"space-y-3\">\n            {documents.data.map((doc) => (\n              <div key={doc.id} className=\"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 transition-colors\">\n                <div className=\"flex items-center space-x-3 flex-1\">\n                  <div className=\"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600\">\n                    {getDocumentTypeIcon(doc.type)}\n                  </div>\n                  <div className=\"flex-1\">\n                    <p className=\"font-medium\">{doc.title}</p>\n                    <p className=\"text-sm text-muted-foreground\">\n                      {getDocumentTypeLabel(doc.type)}\n                      {doc.created_at && ` • ${formatDate(doc.created_at)}`}\n                    </p>\n                  </div>\n                </div>\n                <div className=\"flex items-center space-x-2\">\n                  {doc.file_url && (\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => {\n                        if (doc.file_url) {\n                          window.open(doc.file_url, '_blank')\n                        }\n                      }}\n                    >\n                      <Download className=\"h-4 w-4\" />\n                    </Button>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        ) : (\n          <div className=\"text-center py-8 text-muted-foreground\">\n            <FileText className=\"h-12 w-12 mx-auto mb-3 opacity-50\" />\n            <p className=\"text-sm\">Aucun document partagé pour le moment</p>\n            <p className=\"text-xs mt-1\">Les supports de cours et exercices apparaîtront ici</p>\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  )\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","'use client'\n\nimport { useState } from 'react'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { Badge } from '@/components/ui/badge'\nimport { Progress } from '@/components/ui/progress'\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog'\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Checkbox } from '@/components/ui/checkbox'\nimport {\n  GraduationCap,\n  Plus,\n  Trash2,\n  BookOpen,\n  Users,\n  TrendingUp,\n  Clock,\n  CheckCircle,\n  XCircle,\n  AlertCircle,\n  ExternalLink,\n  BarChart3,\n  Eye,\n  Loader2,\n  PlayCircle,\n} from 'lucide-react'\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query'\nimport { createClient } from '@/lib/supabase/client'\nimport { toast } from 'sonner'\nimport { formatDate, cn } from '@/lib/utils'\nimport Link from 'next/link'\nimport type { EnrollmentWithRelations, StudentWithRelations } from '@/lib/types/query-types'\n\ninterface SessionElearningSectionProps {\n  sessionId: string\n  organizationId: string\n  enrollments: EnrollmentWithRelations[]\n}\n\ninterface SessionCourse {\n  id: string\n  session_id: string\n  course_id: string\n  is_required: boolean\n  due_date: string | null\n  assigned_at: string\n  course?: {\n    id: string\n    title: string\n    slug: string\n    short_description: string | null\n    difficulty_level: string\n    estimated_duration_hours: number | null\n    thumbnail_url: string | null\n    is_published: boolean\n  }\n}\n\ninterface StudentProgress {\n  student_id: string\n  student_name: string\n  course_id: string\n  progress: number\n  completed_lessons: number\n  total_lessons: number\n  quiz_score: number | null\n  last_activity: string | null\n  status: 'not_started' | 'in_progress' | 'completed'\n}\n\nexport function SessionElearningSection({\n  sessionId,\n  organizationId,\n  enrollments,\n}: SessionElearningSectionProps) {\n  const supabase = createClient()\n  const queryClient = useQueryClient()\n  const [showAddCourse, setShowAddCourse] = useState(false)\n  const [selectedCourseId, setSelectedCourseId] = useState<string>('')\n  const [isRequired, setIsRequired] = useState(true)\n  const [dueDate, setDueDate] = useState<string>('')\n  const [expandedCourse, setExpandedCourse] = useState<string | null>(null)\n  const [viewMode, setViewMode] = useState<'course' | 'student'>('student')\n  const [expandedStudent, setExpandedStudent] = useState<string | null>(null)\n\n  const isMissingTableError = (error: any) => {\n    const code = error?.code\n    const status = error?.status\n    const message = (error?.message || '').toLowerCase()\n    return (\n      code === 'PGRST116' || // table not found (sometimes)\n      code === 'PGRST205' || // schema cache / table not found\n      code === '42P01' || // relation does not exist\n      status === 404 ||\n      message.includes('could not find the table') ||\n      message.includes('schema cache') ||\n      message.includes('does not exist')\n    )\n  }\n\n  // Récupérer les cours assignés à cette session\n  const { data: sessionCourses, isLoading: loadingSessionCourses } = useQuery({\n    queryKey: ['session-courses', sessionId],\n    queryFn: async () => {\n      try {\n        const { data, error } = await supabase\n          .from('session_courses')\n          .select(`\n            *,\n            course:courses(\n              id, title, slug, short_description, difficulty_level,\n              estimated_duration_hours, thumbnail_url, is_published\n            )\n          `)\n          .eq('session_id', sessionId)\n          .order('assigned_at', { ascending: false })\n\n        if (error) {\n          // Table pas encore créée / schema cache pas rechargé\n          if (isMissingTableError(error)) {\n            return []\n          }\n          throw error\n        }\n        return (data || []) as SessionCourse[]\n      } catch (error: any) {\n        if (isMissingTableError(error)) return []\n        console.warn('Error fetching session courses:', error)\n        return []\n      }\n    },\n    enabled: !!sessionId,\n  })\n\n  // Récupérer tous les cours disponibles pour l'organisation\n  const { data: availableCourses } = useQuery({\n    queryKey: ['available-courses', organizationId],\n    queryFn: async () => {\n      try {\n        const { data, error } = await supabase\n          .from('courses')\n          .select('id, title, slug, is_published, difficulty_level')\n          .eq('organization_id', organizationId)\n          .eq('is_published', true)\n          .order('title', { ascending: true })\n\n        if (error) {\n          if (error.code === 'PGRST116' || error.code === '42P01') {\n            return []\n          }\n          throw error\n        }\n        return data || []\n      } catch (error: any) {\n        console.warn('Error fetching available courses:', error)\n        return []\n      }\n    },\n    enabled: !!organizationId,\n  })\n\n  // Récupérer la progression de tous les apprenants pour les cours de la session\n  const { data: studentProgressData } = useQuery({\n    queryKey: ['session-elearning-progress', sessionId, sessionCourses?.map(c => c.course_id)],\n    queryFn: async () => {\n      if (!sessionCourses?.length || !enrollments.length) return []\n\n      const courseIds = sessionCourses.map(sc => sc.course_id)\n      const studentIds = enrollments.map(e => e.student_id).filter((id): id is string => id !== null)\n\n      try {\n        // Récupérer les inscriptions aux cours\n        const { data: courseEnrollments, error: enrollError } = await supabase\n          .from('course_enrollments')\n          .select('*')\n          .in('course_id', courseIds)\n          .in('student_id', studentIds)\n\n        if (enrollError) {\n          if (isMissingTableError(enrollError)) return []\n          console.warn('Error fetching course enrollments:', enrollError)\n          return []\n        }\n\n        // Récupérer la progression des leçons\n        const { data: lessonProgress, error: progressError } = await supabase\n          .from('lesson_progress')\n          .select('*, lessons(course_id)')\n          .in('student_id', studentIds)\n\n        if (progressError) {\n          if (!isMissingTableError(progressError)) console.warn('Error fetching lesson progress:', progressError)\n        }\n\n        // Récupérer le nombre total de leçons par cours\n        const { data: lessons, error: lessonsError } = await supabase\n          .from('lessons')\n          .select('id, course_id')\n          .in('course_id', courseIds)\n\n        if (lessonsError) {\n          if (!isMissingTableError(lessonsError)) console.warn('Error fetching lessons:', lessonsError)\n        }\n\n        // Récupérer les scores des quiz\n        const { data: quizAttempts, error: quizError } = await supabase\n          .from('quiz_attempts')\n          .select('*, quizzes(lesson_id, lessons(course_id))')\n          .in('student_id', studentIds)\n          // Le schéma actuel utilise `completed_at` (pas `is_completed`)\n          .not('completed_at', 'is', null)\n\n        if (quizError) {\n          if (!isMissingTableError(quizError)) console.warn('Error fetching quiz attempts:', quizError)\n        }\n\n        // Calculer la progression pour chaque apprenant et chaque cours\n        const progressMap: StudentProgress[] = []\n\n        for (const enrollment of enrollments) {\n          const student = enrollment.students as StudentWithRelations\n          if (!student) continue\n\n          for (const sessionCourse of sessionCourses) {\n            const courseId = sessionCourse.course_id\n            const courseLessons = lessons?.filter(l => l.course_id === courseId) || []\n            const totalLessons = courseLessons.length\n\n            const studentLessonProgress = (lessonProgress || []).filter(\n              (lp: any) => lp.student_id === enrollment.student_id && lp.lessons?.course_id === courseId\n            )\n            const completedLessons = studentLessonProgress.filter((lp: any) => lp.is_completed).length\n\n            const progress = totalLessons > 0 ? Math.round((completedLessons / totalLessons) * 100) : 0\n\n            // Score moyen des quiz pour ce cours\n            const courseQuizAttempts = (quizAttempts || []).filter(\n              (qa: any) => qa.student_id === enrollment.student_id && qa.quizzes?.lessons?.course_id === courseId\n            )\n            const quizScore = courseQuizAttempts.length > 0\n              ? Math.round(courseQuizAttempts.reduce((sum: number, qa: any) => sum + (qa.score || 0), 0) / courseQuizAttempts.length)\n              : null\n\n            const lastProgress = studentLessonProgress.sort((a: any, b: any) => \n              new Date(b.last_accessed_at || b.started_at || b.completed_at || 0).getTime() - new Date(a.last_accessed_at || a.started_at || a.completed_at || 0).getTime()\n            )[0]\n\n            let status: 'not_started' | 'in_progress' | 'completed' = 'not_started'\n            if (completedLessons > 0 && completedLessons >= totalLessons) {\n              status = 'completed'\n            } else if (completedLessons > 0) {\n              status = 'in_progress'\n            }\n\n            if (enrollment.student_id) {\n              progressMap.push({\n                student_id: enrollment.student_id,\n                student_name: `${student.first_name} ${student.last_name}`,\n                course_id: courseId,\n                progress,\n                completed_lessons: completedLessons,\n                total_lessons: totalLessons,\n                quiz_score: quizScore,\n                last_activity: lastProgress?.last_accessed_at || lastProgress?.started_at || lastProgress?.completed_at || null,\n                status,\n              })\n            }\n          }\n        }\n\n        return progressMap\n      } catch (error: any) {\n        if (isMissingTableError(error)) return []\n        console.warn('Error calculating progress:', error)\n        return []\n      }\n    },\n    enabled: !!sessionCourses?.length && !!enrollments.length,\n  })\n\n  // Mutation pour ajouter un cours à la session\n  const addCourseMutation = useMutation({\n    mutationFn: async () => {\n      if (!selectedCourseId) throw new Error('Veuillez sélectionner un cours')\n\n      const { data, error } = await supabase\n        .from('session_courses')\n        .insert({\n          session_id: sessionId,\n          course_id: selectedCourseId,\n          is_required: isRequired,\n          due_date: dueDate || null,\n        })\n        .select()\n        .single()\n\n      if (error) throw error\n      return data\n    },\n    onSuccess: () => {\n      toast.success('Cours ajouté à la session')\n      queryClient.invalidateQueries({ queryKey: ['session-courses', sessionId] })\n      setShowAddCourse(false)\n      setSelectedCourseId('')\n      setIsRequired(true)\n      setDueDate('')\n    },\n    onError: (error: Error) => {\n      toast.error(error.message || 'Erreur lors de l\\'ajout du cours')\n    },\n  })\n\n  // Mutation pour supprimer un cours de la session\n  const removeCourseMutation = useMutation({\n    mutationFn: async (sessionCourseId: string) => {\n      const { error } = await supabase\n        .from('session_courses')\n        .delete()\n        .eq('id', sessionCourseId)\n\n      if (error) throw error\n    },\n    onSuccess: () => {\n      toast.success('Cours retiré de la session')\n      queryClient.invalidateQueries({ queryKey: ['session-courses', sessionId] })\n    },\n    onError: (error: Error) => {\n      toast.error(error.message || 'Erreur lors de la suppression du cours')\n    },\n  })\n\n  // Calculer les statistiques globales\n  const getGlobalStats = () => {\n    if (!studentProgressData?.length || !sessionCourses?.length) {\n      return { avgProgress: 0, completed: 0, inProgress: 0, notStarted: 0, avgScore: null }\n    }\n\n    const totalEntries = studentProgressData.length\n    const avgProgress = Math.round(\n      studentProgressData.reduce((sum, p) => sum + p.progress, 0) / totalEntries\n    )\n\n    const completed = studentProgressData.filter(p => p.status === 'completed').length\n    const inProgress = studentProgressData.filter(p => p.status === 'in_progress').length\n    const notStarted = studentProgressData.filter(p => p.status === 'not_started').length\n\n    const scoresWithData = studentProgressData.filter(p => p.quiz_score !== null)\n    const avgScore = scoresWithData.length > 0\n      ? Math.round(scoresWithData.reduce((sum, p) => sum + (p.quiz_score || 0), 0) / scoresWithData.length)\n      : null\n\n    return { avgProgress, completed, inProgress, notStarted, avgScore }\n  }\n\n  const globalStats = getGlobalStats()\n\n  // Filtrer les cours déjà assignés\n  const coursesNotAssigned = (availableCourses || []).filter(\n    course => !sessionCourses?.some(sc => sc.course_id === course.id)\n  )\n\n  // Affichage des statistiques par cours\n  const getCourseStats = (courseId: string) => {\n    const courseProgress = studentProgressData?.filter(p => p.course_id === courseId) || []\n    if (!courseProgress.length) {\n      return { avgProgress: 0, completed: 0, total: enrollments.length, avgScore: null }\n    }\n\n    const avgProgress = Math.round(\n      courseProgress.reduce((sum, p) => sum + p.progress, 0) / courseProgress.length\n    )\n    const completed = courseProgress.filter(p => p.status === 'completed').length\n    const scoresWithData = courseProgress.filter(p => p.quiz_score !== null)\n    const avgScore = scoresWithData.length > 0\n      ? Math.round(scoresWithData.reduce((sum, p) => sum + (p.quiz_score || 0), 0) / scoresWithData.length)\n      : null\n\n    return { avgProgress, completed, total: enrollments.length, avgScore }\n  }\n\n  // Suivi nominatif (par apprenant)\n  const progressByStudent = (studentProgressData || []).reduce((acc: Record<string, any>, p) => {\n    acc[p.student_id] = acc[p.student_id] || { student_id: p.student_id, student_name: p.student_name, courses: [] as StudentProgress[] }\n    acc[p.student_id].courses.push(p)\n    return acc\n  }, {})\n\n  const getStudentStats = (studentId: string) => {\n    const entries: StudentProgress[] = progressByStudent?.[studentId]?.courses || []\n    const avgProgress = entries.length ? Math.round(entries.reduce((s, e) => s + e.progress, 0) / entries.length) : 0\n    const completed = entries.filter(e => e.status === 'completed').length\n    const inProgress = entries.filter(e => e.status === 'in_progress').length\n    const notStarted = entries.filter(e => e.status === 'not_started').length\n    const scores = entries.filter(e => e.quiz_score !== null).map(e => e.quiz_score as number)\n    const avgScore = scores.length ? Math.round(scores.reduce((s, v) => s + v, 0) / scores.length) : null\n    return { avgProgress, completed, inProgress, notStarted, avgScore }\n  }\n\n  if (loadingSessionCourses) {\n    return (\n      <Card>\n        <CardContent className=\"py-12\">\n          <div className=\"flex items-center justify-center\">\n            <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n          </div>\n        </CardContent>\n      </Card>\n    )\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <Card className=\"border-purple-200 bg-gradient-to-r from-purple-50/50 to-indigo-50/50\">\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <CardTitle className=\"text-lg flex items-center\">\n              <GraduationCap className=\"h-5 w-5 mr-2 text-purple-600\" />\n              E-Learning de la session\n            </CardTitle>\n            <div className=\"flex flex-wrap gap-2 items-center\">\n              <div className=\"flex rounded-lg border bg-white/70 p-1\">\n                <button\n                  type=\"button\"\n                  className={cn('px-3 py-1 text-sm rounded-md', viewMode === 'student' ? 'bg-purple-600 text-white' : 'text-gray-700')}\n                  onClick={() => setViewMode('student')}\n                >\n                  Suivi nominatif\n                </button>\n                <button\n                  type=\"button\"\n                  className={cn('px-3 py-1 text-sm rounded-md', viewMode === 'course' ? 'bg-purple-600 text-white' : 'text-gray-700')}\n                  onClick={() => setViewMode('course')}\n                >\n                  Par séquence\n                </button>\n              </div>\n              <Button\n                onClick={() => setShowAddCourse(true)}\n                disabled={coursesNotAssigned.length === 0}\n                className=\"bg-purple-600 hover:bg-purple-700\"\n              >\n                <Plus className=\"h-4 w-4 mr-2\" />\n                Ajouter une séquence\n              </Button>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent>\n          <p className=\"text-sm text-muted-foreground\">\n            Assignez des séquences e-learning aux apprenants de cette session et suivez leur progression.\n          </p>\n        </CardContent>\n      </Card>\n\n      {/* Statistiques globales */}\n      {sessionCourses && sessionCourses.length > 0 && (\n        <div className=\"grid grid-cols-1 md:grid-cols-5 gap-4\">\n          <Card>\n            <CardContent className=\"pt-6\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">Séquences</p>\n                  <p className=\"text-2xl font-bold\">{sessionCourses.length}</p>\n                </div>\n                <BookOpen className=\"h-8 w-8 text-purple-600 opacity-50\" />\n              </div>\n            </CardContent>\n          </Card>\n          <Card>\n            <CardContent className=\"pt-6\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">Progression moy.</p>\n                  <p className=\"text-2xl font-bold\">{globalStats.avgProgress}%</p>\n                </div>\n                <TrendingUp className=\"h-8 w-8 text-blue-600 opacity-50\" />\n              </div>\n            </CardContent>\n          </Card>\n          <Card>\n            <CardContent className=\"pt-6\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">Terminés</p>\n                  <p className=\"text-2xl font-bold text-green-600\">{globalStats.completed}</p>\n                </div>\n                <CheckCircle className=\"h-8 w-8 text-green-600 opacity-50\" />\n              </div>\n            </CardContent>\n          </Card>\n          <Card>\n            <CardContent className=\"pt-6\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">En cours</p>\n                  <p className=\"text-2xl font-bold text-yellow-600\">{globalStats.inProgress}</p>\n                </div>\n                <PlayCircle className=\"h-8 w-8 text-yellow-600 opacity-50\" />\n              </div>\n            </CardContent>\n          </Card>\n          <Card>\n            <CardContent className=\"pt-6\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">Score moy.</p>\n                  <p className=\"text-2xl font-bold\">\n                    {globalStats.avgScore !== null ? `${globalStats.avgScore}%` : 'N/A'}\n                  </p>\n                </div>\n                <BarChart3 className=\"h-8 w-8 text-indigo-600 opacity-50\" />\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      )}\n\n      {/* Liste (suivi nominatif / par séquence) */}\n      {(!sessionCourses || sessionCourses.length === 0) ? (\n        <Card>\n          <CardContent className=\"py-12\">\n            <div className=\"text-center text-muted-foreground\">\n              <GraduationCap className=\"h-16 w-16 mx-auto mb-4 opacity-50\" />\n              <p className=\"text-lg font-medium mb-2\">Aucune séquence e-learning assignée</p>\n              <p className=\"text-sm mb-4\">\n                Ajoutez des séquences e-learning pour permettre aux apprenants de suivre des cours en ligne.\n              </p>\n              {coursesNotAssigned.length > 0 ? (\n                <Button onClick={() => setShowAddCourse(true)} className=\"bg-purple-600 hover:bg-purple-700\">\n                  <Plus className=\"h-4 w-4 mr-2\" />\n                  Ajouter une séquence\n                </Button>\n              ) : (\n                <p className=\"text-sm text-muted-foreground\">\n                  Aucun cours e-learning disponible.{' '}\n                  <Link href=\"/dashboard/elearning\" className=\"text-purple-600 hover:underline\">\n                    Créer un cours\n                  </Link>\n                </p>\n              )}\n            </div>\n          </CardContent>\n        </Card>\n      ) : (\n        <>\n          {viewMode === 'student' ? (\n            <div className=\"space-y-4\">\n              {enrollments.map((enrollment) => {\n                const student = enrollment.students as StudentWithRelations\n                if (!student || !enrollment.student_id) return null\n                const studentId = enrollment.student_id // TypeScript sait que c'est non-null maintenant\n                const stats = getStudentStats(studentId)\n                const isExpanded = expandedStudent === studentId\n                const entries: StudentProgress[] = progressByStudent?.[studentId]?.courses || []\n\n                return (\n                  <Card key={enrollment.student_id} className=\"overflow-hidden\">\n                    <CardContent className=\"p-0\">\n                      <div className=\"p-4 flex items-center justify-between\">\n                        <div className=\"flex items-center gap-3 flex-1 min-w-0\">\n                          <div className=\"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center\">\n                            <Users className=\"h-5 w-5 text-purple-600\" />\n                          </div>\n                          <div className=\"min-w-0\">\n                            <p className=\"font-semibold truncate\">{student.first_name} {student.last_name}</p>\n                            <p className=\"text-xs text-muted-foreground truncate\">{student.email}</p>\n                          </div>\n                        </div>\n\n                        <div className=\"flex items-center gap-6 mr-4\">\n                          <div className=\"text-center\">\n                            <p className=\"text-xs text-muted-foreground\">Progression</p>\n                            <p className=\"text-sm font-semibold\">{stats.avgProgress}%</p>\n                          </div>\n                          <div className=\"text-center\">\n                            <p className=\"text-xs text-muted-foreground\">Terminés</p>\n                            <p className=\"text-sm font-semibold text-green-600\">{stats.completed}</p>\n                          </div>\n                          {stats.avgScore !== null && (\n                            <div className=\"text-center\">\n                              <p className=\"text-xs text-muted-foreground\">Score</p>\n                              <p className=\"text-sm font-semibold\">{stats.avgScore}%</p>\n                            </div>\n                          )}\n                        </div>\n\n                        <Button variant=\"outline\" size=\"sm\" onClick={() => setExpandedStudent(isExpanded ? null : enrollment.student_id)}>\n                          <Eye className=\"h-4 w-4 mr-2\" />\n                          {isExpanded ? 'Masquer' : 'Détails'}\n                        </Button>\n                      </div>\n\n                      <div className=\"px-4 pb-4\">\n                        <Progress value={stats.avgProgress} className=\"h-2\" />\n                      </div>\n\n                      {isExpanded && (\n                        <div className=\"border-t bg-gray-50/50 p-4 space-y-2\">\n                          {entries.length === 0 ? (\n                            <p className=\"text-sm text-muted-foreground text-center py-4\">\n                              Aucune séquence assignée ou aucune progression enregistrée.\n                            </p>\n                          ) : (\n                            entries.map((p) => {\n                              const courseMeta = sessionCourses.find(sc => sc.course_id === p.course_id)\n                              return (\n                                <div key={`${p.student_id}-${p.course_id}`} className=\"flex items-center justify-between p-3 bg-white rounded-lg border\">\n                                  <div className=\"min-w-0\">\n                                    <p className=\"font-medium text-sm truncate\">{courseMeta?.course?.title || 'Séquence'}</p>\n                                    <p className=\"text-xs text-muted-foreground\">\n                                      {p.completed_lessons}/{p.total_lessons} leçons\n                                      {p.last_activity && ` • Dernière activité: ${formatDate(p.last_activity)}`}\n                                    </p>\n                                  </div>\n                                  <div className=\"flex items-center gap-4\">\n                                    <div className=\"w-24\">\n                                      <Progress value={p.progress} className=\"h-2\" />\n                                      <p className=\"text-xs text-center mt-1\">{p.progress}%</p>\n                                    </div>\n                                    {p.quiz_score !== null && (\n                                      <div className=\"text-center\">\n                                        <p className=\"text-xs text-muted-foreground\">Quiz</p>\n                                        <p className=\"text-sm font-semibold\">{p.quiz_score}%</p>\n                                      </div>\n                                    )}\n                                    <Badge variant={p.status === 'completed' ? 'default' : p.status === 'in_progress' ? 'secondary' : 'outline'}>\n                                      {p.status === 'completed' ? 'Terminé' : p.status === 'in_progress' ? 'En cours' : 'Non commencé'}\n                                    </Badge>\n                                  </div>\n                                </div>\n                              )\n                            })\n                          )}\n                        </div>\n                      )}\n                    </CardContent>\n                  </Card>\n                )\n              })}\n            </div>\n          ) : (\n            <div className=\"space-y-4\">\n              {sessionCourses.map((sessionCourse) => {\n                const course = sessionCourse.course\n                if (!course) return null\n\n                const stats = getCourseStats(sessionCourse.course_id)\n                const isExpanded = expandedCourse === sessionCourse.id\n                const courseProgress = studentProgressData?.filter(p => p.course_id === sessionCourse.course_id) || []\n\n                return (\n                  <Card key={sessionCourse.id} className=\"overflow-hidden\">\n                    <CardContent className=\"p-0\">\n                      <div className=\"p-4 flex items-center justify-between\">\n                        <div className=\"flex items-center space-x-4 flex-1\">\n                          {course.thumbnail_url ? (\n                            <img src={course.thumbnail_url} alt={course.title} className=\"w-16 h-16 rounded-lg object-cover\" />\n                          ) : (\n                            <div className=\"w-16 h-16 rounded-lg bg-purple-100 flex items-center justify-center\">\n                              <BookOpen className=\"h-8 w-8 text-purple-600\" />\n                            </div>\n                          )}\n                          <div className=\"flex-1\">\n                            <div className=\"flex items-center gap-2 mb-1\">\n                              <h3 className=\"font-semibold\">{course.title}</h3>\n                              {sessionCourse.is_required && <Badge variant=\"secondary\" className=\"text-xs\">Obligatoire</Badge>}\n                              <Badge variant=\"outline\" className=\"text-xs\">\n                                {course.difficulty_level === 'beginner' ? 'Débutant' : course.difficulty_level === 'intermediate' ? 'Intermédiaire' : 'Avancé'}\n                              </Badge>\n                            </div>\n                            {course.short_description && <p className=\"text-sm text-muted-foreground line-clamp-1\">{course.short_description}</p>}\n                            <div className=\"flex items-center gap-4 mt-2 text-xs text-muted-foreground\">\n                              {course.estimated_duration_hours && (\n                                <span className=\"flex items-center gap-1\">\n                                  <Clock className=\"h-3 w-3\" />\n                                  {course.estimated_duration_hours}h\n                                </span>\n                              )}\n                              {sessionCourse.due_date && (\n                                <span className=\"flex items-center gap-1\">\n                                  <AlertCircle className=\"h-3 w-3\" />\n                                  Échéance: {formatDate(sessionCourse.due_date)}\n                                </span>\n                              )}\n                            </div>\n                          </div>\n                        </div>\n\n                        <div className=\"flex items-center gap-6 mr-4\">\n                          <div className=\"text-center\">\n                            <p className=\"text-xs text-muted-foreground\">Progression</p>\n                            <p className=\"text-sm font-semibold\">{stats.avgProgress}%</p>\n                          </div>\n                          <div className=\"text-center\">\n                            <p className=\"text-xs text-muted-foreground\">Terminés</p>\n                            <p className=\"text-sm font-semibold text-green-600\">{stats.completed}/{stats.total}</p>\n                          </div>\n                          {stats.avgScore !== null && (\n                            <div className=\"text-center\">\n                              <p className=\"text-xs text-muted-foreground\">Score</p>\n                              <p className=\"text-sm font-semibold\">{stats.avgScore}%</p>\n                            </div>\n                          )}\n                        </div>\n\n                        <div className=\"flex items-center gap-2\">\n                          <Button variant=\"ghost\" size=\"sm\" onClick={() => setExpandedCourse(isExpanded ? null : sessionCourse.id)}>\n                            <Eye className=\"h-4 w-4 mr-1\" />\n                            {isExpanded ? 'Masquer' : 'Détails'}\n                          </Button>\n                          <Link href={`/dashboard/elearning/courses/${course.slug}`} target=\"_blank\">\n                            <Button variant=\"ghost\" size=\"sm\">\n                              <ExternalLink className=\"h-4 w-4\" />\n                            </Button>\n                          </Link>\n                          <Button\n                            variant=\"ghost\"\n                            size=\"sm\"\n                            onClick={() => removeCourseMutation.mutate(sessionCourse.id)}\n                            disabled={removeCourseMutation.isPending}\n                            className=\"text-red-600 hover:text-red-700 hover:bg-red-50\"\n                          >\n                            <Trash2 className=\"h-4 w-4\" />\n                          </Button>\n                        </div>\n                      </div>\n\n                      <div className=\"px-4 pb-4\">\n                        <Progress value={stats.avgProgress} className=\"h-2\" />\n                      </div>\n\n                      {isExpanded && (\n                        <div className=\"border-t bg-gray-50/50 p-4\">\n                          <h4 className=\"text-sm font-medium mb-3 flex items-center\">\n                            <Users className=\"h-4 w-4 mr-2\" />\n                            Progression par apprenant\n                          </h4>\n                          <div className=\"space-y-2 max-h-96 overflow-y-auto\">\n                            {courseProgress.length === 0 ? (\n                              <p className=\"text-sm text-muted-foreground text-center py-4\">\n                                Aucune donnée de progression disponible\n                              </p>\n                            ) : (\n                              courseProgress.map((progress) => (\n                                <div key={`${progress.student_id}-${progress.course_id}`} className=\"flex items-center justify-between p-3 bg-white rounded-lg border\">\n                                  <div className=\"flex items-center gap-3 flex-1\">\n                                    <div className={cn(\"w-8 h-8 rounded-full flex items-center justify-center\", progress.status === 'completed' ? 'bg-green-100' : progress.status === 'in_progress' ? 'bg-yellow-100' : 'bg-gray-100')}>\n                                      {progress.status === 'completed' ? (\n                                        <CheckCircle className=\"h-4 w-4 text-green-600\" />\n                                      ) : progress.status === 'in_progress' ? (\n                                        <PlayCircle className=\"h-4 w-4 text-yellow-600\" />\n                                      ) : (\n                                        <XCircle className=\"h-4 w-4 text-gray-400\" />\n                                      )}\n                                    </div>\n                                    <div>\n                                      <p className=\"font-medium text-sm\">{progress.student_name}</p>\n                                      <p className=\"text-xs text-muted-foreground\">\n                                        {progress.completed_lessons}/{progress.total_lessons} leçons\n                                        {progress.last_activity && ` • Dernière activité: ${formatDate(progress.last_activity)}`}\n                                      </p>\n                                    </div>\n                                  </div>\n                                  <div className=\"flex items-center gap-4\">\n                                    <div className=\"w-24\">\n                                      <Progress value={progress.progress} className=\"h-2\" />\n                                      <p className=\"text-xs text-center mt-1\">{progress.progress}%</p>\n                                    </div>\n                                    {progress.quiz_score !== null && (\n                                      <div className=\"text-center\">\n                                        <p className=\"text-xs text-muted-foreground\">Quiz</p>\n                                        <p className=\"text-sm font-semibold\">{progress.quiz_score}%</p>\n                                      </div>\n                                    )}\n                                    <Badge variant={progress.status === 'completed' ? 'default' : progress.status === 'in_progress' ? 'secondary' : 'outline'}>\n                                      {progress.status === 'completed' ? 'Terminé' : progress.status === 'in_progress' ? 'En cours' : 'Non commencé'}\n                                    </Badge>\n                                  </div>\n                                </div>\n                              ))\n                            )}\n                          </div>\n                        </div>\n                      )}\n                    </CardContent>\n                  </Card>\n                )\n              })}\n            </div>\n          )}\n        </>\n      )}\n\n      {/* Dialog pour ajouter un cours */}\n      <Dialog open={showAddCourse} onOpenChange={setShowAddCourse}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>Ajouter une séquence e-learning</DialogTitle>\n            <DialogDescription>\n              Sélectionnez une séquence à assigner aux apprenants de cette session.\n            </DialogDescription>\n          </DialogHeader>\n\n          <div className=\"space-y-4 py-4\">\n            <div className=\"space-y-2\">\n              <Label>Séquence e-learning</Label>\n              <Select value={selectedCourseId} onValueChange={setSelectedCourseId}>\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Sélectionner une séquence\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {coursesNotAssigned.map((course) => (\n                    <SelectItem key={course.id} value={course.id}>\n                      {course.title}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"flex items-center space-x-2\">\n              <Checkbox\n                id=\"isRequired\"\n                checked={isRequired}\n                onCheckedChange={(checked) => setIsRequired(checked as boolean)}\n              />\n              <Label htmlFor=\"isRequired\" className=\"cursor-pointer\">\n                Séquence obligatoire\n              </Label>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label>Date limite (optionnel)</Label>\n              <Input\n                type=\"date\"\n                value={dueDate}\n                onChange={(e) => setDueDate(e.target.value)}\n              />\n            </div>\n          </div>\n\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setShowAddCourse(false)}>\n              Annuler\n            </Button>\n            <Button\n              onClick={() => addCourseMutation.mutate()}\n              disabled={!selectedCourseId || addCourseMutation.isPending}\n              className=\"bg-purple-600 hover:bg-purple-700\"\n            >\n              {addCourseMutation.isPending ? (\n                <>\n                  <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                  Ajout...\n                </>\n              ) : (\n                'Ajouter'\n              )}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </div>\n  )\n}\n\n","'use client'\n\nimport { useState } from 'react'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { GlassCard } from '@/components/ui/glass-card'\nimport { Button } from '@/components/ui/button'\nimport { Badge } from '@/components/ui/badge'\nimport { Input } from '@/components/ui/input'\nimport { motion, AnimatePresence } from '@/components/ui/motion'\nimport { cn } from '@/lib/utils'\nimport {\n  User,\n  TrendingUp,\n  ClipboardList,\n  Award,\n  MapPin,\n  Calendar,\n  Clock,\n  Download,\n  UserPlus,\n  Eye,\n  ExternalLink,\n  Search,\n  BookOpen,\n  MessageSquare,\n  CheckCircle,\n  XCircle,\n  AlertCircle,\n  BarChart3,\n  Users,\n  GraduationCap,\n  CreditCard,\n  Link2,\n  Copy,\n  Mail,\n  RefreshCw,\n  Loader2,\n  Share2,\n  Sparkles\n} from 'lucide-react'\nimport { useMutation } from '@tanstack/react-query'\nimport { toast } from 'sonner'\nimport { formatDate, formatCurrency } from '@/lib/utils'\nimport { StudentDocumentsSection } from '../components/student-documents-section'\nimport { SessionElearningSection } from '../components/session-elearning-section'\nimport { useDocumentGeneration } from '../hooks/use-document-generation'\nimport Link from 'next/link'\nimport { useQuery } from '@tanstack/react-query'\nimport { createClient } from '@/lib/supabase/client'\nimport type { \n  SessionWithRelations, \n  EnrollmentWithRelations,\n  FormationWithRelations,\n  GradeWithRelations,\n  StudentWithRelations\n} from '@/lib/types/query-types'\nimport type { TableRow } from '@/lib/types/supabase-helpers'\n\ntype Program = TableRow<'programs'>\ntype Organization = TableRow<'organizations'>\n\ninterface EspaceApprenantProps {\n  sessionId: string\n  sessionData: SessionWithRelations | undefined\n  formation: FormationWithRelations | null | undefined\n  program: Program | null | undefined\n  organization: Organization | undefined\n  enrollments?: EnrollmentWithRelations[]\n  grades?: GradeWithRelations[]\n  attendanceStats?: {\n    total: number\n    present: number\n    absent: number\n    late: number\n    excused: number\n    byStudent: Record<string, { present: number; total: number }>\n  } | null\n  organizationId?: string\n  onShowEnrollmentForm: () => void\n  onSwitchToGestion: () => void\n}\n\n// Type pour les liens d'accès générés (nouveau système simplifié)\ninterface GeneratedAccessToken {\n  studentId: string\n  studentName: string\n  studentEmail: string\n  accessUrl: string\n  expiresAt: string\n}\n\nexport function EspaceApprenant({\n  sessionId,\n  sessionData,\n  formation,\n  program,\n  organization,\n  enrollments = [],\n  grades = [],\n  attendanceStats,\n  organizationId,\n  onShowEnrollmentForm,\n  onSwitchToGestion,\n}: EspaceApprenantProps) {\n  const [searchTerm, setSearchTerm] = useState('')\n  const [selectedStudent, setSelectedStudent] = useState<string | null>(null)\n  const [showAccessLinks, setShowAccessLinks] = useState(false)\n  const [accessTokens, setAccessTokens] = useState<GeneratedAccessToken[]>([])\n  const supabase = createClient()\n\n  // Mutation pour générer un token individuel\n  const generateTokenMutation = useMutation({\n    mutationFn: async ({ studentId, studentName, studentEmail }: { studentId: string; studentName: string; studentEmail: string }) => {\n      // Générer le lien directement (nouveau système simplifié)\n      const baseUrl = typeof window !== 'undefined' \n        ? `${window.location.protocol}//${window.location.host}`\n        : 'http://localhost:3001'\n\n      return {\n        studentId,\n        studentName,\n        studentEmail,\n        accessUrl: `${baseUrl}/learner/access/${studentId}`,\n        expiresAt: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString(),\n      }\n    },\n    onSuccess: (newToken) => {\n      // Mettre à jour ou ajouter le lien\n      setAccessTokens(prev => {\n        const existing = prev.findIndex(t => t.studentId === newToken.studentId)\n        if (existing >= 0) {\n          const updated = [...prev]\n          updated[existing] = newToken\n          return updated\n        }\n        return [...prev, newToken]\n      })\n      toast.success(`Lien généré pour ${newToken.studentName}`)\n    },\n    onError: (error: Error) => {\n      toast.error(error.message)\n    },\n  })\n\n  // Mutation pour générer tous les liens en masse (nouveau système simplifié)\n  const generateBulkTokensMutation = useMutation({\n    mutationFn: async () => {\n      // Récupérer les étudiants de la session\n      if (!enrollments?.length) {\n        throw new Error('Aucun étudiant inscrit à cette session')\n      }\n\n      // Générer les liens directement avec les studentIds\n      const baseUrl = typeof window !== 'undefined' \n        ? `${window.location.protocol}//${window.location.host}`\n        : 'http://localhost:3001'\n\n      const tokens = enrollments.map((enrollment: any) => ({\n        studentId: enrollment.students.id,\n        studentName: `${enrollment.students.first_name} ${enrollment.students.last_name}`,\n        studentEmail: enrollment.students.email,\n        accessUrl: `${baseUrl}/learner/access/${enrollment.students.id}`,\n        expiresAt: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString(), // 30 jours\n      }))\n\n      return { tokens, count: tokens.length }\n    },\n    onSuccess: (data) => {\n      setAccessTokens(data.tokens || [])\n      toast.success(`${data.count} liens d'accès générés avec succès`)\n    },\n    onError: (error: Error) => {\n      toast.error(error.message)\n    },\n  })\n\n  // Copier un lien dans le presse-papiers\n  const copyToClipboard = async (url: string, studentName: string) => {\n    try {\n      await navigator.clipboard.writeText(url)\n      toast.success(`Lien copié pour ${studentName}`)\n    } catch {\n      toast.error('Impossible de copier le lien')\n    }\n  }\n\n  // Copier tous les liens\n  const copyAllLinks = async () => {\n    if (accessTokens.length === 0) return\n    \n    const linksText = accessTokens\n      .map(t => `${t.studentName}: ${t.accessUrl}`)\n      .join('\\n')\n    \n    try {\n      await navigator.clipboard.writeText(linksText)\n      toast.success('Tous les liens ont été copiés')\n    } catch {\n      toast.error('Impossible de copier les liens')\n    }\n  }\n\n  const {\n    handleGenerateCertificate,\n  } = useDocumentGeneration({\n    sessionData,\n    formation,\n    program,\n    organization,\n  })\n\n  // Récupérer les données à jour pour l'apprenant sélectionné\n  const { data: studentPayments, refetch: refetchPayments } = useQuery({\n    queryKey: ['student-payments', selectedStudent, sessionId, organizationId],\n    queryFn: async () => {\n      if (!selectedStudent || !organizationId) return []\n      \n      const { data, error } = await supabase\n        .from('payments')\n        .select('*, invoices(invoice_number, total_amount, status), students(first_name, last_name)')\n        .eq('student_id', selectedStudent)\n        .eq('organization_id', organizationId)\n        .order('paid_at', { ascending: false })\n      \n      if (error) {\n        console.warn('Error fetching student payments:', error)\n        return []\n      }\n      return data || []\n    },\n    enabled: !!selectedStudent && !!organizationId,\n    refetchOnWindowFocus: true,\n    refetchOnMount: true,\n  })\n\n  // Récupérer les présences détaillées pour l'apprenant sélectionné\n  const { data: studentAttendanceDetails, refetch: refetchAttendance } = useQuery({\n    queryKey: ['student-attendance-details', selectedStudent, sessionId],\n    queryFn: async () => {\n      if (!selectedStudent || !sessionId) return []\n      \n      const { data, error } = await supabase\n        .from('attendance')\n        .select('*, session_slots(date, start_time, end_time)')\n        .eq('student_id', selectedStudent)\n        .eq('session_id', sessionId)\n        .order('created_at', { ascending: false })\n      \n      if (error) {\n        console.warn('Error fetching student attendance:', error)\n        return []\n      }\n      return data || []\n    },\n    enabled: !!selectedStudent && !!sessionId,\n    refetchOnWindowFocus: true,\n    refetchOnMount: true,\n  })\n\n  // Récupérer les notes détaillées pour l'apprenant sélectionné\n  const { data: studentGradesDetails, refetch: refetchGrades } = useQuery({\n    queryKey: ['student-grades-details', selectedStudent, sessionId],\n    queryFn: async () => {\n      if (!selectedStudent || !sessionId) return []\n      \n      const { data, error } = await supabase\n        .from('grades')\n        .select('*')\n        .eq('student_id', selectedStudent)\n        .eq('session_id', sessionId)\n        .order('graded_at', { ascending: false })\n      \n      if (error) {\n        console.warn('Error fetching student grades:', error)\n        return []\n      }\n      return data || []\n    },\n    enabled: !!selectedStudent && !!sessionId,\n    refetchOnWindowFocus: true,\n    refetchOnMount: true,\n  })\n\n  // NOTE: ancien système e-learning (tables elearning_courses/quiz_results) supprimé.\n  // Le suivi e-learning session est désormais géré via `session_courses` + `lesson_progress` + `quiz_attempts`.\n\n  // Filtrer les apprenants selon la recherche\n  const filteredEnrollments = enrollments.filter((enrollment) => {\n    if (!searchTerm) return true\n    const student = enrollment.students as StudentWithRelations | null\n    if (!student) return false\n    \n    const searchLower = searchTerm.toLowerCase()\n    return (\n      student.first_name?.toLowerCase().includes(searchLower) ||\n      student.last_name?.toLowerCase().includes(searchLower) ||\n      student.email?.toLowerCase().includes(searchLower) ||\n      student.student_number?.toLowerCase().includes(searchLower)\n    )\n  })\n\n  // Calculer les statistiques globales\n  const totalStudents = enrollments.length\n  const confirmedStudents = enrollments.filter(e => e.status === 'confirmed').length\n  const completedStudents = enrollments.filter(e => e.status === 'completed').length\n  const averageAttendance = attendanceStats && totalStudents > 0\n    ? Math.round((attendanceStats.present / attendanceStats.total) * 100)\n    : 0\n\n  // Si aucun apprenant\n  if (enrollments.length === 0) {\n    return (\n      <Card>\n        <CardContent className=\"py-12\">\n          <div className=\"text-center text-muted-foreground\">\n            <User className=\"h-16 w-16 mx-auto mb-4 opacity-50\" />\n            <p className=\"text-lg font-medium mb-2\">Aucun apprenant inscrit</p>\n            <p className=\"text-sm mb-4\">\n              Les apprenants inscrits à cette session apparaîtront ici\n            </p>\n            <Button\n              variant=\"outline\"\n              onClick={() => {\n                onSwitchToGestion()\n                onShowEnrollmentForm()\n              }}\n            >\n              <UserPlus className=\"h-4 w-4 mr-2\" />\n              Inscrire un apprenant\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n    )\n  }\n\n  // Vue détaillée d'un apprenant\n  if (selectedStudent) {\n    const enrollment = enrollments.find(e => e.student_id === selectedStudent)\n    if (!enrollment) {\n      setSelectedStudent(null)\n      return null\n    }\n\n    const student = enrollment.students as StudentWithRelations | null\n    if (!student) return null\n\n    // Utiliser les données détaillées si disponibles, sinon utiliser les stats globales\n    const studentAttendanceDetailsData = studentAttendanceDetails || []\n    const studentGradesDetailsData = studentGradesDetails || []\n    const studentPaymentsData = studentPayments || []\n    \n    // Calculer les stats de présence depuis les données détaillées\n    const presentCount = studentAttendanceDetailsData.filter(a => a.status === 'present' || a.status === 'late').length\n    const totalCount = studentAttendanceDetailsData.length\n    const studentAttendance = totalCount > 0 \n      ? { present: presentCount, total: totalCount }\n      : (enrollment.student_id ? (attendanceStats?.byStudent?.[enrollment.student_id] || { present: 0, total: 0 }) : { present: 0, total: 0 })\n    \n    const attendanceRate = studentAttendance.total > 0\n      ? Math.round((studentAttendance.present / studentAttendance.total) * 100)\n      : 0\n    \n    // Utiliser les notes détaillées si disponibles, sinon utiliser les notes globales\n    const studentGrades = studentGradesDetailsData.length > 0 \n      ? studentGradesDetailsData \n      : grades.filter((g) => g.student_id === enrollment.student_id)\n\n    return (\n      <div className=\"space-y-6\">\n        {/* Header avec retour */}\n        <div className=\"flex items-center justify-between\">\n          <Button variant=\"ghost\" onClick={() => setSelectedStudent(null)}>\n            ← Retour à la liste\n          </Button>\n          <h2 className=\"text-2xl font-bold\">Espace Apprenant - {student.first_name} {student.last_name}</h2>\n          <div className=\"w-24\" /> {/* Spacer */}\n        </div>\n\n        {/* En-tête de l'apprenant */}\n        <Card>\n          <CardHeader>\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center space-x-4\">\n                <div className=\"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center\">\n                  <User className=\"h-8 w-8 text-primary\" />\n                </div>\n                <div>\n                  <CardTitle className=\"text-xl\">\n                    {student.first_name} {student.last_name}\n                  </CardTitle>\n                  <p className=\"text-sm text-muted-foreground mt-1\">\n                    {student.student_number}\n                    {student.email && ` • ${student.email}`}\n                  </p>\n                </div>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <Link href={`/learner`} target=\"_blank\">\n                  <Button variant=\"outline\" size=\"sm\">\n                    <ExternalLink className=\"h-4 w-4 mr-2\" />\n                    Voir son espace\n                  </Button>\n                </Link>\n                <span className={`px-3 py-1 rounded text-sm ${\n                  enrollment.status === 'completed' ? 'bg-brand-blue-ghost text-brand-blue' :\n                  enrollment.status === 'confirmed' ? 'bg-blue-100 text-blue-800' :\n                  'bg-gray-100 text-gray-800'\n                }`}>\n                  {enrollment.status === 'completed' ? 'Terminé' :\n                   enrollment.status === 'confirmed' ? 'Confirmé' : 'En attente'}\n                </span>\n              </div>\n            </div>\n          </CardHeader>\n        </Card>\n\n        {/* Informations de la session */}\n        {sessionData && (\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"text-base\">Informations de la session</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                {sessionData.start_date && (\n                  <div className=\"flex items-center space-x-3\">\n                    <Calendar className=\"h-5 w-5 text-brand-blue\" />\n                    <div>\n                      <p className=\"font-medium\">Dates</p>\n                      <p className=\"text-sm text-muted-foreground\">\n                        {formatDate(sessionData.start_date)}\n                        {sessionData.end_date && ` - ${formatDate(sessionData.end_date)}`}\n                      </p>\n                    </div>\n                  </div>\n                )}\n                {(sessionData.start_time || sessionData.end_time) && (\n                  <div className=\"flex items-center space-x-3\">\n                    <Clock className=\"h-5 w-5 text-blue-600\" />\n                    <div>\n                      <p className=\"font-medium\">Horaires</p>\n                      <p className=\"text-sm text-muted-foreground\">\n                        {sessionData.start_time || 'N/A'}\n                        {sessionData.end_time && ` - ${sessionData.end_time}`}\n                      </p>\n                    </div>\n                  </div>\n                )}\n                {sessionData.location && (\n                  <div className=\"flex items-center space-x-3\">\n                    <MapPin className=\"h-5 w-5 text-red-600\" />\n                    <div>\n                      <p className=\"font-medium\">Lieu</p>\n                      <p className=\"text-sm text-muted-foreground\">\n                        {sessionData.location}\n                      </p>\n                    </div>\n                  </div>\n                )}\n                {formation && (\n                  <div className=\"flex items-center space-x-3\">\n                    <ClipboardList className=\"h-5 w-5 text-purple-600\" />\n                    <div>\n                      <p className=\"font-medium\">Formation</p>\n                      <p className=\"text-sm text-muted-foreground\">\n                        {formation.name}\n                      </p>\n                    </div>\n                  </div>\n                )}\n              </div>\n            </CardContent>\n          </Card>\n        )}\n\n        {/* Progression */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"text-base flex items-center\">\n              <TrendingUp className=\"h-5 w-5 mr-2\" />\n              Progression\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-4\">\n              {/* Barre de progression de présence */}\n              <div>\n                <div className=\"flex items-center justify-between mb-2\">\n                  <span className=\"text-sm font-medium\">Taux de présence</span>\n                  <span className=\"text-sm text-muted-foreground\">{attendanceRate}%</span>\n                </div>\n                <div className=\"w-full bg-gray-200 rounded-full h-3\">\n                  <motion.div\n                    className=\"bg-brand-blue h-3 rounded-full transition-all\"\n                    style={{ width: `${attendanceRate}%` }}\n                  />\n                </div>\n                <div className=\"flex items-center justify-between mt-2 text-xs text-muted-foreground\">\n                  <span>{studentAttendance.present} présent{studentAttendance.present > 1 ? 's' : ''}</span>\n                  <span>{studentAttendance.total - studentAttendance.present} absent{(studentAttendance.total - studentAttendance.present) > 1 ? 's' : ''}</span>\n                </div>\n              </div>\n\n              {/* Notes récentes */}\n              {studentGrades.length > 0 && (\n                <div>\n                  <p className=\"text-sm font-medium mb-3\">Notes récentes</p>\n                  <div className=\"space-y-2\">\n                    {studentGrades.slice(0, 5).map((grade) => (\n                      <div key={grade.id} className=\"flex items-center justify-between p-2 bg-gray-50 rounded\">\n                        <div>\n                          <p className=\"text-sm font-medium\">{grade.subject}</p>\n                          <p className=\"text-xs text-muted-foreground\">\n                            {grade.assessment_type || 'Évaluation'} • {grade.graded_at && formatDate(grade.graded_at)}\n                          </p>\n                        </div>\n                        <div className=\"text-right\">\n                          <p className=\"text-sm font-bold\">\n                            {grade.score}/{grade.max_score || 20}\n                          </p>\n                          {grade.percentage !== null && (\n                            <p className=\"text-xs text-muted-foreground\">\n                              {grade.percentage}%\n                            </p>\n                          )}\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Évaluations */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"text-base flex items-center\">\n              <ClipboardList className=\"h-5 w-5 mr-2\" />\n              Évaluations\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            {studentGrades.length > 0 ? (\n              <div className=\"space-y-2\">\n                <p className=\"text-sm text-muted-foreground mb-3\">\n                  {studentGrades.length} évaluation{studentGrades.length > 1 ? 's' : ''} complétée{studentGrades.length > 1 ? 's' : ''}\n                </p>\n                <div className=\"space-y-2\">\n                  {studentGrades.map((grade) => (\n                    <div key={grade.id} className=\"flex items-center justify-between p-3 border rounded-lg\">\n                      <div className=\"flex items-center space-x-3\">\n                        <ClipboardList className=\"h-5 w-5 text-brand-blue\" />\n                        <div>\n                          <p className=\"font-medium\">{grade.subject}</p>\n                          <p className=\"text-xs text-muted-foreground\">\n                            {grade.graded_at && formatDate(grade.graded_at)}\n                          </p>\n                        </div>\n                      </div>\n                      <div className=\"text-right\">\n                        <p className=\"font-bold\">\n                          {grade.score}/{grade.max_score || 20}\n                        </p>\n                        {grade.percentage !== null && (\n                          <p className=\"text-xs text-muted-foreground\">\n                            {grade.percentage}%\n                          </p>\n                        )}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            ) : (\n              <div className=\"text-center py-8 text-muted-foreground\">\n                <ClipboardList className=\"h-12 w-12 mx-auto mb-3 opacity-50\" />\n                <p className=\"text-sm\">Aucune évaluation complétée pour le moment</p>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Paiements */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"text-base flex items-center\">\n              <CreditCard className=\"h-5 w-5 mr-2\" />\n              Paiements\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            {studentPaymentsData.length > 0 ? (\n              <div className=\"space-y-3\">\n                <div className=\"space-y-2\">\n                  {studentPaymentsData.map((payment: any) => (\n                    <div key={payment.id} className=\"flex items-center justify-between p-3 border rounded-lg\">\n                      <div className=\"flex items-center space-x-3\">\n                        <CreditCard className=\"h-5 w-5 text-brand-blue\" />\n                        <div>\n                          <p className=\"font-medium\">\n                            {formatCurrency(payment.amount || 0, payment.currency || 'EUR')}\n                          </p>\n                          <p className=\"text-xs text-muted-foreground\">\n                            {payment.paid_at ? formatDate(payment.paid_at) : 'Date non disponible'}\n                            {payment.invoices && payment.invoices.invoice_number && ` • Facture ${payment.invoices.invoice_number}`}\n                          </p>\n                        </div>\n                      </div>\n                      <div className=\"text-right\">\n                        <span className={`px-2 py-1 rounded text-xs ${\n                          payment.status === 'completed' ? 'bg-green-100 text-green-800' :\n                          payment.status === 'pending' ? 'bg-yellow-100 text-yellow-800' :\n                          'bg-gray-100 text-gray-800'\n                        }`}>\n                          {payment.status === 'completed' ? 'Payé' :\n                           payment.status === 'pending' ? 'En attente' : payment.status}\n                        </span>\n                        {payment.payment_method && (\n                          <p className=\"text-xs text-muted-foreground mt-1\">\n                            {payment.payment_method === 'cash' ? 'Espèces' :\n                             payment.payment_method === 'card' ? 'Carte' :\n                             payment.payment_method === 'bank_transfer' ? 'Virement' :\n                             payment.payment_method === 'sepa' ? 'SEPA' : payment.payment_method}\n                          </p>\n                        )}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n                {/* Total payé */}\n                <div className=\"pt-3 border-t\">\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"font-medium\">Total payé</span>\n                    <span className=\"font-bold text-lg\">\n                      {formatCurrency(\n                        studentPaymentsData\n                          .filter((p: any) => p.status === 'completed')\n                          .reduce((sum: number, p: any) => sum + (parseFloat(p.amount || 0)), 0),\n                        studentPaymentsData[0]?.currency || 'EUR'\n                      )}\n                    </span>\n                  </div>\n                </div>\n              </div>\n            ) : (\n              <div className=\"text-center py-8 text-muted-foreground\">\n                <CreditCard className=\"h-12 w-12 mx-auto mb-3 opacity-50\" />\n                <p className=\"text-sm\">Aucun paiement enregistré pour le moment</p>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Présences détaillées */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"text-base flex items-center\">\n              <Calendar className=\"h-5 w-5 mr-2\" />\n              Historique des présences\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            {studentAttendanceDetailsData.length > 0 ? (\n              <div className=\"space-y-2\">\n                <div className=\"space-y-2\">\n                  {studentAttendanceDetailsData.map((attendance: any) => (\n                    <div key={attendance.id} className=\"flex items-center justify-between p-3 border rounded-lg\">\n                      <div className=\"flex items-center space-x-3\">\n                        {attendance.status === 'present' ? (\n                          <CheckCircle className=\"h-5 w-5 text-green-600\" />\n                        ) : attendance.status === 'late' ? (\n                          <Clock className=\"h-5 w-5 text-yellow-600\" />\n                        ) : attendance.status === 'excused' ? (\n                          <AlertCircle className=\"h-5 w-5 text-blue-600\" />\n                        ) : (\n                          <XCircle className=\"h-5 w-5 text-red-600\" />\n                        )}\n                        <div>\n                          <p className=\"font-medium\">\n                            {attendance.session_slots?.date ? formatDate(attendance.session_slots.date) : 'Date non disponible'}\n                            {attendance.session_slots?.start_time && attendance.session_slots?.end_time && (\n                              <span className=\"text-sm text-muted-foreground ml-2\">\n                                {attendance.session_slots.start_time} - {attendance.session_slots.end_time}\n                              </span>\n                            )}\n                          </p>\n                          <p className=\"text-xs text-muted-foreground\">\n                            {attendance.created_at && formatDate(attendance.created_at)}\n                          </p>\n                        </div>\n                      </div>\n                      <div className=\"text-right\">\n                        <span className={`px-2 py-1 rounded text-xs ${\n                          attendance.status === 'present' ? 'bg-green-100 text-green-800' :\n                          attendance.status === 'late' ? 'bg-yellow-100 text-yellow-800' :\n                          attendance.status === 'excused' ? 'bg-blue-100 text-blue-800' :\n                          'bg-red-100 text-red-800'\n                        }`}>\n                          {attendance.status === 'present' ? 'Présent' :\n                           attendance.status === 'late' ? 'En retard' :\n                           attendance.status === 'excused' ? 'Excusé' : 'Absent'}\n                        </span>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            ) : (\n              <div className=\"text-center py-8 text-muted-foreground\">\n                <Calendar className=\"h-12 w-12 mx-auto mb-3 opacity-50\" />\n                <p className=\"text-sm\">Aucune présence enregistrée pour le moment</p>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Documents partagés */}\n        {organizationId && enrollment.student_id && (\n          <StudentDocumentsSection\n            studentId={enrollment.student_id}\n            organizationId={organizationId}\n          />\n        )}\n\n        {/* Certificats */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"text-base flex items-center\">\n              <Award className=\"h-5 w-5 mr-2\" />\n              Certificats\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            {enrollment.status === 'completed' ? (\n              <div className=\"space-y-3\">\n                <div className=\"flex items-center justify-between p-4 bg-gradient-to-r from-warning-bg to-brand-cyan-ghost border border-warning-border rounded-lg\">\n                  <div className=\"flex items-center space-x-3\">\n                    <Award className=\"h-8 w-8 text-brand-cyan\" />\n                    <div>\n                      <p className=\"font-medium\">Certificat de formation</p>\n                      <p className=\"text-sm text-muted-foreground\">\n                        Session terminée avec succès\n                      </p>\n                    </div>\n                  </div>\n                  <Button variant=\"outline\" size=\"sm\" onClick={() => handleGenerateCertificate(enrollment)}>\n                    <Download className=\"h-4 w-4 mr-2\" />\n                    Télécharger\n                  </Button>\n                </div>\n              </div>\n            ) : (\n              <div className=\"text-center py-8 text-muted-foreground\">\n                <Award className=\"h-12 w-12 mx-auto mb-3 opacity-50\" />\n                <p className=\"text-sm\">\n                  Le certificat sera disponible une fois la session terminée\n                </p>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n    )\n  }\n\n  // Vue liste des apprenants\n  return (\n    <div className=\"space-y-6\">\n      {/* Statistiques globales ultra-premium */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n        {[\n          {\n            label: 'Total apprenants',\n            value: totalStudents,\n            icon: Users,\n            iconBg: 'bg-gradient-to-br from-brand-blue to-brand-blue-dark',\n            cardBg: 'bg-gradient-to-br from-brand-blue/5 via-brand-blue/10 to-brand-cyan/5',\n            borderColor: 'border-brand-blue/20',\n            glowColor: 'rgba(39, 68, 114, 0.15)',\n          },\n          {\n            label: 'Confirmés',\n            value: confirmedStudents,\n            icon: CheckCircle,\n            iconBg: 'bg-gradient-to-br from-emerald-500 to-emerald-600',\n            cardBg: 'bg-gradient-to-br from-emerald-50 via-emerald-100/50 to-teal-50',\n            borderColor: 'border-emerald-200',\n            glowColor: 'rgba(16, 185, 129, 0.15)',\n          },\n          {\n            label: 'Terminés',\n            value: completedStudents,\n            icon: GraduationCap,\n            iconBg: 'bg-gradient-to-br from-brand-cyan to-brand-cyan-dark',\n            cardBg: 'bg-gradient-to-br from-brand-cyan/5 via-brand-cyan/10 to-brand-blue/5',\n            borderColor: 'border-brand-cyan/20',\n            glowColor: 'rgba(52, 185, 238, 0.15)',\n          },\n          {\n            label: 'Présence moyenne',\n            value: `${averageAttendance}%`,\n            icon: BarChart3,\n            iconBg: 'bg-gradient-to-br from-purple-500 to-purple-600',\n            cardBg: 'bg-gradient-to-br from-purple-50 via-purple-100/50 to-pink-50',\n            borderColor: 'border-purple-200',\n            glowColor: 'rgba(168, 85, 247, 0.15)',\n          },\n        ].map((stat, index) => (\n          <motion.div key={stat.label}\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{\n              duration: 0.5,\n              delay: index * 0.05,\n              ease: [0.16, 1, 0.3, 1]\n            }}\n            whileHover={{ y: -6, scale: 1.02 }}\n            className=\"group relative\"\n          >\n            <motion.div\n              className={cn(\n                \"relative overflow-hidden rounded-2xl p-6 border-2 transition-all duration-500 shadow-lg hover:shadow-2xl\",\n                stat.cardBg,\n                stat.borderColor\n              )}\n              style={{\n                boxShadow: `0 10px 40px -10px ${stat.glowColor}, 0 0 0 1px rgba(255, 255, 255, 0.1)`\n              }}\n            >\n              {/* Shine effect */}\n              <motion.div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent\"\n                initial={{ x: '-100%' }}\n                whileHover={{ x: '100%' }}\n                transition={{ duration: 0.6, ease: \"easeInOut\" }}\n              />\n\n              {/* Content */}\n              <div className=\"relative z-10\">\n                <div className=\"flex items-start justify-between mb-4\">\n                  <motion.div className={cn('p-3.5 rounded-2xl shadow-xl', stat.iconBg)}\n                    whileHover={{ rotate: 12, scale: 1.15 }}\n                    transition={{ type: \"spring\", stiffness: 500, damping: 15 }}\n                  >\n                    <stat.icon className=\"h-6 w-6 text-white\" />\n                  </motion.div>\n                  <motion.div className=\"text-right\"\n                    initial={{ scale: 0.8, opacity: 0 }}\n                    animate={{ scale: 1, opacity: 1 }}\n                    transition={{ delay: index * 0.05 + 0.2, duration: 0.5 }}\n                  >\n                    <div className=\"text-4xl font-display font-bold tracking-tighter text-gray-900 leading-none mb-1\">\n                      {stat.value}\n                    </div>\n                    <p className=\"text-xs font-bold text-gray-600 uppercase tracking-widest\">\n                      {stat.label}\n                    </p>\n                  </motion.div>\n                </div>\n\n                {/* Bottom accent bar */}\n                <motion.div className=\"h-1.5 rounded-full mt-4\"\n                  style={{\n                    background: stat.iconBg.replace('bg-gradient-to-br', 'linear-gradient(to right,')\n                  }}\n                  initial={{ scaleX: 0 }}\n                  animate={{ scaleX: 1 }}\n                  transition={{ delay: index * 0.05 + 0.3, duration: 0.6, ease: [0.16, 1, 0.3, 1] }}\n                />\n              </div>\n\n              {/* Glow effect on hover */}\n              <motion.div\n                className=\"absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-500\"\n                style={{\n                  background: `radial-gradient(circle at 50% 50%, ${stat.glowColor} 0%, transparent 70%)`\n                }}\n              />\n            </motion.div>\n          </motion.div>\n        ))}\n      </div>\n\n      {/* Section Liens d'accès directs */}\n      <Card className=\"border-blue-200 bg-gradient-to-r from-blue-50/50 to-indigo-50/50\">\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <CardTitle className=\"text-base flex items-center\">\n              <Link2 className=\"h-5 w-5 mr-2 text-blue-600\" />\n              Liens d'accès directs\n            </CardTitle>\n            <div className=\"flex items-center gap-2\">\n              {showAccessLinks && accessTokens.length > 0 && (\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={copyAllLinks}\n                >\n                  <Copy className=\"h-4 w-4 mr-2\" />\n                  Copier tous\n                </Button>\n              )}\n              <Button\n                variant={showAccessLinks ? \"secondary\" : \"outline\"}\n                size=\"sm\"\n                onClick={() => setShowAccessLinks(!showAccessLinks)}\n              >\n                <Share2 className=\"h-4 w-4 mr-2\" />\n                {showAccessLinks ? 'Masquer' : 'Gérer les liens'}\n              </Button>\n            </div>\n          </div>\n        </CardHeader>\n        \n        {showAccessLinks && (\n          <CardContent className=\"pt-0\">\n            <div className=\"space-y-4\">\n              {/* Description */}\n              <div className=\"text-sm text-muted-foreground bg-white/50 p-3 rounded-lg\">\n                <p>\n                  Générez des liens d'accès personnalisés pour permettre aux stagiaires \n                  d'accéder directement à leur espace personnel <strong>sans avoir besoin de se connecter</strong>.\n                </p>\n                <p className=\"mt-2 text-xs\">\n                  ⏱️ Les liens expirent après 30 jours et peuvent être régénérés à tout moment.\n                </p>\n              </div>\n\n              {/* Actions globales */}\n              <div className=\"flex items-center gap-3\">\n                <Button\n                  onClick={() => generateBulkTokensMutation.mutate()}\n                  disabled={generateBulkTokensMutation.isPending}\n                  className=\"bg-blue-600 hover:bg-blue-700\"\n                >\n                  {generateBulkTokensMutation.isPending ? (\n                    <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                  ) : (\n                    <RefreshCw className=\"h-4 w-4 mr-2\" />\n                  )}\n                  Générer tous les liens\n                </Button>\n                <span className=\"text-sm text-muted-foreground\">\n                  ({enrollments.length} apprenant{enrollments.length > 1 ? 's' : ''})\n                </span>\n              </div>\n\n              {/* Liste des apprenants avec génération individuelle */}\n              <div className=\"space-y-2 mt-4\">\n                <h4 className=\"text-sm font-medium mb-3\">Générer des liens pour chaque apprenant :</h4>\n                <div className=\"max-h-96 overflow-y-auto space-y-2\">\n                  {enrollments.map((enrollment) => {\n                    const student = enrollment.students as StudentWithRelations | null\n                    if (!student) return null\n                    \n                    const existingToken = accessTokens.find(t => t.studentId === enrollment.student_id)\n                    const studentName = `${student.first_name} ${student.last_name}`\n                    \n                    return (\n                      <div\n                        key={enrollment.student_id}\n                        className=\"flex items-center justify-between p-3 bg-white rounded-lg border\"\n                      >\n                        <div className=\"flex items-center gap-3 flex-1 min-w-0\">\n                          <div className=\"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0\">\n                            <User className=\"h-4 w-4 text-blue-600\" />\n                          </div>\n                          <div className=\"min-w-0\">\n                            <p className=\"font-medium text-sm truncate\">{studentName}</p>\n                            {student.email && (\n                              <p className=\"text-xs text-muted-foreground truncate max-w-xs\">\n                                {student.email}\n                              </p>\n                            )}\n                          </div>\n                        </div>\n                        <div className=\"flex items-center gap-2 flex-shrink-0\">\n                          {existingToken ? (\n                            <>\n                              <div className=\"flex items-center gap-2 min-w-0 max-w-xs\">\n                                <p className=\"text-xs text-muted-foreground truncate hidden md:block\">\n                                  {existingToken.accessUrl}\n                                </p>\n                              </div>\n                              <Button\n                                variant=\"ghost\"\n                                size=\"sm\"\n                                onClick={() => copyToClipboard(existingToken.accessUrl, studentName)}\n                                title=\"Copier le lien\"\n                              >\n                                <Copy className=\"h-4 w-4\" />\n                              </Button>\n                              <Button\n                                variant=\"ghost\"\n                                size=\"sm\"\n                                asChild\n                                title=\"Ouvrir le lien\"\n                              >\n                                <a href={existingToken.accessUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n                                  <ExternalLink className=\"h-4 w-4\" />\n                                </a>\n                              </Button>\n                              <Button\n                                variant=\"outline\"\n                                size=\"sm\"\n                                onClick={() => generateTokenMutation.mutate({\n                                  studentId: enrollment.student_id || '',\n                                  studentName,\n                                  studentEmail: student.email || ''\n                                })}\n                                disabled={generateTokenMutation.isPending}\n                                title=\"Régénérer le lien\"\n                              >\n                                {generateTokenMutation.isPending ? (\n                                  <Loader2 className=\"h-4 w-4 animate-spin\" />\n                                ) : (\n                                  <RefreshCw className=\"h-4 w-4\" />\n                                )}\n                              </Button>\n                            </>\n                          ) : (\n                            <Button\n                              variant=\"default\"\n                              size=\"sm\"\n                              onClick={() => generateTokenMutation.mutate({\n                                studentId: enrollment.student_id || '',\n                                studentName,\n                                studentEmail: student.email || ''\n                              })}\n                              disabled={generateTokenMutation.isPending}\n                              className=\"bg-blue-600 hover:bg-blue-700\"\n                            >\n                              {generateTokenMutation.isPending ? (\n                                <>\n                                  <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                                  Génération...\n                                </>\n                              ) : (\n                                <>\n                                  <Link2 className=\"h-4 w-4 mr-2\" />\n                                  Générer\n                                </>\n                              )}\n                            </Button>\n                          )}\n                        </div>\n                      </div>\n                    )\n                  })}\n                </div>\n              </div>\n\n              {/* Génération individuelle */}\n              {accessTokens.length === 0 && !generateBulkTokensMutation.isPending && (\n                <div className=\"text-center py-6 text-muted-foreground\">\n                  <Link2 className=\"h-10 w-10 mx-auto mb-3 opacity-30\" />\n                  <p className=\"text-sm\">Aucun lien généré pour cette session</p>\n                  <p className=\"text-xs mt-1\">Cliquez sur \"Générer tous les liens\" pour créer les accès</p>\n                </div>\n              )}\n            </div>\n          </CardContent>\n        )}\n      </Card>\n\n      {/* Section E-Learning */}\n      {organizationId && (\n        <SessionElearningSection\n          sessionId={sessionId}\n          organizationId={organizationId}\n          enrollments={enrollments}\n        />\n      )}\n\n      {/* Barre de recherche et actions */}\n      <Card>\n        <CardContent className=\"pt-6\">\n          <div className=\"flex items-center justify-between gap-4\">\n            <div className=\"flex-1 relative\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n              <Input\n                placeholder=\"Rechercher un apprenant...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                className=\"pl-10\"\n              />\n            </div>\n            <Button\n              variant=\"outline\"\n              onClick={() => {\n                onSwitchToGestion()\n                onShowEnrollmentForm()\n              }}\n            >\n              <UserPlus className=\"h-4 w-4 mr-2\" />\n              Ajouter un apprenant\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Liste des apprenants */}\n      <div className=\"space-y-4\">\n        {filteredEnrollments.length === 0 ? (\n          <Card>\n            <CardContent className=\"py-12 text-center text-muted-foreground\">\n              <User className=\"h-12 w-12 mx-auto mb-3 opacity-50\" />\n              <p>Aucun apprenant trouvé</p>\n            </CardContent>\n          </Card>\n        ) : (\n          filteredEnrollments.map((enrollment) => {\n            const student = enrollment.students as StudentWithRelations | null\n            if (!student) return null\n\n            const studentAttendance = enrollment.student_id ? (attendanceStats?.byStudent?.[enrollment.student_id] || {\n              present: 0,\n              total: 0,\n            }) : { present: 0, total: 0 }\n            const attendanceRate = studentAttendance.total > 0\n              ? Math.round((studentAttendance.present / studentAttendance.total) * 100)\n              : 0\n            const studentGrades = enrollment.student_id ? grades.filter((g) => g.student_id === enrollment.student_id) : []\n            const averageGrade = studentGrades.length > 0\n              ? Math.round(studentGrades.reduce((sum, g) => {\n                  const percentage = g.percentage !== null ? g.percentage : ((g.score ?? 0) / (g.max_score || 20)) * 100\n                  return sum + percentage\n                }, 0) / studentGrades.length)\n              : null\n\n            return (\n              <Card key={enrollment.id} className=\"hover:shadow-md transition-shadow\">\n                <CardContent className=\"pt-6\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center space-x-4 flex-1\">\n                      <div className=\"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center\">\n                        <User className=\"h-6 w-6 text-primary\" />\n                      </div>\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center space-x-3\">\n                          <h3 className=\"font-semibold text-lg\">\n                            {student.first_name} {student.last_name}\n                          </h3>\n                          <Badge variant={\n                            enrollment.status === 'completed' ? 'default' :\n                            enrollment.status === 'confirmed' ? 'secondary' : 'outline'\n                          }>\n                            {enrollment.status === 'completed' ? 'Terminé' :\n                             enrollment.status === 'confirmed' ? 'Confirmé' : 'En attente'}\n                          </Badge>\n                        </div>\n                        <p className=\"text-sm text-muted-foreground mt-1\">\n                          {student.student_number}\n                          {student.email && ` • ${student.email}`}\n                        </p>\n                      </div>\n                    </div>\n\n                    {/* Statistiques rapides */}\n                    <div className=\"flex items-center space-x-6 mr-6\">\n                      <div className=\"text-center\">\n                        <p className=\"text-xs text-muted-foreground\">Présence</p>\n                        <p className=\"text-sm font-semibold\">{attendanceRate}%</p>\n                      </div>\n                      {averageGrade !== null && (\n                        <div className=\"text-center\">\n                          <p className=\"text-xs text-muted-foreground\">Moyenne</p>\n                          <p className=\"text-sm font-semibold\">{averageGrade}%</p>\n                        </div>\n                      )}\n                      <div className=\"text-center\">\n                        <p className=\"text-xs text-muted-foreground\">Évaluations</p>\n                        <p className=\"text-sm font-semibold\">{studentGrades.length}</p>\n                      </div>\n                    </div>\n\n                    {/* Actions */}\n                    <div className=\"flex items-center space-x-2\">\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => setSelectedStudent(enrollment.student_id)}\n                      >\n                        <Eye className=\"h-4 w-4 mr-2\" />\n                        Voir détails\n                      </Button>\n                      {/* Lien vers l'espace apprenant - utilise le token si disponible */}\n                      {(() => {\n                        const existingToken = accessTokens.find(t => t.studentId === enrollment.student_id)\n                        if (existingToken) {\n                          return (\n                            <a href={existingToken.accessUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n                              <Button variant=\"outline\" size=\"sm\">\n                                <ExternalLink className=\"h-4 w-4 mr-2\" />\n                                Accès direct\n                              </Button>\n                            </a>\n                          )\n                        }\n                        return (\n                          <Link href={`/learner`} target=\"_blank\">\n                            <Button variant=\"outline\" size=\"sm\">\n                              <ExternalLink className=\"h-4 w-4 mr-2\" />\n                              Espace apprenant\n                            </Button>\n                          </Link>\n                        )\n                      })()}\n                    </div>\n                  </div>\n\n                  {/* Barre de progression de présence */}\n                  {studentAttendance.total > 0 && (\n                    <div className=\"mt-4 pt-4 border-t\">\n                      <div className=\"flex items-center justify-between mb-2\">\n                        <span className=\"text-xs text-muted-foreground\">Progression de présence</span>\n                        <span className=\"text-xs text-muted-foreground\">\n                          {studentAttendance.present}/{studentAttendance.total} séances\n                        </span>\n                      </div>\n                      <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                        <motion.div\n                          className={`h-2 rounded-full transition-all ${\n                            attendanceRate >= 80 ? 'bg-green-500' :\n                            attendanceRate >= 60 ? 'bg-yellow-500' : 'bg-red-500'\n                          }`}\n                          style={{ width: `${attendanceRate}%` }}\n                        />\n                      </div>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            )\n          })\n        )}\n      </div>\n    </div>\n  )\n}\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Link2\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNOSAxN0g3QTUgNSAwIDAgMSA3IDdoMiIgLz4KICA8cGF0aCBkPSJNMTUgN2gyYTUgNSAwIDEgMSAwIDEwaC0yIiAvPgogIDxsaW5lIHgxPSI4IiB4Mj0iMTYiIHkxPSIxMiIgeTI9IjEyIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/link-2\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Link2 = createLucideIcon('Link2', [\n  ['path', { d: 'M9 17H7A5 5 0 0 1 7 7h2', key: '8i5ue5' }],\n  ['path', { d: 'M15 7h2a5 5 0 1 1 0 10h-2', key: '1b9ql8' }],\n  ['line', { x1: '8', x2: '16', y1: '12', y2: '12', key: '1jonct' }],\n]);\n\nexport default Link2;\n"],"names":[],"mappings":"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","ignoreList":[3]}