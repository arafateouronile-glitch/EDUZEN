{"version":3,"sources":["../../../../node_modules/lucide-react/src/icons/file-text.ts","../../../../node_modules/lucide-react/src/icons/calendar.ts","../../../../lib/hooks/use-auth.ts","../../../../components/ui/input.tsx","../../../../node_modules/lucide-react/src/icons/search.ts","../../../../node_modules/lucide-react/src/icons/award.ts","../../../../node_modules/lucide-react/src/icons/user.ts","../../../../node_modules/lucide-react/src/icons/graduation-cap.ts","../../../../node_modules/lucide-react/src/icons/settings.ts","../../../../node_modules/lucide-react/src/icons/credit-card.ts","../../../../lib/supabase/learner-client.ts","../../../../lib/contexts/learner-context.tsx","../../../../lib/hooks/use-learner.ts","../../../../node_modules/lucide-react/src/icons/play-circle.ts","../../../../node_modules/lucide-react/src/icons/message-square.ts","../../../../node_modules/lucide-react/src/icons/bell.ts","../../../../node_modules/lucide-react/src/icons/clipboard-check.ts","../../../../node_modules/lucide-react/src/icons/menu.ts","../../../../node_modules/lucide-react/src/icons/layout-dashboard.ts","../../../../node_modules/lucide-react/src/icons/log-out.ts","../../../../node_modules/lucide-react/src/icons/wifi-off.ts","../../../../lib/hooks/use-offline.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name FileText\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTQuNSAySDZhMiAyIDAgMCAwLTIgMnYxNmEyIDIgMCAwIDAgMiAyaDEyYTIgMiAwIDAgMCAyLTJWNy41TDE0LjUgMnoiIC8+CiAgPHBvbHlsaW5lIHBvaW50cz0iMTQgMiAxNCA4IDIwIDgiIC8+CiAgPGxpbmUgeDE9IjE2IiB4Mj0iOCIgeTE9IjEzIiB5Mj0iMTMiIC8+CiAgPGxpbmUgeDE9IjE2IiB4Mj0iOCIgeTE9IjE3IiB5Mj0iMTciIC8+CiAgPGxpbmUgeDE9IjEwIiB4Mj0iOCIgeTE9IjkiIHkyPSI5IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/file-text\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst FileText = createLucideIcon('FileText', [\n  [\n    'path',\n    { d: 'M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z', key: '1nnpy2' },\n  ],\n  ['polyline', { points: '14 2 14 8 20 8', key: '1ew0cm' }],\n  ['line', { x1: '16', x2: '8', y1: '13', y2: '13', key: '14keom' }],\n  ['line', { x1: '16', x2: '8', y1: '17', y2: '17', key: '17nazh' }],\n  ['line', { x1: '10', x2: '8', y1: '9', y2: '9', key: '1a5vjj' }],\n]);\n\nexport default FileText;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Calendar\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHg9IjMiIHk9IjQiIHJ4PSIyIiByeT0iMiIgLz4KICA8bGluZSB4MT0iMTYiIHgyPSIxNiIgeTE9IjIiIHkyPSI2IiAvPgogIDxsaW5lIHgxPSI4IiB4Mj0iOCIgeTE9IjIiIHkyPSI2IiAvPgogIDxsaW5lIHgxPSIzIiB4Mj0iMjEiIHkxPSIxMCIgeTI9IjEwIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/calendar\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Calendar = createLucideIcon('Calendar', [\n  ['rect', { width: '18', height: '18', x: '3', y: '4', rx: '2', ry: '2', key: 'eu3xkr' }],\n  ['line', { x1: '16', x2: '16', y1: '2', y2: '6', key: 'm3sa8f' }],\n  ['line', { x1: '8', x2: '8', y1: '2', y2: '6', key: '18kwsl' }],\n  ['line', { x1: '3', x2: '21', y1: '10', y2: '10', key: 'xt86sb' }],\n]);\n\nexport default Calendar;\n","'use client'\n\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query'\nimport { useRouter } from 'next/navigation'\nimport { createClient } from '@/lib/supabase/client'\nimport { User } from '@supabase/supabase-js'\nimport { Database } from '@/types/database.types'\nimport { useEffect } from 'react'\nimport type { TableRow } from '@/lib/types/supabase-helpers'\nimport { logger } from '@/lib/utils/logger'\n\ntype UserRow = Database['public']['Tables']['users']['Row'] | null\ntype Organization = TableRow<'organizations'>\n\nexport function useAuth() {\n  const supabase = createClient()\n  const router = useRouter()\n  const queryClient = useQueryClient()\n\n  // Récupérer la session actuelle\n  const { data: session, isLoading: sessionLoading } = useQuery({\n    queryKey: ['session'],\n    queryFn: async () => {\n      try {\n        // Timeout de 3 secondes pour éviter les blocages\n        const timeoutPromise = new Promise<null>((_, reject) => {\n          setTimeout(() => reject(new Error('Session timeout')), 3000)\n        })\n\n        const sessionPromise = supabase.auth.getSession().then(({ data: { session }, error }) => {\n          if (error) {\n            logger.error('Session error', error as Error)\n            return null\n          }\n          return session\n        })\n\n        return await Promise.race([sessionPromise, timeoutPromise])\n      } catch (error) {\n        // En cas d'erreur ou de timeout, retourner null pour ne pas bloquer\n        return null\n      }\n    },\n    retry: false,\n    refetchOnWindowFocus: false,\n    refetchOnMount: false,\n    staleTime: 1000 * 60 * 5, // Cache pendant 5 minutes\n  })\n\n  // Récupérer l'utilisateur depuis la table users\n  const { data: user, isLoading: userLoading } = useQuery<UserRow>({\n    queryKey: ['user', session?.user?.id],\n    queryFn: async (): Promise<UserRow> => {\n      if (!session?.user?.id) {\n        return null\n      }\n      \n      try {\n        // Timeout de 3 secondes pour éviter les blocages\n        const timeoutPromise = new Promise<UserRow>((_, reject) => {\n          setTimeout(() => reject(new Error('User fetch timeout')), 3000)\n        })\n\n        const userPromise = supabase\n          .from('users')\n          .select('id, organization_id, email, full_name, phone, avatar_url, role, permissions, is_active, last_login_at, created_at, updated_at')\n          .eq('id', session.user.id)\n          .maybeSingle()\n          .then(async ({ data, error }) => {\n            if (error) {\n              // Si l'utilisateur n'existe pas, retourner null sans erreur\n              if (error.code === 'PGRST116' || error.message?.includes('No rows')) {\n                return null\n              }\n              return null\n            }\n\n            // Si l'utilisateur n'existe pas dans public.users mais qu'il y a une session,\n            // synchroniser automatiquement depuis auth.users\n            if (!data && session?.user?.id) {\n              logger.info('User not found in public.users, attempting to sync from auth.users...')\n              \n              try {\n                // Appeler la fonction RPC pour synchroniser\n                const { data: syncResult, error: syncError } = await supabase.rpc(\n                  'sync_user_from_auth',\n                  { user_id: session.user.id }\n                )\n\n                if (syncError) {\n                  logger.error('Error syncing user:', syncError)\n                  // Ne pas throw, on continue avec null pour éviter de bloquer l'app\n                } else if ((syncResult as any)?.success) {\n                  logger.info('User synced successfully, refetching...', { syncResult })\n                  \n                  // Attendre un peu pour s'assurer que l'utilisateur est disponible\n                  await new Promise(resolve => setTimeout(resolve, 100))\n                  \n                  // Refetch l'utilisateur après synchronisation\n                  const { data: syncedUser, error: refetchError } = await supabase\n                    .from('users')\n                    .select('id, organization_id, email, full_name, phone, avatar_url, role, permissions, is_active, last_login_at, created_at, updated_at')\n                    .eq('id', session.user.id)\n                    .maybeSingle()\n                  \n                  if (refetchError) {\n                    logger.error('Error refetching synced user:', refetchError)\n                    // Invalider le cache pour forcer un nouveau fetch\n                    queryClient.invalidateQueries({ queryKey: ['user', session.user.id] })\n                    return null\n                  } else if (syncedUser) {\n                    logger.info('Synced user retrieved successfully:', { id: syncedUser.id, email: syncedUser.email, hasOrg: !!syncedUser.organization_id })\n                    // Retourner l'utilisateur synchronisé - React Query mettra à jour le cache automatiquement\n                    return syncedUser\n                  } else {\n                    logger.warn('User sync succeeded but refetch returned null - invalidating cache and retrying...')\n                    // Si le refetch retourne null, invalider le cache et laisser React Query refetch\n                    queryClient.invalidateQueries({ queryKey: ['user', session.user.id] })\n                    return null\n                  }\n                }\n              } catch (syncException) {\n                logger.error('Exception during user sync:', syncException)\n              }\n              \n              // Si la synchronisation a échoué, retourner null\n              return null\n            }\n\n            if (!data) {\n              return null\n            }\n\n            // Vérifier que l'utilisateur a un organization_id\n            if (!data.organization_id) {\n              logger.warn('User exists but has no organization_id')\n            }\n\n            return data\n          })\n\n        return (await Promise.race([userPromise, timeoutPromise])) as UserRow\n      } catch (err) {\n        // En cas d'erreur ou de timeout, retourner null pour ne pas bloquer\n        return null\n      }\n    },\n    enabled: !!session?.user?.id && !sessionLoading,\n    retry: false,\n    refetchOnWindowFocus: false,\n    refetchOnMount: false,\n    staleTime: 1000 * 60 * 5, // Cache pendant 5 minutes\n  })\n\n  // Connexion\n  const loginMutation = useMutation({\n    mutationFn: async ({ email, password }: { email: string; password: string }) => {\n      const { data, error } = await supabase.auth.signInWithPassword({\n        email,\n        password,\n      })\n      if (error) throw error\n      return data\n    },\n    onSuccess: async () => {\n      // Invalider les queries pour forcer le rechargement\n      queryClient.invalidateQueries({ queryKey: ['session'] })\n      queryClient.invalidateQueries({ queryKey: ['user'] })\n      \n      // Attendre un peu pour que la session soit mise à jour\n      await new Promise(resolve => setTimeout(resolve, 300))\n      \n      // Rediriger vers le dashboard (le dashboard détectera automatiquement le rôle)\n      router.push('/dashboard')\n    },\n  })\n\n  // Inscription\n  const registerMutation = useMutation({\n    mutationFn: async ({\n      email,\n      password,\n      fullName,\n      organizationName,\n    }: {\n      email: string\n      password: string\n      fullName: string\n      organizationName: string\n    }) => {\n      // 1. Créer l'utilisateur dans auth\n      const { data: authData, error: authError } = await supabase.auth.signUp({\n        email,\n        password,\n      })\n      if (authError) {\n        logger.error('Auth signup error', new Error(authError.message), {\n          status: authError.status,\n        })\n        \n        // Gérer l'erreur de rate limiting\n        if (authError.status === 429 || authError.message?.includes('2 seconds')) {\n          throw new Error('Trop de tentatives. Veuillez attendre quelques secondes avant de réessayer.')\n        }\n        \n        throw new Error(authError.message || 'Erreur lors de la création du compte')\n      }\n      if (!authData.user) throw new Error('Erreur lors de la création du compte')\n\n      // Avec Supabase, signUp peut retourner null pour la session si l'email nécessite une confirmation\n      // On essaie de récupérer la session de plusieurs façons\n      let currentSession = authData.session\n      \n      // Si pas de session immédiatement, attendre un peu et réessayer\n      if (!currentSession) {\n        await new Promise(resolve => setTimeout(resolve, 1000))\n        \n        // Essayer de récupérer la session\n        const { data: { session: newSession } } = await supabase.auth.getSession()\n        currentSession = newSession\n      }\n\n      // Si toujours pas de session, essayer refreshSession\n      if (!currentSession && authData.user) {\n        const { data: { session: refreshedSession } } = await supabase.auth.refreshSession()\n        currentSession = refreshedSession\n      }\n\n      // Si toujours pas de session, attendre encore et réessayer\n      if (!currentSession) {\n        await new Promise(resolve => setTimeout(resolve, 2000))\n        \n        const { data: { session: retrySession } } = await supabase.auth.getSession()\n        if (retrySession) {\n          currentSession = retrySession\n        }\n      }\n\n      // Si toujours pas de session, mais qu'on a un user, on continue quand même\n      // (certaines configurations Supabase nécessitent une confirmation email)\n      if (!currentSession && !authData.user) {\n        throw new Error('Erreur : la session n\\'a pas pu être établie. Vérifiez votre email pour confirmer votre compte si nécessaire.')\n      }\n\n      // Utiliser l'ID utilisateur (de la session ou de authData)\n      const userId = currentSession?.user?.id || authData.user.id\n\n      // 2. Créer l'organisation en utilisant la fonction SQL (bypass RLS)\n      const orgCode = organizationName.toUpperCase().replace(/\\s+/g, '').slice(0, 6)\n      \n      // Essayer d'abord avec la fonction SQL (si elle existe)\n      let orgId: string | null = null\n      let funcError: any = null\n      \n      // Utiliser userId au lieu de vérifier la session (on a déjà userId ci-dessus)\n      if (!userId) {\n        throw new Error('Erreur : impossible d\\'obtenir l\\'ID utilisateur')\n      }\n      \n      // Essayer d'abord avec la fonction SQL\n      try {\n        // Appeler la fonction avec user_id en paramètre pour contourner le problème de session\n        const { data: funcResult, error: rpcError } = await supabase.rpc(\n          'create_organization_for_user',\n          {\n            org_name: organizationName,\n            org_code: orgCode,\n            org_type: 'primary',\n            org_country: 'SN',\n            org_currency: 'XOF',\n            org_language: 'fr',\n            org_timezone: 'Africa/Dakar',\n            user_id: userId,\n          }\n        )\n        \n        if (rpcError) {\n          funcError = rpcError\n          \n          // Si l'erreur est \"User must be authenticated\", essayer sans user_id\n          if (rpcError.code === 'P0001' && rpcError.message?.includes('User must be authenticated')) {\n            const retryResult = await supabase.rpc(\n              'create_organization_for_user',\n              {\n                org_name: organizationName,\n                org_code: orgCode,\n                org_type: 'primary',\n                org_country: 'SN',\n                org_currency: 'XOF',\n                org_language: 'fr',\n                org_timezone: 'Africa/Dakar',\n              }\n            )\n            \n            if (retryResult.error) {\n              funcError = retryResult.error\n            } else if (retryResult.data) {\n              orgId = retryResult.data as string\n            }\n          }\n        } else if (funcResult) {\n          orgId = funcResult as string\n        }\n      } catch (funcErr) {\n        funcError = funcErr\n      }\n\n      // Si la fonction n'a pas fonctionné, essayer l'insertion directe\n      let org: any = null\n      if (!orgId) {\n        const { data: orgData, error: orgError } = await supabase\n        .from('organizations')\n        .insert({\n            name: organizationName,\n            code: orgCode,\n            type: 'primary' as const,\n            country: 'SN',\n            currency: 'XOF',\n            language: 'fr',\n            timezone: 'Africa/Dakar',\n            subscription_tier: 'free' as const,\n            subscription_status: 'active' as const,\n            settings: {} as Organization['settings'],\n          })\n          .select('id, name, code')\n          .single()\n\n        if (orgError) {\n          console.error('Organization creation error:', orgError)\n          console.error('Error details:', {\n            code: orgError.code,\n            message: orgError.message,\n            details: orgError.details,\n            hint: orgError.hint,\n          })\n          \n          // Si c'est une erreur RLS, donner des instructions plus claires\n          if (orgError.code === '42501') {\n            throw new Error(\n              'Erreur de sécurité (RLS) : Impossible de créer l\\'organisation. ' +\n              'Les politiques RLS bloquent la création. ' +\n              'INSTRUCTIONS : ' +\n              '1. Exécutez le script supabase/create_organization_function.sql dans Supabase SQL Editor ' +\n              '2. OU exécutez le script supabase/fix_rls_urgent.sql pour corriger les politiques RLS ' +\n              '3. Attendez quelques secondes puis réessayez'\n            )\n          }\n          \n          throw new Error(`Impossible de créer l'organisation : ${orgError.message}`)\n        }\n        \n        org = orgData\n        orgId = orgData?.id\n      } else {\n        // L'organisation a été créée par la fonction SQL, on utilise directement orgId\n        // Pas besoin de récupérer l'organisation car RLS peut bloquer\n        // On créera un objet minimal avec les données qu'on a\n        org = {\n          id: orgId,\n          name: organizationName,\n          code: orgCode,\n        }\n      }\n\n      if (!orgId) {\n        throw new Error('Erreur : l\\'organisation n\\'a pas été créée correctement')\n      }\n      \n      // Utiliser orgId au lieu de org.id\n      const finalOrgId = orgId || org?.id\n      if (!finalOrgId) {\n        throw new Error('Erreur : impossible d\\'obtenir l\\'ID de l\\'organisation')\n      }\n\n      // 3. Créer l'utilisateur dans la table users en utilisant une fonction SQL (bypass RLS)\n      let createdUser: any = null\n      let userError: any = null\n      \n      try {\n        // Essayer d'abord avec la fonction SQL\n        const { data: createdUserId, error: rpcUserError } = await (supabase.rpc as any)(\n          'create_user_for_organization',\n          {\n            user_id: userId,\n            user_email: email,\n            user_full_name: fullName,\n            organization_id: finalOrgId,\n          }\n        )\n        \n        if (rpcUserError) {\n          userError = rpcUserError\n          \n          // Si la fonction n'existe pas, essayer l'insertion directe\n          if (rpcUserError.code === '42883') {\n            \n            const { data: userData, error: directUserError } = await supabase\n              .from('users')\n              .insert({\n                id: userId,\n                organization_id: finalOrgId,\n                email,\n                full_name: fullName,\n                role: 'admin',\n                is_active: true,\n              })\n              .select('id, organization_id, email, full_name, role')\n        .single()\n\n            if (directUserError) {\n              userError = directUserError\n            } else {\n              createdUser = userData\n            }\n          }\n        } else if (createdUserId) {\n          // L'utilisateur a été créé, créer un objet minimal\n          createdUser = {\n            id: createdUserId,\n            organization_id: finalOrgId,\n            email,\n            full_name: fullName,\n            role: 'admin',\n          }\n        }\n      } catch (userErr) {\n        userError = userErr\n      }\n\n      if (userError) {\n        // Si l'erreur est RLS, donner des instructions\n        if (userError.code === '42501') {\n          throw new Error(\n            'Erreur RLS lors de la création de l\\'utilisateur. ' +\n            'Exécutez le script supabase/create_user_function.sql dans Supabase SQL Editor, ' +\n            'ou utilisez supabase/fix_existing_user.sql pour créer l\\'utilisateur manuellement.'\n          )\n        }\n        \n        throw userError\n      }\n\n      if (!createdUser) {\n        throw new Error('Erreur : l\\'utilisateur n\\'a pas été créé')\n      }\n\n      if (!createdUser?.organization_id) {\n        throw new Error('Erreur : l\\'utilisateur n\\'a pas d\\'organization_id')\n      }\n\n      // 4. Invalider les queries pour forcer le rechargement\n      queryClient.invalidateQueries({ queryKey: ['user', userId] })\n      queryClient.invalidateQueries({ queryKey: ['session'] })\n\n      // Si on n'a pas de session, attendre un peu et réessayer une dernière fois\n      if (!currentSession) {\n        await new Promise(resolve => setTimeout(resolve, 1000))\n        const { data: { session: finalSession } } = await supabase.auth.getSession()\n        if (finalSession) {\n          return { ...authData, session: finalSession }\n        }\n      }\n\n      return authData\n    },\n    onSuccess: async (authData) => {\n      // Attendre un peu pour que la session soit mise à jour\n      await new Promise(resolve => setTimeout(resolve, 1500))\n      \n      // Vérifier que la session existe avant de rediriger\n      const supabase = createClient()\n      const { data: { session } } = await supabase.auth.getSession()\n      \n      queryClient.invalidateQueries({ queryKey: ['session'] })\n      if (authData.user) {\n        queryClient.invalidateQueries({ queryKey: ['user', authData.user.id] })\n      }\n      \n      if (session) {\n        router.push('/dashboard')\n      } else {\n        // Si pas de session, peut-être que l'email nécessite une confirmation\n        router.push('/auth/login?message=confirm-email')\n      }\n    },\n  })\n\n  // Déconnexion\n  const logoutMutation = useMutation({\n    mutationFn: async () => {\n      const { error } = await supabase.auth.signOut()\n      if (error) throw error\n    },\n    onSuccess: () => {\n      queryClient.clear()\n      router.push('/')\n    },\n  })\n\n  // Écouter les changements de session\n  useEffect(() => {\n    const {\n      data: { subscription },\n    } = supabase.auth.onAuthStateChange((_event, session) => {\n      queryClient.setQueryData(['session'], session)\n      if (!session) {\n        queryClient.clear()\n      }\n    })\n\n    return () => subscription.unsubscribe()\n  }, [supabase, queryClient])\n\n  const isLoading = sessionLoading || userLoading\n\n  return {\n    session,\n    user,\n    isLoading,\n    isAuthenticated: !!session,\n    login: loginMutation.mutate,\n    register: registerMutation.mutate,\n    logout: logoutMutation.mutate,\n    isLoggingIn: loginMutation.isPending,\n    isRegistering: registerMutation.isPending,\n    isLoggingOut: logoutMutation.isPending,\n    loginError: loginMutation.error,\n    registerError: registerMutation.error,\n  }\n}\n\n","'use client'\n\nimport * as React from 'react'\nimport { cn } from '@/lib/utils'\nimport { motion, AnimatePresence } from '@/components/ui/motion'\nimport { AlertCircle, CheckCircle2 } from 'lucide-react'\n\n// Compteur global pour générer des IDs uniques et stables\nlet inputIdCounter = 0\n\nexport interface InputProps\n  extends React.InputHTMLAttributes<HTMLInputElement> {\n  label?: string\n  error?: string\n  helperText?: string\n  variant?: 'default' | 'outlined' | 'filled'\n  leftIcon?: React.ReactNode\n  rightIcon?: React.ReactNode\n}\n\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\n  ({ \n    className, \n    label, \n    error, \n    helperText,\n    variant = 'default',\n    leftIcon,\n    rightIcon,\n    id,\n    ...props \n  }, ref) => {\n    const [isFocused, setIsFocused] = React.useState(false)\n    const [hasValue, setHasValue] = React.useState(!!props.value || !!props.defaultValue)\n    // Utiliser useId() pour un ID stable entre SSR et client (React 18+)\n    // Fallback vers un compteur si useId n'est pas disponible\n    const reactId = React.useId?.() || null\n    const inputId = id || reactId || `input-${++inputIdCounter}`\n    \n    React.useEffect(() => {\n      if (props.value !== undefined) {\n        setHasValue(!!props.value)\n      }\n    }, [props.value])\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n      setHasValue(!!e.target.value)\n      props.onChange?.(e)\n    }\n\n    const baseStyles = cn(\n      'flex w-full rounded-lg font-medium transition-all duration-300',\n      'placeholder:text-muted-foreground/60',\n      'focus:outline-none focus:ring-2 focus:ring-primary/20',\n      'disabled:cursor-not-allowed disabled:opacity-50',\n      {\n        // Default variant\n        'border-2 border-input bg-background px-4 py-3': variant === 'default',\n        'focus:border-primary focus:bg-white': variant === 'default' && !error,\n        'border-destructive focus:border-destructive focus:ring-destructive/20': error,\n        \n        // Outlined variant\n        'border-2 border-input bg-transparent px-4 py-3': variant === 'outlined',\n        'focus:border-primary focus:shadow-md focus:shadow-primary/10': variant === 'outlined' && !error,\n        \n        // Filled variant\n        'border-0 border-b-2 border-input bg-muted/50 px-4 py-3 rounded-b-none': variant === 'filled',\n        'focus:bg-muted focus:border-primary': variant === 'filled' && !error,\n        'focus:border-destructive bg-destructive/5': variant === 'filled' && error,\n      },\n      leftIcon && 'pl-11',\n      rightIcon && 'pr-11',\n      error && 'pr-11',\n      className\n    )\n\n    return (\n      <div className=\"w-full space-y-1.5\">\n        {label && (\n          <motion.label\n            htmlFor={inputId}\n            initial={false}\n            animate={{\n              color: error ? '#EF4444' : isFocused ? 'rgb(37, 99, 235)' : 'rgb(107, 114, 128)',\n            }}\n            className={cn(\n              'block text-sm font-medium transition-colors duration-200',\n              error && 'text-destructive'\n            )}\n          >\n            {label}\n            {props.required && <span className=\"text-destructive ml-1\">*</span>}\n          </motion.label>\n        )}\n        \n        <div className=\"relative\">\n          {/* Left Icon */}\n          {leftIcon && (\n            <div className=\"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground pointer-events-none\">\n              {leftIcon}\n            </div>\n          )}\n          \n          {/* Input */}\n          <motion.input\n            ref={ref}\n            id={inputId}\n            {...props}\n            onChange={handleChange}\n            onFocus={(e) => {\n              setIsFocused(true)\n              props.onFocus?.(e)\n            }}\n            onBlur={(e) => {\n              setIsFocused(false)\n              props.onBlur?.(e)\n            }}\n            className={baseStyles}\n            animate={{\n              scale: isFocused ? 1.01 : 1,\n              borderColor: error \n                ? '#EF4444' \n                : isFocused \n                  ? 'rgb(37, 99, 235)' \n                  : 'rgb(226, 232, 240)',\n            }}\n            transition={{ duration: 0.2 }}\n          />\n          \n          {/* Right Icon / Status */}\n          <div className=\"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none\">\n            {error ? (\n              <motion.div\n                initial={{ scale: 0, opacity: 0 }}\n                animate={{ scale: 1, opacity: 1 }}\n                transition={{ type: \"spring\", stiffness: 500, damping: 30 }}\n              >\n                <AlertCircle className=\"h-5 w-5 text-destructive\" />\n              </motion.div>\n            ) : rightIcon ? (\n              <div className=\"text-muted-foreground\">\n                {rightIcon}\n              </div>\n            ) : hasValue && !error && variant === 'filled' ? (\n              <motion.div\n                initial={{ scale: 0, opacity: 0 }}\n                animate={{ scale: 1, opacity: 1 }}\n                transition={{ type: \"spring\", stiffness: 500, damping: 30 }}\n              >\n                <CheckCircle2 className=\"h-5 w-5 text-success\" />\n              </motion.div>\n            ) : null}\n          </div>\n        </div>\n        \n        {/* Helper Text / Error Message */}\n        <AnimatePresence mode=\"wait\">\n          {(error || helperText) && (\n            <motion.p\n              initial={{ opacity: 0, y: -5 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -5 }}\n              transition={{ duration: 0.2 }}\n              className={cn(\n                'text-xs transition-colors duration-200',\n                error ? 'text-destructive' : 'text-muted-foreground'\n              )}\n            >\n              {error || helperText}\n            </motion.p>\n          )}\n        </AnimatePresence>\n      </div>\n    )\n  }\n)\nInput.displayName = 'Input'\n\nexport { Input }\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Search\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMSIgY3k9IjExIiByPSI4IiAvPgogIDxwYXRoIGQ9Im0yMSAyMS00LjMtNC4zIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/search\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Search = createLucideIcon('Search', [\n  ['circle', { cx: '11', cy: '11', r: '8', key: '4ej97u' }],\n  ['path', { d: 'm21 21-4.3-4.3', key: '1qie3q' }],\n]);\n\nexport default Search;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Award\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjgiIHI9IjYiIC8+CiAgPHBhdGggZD0iTTE1LjQ3NyAxMi44OSAxNyAyMmwtNS0zLTUgMyAxLjUyMy05LjExIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/award\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Award = createLucideIcon('Award', [\n  ['circle', { cx: '12', cy: '8', r: '6', key: '1vp47v' }],\n  ['path', { d: 'M15.477 12.89 17 22l-5-3-5 3 1.523-9.11', key: 'em7aur' }],\n]);\n\nexport default Award;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name User\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTkgMjF2LTJhNCA0IDAgMCAwLTQtNEg5YTQgNCAwIDAgMC00IDR2MiIgLz4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjciIHI9IjQiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/user\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst User = createLucideIcon('User', [\n  ['path', { d: 'M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2', key: '975kel' }],\n  ['circle', { cx: '12', cy: '7', r: '4', key: '17ys0d' }],\n]);\n\nexport default User;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name GraduationCap\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjIgMTB2Nk0yIDEwbDEwLTUgMTAgNS0xMCA1eiIgLz4KICA8cGF0aCBkPSJNNiAxMnY1YzMgMyA5IDMgMTIgMHYtNSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/graduation-cap\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst GraduationCap = createLucideIcon('GraduationCap', [\n  ['path', { d: 'M22 10v6M2 10l10-5 10 5-10 5z', key: '1ef52a' }],\n  ['path', { d: 'M6 12v5c3 3 9 3 12 0v-5', key: '1f75yj' }],\n]);\n\nexport default GraduationCap;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Settings\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIuMjIgMmgtLjQ0YTIgMiAwIDAgMC0yIDJ2LjE4YTIgMiAwIDAgMS0xIDEuNzNsLS40My4yNWEyIDIgMCAwIDEtMiAwbC0uMTUtLjA4YTIgMiAwIDAgMC0yLjczLjczbC0uMjIuMzhhMiAyIDAgMCAwIC43MyAyLjczbC4xNS4xYTIgMiAwIDAgMSAxIDEuNzJ2LjUxYTIgMiAwIDAgMS0xIDEuNzRsLS4xNS4wOWEyIDIgMCAwIDAtLjczIDIuNzNsLjIyLjM4YTIgMiAwIDAgMCAyLjczLjczbC4xNS0uMDhhMiAyIDAgMCAxIDIgMGwuNDMuMjVhMiAyIDAgMCAxIDEgMS43M1YyMGEyIDIgMCAwIDAgMiAyaC40NGEyIDIgMCAwIDAgMi0ydi0uMThhMiAyIDAgMCAxIDEtMS43M2wuNDMtLjI1YTIgMiAwIDAgMSAyIDBsLjE1LjA4YTIgMiAwIDAgMCAyLjczLS43M2wuMjItLjM5YTIgMiAwIDAgMC0uNzMtMi43M2wtLjE1LS4wOGEyIDIgMCAwIDEtMS0xLjc0di0uNWEyIDIgMCAwIDEgMS0xLjc0bC4xNS0uMDlhMiAyIDAgMCAwIC43My0yLjczbC0uMjItLjM4YTIgMiAwIDAgMC0yLjczLS43M2wtLjE1LjA4YTIgMiAwIDAgMS0yIDBsLS40My0uMjVhMiAyIDAgMCAxLTEtMS43M1Y0YTIgMiAwIDAgMC0yLTJ6IiAvPgogIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjMiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/settings\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Settings = createLucideIcon('Settings', [\n  [\n    'path',\n    {\n      d: 'M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z',\n      key: '1qme2f',\n    },\n  ],\n  ['circle', { cx: '12', cy: '12', r: '3', key: '1v7zrd' }],\n]);\n\nexport default Settings;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name CreditCard\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iMjAiIGhlaWdodD0iMTQiIHg9IjIiIHk9IjUiIHJ4PSIyIiAvPgogIDxsaW5lIHgxPSIyIiB4Mj0iMjIiIHkxPSIxMCIgeTI9IjEwIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/credit-card\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CreditCard = createLucideIcon('CreditCard', [\n  ['rect', { width: '20', height: '14', x: '2', y: '5', rx: '2', key: 'ynyp8z' }],\n  ['line', { x1: '2', x2: '22', y1: '10', y2: '10', key: '1b3vmo' }],\n]);\n\nexport default CreditCard;\n","'use client'\n\nimport { createClient as createSupabaseClient } from '@supabase/supabase-js'\nimport type { Database } from '@/types/database.types'\n\n// Cache in-memory pour éviter de recréer plusieurs GoTrueClient/SupabaseClient\n// (souvent déclenché en dev par React StrictMode et/ou les re-renders).\nconst learnerClientCache = new Map<string, ReturnType<typeof createSupabaseClient<Database>>>()\n\n/**\n * Client Supabase pour l'espace apprenant (accès sans login).\n * On injecte le studentId dans un header afin de pouvoir l'utiliser en RLS (PostgREST).\n */\nexport function createLearnerClient(studentId?: string) {\n  const cacheKey = studentId || 'anonymous'\n  const cached = learnerClientCache.get(cacheKey)\n  if (cached) return cached\n\n  const headers: Record<string, string> = {}\n  if (studentId) headers['x-learner-student-id'] = studentId\n\n  // Empêche toute réutilisation d'une session admin stockée dans le navigateur.\n  const noopStorage = {\n    getItem: (_key: string) => null,\n    setItem: (_key: string, _value: string) => {},\n    removeItem: (_key: string) => {},\n  }\n\n  const client = createSupabaseClient<Database>(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n    {\n      global: { headers },\n      auth: {\n        persistSession: false,\n        autoRefreshToken: false,\n        detectSessionInUrl: false,\n        storage: noopStorage as any,\n        // Évite le warning \"Multiple GoTrueClient instances\" en isolant la clé.\n        storageKey: `sb-learner-auth-token-${cacheKey}`,\n      },\n    }\n  )\n\n  learnerClientCache.set(cacheKey, client)\n  return client\n}\n\n\n","'use client'\n\nimport { createContext, useContext, ReactNode } from 'react'\nimport { useLearner } from '@/lib/hooks/use-learner'\n\ninterface LearnerContextType {\n  student: ReturnType<typeof useLearner>['student']\n  studentId: string | undefined\n  isLoading: boolean\n  hasStudent: boolean\n  organizationId: string | null\n}\n\nconst LearnerContext = createContext<LearnerContextType | null>(null)\n\nexport function LearnerProvider({ children }: { children: ReactNode }) {\n  const learner = useLearner()\n\n  return (\n    <LearnerContext.Provider value={learner}>\n      {children}\n    </LearnerContext.Provider>\n  )\n}\n\nexport function useLearnerContext() {\n  const context = useContext(LearnerContext)\n  if (!context) {\n    throw new Error('useLearnerContext must be used within LearnerProvider')\n  }\n  return context\n}\n\n\n\n","'use client'\n\nimport { useQuery } from '@tanstack/react-query'\nimport { createLearnerClient } from '@/lib/supabase/learner-client'\nimport { useParams, useRouter } from 'next/navigation'\nimport { useEffect, useState } from 'react'\nimport type { TableRow } from '@/lib/types/supabase-helpers'\nimport { logger } from '@/lib/utils/logger'\n\ntype StudentRow = TableRow<'students'> | null\n\n/**\n * Hook pour gérer l'accès étudiant sans authentification\n * Similaire à useAuth() mais pour les étudiants\n */\nexport function useLearner() {\n  const router = useRouter()\n  const params = useParams()\n  \n  // Récupérer l'ID étudiant depuis l'URL ou localStorage\n  // IMPORTANT: Ne prendre params.id que si on est sur /learner/access/[id]\n  // Sur d'autres routes comme /learner/messages/[id], params.id est l'ID de la conversation, pas l'étudiant\n  const currentPath = typeof window !== 'undefined' ? window.location.pathname : ''\n  const isAccessRoute = currentPath.startsWith('/learner/access/')\n  const studentIdFromUrl = isAccessRoute ? (params?.id as string | undefined) : undefined\n  \n  const [studentId, setStudentId] = useState<string | undefined>(() => {\n    if (typeof window !== 'undefined') {\n      // Essayer d'abord l'URL (pour /learner/access/[id] uniquement)\n      if (studentIdFromUrl && isAccessRoute) {\n        logger.info('[useLearner] Student ID from URL (access route)', { \n          studentId: studentIdFromUrl,\n          path: currentPath\n        })\n        localStorage.setItem('learner_student_id', studentIdFromUrl)\n        return studentIdFromUrl\n      }\n      // Sinon, vérifier localStorage (pour /learner après redirection ou autres routes)\n      const savedStudentId = localStorage.getItem('learner_student_id')\n      if (savedStudentId) {\n        logger.info('[useLearner] Student ID from localStorage', { \n          studentId: savedStudentId,\n          path: currentPath,\n          isAccessRoute\n        })\n        return savedStudentId\n      }\n      logger.warn('[useLearner] No student ID found in URL or localStorage', { \n        path: currentPath,\n        isAccessRoute,\n        paramsId: params?.id\n      })\n      return undefined\n    }\n    return studentIdFromUrl\n  })\n\n  // Mettre à jour si l'URL change (uniquement sur la route /learner/access/[id])\n  useEffect(() => {\n    if (studentIdFromUrl && isAccessRoute && studentIdFromUrl !== studentId) {\n      logger.info('[useLearner] Updating student ID from URL', { \n        oldId: studentId, \n        newId: studentIdFromUrl,\n        path: currentPath\n      })\n      localStorage.setItem('learner_student_id', studentIdFromUrl)\n      setStudentId(studentIdFromUrl)\n    }\n  }, [studentIdFromUrl, studentId, isAccessRoute, currentPath])\n\n  // Récupérer les données de l'étudiant\n  const { data: student, isLoading: studentLoading, error: studentError } = useQuery<StudentRow>({\n    queryKey: ['learner-student', studentId],\n    queryFn: async (): Promise<StudentRow> => {\n      if (!studentId) {\n        return null\n      }\n      \n      try {\n        logger.info('[useLearner] Starting to fetch student', { studentId })\n        const supabase = createLearnerClient(studentId)\n        \n        // Essayer d'abord la requête directe\n        logger.info('[useLearner] Trying direct query', { studentId })\n        const { data, error } = await supabase\n          .from('students')\n          .select('*')\n          .eq('id', studentId)\n          .maybeSingle()\n\n        // Si on a des données, les retourner\n        if (data && !error) {\n          logger.info('[useLearner] Student found via direct query', { studentId, studentName: `${data.first_name} ${data.last_name}` })\n          return data\n        }\n\n        // Si erreur ou pas de données, essayer la fonction RPC comme fallback\n        logger.warn('[useLearner] Student not found via direct query, trying RPC function', { \n          studentId, \n          error: error?.message, \n          errorCode: error?.code,\n          hasData: !!data \n        })\n        \n        try {\n          // Essayer la fonction RPC (retourne un jsonb directement, pas besoin de .single())\n          logger.info('[useLearner] Calling RPC function', { \n            studentId,\n            studentIdType: typeof studentId,\n            studentIdLength: studentId?.length,\n            isValidUUID: /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(studentId || '')\n          })\n          \n          // Vérifier que studentId est un UUID valide\n          if (!studentId || !/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(studentId)) {\n            logger.error('[useLearner] Invalid studentId format for RPC', { studentId })\n            return null\n          }\n          \n          // PostgREST peut retourner jsonb de différentes manières\n          // Essayer d'abord sans .single(), puis avec si nécessaire\n          let rpcData: any = null\n          let rpcError: any = null\n          \n          // PostgREST retourne jsonb directement comme un objet (pas dans un tableau)\n          // Donc on n'utilise PAS .single() pour les fonctions RPC qui retournent jsonb\n          const { data: rpcDataDirect, error: rpcErrorDirect } = await supabase\n            .rpc('get_learner_student', { p_student_id: studentId })\n          \n          // Log détaillé de la réponse RPC\n          const rpcLogDetails = {\n            studentId, \n            hasData: !!rpcDataDirect, \n            hasError: !!rpcErrorDirect,\n            rpcErrorCode: rpcErrorDirect?.code,\n            rpcErrorMessage: rpcErrorDirect?.message,\n            rpcDataType: typeof rpcDataDirect,\n            rpcDataIsArray: Array.isArray(rpcDataDirect),\n            rpcDataIsNull: rpcDataDirect === null,\n            rpcDataIsUndefined: rpcDataDirect === undefined,\n            rpcDataStringified: rpcDataDirect ? JSON.stringify(rpcDataDirect).substring(0, 200) : 'null',\n            rpcDataValue: rpcDataDirect\n          }\n          \n          logger.info('[useLearner] RPC response (direct)', rpcLogDetails)\n          \n          // Si on a une erreur, l'utiliser\n          if (rpcErrorDirect) {\n            rpcError = rpcErrorDirect\n          } else {\n            // PostgREST retourne jsonb directement comme un objet (pas un tableau)\n            // Si la fonction retourne NULL, PostgREST retourne null\n            // Si la fonction retourne jsonb, PostgREST retourne l'objet directement\n            rpcData = rpcDataDirect\n            \n            // Si c'est un tableau (ne devrait pas arriver avec jsonb, mais on vérifie quand même)\n            if (Array.isArray(rpcDataDirect)) {\n              rpcData = rpcDataDirect.length > 0 ? rpcDataDirect[0] : null\n              logger.info('[useLearner] RPC returned array (unexpected), taking first element', { \n                arrayLength: rpcDataDirect.length,\n                firstElement: rpcData\n              })\n            }\n          }\n          \n          if (rpcError) {\n            logger.error('[useLearner] Error fetching student via RPC', rpcError as Error, { \n              studentId, \n              rpcErrorCode: rpcError.code, \n              rpcErrorMessage: rpcError.message,\n              rpcErrorDetails: rpcError.details,\n              rpcErrorHint: rpcError.hint\n            })\n            return null\n          }\n          \n          // Vérifier si on a des données valides\n          // La fonction peut retourner null si l'étudiant n'existe pas\n          if (rpcData === null || rpcData === undefined) {\n            logger.warn('[useLearner] Student not found via RPC (null response)', { \n              studentId,\n              rpcData,\n              rpcDataType: typeof rpcData,\n              note: \"L'étudiant n'existe peut-être pas dans la base de données avec cet ID\"\n            })\n            return null\n          }\n          \n          // Vérifier si c'est un objet vide\n          if (typeof rpcData === 'object' && Object.keys(rpcData).length === 0) {\n            logger.warn('[useLearner] Student not found via RPC (empty object)', { \n              studentId,\n              rpcData\n            })\n            return null\n          }\n          \n          // Convertir le jsonb en StudentRow\n          const studentData = rpcData as StudentRow\n          \n          logger.info('[useLearner] Student found via RPC function', { \n            studentId, \n            studentName: studentData?.first_name && studentData?.last_name ? `${studentData.first_name} ${studentData.last_name}` : 'Unknown',\n            studentIdFromData: studentData?.id,\n            hasEmail: !!studentData?.email\n          })\n          return studentData\n        } catch (rpcErr) {\n          logger.error('[useLearner] Exception calling RPC function', rpcErr as Error, { \n            studentId,\n            errorMessage: rpcErr instanceof Error ? rpcErr.message : String(rpcErr),\n            errorStack: rpcErr instanceof Error ? rpcErr.stack : undefined\n          })\n          return null\n        }\n      } catch (err) {\n        logger.error('[useLearner] Exception fetching student', err as Error, { studentId })\n        return null\n      }\n    },\n    enabled: !!studentId,\n    retry: false,\n    refetchOnWindowFocus: false,\n    refetchOnMount: true,\n    staleTime: 1000 * 60 * 5, // Cache pendant 5 minutes\n  })\n\n  const isLoading = studentLoading\n  const hasStudent = !!student && !!studentId\n\n  return {\n    student,\n    studentId,\n    isLoading,\n    hasStudent,\n    error: studentError,\n    // Helper pour récupérer l'organization_id facilement\n    organizationId: student?.organization_id || null,\n  }\n}\n\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name PlayCircle\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8cG9seWdvbiBwb2ludHM9IjEwIDggMTYgMTIgMTAgMTYgMTAgOCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/play-circle\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst PlayCircle = createLucideIcon('PlayCircle', [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['polygon', { points: '10 8 16 12 10 16 10 8', key: '1cimsy' }],\n]);\n\nexport default PlayCircle;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name MessageSquare\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEgMTVhMiAyIDAgMCAxLTIgMkg3bC00IDRWNWEyIDIgMCAwIDEgMi0yaDE0YTIgMiAwIDAgMSAyIDJ6IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/message-square\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst MessageSquare = createLucideIcon('MessageSquare', [\n  ['path', { d: 'M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z', key: '1lielz' }],\n]);\n\nexport default MessageSquare;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Bell\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNiA4YTYgNiAwIDAgMSAxMiAwYzAgNyAzIDkgMyA5SDNzMy0yIDMtOSIgLz4KICA8cGF0aCBkPSJNMTAuMyAyMWExLjk0IDEuOTQgMCAwIDAgMy40IDAiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/bell\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Bell = createLucideIcon('Bell', [\n  ['path', { d: 'M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9', key: '1qo2s2' }],\n  ['path', { d: 'M10.3 21a1.94 1.94 0 0 0 3.4 0', key: 'qgo35s' }],\n]);\n\nexport default Bell;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ClipboardCheck\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iOCIgaGVpZ2h0PSI0IiB4PSI4IiB5PSIyIiByeD0iMSIgcnk9IjEiIC8+CiAgPHBhdGggZD0iTTE2IDRoMmEyIDIgMCAwIDEgMiAydjE0YTIgMiAwIDAgMS0yIDJINmEyIDIgMCAwIDEtMi0yVjZhMiAyIDAgMCAxIDItMmgyIiAvPgogIDxwYXRoIGQ9Im05IDE0IDIgMiA0LTQiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/clipboard-check\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ClipboardCheck = createLucideIcon('ClipboardCheck', [\n  ['rect', { width: '8', height: '4', x: '8', y: '2', rx: '1', ry: '1', key: 'tgr4d6' }],\n  [\n    'path',\n    {\n      d: 'M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2',\n      key: '116196',\n    },\n  ],\n  ['path', { d: 'm9 14 2 2 4-4', key: 'df797q' }],\n]);\n\nexport default ClipboardCheck;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Menu\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8bGluZSB4MT0iNCIgeDI9IjIwIiB5MT0iMTIiIHkyPSIxMiIgLz4KICA8bGluZSB4MT0iNCIgeDI9IjIwIiB5MT0iNiIgeTI9IjYiIC8+CiAgPGxpbmUgeDE9IjQiIHgyPSIyMCIgeTE9IjE4IiB5Mj0iMTgiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/menu\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Menu = createLucideIcon('Menu', [\n  ['line', { x1: '4', x2: '20', y1: '12', y2: '12', key: '1e0a9i' }],\n  ['line', { x1: '4', x2: '20', y1: '6', y2: '6', key: '1owob3' }],\n  ['line', { x1: '4', x2: '20', y1: '18', y2: '18', key: 'yk5zj1' }],\n]);\n\nexport default Menu;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name LayoutDashboard\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSI5IiB4PSIzIiB5PSIzIiByeD0iMSIgLz4KICA8cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSI1IiB4PSIxNCIgeT0iMyIgcng9IjEiIC8+CiAgPHJlY3Qgd2lkdGg9IjciIGhlaWdodD0iOSIgeD0iMTQiIHk9IjEyIiByeD0iMSIgLz4KICA8cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSI1IiB4PSIzIiB5PSIxNiIgcng9IjEiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/layout-dashboard\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst LayoutDashboard = createLucideIcon('LayoutDashboard', [\n  ['rect', { width: '7', height: '9', x: '3', y: '3', rx: '1', key: '10lvy0' }],\n  ['rect', { width: '7', height: '5', x: '14', y: '3', rx: '1', key: '16une8' }],\n  ['rect', { width: '7', height: '9', x: '14', y: '12', rx: '1', key: '1hutg5' }],\n  ['rect', { width: '7', height: '5', x: '3', y: '16', rx: '1', key: 'ldoo1y' }],\n]);\n\nexport default LayoutDashboard;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name LogOut\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNOSAyMUg1YTIgMiAwIDAgMS0yLTJWNWEyIDIgMCAwIDEgMi0yaDQiIC8+CiAgPHBvbHlsaW5lIHBvaW50cz0iMTYgMTcgMjEgMTIgMTYgNyIgLz4KICA8bGluZSB4MT0iMjEiIHgyPSI5IiB5MT0iMTIiIHkyPSIxMiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/log-out\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst LogOut = createLucideIcon('LogOut', [\n  ['path', { d: 'M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4', key: '1uf3rs' }],\n  ['polyline', { points: '16 17 21 12 16 7', key: '1gabdz' }],\n  ['line', { x1: '21', x2: '9', y1: '12', y2: '12', key: '1uyos4' }],\n]);\n\nexport default LogOut;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name WifiOff\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8bGluZSB4MT0iMiIgeDI9IjIyIiB5MT0iMiIgeTI9IjIyIiAvPgogIDxwYXRoIGQ9Ik04LjUgMTYuNWE1IDUgMCAwIDEgNyAwIiAvPgogIDxwYXRoIGQ9Ik0yIDguODJhMTUgMTUgMCAwIDEgNC4xNy0yLjY1IiAvPgogIDxwYXRoIGQ9Ik0xMC42NiA1YzQuMDEtLjM2IDguMTQuOSAxMS4zNCAzLjc2IiAvPgogIDxwYXRoIGQ9Ik0xNi44NSAxMS4yNWExMCAxMCAwIDAgMSAyLjIyIDEuNjgiIC8+CiAgPHBhdGggZD0iTTUgMTNhMTAgMTAgMCAwIDEgNS4yNC0yLjc2IiAvPgogIDxsaW5lIHgxPSIxMiIgeDI9IjEyLjAxIiB5MT0iMjAiIHkyPSIyMCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/wifi-off\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst WifiOff = createLucideIcon('WifiOff', [\n  ['line', { x1: '2', x2: '22', y1: '2', y2: '22', key: 'a6p6uj' }],\n  ['path', { d: 'M8.5 16.5a5 5 0 0 1 7 0', key: 'sej527' }],\n  ['path', { d: 'M2 8.82a15 15 0 0 1 4.17-2.65', key: '11utq1' }],\n  ['path', { d: 'M10.66 5c4.01-.36 8.14.9 11.34 3.76', key: 'hxefdu' }],\n  ['path', { d: 'M16.85 11.25a10 10 0 0 1 2.22 1.68', key: 'q734kn' }],\n  ['path', { d: 'M5 13a10 10 0 0 1 5.24-2.76', key: 'piq4yl' }],\n  ['line', { x1: '12', x2: '12.01', y1: '20', y2: '20', key: 'of4bc4' }],\n]);\n\nexport default WifiOff;\n","'use client'\n\nimport { useState, useEffect, useCallback } from 'react'\nimport { createClient } from '@/lib/supabase/client'\nimport { logger } from '@/lib/utils/logger'\n\ninterface CachedData {\n  key: string\n  data: any\n  timestamp: number\n  expiresAt: number\n}\n\ninterface OfflineState {\n  isOnline: boolean\n  isOfflineReady: boolean\n  pendingSyncs: number\n}\n\nconst CACHE_PREFIX = 'eduzen_offline_'\nconst DEFAULT_CACHE_DURATION = 7 * 24 * 60 * 60 * 1000 // 7 jours\n\n/**\n * Hook pour gérer le mode offline de l'application\n */\nexport function useOffline() {\n  const [state, setState] = useState<OfflineState>({\n    isOnline: typeof navigator !== 'undefined' ? navigator.onLine : true,\n    isOfflineReady: false,\n    pendingSyncs: 0,\n  })\n\n  // Écouter les changements de connectivité\n  useEffect(() => {\n    const handleOnline = () => {\n      setState((prev) => ({ ...prev, isOnline: true }))\n      syncPendingData()\n    }\n\n    const handleOffline = () => {\n      setState((prev) => ({ ...prev, isOnline: false }))\n    }\n\n    window.addEventListener('online', handleOnline)\n    window.addEventListener('offline', handleOffline)\n\n    // Vérifier si le cache est prêt\n    checkOfflineReadiness()\n\n    return () => {\n      window.removeEventListener('online', handleOnline)\n      window.removeEventListener('offline', handleOffline)\n    }\n  }, [])\n\n  /**\n   * Vérifier si les données sont disponibles offline\n   */\n  const checkOfflineReadiness = useCallback(() => {\n    try {\n      const keys = Object.keys(localStorage).filter((k) => k.startsWith(CACHE_PREFIX))\n      setState((prev) => ({ ...prev, isOfflineReady: keys.length > 0 }))\n    } catch (error) {\n      logger.warn('LocalStorage non disponible')\n    }\n  }, [])\n\n  /**\n   * Sauvegarder des données pour utilisation offline\n   */\n  const cacheData = useCallback((key: string, data: any, duration: number = DEFAULT_CACHE_DURATION) => {\n    try {\n      const cacheEntry: CachedData = {\n        key,\n        data,\n        timestamp: Date.now(),\n        expiresAt: Date.now() + duration,\n      }\n      localStorage.setItem(`${CACHE_PREFIX}${key}`, JSON.stringify(cacheEntry))\n      checkOfflineReadiness()\n      return true\n    } catch (error) {\n      logger.error('Erreur lors du cache des données', error as Error)\n      return false\n    }\n  }, [checkOfflineReadiness])\n\n  /**\n   * Récupérer des données du cache\n   */\n  const getCachedData = useCallback(<T>(key: string): T | null => {\n    try {\n      const cached = localStorage.getItem(`${CACHE_PREFIX}${key}`)\n      if (!cached) return null\n\n      const entry: CachedData = JSON.parse(cached)\n      \n      // Vérifier l'expiration\n      if (Date.now() > entry.expiresAt) {\n        localStorage.removeItem(`${CACHE_PREFIX}${key}`)\n        return null\n      }\n\n      return entry.data as T\n    } catch (error) {\n      logger.error('Erreur lors de la récupération du cache', error as Error)\n      return null\n    }\n  }, [])\n\n  /**\n   * Supprimer des données du cache\n   */\n  const clearCachedData = useCallback((key: string) => {\n    try {\n      localStorage.removeItem(`${CACHE_PREFIX}${key}`)\n      checkOfflineReadiness()\n    } catch (error) {\n      logger.error('Erreur lors de la suppression du cache', error as Error)\n    }\n  }, [checkOfflineReadiness])\n\n  /**\n   * Vider tout le cache offline\n   */\n  const clearAllCache = useCallback(() => {\n    try {\n      const keys = Object.keys(localStorage).filter((k) => k.startsWith(CACHE_PREFIX))\n      keys.forEach((key) => localStorage.removeItem(key))\n      setState((prev) => ({ ...prev, isOfflineReady: false }))\n    } catch (error) {\n      logger.error('Erreur lors du vidage du cache', error as Error)\n    }\n  }, [])\n\n  /**\n   * Sauvegarder une action pour synchronisation ultérieure\n   */\n  const queueForSync = useCallback((action: {\n    type: string\n    table: string\n    data: any\n    method: 'insert' | 'update' | 'delete'\n  }) => {\n    try {\n      const pendingActions = JSON.parse(localStorage.getItem(`${CACHE_PREFIX}pending_sync`) || '[]')\n      pendingActions.push({\n        ...action,\n        id: `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n        createdAt: new Date().toISOString(),\n      })\n      localStorage.setItem(`${CACHE_PREFIX}pending_sync`, JSON.stringify(pendingActions))\n      setState((prev) => ({ ...prev, pendingSyncs: pendingActions.length }))\n    } catch (error) {\n      logger.error('Erreur lors de la mise en file d\\'attente', error as Error)\n    }\n  }, [])\n\n  /**\n   * Synchroniser les données en attente\n   */\n  const syncPendingData = useCallback(async () => {\n    if (!state.isOnline) return\n\n    try {\n      const pendingActions = JSON.parse(localStorage.getItem(`${CACHE_PREFIX}pending_sync`) || '[]')\n      if (pendingActions.length === 0) return\n\n      const supabase = createClient()\n      const failedActions: any[] = []\n\n      for (const action of pendingActions) {\n        try {\n          switch (action.method) {\n            case 'insert':\n              await supabase.from(action.table).insert(action.data)\n              break\n            case 'update':\n              await supabase.from(action.table).update(action.data).eq('id', action.data.id)\n              break\n            case 'delete':\n              await supabase.from(action.table).delete().eq('id', action.data.id)\n              break\n          }\n        } catch (error) {\n          logger.error(`Erreur sync action ${action.type}`, error as Error)\n          failedActions.push(action)\n        }\n      }\n\n      localStorage.setItem(`${CACHE_PREFIX}pending_sync`, JSON.stringify(failedActions))\n      setState((prev) => ({ ...prev, pendingSyncs: failedActions.length }))\n\n      if (failedActions.length === 0) {\n        logger.info('Synchronisation terminée avec succès')\n      } else {\n        logger.warn(`${failedActions.length} actions n'ont pas pu être synchronisées`)\n      }\n    } catch (error) {\n      logger.error('Erreur lors de la synchronisation', error as Error)\n    }\n  }, [state.isOnline])\n\n  return {\n    ...state,\n    cacheData,\n    getCachedData,\n    clearCachedData,\n    clearAllCache,\n    queueForSync,\n    syncPendingData,\n  }\n}\n\n/**\n * Hook pour mettre en cache les données d'un cours e-learning\n */\nexport function useOfflineCourse(courseSlug: string) {\n  const { cacheData, getCachedData, isOnline, isOfflineReady } = useOffline()\n  const supabase = createClient()\n\n  const downloadCourseForOffline = useCallback(async () => {\n    try {\n      // Récupérer le cours complet\n      const { data: course } = await supabase\n        .from('courses')\n        .select(`\n          *,\n          course_sections(\n            id,\n            title,\n            order_index,\n            lessons(\n              id,\n              title,\n              content,\n              lesson_type,\n              duration_minutes,\n              order_index,\n              video_url\n            )\n          )\n        `)\n        .eq('slug', courseSlug)\n        .single()\n\n      if (!course) throw new Error('Cours introuvable')\n\n      // Mettre en cache le cours\n      cacheData(`course_${courseSlug}`, course, 30 * 24 * 60 * 60 * 1000) // 30 jours\n\n      // Mettre en cache les contenus média si possible\n      const allLessons = course.course_sections?.flatMap((s: any) => s.lessons || []) || []\n      \n      for (const lesson of allLessons) {\n        if (lesson.content) {\n          cacheData(`lesson_${lesson.id}`, lesson)\n        }\n      }\n\n      logger.info(`Cours \"${course.title}\" téléchargé pour offline`)\n      return true\n    } catch (error) {\n      logger.error('Erreur lors du téléchargement offline', error as Error)\n      return false\n    }\n  }, [courseSlug, supabase, cacheData])\n\n  const getCachedCourse = useCallback(() => {\n    return getCachedData(`course_${courseSlug}`)\n  }, [courseSlug, getCachedData])\n\n  const isCourseAvailableOffline = useCallback(() => {\n    return getCachedCourse() !== null\n  }, [getCachedCourse])\n\n  return {\n    isOnline,\n    isOfflineReady,\n    downloadCourseForOffline,\n    getCachedCourse,\n    isCourseAvailableOffline,\n  }\n}\n\n\n\n\n\n"],"names":[],"mappings":"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AAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,C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","ignoreList":[0,1,4,5,6,7,8,9,13,14,15,16,17,18,19,20]}