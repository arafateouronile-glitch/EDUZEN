{"version":3,"sources":["../../../../app/%28dashboard%29/dashboard/elearning/courses/%5Bslug%5D/edit/page.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react'\nimport { useParams, useRouter } from 'next/navigation'\nimport { useMutation, useQuery, useQueryClient } from '@tanstack/react-query'\nimport { useForm } from 'react-hook-form'\nimport { zodResolver } from '@hookform/resolvers/zod'\nimport { z } from 'zod'\nimport { useAuth } from '@/lib/hooks/use-auth'\nimport { elearningService } from '@/lib/services/elearning.service'\nimport { createClient } from '@/lib/supabase/client'\nimport { Button } from '@/components/ui/button'\nimport { GlassCard } from '@/components/ui/glass-card'\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from '@/components/ui/dialog'\nimport { Input } from '@/components/ui/input'\nimport { Textarea } from '@/components/ui/textarea'\nimport { Label } from '@/components/ui/label'\nimport { ArrowLeft, GraduationCap, Save, Upload, X, Plus, Pencil, Trash2, BookOpen, ExternalLink } from 'lucide-react'\nimport Link from 'next/link'\nimport { useToast } from '@/components/ui/toast'\nimport { motion } from '@/components/ui/motion'\nimport { cn } from '@/lib/utils'\n\nconst courseSchema = z.object({\n  title: z.string().min(3, 'Le titre doit contenir au moins 3 caractères'),\n  slug: z\n    .string()\n    .min(3, 'Le slug doit contenir au moins 3 caractères')\n    .regex(/^[a-z0-9-]+$/, 'Le slug ne peut contenir que des lettres minuscules, chiffres et tirets'),\n  short_description: z.string().optional(),\n  description: z.string().optional(),\n  difficulty_level: z.enum(['beginner', 'intermediate', 'advanced']).default('beginner'),\n  estimated_duration_hours: z.number().min(0).optional(),\n  price: z.number().min(0).optional(),\n  currency: z.string().default('XOF'),\n  is_published: z.boolean().default(false),\n  is_featured: z.boolean().default(false),\n  instructor_id: z.string().optional(),\n  formation_id: z.string().optional(),\n})\n\ntype CourseFormData = z.infer<typeof courseSchema>\n\nexport default function EditCoursePage() {\n  const params = useParams()\n  const router = useRouter()\n  const slug = params.slug as string\n  const { user } = useAuth()\n  const { addToast } = useToast()\n  const queryClient = useQueryClient()\n  const supabase = createClient()\n  const [thumbnailFile, setThumbnailFile] = useState<File | null>(null)\n  const [thumbnailPreview, setThumbnailPreview] = useState<string | null>(null)\n  const [showCreateSection, setShowCreateSection] = useState(false)\n  const [showEditSection, setShowEditSection] = useState(false)\n  const [sectionForm, setSectionForm] = useState({\n    id: '' as string,\n    title: '',\n    description: '',\n    order_index: 0,\n  })\n\n  const { data: course, isLoading: loadingCourse } = useQuery<{ title?: string; slug?: string; short_description?: string; description?: string; [key: string]: any } | null>({\n    queryKey: ['course', slug, user?.organization_id],\n    queryFn: async () => {\n      const result = await elearningService.getCourseBySlug(slug, user?.organization_id || '')\n      return result as { title?: string; slug?: string; short_description?: string; description?: string; [key: string]: any } | null\n    },\n    enabled: !!slug && !!user?.organization_id,\n  })\n\n  const invalidateCourse = async () => {\n    await queryClient.invalidateQueries({ queryKey: ['course', slug, user?.organization_id] })\n  }\n\n  // Récupérer les enseignants\n  const { data: teachers } = useQuery({\n    queryKey: ['teachers', user?.organization_id],\n    queryFn: async () => {\n      const { data, error } = await supabase\n        .from('users')\n        .select('id, full_name, email')\n        .eq('organization_id', user?.organization_id || '')\n        .eq('role', 'teacher')\n        .eq('is_active', true)\n      if (error) throw error\n      return data || []\n    },\n    enabled: !!user?.organization_id,\n  })\n\n  // Récupérer les formations\n  const { data: formations } = useQuery({\n    queryKey: ['formations', user?.organization_id],\n    queryFn: async () => {\n      const { data, error } = await supabase\n        .from('formations')\n        .select('id, name, code')\n        .eq('organization_id', user?.organization_id || '')\n        .eq('is_active', true)\n      if (error) throw error\n      return data || []\n    },\n    enabled: !!user?.organization_id,\n  })\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n    watch,\n    setValue,\n    reset,\n  } = useForm<CourseFormData>({\n    resolver: zodResolver(courseSchema),\n    mode: 'onChange',\n    defaultValues: {\n      difficulty_level: 'beginner',\n      currency: 'XOF',\n      is_published: false,\n      is_featured: false,\n    },\n  })\n\n  // Pré-remplir\n  useEffect(() => {\n    if (!course) return\n    reset({\n      title: course.title || '',\n      slug: course.slug || '',\n      short_description: course.short_description || '',\n      description: course.description || '',\n      difficulty_level: (course.difficulty_level as any) || 'beginner',\n      estimated_duration_hours: course.estimated_duration_hours ? Number(course.estimated_duration_hours) : undefined,\n      price: course.price ? Number(course.price) : 0,\n      currency: course.currency || 'XOF',\n      is_published: !!course.is_published,\n      is_featured: !!course.is_featured,\n      instructor_id: course.instructor_id || undefined,\n      formation_id: course.formation_id || undefined,\n    })\n    if (course.thumbnail_url) setThumbnailPreview(course.thumbnail_url)\n  }, [course, reset])\n\n  const generateSlug = (text: string) => {\n    return text\n      .toLowerCase()\n      .normalize('NFD')\n      .replace(/[\\u0300-\\u036f]/g, '')\n      .replace(/[^a-z0-9]+/g, '-')\n      .replace(/^-+|-+$/g, '')\n  }\n\n  const handleTitleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const newTitle = e.target.value\n    setValue('title', newTitle)\n    if (newTitle) {\n      setValue('slug', generateSlug(newTitle))\n    }\n  }\n\n  const handleThumbnailChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0]\n    if (file) {\n      setThumbnailFile(file)\n      const reader = new FileReader()\n      reader.onloadend = () => setThumbnailPreview(reader.result as string)\n      reader.readAsDataURL(file)\n    }\n  }\n\n  const updateMutation = useMutation({\n    mutationFn: async (data: CourseFormData) => {\n      if (!user?.organization_id) throw new Error('Organization ID manquant')\n      if (!course?.id) throw new Error('Course ID manquant')\n\n      // Upload miniature si remplacée\n      let thumbnailUrl: string | null | undefined = course.thumbnail_url || null\n      if (thumbnailFile) {\n        const fileExt = thumbnailFile.name.split('.').pop()\n        const fileName = `${user.organization_id}/courses/thumbnails/${Date.now()}.${fileExt}`\n\n        const tryBuckets = ['course-thumbnails', 'elearning-media', 'course-media']\n        let lastError: any = null\n\n        for (const bucket of tryBuckets) {\n          const { error: uploadError } = await supabase.storage.from(bucket).upload(fileName, thumbnailFile, {\n            cacheControl: '3600',\n            upsert: false,\n          })\n          if (!uploadError) {\n            const { data: urlData } = supabase.storage.from(bucket).getPublicUrl(fileName)\n            thumbnailUrl = urlData.publicUrl\n            lastError = null\n            break\n          }\n          lastError = uploadError\n        }\n\n        if (lastError) {\n          console.error('Erreur upload miniature (storage):', lastError)\n          throw new Error(\n            lastError?.message ||\n              \"Erreur lors de l'upload de la miniature (bucket course-thumbnails/elearning-media/course-media).\"\n          )\n        }\n      }\n\n      const nextPublishedAt = data.is_published ? (course.published_at || new Date().toISOString()) : null\n\n      return elearningService.updateCourse(course.id, {\n        title: data.title,\n        slug: data.slug,\n        short_description: data.short_description || null,\n        description: data.description || null,\n        difficulty_level: data.difficulty_level,\n        estimated_duration_hours: data.estimated_duration_hours || null,\n        price: data.price || 0,\n        currency: data.currency,\n        is_published: data.is_published,\n        is_featured: data.is_featured,\n        instructor_id: data.instructor_id || user.id,\n        formation_id: data.formation_id || null,\n        thumbnail_url: thumbnailUrl,\n        published_at: nextPublishedAt,\n      } as any)\n    },\n    onSuccess: async (updated: any) => {\n      addToast({\n        type: 'success',\n        title: 'Séquence mise à jour',\n        description: 'La séquence a été mise à jour avec succès.',\n      })\n      await invalidateCourse()\n      // Rester sur la page d'édition (plus pratique pour gérer sections/leçons)\n      if (updated?.slug && updated.slug !== slug) {\n        router.replace(`/dashboard/elearning/courses/${updated.slug}/edit`)\n      }\n    },\n    onError: (error: Error) => {\n      addToast({\n        type: 'error',\n        title: 'Erreur',\n        description: error.message || 'Une erreur est survenue lors de la mise à jour',\n      })\n    },\n  })\n\n  const onSubmit = (data: CourseFormData) => updateMutation.mutate(data)\n\n  const createSectionMutation = useMutation({\n    mutationFn: async () => {\n      if (!course?.id) throw new Error('Course ID manquant')\n      const nextOrder =\n        Math.max(\n          0,\n          ...(course.sections || []).map((s: any) => Number(s.order_index ?? 0))\n        ) + 1\n\n      return elearningService.createSection({\n        course_id: course.id,\n        title: sectionForm.title,\n        description: sectionForm.description || null,\n        order_index: sectionForm.order_index ?? nextOrder,\n      } as any)\n    },\n    onSuccess: async () => {\n      addToast({ type: 'success', title: 'Section créée', description: 'La section a été créée.' })\n      setShowCreateSection(false)\n      setSectionForm({ id: '', title: '', description: '', order_index: 0 })\n      // refetch course\n      await invalidateCourse()\n    },\n    onError: (error: any) => {\n      addToast({ type: 'error', title: 'Erreur', description: error?.message || 'Impossible de créer la section.' })\n    },\n  })\n\n  const updateSectionMutation = useMutation({\n    mutationFn: async () => {\n      if (!sectionForm.id) throw new Error('Section ID manquant')\n      return elearningService.updateSection(sectionForm.id, {\n        title: sectionForm.title,\n        description: sectionForm.description || null,\n        order_index: sectionForm.order_index,\n      } as any)\n    },\n    onSuccess: async () => {\n      addToast({ type: 'success', title: 'Section mise à jour', description: 'La section a été mise à jour.' })\n      setShowEditSection(false)\n      setSectionForm({ id: '', title: '', description: '', order_index: 0 })\n      await invalidateCourse()\n    },\n    onError: (error: any) => {\n      addToast({ type: 'error', title: 'Erreur', description: error?.message || 'Impossible de mettre à jour la section.' })\n    },\n  })\n\n  const deleteSectionMutation = useMutation({\n    mutationFn: async (sectionId: string) => {\n      await elearningService.deleteSection(sectionId)\n    },\n    onSuccess: async () => {\n      addToast({ type: 'success', title: 'Section supprimée', description: 'La section a été supprimée.' })\n      await invalidateCourse()\n    },\n    onError: (error: any) => {\n      addToast({ type: 'error', title: 'Erreur', description: error?.message || 'Impossible de supprimer la section.' })\n    },\n  })\n\n  const deleteLessonMutation = useMutation({\n    mutationFn: async (lessonId: string) => {\n      await elearningService.deleteLesson(lessonId)\n    },\n    onSuccess: async () => {\n      addToast({ type: 'success', title: 'Leçon supprimée', description: 'La leçon a été supprimée.' })\n      await invalidateCourse()\n    },\n    onError: (error: any) => {\n      addToast({ type: 'error', title: 'Erreur', description: error?.message || 'Impossible de supprimer la leçon.' })\n    },\n  })\n\n  if (loadingCourse || !course) {\n    return (\n      <div className=\"flex items-center justify-center min-h-[300px]\">\n        <p>Chargement...</p>\n      </div>\n    )\n  }\n\n  // Construire le contenu: sections + leçons\n  const sectionsSorted = [...(course.sections || [])].sort(\n    (a: any, b: any) => Number(a.order_index ?? 0) - Number(b.order_index ?? 0)\n  )\n  const lessonsSorted = [...(course.lessons || [])].sort(\n    (a: any, b: any) => Number(a.order_index ?? 0) - Number(b.order_index ?? 0)\n  )\n  const lessonsBySectionId = lessonsSorted.reduce((acc: Record<string, any[]>, lesson: any) => {\n    const key = lesson.section_id || 'no-section'\n    acc[key] = acc[key] || []\n    acc[key].push(lesson)\n    return acc\n  }, {})\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      className=\"space-y-8 pb-8 max-w-5xl mx-auto p-6\"\n    >\n      <div className=\"flex items-center gap-4\">\n        <Link href={`/dashboard/elearning/courses/${course.slug}`}>\n          <Button variant=\"ghost\" size=\"icon\">\n            <ArrowLeft className=\"h-4 w-4\" />\n          </Button>\n        </Link>\n        <div className=\"flex items-center gap-3\">\n          <div className=\"p-2 bg-brand-blue-ghost rounded-xl\">\n            <GraduationCap className=\"h-6 w-6 text-brand-blue\" />\n          </div>\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-900\">Modifier la séquence</h1>\n            <p className=\"text-gray-500 mt-1\">{course.title}</p>\n          </div>\n        </div>\n      </div>\n\n      <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-6\">\n        <GlassCard variant=\"premium\" className=\"p-6\">\n          <h2 className=\"text-xl font-bold text-gray-900 mb-6\">Informations principales</h2>\n\n          <div className=\"space-y-6\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Titre de la séquence *</label>\n              <input\n                type=\"text\"\n                {...register('title')}\n                onChange={handleTitleChange}\n                className={cn(\n                  'w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent transition-all',\n                  errors.title ? 'border-red-500' : 'border-gray-200'\n                )}\n                placeholder=\"Ex: Introduction à React\"\n              />\n              {errors.title && <p className=\"text-sm text-red-600 mt-1\">{errors.title.message}</p>}\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Slug (URL) *</label>\n              <input\n                type=\"text\"\n                {...register('slug')}\n                className={cn(\n                  'w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent transition-all bg-gray-50',\n                  errors.slug ? 'border-red-500' : 'border-gray-200'\n                )}\n                placeholder=\"introduction-a-react\"\n              />\n              {errors.slug && <p className=\"text-sm text-red-600 mt-1\">{errors.slug.message}</p>}\n              <p className=\"text-xs text-gray-500 mt-1\">URL : /courses/[slug]</p>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Description courte</label>\n              <textarea\n                {...register('short_description')}\n                rows={2}\n                className=\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent transition-all resize-none\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Description complète</label>\n              <textarea\n                {...register('description')}\n                rows={6}\n                className=\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent transition-all resize-none\"\n              />\n            </div>\n          </div>\n        </GlassCard>\n\n        <GlassCard variant=\"premium\" className=\"p-6\">\n          <h2 className=\"text-xl font-bold text-gray-900 mb-6\">Paramètres</h2>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Niveau de difficulté</label>\n              <select\n                {...register('difficulty_level')}\n                className=\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent transition-all\"\n              >\n                <option value=\"beginner\">Débutant</option>\n                <option value=\"intermediate\">Intermédiaire</option>\n                <option value=\"advanced\">Avancé</option>\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Durée estimée (heures)</label>\n              <input\n                type=\"number\"\n                {...register('estimated_duration_hours', { valueAsNumber: true })}\n                min=\"0\"\n                step=\"0.5\"\n                className=\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent transition-all\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Prix</label>\n              <div className=\"flex gap-2\">\n                <input\n                  type=\"number\"\n                  {...register('price', { valueAsNumber: true })}\n                  min=\"0\"\n                  step=\"0.01\"\n                  className=\"flex-1 px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent transition-all\"\n                />\n                <select\n                  {...register('currency')}\n                  className=\"w-24 px-3 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent transition-all\"\n                >\n                  <option value=\"XOF\">XOF</option>\n                  <option value=\"EUR\">EUR</option>\n                  <option value=\"USD\">USD</option>\n                </select>\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Enseignant</label>\n              <select\n                {...register('instructor_id')}\n                className=\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent transition-all\"\n              >\n                <option value=\"\">Moi-même</option>\n                {teachers?.map((teacher: any) => (\n                  <option key={teacher.id} value={teacher.id}>\n                    {teacher.full_name} ({teacher.email})\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Formation associée (optionnel)</label>\n              <select\n                {...register('formation_id')}\n                className=\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent transition-all\"\n              >\n                <option value=\"\">Aucune</option>\n                {formations?.map((formation: any) => (\n                  <option key={formation.id} value={formation.id}>\n                    {formation.name} ({formation.code})\n                  </option>\n                ))}\n              </select>\n            </div>\n          </div>\n        </GlassCard>\n\n        <GlassCard variant=\"premium\" className=\"p-6\">\n          <h2 className=\"text-xl font-bold text-gray-900 mb-6\">Miniature</h2>\n\n          <div className=\"space-y-4\">\n            {thumbnailPreview ? (\n              <div className=\"relative\">\n                <img\n                  src={thumbnailPreview}\n                  alt=\"Aperçu\"\n                  className=\"w-full h-64 object-cover rounded-lg border border-gray-200\"\n                />\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    setThumbnailFile(null)\n                    setThumbnailPreview(null)\n                    // Ne supprime pas la miniature en base automatiquement; l'utilisateur peut en re-uploader une.\n                  }}\n                  className=\"absolute top-2 right-2 p-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors\"\n                >\n                  <X className=\"h-4 w-4\" />\n                </button>\n              </div>\n            ) : (\n              <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-12 text-center hover:border-brand-blue transition-colors\">\n                <Upload className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n                <p className=\"text-gray-600 mb-2\">Cliquez pour télécharger une miniature</p>\n                <p className=\"text-sm text-gray-500\">PNG, JPG jusqu'à 5MB</p>\n                <input\n                  type=\"file\"\n                  accept=\"image/*\"\n                  onChange={handleThumbnailChange}\n                  className=\"hidden\"\n                  id=\"thumbnail-upload\"\n                />\n                <label\n                  htmlFor=\"thumbnail-upload\"\n                  className=\"mt-4 inline-block px-4 py-2 bg-brand-blue text-white rounded-lg hover:bg-brand-blue/90 transition-colors cursor-pointer\"\n                >\n                  Choisir un fichier\n                </label>\n              </div>\n            )}\n          </div>\n        </GlassCard>\n\n        <GlassCard variant=\"premium\" className=\"p-6\">\n          <h2 className=\"text-xl font-bold text-gray-900 mb-6\">Options de publication</h2>\n          <div className=\"space-y-4\">\n            <label className=\"flex items-center gap-3 cursor-pointer\">\n              <input\n                type=\"checkbox\"\n                {...register('is_published')}\n                className=\"w-5 h-5 text-brand-blue border-gray-300 rounded focus:ring-brand-blue\"\n              />\n              <div>\n                <span className=\"font-medium text-gray-900\">Visible pour les apprenants</span>\n                <p className=\"text-sm text-gray-500\">Publier la séquence sur le catalogue apprenant</p>\n              </div>\n            </label>\n\n            <label className=\"flex items-center gap-3 cursor-pointer\">\n              <input\n                type=\"checkbox\"\n                {...register('is_featured')}\n                className=\"w-5 h-5 text-brand-blue border-gray-300 rounded focus:ring-brand-blue\"\n              />\n              <div>\n                <span className=\"font-medium text-gray-900\">Mettre en vedette</span>\n                <p className=\"text-sm text-gray-500\">Afficher dans la sélection du moment</p>\n              </div>\n            </label>\n          </div>\n        </GlassCard>\n\n        <div className=\"flex justify-end gap-4\">\n          <Link href={`/dashboard/elearning/courses/${course.slug}`}>\n            <Button variant=\"ghost\" type=\"button\">\n              Annuler\n            </Button>\n          </Link>\n          <Button\n            type=\"submit\"\n            disabled={updateMutation.isPending}\n            className=\"bg-brand-blue hover:bg-brand-blue/90 text-white shadow-lg shadow-brand-blue/20\"\n          >\n            {updateMutation.isPending ? (\n              <>Enregistrement...</>\n            ) : (\n              <>\n                <Save className=\"h-4 w-4 mr-2\" />\n                Enregistrer\n              </>\n            )}\n          </Button>\n        </div>\n      </form>\n\n      {/* Contenu (sections + leçons) */}\n      <GlassCard variant=\"premium\" className=\"p-6\">\n        <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-3 mb-6\">\n          <div>\n            <h2 className=\"text-xl font-bold text-gray-900\">Contenu de la séquence</h2>\n            <p className=\"text-sm text-gray-500\">Gérez les sections et les leçons en défilant sur cette même page.</p>\n          </div>\n          <div className=\"flex flex-wrap gap-2\">\n            <Button type=\"button\" variant=\"outline\" onClick={() => setShowCreateSection(true)}>\n              <Plus className=\"h-4 w-4 mr-2\" />\n              Nouvelle section\n            </Button>\n            <Link href={`/dashboard/elearning/courses/${course.slug}/lessons/new`}>\n              <Button type=\"button\" className=\"bg-brand-blue hover:bg-brand-blue/90 text-white\">\n                <Plus className=\"h-4 w-4 mr-2\" />\n                Nouvelle leçon\n              </Button>\n            </Link>\n          </div>\n        </div>\n\n        {/* Sections */}\n        <div className=\"space-y-6\">\n          {sectionsSorted.length === 0 && lessonsSorted.length === 0 ? (\n            <div className=\"text-center py-10 border-2 border-dashed border-gray-200 rounded-xl\">\n              <BookOpen className=\"h-10 w-10 text-gray-300 mx-auto mb-3\" />\n              <p className=\"text-gray-600 font-medium\">Aucune section / leçon pour le moment</p>\n              <p className=\"text-sm text-gray-500 mt-1\">Crée une section puis ajoute des leçons.</p>\n            </div>\n          ) : (\n            <>\n              {sectionsSorted.map((section: any) => {\n                const sectionLessons = lessonsBySectionId[section.id] || []\n                return (\n                  <div key={section.id} className=\"border border-gray-200 rounded-xl bg-white\">\n                    <div className=\"p-4 flex flex-col md:flex-row md:items-center justify-between gap-3 border-b border-gray-100\">\n                      <div className=\"min-w-0\">\n                        <div className=\"flex items-center gap-2\">\n                          <p className=\"font-semibold text-gray-900 truncate\">{section.title}</p>\n                          <span className=\"text-xs text-gray-400\">•</span>\n                          <span className=\"text-xs text-gray-500\">{sectionLessons.length} leçon(s)</span>\n                        </div>\n                        {section.description ? (\n                          <p className=\"text-sm text-gray-500 mt-1 line-clamp-2\">{section.description}</p>\n                        ) : null}\n                      </div>\n                      <div className=\"flex flex-wrap gap-2\">\n                        <Button\n                          type=\"button\"\n                          variant=\"outline\"\n                          onClick={() => {\n                            setSectionForm({\n                              id: section.id,\n                              title: section.title || '',\n                              description: section.description || '',\n                              order_index: Number(section.order_index ?? 0),\n                            })\n                            setShowEditSection(true)\n                          }}\n                        >\n                          <Pencil className=\"h-4 w-4 mr-2\" />\n                          Modifier\n                        </Button>\n                        <Link href={`/dashboard/elearning/courses/${course.slug}/lessons/new`}>\n                          <Button type=\"button\" variant=\"outline\">\n                            <Plus className=\"h-4 w-4 mr-2\" />\n                            Ajouter une leçon\n                          </Button>\n                        </Link>\n                        <Button\n                          type=\"button\"\n                          variant=\"outline\"\n                          className=\"border-red-200 text-red-700 hover:bg-red-50\"\n                          onClick={() => {\n                            const ok = window.confirm(`Supprimer la section \"${section.title}\" ? Les leçons seront conservées (sans section).`)\n                            if (ok) deleteSectionMutation.mutate(section.id)\n                          }}\n                          disabled={deleteSectionMutation.isPending}\n                        >\n                          <Trash2 className=\"h-4 w-4 mr-2\" />\n                          Supprimer\n                        </Button>\n                      </div>\n                    </div>\n\n                    <div className=\"p-4 space-y-2\">\n                      {sectionLessons.length === 0 ? (\n                        <p className=\"text-sm text-gray-500\">Aucune leçon dans cette section.</p>\n                      ) : (\n                        sectionLessons.map((lesson: any) => (\n                          <div key={lesson.id} className=\"flex flex-col md:flex-row md:items-center justify-between gap-2 p-3 border rounded-lg\">\n                            <div className=\"min-w-0\">\n                              <p className=\"font-medium text-gray-900 truncate\">{lesson.title}</p>\n                              <p className=\"text-xs text-gray-500 mt-0.5\">\n                                Type: {lesson.lesson_type || 'text'} • Ordre: {lesson.order_index ?? 0}\n                              </p>\n                            </div>\n                            <div className=\"flex flex-wrap gap-2\">\n                              <Link href={`/dashboard/elearning/courses/${course.slug}/lessons/${lesson.slug}`}>\n                                <Button type=\"button\" variant=\"outline\" size=\"sm\">\n                                  <ExternalLink className=\"h-4 w-4 mr-2\" />\n                                  Ouvrir\n                                </Button>\n                              </Link>\n                              <Link href={`/dashboard/elearning/courses/${course.slug}/lessons/${lesson.slug}/edit`}>\n                                <Button type=\"button\" variant=\"outline\" size=\"sm\">\n                                  <Pencil className=\"h-4 w-4 mr-2\" />\n                                  Modifier la leçon\n                                </Button>\n                              </Link>\n                              <Button\n                                type=\"button\"\n                                variant=\"outline\"\n                                size=\"sm\"\n                                className=\"border-red-200 text-red-700 hover:bg-red-50\"\n                                onClick={() => {\n                                  const ok = window.confirm(`Supprimer la leçon \"${lesson.title}\" ?`)\n                                  if (ok) deleteLessonMutation.mutate(lesson.id)\n                                }}\n                                disabled={deleteLessonMutation.isPending}\n                              >\n                                <Trash2 className=\"h-4 w-4 mr-2\" />\n                                Supprimer\n                              </Button>\n                            </div>\n                          </div>\n                        ))\n                      )}\n                    </div>\n                  </div>\n                )\n              })}\n\n              {/* Leçons sans section */}\n              {lessonsBySectionId['no-section']?.length ? (\n                <div className=\"border border-gray-200 rounded-xl bg-white\">\n                  <div className=\"p-4 border-b border-gray-100\">\n                    <p className=\"font-semibold text-gray-900\">Sans section</p>\n                    <p className=\"text-sm text-gray-500 mt-1\">Leçons non rattachées à une section.</p>\n                  </div>\n                  <div className=\"p-4 space-y-2\">\n                    {lessonsBySectionId['no-section'].map((lesson: any) => (\n                      <div key={lesson.id} className=\"flex flex-col md:flex-row md:items-center justify-between gap-2 p-3 border rounded-lg\">\n                        <div className=\"min-w-0\">\n                          <p className=\"font-medium text-gray-900 truncate\">{lesson.title}</p>\n                          <p className=\"text-xs text-gray-500 mt-0.5\">\n                            Type: {lesson.lesson_type || 'text'} • Ordre: {lesson.order_index ?? 0}\n                          </p>\n                        </div>\n                        <div className=\"flex flex-wrap gap-2\">\n                          <Link href={`/dashboard/elearning/courses/${course.slug}/lessons/${lesson.slug}`}>\n                            <Button type=\"button\" variant=\"outline\" size=\"sm\">\n                              <ExternalLink className=\"h-4 w-4 mr-2\" />\n                              Ouvrir\n                            </Button>\n                          </Link>\n                          <Link href={`/dashboard/elearning/courses/${course.slug}/lessons/${lesson.slug}/edit`}>\n                            <Button type=\"button\" variant=\"outline\" size=\"sm\">\n                              <Pencil className=\"h-4 w-4 mr-2\" />\n                              Modifier la leçon\n                            </Button>\n                          </Link>\n                          <Button\n                            type=\"button\"\n                            variant=\"outline\"\n                            size=\"sm\"\n                            className=\"border-red-200 text-red-700 hover:bg-red-50\"\n                            onClick={() => {\n                              const ok = window.confirm(`Supprimer la leçon \"${lesson.title}\" ?`)\n                              if (ok) deleteLessonMutation.mutate(lesson.id)\n                            }}\n                            disabled={deleteLessonMutation.isPending}\n                          >\n                            <Trash2 className=\"h-4 w-4 mr-2\" />\n                            Supprimer\n                          </Button>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              ) : null}\n            </>\n          )}\n        </div>\n      </GlassCard>\n\n      {/* Dialog - créer section */}\n      <Dialog open={showCreateSection} onOpenChange={setShowCreateSection}>\n        <DialogContent className=\"sm:max-w-[520px]\">\n          <DialogHeader>\n            <DialogTitle>Nouvelle section</DialogTitle>\n            <DialogDescription>Ajoute une section pour organiser les leçons.</DialogDescription>\n          </DialogHeader>\n          <div className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"section-title\">Titre *</Label>\n              <Input\n                id=\"section-title\"\n                value={sectionForm.title}\n                onChange={(e) => setSectionForm((s) => ({ ...s, title: e.target.value }))}\n                placeholder=\"Ex: Module 1\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"section-desc\">Description</Label>\n              <Textarea\n                id=\"section-desc\"\n                value={sectionForm.description}\n                onChange={(e) => setSectionForm((s) => ({ ...s, description: e.target.value }))}\n                placeholder=\"Description de la section...\"\n              />\n            </div>\n          </div>\n          <DialogFooter>\n            <Button type=\"button\" variant=\"outline\" onClick={() => setShowCreateSection(false)}>\n              Annuler\n            </Button>\n            <Button\n              type=\"button\"\n              onClick={() => {\n                if (!sectionForm.title.trim()) {\n                  addToast({ type: 'error', title: 'Titre requis', description: 'Veuillez saisir un titre.' })\n                  return\n                }\n                createSectionMutation.mutate()\n              }}\n              disabled={createSectionMutation.isPending}\n            >\n              {createSectionMutation.isPending ? 'Création...' : 'Créer'}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* Dialog - modifier section */}\n      <Dialog open={showEditSection} onOpenChange={setShowEditSection}>\n        <DialogContent className=\"sm:max-w-[520px]\">\n          <DialogHeader>\n            <DialogTitle>Modifier la section</DialogTitle>\n            <DialogDescription>Met à jour le titre et la description.</DialogDescription>\n          </DialogHeader>\n          <div className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"section-title-edit\">Titre *</Label>\n              <Input\n                id=\"section-title-edit\"\n                value={sectionForm.title}\n                onChange={(e) => setSectionForm((s) => ({ ...s, title: e.target.value }))}\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"section-desc-edit\">Description</Label>\n              <Textarea\n                id=\"section-desc-edit\"\n                value={sectionForm.description}\n                onChange={(e) => setSectionForm((s) => ({ ...s, description: e.target.value }))}\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"section-order\">Ordre</Label>\n              <Input\n                id=\"section-order\"\n                type=\"number\"\n                value={sectionForm.order_index}\n                onChange={(e) => setSectionForm((s) => ({ ...s, order_index: Number(e.target.value || 0) }))}\n              />\n            </div>\n          </div>\n          <DialogFooter>\n            <Button type=\"button\" variant=\"outline\" onClick={() => setShowEditSection(false)}>\n              Annuler\n            </Button>\n            <Button\n              type=\"button\"\n              onClick={() => {\n                if (!sectionForm.title.trim()) {\n                  addToast({ type: 'error', title: 'Titre requis', description: 'Veuillez saisir un titre.' })\n                  return\n                }\n                updateSectionMutation.mutate()\n              }}\n              disabled={updateSectionMutation.isPending}\n            >\n              {updateSectionMutation.isPending ? 'Enregistrement...' : 'Enregistrer'}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </motion.div>\n  )\n}\n\n\n"],"names":[],"mappings":"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"}