{"version":3,"sources":["../../../../node_modules/lucide-react/src/icons/plus.ts","../../../../node_modules/lucide-react/src/icons/arrow-left.ts","../../../../node_modules/lucide-react/src/icons/check-circle.ts","../../../../node_modules/lucide-react/src/icons/mail.ts","../../../../node_modules/lucide-react/src/icons/send.ts","../../../../components/ui/select.tsx","../../../../lib/services/program.service.ts","../../../../node_modules/lucide-react/src/icons/copy.ts","../../../../node_modules/lucide-react/src/icons/user-check.ts","../../../../node_modules/lucide-react/src/icons/receipt.ts","../../../../node_modules/lucide-react/src/icons/book.ts","../../../../node_modules/lucide-react/src/icons/scale.ts","../../../../lib/utils/document-generation/variable-extractor.ts","../../../../components/document-editor/template-selector.tsx"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Plus\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNSAxMmgxNCIgLz4KICA8cGF0aCBkPSJNMTIgNXYxNCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/plus\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Plus = createLucideIcon('Plus', [\n  ['path', { d: 'M5 12h14', key: '1ays0h' }],\n  ['path', { d: 'M12 5v14', key: 's699le' }],\n]);\n\nexport default Plus;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ArrowLeft\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTIgMTktNy03IDctNyIgLz4KICA8cGF0aCBkPSJNMTkgMTJINSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/arrow-left\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowLeft = createLucideIcon('ArrowLeft', [\n  ['path', { d: 'm12 19-7-7 7-7', key: '1l729n' }],\n  ['path', { d: 'M19 12H5', key: 'x3x0zl' }],\n]);\n\nexport default ArrowLeft;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name CheckCircle\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjIgMTEuMDhWMTJhMTAgMTAgMCAxIDEtNS45My05LjE0IiAvPgogIDxwYXRoIGQ9Im05IDExIDMgM0wyMiA0IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/check-circle\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CheckCircle = createLucideIcon('CheckCircle', [\n  ['path', { d: 'M22 11.08V12a10 10 0 1 1-5.93-9.14', key: 'g774vq' }],\n  ['path', { d: 'm9 11 3 3L22 4', key: '1pflzl' }],\n]);\n\nexport default CheckCircle;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Mail\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iMjAiIGhlaWdodD0iMTYiIHg9IjIiIHk9IjQiIHJ4PSIyIiAvPgogIDxwYXRoIGQ9Im0yMiA3LTguOTcgNS43YTEuOTQgMS45NCAwIDAgMS0yLjA2IDBMMiA3IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/mail\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Mail = createLucideIcon('Mail', [\n  ['rect', { width: '20', height: '16', x: '2', y: '4', rx: '2', key: '18n3k1' }],\n  ['path', { d: 'm22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7', key: '1ocrg3' }],\n]);\n\nexport default Mail;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Send\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMjIgMi03IDIwLTQtOS05LTRaIiAvPgogIDxwYXRoIGQ9Ik0yMiAyIDExIDEzIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/send\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Send = createLucideIcon('Send', [\n  ['path', { d: 'm22 2-7 20-4-9-9-4Z', key: '1q3vgg' }],\n  ['path', { d: 'M22 2 11 13', key: 'nzbqef' }],\n]);\n\nexport default Send;\n","'use client'\n\nimport * as React from 'react'\nimport { cn } from '@/lib/utils'\nimport { motion, AnimatePresence } from '@/components/ui/motion'\nimport { ChevronDown, Check, AlertCircle } from 'lucide-react'\n\nexport interface SelectProps\n  extends Omit<React.SelectHTMLAttributes<HTMLSelectElement>, 'children'> {\n  label?: string\n  error?: string\n  helperText?: string\n  variant?: 'default' | 'outlined' | 'filled'\n  leftIcon?: React.ReactNode\n  options: Array<{ value: string; label: string; disabled?: boolean }>\n  placeholder?: string\n}\n\nconst SelectNative = React.forwardRef<HTMLSelectElement, SelectProps>(\n  ({ \n    className, \n    label, \n    error, \n    helperText,\n    variant = 'default',\n    leftIcon,\n    id,\n    options,\n    placeholder,\n    value,\n    ...props \n  }, ref) => {\n    const [isFocused, setIsFocused] = React.useState(false)\n    const [isOpen, setIsOpen] = React.useState(false)\n    const selectId = id || `select-${Math.random().toString(36).substr(2, 9)}`\n    const hasValue = !!value\n\n    const baseStyles = cn(\n      'flex w-full rounded-lg font-medium transition-all duration-300',\n      'appearance-none cursor-pointer',\n      'focus:outline-none focus:ring-2 focus:ring-primary/20',\n      'disabled:cursor-not-allowed disabled:opacity-50',\n      {\n        // Default variant\n        'border-2 border-input bg-background px-4 py-3 pr-11': variant === 'default',\n        'focus:border-primary focus:bg-white': variant === 'default' && !error,\n        'border-destructive focus:border-destructive focus:ring-destructive/20': error,\n        \n        // Outlined variant\n        'border-2 border-input bg-transparent px-4 py-3 pr-11': variant === 'outlined',\n        'focus:border-primary focus:shadow-md focus:shadow-primary/10': variant === 'outlined' && !error,\n        \n        // Filled variant\n        'border-0 border-b-2 border-input bg-muted/50 px-4 py-3 pr-11 rounded-b-none': variant === 'filled',\n        'focus:bg-muted focus:border-primary': variant === 'filled' && !error,\n        'focus:border-destructive bg-destructive/5': variant === 'filled' && error,\n      },\n      leftIcon && 'pl-11',\n      className\n    )\n\n    return (\n      <div className=\"w-full space-y-1.5\">\n        {label && (\n          <motion.label\n            htmlFor={selectId}\n            initial={false}\n            animate={{\n              color: error ? '#EF4444' : isFocused ? 'rgb(37, 99, 235)' : 'rgb(107, 114, 128)',\n            }}\n            className={cn(\n              'block text-sm font-medium transition-colors duration-200',\n              error && 'text-destructive'\n            )}\n          >\n            {label}\n            {props.required && <span className=\"text-destructive ml-1\">*</span>}\n          </motion.label>\n        )}\n        \n        <div className=\"relative\">\n          {/* Left Icon */}\n          {leftIcon && (\n            <div className=\"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground pointer-events-none z-10\">\n              {leftIcon}\n            </div>\n          )}\n          \n          {/* Select */}\n          <motion.select\n            ref={ref}\n            id={selectId}\n            value={value}\n            {...props}\n            onFocus={(e) => {\n              setIsFocused(true)\n              props.onFocus?.(e)\n            }}\n            onBlur={(e) => {\n              setIsFocused(false)\n              setIsOpen(false)\n              props.onBlur?.(e)\n            }}\n            onMouseDown={() => setIsOpen(!isOpen)}\n            className={baseStyles}\n            animate={{\n              scale: isFocused ? 1.01 : 1,\n              borderColor: error \n                ? '#EF4444' \n                : isFocused \n                  ? 'rgb(37, 99, 235)' \n                  : 'rgb(226, 232, 240)',\n            }}\n            transition={{ duration: 0.2 }}\n          >\n            {placeholder && (\n              <option value=\"\" disabled>\n                {placeholder}\n              </option>\n            )}\n            {(options || []).map((option) => (\n              <option\n                key={option.value}\n                value={option.value}\n                disabled={option.disabled}\n              >\n                {option.label}\n              </option>\n            ))}\n          </motion.select>\n          \n          {/* Chevron Icon */}\n          <motion.div\n            className=\"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-muted-foreground\"\n            animate={{ rotate: isOpen ? 180 : 0 }}\n            transition={{ duration: 0.2 }}\n          >\n            <ChevronDown className=\"h-5 w-5\" />\n          </motion.div>\n          \n          {/* Error Icon */}\n          {error && (\n            <motion.div\n              className=\"absolute right-11 top-1/2 -translate-y-1/2 pointer-events-none\"\n              initial={{ scale: 0, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              transition={{ type: \"spring\", stiffness: 500, damping: 30 }}\n            >\n              <AlertCircle className=\"h-5 w-5 text-destructive\" />\n            </motion.div>\n          )}\n        </div>\n        \n        {/* Helper Text / Error Message */}\n        <AnimatePresence mode=\"wait\">\n          {(error || helperText) && (\n            <motion.p\n              initial={{ opacity: 0, y: -5 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -5 }}\n              transition={{ duration: 0.2 }}\n              className={cn(\n                'text-xs transition-colors duration-200',\n                error ? 'text-destructive' : 'text-muted-foreground'\n              )}\n            >\n              {error || helperText}\n            </motion.p>\n          )}\n        </AnimatePresence>\n      </div>\n    )\n  }\n)\nSelectNative.displayName = 'SelectNative'\n\n// Export SelectNative as Select for backward compatibility\nexport { SelectNative as SelectField }\n\n// Composants Radix UI pour compatibilité avec l'API Radix\ninterface SelectContextValue {\n  value?: string\n  onValueChange?: (value: string) => void\n  open?: boolean\n  setOpen?: (open: boolean) => void\n}\n\nconst SelectContext = React.createContext<SelectContextValue>({})\n\ninterface SelectRootProps {\n  value?: string\n  onValueChange?: (value: string) => void\n  children: React.ReactNode\n}\n\n// Wrapper pour utiliser Select comme composant Radix\nexport const SelectRoot = React.forwardRef<HTMLDivElement, SelectRootProps>(\n  ({ value, onValueChange, children }, ref) => {\n    const [open, setOpen] = React.useState(false)\n    \n    return (\n      <SelectContext.Provider value={{ value, onValueChange, open, setOpen }}>\n        <div className=\"relative\" ref={ref}>{children}</div>\n      </SelectContext.Provider>\n    )\n  }\n)\nSelectRoot.displayName = 'SelectRoot'\n\ninterface SelectTriggerProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  children: React.ReactNode\n}\n\nexport const SelectTrigger = React.forwardRef<HTMLButtonElement, SelectTriggerProps>(\n  ({ children, className, ...props }, ref) => {\n    const { open, setOpen } = React.useContext(SelectContext)\n    \n    return (\n      <button\n        ref={ref}\n        type=\"button\"\n        className={cn(\n          'flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50',\n          className\n        )}\n        onClick={() => setOpen?.(!open)}\n        {...props}\n      >\n        {children}\n        <ChevronDown className={cn('h-4 w-4 opacity-50 transition-transform', open && 'rotate-180')} />\n      </button>\n    )\n  }\n)\nSelectTrigger.displayName = 'SelectTrigger'\n\ninterface SelectValueProps {\n  placeholder?: string\n}\n\nexport const SelectValue = React.forwardRef<HTMLSpanElement, SelectValueProps>(\n  ({ placeholder }, ref) => {\n    const { value } = React.useContext(SelectContext)\n    return <span ref={ref}>{value || placeholder}</span>\n  }\n)\nSelectValue.displayName = 'SelectValue'\n\ninterface SelectContentProps {\n  children: React.ReactNode\n}\n\nexport const SelectContent = React.forwardRef<HTMLDivElement, SelectContentProps>(\n  ({ children }, ref) => {\n    const context = React.useContext(SelectContext)\n    const open = context?.open ?? false\n    \n    if (!open) return null\n    \n    // S'assurer que children est toujours défini et peut être rendu\n    if (!children) return null\n    \n    return (\n      <div \n        ref={ref} \n        className=\"absolute top-full left-0 z-50 mt-1 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md\"\n      >\n        <div className=\"p-1\">{children}</div>\n      </div>\n    )\n  }\n)\nSelectContent.displayName = 'SelectContent'\n\ninterface SelectItemProps extends React.HTMLAttributes<HTMLDivElement> {\n  value: string\n  children: React.ReactNode\n}\n\nexport const SelectItem = React.forwardRef<HTMLDivElement, SelectItemProps>(\n  ({ value, children, className, ...props }, ref) => {\n    const { value: selectedValue, onValueChange, setOpen } = React.useContext(SelectContext)\n    const isSelected = selectedValue === value\n\n    const handleClick = () => {\n      onValueChange?.(value)\n      setOpen?.(false)\n    }\n\n    return (\n      <div\n        ref={ref}\n        role=\"option\"\n        aria-selected={isSelected}\n        className={cn(\n          'relative flex w-full cursor-pointer select-none items-center rounded-sm py-1.5 px-2 text-sm outline-none hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground',\n          isSelected && 'bg-accent text-accent-foreground',\n          className\n        )}\n        onClick={handleClick}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n)\nSelectItem.displayName = 'SelectItem'\n\n// Export Select as alias for SelectRoot for Radix UI compatibility\nexport const Select = SelectRoot\n","import { createClient } from '@/lib/supabase/client'\nimport type { SupabaseClient } from '@supabase/supabase-js'\nimport { Database } from '@/types/database.types'\nimport type { TableRow, TableInsert, TableUpdate, FlexibleInsert, FlexibleUpdate } from '@/lib/types/supabase-helpers'\n\n// Types pour les vrais programmes (niveau 1)\ntype Program = TableRow<'programs'>\ntype ProgramInsert = TableInsert<'programs'>\ntype ProgramUpdate = TableUpdate<'programs'>\n\n/**\n * Service pour gérer les PROGRAMMES\n * Un programme contient plusieurs formations\n * Exemple : \"Programme de formation continue\" > \"Formation Excel\" > \"Session Hiver 2024\"\n */\nexport class ProgramService {\n  private supabase: SupabaseClient<Database>\n\n\n  constructor(supabaseClient?: SupabaseClient<Database>) {\n\n    this.supabase = supabaseClient || createClient()\n\n  }\n\n  /**\n   * Récupère tous les programmes d'une organisation\n   */\n  async getAllPrograms(organizationId: string, filters?: {\n    isActive?: boolean\n    search?: string\n  }) {\n    let query = this.supabase\n      .from('programs')\n      .select('*')\n      .eq('organization_id', organizationId)\n\n    if (filters?.isActive !== undefined) {\n      query = query.eq('is_active', filters.isActive)\n    }\n\n    if (filters?.search) {\n      query = query.or(`name.ilike.%${filters.search}%,code.ilike.%${filters.search}%,description.ilike.%${filters.search}%`)\n    }\n\n    const { data, error } = await query.order('created_at', { ascending: false })\n\n    if (error) throw error\n    return data\n  }\n\n  /**\n   * Récupère un programme par son ID avec ses formations\n   */\n  async getProgramById(id: string) {\n    const { data, error } = await this.supabase\n      .from('programs')\n      .select(`\n        *,\n        formations(*)\n      `)\n      .eq('id', id)\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  /**\n   * Crée un nouveau programme\n   */\n  async createProgram(program: FlexibleInsert<'programs'>) {\n    const { data, error } = await this.supabase\n      .from('programs')\n      .insert(program as ProgramInsert)\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  /**\n   * Met à jour un programme\n   */\n  async updateProgram(id: string, updates: FlexibleUpdate<'programs'>) {\n    const { data, error } = await this.supabase\n      .from('programs')\n      .update(updates as ProgramUpdate)\n      .eq('id', id)\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  /**\n   * Supprime un programme (soft delete)\n   */\n  async deleteProgram(id: string) {\n    return this.updateProgram(id, { is_active: false })\n  }\n\n  /**\n   * Récupère toutes les formations d'un programme\n   */\n  async getFormationsByProgram(programId: string) {\n    const { data, error } = await this.supabase\n      .from('formations')\n      .select('*')\n      .eq('program_id', programId)\n      .order('created_at', { ascending: false })\n\n    if (error) throw error\n    return data\n  }\n\n  /**\n   * Récupère les statistiques globales des programmes pour une organisation\n   */\n  async getGlobalStats(organizationId: string) {\n    const { data: allPrograms, error } = await this.supabase\n      .from('programs')\n      .select('id, is_active, created_at')\n      .eq('organization_id', organizationId)\n\n    if (error) throw error\n\n    const programsArray = (allPrograms as Program[]) || []\n    const total = programsArray.length\n    const active = programsArray.filter((p) => p.is_active).length\n    const inactive = programsArray.filter((p) => !p.is_active).length\n\n    // Compter les formations\n    let totalFormations = 0\n    const programIds = programsArray.map((p) => p.id)\n    if (programIds.length > 0) {\n      const { count, error: formationsError } = await this.supabase\n        .from('formations')\n        .select('*', { count: 'exact', head: true })\n        .in('program_id', programIds)\n      if (formationsError) throw formationsError\n      totalFormations = count || 0\n    }\n\n    // Compter les sessions via les formations\n    let totalSessions = 0\n    if (programIds.length > 0) {\n      const { data: formations, error: formationsError } = await this.supabase\n        .from('formations')\n        .select('id')\n        .in('program_id', programIds)\n      if (formationsError) throw formationsError\n      const formationIds = (formations as Array<{ id: string }>)?.map((f) => f.id) || []\n      if (formationIds.length > 0) {\n        const { count, error: sessionsError } = await this.supabase\n          .from('sessions')\n          .select('*', { count: 'exact', head: true })\n          .in('formation_id', formationIds)\n        if (sessionsError) throw sessionsError\n        totalSessions = count || 0\n      }\n    }\n\n    // Compter les inscriptions\n    let totalEnrollments = 0\n    if (programIds.length > 0) {\n      const { data: formations, error: formationsError2 } = await this.supabase\n        .from('formations')\n        .select('id')\n        .in('program_id', programIds)\n      if (formationsError2) throw formationsError2\n      const formationIds = (formations as Array<{ id: string }>)?.map((f) => f.id) || []\n      if (formationIds.length > 0) {\n        const { data: sessions, error: sessionsError2 } = await this.supabase\n          .from('sessions')\n          .select('id')\n          .in('formation_id', formationIds)\n        if (sessionsError2) throw sessionsError2\n        const sessionIds = (sessions as Array<{ id: string }>)?.map((s) => s.id) || []\n        if (sessionIds.length > 0) {\n          const { count, error: enrollmentsError } = await this.supabase\n            .from('enrollments')\n            .select('*', { count: 'exact', head: true })\n            .in('session_id', sessionIds)\n          if (enrollmentsError) throw enrollmentsError\n          totalEnrollments = count || 0\n        }\n      }\n    }\n\n    // Grouper par statut pour le graphique\n    const statusData = [\n      { name: 'Actifs', value: active, color: '#335ACF' },\n      { name: 'Inactifs', value: inactive, color: '#6B7280' },\n    ].filter(item => item.value > 0)\n\n    // Grouper par mois pour le graphique d'évolution\n    const byMonth: Record<string, number> = {}\n    programsArray.forEach((p) => {\n      if (p.created_at) {\n        const date = new Date(p.created_at)\n        const monthKey = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}`\n        byMonth[monthKey] = (byMonth[monthKey] || 0) + 1\n      }\n    })\n\n    const monthlyData = Object.entries(byMonth)\n      .sort(([a], [b]) => a.localeCompare(b))\n      .slice(-6) // Derniers 6 mois\n      .map(([month, count]) => ({\n        month: new Date(month + '-01').toLocaleDateString('fr-FR', { month: 'short', year: 'numeric' }),\n        programmes: count,\n      }))\n\n    return {\n      total,\n      active,\n      inactive,\n      totalFormations,\n      totalSessions,\n      totalEnrollments,\n      statusData,\n      monthlyData,\n    }\n  }\n}\n\nexport const programService = new ProgramService()\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Copy\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHg9IjgiIHk9IjgiIHJ4PSIyIiByeT0iMiIgLz4KICA8cGF0aCBkPSJNNCAxNmMtMS4xIDAtMi0uOS0yLTJWNGMwLTEuMS45LTIgMi0yaDEwYzEuMSAwIDIgLjkgMiAyIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/copy\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Copy = createLucideIcon('Copy', [\n  ['rect', { width: '14', height: '14', x: '8', y: '8', rx: '2', ry: '2', key: '17jyea' }],\n  ['path', { d: 'M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2', key: 'zix9uf' }],\n]);\n\nexport default Copy;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name UserCheck\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTYgMjF2LTJhNCA0IDAgMCAwLTQtNEg2YTQgNCAwIDAgMC00IDR2MiIgLz4KICA8Y2lyY2xlIGN4PSI5IiBjeT0iNyIgcj0iNCIgLz4KICA8cG9seWxpbmUgcG9pbnRzPSIxNiAxMSAxOCAxMyAyMiA5IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/user-check\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst UserCheck = createLucideIcon('UserCheck', [\n  ['path', { d: 'M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2', key: '1yyitq' }],\n  ['circle', { cx: '9', cy: '7', r: '4', key: 'nufk8' }],\n  ['polyline', { points: '16 11 18 13 22 9', key: '1pwet4' }],\n]);\n\nexport default UserCheck;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Receipt\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNCAydjIwbDItMSAyIDEgMi0xIDIgMSAyLTEgMiAxIDItMSAyIDFWMmwtMiAxLTItMS0yIDEtMi0xLTIgMS0yLTEtMiAxLTItMVoiIC8+CiAgPHBhdGggZD0iTTE2IDhoLTZhMiAyIDAgMSAwIDAgNGg0YTIgMiAwIDEgMSAwIDRIOCIgLz4KICA8cGF0aCBkPSJNMTIgMTdWNyIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/receipt\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Receipt = createLucideIcon('Receipt', [\n  [\n    'path',\n    {\n      d: 'M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z',\n      key: 'wqdwcb',\n    },\n  ],\n  ['path', { d: 'M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8', key: '1h4pet' }],\n  ['path', { d: 'M12 17V7', key: 'pyj7ub' }],\n]);\n\nexport default Receipt;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Book\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNCAxOS41di0xNUEyLjUgMi41IDAgMCAxIDYuNSAySDIwdjIwSDYuNWEyLjUgMi41IDAgMCAxIDAtNUgyMCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/book\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Book = createLucideIcon('Book', [\n  ['path', { d: 'M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20', key: 't4utmx' }],\n]);\n\nexport default Book;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Scale\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTYgMTYgMy04IDMgOGMtLjg3LjY1LTEuOTIgMS0zIDFzLTIuMTMtLjM1LTMtMVoiIC8+CiAgPHBhdGggZD0ibTIgMTYgMy04IDMgOGMtLjg3LjY1LTEuOTIgMS0zIDFzLTIuMTMtLjM1LTMtMVoiIC8+CiAgPHBhdGggZD0iTTcgMjFoMTAiIC8+CiAgPHBhdGggZD0iTTEyIDN2MTgiIC8+CiAgPHBhdGggZD0iTTMgN2gyYzIgMCA1LTEgNy0yIDIgMSA1IDIgNyAyaDIiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/scale\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Scale = createLucideIcon('Scale', [\n  ['path', { d: 'm16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z', key: '7g6ntu' }],\n  ['path', { d: 'm2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z', key: 'ijws7r' }],\n  ['path', { d: 'M7 21h10', key: '1b0cd5' }],\n  ['path', { d: 'M12 3v18', key: '108xh3' }],\n  ['path', { d: 'M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2', key: '3gwbw2' }],\n]);\n\nexport default Scale;\n","/**\n * Extrait les variables pour la génération de documents\n */\n\nimport type { DocumentVariables } from '@/lib/types/document-templates'\nimport type { StudentWithRelations, SessionWithRelations, InvoiceWithRelations } from '@/lib/types/query-types'\nimport type { TableRow } from '@/lib/types/supabase-helpers'\n\ntype Organization = TableRow<'organizations'>\ntype Student = TableRow<'students'>\ntype Session = TableRow<'sessions'>\ntype Invoice = TableRow<'invoices'>\n\ntype Program = TableRow<'programs'>\n\nexport interface ExtractVariablesOptions {\n  student?: StudentWithRelations | Student\n  organization?: Organization\n  session?: SessionWithRelations | Session\n  invoice?: InvoiceWithRelations | Invoice\n  program?: Program & { formations?: Array<{ id: string; name: string; duration_hours?: number }> }\n  academicYear?: { name: string } | null\n  language?: 'fr' | 'en'\n  issueDate?: string\n}\n\n/**\n * Extrait les variables de document depuis les données fournies\n */\nexport function extractDocumentVariables(options: ExtractVariablesOptions): DocumentVariables {\n  const {\n    student,\n    organization,\n    session,\n    invoice,\n    program,\n    academicYear,\n    language = 'fr',\n    issueDate = new Date().toISOString(),\n  } = options\n\n  const variables: any = {\n    // Date actuelle\n    date_emission: new Date().toLocaleDateString('fr-FR'),\n    date_aujourd_hui: new Date().toLocaleDateString('fr-FR'),\n    date_jour: new Date().toLocaleDateString('fr-FR'),\n    annee_courante: new Date().getFullYear().toString(),\n    annee_actuelle: new Date().getFullYear().toString(),\n    date_generation: new Date().toLocaleDateString('fr-FR'),\n    heure: new Date().toLocaleTimeString('fr-FR', { hour: '2-digit', minute: '2-digit' }),\n\n    // Organisation/École (utiliser les deux formats pour compatibilité)\n    // Format standard (ecole_*)\n    ecole_nom: organization?.name || '',\n    ecole_logo: organization?.logo_url || '',\n    ecole_adresse: organization?.address || '',\n    ecole_ville: (organization?.address || '').split(',').pop()?.trim() || '',\n    ecole_telephone: organization?.phone || '',\n    ecole_email: organization?.email || '',\n    ecole_site_web: (organization as any)?.website || '',\n    ecole_code_postal: (organization?.address || '').match(/\\d{5}/)?.[0] || '',\n    \n    // Format alternatif (organisation_*) pour compatibilité avec anciens templates\n    organisation_nom: organization?.name || '',\n    organisation_adresse: organization?.address || '',\n    organisation_telephone: organization?.phone || '',\n    organisation_email: organization?.email || '',\n    organisation_logo: organization?.logo_url || '',\n    organisation_site_web: (organization as any)?.website || '',\n\n    // Étudiant/Élève (utiliser les deux formats pour compatibilité)\n    // Format standard (eleve_*)\n    eleve_nom: student?.last_name || '',\n    eleve_prenom: student?.first_name || '',\n    eleve_numero: student?.student_number || '',\n    eleve_date_naissance: student?.date_of_birth\n      ? new Date(student.date_of_birth).toLocaleDateString('fr-FR')\n      : '',\n    eleve_classe: ((student as StudentWithRelations) as any)?.classes\n      ? (((student as StudentWithRelations) as any).classes as { name: string }).name\n      : '',\n    eleve_photo: (student as any)?.photo_url || '',\n    eleve_adresse: (student as any)?.address || '',\n    eleve_telephone: (student as any)?.phone || '',\n    eleve_email: (student as any)?.email || '',\n    \n    // Format alternatif (etudiant_*) pour compatibilité\n    etudiant_nom: student?.last_name || '',\n    etudiant_prenom: student?.first_name || '',\n    etudiant_nom_complet: student\n      ? `${student.first_name} ${student.last_name}`\n      : '',\n    etudiant_numero: student?.student_number || '',\n    etudiant_date_naissance: student?.date_of_birth\n      ? new Date(student.date_of_birth).toLocaleDateString('fr-FR')\n      : '',\n    etudiant_adresse: (student as any)?.address || '',\n    etudiant_telephone: (student as any)?.phone || '',\n    etudiant_email: (student as any)?.email || '',\n    etudiant_photo: (student as any)?.photo_url || '',\n\n    // Classe\n    classe_nom: ((student as StudentWithRelations) as any)?.classes\n      ? (((student as StudentWithRelations) as any).classes as { name: string }).name\n      : '',\n\n    // Année académique\n    annee_academique: academicYear?.name || new Date().getFullYear().toString(),\n    annee_scolaire: academicYear?.name || new Date().getFullYear().toString(),\n\n    // Session/Formation\n    session_nom: session?.name || '',\n    session_debut: session?.start_date\n      ? new Date(session.start_date).toLocaleDateString('fr-FR')\n      : '',\n    session_fin: session?.end_date\n      ? new Date(session.end_date).toLocaleDateString('fr-FR')\n      : '',\n    session_date_debut: session?.start_date\n      ? new Date(session.start_date).toLocaleDateString('fr-FR')\n      : '',\n    session_date_fin: session?.end_date\n      ? new Date(session.end_date).toLocaleDateString('fr-FR')\n      : '',\n    formation_nom: (session as SessionWithRelations)?.formations?.name || '',\n    formation_duree: (session as SessionWithRelations)?.formations?.duration_hours\n      ? `${(session as SessionWithRelations).formations?.duration_hours} heures`\n      : '',\n    formation_objectifs: ((session as SessionWithRelations)?.formations as any)?.objectives || (program as any)?.objectives || '',\n    formation_public_concerne: ((session as SessionWithRelations)?.formations as any)?.target_audience || (program as any)?.target_audience || '',\n    formation_prerequis: ((session as SessionWithRelations)?.formations as any)?.prerequisites || (program as any)?.prerequisites || '',\n    formation_qualite_et_resultats: ((session as SessionWithRelations)?.formations as any)?.quality_indicators || (program as any)?.quality_indicators || '',\n    formation_contenu: ((session as SessionWithRelations)?.formations as any)?.content || (program as any)?.content || '',\n    formation_equipe_pedagogique: ((session as SessionWithRelations)?.formations as any)?.pedagogical_team || (program as any)?.pedagogical_team || '',\n    formation_ressources: ((session as SessionWithRelations)?.formations as any)?.resources || (program as any)?.resources || '',\n    formation_supports: ((session as SessionWithRelations)?.formations as any)?.materials || (program as any)?.materials || '',\n    session_lieu: (session as any)?.location || (session as any)?.venue || '',\n    session_effectif: (session as any)?.enrollment_count?.toString() || (session as any)?.student_count?.toString() || '',\n    diplome_ou_certification: ((session as SessionWithRelations)?.formations as any)?.certification || (program as any)?.certification || '',\n    ecole_region: (organization as any)?.region || (organization as any)?.administrative_region || '',\n    // Programme\n    programme_nom: program?.name || (session as SessionWithRelations)?.formations?.programs?.name || '',\n    programme_code: (program as any)?.code || '',\n    programme_description: (program as any)?.description || '',\n    programme_objectifs: (program as any)?.objectives || '',\n    programme_duree_totale: program?.formations\n      ? `${program.formations.reduce((total, f) => total + (f.duration_hours || 0), 0)} heures`\n      : '',\n    programme_nombre_formations: program?.formations ? `${program.formations.length}` : '',\n    programme_nombre_sessions: '', // À calculer si nécessaire\n    programme_public_concerne: (program as any)?.target_audience || '',\n    programme_modalites: (program as any)?.modalities || '',\n    programme_certification: (program as any)?.certification || '',\n\n    // Facture\n    numero_facture: invoice?.invoice_number || '',\n    facture_numero: invoice?.invoice_number || '',\n    facture_date_emission: invoice?.issue_date\n      ? new Date(invoice.issue_date).toLocaleDateString('fr-FR')\n      : '',\n    facture_date_echeance: invoice?.due_date\n      ? new Date(invoice.due_date).toLocaleDateString('fr-FR')\n      : '',\n    date_echeance: invoice?.due_date\n      ? new Date(invoice.due_date).toLocaleDateString('fr-FR')\n      : '',\n    montant: invoice?.amount ? Number(invoice.amount).toFixed(2) : '0.00',\n    montant_ht: invoice?.amount ? Number(invoice.amount).toFixed(2) : '0.00',\n    montant_ttc: invoice?.total_amount\n      ? Number(invoice.total_amount).toFixed(2)\n      : '0.00',\n    tva: invoice?.tax_amount\n      ? Number(invoice.tax_amount).toFixed(2)\n      : '0.00',\n    taux_tva: invoice?.tax_amount && invoice?.amount\n      ? ((Number(invoice.tax_amount) / Number(invoice.amount)) * 100).toFixed(2)\n      : '0.00',\n    facture_montant: invoice?.amount ? Number(invoice.amount).toFixed(2) : '0.00',\n    facture_tva: invoice?.tax_amount\n      ? Number(invoice.tax_amount).toFixed(2)\n      : '0.00',\n    facture_total: invoice?.total_amount\n      ? Number(invoice.total_amount).toFixed(2)\n      : '0.00',\n    facture_devise: invoice?.currency || 'EUR',\n    facture_items: invoice?.items\n      ? JSON.stringify(invoice.items)\n      : '[]',\n\n    // Variables supplémentaires pour factures\n    montant_lettres: invoice?.total_amount\n      ? convertNumberToWords(Number(invoice.total_amount), language)\n      : '',\n    mode_paiement: (invoice as any)?.payment_method || '',\n    date_paiement: (invoice as any)?.paid_at\n      ? new Date((invoice as any).paid_at).toLocaleDateString('fr-FR')\n      : '',\n    ecole_siret: (organization as any)?.siret || '',\n    ecole_numero_declaration: (organization as any)?.declaration_number || '',\n    ecole_representant: (organization as any)?.representative_name || '',\n\n    // Langue\n    langue: language,\n  }\n\n  return variables\n}\n\n/**\n * Convertit un nombre en lettres (français)\n */\nfunction convertNumberToWords(num: number, language: 'fr' | 'en' = 'fr'): string {\n  if (language === 'en') {\n    return convertNumberToWordsEN(num)\n  }\n  return convertNumberToWordsFR(num)\n}\n\n/**\n * Convertit un nombre en lettres en français\n */\nfunction convertNumberToWordsFR(num: number): string {\n  if (num === 0) return 'zéro euro'\n  if (num < 0) return 'moins ' + convertNumberToWordsFR(-num)\n  \n  const integerPart = Math.floor(num)\n  const decimalPart = Math.round((num - integerPart) * 100)\n  \n  let result = convertIntegerToWordsFR(integerPart)\n  \n  if (decimalPart > 0) {\n    result += ' virgule ' + convertIntegerToWordsFR(decimalPart)\n  }\n  \n  return result + (integerPart > 1 ? ' euros' : ' euro')\n}\n\nfunction convertIntegerToWordsFR(num: number): string {\n  if (num === 0) return ''\n  if (num < 10) {\n    const units = ['', 'un', 'deux', 'trois', 'quatre', 'cinq', 'six', 'sept', 'huit', 'neuf']\n    return units[num]\n  }\n  if (num < 20) {\n    const teens = ['dix', 'onze', 'douze', 'treize', 'quatorze', 'quinze', 'seize', 'dix-sept', 'dix-huit', 'dix-neuf']\n    return teens[num - 10]\n  }\n  if (num < 100) {\n    const tens = ['', '', 'vingt', 'trente', 'quarante', 'cinquante', 'soixante', 'soixante', 'quatre-vingt', 'quatre-vingt']\n    const ten = Math.floor(num / 10)\n    const unit = num % 10\n    let result = tens[ten]\n    if (ten === 7 || ten === 9) {\n      result += '-' + (unit === 1 ? 'et-' : '') + convertIntegerToWordsFR(10 + unit)\n    } else if (unit > 0) {\n      result += (unit === 1 && ten !== 8 ? '-et-' : '-') + convertIntegerToWordsFR(unit)\n    } else if (ten === 8) {\n      result += 's'\n    }\n    return result\n  }\n  if (num < 1000) {\n    const hundred = Math.floor(num / 100)\n    const remainder = num % 100\n    let result = hundred === 1 ? 'cent' : convertIntegerToWordsFR(hundred) + '-cent'\n    if (remainder > 0) {\n      result += '-' + convertIntegerToWordsFR(remainder)\n    } else if (hundred > 1) {\n      result += 's'\n    }\n    return result\n  }\n  if (num < 1000000) {\n    const thousand = Math.floor(num / 1000)\n    const remainder = num % 1000\n    let result = thousand === 1 ? 'mille' : convertIntegerToWordsFR(thousand) + '-mille'\n    if (remainder > 0) {\n      result += '-' + convertIntegerToWordsFR(remainder)\n    }\n    return result\n  }\n  // Pour les nombres plus grands, on simplifie\n  return num.toString()\n}\n\nfunction convertNumberToWordsEN(num: number): string {\n  // Implémentation simplifiée en anglais\n  return num.toFixed(2) + ' euros'\n}\n\n/**\n * Mappe les anciens types de documents vers les nouveaux types\n */\nexport function mapDocumentTypeToTemplateType(\n  oldType: string\n): string {\n  const mapping: Record<string, string> = {\n    // Mapping vers les valeurs valides de l'enum document_type\n    attestation: 'attestation_reussite', // Utilise attestation_reussite (peut être changé selon le contexte)\n    certificate: 'certificat_scolarite',\n    invoice: 'facture',\n    receipt: 'facture', // Les reçus utilisent le même type que les factures\n    transcript: 'releve_notes',\n    report_card: 'releve_notes',\n    convocation: 'convocation',\n    contract: 'contrat',\n  }\n\n  return mapping[oldType] || oldType\n}\n\n","'use client'\n\nimport { useState } from 'react'\nimport { useQuery } from '@tanstack/react-query'\nimport { documentTemplateService } from '@/lib/services/document-template.service'\nimport { useAuth } from '@/lib/hooks/use-auth'\nimport { Button } from '@/components/ui/button'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Label } from '@/components/ui/label'\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select'\nimport { FileText, Copy, Plus, Check } from 'lucide-react'\nimport type { DocumentType } from '@/lib/types/document-templates'\n\ninterface TemplateSelectorProps {\n  documentType: DocumentType | string\n  selectedTemplateId?: string\n  onTemplateSelect: (templateId: string) => void\n  onCreateNew?: () => void\n  onDuplicate?: (templateId: string) => void\n}\n\nexport function TemplateSelector({\n  documentType,\n  selectedTemplateId,\n  onTemplateSelect,\n  onCreateNew,\n  onDuplicate,\n}: TemplateSelectorProps) {\n  const { user } = useAuth()\n  const [showAll, setShowAll] = useState(false)\n\n  // Récupérer tous les templates du type sélectionné\n  const { data: templates, isLoading } = useQuery({\n    queryKey: ['document-templates-by-type', user?.organization_id, documentType],\n    queryFn: async () => {\n      if (!user?.organization_id || !documentType) return []\n      try {\n        return await documentTemplateService.getTemplatesByType(\n          documentType as DocumentType,\n          user.organization_id\n        )\n      } catch (error) {\n        console.error('Erreur lors de la récupération des templates:', error)\n        return []\n      }\n    },\n    enabled: !!user?.organization_id && !!documentType,\n  })\n\n  const activeTemplates = templates?.filter((t) => t.is_active) || []\n  const defaultTemplate = activeTemplates.find((t) => t.is_default)\n  const otherTemplates = activeTemplates.filter((t) => !t.is_default)\n\n  const displayedTemplates = showAll ? activeTemplates : [defaultTemplate, ...otherTemplates.slice(0, 2)].filter(Boolean)\n\n  if (isLoading) {\n    return (\n      <Card>\n        <CardContent className=\"pt-6\">\n          <div className=\"text-sm text-gray-500\">Chargement des modèles...</div>\n        </CardContent>\n      </Card>\n    )\n  }\n\n  if (!activeTemplates || activeTemplates.length === 0) {\n    return (\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"text-lg\">Modèle de document</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"text-sm text-gray-500 mb-4\">\n            Aucun modèle disponible pour ce type de document.\n          </div>\n          {onCreateNew && (\n            <Button onClick={onCreateNew} variant=\"outline\" size=\"sm\">\n              <Plus className=\"h-4 w-4 mr-2\" />\n              Créer un modèle\n            </Button>\n          )}\n        </CardContent>\n      </Card>\n    )\n  }\n\n  return (\n    <Card>\n      <CardHeader>\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"text-lg\">Modèle de document</CardTitle>\n          {onCreateNew && (\n            <Button onClick={onCreateNew} variant=\"outline\" size=\"sm\">\n              <Plus className=\"h-4 w-4 mr-2\" />\n              Nouveau\n            </Button>\n          )}\n        </div>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        <div>\n          <Label htmlFor=\"template-select\">Sélectionner un modèle</Label>\n          <Select\n            value={selectedTemplateId || defaultTemplate?.id || ''}\n            onValueChange={onTemplateSelect}\n          >\n            <SelectTrigger id=\"template-select\" className=\"mt-2\">\n              <SelectValue placeholder=\"Choisir un modèle\" />\n            </SelectTrigger>\n            <SelectContent>\n              {activeTemplates.map((template) => (\n                <SelectItem key={template.id} value={template.id}>\n                  <div className=\"flex items-center justify-between w-full\">\n                    <div className=\"flex items-center gap-2\">\n                      <FileText className=\"h-4 w-4\" />\n                      <span>{template.name}</span>\n                      {template.is_default && (\n                        <span className=\"text-xs text-primary font-medium\">(Par défaut)</span>\n                      )}\n                    </div>\n                  </div>\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n        </div>\n\n        {/* Liste des templates avec actions */}\n        <div className=\"space-y-2\">\n          <div className=\"text-sm font-medium text-gray-700\">Modèles disponibles</div>\n          <div className=\"space-y-2 max-h-60 overflow-y-auto\">\n            {displayedTemplates.map((template) => (\n              <div\n                key={template.id}\n                className={`flex items-center justify-between p-3 border rounded-lg transition-colors ${\n                  selectedTemplateId === template.id\n                    ? 'border-primary bg-primary/5'\n                    : 'border-gray-200 hover:border-gray-300'\n                }`}\n              >\n                <div className=\"flex items-center gap-3 flex-1\">\n                  <FileText className=\"h-4 w-4 text-gray-400\" />\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"font-medium text-sm\">{template.name}</span>\n                      {template.is_default && (\n                        <span className=\"text-xs px-2 py-0.5 bg-primary/10 text-primary rounded-full\">\n                          Par défaut\n                        </span>\n                      )}\n                      {selectedTemplateId === template.id && (\n                        <Check className=\"h-4 w-4 text-primary\" />\n                      )}\n                    </div>\n                    <div className=\"text-xs text-gray-500 mt-0.5\">\n                      Modifié le {new Date(template.updated_at).toLocaleDateString('fr-FR')}\n                    </div>\n                  </div>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  {selectedTemplateId !== template.id && (\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => onTemplateSelect(template.id)}\n                    >\n                      Sélectionner\n                    </Button>\n                  )}\n                  {onDuplicate && (\n                    <Button\n                      variant=\"ghost\"\n                      size=\"icon\"\n                      onClick={() => onDuplicate(template.id)}\n                      title=\"Dupliquer ce modèle\"\n                    >\n                      <Copy className=\"h-4 w-4\" />\n                    </Button>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n\n          {activeTemplates.length > displayedTemplates.length && (\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={() => setShowAll(!showAll)}\n              className=\"w-full\"\n            >\n              {showAll\n                ? `Afficher moins (${activeTemplates.length - 3} autres)`\n                : `Afficher tous les modèles (${activeTemplates.length - displayedTemplates.length} autres)`}\n            </Button>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  )\n}\n\n"],"names":[],"mappings":"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","ignoreList":[0,1,2,3,4,7,8,9,10,11]}