{"version":3,"sources":["../../../../components/dashboard/sidebar.tsx","../../../../components/dashboard/mobile-sidebar.tsx","../../../../lib/hooks/use-local-storage.ts","../../../../lib/hooks/use-theme.ts","../../../../components/dashboard/theme-toggle.tsx","../../../../lib/hooks/use-debounced-value.ts","../../../../lib/hooks/use-click-outside.ts","../../../../components/search/global-search.tsx","../../../../components/feedback/feedback-button.tsx","../../../../components/notifications/notification-badge.tsx","../../../../components/ui/scroll-area.tsx","../../../../components/notifications/notification-center.tsx","../../../../node_modules/next-intl/dist/esm/production/routing/defineRouting.js","../../../../components/pwa/install-prompt.tsx","../../../../node_modules/next-intl/dist/esm/production/routing/config.js","../../../../node_modules/next-intl/dist/esm/production/react-client/index.js","../../../../app/%28dashboard%29/layout.tsx","../../../../components/i18n/language-switcher.tsx","../../../../components/dashboard/header.tsx","../../../../components/ui/page-transition.tsx","../../../../lib/hooks/use-pwa.ts","../../../../node_modules/next-intl/dist/esm/production/shared/use.js","../../../../node_modules/next-intl/dist/esm/production/navigation/react-client/createNavigation.js","../../../../node_modules/next-intl/dist/esm/production/navigation/shared/createSharedNavigationFns.js","../../../../node_modules/next-intl/dist/esm/production/navigation/react-client/useBasePathname.js","../../../../i18n/routing.ts","../../../../lib/hooks/use-notifications.ts","../../../../lib/services/notification.service.ts","../../../../node_modules/lucide-react/src/icons/smartphone.ts","../../../../node_modules/lucide-react/src/icons/book-open-check.ts","../../../../node_modules/lucide-react/src/icons/badge.ts","../../../../node_modules/lucide-react/src/icons/life-buoy.ts","../../../../node_modules/lucide-react/src/icons/monitor.ts","../../../../node_modules/lucide-react/src/icons/check-check.ts","../../../../lib/utils/highlight.ts","../../../../lib/services/search.service.ts","../../../../lib/services/feedback.service.ts"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport Link from 'next/link'\nimport { usePathname } from 'next/navigation'\nimport { cn } from '@/lib/utils'\nimport { useVocabulary } from '@/lib/hooks/use-vocabulary'\nimport { getVocabulary } from '@/lib/utils/vocabulary'\nimport { useTranslations } from 'next-intl'\nimport {\n  LayoutDashboard,\n  MessageSquare,\n  Users,\n  BookOpen,\n  CreditCard,\n  FileText,\n  ClipboardList,\n  Settings,\n  LogOut,\n  GraduationCap,\n  FileCheck,\n  ChevronDown,\n  BookMarked,\n  Calendar,\n  Sparkles,\n  BarChart3,\n  HelpCircle,\n  PlayCircle,\n  Shield,\n  Folder,\n  Building2,\n  Award,\n  Briefcase,\n  Lock,\n  BookOpenCheck,\n  LifeBuoy,\n  Video,\n  Activity,\n  FileDown,\n  Accessibility,\n  Globe,\n  MapPin,\n  Badge,\n} from 'lucide-react'\nimport { useAuth } from '@/lib/hooks/use-auth'\nimport { motion, AnimatePresence } from '@/components/ui/motion'\n\ntype NavigationItem = {\n  name: string\n  href?: string\n  icon: React.ComponentType<{ className?: string }>\n  // Rôles autorisés à voir cet élément (si non défini, visible par tous)\n  allowedRoles?: string[]\n  children?: Array<{\n    name: string\n    href: string\n    icon: React.ComponentType<{ className?: string }>\n    allowedRoles?: string[]\n  }>\n}\n\ntype NavigationSection = {\n  title: string\n  items: NavigationItem[]\n  // Rôles autorisés à voir cette section (si non défini, visible par tous)\n  allowedRoles?: string[]\n}\n\n// Rôles avec accès administratif complet\nconst ADMIN_ROLES = ['super_admin', 'admin', 'secretary', 'accountant']\n// Rôles avec accès aux finances (incluant secrétaire)\nconst FINANCE_ROLES = ['super_admin', 'admin', 'secretary', 'accountant']\n// Rôles avec accès à la gestion des formations\nconst FORMATION_MANAGEMENT_ROLES = ['super_admin', 'admin', 'secretary']\n\n// Fonction pour générer la navigation avec le vocabulaire adaptatif et les traductions\nconst getNavigation = (vocab: ReturnType<typeof useVocabulary>, t: (key: string) => string): NavigationSection[] => [\n  {\n    title: t('navigation.main'),\n    items: [\n      { name: t('common.dashboard'), href: '/dashboard', icon: LayoutDashboard },\n      { name: t('navigation.calendar'), href: '/dashboard/calendar', icon: Calendar },\n      { name: t('common.messages'), href: '/dashboard/messages', icon: MessageSquare },\n    ],\n  },\n  {\n    title: t('navigation.pedagogy'),\n    items: [\n      { name: vocab.students, href: '/dashboard/students', icon: Users, allowedRoles: ADMIN_ROLES },\n      { name: t('navigation.myStudents'), href: '/dashboard/my-students', icon: Users, allowedRoles: ['teacher'] },\n      {\n        name: t('navigation.pedagogy'),\n        icon: BookMarked,\n        allowedRoles: FORMATION_MANAGEMENT_ROLES,\n        children: [\n          { name: t('common.programs'), href: '/dashboard/programs', icon: BookOpen },\n          { name: t('common.sessions'), href: '/dashboard/sessions', icon: Calendar },\n          { name: t('common.formations'), href: '/dashboard/formations', icon: BookMarked },\n          { name: t('navigation.elearning'), href: '/dashboard/elearning', icon: GraduationCap },\n          { name: 'Catalogue Public', href: '/dashboard/catalog', icon: Globe },\n          { name: t('navigation.resources'), href: '/dashboard/resources', icon: Folder },\n        ],\n      },\n      {\n        name: t('navigation.tracking'),\n        icon: ClipboardList,\n        children: [\n          { name: vocab.attendance, href: '/dashboard/attendance', icon: ClipboardList },\n          { name: vocab.evaluations, href: '/dashboard/evaluations', icon: FileCheck },\n          { name: t('navigation.learningPortfolios'), href: '/dashboard/evaluations/portfolios', icon: BookMarked },\n          { name: 'Rapports & Analytics', href: '/dashboard/reports', icon: BarChart3 },\n        ],\n      },\n    ],\n  },\n  {\n    title: t('navigation.management'),\n    allowedRoles: ADMIN_ROLES,\n    items: [\n      {\n        name: t('navigation.finances'),\n        icon: CreditCard,\n        allowedRoles: FINANCE_ROLES,\n        children: [\n          { name: vocab.payments, href: '/dashboard/payments', icon: CreditCard },\n          { name: t('navigation.financialReports'), href: '/dashboard/financial-reports', icon: BarChart3 },\n          { name: 'Bilan Pédagogique Financier', href: '/dashboard/bpf', icon: BarChart3 },\n        ],\n      },\n      { name: t('navigation.documents'), href: '/dashboard/documents', icon: FileText },\n      { name: 'Sites et Antennes', href: '/dashboard/sites', icon: MapPin },\n    ],\n  },\n  {\n    title: t('navigation.compliance'),\n    allowedRoles: ADMIN_ROLES,\n    items: [\n      {\n        name: t('navigation.qualityRegulation'),\n        icon: Shield,\n        children: [\n          { name: t('navigation.qualiopi'), href: '/dashboard/qualiopi', icon: Award },\n          { name: 'Accessibilité Handicap', href: '/dashboard/accessibility', icon: Accessibility },\n          { name: t('navigation.cpf'), href: '/dashboard/cpf', icon: GraduationCap },\n          { name: 'Certifications RNCP/RS', href: '/dashboard/certifications', icon: Badge },\n          { name: t('navigation.opco'), href: '/dashboard/opco', icon: Building2 },\n          { name: t('navigation.gdpr'), href: '/dashboard/gdpr', icon: Lock },\n          { name: t('navigation.compliance'), href: '/dashboard/compliance', icon: Shield },\n          {\n            name: t('navigation.admin'),\n            icon: Shield,\n            allowedRoles: ADMIN_ROLES,\n            children: [\n              { name: t('navigation.systemHealth'), href: '/dashboard/admin/health', icon: Activity },\n              { name: t('navigation.exportHistory'), href: '/dashboard/admin/exports', icon: FileDown },\n            ],\n          } as NavigationItem,\n        ],\n      },\n    ],\n  },\n  {\n    title: t('navigation.help'),\n    items: [\n      {\n        name: t('navigation.helpCenter'),\n        icon: HelpCircle,\n        children: [\n          { name: t('navigation.videoTutorials'), href: '/dashboard/tutorials', icon: Video },\n          { name: t('navigation.documentation'), href: '/dashboard/documentation', icon: BookOpenCheck },\n          { name: t('navigation.knowledgeBase'), href: '/dashboard/knowledge-base', icon: BookOpen },\n          { name: t('navigation.support'), href: '/dashboard/support', icon: LifeBuoy },\n        ],\n      },\n    ],\n  },\n]\n\n// Fonction pour filtrer la navigation en fonction du rôle\nconst filterNavigationByRole = (navigation: NavigationSection[], userRole: string | undefined): NavigationSection[] => {\n  // Si le rôle n'est pas encore chargé, retourner la navigation complète pour éviter les problèmes d'hydratation\n  if (!userRole) return navigation\n  \n  return navigation\n    .filter(section => {\n      // Si la section a des rôles autorisés, vérifier si l'utilisateur a accès\n      if (section.allowedRoles && !section.allowedRoles.includes(userRole)) {\n        return false\n      }\n      return true\n    })\n    .map(section => ({\n      ...section,\n      items: section.items\n        .filter(item => {\n          // Si l'élément a des rôles autorisés, vérifier si l'utilisateur a accès\n          if (item.allowedRoles && !item.allowedRoles.includes(userRole)) {\n            return false\n          }\n          return true\n        })\n        .map(item => ({\n          ...item,\n          // Filtrer également les enfants si présents\n          children: item.children?.filter(child => {\n            if (child.allowedRoles && !child.allowedRoles.includes(userRole)) {\n              return false\n            }\n            return true\n          }),\n        })),\n    }))\n    // Supprimer les sections vides\n    .filter(section => section.items.length > 0)\n}\n\nexport function Sidebar() {\n  const pathname = usePathname()\n  const { logout, user } = useAuth()\n  const vocab = useVocabulary() || getVocabulary('school')\n  const t = useTranslations()\n  const [mounted, setMounted] = useState(false)\n  // Utiliser un état pour pathname pour éviter les différences serveur/client\n  const [clientPathname, setClientPathname] = useState<string | null>(null)\n  \n  // Calculer les menus développés de manière synchrone pour éviter les problèmes d'hydratation\n  const getExpandedMenus = (): string[] => {\n    if (!mounted || !clientPathname) return []\n    \n    const expanded: string[] = []\n    \n    // Pédagogie\n    if (clientPathname.startsWith('/dashboard/programs') || \n        clientPathname.startsWith('/dashboard/formations') ||\n        clientPathname.startsWith('/dashboard/sessions') ||\n        clientPathname.startsWith('/dashboard/elearning') ||\n        clientPathname.startsWith('/dashboard/catalog')) {\n      expanded.push(t('navigation.pedagogy'))\n    }\n    \n    // Suivi\n    if (clientPathname.startsWith('/dashboard/attendance') ||\n        clientPathname.startsWith('/dashboard/evaluations')) {\n      expanded.push(t('navigation.tracking'))\n    }\n    \n    // Finances\n    if (clientPathname.startsWith('/dashboard/payments') ||\n        clientPathname.startsWith('/dashboard/financial-reports') ||\n        clientPathname.startsWith('/dashboard/bpf')) {\n      expanded.push(t('navigation.finances'))\n    }\n    \n    // Qualité & Réglementation\n    if (clientPathname.startsWith('/dashboard/qualiopi') ||\n        clientPathname.startsWith('/dashboard/cpf') ||\n        clientPathname.startsWith('/dashboard/certifications') ||\n        clientPathname.startsWith('/dashboard/opco') ||\n        clientPathname.startsWith('/dashboard/gdpr') ||\n        clientPathname.startsWith('/dashboard/compliance') ||\n        clientPathname.startsWith('/dashboard/accessibility') ||\n        clientPathname.startsWith('/dashboard/admin')) {\n      expanded.push(t('navigation.qualityRegulation'))\n    }\n    \n    // Centre d'aide\n    if (clientPathname.startsWith('/dashboard/tutorials') ||\n        clientPathname.startsWith('/dashboard/documentation') ||\n        clientPathname.startsWith('/dashboard/knowledge-base') ||\n        clientPathname.startsWith('/dashboard/support')) {\n      expanded.push(t('navigation.helpCenter'))\n    }\n    \n    return expanded\n  }\n  \n  const [expandedMenus, setExpandedMenus] = useState<string[]>([])\n  \n  // Marquer le composant comme monté après l'hydratation et capturer le pathname côté client\n  useEffect(() => {\n    setMounted(true)\n    setClientPathname(pathname || null)\n  }, [pathname])\n  \n  // Développer automatiquement les menus si l'utilisateur est sur une de leurs pages\n  // Utiliser useEffect pour éviter les problèmes d'hydratation\n  useEffect(() => {\n    if (!mounted || !clientPathname) {\n      setExpandedMenus([])\n      return\n    }\n    \n    const expanded = getExpandedMenus()\n    setExpandedMenus(expanded)\n  }, [clientPathname, mounted])\n\n  const toggleMenu = (menuName: string) => {\n    setExpandedMenus((prev) =>\n      prev.includes(menuName)\n        ? prev.filter((name) => name !== menuName)\n        : [...prev, menuName]\n    )\n  }\n\n  const isMenuExpanded = (menuName: string) => {\n    if (!mounted) return false // Toujours fermé pendant l'hydratation\n    return expandedMenus.includes(menuName)\n  }\n\n  const hasActiveChild = (children?: NavigationItem['children']) => {\n    if (!children) return false\n    return children.some((child) => {\n      return pathname === child.href || pathname?.startsWith(child.href + '/')\n    })\n  }\n\n  // Filtrer la navigation en fonction du rôle de l'utilisateur\n  // Ne filtrer qu'après l'hydratation pour éviter les différences serveur/client\n  const fullNavigation = getNavigation(vocab, t)\n  // Toujours retourner la navigation complète pendant l'hydratation pour éviter les différences\n  const navigation = mounted && user?.role\n    ? filterNavigationByRole(fullNavigation, user.role)\n    : fullNavigation\n\n  return (\n    <div className=\"hidden md:flex md:flex-shrink-0\">\n      <div className=\"flex flex-col w-72\">\n        <motion.div\n          initial={{ opacity: 0, x: -20 }}\n          animate={{ opacity: 1, x: 0 }}\n          transition={{ duration: 0.5, ease: [0.16, 1, 0.3, 1] }}\n          className=\"relative flex flex-col flex-grow bg-gradient-to-b from-white via-gray-50/50 to-white backdrop-blur-xl border-r-2 border-gray-200/50 pt-8 pb-6 overflow-y-auto shadow-2xl shadow-gray-900/5\"\n          style={{\n            background: 'linear-gradient(to bottom, rgba(255,255,255,0.98), rgba(249,250,251,0.95), rgba(255,255,255,0.98))',\n            backdropFilter: 'blur(20px)',\n          }}\n        >\n          {/* Animated gradient overlay */}\n          <motion.div\n            className=\"absolute inset-0 bg-gradient-to-b from-brand-blue/[0.02] via-transparent to-brand-cyan/[0.02] pointer-events-none\"\n            animate={{\n              opacity: [0.3, 0.5, 0.3],\n            }}\n            transition={{\n              duration: 4,\n              repeat: Infinity,\n              ease: \"easeInOut\"\n            }}\n          />\n\n          {/* Logo Ultra-Premium */}\n          <motion.div\n            initial={{ scale: 0.8, opacity: 0, y: -20 }}\n            animate={{ scale: 1, opacity: 1, y: 0 }}\n            transition={{\n              delay: 0.2,\n              type: \"spring\",\n              stiffness: 400,\n              damping: 20\n            }}\n            className=\"relative flex items-center flex-shrink-0 px-6 mb-8\"\n          >\n            <div className=\"flex items-center gap-3 group cursor-pointer\">\n              <motion.div\n                className=\"relative\"\n                whileHover={{ scale: 1.1, rotate: 5 }}\n                transition={{ type: \"spring\", stiffness: 500, damping: 15 }}\n              >\n                <div className=\"absolute inset-0 bg-gradient-to-br from-brand-blue to-brand-cyan blur-2xl opacity-40 rounded-full animate-pulse\" />\n                <div className=\"relative p-2.5 bg-gradient-to-br from-brand-blue to-brand-cyan rounded-2xl shadow-xl shadow-brand-blue/30\">\n                  <Sparkles className=\"h-6 w-6 text-white\" />\n                </div>\n              </motion.div>\n              <div>\n                <h1 className=\"text-2xl font-display font-bold text-transparent bg-clip-text bg-gradient-to-r from-brand-blue via-brand-cyan to-brand-blue tracking-tight\">\n                  eduzen\n                </h1>\n                <p className=\"text-[10px] font-bold text-gray-500 uppercase tracking-widest\">Premium LMS</p>\n              </div>\n            </div>\n          </motion.div>\n\n          <div className=\"flex-1 flex flex-col overflow-y-auto relative z-10\">\n            <nav className=\"flex-1 px-4 space-y-8\">\n              {navigation.map((section, sectionIndex) => (\n                <div key={section.title}>\n                  {/* Section Title Ultra-Premium */}\n                  <motion.div\n                    initial={{ opacity: 0, x: -10 }}\n                    animate={{ opacity: 1, x: 0 }}\n                    transition={{\n                      delay: sectionIndex * 0.08 + 0.3,\n                      duration: 0.4,\n                      ease: [0.16, 1, 0.3, 1]\n                    }}\n                    className=\"px-3 mb-3\"\n                  >\n                    <div className=\"flex items-center gap-2\">\n                      <motion.div\n                        className=\"h-1 w-1 rounded-full bg-gradient-to-r from-brand-blue to-brand-cyan shadow-sm\"\n                        animate={{\n                          scale: [1, 1.3, 1],\n                          opacity: [0.5, 1, 0.5],\n                        }}\n                        transition={{\n                          duration: 2,\n                          repeat: Infinity,\n                          delay: sectionIndex * 0.2\n                        }}\n                      />\n                      <h3 className=\"text-[11px] font-bold text-gray-500 uppercase tracking-widest\">\n                        {section.title}\n                      </h3>\n                    </div>\n                  </motion.div>\n                  \n                  {/* Section Items */}\n                  <div className=\"space-y-1\">\n                    {section.items.map((item, itemIndex) => {\n                      if (item.children) {\n                        // Menu avec sous-menu\n                        const hasActive = hasActiveChild(item.children)\n                        const isExpanded = isMenuExpanded(item.name)\n                        \n                        return (\n                          <motion.div\n                            key={item.name}\n                            initial={{ opacity: 0, y: -5 }}\n                            animate={{ opacity: 1, y: 0 }}\n                            transition={{\n                              delay: sectionIndex * 0.1 + itemIndex * 0.04,\n                              duration: 0.4,\n                              ease: [0.16, 1, 0.3, 1]\n                            }}\n                            whileHover={{ x: 4 }}\n                          >\n                            <motion.button\n                              onClick={() => toggleMenu(item.name)}\n                              whileHover={{ scale: 1.02 }}\n                              whileTap={{ scale: 0.98 }}\n                              className={cn(\n                                'group relative flex items-center justify-between w-full px-4 py-3 text-sm font-semibold rounded-xl overflow-hidden',\n                                'transition-all duration-300 ease-out',\n                                hasActive\n                                  ? 'bg-gradient-to-br from-brand-blue to-brand-cyan text-white shadow-xl shadow-brand-blue/30'\n                                  : 'text-gray-700 hover:bg-white hover:text-gray-900 hover:shadow-lg'\n                              )}\n                            >\n                              {/* Shine effect */}\n                              <motion.div\n                                className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent\"\n                                initial={{ x: '-100%' }}\n                                whileHover={{ x: '100%' }}\n                                transition={{ duration: 0.6, ease: \"easeInOut\" }}\n                              />\n\n                              <div className=\"flex items-center relative z-10\">\n                                <motion.div\n                                  className={cn(\n                                    'p-1.5 rounded-lg mr-3',\n                                    hasActive\n                                      ? 'bg-white/20'\n                                      : 'bg-gray-100 group-hover:bg-brand-blue/10'\n                                  )}\n                                  whileHover={{ rotate: 5, scale: 1.1 }}\n                                  transition={{ type: \"spring\", stiffness: 400, damping: 10 }}\n                                >\n                                  <item.icon\n                                    className={cn(\n                                      'flex-shrink-0 h-4 w-4 transition-colors',\n                                      hasActive ? 'text-white' : 'text-gray-500 group-hover:text-brand-blue'\n                                    )}\n                                  />\n                                </motion.div>\n                                <span className=\"tracking-tight\">{item.name}</span>\n                              </div>\n                              <motion.div\n                                animate={{ rotate: isExpanded ? 180 : 0 }}\n                                transition={{ duration: 0.3, type: \"spring\", stiffness: 400, damping: 20 }}\n                                className=\"relative z-10\"\n                              >\n                                <ChevronDown\n                                  className={cn(\n                                    'h-4 w-4 flex-shrink-0 transition-colors',\n                                    hasActive ? 'text-white/90' : 'text-gray-400 group-hover:text-gray-600'\n                                  )}\n                                />\n                              </motion.div>\n\n                              {/* Glow effect for active */}\n                              {hasActive && (\n                                <div className=\"absolute inset-0 bg-gradient-to-r from-brand-blue/20 to-brand-cyan/20 blur-xl opacity-50\" />\n                              )}\n                            </motion.button>\n                            \n                            <AnimatePresence>\n                              {isExpanded && (\n                                <motion.div\n                                  initial={{ height: 0, opacity: 0 }}\n                                  animate={{ height: 'auto', opacity: 1 }}\n                                  exit={{ height: 0, opacity: 0 }}\n                                  transition={{ duration: 0.3, ease: [0.16, 1, 0.3, 1] }}\n                                  className=\"overflow-hidden\"\n                                >\n                                  <div className=\"ml-4 mt-2 space-y-1 pl-4 border-l-2 border-gradient-to-b from-brand-blue/30 to-brand-cyan/30\">\n                                    {item.children.map((child, childIndex) => {\n                                      if (!child.href) return null\n                                      const isChildActive = pathname === child.href || pathname?.startsWith(child.href + '/')\n                                      return (\n                                        <motion.div\n                                          key={child.name}\n                                          initial={{ opacity: 0, x: -10 }}\n                                          animate={{ opacity: 1, x: 0 }}\n                                          transition={{\n                                            delay: childIndex * 0.05,\n                                            duration: 0.3,\n                                            ease: [0.16, 1, 0.3, 1]\n                                          }}\n                                          whileHover={{ x: 4 }}\n                                        >\n                                          <Link\n                                            href={child.href}\n                                            className={cn(\n                                              'group relative flex items-center px-3 py-2.5 text-sm font-medium rounded-lg overflow-hidden',\n                                              'transition-all duration-300',\n                                              isChildActive\n                                                ? 'bg-gradient-to-r from-brand-blue/10 to-brand-cyan/10 text-brand-blue shadow-md'\n                                                : 'text-gray-600 hover:bg-white/80 hover:text-gray-900 hover:shadow-sm'\n                                            )}\n                                          >\n                                            {/* Shine effect on child items */}\n                                            {!isChildActive && (\n                                              <motion.div\n                                                className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent\"\n                                                initial={{ x: '-100%' }}\n                                                whileHover={{ x: '100%' }}\n                                                transition={{ duration: 0.5 }}\n                                              />\n                                            )}\n\n                                            <motion.div\n                                              className={cn(\n                                                'p-1 rounded-md mr-3 relative z-10',\n                                                isChildActive\n                                                  ? 'bg-brand-blue/10'\n                                                  : 'bg-gray-100 group-hover:bg-brand-blue/5'\n                                              )}\n                                              whileHover={{ rotate: 8, scale: 1.1 }}\n                                              transition={{ type: \"spring\", stiffness: 500, damping: 15 }}\n                                            >\n                                              <child.icon\n                                                className={cn(\n                                                  'flex-shrink-0 h-3.5 w-3.5 transition-colors',\n                                                  isChildActive\n                                                    ? 'text-brand-blue'\n                                                    : 'text-gray-400 group-hover:text-brand-cyan'\n                                                )}\n                                              />\n                                            </motion.div>\n                                            <span className=\"relative z-10 tracking-tight\">{child.name}</span>\n\n                                            {/* Active indicator */}\n                                            {isChildActive && (\n                                              <motion.div\n                                                layoutId={`activeChild-${item.name}`}\n                                                className=\"absolute left-0 top-1/2 -translate-y-1/2 w-1 h-4 bg-gradient-to-b from-brand-blue to-brand-cyan rounded-r-full\"\n                                                transition={{\n                                                  type: \"spring\",\n                                                  stiffness: 500,\n                                                  damping: 30\n                                                }}\n                                              />\n                                            )}\n                                          </Link>\n                                        </motion.div>\n                                      )\n                                    })}\n                                  </div>\n                                </motion.div>\n                              )}\n                            </AnimatePresence>\n                          </motion.div>\n                        )\n                      } else if (item.href) {\n                        // Menu simple sans sous-menu\n                        const isActive = pathname === item.href || pathname?.startsWith(item.href + '/')\n                        return (\n                          <motion.div\n                            key={item.name}\n                            initial={{ opacity: 0, y: -5 }}\n                            animate={{ opacity: 1, y: 0 }}\n                            transition={{\n                              delay: sectionIndex * 0.1 + itemIndex * 0.04,\n                              duration: 0.4,\n                              ease: [0.16, 1, 0.3, 1]\n                            }}\n                            whileHover={{ x: 4 }}\n                          >\n                            <Link\n                              href={item.href}\n                              className={cn(\n                                'group relative flex items-center px-4 py-3 text-sm font-semibold rounded-xl overflow-hidden',\n                                'transition-all duration-300 ease-out',\n                                isActive\n                                  ? 'bg-gradient-to-br from-brand-blue to-brand-cyan text-white shadow-xl shadow-brand-blue/30'\n                                  : 'text-gray-700 hover:bg-white hover:text-gray-900 hover:shadow-lg'\n                              )}\n                            >\n                              {/* Shine effect */}\n                              <motion.div\n                                className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent\"\n                                initial={{ x: '-100%' }}\n                                whileHover={{ x: '100%' }}\n                                transition={{ duration: 0.6, ease: \"easeInOut\" }}\n                              />\n\n                              <motion.div\n                                className={cn(\n                                  'p-1.5 rounded-lg mr-3 relative z-10',\n                                  isActive\n                                    ? 'bg-white/20'\n                                    : 'bg-gray-100 group-hover:bg-brand-blue/10'\n                                )}\n                                whileHover={{ rotate: 5, scale: 1.1 }}\n                                transition={{ type: \"spring\", stiffness: 400, damping: 10 }}\n                              >\n                                <item.icon\n                                  className={cn(\n                                    'flex-shrink-0 h-4 w-4 transition-colors',\n                                    isActive ? 'text-white' : 'text-gray-500 group-hover:text-brand-blue'\n                                  )}\n                                />\n                              </motion.div>\n                              <span className=\"relative z-10 tracking-tight\">{item.name}</span>\n\n                              {/* Active indicator */}\n                              {isActive && (\n                                <motion.div\n                                  layoutId=\"activeSidebarItem\"\n                                  className=\"absolute left-0 top-1/2 -translate-y-1/2 w-1 h-8 bg-white/40 rounded-r-full shadow-lg\"\n                                  transition={{\n                                    type: \"spring\",\n                                    stiffness: 500,\n                                    damping: 30\n                                  }}\n                                />\n                              )}\n\n                              {/* Glow effect for active */}\n                              {isActive && (\n                                <div className=\"absolute inset-0 bg-gradient-to-r from-brand-blue/20 to-brand-cyan/20 blur-xl opacity-50\" />\n                              )}\n                            </Link>\n                          </motion.div>\n                        )\n                      }\n                      return null\n                    })}\n                  </div>\n                </div>\n              ))}\n            </nav>\n            \n            {/* Système (Paramètres & Déconnexion) Ultra-Premium */}\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: 0.6, duration: 0.5, ease: [0.16, 1, 0.3, 1] }}\n              className=\"relative z-10 px-4 mt-auto pt-6 space-y-2\"\n            >\n              {/* Séparateur décoratif */}\n              <div className=\"relative mb-4\">\n                <div className=\"absolute inset-0 flex items-center\">\n                  <div className=\"w-full border-t-2 border-gradient-to-r from-transparent via-gray-200 to-transparent\"></div>\n                </div>\n                <div className=\"relative flex justify-center\">\n                  <motion.div\n                    className=\"px-3 bg-gradient-to-r from-brand-blue to-brand-cyan rounded-full p-0.5\"\n                    animate={{\n                      scale: [1, 1.05, 1],\n                    }}\n                    transition={{\n                      duration: 3,\n                      repeat: Infinity,\n                      ease: \"easeInOut\"\n                    }}\n                  >\n                    <div className=\"bg-white px-2 py-0.5 rounded-full\">\n                      <span className=\"text-[9px] font-bold text-transparent bg-clip-text bg-gradient-to-r from-brand-blue to-brand-cyan uppercase tracking-widest\">Système</span>\n                    </div>\n                  </motion.div>\n                </div>\n              </div>\n\n              <motion.div whileHover={{ x: 4 }}>\n                <Link\n                  href=\"/dashboard/settings\"\n                  className={cn(\n                    'group relative flex items-center px-4 py-3 text-sm font-semibold rounded-xl overflow-hidden',\n                    'transition-all duration-300',\n                    pathname?.startsWith('/dashboard/settings')\n                      ? 'bg-gradient-to-br from-gray-700 to-gray-800 text-white shadow-xl shadow-gray-700/30'\n                      : 'text-gray-700 hover:bg-white hover:text-gray-900 hover:shadow-lg'\n                  )}\n                >\n                  {/* Shine effect */}\n                  <motion.div\n                    className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent\"\n                    initial={{ x: '-100%' }}\n                    whileHover={{ x: '100%' }}\n                    transition={{ duration: 0.6, ease: \"easeInOut\" }}\n                  />\n\n                  <motion.div\n                    className={cn(\n                      'p-1.5 rounded-lg mr-3 relative z-10',\n                      pathname?.startsWith('/dashboard/settings')\n                        ? 'bg-white/20'\n                        : 'bg-gray-100 group-hover:bg-gray-200'\n                    )}\n                    whileHover={{ rotate: 90, scale: 1.1 }}\n                    transition={{ type: \"spring\", stiffness: 400, damping: 10 }}\n                  >\n                    <Settings\n                      className={cn(\n                        'flex-shrink-0 h-4 w-4 transition-colors',\n                        pathname?.startsWith('/dashboard/settings')\n                          ? 'text-white'\n                          : 'text-gray-500 group-hover:text-gray-700'\n                      )}\n                    />\n                  </motion.div>\n                  <span className=\"relative z-10 tracking-tight\">{t('common.settings')}</span>\n                </Link>\n              </motion.div>\n\n              <motion.div whileHover={{ x: 4 }}>\n                <motion.button\n                  onClick={() => logout()}\n                  whileHover={{ scale: 1.02 }}\n                  whileTap={{ scale: 0.98 }}\n                  className=\"group relative flex items-center w-full px-4 py-3 text-sm font-semibold text-gray-700 rounded-xl hover:bg-gradient-to-br hover:from-red-50 hover:to-red-100 hover:text-red-600 hover:shadow-lg transition-all duration-300 overflow-hidden\"\n                >\n                  {/* Shine effect */}\n                  <motion.div\n                    className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent\"\n                    initial={{ x: '-100%' }}\n                    whileHover={{ x: '100%' }}\n                    transition={{ duration: 0.6, ease: \"easeInOut\" }}\n                  />\n\n                  <motion.div\n                    className=\"p-1.5 rounded-lg mr-3 bg-gray-100 group-hover:bg-red-100 transition-colors relative z-10\"\n                    whileHover={{ rotate: -15, scale: 1.1 }}\n                    transition={{ type: \"spring\", stiffness: 400, damping: 10 }}\n                  >\n                    <LogOut className=\"flex-shrink-0 h-4 w-4 text-gray-500 group-hover:text-red-500 transition-colors\" />\n                  </motion.div>\n                  <span className=\"relative z-10 tracking-tight\">{t('common.logout')}</span>\n                </motion.button>\n              </motion.div>\n            </motion.div>\n          </div>\n        </motion.div>\n      </div>\n    </div>\n  )\n}\n\n","'use client'\n\nimport React, { useState, useEffect } from 'react'\nimport Link from 'next/link'\nimport { usePathname } from 'next/navigation'\nimport { cn } from '@/lib/utils'\nimport {\n  LayoutDashboard,\n  Users,\n  BookOpen,\n  CreditCard,\n  FileText,\n  ClipboardList,\n  Settings,\n  LogOut,\n  Library,\n  GraduationCap,\n  FileCheck,\n  ChevronDown,\n  ChevronRight,\n  BookMarked,\n  Calendar,\n  Sparkles,\n  X,\n  Menu,\n} from 'lucide-react'\nimport { useAuth } from '@/lib/hooks/use-auth'\nimport { motion, AnimatePresence } from '@/components/ui/motion'\nimport { Button } from '@/components/ui/button'\n\ntype NavigationItem =\n  | {\n      name: string\n      href: string\n      icon: React.ComponentType<{ className?: string }>\n    }\n  | {\n      name: string\n      icon: React.ComponentType<{ className?: string }>\n      children: Array<{\n        name: string\n        href: string\n        icon: React.ComponentType<{ className?: string }>\n      }>\n    }\n\nconst navigation: NavigationItem[] = [\n  { name: 'Dashboard', href: '/dashboard', icon: LayoutDashboard },\n  { name: 'Élèves', href: '/dashboard/students', icon: Users },\n  {\n    name: 'Bibliothèque',\n    icon: Library,\n    children: [\n      { name: 'Programmes', href: '/dashboard/programs', icon: BookOpen },\n      { name: 'Formations', href: '/dashboard/formations', icon: BookMarked },\n      { name: 'Sessions', href: '/dashboard/sessions', icon: Calendar },\n      { name: 'E-learning', href: '/dashboard/elearning', icon: GraduationCap },\n      { name: 'Évaluations', href: '/dashboard/evaluations', icon: FileCheck },\n    ],\n  },\n  { name: 'Paiements', href: '/dashboard/payments', icon: CreditCard },\n  { name: 'Émargement', href: '/dashboard/attendance', icon: ClipboardList },\n  { name: 'Documents', href: '/dashboard/documents', icon: FileText },\n  { name: 'Paramètres', href: '/dashboard/settings', icon: Settings },\n]\n\ninterface MobileSidebarProps {\n  isOpen: boolean\n  onClose: () => void\n}\n\nexport function MobileSidebar({ isOpen, onClose }: MobileSidebarProps) {\n  const pathname = usePathname()\n  const { logout, user } = useAuth()\n  const [expandedMenus, setExpandedMenus] = useState<string[]>(() => {\n    if (pathname?.startsWith('/dashboard/programs') || \n        pathname?.startsWith('/dashboard/formations') ||\n        pathname?.startsWith('/dashboard/sessions') ||\n        pathname?.startsWith('/dashboard/elearning') || \n        pathname?.startsWith('/dashboard/evaluations')) {\n      return ['Bibliothèque']\n    }\n    return []\n  })\n\n  // Close sidebar when route changes\n  useEffect(() => {\n    onClose()\n  }, [pathname, onClose])\n\n  // Prevent body scroll when sidebar is open\n  useEffect(() => {\n    if (isOpen) {\n      document.body.style.overflow = 'hidden'\n    } else {\n      document.body.style.overflow = ''\n    }\n    return () => {\n      document.body.style.overflow = ''\n    }\n  }, [isOpen])\n\n  const toggleMenu = (menuName: string) => {\n    setExpandedMenus((prev) =>\n      prev.includes(menuName)\n        ? prev.filter((name) => name !== menuName)\n        : [...prev, menuName]\n    )\n  }\n\n  const isMenuExpanded = (menuName: string) => expandedMenus.includes(menuName)\n\n  const isActive = (href: string) => {\n    return pathname === href || pathname?.startsWith(href + '/')\n  }\n\n  const hasActiveChild = (children: Array<{ name: string; href: string; icon: React.ComponentType<{ className?: string }> }> | undefined) => {\n    if (!children) return false\n    return children.some((child: { name: string; href: string; icon: React.ComponentType<{ className?: string }> }) => {\n      return 'href' in child && isActive(child.href)\n    })\n  }\n\n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <>\n          {/* Backdrop */}\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            transition={{ duration: 0.2 }}\n            className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-40 md:hidden\"\n            onClick={onClose}\n          />\n\n          {/* Sidebar */}\n          <motion.div\n            initial={{ x: '-100%' }}\n            animate={{ x: 0 }}\n            exit={{ x: '-100%' }}\n            transition={{ type: 'spring', damping: 25, stiffness: 200 }}\n            className=\"fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-2xl md:hidden flex flex-col\"\n          >\n            {/* Header */}\n            <div className=\"flex items-center justify-between p-4 border-b border-gray-200\">\n              <div className=\"flex items-center space-x-2\">\n                <div className=\"relative\">\n                  <div className=\"absolute inset-0 bg-primary/20 blur-xl rounded-full\" />\n                  <Sparkles className=\"h-6 w-6 text-primary relative z-10\" />\n                </div>\n                <h1 className=\"text-xl font-bold bg-gradient-to-r from-primary via-blue-600 to-indigo-600 bg-clip-text text-transparent\">\n                  eduzen\n                </h1>\n              </div>\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                onClick={onClose}\n                className=\"h-10 w-10 rounded-full\"\n              >\n                <X className=\"h-5 w-5\" />\n              </Button>\n            </div>\n\n            {/* Navigation */}\n            <nav className=\"flex-1 overflow-y-auto p-4 space-y-2\">\n              {navigation.map((item, index) => {\n                if ('children' in item && item.children) {\n                  const hasActive = hasActiveChild(item.children)\n                  const isExpanded = isMenuExpanded(item.name)\n                  \n                  return (\n                    <div key={item.name}>\n                      <button\n                        onClick={() => toggleMenu(item.name)}\n                        className={cn(\n                          'w-full flex items-center justify-between px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200',\n                          hasActive\n                            ? 'bg-gradient-to-r from-primary to-blue-600 text-white shadow-lg shadow-primary/25'\n                            : 'text-gray-700 hover:bg-gray-100 active:bg-gray-200'\n                        )}\n                      >\n                        <div className=\"flex items-center space-x-3\">\n                          <item.icon className=\"h-5 w-5\" />\n                          <span>{item.name}</span>\n                        </div>\n                        <motion.div\n                          animate={{ rotate: isExpanded ? 180 : 0 }}\n                          transition={{ duration: 0.2 }}\n                        >\n                          <ChevronDown className=\"h-4 w-4\" />\n                        </motion.div>\n                      </button>\n\n                      <AnimatePresence>\n                        {isExpanded && (\n                          <motion.div\n                            initial={{ height: 0, opacity: 0 }}\n                            animate={{ height: 'auto', opacity: 1 }}\n                            exit={{ height: 0, opacity: 0 }}\n                            transition={{ duration: 0.2 }}\n                            className=\"overflow-hidden\"\n                          >\n                            <div className=\"pl-4 mt-2 space-y-1\">\n                              {item.children.map((child) => (\n                                <Link\n                                  key={child.href}\n                                  href={child.href}\n                                  className={cn(\n                                    'flex items-center space-x-3 px-4 py-2.5 rounded-lg text-sm transition-all duration-200',\n                                    isActive(child.href)\n                                      ? 'bg-primary/10 text-primary font-medium'\n                                      : 'text-gray-600 hover:bg-gray-50 active:bg-gray-100'\n                                  )}\n                                >\n                                  <child.icon className=\"h-4 w-4\" />\n                                  <span>{child.name}</span>\n                                </Link>\n                              ))}\n                            </div>\n                          </motion.div>\n                        )}\n                      </AnimatePresence>\n                    </div>\n                  )\n                }\n\n                if ('href' in item) {\n                  return (\n                    <Link\n                      key={item.href}\n                      href={item.href}\n                      className={cn(\n                        'flex items-center space-x-3 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200',\n                        isActive(item.href)\n                          ? 'bg-gradient-to-r from-primary to-blue-600 text-white shadow-lg shadow-primary/25'\n                          : 'text-gray-700 hover:bg-gray-100 active:bg-gray-200'\n                      )}\n                    >\n                      <item.icon className=\"h-5 w-5\" />\n                      <span>{item.name}</span>\n                    </Link>\n                  )\n                }\n                return null\n              })}\n            </nav>\n\n            {/* Footer */}\n            <div className=\"p-4 border-t border-gray-200 space-y-2\">\n              {user && (\n                <div className=\"px-4 py-2 text-sm text-gray-600\">\n                  <p className=\"font-medium\">{user.email}</p>\n                </div>\n              )}\n              <Button\n                variant=\"ghost\"\n                onClick={() => {\n                  logout()\n                  onClose()\n                }}\n                className=\"w-full justify-start text-gray-700 hover:bg-gray-100 hover:text-gray-900\"\n              >\n                <LogOut className=\"mr-3 h-4 w-4\" />\n                Déconnexion\n              </Button>\n            </div>\n          </motion.div>\n        </>\n      )}\n    </AnimatePresence>\n  )\n}\n\n","/**\n * Hook React pour gérer le localStorage de manière sûre\n * avec synchronisation entre onglets et gestion des erreurs\n */\n\n'use client'\n\nimport { useState, useEffect, useCallback } from 'react'\n\nexport function useLocalStorage<T>(\n  key: string,\n  initialValue: T\n): [T, (value: T | ((val: T) => T)) => void, () => void] {\n  // État pour stocker la valeur\n  const [storedValue, setStoredValue] = useState<T>(() => {\n    if (typeof window === 'undefined') {\n      return initialValue\n    }\n\n    try {\n      const item = window.localStorage.getItem(key)\n      return item ? JSON.parse(item) : initialValue\n    } catch (error) {\n      console.error(`Error reading localStorage key \"${key}\":`, error)\n      return initialValue\n    }\n  })\n\n  // Fonction pour mettre à jour la valeur\n  const setValue = useCallback(\n    (value: T | ((val: T) => T)) => {\n      try {\n        // Permettre la valeur d'être une fonction pour avoir la même API que useState\n        const valueToStore = value instanceof Function ? value(storedValue) : value\n\n        // Sauvegarder l'état\n        setStoredValue(valueToStore)\n\n        // Sauvegarder dans localStorage\n        if (typeof window !== 'undefined') {\n          window.localStorage.setItem(key, JSON.stringify(valueToStore))\n        }\n\n        // Déclencher un événement personnalisé pour synchroniser entre onglets\n        if (typeof window !== 'undefined') {\n          window.dispatchEvent(\n            new CustomEvent('localStorageChange', {\n              detail: { key, value: valueToStore },\n            })\n          )\n        }\n      } catch (error) {\n        console.error(`Error setting localStorage key \"${key}\":`, error)\n      }\n    },\n    [key, storedValue]\n  )\n\n  // Fonction pour supprimer la valeur\n  const removeValue = useCallback(() => {\n    try {\n      setStoredValue(initialValue)\n      if (typeof window !== 'undefined') {\n        window.localStorage.removeItem(key)\n        window.dispatchEvent(\n          new CustomEvent('localStorageChange', {\n            detail: { key, value: null },\n          })\n        )\n      }\n    } catch (error) {\n      console.error(`Error removing localStorage key \"${key}\":`, error)\n    }\n  }, [key, initialValue])\n\n  // Écouter les changements de localStorage (synchronisation entre onglets)\n  useEffect(() => {\n    if (typeof window === 'undefined') return\n\n    const handleStorageChange = (e: StorageEvent | CustomEvent) => {\n      if (e instanceof StorageEvent) {\n        if (e.key === key && e.newValue) {\n          try {\n            setStoredValue(JSON.parse(e.newValue))\n          } catch (error) {\n            console.error(`Error parsing localStorage value for key \"${key}\":`, error)\n          }\n        }\n      } else if (e instanceof CustomEvent && e.detail?.key === key) {\n        setStoredValue(e.detail.value)\n      }\n    }\n\n    // Écouter les événements Storage (changements depuis d'autres onglets)\n    window.addEventListener('storage', handleStorageChange)\n    // Écouter les événements personnalisés (changements depuis le même onglet)\n    window.addEventListener('localStorageChange', handleStorageChange as EventListener)\n\n    return () => {\n      window.removeEventListener('storage', handleStorageChange)\n      window.removeEventListener('localStorageChange', handleStorageChange as EventListener)\n    }\n  }, [key])\n\n  return [storedValue, setValue, removeValue]\n}\n\n\n\n","'use client'\n\nimport React, { useEffect, useState } from 'react'\nimport { useLocalStorage } from './use-local-storage'\nimport { createClient } from '@/lib/supabase/client'\nimport { useAuth } from './use-auth'\nimport { analytics } from '@/lib/utils/analytics'\n\ntype Theme = 'light' | 'dark' | 'system'\n\nexport function useTheme() {\n  const [theme, setThemeState] = useLocalStorage<Theme>('theme', 'system')\n  const [resolvedTheme, setResolvedTheme] = useState<'light' | 'dark'>('light')\n  const supabase = createClient()\n  const { user } = useAuth()\n\n  // Sauvegarder la préférence dans la base de données si l'utilisateur est connecté\n  const saveThemePreference = async (newTheme: Theme) => {\n    if (!user?.id) return\n\n    try {\n      await supabase\n        .from('users')\n        .update({ theme_preference: newTheme })\n        .eq('id', user.id)\n    } catch (error) {\n      console.error('Error saving theme preference:', error)\n    }\n  }\n\n  // Charger la préférence depuis la base de données au montage\n  useEffect(() => {\n    if (!user?.id) return\n\n    const loadThemePreference = async () => {\n      try {\n        const { data } = await supabase\n          .from('users')\n          .select('theme_preference')\n          .eq('id', user.id)\n          .single()\n\n        if (data?.theme_preference) {\n          setThemeState(data.theme_preference as Theme)\n        }\n      } catch (error) {\n        console.error('Error loading theme preference:', error)\n      }\n    }\n\n    loadThemePreference()\n  }, [user?.id, setThemeState, supabase])\n\n  useEffect(() => {\n    // Only run on client side\n    if (typeof window === 'undefined') return\n\n    // Get system preference\n    const systemTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'\n    \n    // Determine resolved theme\n    const resolved = theme === 'system' ? systemTheme : theme\n    setResolvedTheme(resolved)\n\n    // Apply theme to document\n    const root = document.documentElement\n    if (resolved === 'dark') {\n      root.classList.add('dark')\n    } else {\n      root.classList.remove('dark')\n    }\n\n    // Listen for system theme changes\n    const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)')\n    const handleChange = (e: MediaQueryListEvent) => {\n      if (theme === 'system') {\n        const newResolved = e.matches ? 'dark' : 'light'\n        setResolvedTheme(newResolved)\n        if (newResolved === 'dark') {\n          root.classList.add('dark')\n        } else {\n          root.classList.remove('dark')\n        }\n      }\n    }\n\n    mediaQuery.addEventListener('change', handleChange)\n    return () => mediaQuery.removeEventListener('change', handleChange)\n  }, [theme])\n\n  const updateTheme = (newTheme: Theme) => {\n    // Only run on client side\n    if (typeof window === 'undefined') return\n\n    setThemeState(newTheme)\n    saveThemePreference(newTheme)\n    \n    // Track le changement de thème\n    analytics.theme.changed(newTheme)\n\n    // Update resolved theme\n    if (newTheme === 'system') {\n      const systemTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'\n      setResolvedTheme(systemTheme)\n    } else {\n      setResolvedTheme(newTheme)\n    }\n\n    // Apply theme to document\n    const root = document.documentElement\n    if (newTheme === 'system') {\n      const systemTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'\n      if (systemTheme === 'dark') {\n        root.classList.add('dark')\n      } else {\n        root.classList.remove('dark')\n      }\n    } else {\n      if (newTheme === 'dark') {\n        root.classList.add('dark')\n      } else {\n        root.classList.remove('dark')\n      }\n    }\n  }\n\n  return {\n    theme,\n    resolvedTheme,\n    setTheme: updateTheme,\n    toggleTheme: () => {\n      const newTheme = resolvedTheme === 'dark' ? 'light' : 'dark'\n      updateTheme(newTheme)\n    },\n  }\n}\n\n","'use client'\n\nimport React from 'react'\nimport { Moon, Sun, Monitor } from 'lucide-react'\nimport { useTheme } from '@/lib/hooks/use-theme'\nimport { Button } from '@/components/ui/button'\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu'\nimport { motion } from '@/components/ui/motion'\n\nexport function ThemeToggle() {\n  const { theme, resolvedTheme, setTheme, toggleTheme } = useTheme()\n\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild>\n        <Button\n          variant=\"ghost\"\n          size=\"icon\"\n          className=\"h-10 w-10 rounded-xl min-touch-target touch-manipulation\"\n        >\n          <motion.div\n            animate={{ rotate: resolvedTheme === 'dark' ? 180 : 0 }}\n            transition={{ duration: 0.3 }}\n          >\n            {resolvedTheme === 'dark' ? (\n              <Moon className=\"h-5 w-5\" />\n            ) : (\n              <Sun className=\"h-5 w-5\" />\n            )}\n          </motion.div>\n          <span className=\"sr-only\">Changer le thème</span>\n        </Button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent align=\"end\" className=\"w-40\">\n        <DropdownMenuItem\n          onClick={() => setTheme('light')}\n          className=\"flex items-center gap-2 cursor-pointer\"\n        >\n          <Sun className=\"h-4 w-4\" />\n          <span>Clair</span>\n          {theme === 'light' && (\n            <motion.span\n              initial={{ scale: 0 }}\n              animate={{ scale: 1 }}\n              className=\"ml-auto h-2 w-2 rounded-full bg-primary\"\n            />\n          )}\n        </DropdownMenuItem>\n        <DropdownMenuItem\n          onClick={() => setTheme('dark')}\n          className=\"flex items-center gap-2 cursor-pointer\"\n        >\n          <Moon className=\"h-4 w-4\" />\n          <span>Sombre</span>\n          {theme === 'dark' && (\n            <motion.span\n              initial={{ scale: 0 }}\n              animate={{ scale: 1 }}\n              className=\"ml-auto h-2 w-2 rounded-full bg-primary\"\n            />\n          )}\n        </DropdownMenuItem>\n        <DropdownMenuItem\n          onClick={() => setTheme('system')}\n          className=\"flex items-center gap-2 cursor-pointer\"\n        >\n          <Monitor className=\"h-4 w-4\" />\n          <span>Système</span>\n          {theme === 'system' && (\n            <motion.span\n              initial={{ scale: 0 }}\n              animate={{ scale: 1 }}\n              className=\"ml-auto h-2 w-2 rounded-full bg-primary\"\n            />\n          )}\n        </DropdownMenuItem>\n      </DropdownMenuContent>\n    </DropdownMenu>\n  )\n}\n\n","/**\n * Hook React pour débouncer une valeur\n * Utile pour les recherches, les filtres, etc.\n */\n\n'use client'\n\nimport { useState, useEffect } from 'react'\n\nexport function useDebouncedValue<T>(value: T, delay: number = 300): T {\n  const [debouncedValue, setDebouncedValue] = useState<T>(value)\n\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      setDebouncedValue(value)\n    }, delay)\n\n    return () => {\n      clearTimeout(handler)\n    }\n  }, [value, delay])\n\n  return debouncedValue\n}\n\n\n\n","/**\n * Hook React pour détecter les clics en dehors d'un élément\n * Utile pour fermer les modals, dropdowns, etc.\n */\n\n'use client'\n\nimport { useEffect, useRef, RefObject } from 'react'\n\nexport function useClickOutside<T extends HTMLElement = HTMLElement>(\n  handler: () => void,\n  enabled: boolean = true\n): RefObject<T> {\n  const ref = useRef<T>(null)\n\n  useEffect(() => {\n    if (!enabled) return\n\n    const handleClickOutside = (event: MouseEvent | TouchEvent) => {\n      if (ref.current && !ref.current.contains(event.target as Node)) {\n        handler()\n      }\n    }\n\n    // Ajouter les écouteurs d'événements\n    document.addEventListener('mousedown', handleClickOutside)\n    document.addEventListener('touchstart', handleClickOutside)\n\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside)\n      document.removeEventListener('touchstart', handleClickOutside)\n    }\n  }, [handler, enabled])\n\n  return ref\n}\n\n\n\n","'use client'\n\nimport { useState, useEffect, useRef } from 'react'\nimport { useQuery } from '@tanstack/react-query'\nimport { useRouter } from 'next/navigation'\nimport { Search, Users, BookOpen, FileText, MessageSquare, Loader2, X } from 'lucide-react'\nimport { cn } from '@/lib/utils'\nimport { searchService, type SearchResult } from '@/lib/services/search.service'\nimport { useAuth } from '@/lib/hooks/use-auth'\nimport { useDebouncedValue } from '@/lib/hooks/use-debounced-value'\nimport { useClickOutside } from '@/lib/hooks/use-click-outside'\nimport { motion, AnimatePresence } from '@/components/ui/motion'\nimport { highlightText } from '@/lib/utils/highlight'\nimport { analytics } from '@/lib/utils/analytics'\n\ninterface GlobalSearchProps {\n  className?: string\n}\n\nconst typeIcons = {\n  student: Users,\n  session: BookOpen,\n  document: FileText,\n  message: MessageSquare,\n}\n\nconst typeLabels = {\n  student: 'Étudiant',\n  session: 'Session',\n  document: 'Document',\n  message: 'Message',\n}\n\nexport function GlobalSearch({ className }: GlobalSearchProps) {\n  const { user } = useAuth()\n  const router = useRouter()\n  const [query, setQuery] = useState('')\n  const [isOpen, setIsOpen] = useState(false)\n  const [isFocused, setIsFocused] = useState(false)\n  const debouncedQuery = useDebouncedValue(query, 300)\n  const searchRef = useRef<HTMLDivElement>(null)\n\n  useClickOutside(searchRef, () => setIsOpen(false))\n\n  const { data: results, isLoading } = useQuery({\n    queryKey: ['global-search', debouncedQuery, user?.organization_id, user?.id],\n    queryFn: async () => {\n      if (!debouncedQuery || debouncedQuery.length < 2 || !user?.organization_id) {\n        return []\n      }\n      const searchResults = await searchService.searchGlobal(\n        debouncedQuery,\n        user.organization_id,\n        user.id\n      )\n      \n      // Track l'événement de recherche\n      if (searchResults.length > 0) {\n        analytics.search.performed(debouncedQuery, searchResults.length)\n      }\n      \n      return searchResults\n    },\n    enabled: debouncedQuery.length >= 2 && !!user?.organization_id,\n    staleTime: 30000, // Cache 30 secondes\n  })\n\n  useEffect(() => {\n    if (query.length >= 2 && isFocused) {\n      setIsOpen(true)\n    } else if (query.length === 0) {\n      setIsOpen(false)\n    }\n  }, [query, isFocused])\n\n  const handleSelect = (result: SearchResult) => {\n    router.push(result.url)\n    setQuery('')\n    setIsOpen(false)\n    setIsFocused(false)\n  }\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Escape') {\n      setIsOpen(false)\n      setIsFocused(false)\n    } else if (e.key === 'Enter' && results && results.length > 0) {\n      handleSelect(results[0])\n    }\n  }\n\n  return (\n    <div ref={searchRef} className={cn('relative flex-1 max-w-xl', className)}>\n      <div className=\"relative\">\n        <div className=\"absolute left-3 md:left-4 top-1/2 -translate-y-1/2 pointer-events-none\">\n          {isLoading ? (\n            <Loader2 className=\"h-4 w-4 md:h-5 md:w-5 animate-spin text-text-tertiary\" />\n          ) : (\n            <Search className=\"h-4 w-4 md:h-5 md:w-5 text-text-tertiary\" />\n          )}\n        </div>\n        <input\n          type=\"text\"\n          placeholder=\"Rechercher des étudiants, sessions, documents...\"\n          value={query}\n          onChange={(e) => setQuery(e.target.value)}\n          onFocus={() => setIsFocused(true)}\n          onBlur={() => {\n            // Délai pour permettre le clic sur les résultats\n            setTimeout(() => setIsFocused(false), 200)\n          }}\n          onKeyDown={handleKeyDown}\n          className={cn(\n            'w-full pl-10 md:pl-12 pr-10 py-2.5 md:py-3 rounded-xl border-2 transition-all duration-300 text-sm md:text-base',\n            'focus:outline-none focus:ring-2 focus:ring-brand-cyan/30',\n            'bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm text-text-primary placeholder:text-text-placeholder',\n            isFocused || isOpen\n              ? 'border-brand-cyan shadow-lg shadow-brand-cyan/20 bg-white dark:bg-gray-800'\n              : 'border-white/30 dark:border-gray-700/30 hover:border-white/50 dark:hover:border-gray-700/50'\n          )}\n        />\n        {query && (\n          <button\n            onClick={() => {\n              setQuery('')\n              setIsOpen(false)\n            }}\n            className=\"absolute right-3 top-1/2 -translate-y-1/2 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n          >\n            <X className=\"h-4 w-4 text-text-tertiary\" />\n          </button>\n        )}\n      </div>\n\n      <AnimatePresence>\n        {isOpen && results && results.length > 0 && (\n          <motion.div\n            initial={{ opacity: 0, y: -10 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: -10 }}\n            transition={{ duration: 0.2 }}\n            className=\"absolute top-full mt-2 w-full bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-gray-200 dark:border-gray-700 max-h-96 overflow-y-auto z-50\"\n          >\n            {results.map((result) => {\n              const Icon = typeIcons[result.type]\n              const titleParts = highlightText(result.title, debouncedQuery)\n              const descriptionParts = result.description\n                ? highlightText(result.description, debouncedQuery)\n                : null\n\n              return (\n                <button\n                  key={`${result.type}-${result.id}`}\n                  onClick={() => handleSelect(result)}\n                  className=\"w-full px-4 py-3 flex items-start gap-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-left first:rounded-t-xl last:rounded-b-xl\"\n                >\n                  <Icon className=\"h-5 w-5 text-brand-cyan mt-0.5 flex-shrink-0\" />\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-center gap-2\">\n                      <p className=\"font-medium text-text-primary truncate\">\n                        {titleParts.map((part, i) =>\n                          part.highlight ? (\n                            <mark\n                              key={i}\n                              className=\"bg-brand-cyan/20 text-brand-cyan dark:bg-brand-cyan/30 dark:text-brand-cyan font-semibold px-0.5 rounded\"\n                            >\n                              {part.text}\n                            </mark>\n                          ) : (\n                            <span key={i}>{part.text}</span>\n                          )\n                        )}\n                      </p>\n                      <span className=\"text-xs text-text-tertiary bg-gray-100 dark:bg-gray-700 px-2 py-0.5 rounded flex-shrink-0\">\n                        {typeLabels[result.type]}\n                      </span>\n                    </div>\n                    {descriptionParts && (\n                      <p className=\"text-sm text-text-tertiary mt-1 truncate\">\n                        {descriptionParts.map((part, i) =>\n                          part.highlight ? (\n                            <mark\n                              key={i}\n                              className=\"bg-brand-cyan/20 text-brand-cyan dark:bg-brand-cyan/30 dark:text-brand-cyan font-semibold px-0.5 rounded\"\n                            >\n                              {part.text}\n                            </mark>\n                          ) : (\n                            <span key={i}>{part.text}</span>\n                          )\n                        )}\n                      </p>\n                    )}\n                  </div>\n                </button>\n              )\n            })}\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {isOpen && query.length >= 2 && !isLoading && (!results || results.length === 0) && (\n        <motion.div\n          initial={{ opacity: 0, y: -10 }}\n          animate={{ opacity: 1, y: 0 }}\n          exit={{ opacity: 0, y: -10 }}\n          className=\"absolute top-full mt-2 w-full bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-gray-200 dark:border-gray-700 p-4 z-50\"\n        >\n          <p className=\"text-sm text-text-tertiary text-center\">\n            Aucun résultat trouvé pour \"{query}\"\n          </p>\n        </motion.div>\n      )}\n    </div>\n  )\n}\n\n","'use client'\n\nimport { useState } from 'react'\nimport { useMutation } from '@tanstack/react-query'\nimport { useAuth } from '@/lib/hooks/use-auth'\nimport { feedbackService } from '@/lib/services/feedback.service'\nimport { useToast } from '@/components/ui/toast'\nimport { Button } from '@/components/ui/button'\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Textarea } from '@/components/ui/textarea'\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select-shadcn'\nimport { MessageSquare, X, Upload, Image as ImageIcon } from 'lucide-react'\nimport { createClient } from '@/lib/supabase/client'\nimport type { FeedbackType } from '@/lib/services/feedback.service'\n\ninterface FeedbackButtonProps {\n  variant?: 'default' | 'outline' | 'ghost'\n  size?: 'default' | 'sm' | 'lg' | 'icon'\n  className?: string\n}\n\nexport function FeedbackButton({ variant = 'outline', size = 'default', className }: FeedbackButtonProps) {\n  const { user } = useAuth()\n  const { addToast } = useToast()\n  const [isOpen, setIsOpen] = useState(false)\n  const [feedbackType, setFeedbackType] = useState<FeedbackType>('improvement')\n  const [title, setTitle] = useState('')\n  const [description, setDescription] = useState('')\n  const [category, setCategory] = useState('')\n  const [screenshot, setScreenshot] = useState<File | null>(null)\n  const [screenshotUrl, setScreenshotUrl] = useState<string | null>(null)\n  const supabase = createClient()\n\n  const createFeedbackMutation = useMutation({\n    mutationFn: async () => {\n      if (!user?.organization_id) {\n        throw new Error('Organisation non trouvée')\n      }\n\n      let uploadedScreenshotUrl: string | null = null\n\n      // Upload screenshot si présent\n      if (screenshot) {\n        const fileExt = screenshot.name.split('.').pop()\n        const fileName = `feedback-${Date.now()}.${fileExt}`\n        const filePath = `feedback/${user.organization_id}/${fileName}`\n\n        const { data: uploadData, error: uploadError } = await supabase.storage\n          .from('documents')\n          .upload(filePath, screenshot, {\n            cacheControl: '3600',\n            upsert: false,\n          })\n\n        if (uploadError) {\n          console.error('Erreur upload screenshot:', uploadError)\n        } else {\n          const { data: urlData } = supabase.storage\n            .from('documents')\n            .getPublicUrl(filePath)\n          uploadedScreenshotUrl = urlData.publicUrl\n        }\n      }\n\n      return feedbackService.create({\n        organizationId: user.organization_id,\n        userId: user.id,\n        feedbackType,\n        category: category || undefined,\n        title,\n        description,\n        pageUrl: typeof window !== 'undefined' ? window.location.href : undefined,\n        userAgent: typeof window !== 'undefined' ? window.navigator.userAgent : undefined,\n        screenshotUrl: uploadedScreenshotUrl || undefined,\n      })\n    },\n    onSuccess: () => {\n      addToast({\n        type: 'success',\n        title: 'Feedback envoyé',\n        description: 'Merci pour votre retour ! Nous examinerons votre demande rapidement.',\n      })\n      setIsOpen(false)\n      setTitle('')\n      setDescription('')\n      setCategory('')\n      setScreenshot(null)\n      setScreenshotUrl(null)\n    },\n    onError: (error: Error) => {\n      addToast({\n        type: 'error',\n        title: 'Erreur',\n        description: error.message || 'Une erreur est survenue lors de l\\'envoi du feedback.',\n      })\n    },\n  })\n\n  const handleScreenshotChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0]\n    if (file) {\n      if (file.size > 5 * 1024 * 1024) {\n        addToast({\n          type: 'warning',\n          title: 'Fichier trop volumineux',\n          description: 'La capture d\\'écran ne doit pas dépasser 5 MB.',\n        })\n        return\n      }\n\n      setScreenshot(file)\n      const reader = new FileReader()\n      reader.onloadend = () => {\n        setScreenshotUrl(reader.result as string)\n      }\n      reader.readAsDataURL(file)\n    }\n  }\n\n  const handleRemoveScreenshot = () => {\n    setScreenshot(null)\n    setScreenshotUrl(null)\n  }\n\n  return (\n    <>\n      <Button\n        variant={variant}\n        size={size}\n        onClick={() => setIsOpen(true)}\n        className={className}\n      >\n        <MessageSquare className=\"mr-2 h-4 w-4\" />\n        Feedback\n      </Button>\n\n      <Dialog open={isOpen} onOpenChange={setIsOpen}>\n        <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>Envoyer un feedback</DialogTitle>\n            <DialogDescription>\n              Partagez vos idées, signalez un bug ou posez une question. Votre avis nous aide à améliorer l'application.\n            </DialogDescription>\n          </DialogHeader>\n\n          <div className=\"space-y-4 py-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"feedback-type\">Type de feedback</Label>\n              <Select value={feedbackType} onValueChange={(value) => setFeedbackType(value as FeedbackType)}>\n                <SelectTrigger id=\"feedback-type\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"bug\">🐛 Bug / Problème</SelectItem>\n                  <SelectItem value=\"feature_request\">✨ Demande de fonctionnalité</SelectItem>\n                  <SelectItem value=\"improvement\">💡 Amélioration</SelectItem>\n                  <SelectItem value=\"question\">❓ Question</SelectItem>\n                  <SelectItem value=\"other\">📝 Autre</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"category\">Catégorie (optionnel)</Label>\n              <Input\n                id=\"category\"\n                placeholder=\"Ex: Messagerie, Paiements, Documents...\"\n                value={category}\n                onChange={(e) => setCategory(e.target.value)}\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"title\">Titre *</Label>\n              <Input\n                id=\"title\"\n                placeholder=\"Résumé court de votre feedback\"\n                value={title}\n                onChange={(e) => setTitle(e.target.value)}\n                required\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"description\">Description *</Label>\n              <Textarea\n                id=\"description\"\n                placeholder=\"Décrivez en détail votre feedback, bug ou demande...\"\n                value={description}\n                onChange={(e) => setDescription(e.target.value)}\n                rows={6}\n                required\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"screenshot\">Capture d'écran (optionnel)</Label>\n              {screenshotUrl ? (\n                <div className=\"relative\">\n                  <img\n                    src={screenshotUrl}\n                    alt=\"Screenshot preview\"\n                    className=\"w-full rounded-lg border border-gray-200 max-h-64 object-contain\"\n                  />\n                  <Button\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    onClick={handleRemoveScreenshot}\n                    className=\"absolute top-2 right-2\"\n                  >\n                    <X className=\"h-4 w-4\" />\n                  </Button>\n                </div>\n              ) : (\n                <div className=\"flex items-center gap-2\">\n                  <Input\n                    id=\"screenshot\"\n                    type=\"file\"\n                    accept=\"image/*\"\n                    onChange={handleScreenshotChange}\n                    className=\"hidden\"\n                  />\n                  <Label\n                    htmlFor=\"screenshot\"\n                    className=\"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50\"\n                  >\n                    <ImageIcon className=\"h-4 w-4\" />\n                    Ajouter une capture d'écran\n                  </Label>\n                </div>\n              )}\n            </div>\n          </div>\n\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setIsOpen(false)}>\n              Annuler\n            </Button>\n            <Button\n              onClick={() => createFeedbackMutation.mutate()}\n              disabled={!title || !description || createFeedbackMutation.isPending}\n            >\n              {createFeedbackMutation.isPending ? 'Envoi...' : 'Envoyer le feedback'}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </>\n  )\n}\n\n","/**\n * Composant Badge de notifications non lues\n * Affiche le nombre de notifications non lues avec un badge\n */\n\n'use client'\n\nimport { Bell } from 'lucide-react'\nimport { useUnreadNotificationsCount } from '@/lib/hooks/use-notifications'\nimport { Button } from '@/components/ui/button'\nimport { cn } from '@/lib/utils'\n\ninterface NotificationBadgeProps {\n  onClick?: () => void\n  className?: string\n  showCount?: boolean\n}\n\nexport function NotificationBadge({ onClick, className, showCount = true }: NotificationBadgeProps) {\n  const unreadCount = useUnreadNotificationsCount()\n\n  return (\n    <Button\n      variant=\"ghost\"\n      size=\"icon\"\n      onClick={onClick}\n      className={cn('relative', className)}\n      aria-label={`Notifications${unreadCount > 0 ? ` (${unreadCount} non lues)` : ''}`}\n    >\n      <Bell className=\"h-5 w-5\" />\n      {showCount && unreadCount > 0 && (\n        <span className=\"absolute -top-1 -right-1 flex h-5 w-5 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white\">\n          {unreadCount > 99 ? '99+' : unreadCount}\n        </span>\n      )}\n    </Button>\n  )\n}\n\n\n\n","/**\n * Composant ScrollArea pour les zones scrollables\n * Version simple sans dépendance externe\n */\n\n'use client'\n\nimport * as React from 'react'\nimport { cn } from '@/lib/utils'\n\ninterface ScrollAreaProps extends React.HTMLAttributes<HTMLDivElement> {\n  children: React.ReactNode\n}\n\nconst ScrollArea = React.forwardRef<HTMLDivElement, ScrollAreaProps>(\n  ({ className, children, ...props }, ref) => (\n    <div\n      ref={ref}\n      className={cn('relative overflow-auto', className)}\n      {...props}\n    >\n      {children}\n    </div>\n  )\n)\nScrollArea.displayName = 'ScrollArea'\n\nexport { ScrollArea }\n\n","/**\n * Composant Centre de notifications\n * Affiche la liste des notifications avec possibilité de les marquer comme lues\n */\n\n'use client'\n\nimport { useState } from 'react'\nimport { X, Check, CheckCheck, Trash2, ExternalLink } from 'lucide-react'\nimport { useNotifications } from '@/lib/hooks/use-notifications'\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog'\nimport { Button } from '@/components/ui/button'\nimport { ScrollArea } from '@/components/ui/scroll-area'\nimport { Badge } from '@/components/ui/badge'\nimport { cn } from '@/lib/utils'\nimport { formatRelativeTime } from '@/lib/utils/format'\nimport Link from 'next/link'\nimport type { Notification } from '@/lib/services/notification.service'\n\ninterface NotificationCenterProps {\n  open: boolean\n  onOpenChange: (open: boolean) => void\n}\n\nconst notificationTypeColors = {\n  info: 'bg-blue-500',\n  success: 'bg-green-500',\n  warning: 'bg-yellow-500',\n  error: 'bg-red-500',\n  message: 'bg-purple-500',\n  payment: 'bg-indigo-500',\n  attendance: 'bg-teal-500',\n  grade: 'bg-pink-500',\n  document: 'bg-orange-500',\n  system: 'bg-gray-500',\n}\n\nconst notificationTypeLabels = {\n  info: 'Information',\n  success: 'Succès',\n  warning: 'Avertissement',\n  error: 'Erreur',\n  message: 'Message',\n  payment: 'Paiement',\n  attendance: 'Présence',\n  grade: 'Note',\n  document: 'Document',\n  system: 'Système',\n}\n\nexport function NotificationCenter({ open, onOpenChange }: NotificationCenterProps) {\n  const {\n    notifications,\n    unreadCount,\n    isLoading,\n    markAsRead,\n    markAllAsRead,\n    deleteNotification,\n    isMarkingAllAsRead,\n  } = useNotifications({ limit: 50 })\n\n  const [filter, setFilter] = useState<'all' | 'unread'>('all')\n\n  const filteredNotifications = notifications.filter((notification) => {\n    if (filter === 'unread') {\n      return !notification.read_at\n    }\n    return true\n  })\n\n  const handleNotificationClick = (notification: Notification) => {\n    if (!notification.read_at) {\n      markAsRead(notification.id)\n    }\n  }\n\n  const handleMarkAllAsRead = () => {\n    markAllAsRead()\n  }\n\n  const handleDelete = (e: React.MouseEvent, notificationId: string) => {\n    e.stopPropagation()\n    deleteNotification(notificationId)\n  }\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-[500px]\">\n        <DialogHeader>\n          <div className=\"flex items-center justify-between\">\n            <DialogTitle>Notifications</DialogTitle>\n            <div className=\"flex items-center gap-2\">\n              {unreadCount > 0 && (\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={handleMarkAllAsRead}\n                  disabled={isMarkingAllAsRead}\n                  className=\"text-xs\"\n                >\n                  <CheckCheck className=\"mr-1 h-3 w-3\" />\n                  Tout marquer comme lu\n                </Button>\n              )}\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                onClick={() => onOpenChange(false)}\n                className=\"h-6 w-6\"\n              >\n                <X className=\"h-4 w-4\" />\n              </Button>\n            </div>\n          </div>\n        </DialogHeader>\n\n        {/* Filtres */}\n        <div className=\"flex gap-2 border-b pb-2\">\n          <Button\n            variant={filter === 'all' ? 'default' : 'ghost'}\n            size=\"sm\"\n            onClick={() => setFilter('all')}\n            className=\"text-xs\"\n          >\n            Toutes ({notifications.length})\n          </Button>\n          <Button\n            variant={filter === 'unread' ? 'default' : 'ghost'}\n            size=\"sm\"\n            onClick={() => setFilter('unread')}\n            className=\"text-xs\"\n          >\n            Non lues ({unreadCount})\n          </Button>\n        </div>\n\n        {/* Liste des notifications */}\n        <ScrollArea className=\"h-[500px]\">\n          {isLoading ? (\n            <div className=\"flex items-center justify-center py-8\">\n              <div className=\"text-sm text-muted-foreground\">Chargement...</div>\n            </div>\n          ) : filteredNotifications.length === 0 ? (\n            <div className=\"flex flex-col items-center justify-center py-8\">\n              <div className=\"text-sm text-muted-foreground\">\n                {filter === 'unread' ? 'Aucune notification non lue' : 'Aucune notification'}\n              </div>\n            </div>\n          ) : (\n            <div className=\"space-y-1\">\n              {filteredNotifications.map((notification) => (\n                <div\n                  key={notification.id}\n                  className={cn(\n                    'group relative rounded-lg border p-3 transition-colors hover:bg-accent',\n                    !notification.read_at && 'bg-accent/50'\n                  )}\n                  onClick={() => handleNotificationClick(notification)}\n                >\n                  <div className=\"flex items-start gap-3\">\n                    {/* Indicateur de type */}\n                    <div\n                      className={cn(\n                        'mt-1 h-2 w-2 rounded-full',\n                        notificationTypeColors[notification.type]\n                      )}\n                    />\n\n                    {/* Contenu */}\n                    <div className=\"flex-1 space-y-1\">\n                      <div className=\"flex items-start justify-between gap-2\">\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center gap-2\">\n                            <h4 className=\"text-sm font-medium\">{notification.title}</h4>\n                            <Badge variant=\"outline\" className=\"text-xs\">\n                              {notificationTypeLabels[notification.type]}\n                            </Badge>\n                          </div>\n                          <p className=\"text-sm text-muted-foreground\">{notification.message}</p>\n                        </div>\n                        <Button\n                          variant=\"ghost\"\n                          size=\"icon\"\n                          className=\"h-6 w-6 opacity-0 group-hover:opacity-100\"\n                          onClick={(e) => handleDelete(e, notification.id)}\n                        >\n                          <Trash2 className=\"h-3 w-3\" />\n                        </Button>\n                      </div>\n\n                      {/* Métadonnées */}\n                      <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\n                        <span>{formatRelativeTime(notification.created_at)}</span>\n                        {notification.link && (\n                          <Link\n                            href={notification.link}\n                            onClick={(e) => e.stopPropagation()}\n                            className=\"flex items-center gap-1 text-primary hover:underline\"\n                          >\n                            Voir <ExternalLink className=\"h-3 w-3\" />\n                          </Link>\n                        )}\n                      </div>\n                    </div>\n\n                    {/* Indicateur non lu */}\n                    {!notification.read_at && (\n                      <div className=\"absolute right-2 top-2\">\n                        <div className=\"h-2 w-2 rounded-full bg-primary\" />\n                      </div>\n                    )}\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </ScrollArea>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\n\n\n","function t(t){return t}export{t as default};\n","'use client'\n\nimport { useState, useEffect } from 'react'\nimport { usePWA } from '@/lib/hooks/use-pwa'\nimport { Button } from '@/components/ui/button'\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog'\nimport { Download, X, Smartphone } from 'lucide-react'\n\nexport function InstallPrompt() {\n  const { isInstallable, isInstalled, install } = usePWA()\n  const [showPrompt, setShowPrompt] = useState(false)\n  const [dismissed, setDismissed] = useState(false)\n\n  useEffect(() => {\n    // Ne pas afficher si déjà installée ou si déjà rejetée\n    if (isInstalled || dismissed) {\n      return\n    }\n\n    // Vérifier si l'utilisateur a déjà rejeté\n    const dismissedAt = localStorage.getItem('pwa-install-dismissed')\n    if (dismissedAt) {\n      const dismissedDate = new Date(dismissedAt)\n      const daysSinceDismissed = (Date.now() - dismissedDate.getTime()) / (1000 * 60 * 60 * 24)\n      \n      // Réafficher après 7 jours\n      if (daysSinceDismissed < 7) {\n        return\n      }\n    }\n\n    // Afficher le prompt après un délai\n    if (isInstallable) {\n      const timer = setTimeout(() => {\n        setShowPrompt(true)\n      }, 3000) // Afficher après 3 secondes\n\n      return () => clearTimeout(timer)\n    }\n  }, [isInstallable, isInstalled, dismissed])\n\n  const handleInstall = async () => {\n    const success = await install()\n    if (success) {\n      setShowPrompt(false)\n    }\n  }\n\n  const handleDismiss = () => {\n    setShowPrompt(false)\n    setDismissed(true)\n    localStorage.setItem('pwa-install-dismissed', new Date().toISOString())\n  }\n\n  if (!showPrompt || isInstalled) {\n    return null\n  }\n\n  return (\n    <Dialog open={showPrompt} onOpenChange={setShowPrompt}>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <Smartphone className=\"h-5 w-5\" />\n            Installer EDUZEN\n          </DialogTitle>\n          <DialogDescription>\n            Installez EDUZEN sur votre appareil pour un accès rapide et une meilleure expérience.\n          </DialogDescription>\n        </DialogHeader>\n        <div className=\"space-y-4\">\n          <div className=\"space-y-2 text-sm text-muted-foreground\">\n            <p>✓ Accès rapide depuis l'écran d'accueil</p>\n            <p>✓ Fonctionne hors ligne</p>\n            <p>✓ Notifications push</p>\n            <p>✓ Expérience optimisée</p>\n          </div>\n          <div className=\"flex gap-2\">\n            <Button onClick={handleInstall} className=\"flex-1\">\n              <Download className=\"h-4 w-4 mr-2\" />\n              Installer\n            </Button>\n            <Button onClick={handleDismiss} variant=\"outline\">\n              <X className=\"h-4 w-4\" />\n            </Button>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  )\n}\n","function e(e){return{...e,localePrefix:(a=e.localePrefix,\"object\"==typeof a?a:{mode:a||\"always\"}),localeCookie:(o=e.localeCookie,!!(o??1)&&{name:\"NEXT_LOCALE\",sameSite:\"lax\",...\"object\"==typeof o&&o}),localeDetection:e.localeDetection??!0,alternateLinks:e.alternateLinks??!0};var o,a}export{e as receiveRoutingConfig};\n","import{useFormatter as r,useTranslations as t}from\"use-intl\";function o(r,t){return(...r)=>{try{return t(...r)}catch{throw new Error(void 0)}}}const n=o(0,t),e=o(0,r);export{e as useFormatter,n as useTranslations};\n","'use client'\n\nimport { useEffect } from 'react'\nimport { Sidebar } from '@/components/dashboard/sidebar'\nimport { Header } from '@/components/dashboard/header'\nimport { PageTransition } from '@/components/ui/page-transition'\nimport { InstallPrompt } from '@/components/pwa/install-prompt'\n\nexport default function DashboardLayout({\n  children,\n}: {\n  children: React.ReactNode\n}) {\n  // Gestion d'erreur globale pour les scripts externes (extensions de navigateur, etc.)\n  useEffect(() => {\n    const handleError = (event: ErrorEvent) => {\n      // Ignorer les erreurs provenant de scripts externes (extensions de navigateur)\n      if (\n        event.filename?.includes('frame.js') ||\n        event.filename?.includes('operationBanner') ||\n        event.filename?.includes('chrome-extension://') ||\n        event.filename?.includes('moz-extension://') ||\n        event.filename?.includes('safari-extension://')\n      ) {\n        // Ne pas afficher ces erreurs dans la console en production\n        if (process.env.NODE_ENV === 'production') {\n          event.preventDefault()\n          return false\n        }\n        // En développement, on les log mais on ne les affiche pas comme erreurs critiques\n        console.warn('Erreur ignorée depuis une extension de navigateur:', event.message, event.filename)\n        return false\n      }\n    }\n\n    const handleUnhandledRejection = (event: PromiseRejectionEvent) => {\n      // Ignorer les rejets de promesses provenant de scripts externes\n      const errorMessage = event.reason?.message || String(event.reason)\n      if (\n        errorMessage.includes('sendMessage') ||\n        errorMessage.includes('frame.js') ||\n        errorMessage.includes('operationBanner')\n      ) {\n        if (process.env.NODE_ENV === 'production') {\n          event.preventDefault()\n          return false\n        }\n        console.warn('Rejet de promesse ignoré depuis une extension:', errorMessage)\n        return false\n      }\n    }\n\n    window.addEventListener('error', handleError)\n    window.addEventListener('unhandledrejection', handleUnhandledRejection)\n\n    return () => {\n      window.removeEventListener('error', handleError)\n      window.removeEventListener('unhandledrejection', handleUnhandledRejection)\n    }\n  }, [])\n\n  // Enregistrer le Service Worker pour la PWA\n  useEffect(() => {\n    // En DEV, le Service Worker cause souvent des assets \"stale\" (features qui disparaissent / réapparaissent).\n    // On ne l'active qu'en production.\n    if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n      navigator.serviceWorker\n        .register('/sw.js')\n        .then((registration) => {\n          console.log('Service Worker registered:', registration)\n        })\n        .catch((error) => {\n          console.error('Service Worker registration failed:', error)\n        })\n    }\n  }, [])\n\n  // En DEV : désinscrire tout Service Worker déjà installé + purger le cache\n  useEffect(() => {\n    if (process.env.NODE_ENV === 'production') return\n    if (!('serviceWorker' in navigator)) return\n\n    navigator.serviceWorker.getRegistrations().then((regs) => {\n      regs.forEach((r) => r.unregister())\n    })\n\n    if ('caches' in window) {\n      caches.keys().then((keys) => {\n        keys.forEach((k) => caches.delete(k))\n      })\n    }\n  }, [])\n\n  return (\n    <div className=\"min-h-screen bg-bg-gray-50\">\n      <div className=\"flex\">\n        <Sidebar />\n        <div className=\"flex flex-col flex-1 overflow-hidden w-0 min-w-0\">\n          <Header />\n          <main className=\"flex-1 overflow-y-auto p-4 md:p-6 smooth-scroll-premium\">\n            <PageTransition>\n              {children}\n            </PageTransition>\n          </main>\n        </div>\n      </div>\n      <InstallPrompt />\n    </div>\n  )\n}\n","'use client'\n\nimport { useState } from 'react'\nimport { useLocale } from 'next-intl'\nimport { useRouter, usePathname } from '@/i18n/navigation'\nimport { Button } from '@/components/ui/button'\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu'\nimport { Globe } from 'lucide-react'\n\nconst languages = [\n  { code: 'fr', label: 'Français', flag: '🇫🇷' },\n  { code: 'en', label: 'English', flag: '🇬🇧' },\n]\n\nexport function LanguageSwitcher() {\n  const locale = useLocale()\n  const router = useRouter()\n  const pathname = usePathname()\n  const [isChanging, setIsChanging] = useState(false)\n\n  const currentLanguage = languages.find((lang) => lang.code === locale) || languages[0]\n\n  const handleLanguageChange = (newLocale: string) => {\n    if (newLocale === locale || isChanging) return\n    \n    setIsChanging(true)\n    // Utiliser le router de next-intl qui gère automatiquement le changement de locale\n    router.replace(pathname, { locale: newLocale })\n    \n    // Réinitialiser l'état après un court délai\n    setTimeout(() => {\n      setIsChanging(false)\n    }, 500)\n  }\n\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild>\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          className=\"gap-2\"\n          disabled={isChanging}\n        >\n          <Globe className=\"h-4 w-4\" />\n          <span className=\"hidden sm:inline\">{currentLanguage.flag} {currentLanguage.label}</span>\n          <span className=\"sm:hidden\">{currentLanguage.flag}</span>\n        </Button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent align=\"end\">\n        {languages.map((language) => (\n          <DropdownMenuItem\n            key={language.code}\n            onClick={() => handleLanguageChange(language.code)}\n            disabled={language.code === locale || isChanging}\n            className=\"cursor-pointer\"\n          >\n            <span className=\"mr-2\">{language.flag}</span>\n            {language.label}\n            {language.code === locale && (\n              <span className=\"ml-auto text-xs text-muted-foreground\">✓</span>\n            )}\n          </DropdownMenuItem>\n        ))}\n      </DropdownMenuContent>\n    </DropdownMenu>\n  )\n}\n\n","'use client'\n\nimport React from 'react'\nimport { useAuth } from '@/lib/hooks/use-auth'\nimport { User, ChevronDown, Settings, LogOut, Menu } from 'lucide-react'\nimport { motion, AnimatePresence } from '@/components/ui/motion'\nimport { useState, useRef, useEffect } from 'react'\nimport { cn } from '@/lib/utils'\nimport { Button } from '@/components/ui/button'\nimport { Avatar } from '@/components/ui/avatar'\nimport { MobileSidebar } from './mobile-sidebar'\nimport { ThemeToggle } from './theme-toggle'\nimport { GlobalSearch } from '@/components/search/global-search'\nimport { FeedbackButton } from '@/components/feedback/feedback-button'\nimport { NotificationBadge } from '@/components/notifications/notification-badge'\nimport { NotificationCenter } from '@/components/notifications/notification-center'\nimport { LanguageSwitcher } from '@/components/i18n/language-switcher'\n\ninterface HeaderProps {\n  onMenuClick?: () => void\n}\n\nexport function Header({ onMenuClick }: HeaderProps) {\n  const { user, logout } = useAuth()\n  const [isUserMenuOpen, setIsUserMenuOpen] = useState(false)\n  const [isMobileSidebarOpen, setIsMobileSidebarOpen] = useState(false)\n  const [isNotificationCenterOpen, setIsNotificationCenterOpen] = useState(false)\n  const userMenuRef = useRef<HTMLDivElement>(null)\n\n  // Close menu when clicking outside\n  useEffect(() => {\n    function handleClickOutside(event: MouseEvent) {\n      if (userMenuRef.current && !userMenuRef.current.contains(event.target as Node)) {\n        setIsUserMenuOpen(false)\n      }\n    }\n    document.addEventListener('mousedown', handleClickOutside)\n    return () => document.removeEventListener('mousedown', handleClickOutside)\n  }, [])\n\n  return (\n    <React.Fragment>\n      <MobileSidebar \n        isOpen={isMobileSidebarOpen} \n        onClose={() => setIsMobileSidebarOpen(false)} \n      />\n      <NotificationCenter \n        open={isNotificationCenterOpen} \n        onOpenChange={setIsNotificationCenterOpen} \n      />\n      <motion.header\n        initial={{ opacity: 0, y: -20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ duration: 0.3 }}\n        className=\"bg-bg-gray-50 border-b border-bg-gray-200 px-4 md:px-6 py-3 md:py-4 sticky top-0 z-30 shadow-sm\"\n      >\n        <div className=\"flex items-center justify-between gap-4\">\n          {/* Mobile Menu Button */}\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={() => setIsMobileSidebarOpen(true)}\n            className=\"md:hidden h-10 w-10 rounded-xl\"\n          >\n            <Menu className=\"h-5 w-5\" />\n          </Button>\n\n          {/* Search Premium - Recherche globale */}\n          <GlobalSearch />\n\n                   {/* Right Section */}\n                   <div className=\"flex items-center space-x-2 md:space-x-4\">\n                     {/* Feedback Button */}\n                     <FeedbackButton variant=\"ghost\" size=\"icon\" className=\"hidden md:flex\" />\n\n                     {/* Language Switcher */}\n                     <LanguageSwitcher />\n\n                     {/* Theme Toggle */}\n                     <ThemeToggle />\n\n                     {/* Notifications - Nouveau système de notifications */}\n                     <NotificationBadge onClick={() => setIsNotificationCenterOpen(true)} />\n\n          {/* User Menu Premium */}\n          <div className=\"relative\" ref={userMenuRef}>\n            <motion.button\n              whileHover={{ scale: 1.02 }}\n              whileTap={{ scale: 0.98 }}\n              onClick={() => setIsUserMenuOpen(!isUserMenuOpen)}\n              className=\"flex items-center space-x-3 px-3 py-2 rounded-xl hover:bg-bg-gray-100 transition-colors duration-200 min-touch-target touch-manipulation group\"\n            >\n              <div className=\"flex items-center space-x-3\">\n                <Avatar\n                  fallback={user?.full_name || 'Utilisateur'}\n                  userId={user?.id || 'default'}\n                  size=\"md\"\n                  variant=\"auto\"\n                  className=\"shadow-lg group-hover:shadow-xl transition-shadow duration-300 rounded-xl border-2 border-bg-gray-200\"\n                />\n                <div className=\"text-right hidden md:block\">\n                  <p className=\"text-sm font-medium text-text-primary\">{user?.full_name || 'Utilisateur'}</p>\n                  <p className=\"text-xs text-text-tertiary\">{user?.role || 'Rôle'}</p>\n                </div>\n              </div>\n              <ChevronDown\n                className={cn(\n                  \"h-4 w-4 text-text-tertiary transition-transform duration-200 hidden md:block\",\n                  isUserMenuOpen && \"rotate-180\"\n                )}\n              />\n            </motion.button>\n\n            {/* Dropdown Menu */}\n            <AnimatePresence>\n              {isUserMenuOpen && (\n                <motion.div\n                  initial={{ opacity: 0, y: -10, scale: 0.95 }}\n                  animate={{ opacity: 1, y: 0, scale: 1 }}\n                  exit={{ opacity: 0, y: -10, scale: 0.95 }}\n                  transition={{ duration: 0.2 }}\n                  className=\"absolute right-0 mt-2 w-56 rounded-xl bg-white shadow-xl border border-bg-gray-200 backdrop-blur-md overflow-hidden z-50\"\n                >\n                  {/* User Info */}\n                  <div className=\"px-4 py-3 bg-gradient-to-r from-brand-blue-ghost to-transparent border-b border-bg-gray-200\">\n                    <p className=\"text-sm font-semibold text-text-primary\">{user?.full_name || 'Utilisateur'}</p>\n                    <p className=\"text-xs text-text-tertiary mt-0.5\">{user?.email || ''}</p>\n                  </div>\n\n                  {/* Menu Items */}\n                  <div className=\"py-2\">\n                    <motion.button\n                      whileHover={{ x: 4 }}\n                      className=\"w-full flex items-center px-4 py-2.5 text-sm text-text-secondary hover:bg-bg-gray-100 transition-colors duration-200\"\n                    >\n                      <User className=\"h-4 w-4 mr-3 text-text-tertiary\" />\n                      Mon profil\n                    </motion.button>\n                    <motion.button\n                      whileHover={{ x: 4 }}\n                      className=\"w-full flex items-center px-4 py-2.5 text-sm text-text-secondary hover:bg-bg-gray-100 transition-colors duration-200\"\n                    >\n                      <Settings className=\"h-4 w-4 mr-3 text-text-tertiary\" />\n                      Paramètres\n                    </motion.button>\n                    <div className=\"border-t border-bg-gray-200 my-2\" />\n                    <motion.button\n                      whileHover={{ x: 4 }}\n                      onClick={() => logout()}\n                      className=\"w-full flex items-center px-4 py-2.5 text-sm text-danger-primary hover:bg-danger-bg transition-colors duration-200\"\n                    >\n                      <LogOut className=\"h-4 w-4 mr-3\" />\n                      Déconnexion\n                    </motion.button>\n                  </div>\n                </motion.div>\n              )}\n            </AnimatePresence>\n          </div>\n        </div>\n      </div>\n    </motion.header>\n    </React.Fragment>\n  )\n}\n","'use client'\n\nimport { motion, AnimatePresence } from '@/components/ui/motion'\nimport { usePathname } from 'next/navigation'\nimport { ReactNode } from 'react'\n\ninterface PageTransitionProps {\n  children: ReactNode\n}\n\nexport function PageTransition({ children }: PageTransitionProps) {\n  const pathname = usePathname()\n\n  return (\n    <AnimatePresence mode=\"wait\">\n      <motion.div\n        key={pathname}\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        exit={{ opacity: 0, y: -20 }}\n        transition={{\n          duration: 0.3,\n          ease: [0.16, 1, 0.3, 1], // Custom easing for premium feel\n        }}\n        className=\"w-full\"\n      >\n        {children}\n      </motion.div>\n    </AnimatePresence>\n  )\n}\n\n\n\n\n\n\n\n","'use client'\n\nimport { useEffect, useState } from 'react'\n\ninterface BeforeInstallPromptEvent extends Event {\n  prompt: () => Promise<void>\n  userChoice: Promise<{ outcome: 'accepted' | 'dismissed' }>\n}\n\nexport function usePWA() {\n  const [deferredPrompt, setDeferredPrompt] = useState<BeforeInstallPromptEvent | null>(null)\n  const [isInstallable, setIsInstallable] = useState(false)\n  const [isInstalled, setIsInstalled] = useState(false)\n  const [isStandalone, setIsStandalone] = useState(false)\n\n  useEffect(() => {\n    // Vérifier si l'app est déjà installée (mode standalone)\n    if (window.matchMedia('(display-mode: standalone)').matches) {\n      setIsInstalled(true)\n      setIsStandalone(true)\n    }\n\n    // Écouter l'événement beforeinstallprompt\n    const handleBeforeInstallPrompt = (e: Event) => {\n      e.preventDefault()\n      setDeferredPrompt(e as BeforeInstallPromptEvent)\n      setIsInstallable(true)\n    }\n\n    window.addEventListener('beforeinstallprompt', handleBeforeInstallPrompt)\n\n    // Écouter l'événement appinstalled\n    const handleAppInstalled = () => {\n      setIsInstalled(true)\n      setIsInstallable(false)\n      setDeferredPrompt(null)\n    }\n\n    window.addEventListener('appinstalled', handleAppInstalled)\n\n    return () => {\n      window.removeEventListener('beforeinstallprompt', handleBeforeInstallPrompt)\n      window.removeEventListener('appinstalled', handleAppInstalled)\n    }\n  }, [])\n\n  const install = async (): Promise<boolean> => {\n    if (!deferredPrompt) {\n      return false\n    }\n\n    try {\n      await deferredPrompt.prompt()\n      const { outcome } = await deferredPrompt.userChoice\n\n      if (outcome === 'accepted') {\n        setIsInstallable(false)\n        setDeferredPrompt(null)\n        return true\n      }\n\n      return false\n    } catch (error) {\n      console.error('Error installing PWA:', error)\n      return false\n    }\n  }\n\n  return {\n    isInstallable,\n    isInstalled,\n    isStandalone,\n    install,\n  }\n}\n","import*as r from\"react\";var a=r[\"use\".trim()];export{a as default};\n","import{useRouter as e,usePathname as t}from\"next/navigation\";import{useMemo as r}from\"react\";import{useLocale as o}from\"use-intl\";import n from\"../shared/createSharedNavigationFns.js\";import a from\"../shared/syncLocaleCookie.js\";import{getRoute as s}from\"../shared/utils.js\";import i from\"./useBasePathname.js\";function c(c){const{Link:u,config:m,getPathname:f,...h}=n(o,c);return{...h,Link:u,usePathname:function(){const e=i(m),t=o();return r((()=>e&&m.pathnames?s(t,e,m.pathnames):e),[t,e])},useRouter:function(){const n=e(),s=o(),i=t();return r((()=>{function e(e){return function(t,r){const{locale:o,...n}=r||{},c=[f({href:t,locale:o||s,forcePrefix:null!=o||void 0})];Object.keys(n).length>0&&c.push(n),a(m.localeCookie,i,s,o),e(...c)}}return{...n,push:e(n.push),replace:e(n.replace),prefetch:e(n.prefetch)}}),[s,i,n])},getPathname:f}}export{c as default};\n","import{redirect as e,permanentRedirect as t}from\"next/navigation\";import{forwardRef as o}from\"react\";import{receiveRoutingConfig as r}from\"../../routing/config.js\";import n from\"../../shared/use.js\";import{isLocalizableHref as a,isPromise as i}from\"../../shared/utils.js\";import c from\"./BaseLink.js\";import{serializeSearchParams as f,compileLocalizedPathname as m,applyPathnamePrefix as l,normalizeNameOrNameWithParams as s}from\"./utils.js\";import{jsx as p}from\"react/jsx-runtime\";function u(u,h){const j=r(h||{}),d=j.pathnames;function g({href:e,locale:t,...o},r){let f,m;\"object\"==typeof e?(f=e.pathname,m=e.params):f=e;const l=a(e),s=u(),h=i(s)?n(s):s,g=l?y({locale:t||h,href:null==d?f:{pathname:f,params:m},forcePrefix:null!=t||void 0}):f;return p(c,{ref:r,href:\"object\"==typeof e?{...e,pathname:g}:g,locale:t,localeCookie:j.localeCookie,...o})}const x=o(g);function y(e){const{forcePrefix:t,href:o,locale:r}=e;let n;return null==d?\"object\"==typeof o?(n=o.pathname,o.query&&(n+=f(o.query))):n=o:n=m({locale:r,...s(o),pathnames:j.pathnames}),l(n,r,j,t)}function k(e){return function(t,...o){return e(y(t),...o)}}const b=k(e),P=k(t);return{config:j,Link:x,redirect:b,permanentRedirect:P,getPathname:y}}export{u as default};\n","import{usePathname as e}from\"next/navigation\";import{useMemo as r}from\"react\";import{useLocale as o}from\"use-intl\";import{hasPathnamePrefixed as t,unprefixPathname as i,getLocalePrefix as f,getLocaleAsPrefix as l}from\"../../shared/utils.js\";function n(n){const s=e(),a=o();return r((()=>{if(!s)return s;let e=s;const r=f(a,n.localePrefix);if(t(r,s))e=i(s,r);else if(\"never\"!==n.localePrefix.mode&&n.localePrefix.prefixes){const r=l(a);t(r,s)&&(e=i(s,r))}return e}),[n.localePrefix,a,s])}export{n as default};\n","import { defineRouting } from 'next-intl/routing'\nimport { createNavigation } from 'next-intl/navigation'\n\nexport const routing = defineRouting({\n  // Liste des locales supportées\n  locales: ['fr', 'en'],\n\n  // Locale par défaut\n  defaultLocale: 'fr',\n\n  // Préfixe de locale : 'never' signifie qu'aucune locale n'a de préfixe dans l'URL\n  // La locale est détectée automatiquement ou via les cookies\n  // Cette configuration évite les redirections vers des routes préfixées qui n'existent pas\n  localePrefix: 'never',\n})\n\n// Créer les helpers de navigation\nexport const { Link, redirect, usePathname, useRouter } = createNavigation(routing)\n\n","/**\n * Hook personnalisé pour gérer les notifications en temps réel\n */\n\nimport { useEffect, useState, useCallback } from 'react'\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query'\nimport { useAuth } from './use-auth'\nimport { notificationService, type Notification } from '@/lib/services/notification.service'\nimport { useToast } from '@/components/ui/toast'\n\nexport function useNotifications(options?: {\n  limit?: number\n  unread_only?: boolean\n  auto_refresh?: boolean\n}) {\n  const { user } = useAuth()\n  const queryClient = useQueryClient()\n  const { addToast } = useToast()\n  const [realtimeNotifications, setRealtimeNotifications] = useState<Notification[]>([])\n\n  // Récupérer les notifications\n  const {\n    data: notifications = [],\n    isLoading,\n    error,\n    refetch,\n  } = useQuery({\n    queryKey: ['notifications', user?.id, options?.unread_only, options?.limit],\n    queryFn: () =>\n      notificationService.getByUser(user!.id, {\n        limit: options?.limit || 50,\n        unread_only: options?.unread_only,\n      }),\n    enabled: !!user?.id,\n    refetchInterval: options?.auto_refresh ? 30000 : false, // Refresh toutes les 30 secondes si activé\n  })\n\n  // Récupérer le nombre de notifications non lues\n  const { data: unreadCount = 0 } = useQuery({\n    queryKey: ['notifications', 'unread-count', user?.id],\n    queryFn: () => {\n      if (!user?.id) return Promise.resolve(0)\n      return notificationService.getUnreadCount(user.id)\n    },\n    enabled: !!user?.id,\n    refetchInterval: 10000, // Refresh toutes les 10 secondes\n  })\n\n  // S'abonner aux notifications en temps réel\n  useEffect(() => {\n    if (!user?.id) return\n\n    const unsubscribe = notificationService.subscribeToNotifications(\n      user.id,\n      (notification) => {\n        // Ajouter la notification en temps réel\n        setRealtimeNotifications((prev) => [notification, ...prev])\n\n        // Invalider les queries pour rafraîchir\n        queryClient.invalidateQueries({ queryKey: ['notifications', user.id] })\n        queryClient.invalidateQueries({ queryKey: ['notifications', 'unread-count', user.id] })\n\n        // Afficher un toast pour les nouvelles notifications\n        if (notification.type !== 'system') {\n          addToast({\n            type: notification.type === 'error' ? 'error' : 'info',\n            title: notification.title,\n            description: notification.message,\n            duration: 5000,\n          })\n        }\n      }\n    )\n\n    return () => {\n      unsubscribe()\n    }\n  }, [user?.id, queryClient, addToast])\n\n  // Marquer une notification comme lue\n  const markAsReadMutation = useMutation({\n    mutationFn: (notification_id: string) => notificationService.markAsRead(notification_id),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['notifications', user?.id] })\n      queryClient.invalidateQueries({ queryKey: ['notifications', 'unread-count', user?.id] })\n    },\n  })\n\n  // Marquer toutes les notifications comme lues\n  const markAllAsReadMutation = useMutation({\n    mutationFn: () => notificationService.markAllAsRead(user!.id),\n    onSuccess: (count) => {\n      queryClient.invalidateQueries({ queryKey: ['notifications', user?.id] })\n      queryClient.invalidateQueries({ queryKey: ['notifications', 'unread-count', user?.id] })\n      addToast({\n        type: 'success',\n        title: 'Notifications marquées comme lues',\n        description: `${count} notification(s) marquée(s) comme lue(s).`,\n      })\n    },\n  })\n\n  // Supprimer une notification\n  const deleteMutation = useMutation({\n    mutationFn: (notification_id: string) => notificationService.delete(notification_id),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['notifications', user?.id] })\n      queryClient.invalidateQueries({ queryKey: ['notifications', 'unread-count', user?.id] })\n    },\n  })\n\n  // Combiner les notifications statiques et en temps réel\n  const allNotifications = [...realtimeNotifications, ...notifications].filter(\n    (notification, index, self) =>\n      index === self.findIndex((n) => n.id === notification.id)\n  )\n\n  return {\n    notifications: allNotifications,\n    unreadCount,\n    isLoading,\n    error,\n    refetch,\n    markAsRead: markAsReadMutation.mutate,\n    markAllAsRead: markAllAsReadMutation.mutate,\n    deleteNotification: deleteMutation.mutate,\n    isMarkingAsRead: markAsReadMutation.isPending,\n    isMarkingAllAsRead: markAllAsReadMutation.isPending,\n    isDeleting: deleteMutation.isPending,\n  }\n}\n\n/**\n * Hook pour obtenir uniquement le nombre de notifications non lues\n * Plus léger que useNotifications pour les cas où on a juste besoin du badge\n */\nexport function useUnreadNotificationsCount() {\n  const { user } = useAuth()\n  const queryClient = useQueryClient()\n\n  const { data: count = 0 } = useQuery({\n    queryKey: ['notifications', 'unread-count', user?.id],\n    queryFn: () => {\n      if (!user?.id) return Promise.resolve(0)\n      return notificationService.getUnreadCount(user.id)\n    },\n    enabled: !!user?.id,\n    refetchInterval: 10000, // Refresh toutes les 10 secondes\n  })\n\n  // S'abonner aux mises à jour en temps réel\n  useEffect(() => {\n    if (!user?.id) return\n\n    const unsubscribe = notificationService.subscribeToNotifications(user.id, () => {\n      queryClient.invalidateQueries({ queryKey: ['notifications', 'unread-count', user.id] })\n    })\n\n    return unsubscribe\n  }, [user?.id, queryClient])\n\n  return count\n}\n\n","/**\n * Service pour gérer les notifications\n * Supporte les notifications en temps réel via Supabase Realtime\n */\n\nimport { createClient } from '@/lib/supabase/client'\nimport type { SupabaseClient } from '@supabase/supabase-js'\nimport { logger } from '@/lib/utils/logger'\nimport type { RealtimeChannel } from '@supabase/supabase-js'\n\nexport type NotificationType = \n  | 'info' \n  | 'success' \n  | 'warning' \n  | 'error' \n  | 'message' \n  | 'payment' \n  | 'attendance' \n  | 'grade' \n  | 'document' \n  | 'system'\n\nexport interface Notification {\n  id: string\n  user_id: string\n  organization_id: string\n  type: NotificationType\n  title: string\n  message: string\n  data: Record<string, any>\n  link?: string\n  read_at?: string\n  created_at: string\n  expires_at?: string\n}\n\nexport interface CreateNotificationParams {\n  user_id: string\n  organization_id: string\n  type: NotificationType\n  title: string\n  message: string\n  data?: Record<string, any>\n  link?: string\n  expires_at?: string\n}\n\nexport class NotificationService {\n  private supabase: SupabaseClient<any>\n\n\n  constructor(supabaseClient?: SupabaseClient<any>) {\n\n    this.supabase = supabaseClient || createClient()\n\n  }\n  private channels: Map<string, RealtimeChannel> = new Map()\n\n  /**\n   * Crée une nouvelle notification\n   */\n  async create(params: CreateNotificationParams): Promise<Notification> {\n    try {\n      const { data, error } = await this.supabase.rpc('create_notification', {\n        p_user_id: params.user_id,\n        p_organization_id: params.organization_id,\n        p_type: params.type,\n        p_title: params.title,\n        p_message: params.message,\n        p_data: params.data || {},\n        p_link: params.link || null,\n        p_expires_at: params.expires_at || null,\n      })\n\n      if (error) throw error\n\n      // Récupérer la notification créée\n      const { data: notification, error: fetchError } = await this.supabase\n        .from('notifications')\n        .select('*')\n        .eq('id', data)\n        .single()\n\n      if (fetchError) throw fetchError\n\n      return notification as Notification\n    } catch (error) {\n      logger.error('Error creating notification', error, {\n        params,\n      })\n      throw error\n    }\n  }\n\n  /**\n   * Crée une notification pour plusieurs utilisateurs\n   * Optimisé : utilise un batch insert au lieu de créations individuelles\n   */\n  async createForUsers(\n    user_ids: string[],\n    organization_id: string,\n    type: NotificationType,\n    title: string,\n    message: string,\n    data?: Record<string, any>,\n    link?: string\n  ): Promise<Notification[]> {\n    try {\n      if (user_ids.length === 0) {\n        return []\n      }\n\n      // Batch insert au lieu de multiples appels RPC\n      const { data: notifications, error } = await this.supabase\n        .from('notifications')\n        .insert(\n          user_ids.map((user_id) => ({\n            user_id,\n            organization_id,\n            type,\n            title,\n            message,\n            data: data || {},\n            link: link || null,\n          }))\n        )\n        .select()\n\n      if (error) {\n        logger.error('Error creating batch notifications', error, {\n          userCount: user_ids.length,\n          organizationId: organization_id,\n          type,\n        })\n        throw error\n      }\n\n      logger.info('Batch notifications created successfully', {\n        count: notifications.length,\n        organizationId: organization_id,\n        type,\n      })\n\n      return notifications as Notification[]\n    } catch (error) {\n      logger.error('Error in createForUsers', error)\n      throw error\n    }\n  }\n\n  /**\n   * Récupère les notifications d'un utilisateur\n   */\n  async getByUser(\n    user_id: string,\n    options?: {\n      limit?: number\n      offset?: number\n      unread_only?: boolean\n    }\n  ): Promise<Notification[]> {\n    try {\n      let query = this.supabase\n        .from('notifications')\n        .select('*')\n        .eq('user_id', user_id)\n        .order('created_at', { ascending: false })\n\n      if (options?.unread_only) {\n        query = query.is('read_at', null)\n      }\n\n      if (options?.limit) {\n        query = query.limit(options.limit)\n      }\n\n      if (options?.offset) {\n        query = query.range(options.offset, options.offset + (options.limit || 50) - 1)\n      }\n\n      const { data, error } = await query\n\n      if (error) throw error\n\n      return (data || []) as Notification[]\n    } catch (error) {\n      logger.error('Error fetching notifications', error, {\n        user_id,\n        options,\n      })\n      throw error\n    }\n  }\n\n  /**\n   * Récupère le nombre de notifications non lues\n   * Solution temporaire : requête directe sans filtre sur expires_at\n   * TODO: Utiliser la fonction RPC get_unread_notifications_count une fois la migration appliquée\n   * \n   * Note: L'appel RPC est désactivé temporairement car la migration n'a pas encore été appliquée.\n   * Pour activer la fonction RPC, décommentez le code ci-dessous et appliquez la migration.\n   */\n  async getUnreadCount(user_id?: string | null): Promise<number> {\n    try {\n      // Si user_id n'est pas fourni, on ne peut pas faire la requête\n      if (!user_id) {\n        return 0\n      }\n\n      // TODO: Décommenter une fois la migration 20251227000006_fix_get_unread_notifications_count.sql appliquée\n      // Essayer d'abord la fonction RPC si elle existe\n      // const { data: rpcData, error: rpcError } = await this.supabase.rpc('get_unread_notifications_count', {})\n      // if (!rpcError && typeof rpcData === 'number') {\n      //   return rpcData\n      // }\n\n      // Requête directe simplifiée (sans filtre sur expires_at pour l'instant)\n      // Le filtre sur expires_at sera géré par la fonction RPC une fois la migration appliquée\n      const { count, error } = await this.supabase\n        .from('notifications')\n        .select('*', { count: 'exact', head: true })\n        .eq('user_id', user_id)\n        .is('read_at', null)\n\n      if (error) {\n        // Logger l'erreur mais ne pas throw pour éviter de bloquer l'application\n        logger.warn('Error getting unread count, returning 0', {\n          error,\n          user_id,\n          errorCode: error.code,\n          errorMessage: error.message,\n        })\n        return 0\n      }\n\n      return count || 0\n    } catch (error) {\n      logger.error('Exception in getUnreadCount, returning 0', error, {\n        user_id,\n      })\n      // Retourner 0 au lieu de throw pour éviter de bloquer l'application\n      return 0\n    }\n  }\n\n  /**\n   * Marque une notification comme lue\n   */\n  async markAsRead(notification_id: string): Promise<boolean> {\n    try {\n      const { data, error } = await this.supabase.rpc('mark_notification_read', {\n        p_notification_id: notification_id,\n      })\n\n      if (error) throw error\n\n      return data || false\n    } catch (error) {\n      logger.error('Error marking notification as read', error, {\n        notification_id,\n      })\n      throw error\n    }\n  }\n\n  /**\n   * Marque toutes les notifications comme lues\n   */\n  async markAllAsRead(user_id: string): Promise<number> {\n    try {\n      const { data, error } = await this.supabase.rpc('mark_all_notifications_read', {\n        p_user_id: user_id,\n      })\n\n      if (error) throw error\n\n      return data || 0\n    } catch (error) {\n      logger.error('Error marking all notifications as read', error, {\n        user_id,\n      })\n      throw error\n    }\n  }\n\n  /**\n   * Supprime une notification\n   */\n  async delete(notification_id: string): Promise<boolean> {\n    try {\n      const { error } = await this.supabase\n        .from('notifications')\n        .delete()\n        .eq('id', notification_id)\n\n      if (error) throw error\n\n      return true\n    } catch (error) {\n      logger.error('Error deleting notification', error, {\n        notification_id,\n      })\n      throw error\n    }\n  }\n\n  /**\n   * S'abonne aux notifications en temps réel pour un utilisateur\n   */\n  subscribeToNotifications(\n    user_id: string,\n    callback: (notification: Notification) => void\n  ): () => void {\n    const channelName = `notifications:${user_id}`\n    \n    // Nettoyer le channel existant s'il y en a un\n    if (this.channels.has(channelName)) {\n      this.unsubscribeFromNotifications(user_id)\n    }\n\n    const channel = this.supabase\n      .channel(channelName)\n      .on(\n        'postgres_changes',\n        {\n          event: 'INSERT',\n          schema: 'public',\n          table: 'notifications',\n          filter: `user_id=eq.${user_id}`,\n        },\n        (payload) => {\n          const notification = payload.new as Notification\n          callback(notification)\n        }\n      )\n      .on(\n        'postgres_changes',\n        {\n          event: 'UPDATE',\n          schema: 'public',\n          table: 'notifications',\n          filter: `user_id=eq.${user_id}`,\n        },\n        (payload) => {\n          const notification = payload.new as Notification\n          callback(notification)\n        }\n      )\n      .subscribe()\n\n    this.channels.set(channelName, channel)\n\n    // Retourner une fonction de nettoyage\n    return () => {\n      this.unsubscribeFromNotifications(user_id)\n    }\n  }\n\n  /**\n   * Se désabonne des notifications en temps réel\n   */\n  unsubscribeFromNotifications(user_id: string): void {\n    const channelName = `notifications:${user_id}`\n    const channel = this.channels.get(channelName)\n\n    if (channel) {\n      this.supabase.removeChannel(channel)\n      this.channels.delete(channelName)\n    }\n  }\n\n  /**\n   * Nettoie tous les abonnements\n   */\n  cleanup(): void {\n    this.channels.forEach((channel) => {\n      this.supabase.removeChannel(channel)\n    })\n    this.channels.clear()\n  }\n}\n\nexport const notificationService = new NotificationService()\n\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Smartphone\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iMTQiIGhlaWdodD0iMjAiIHg9IjUiIHk9IjIiIHJ4PSIyIiByeT0iMiIgLz4KICA8cGF0aCBkPSJNMTIgMThoLjAxIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/smartphone\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Smartphone = createLucideIcon('Smartphone', [\n  ['rect', { width: '14', height: '20', x: '5', y: '2', rx: '2', ry: '2', key: '1yt0o3' }],\n  ['path', { d: 'M12 18h.01', key: 'mhygvu' }],\n]);\n\nexport default Smartphone;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name BookOpenCheck\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNOCAzSDJ2MTVoN2MxLjcgMCAzIDEuMyAzIDNWN2MwLTIuMi0xLjgtNC00LTRaIiAvPgogIDxwYXRoIGQ9Im0xNiAxMiAyIDIgNC00IiAvPgogIDxwYXRoIGQ9Ik0yMiA2VjNoLTZjLTIuMiAwLTQgMS44LTQgNHYxNGMwLTEuNyAxLjMtMyAzLTNoN3YtMi4zIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/book-open-check\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst BookOpenCheck = createLucideIcon('BookOpenCheck', [\n  ['path', { d: 'M8 3H2v15h7c1.7 0 3 1.3 3 3V7c0-2.2-1.8-4-4-4Z', key: '1i8u0n' }],\n  ['path', { d: 'm16 12 2 2 4-4', key: 'mdajum' }],\n  ['path', { d: 'M22 6V3h-6c-2.2 0-4 1.8-4 4v14c0-1.7 1.3-3 3-3h7v-2.3', key: 'jb5l51' }],\n]);\n\nexport default BookOpenCheck;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Badge\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMy44NSA4LjYyYTQgNCAwIDAgMSA0Ljc4LTQuNzcgNCA0IDAgMCAxIDYuNzQgMCA0IDQgMCAwIDEgNC43OCA0Ljc4IDQgNCAwIDAgMSAwIDYuNzQgNCA0IDAgMCAxLTQuNzcgNC43OCA0IDQgMCAwIDEtNi43NSAwIDQgNCAwIDAgMS00Ljc4LTQuNzcgNCA0IDAgMCAxIDAtNi43NloiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/badge\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Badge = createLucideIcon('Badge', [\n  [\n    'path',\n    {\n      d: 'M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z',\n      key: '3c2336',\n    },\n  ],\n]);\n\nexport default Badge;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name LifeBuoy\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8cGF0aCBkPSJtNC45MyA0LjkzIDQuMjQgNC4yNCIgLz4KICA8cGF0aCBkPSJtMTQuODMgOS4xNyA0LjI0LTQuMjQiIC8+CiAgPHBhdGggZD0ibTE0LjgzIDE0LjgzIDQuMjQgNC4yNCIgLz4KICA8cGF0aCBkPSJtOS4xNyAxNC44My00LjI0IDQuMjQiIC8+CiAgPGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iNCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/life-buoy\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst LifeBuoy = createLucideIcon('LifeBuoy', [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['path', { d: 'm4.93 4.93 4.24 4.24', key: '1ymg45' }],\n  ['path', { d: 'm14.83 9.17 4.24-4.24', key: '1cb5xl' }],\n  ['path', { d: 'm14.83 14.83 4.24 4.24', key: 'q42g0n' }],\n  ['path', { d: 'm9.17 14.83-4.24 4.24', key: 'bqpfvv' }],\n  ['circle', { cx: '12', cy: '12', r: '4', key: '4exip2' }],\n]);\n\nexport default LifeBuoy;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Monitor\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iMjAiIGhlaWdodD0iMTQiIHg9IjIiIHk9IjMiIHJ4PSIyIiAvPgogIDxsaW5lIHgxPSI4IiB4Mj0iMTYiIHkxPSIyMSIgeTI9IjIxIiAvPgogIDxsaW5lIHgxPSIxMiIgeDI9IjEyIiB5MT0iMTciIHkyPSIyMSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/monitor\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Monitor = createLucideIcon('Monitor', [\n  ['rect', { width: '20', height: '14', x: '2', y: '3', rx: '2', key: '48i651' }],\n  ['line', { x1: '8', x2: '16', y1: '21', y2: '21', key: '1svkeh' }],\n  ['line', { x1: '12', x2: '12', y1: '17', y2: '21', key: 'vw1qmm' }],\n]);\n\nexport default Monitor;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name CheckCheck\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTggNiA3IDE3bC01LTUiIC8+CiAgPHBhdGggZD0ibTIyIDEwLTcuNSA3LjVMMTMgMTYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/check-check\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CheckCheck = createLucideIcon('CheckCheck', [\n  ['path', { d: 'M18 6 7 17l-5-5', key: '116fxf' }],\n  ['path', { d: 'm22 10-7.5 7.5L13 16', key: 'ke71qq' }],\n]);\n\nexport default CheckCheck;\n","/**\n * Utilitaires pour mettre en évidence (highlight) du texte dans les résultats de recherche\n */\n\n/**\n * Met en évidence les correspondances dans un texte\n * @param text Le texte à mettre en évidence\n * @param query La requête de recherche\n * @returns Un tableau de fragments (texte normal ou texte en évidence)\n */\nexport function highlightText(text: string, query: string): Array<{ text: string; highlight: boolean }> {\n  if (!query || !text) {\n    return [{ text, highlight: false }]\n  }\n\n  const lowerText = text.toLowerCase()\n  const lowerQuery = query.toLowerCase()\n  const parts: Array<{ text: string; highlight: boolean }> = []\n  let lastIndex = 0\n\n  // Trouver toutes les occurrences de la requête\n  let index = lowerText.indexOf(lowerQuery, lastIndex)\n  \n  while (index !== -1) {\n    // Ajouter le texte avant la correspondance\n    if (index > lastIndex) {\n      parts.push({\n        text: text.substring(lastIndex, index),\n        highlight: false,\n      })\n    }\n\n    // Ajouter le texte en évidence\n    parts.push({\n      text: text.substring(index, index + query.length),\n      highlight: true,\n    })\n\n    lastIndex = index + query.length\n    index = lowerText.indexOf(lowerQuery, lastIndex)\n  }\n\n  // Ajouter le reste du texte\n  if (lastIndex < text.length) {\n    parts.push({\n      text: text.substring(lastIndex),\n      highlight: false,\n    })\n  }\n\n  return parts.length > 0 ? parts : [{ text, highlight: false }]\n}\n\n/**\n * Met en évidence les correspondances dans plusieurs champs d'un objet\n * @param obj L'objet contenant les champs à rechercher\n * @param query La requête de recherche\n * @param fields Les champs à rechercher\n * @returns L'objet avec les champs mis en évidence\n */\nexport function highlightFields<T extends Record<string, any>>(\n  obj: T,\n  query: string,\n  fields: (keyof T)[]\n): Record<string, Array<{ text: string; highlight: boolean }>> {\n  const result: Record<string, Array<{ text: string; highlight: boolean }>> = {}\n\n  for (const field of fields) {\n    const value = obj[field]\n    if (typeof value === 'string') {\n      result[field as string] = highlightText(value, query)\n    } else {\n      result[field as string] = [{ text: String(value || ''), highlight: false }]\n    }\n  }\n\n  return result\n}\n\n\n\n","/**\n * Service de recherche globale\n * Recherche dans étudiants, sessions, documents, messages\n */\n\nimport { createClient } from '@/lib/supabase/client'\nimport type { SupabaseClient } from '@supabase/supabase-js'\nimport type { TableRow } from '@/lib/types/supabase-helpers'\n\ntype Student = TableRow<'students'>\ntype Session = TableRow<'sessions'>\ntype Document = TableRow<'documents'>\ntype Conversation = TableRow<'conversations'>\n\nexport interface SearchResult {\n  type: 'student' | 'session' | 'document' | 'message'\n  id: string\n  title: string\n  description?: string\n  url: string\n  metadata?: Record<string, any>\n}\n\nexport class SearchService {\n  private supabase: SupabaseClient<any>\n\n\n  constructor(supabaseClient?: SupabaseClient<any>) {\n\n    this.supabase = supabaseClient || createClient()\n\n  }\n\n  /**\n   * Recherche globale dans tous les types de contenu\n   */\n  async searchGlobal(\n    query: string,\n    organizationId: string,\n    userId?: string\n  ): Promise<SearchResult[]> {\n    if (!query || query.trim().length < 2) {\n      return []\n    }\n\n    const searchTerm = query.trim().toLowerCase()\n    const results: SearchResult[] = []\n\n    // Recherche en parallèle dans tous les types\n    const [students, sessions, documents, conversations] = await Promise.all([\n      this.searchStudents(searchTerm, organizationId),\n      this.searchSessions(searchTerm, organizationId),\n      this.searchDocuments(searchTerm, organizationId),\n      userId ? this.searchConversations(searchTerm, organizationId, userId) : Promise.resolve([]),\n    ])\n\n    results.push(...students, ...sessions, ...documents, ...conversations)\n\n    // Trier par pertinence (titre qui commence par la requête > contient la requête)\n    return results.sort((a, b) => {\n      const aStarts = a.title.toLowerCase().startsWith(searchTerm) ? 1 : 0\n      const bStarts = b.title.toLowerCase().startsWith(searchTerm) ? 1 : 0\n      return bStarts - aStarts\n    })\n  }\n\n  /**\n   * Recherche dans les étudiants\n   */\n  private async searchStudents(\n    searchTerm: string,\n    organizationId: string\n  ): Promise<SearchResult[]> {\n    const { data, error } = await this.supabase\n      .from('students')\n      .select('id, first_name, last_name, student_number, email')\n      .eq('organization_id', organizationId)\n      .or(\n        `first_name.ilike.%${searchTerm}%,last_name.ilike.%${searchTerm}%,student_number.ilike.%${searchTerm}%,email.ilike.%${searchTerm}%`\n      )\n      .limit(10)\n\n    if (error || !data) return []\n\n    return (data as any[]).map((student: any) => ({\n      type: 'student' as const,\n      id: student.id,\n      title: `${student.first_name || ''} ${student.last_name || ''}`.trim() || student.student_number || 'Étudiant',\n      description: student.student_number || student.email || undefined,\n      url: `/dashboard/students/${student.id}`,\n      metadata: {\n        student_number: student.student_number,\n        email: student.email,\n      },\n    }))\n  }\n\n  /**\n   * Recherche dans les sessions\n   */\n  private async searchSessions(\n    searchTerm: string,\n    organizationId: string\n  ): Promise<SearchResult[]> {\n    const { data, error } = await this.supabase\n      .from('sessions')\n      .select('id, name, start_date, end_date')\n      .eq('organization_id', organizationId)\n      .ilike('name', `%${searchTerm}%`)\n      .limit(10)\n\n    if (error || !data) return []\n\n    return (data as any[]).map((session: any) => ({\n      type: 'session' as const,\n      id: session.id,\n      title: session.name || 'Session',\n      description: session.start_date\n        ? `Du ${new Date(session.start_date).toLocaleDateString('fr-FR')}`\n        : undefined,\n      url: `/dashboard/sessions/${session.id}`,\n      metadata: {\n        start_date: session.start_date,\n        end_date: session.end_date,\n      },\n    }))\n  }\n\n  /**\n   * Recherche dans les documents\n   */\n  private async searchDocuments(\n    searchTerm: string,\n    organizationId: string\n  ): Promise<SearchResult[]> {\n    const { data, error } = await this.supabase\n      .from('documents')\n      .select('id, title, type, created_at')\n      .eq('organization_id', organizationId)\n      .ilike('title', `%${searchTerm}%`)\n      .limit(10)\n\n    if (error || !data) return []\n\n    return (data as any[]).map((doc: any) => ({\n      type: 'document' as const,\n      id: doc.id,\n      title: doc.title || 'Document',\n      description: doc.type || undefined,\n      url: `/dashboard/documents`,\n      metadata: {\n        type: doc.type,\n        created_at: doc.created_at,\n      },\n    }))\n  }\n\n  /**\n   * Recherche dans les conversations/messages\n   */\n  private async searchConversations(\n    searchTerm: string,\n    organizationId: string,\n    userId: string\n  ): Promise<SearchResult[]> {\n    // Rechercher dans les conversations où l'utilisateur est participant\n    const { data: conversations, error } = await this.supabase\n      .from('conversations')\n      .select('id, name, conversation_type')\n      .eq('organization_id', organizationId)\n      .ilike('name', `%${searchTerm}%`)\n      .limit(5)\n\n    if (error || !conversations) return []\n\n    // Vérifier que l'utilisateur est participant\n    const conversationIds = conversations.map((c) => c.id)\n    const { data: participants } = await this.supabase\n      .from('conversation_participants')\n      .select('conversation_id')\n      .in('conversation_id', conversationIds)\n      .eq('user_id', userId)\n\n    const userConversationIds = new Set(participants?.map((p) => p.conversation_id) || [])\n\n    return conversations\n      .filter((conv) => userConversationIds.has(conv.id))\n      .map((conv: any) => ({\n        type: 'message' as const,\n        id: conv.id,\n        title: conv.name || 'Conversation',\n        description: conv.conversation_type === 'group' ? 'Groupe' : 'Direct',\n        url: `/dashboard/messages/${conv.id}`,\n        metadata: {\n          conversation_type: conv.conversation_type,\n        },\n      }))\n  }\n}\n\nexport const searchService = new SearchService()\n\n\n\n","/**\n * Service pour gérer le système de feedback utilisateur\n */\n\nimport { createClient } from '@/lib/supabase/client'\nimport type { SupabaseClient } from '@supabase/supabase-js'\nimport type { TableRow, TableInsert, TableUpdate } from '@/lib/types/supabase-helpers'\n\ntype UserFeedback = any\ntype UserFeedbackInsert = any\ntype UserFeedbackUpdate = any\n\nexport type FeedbackType = 'bug' | 'feature_request' | 'improvement' | 'question' | 'other'\nexport type FeedbackStatus = 'pending' | 'reviewing' | 'in_progress' | 'resolved' | 'closed' | 'rejected'\nexport type FeedbackPriority = 'low' | 'medium' | 'high' | 'urgent'\n\nexport interface CreateFeedbackParams {\n  organizationId: string\n  userId?: string\n  studentId?: string\n  feedbackType: FeedbackType\n  category?: string\n  title: string\n  description: string\n  pageUrl?: string\n  userAgent?: string\n  screenshotUrl?: string\n  priority?: FeedbackPriority\n}\n\nexport class FeedbackService {\n  private supabase: SupabaseClient<any>\n\n\n  constructor(supabaseClient?: SupabaseClient<any>) {\n\n    this.supabase = supabaseClient || createClient()\n\n  }\n\n  /**\n   * Crée un nouveau feedback\n   */\n  async create(params: CreateFeedbackParams): Promise<UserFeedback> {\n    const { data, error } = await this.supabase\n      .from('user_feedback')\n      .insert({\n        organization_id: params.organizationId,\n        user_id: params.userId,\n        student_id: params.studentId,\n        feedback_type: params.feedbackType,\n        category: params.category,\n        title: params.title,\n        description: params.description,\n        page_url: params.pageUrl,\n        user_agent: params.userAgent,\n        screenshot_url: params.screenshotUrl,\n        priority: params.priority || 'medium',\n        status: 'pending',\n      })\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  /**\n   * Récupère tous les feedbacks d'une organisation\n   */\n  async getByOrganization(\n    organizationId: string,\n    filters?: {\n      userId?: string\n      status?: FeedbackStatus\n      feedbackType?: FeedbackType\n      priority?: FeedbackPriority\n      assignedTo?: string\n      page?: number\n      limit?: number\n    }\n  ) {\n    const page = filters?.page || 1\n    const limit = filters?.limit || 50\n    const offset = (page - 1) * limit\n\n    let query = this.supabase\n      .from('user_feedback')\n      .select('*, users(id, full_name, email), students(id, first_name, last_name, email), assigned_user:users!assigned_to(id, full_name, email)', { count: 'exact' })\n      .eq('organization_id', organizationId)\n      .order('created_at', { ascending: false })\n\n    if (filters?.userId) {\n      query = query.eq('user_id', filters.userId)\n    }\n\n    if (filters?.status) {\n      query = query.eq('status', filters.status)\n    }\n\n    if (filters?.feedbackType) {\n      query = query.eq('feedback_type', filters.feedbackType)\n    }\n\n    if (filters?.priority) {\n      query = query.eq('priority', filters.priority)\n    }\n\n    if (filters?.assignedTo) {\n      query = query.eq('assigned_to', filters.assignedTo)\n    }\n\n    const { data, error, count } = await query.range(offset, offset + limit - 1)\n\n    if (error) throw error\n\n    return {\n      data: data || [],\n      total: count || 0,\n      page,\n      limit,\n      totalPages: Math.ceil((count || 0) / limit),\n    }\n  }\n\n  /**\n   * Récupère un feedback par son ID\n   */\n  async getById(id: string): Promise<UserFeedback> {\n    const { data, error } = await this.supabase\n      .from('user_feedback')\n      .select('*, users(id, full_name, email), students(id, first_name, last_name, email), assigned_user:users!assigned_to(id, full_name, email)')\n      .eq('id', id)\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  /**\n   * Met à jour un feedback\n   */\n  async update(id: string, updates: UserFeedbackUpdate): Promise<UserFeedback> {\n    const { data, error } = await this.supabase\n      .from('user_feedback')\n      .update(updates)\n      .eq('id', id)\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  /**\n   * Assigne un feedback à un utilisateur\n   */\n  async assign(feedbackId: string, userId: string): Promise<UserFeedback> {\n    return this.update(feedbackId, {\n      assigned_to: userId,\n      status: 'reviewing',\n    })\n  }\n\n  /**\n   * Change le statut d'un feedback\n   */\n  async updateStatus(feedbackId: string, status: FeedbackStatus, resolutionNotes?: string): Promise<UserFeedback> {\n    const updates: UserFeedbackUpdate = {\n      status,\n      resolved_at: status === 'resolved' ? new Date().toISOString() : null,\n      resolution_notes: resolutionNotes,\n    }\n\n    return this.update(feedbackId, updates)\n  }\n\n  /**\n   * Récupère les statistiques de feedback\n   */\n  async getStats(organizationId: string) {\n    const { data, error } = await this.supabase\n      .from('user_feedback')\n      .select('status, feedback_type, priority')\n      .eq('organization_id', organizationId)\n\n    if (error) throw error\n\n    const stats = {\n      total: data?.length || 0,\n      byStatus: {} as Record<FeedbackStatus, number>,\n      byType: {} as Record<FeedbackType, number>,\n      byPriority: {} as Record<FeedbackPriority, number>,\n      pending: 0,\n      resolved: 0,\n    }\n\n    data?.forEach((feedback) => {\n      stats.byStatus[feedback.status as FeedbackStatus] =\n        (stats.byStatus[feedback.status as FeedbackStatus] || 0) + 1\n      stats.byType[feedback.feedback_type as FeedbackType] =\n        (stats.byType[feedback.feedback_type as FeedbackType] || 0) + 1\n      stats.byPriority[feedback.priority as FeedbackPriority] =\n        (stats.byPriority[feedback.priority as FeedbackPriority] || 0) + 1\n\n      if (feedback.status === 'pending') stats.pending++\n      if (feedback.status === 'resolved') stats.resolved++\n    })\n\n    return stats\n  }\n\n  /**\n   * Supprime un feedback (admin uniquement)\n   */\n  async delete(id: string): Promise<void> {\n    const { error } = await this.supabase\n      .from('user_feedback')\n      .delete()\n      .eq('id', id)\n\n    if (error) throw error\n  }\n}\n\nexport const feedbackService = new FeedbackService()\n\n\n\n"],"names":[],"mappings":"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","ignoreList":[12,14,15,21,22,23,24,28,29,30,31,32,33]}