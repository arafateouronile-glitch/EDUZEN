module.exports=[302919,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(433217),e=a.i(370025),f=a.i(937927),g=a.i(913216),h=a.i(269240),i=a.i(254799);let j=new class{supabase;constructor(a){this.supabase=a||(0,h.createClient)()}generateAPIKey(){let a=`eduz_${i.default.randomBytes(32).toString("hex")}`,b=i.default.createHash("sha256").update(a).digest("hex"),c=a.substring(0,12)+"...";return{key:a,hash:b,prefix:c}}async verifyAPIKey(a){let b=i.default.createHash("sha256").update(a).digest("hex"),{data:c,error:d}=await this.supabase.from("api_keys").select("*").eq("key_hash",b).eq("is_active",!0).maybeSingle();if(d)throw d;return c}async createAPIKey(a,b,c,d){let{key:e,hash:f,prefix:g}=this.generateAPIKey();await this.ensureQuotaExists(a);let{data:h,error:i}=await this.supabase.from("api_keys").insert({organization_id:a,user_id:b,name:c,key_hash:f,key_prefix:g,description:d?.description,scopes:d?.scopes||[],allowed_ips:d?.allowedIPs||[],allowed_origins:d?.allowedOrigins||[],rate_limit_per_minute:d?.rateLimitPerMinute||60,rate_limit_per_hour:d?.rateLimitPerHour||1e3,rate_limit_per_day:d?.rateLimitPerDay||1e4,expires_at:d?.expiresAt?.toISOString()}).select().single();if(i)throw i;return{...h,key:e}}async getAPIKeys(a){let{data:b,error:c}=await this.supabase.from("api_keys").select("*").eq("organization_id",a).order("created_at",{ascending:!1});if(c)throw c;return b}async updateAPIKey(a,b){let{data:c,error:d}=await this.supabase.from("api_keys").update(b).eq("id",a).select().single();if(d)throw d;return c}async revokeAPIKey(a){return this.updateAPIKey(a,{is_active:!1})}async deleteAPIKey(a){let{error:b}=await this.supabase.from("api_keys").delete().eq("id",a);if(b)throw b}async checkRateLimit(a,b){let c=await this.checkKeyRateLimit(a.id);if(!c.allowed)return c;let d=await this.checkQuotaRateLimit(b);return d.allowed?{allowed:!0,remaining:Math.min(c.remaining,d.remaining),resetAt:d.resetAt}:d}async checkKeyRateLimit(a){let{data:b}=await this.supabase.from("api_keys").select("rate_limit_per_minute, rate_limit_per_hour, rate_limit_per_day").eq("id",a).single();if(!b)return{allowed:!1,remaining:0,resetAt:new Date};let c=new Date,d=new Date(c.getTime()-6e4),e=new Date(c.getTime()-36e5),f=new Date(c.getTime()-864e5),{count:g}=await this.supabase.from("api_requests").select("*",{count:"exact",head:!0}).eq("api_key_id",a).gte("created_at",d.toISOString()),{count:h}=await this.supabase.from("api_requests").select("*",{count:"exact",head:!0}).eq("api_key_id",a).gte("created_at",e.toISOString()),{count:i}=await this.supabase.from("api_requests").select("*",{count:"exact",head:!0}).eq("api_key_id",a).gte("created_at",f.toISOString());return g&&g>=(b.rate_limit_per_minute||60)?{allowed:!1,remaining:0,resetAt:new Date(c.getTime()+6e4)}:h&&h>=(b.rate_limit_per_hour||1e3)?{allowed:!1,remaining:0,resetAt:new Date(c.getTime()+36e5)}:i&&i>=(b.rate_limit_per_day||1e4)?{allowed:!1,remaining:0,resetAt:new Date(c.getTime()+864e5)}:{allowed:!0,remaining:Math.min((b.rate_limit_per_minute||60)-(g||0),(b.rate_limit_per_hour||1e3)-(h||0),(b.rate_limit_per_day||1e4)-(i||0)),resetAt:new Date(c.getTime()+6e4)}}async checkQuotaRateLimit(a){let{data:b}=await this.supabase.from("api_quotas").select("*").eq("organization_id",a).single();return b?b.requests_used_minute>=(b.requests_per_minute||60)||b.requests_used_hour>=(b.requests_per_hour||1e3)||b.requests_used_day>=(b.requests_per_day||1e4)?{allowed:!1,remaining:0,resetAt:new Date}:{allowed:!0,remaining:Math.min((b.requests_per_minute||60)-b.requests_used_minute,(b.requests_per_hour||1e3)-b.requests_used_hour,(b.requests_per_day||1e4)-b.requests_used_day),resetAt:new Date}:(await this.ensureQuotaExists(a),{allowed:!0,remaining:1e4,resetAt:new Date})}async logAPIRequest(a,b,c,d,e,f,g,h,i,j){let{data:k,error:l}=await this.supabase.from("api_requests").insert({api_key_id:a,organization_id:b,method:c,endpoint:d,path:e,status_code:f,response_time_ms:g,ip_address:h,user_agent:i,query_params:j}).select().single();if(l)throw l;return k}async getAPIUsageStats(a,b,c){let d=this.supabase.from("api_requests").select("method, endpoint, status_code, response_time_ms").eq("organization_id",a);b&&(d=d.gte("created_at",b.toISOString())),c&&(d=d.lte("created_at",c.toISOString()));let{data:e,error:f}=await d;if(f)throw f;let g={total_requests:e?.length||0,by_method:{},by_endpoint:{},by_status:{},average_response_time:0,error_rate:0};if(e&&e.length>0){let a=0,b=0;e.forEach(c=>{g.by_method[c.method]=(g.by_method[c.method]||0)+1;let d=c.endpoint;g.by_endpoint[d]=(g.by_endpoint[d]||0)+1;let e=c.status_code||0,f=100*Math.floor(e/100);g.by_status[f]=(g.by_status[f]||0)+1;let h=c.response_time_ms||0;h&&(a+=h),e>=400&&b++}),g.average_response_time=a/e.length,g.error_rate=b/e.length*100}return g}async ensureQuotaExists(a){let{data:b}=await this.supabase.from("api_quotas").select("id").eq("organization_id",a).maybeSingle();if(!b){let{error:b}=await this.supabase.from("api_quotas").insert({organization_id:a});if(b)throw b}}async getQuota(a){let{data:b,error:c}=await this.supabase.from("api_quotas").select("*").eq("organization_id",a).single();if(c)throw c;return b}async updateQuota(a,b){let{data:c,error:d}=await this.supabase.from("api_quotas").update(b).eq("organization_id",a).select().single();if(d)throw d;return c}async createWebhook(a){let b=i.default.randomBytes(32).toString("hex"),{data:c,error:d}=await this.supabase.from("webhooks").insert({...a,secret:b}).select().single();if(d)throw d;return{...c,secret:b}}async getWebhooks(a){let{data:b,error:c}=await this.supabase.from("webhooks").select("*").eq("organization_id",a).order("created_at",{ascending:!1});if(c)throw c;return b}async updateWebhook(a,b){let{data:c,error:d}=await this.supabase.from("webhooks").update(b).eq("id",a).select().single();if(d)throw d;return c}async deleteWebhook(a){let{error:b}=await this.supabase.from("webhooks").delete().eq("id",a);if(b)throw b}async triggerWebhook(a,b,c){let{data:d}=await this.supabase.from("webhooks").select("*").eq("id",a).eq("is_active",!0).single();if(!d)throw Error("Webhook non trouvé ou inactif");if(!d.events.includes(b))return null;let{data:e,error:f}=await this.supabase.from("webhook_deliveries").insert({webhook_id:a,event_type:b,event_data:c,status:"pending"}).select().single();if(f)throw f;return e}async sendWebhook(a){let{data:b}=await this.supabase.from("webhook_deliveries").select("*, webhook:webhooks(*)").eq("id",a).single();if(!b||!b.webhook)throw Error("Livraison non trouvée");let c=b.webhook,d=JSON.stringify({event:b.event_type,data:b.event_data,timestamp:new Date().toISOString()}),e=c.secret||"",f=i.default.createHmac("sha256",e).update(d).digest("hex");try{let e=await fetch(c.url,{method:"POST",headers:{"Content-Type":"application/json","X-Webhook-Signature":f,"X-Webhook-Event":b.event_type},body:d,signal:AbortSignal.timeout(1e3*(c.timeout_seconds||30))}),g=await e.text();return await this.supabase.from("webhook_deliveries").update({status:e.ok?"success":"failed",response_status_code:e.status,response_body:g,delivered_at:new Date().toISOString()}).eq("id",a),await this.supabase.from("webhooks").update({success_count:e.ok?(c.success_count||0)+1:c.success_count||0,failure_count:e.ok?c.failure_count||0:(c.failure_count||0)+1,last_triggered_at:new Date().toISOString()}).eq("id",c.id),{success:e.ok,status:e.status}}catch(d){let c=d instanceof Error?d.message:"Erreur inconnue";throw await this.supabase.from("webhook_deliveries").update({status:"failed",error_message:c,attempt_number:b.attempt_number+1,next_retry_at:b.attempt_number<b.max_attempts?new Date(Date.now()+3e5).toISOString():null}).eq("id",a),d}}async getWebhookDeliveries(a){let{data:b,error:c}=await this.supabase.from("webhook_deliveries").select("*").eq("webhook_id",a).order("created_at",{ascending:!1}).limit(100);if(c)throw c;return b}};var k=a.i(703130),l=a.i(340695),m=a.i(205522),n=a.i(917171),o=a.i(546893),p=a.i(621958),q=a.i(965733),r=a.i(481402),s=a.i(915618),t=a.i(781560),u=a.i(705151),v=a.i(177156),w=a.i(141379),x=a.i(452495),y=a.i(290821),z=a.i(495756),A=a.i(641710),B=a.i(497895),C=a.i(864037);function D(){let{user:a}=(0,g.useAuth)(),h=(0,f.useQueryClient)(),{addToast:i}=(0,C.useToast)(),D=a=>{i({title:a.title,description:a.description,type:a.type||a.variant||"success"})},[E,F]=(0,c.useState)(""),[G,H]=(0,c.useState)(""),[I,J]=(0,c.useState)([]),[K,L]=(0,c.useState)(null),[M,N]=(0,c.useState)(!1),{data:O}=(0,d.useQuery)({queryKey:["api-keys",a?.organization_id],queryFn:()=>j.getAPIKeys(a?.organization_id||""),enabled:!!a?.organization_id}),{data:P}=(0,d.useQuery)({queryKey:["webhooks",a?.organization_id],queryFn:()=>j.getWebhooks(a?.organization_id||""),enabled:!!a?.organization_id}),{data:Q}=(0,d.useQuery)({queryKey:["api-quota",a?.organization_id],queryFn:()=>j.getQuota(a?.organization_id||""),enabled:!!a?.organization_id}),R=(0,e.useMutation)({mutationFn:()=>j.createAPIKey(a?.organization_id||"",a?.id||"",E,{description:G,scopes:I}),onSuccess:a=>{L(a.key),h.invalidateQueries({queryKey:["api-keys"]}),F(""),H(""),J([]),D({title:"Clé API créée",description:"Votre clé API a été créée avec succès. Copiez-la maintenant, elle ne sera plus affichée."})}}),S=(0,e.useMutation)({mutationFn:a=>j.revokeAPIKey(a),onSuccess:()=>{h.invalidateQueries({queryKey:["api-keys"]}),D({title:"Clé API révoquée",description:"La clé API a été révoquée avec succès."})}}),T=a=>{navigator.clipboard.writeText(a),D({title:"Copié",description:"La clé API a été copiée dans le presse-papiers."})},U=[{value:"read:students",label:"Lire les étudiants"},{value:"write:students",label:"Créer/modifier les étudiants"},{value:"read:documents",label:"Lire les documents"},{value:"write:documents",label:"Créer/modifier les documents"},{value:"read:payments",label:"Lire les paiements"},{value:"write:payments",label:"Créer/modifier les paiements"},{value:"*",label:"Tous les accès"}];return(0,b.jsxs)("div",{className:"container mx-auto py-8 px-4 max-w-7xl",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[(0,b.jsx)(r.Key,{className:"h-8 w-8"}),"Gestion de l'API"]}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Gérez vos clés API et webhooks pour intégrer EDUZEN avec vos applications"})]}),(0,b.jsxs)(p.Tabs,{defaultValue:"keys",className:"space-y-6",children:[(0,b.jsxs)(p.TabsList,{children:[(0,b.jsx)(p.TabsTrigger,{value:"keys",children:"Clés API"}),(0,b.jsx)(p.TabsTrigger,{value:"webhooks",children:"Webhooks"}),(0,b.jsx)(p.TabsTrigger,{value:"quota",children:"Quotas"}),(0,b.jsx)(p.TabsTrigger,{value:"docs",children:"Documentation"})]}),(0,b.jsx)(p.TabsContent,{value:"keys",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-semibold",children:"Clés API"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Créez et gérez vos clés API pour accéder à l'API publique"})]}),(0,b.jsxs)(q.Dialog,{children:[(0,b.jsx)(q.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(l.Button,{children:[(0,b.jsx)(s.Plus,{className:"h-4 w-4 mr-2"}),"Nouvelle clé API"]})}),(0,b.jsxs)(q.DialogContent,{children:[(0,b.jsxs)(q.DialogHeader,{children:[(0,b.jsx)(q.DialogTitle,{children:"Créer une nouvelle clé API"}),(0,b.jsx)(q.DialogDescription,{children:"Créez une clé API pour accéder à l'API publique. Vous pourrez copier la clé une seule fois."})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(n.Label,{htmlFor:"key-name",children:"Nom"}),(0,b.jsx)(m.Input,{id:"key-name",value:E,onChange:a=>F(a.target.value),placeholder:"Ex: Production API, Development"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(n.Label,{htmlFor:"key-description",children:"Description"}),(0,b.jsx)(o.Textarea,{id:"key-description",value:G,onChange:a=>H(a.target.value),placeholder:"Description de l'utilisation de cette clé"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(n.Label,{children:"Permissions (Scopes)"}),(0,b.jsx)("div",{className:"space-y-2 mt-2",children:U.map(a=>(0,b.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:I.includes(a.value),onChange:b=>{b.target.checked?J([...I,a.value]):J(I.filter(b=>b!==a.value))}}),(0,b.jsx)("span",{className:"text-sm",children:a.label})]},a.value))})]}),(0,b.jsx)(l.Button,{onClick:()=>R.mutate(),disabled:!E||R.isPending,className:"w-full",children:"Créer la clé API"})]})]})]}),K&&(0,b.jsx)(q.Dialog,{open:!!K,onOpenChange:()=>L(null),children:(0,b.jsxs)(q.DialogContent,{children:[(0,b.jsxs)(q.DialogHeader,{children:[(0,b.jsx)(q.DialogTitle,{children:"Clé API créée"}),(0,b.jsx)(q.DialogDescription,{children:"Copiez cette clé maintenant. Elle ne sera plus affichée après la fermeture de cette fenêtre."})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(m.Input,{value:K,readOnly:!0,type:M?"text":"password",className:"font-mono"}),(0,b.jsx)(l.Button,{variant:"outline",size:"icon",onClick:()=>N(!M),children:M?(0,b.jsx)(w.EyeOff,{className:"h-4 w-4"}):(0,b.jsx)(v.Eye,{className:"h-4 w-4"})}),(0,b.jsx)(l.Button,{variant:"outline",size:"icon",onClick:()=>T(K),children:(0,b.jsx)(u.Copy,{className:"h-4 w-4"})})]}),(0,b.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 flex items-start gap-2",children:[(0,b.jsx)(y.AlertCircle,{className:"h-5 w-5 text-yellow-600 flex-shrink-0 mt-0.5"}),(0,b.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,b.jsx)("strong",{children:"Important :"})," Cette clé ne sera affichée qu'une seule fois. Assurez-vous de la copier et de la stocker en sécurité."]})]})]})]})})]}),O&&O.length>0?(0,b.jsx)("div",{className:"space-y-4",children:O.map(a=>(0,b.jsxs)(k.Card,{children:[(0,b.jsx)(k.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(k.CardTitle,{className:"text-lg",children:a.name}),a.description&&(0,b.jsx)(k.CardDescription,{className:"mt-1",children:a.description})]}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:a.is_active?(0,b.jsxs)("span",{className:"flex items-center gap-1 text-sm text-green-600",children:[(0,b.jsx)(z.CheckCircle,{className:"h-4 w-4"}),"Active"]}):(0,b.jsxs)("span",{className:"flex items-center gap-1 text-sm text-gray-500",children:[(0,b.jsx)(A.Clock,{className:"h-4 w-4"}),"Révoquée"]})})]})}),(0,b.jsx)(k.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-sm font-mono text-muted-foreground",children:a.key_prefix}),(0,b.jsx)(l.Button,{variant:"ghost",size:"sm",onClick:()=>T(a.key_prefix),children:(0,b.jsx)(u.Copy,{className:"h-3 w-3"})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Créée le"}),(0,b.jsx)("p",{className:"font-medium",children:(0,B.formatDate)(a.created_at)})]}),a.last_used_at&&(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Dernière utilisation"}),(0,b.jsx)("p",{className:"font-medium",children:(0,B.formatDate)(a.last_used_at)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Requêtes"}),(0,b.jsx)("p",{className:"font-medium",children:a.request_count||0})]}),a.expires_at&&(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Expire le"}),(0,b.jsx)("p",{className:"font-medium",children:(0,B.formatDate)(a.expires_at)})]})]}),a.scopes&&a.scopes.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Permissions :"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:a.scopes.map(a=>(0,b.jsx)("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded",children:U.find(b=>b.value===a)?.label||a},a))})]}),(0,b.jsx)("div",{className:"flex items-center gap-2 pt-2 border-t",children:a.is_active&&(0,b.jsxs)(l.Button,{variant:"destructive",size:"sm",onClick:()=>S.mutate(a.id),children:[(0,b.jsx)(t.Trash2,{className:"h-4 w-4 mr-2"}),"Révoquer"]})})]})})]},a.id))}):(0,b.jsx)(k.Card,{children:(0,b.jsx)(k.CardContent,{className:"pt-6 text-center text-muted-foreground",children:"Aucune clé API. Créez-en une pour commencer à utiliser l'API."})})]})}),(0,b.jsx)(p.TabsContent,{value:"webhooks",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-semibold",children:"Webhooks"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Configurez des webhooks pour recevoir des notifications d'événements"})]}),(0,b.jsxs)(l.Button,{children:[(0,b.jsx)(s.Plus,{className:"h-4 w-4 mr-2"}),"Nouveau webhook"]})]}),P&&P.length>0?(0,b.jsx)("div",{className:"space-y-4",children:P.map(a=>(0,b.jsxs)(k.Card,{children:[(0,b.jsx)(k.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(k.CardTitle,{className:"text-lg",children:a.name}),(0,b.jsx)(k.CardDescription,{className:"mt-1 font-mono text-xs",children:a.url})]}),a.is_active?(0,b.jsxs)("span",{className:"flex items-center gap-1 text-sm text-green-600",children:[(0,b.jsx)(z.CheckCircle,{className:"h-4 w-4"}),"Actif"]}):(0,b.jsxs)("span",{className:"flex items-center gap-1 text-sm text-gray-500",children:[(0,b.jsx)(A.Clock,{className:"h-4 w-4"}),"Inactif"]})]})}),(0,b.jsx)(k.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-3",children:[a.events&&a.events.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Événements :"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:a.events.map(a=>(0,b.jsx)("span",{className:"text-xs px-2 py-1 bg-purple-100 text-purple-800 rounded",children:a},a))})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Succès"}),(0,b.jsx)("p",{className:"font-medium",children:a.success_count||0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Échecs"}),(0,b.jsx)("p",{className:"font-medium",children:a.failure_count||0})]}),a.last_triggered_at&&(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Dernier déclenchement"}),(0,b.jsx)("p",{className:"font-medium",children:(0,B.formatDate)(a.last_triggered_at)})]})]})]})})]},a.id))}):(0,b.jsx)(k.Card,{children:(0,b.jsx)(k.CardContent,{className:"pt-6 text-center text-muted-foreground",children:"Aucun webhook configuré. Créez-en un pour recevoir des notifications."})})]})}),(0,b.jsx)(p.TabsContent,{value:"quota",children:(0,b.jsxs)(k.Card,{children:[(0,b.jsxs)(k.CardHeader,{children:[(0,b.jsx)(k.CardTitle,{children:"Quotas API"}),(0,b.jsx)(k.CardDescription,{children:"Limites d'utilisation de l'API pour votre organisation"})]}),(0,b.jsx)(k.CardContent,{children:Q?(0,b.jsx)("div",{className:"space-y-6",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:"Par minute"}),(0,b.jsxs)("span",{className:"text-sm text-muted-foreground",children:[Q.requests_used_minute||0," / ",Q.requests_per_minute||60]})]}),(0,b.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,b.jsx)("div",{className:"bg-primary h-2 rounded-full transition-all",style:{width:`${(Q.requests_used_minute||0)/(Q.requests_per_minute||60)*100}%`}})})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:"Par heure"}),(0,b.jsxs)("span",{className:"text-sm text-muted-foreground",children:[Q.requests_used_hour||0," / ",Q.requests_per_hour||1e3]})]}),(0,b.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,b.jsx)("div",{className:"bg-primary h-2 rounded-full transition-all",style:{width:`${(Q.requests_used_hour||0)/(Q.requests_per_hour||1e3)*100}%`}})})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:"Par jour"}),(0,b.jsxs)("span",{className:"text-sm text-muted-foreground",children:[Q.requests_used_day||0," / ",Q.requests_per_day||1e4]})]}),(0,b.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,b.jsx)("div",{className:"bg-primary h-2 rounded-full transition-all",style:{width:`${(Q.requests_used_day||0)/(Q.requests_per_day||1e4)*100}%`}})})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:"Par mois"}),(0,b.jsxs)("span",{className:"text-sm text-muted-foreground",children:[Q.requests_used_month||0," / ",Q.requests_per_month||1e5]})]}),(0,b.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,b.jsx)("div",{className:"bg-primary h-2 rounded-full transition-all",style:{width:`${(Q.requests_used_month||0)/(Q.requests_per_month||1e5)*100}%`}})})]})]})}):(0,b.jsx)("div",{className:"text-center text-muted-foreground",children:"Chargement des quotas..."})})]})}),(0,b.jsx)(p.TabsContent,{value:"docs",children:(0,b.jsxs)(k.Card,{children:[(0,b.jsxs)(k.CardHeader,{children:[(0,b.jsx)(k.CardTitle,{children:"Documentation API"}),(0,b.jsx)(k.CardDescription,{children:"Accédez à la documentation complète de l'API publique"})]}),(0,b.jsx)(k.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"La documentation OpenAPI/Swagger de l'API est disponible à l'adresse suivante :"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("code",{className:"px-3 py-2 bg-gray-100 rounded text-sm",children:["http://localhost:3000","/api/v1/docs"]}),(0,b.jsxs)(l.Button,{variant:"outline",size:"sm",onClick:()=>window.open("http://localhost:3000/api/v1/docs","_blank"),children:[(0,b.jsx)(x.ExternalLink,{className:"h-4 w-4 mr-2"}),"Ouvrir"]})]}),(0,b.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,b.jsx)("h3",{className:"font-semibold mb-2",children:"Utilisation de l'API"}),(0,b.jsxs)("ol",{className:"list-decimal list-inside space-y-2 text-sm text-muted-foreground",children:[(0,b.jsx)("li",{children:'Créez une clé API dans l\'onglet "Clés API"'}),(0,b.jsxs)("li",{children:["Utilisez cette clé dans l'en-tête ",(0,b.jsx)("code",{children:"X-API-Key"})," de vos requêtes"]}),(0,b.jsx)("li",{children:"Consultez la documentation pour voir tous les endpoints disponibles"}),(0,b.jsx)("li",{children:"Respectez les limites de rate limiting configurées"})]})]})]})})]})})]})]})}a.s(["default",()=>D],302919)}];

//# sourceMappingURL=app_%28dashboard%29_dashboard_settings_api_page_tsx_593b531e._.js.map