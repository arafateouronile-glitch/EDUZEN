module.exports=[641710,a=>{"use strict";let b=(0,a.i(170106).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);a.s(["Clock",()=>b],641710)},621958,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(497895);let e=c.createContext(void 0);function f({value:a,defaultValue:f,onValueChange:g,children:h,className:i}){let j=void 0!==a,[k,l]=c.useState(f??"");c.useEffect(()=>{j||void 0===f||l(f)},[f]);let m=j?a:k,n=c.useCallback(a=>{j||l(a),g?.(a)},[j,g]);return(0,b.jsx)(e.Provider,{value:{value:m,onValueChange:n},children:(0,b.jsx)("div",{className:(0,d.cn)("w-full",i),children:h})})}function g(){let a=c.useContext(e);if(!a)throw Error("Tabs components must be used within a Tabs component");return a}function h({children:a,className:c}){return(0,b.jsx)("div",{className:(0,d.cn)("inline-flex h-10 items-center justify-center rounded-lg bg-bg-gray-100 p-1 text-text-tertiary",c),children:a})}function i({value:a,children:c,className:e}){let{value:f,onValueChange:h}=g(),i=f===a;return(0,b.jsx)("button",{type:"button",onClick:()=>h(a),className:(0,d.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-outline-none focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",i?"bg-white text-text-primary shadow-sm":"text-text-tertiary hover:text-text-primary",e),children:c})}function j({value:a,children:c,className:e}){let{value:f}=g();return f!==a?null:(0,b.jsx)("div",{className:(0,d.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),children:c})}a.s(["Tabs",()=>f,"TabsContent",()=>j,"TabsList",()=>h,"TabsTrigger",()=>i])},821374,a=>{"use strict";let b=(0,a.i(170106).default)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);a.s(["Star",()=>b],821374)},122903,a=>{"use strict";var b=a.i(269240);let c=new class{supabase;constructor(a){this.supabase=a||(0,b.createClient)()}async getFAQCategories(a){let{data:b,error:c}=await this.supabase.from("faq_categories").select("*").eq("organization_id",a).eq("is_active",!0).order("order_index",{ascending:!0});if(c)throw c;return b}async createFAQCategory(a){let{data:b,error:c}=await this.supabase.from("faq_categories").insert(a).select().single();if(c)throw c;return b}async updateFAQCategory(a,b){let{data:c,error:d}=await this.supabase.from("faq_categories").update(b).eq("id",a).select().single();if(d)throw d;return c}async deleteFAQCategory(a){let{error:b}=await this.supabase.from("faq_categories").delete().eq("id",a);if(b)throw b}async getFAQItems(a,b){let c=this.supabase.from("faq_items").select("*, category:faq_categories(*)").eq("organization_id",a).eq("is_active",!0);b?.categoryId&&(c=c.eq("category_id",b.categoryId)),b?.search&&(c=c.or(`question.ilike.%${b.search}%,answer.ilike.%${b.search}%`)),b?.featured&&(c=c.eq("is_featured",!0));let{data:d,error:e}=await c.order("order_index",{ascending:!0}).order("view_count",{ascending:!1});if(e)throw e;return d}async getFAQItemById(a){let{data:b,error:c}=await this.supabase.from("faq_items").select("*, category:faq_categories(*)").eq("id",a).single();if(c)throw c;return b&&await this.supabase.rpc("increment_faq_view_count",{faq_uuid:b.id}),b}async createFAQItem(a){let{data:b,error:c}=await this.supabase.from("faq_items").insert(a).select().single();if(c)throw c;return b}async updateFAQItem(a,b){let{data:c,error:d}=await this.supabase.from("faq_items").update(b).eq("id",a).select().single();if(d)throw d;return c}async deleteFAQItem(a){let{error:b}=await this.supabase.from("faq_items").delete().eq("id",a);if(b)throw b}async createFAQFeedback(a,b,c,d){let{data:e,error:f}=await this.supabase.from("faq_feedback").insert({faq_id:a,user_id:b,is_helpful:c,comment:d}).select().single();if(f)throw f;return e}async getGuides(a,b){let c=this.supabase.from("guides").select("*, author:users(id, full_name, email)").eq("organization_id",a).eq("is_active",!0);b?.category&&(c=c.eq("category",b.category)),b?.difficulty&&(c=c.eq("difficulty",b.difficulty)),b?.search&&(c=c.or(`title.ilike.%${b.search}%,description.ilike.%${b.search}%,content.ilike.%${b.search}%`)),b?.featured&&(c=c.eq("is_featured",!0));let{data:d,error:e}=await c.order("published_at",{ascending:!1}).order("view_count",{ascending:!1});if(e)throw e;return d}async getGuideBySlug(a,b){let{data:c,error:d}=await this.supabase.from("guides").select("*, author:users(id, full_name, email), steps:guide_steps(*)").eq("slug",a).eq("organization_id",b).eq("is_active",!0).single();if(d)throw d;return c&&await this.supabase.rpc("increment_guide_view_count",{guide_uuid:c.id}),c}async createGuide(a){let{data:b,error:c}=await this.supabase.from("guides").insert(a).select().single();if(c)throw c;return b}async updateGuide(a,b){let{data:c,error:d}=await this.supabase.from("guides").update(b).eq("id",a).select().single();if(d)throw d;return c}async deleteGuide(a){let{error:b}=await this.supabase.from("guides").delete().eq("id",a);if(b)throw b}async getGuideSteps(a){let{data:b,error:c}=await this.supabase.from("guide_steps").select("*").eq("guide_id",a).order("step_number",{ascending:!0});if(c)throw c;return b}async createGuideStep(a){let{data:b,error:c}=await this.supabase.from("guide_steps").insert(a).select().single();if(c)throw c;return b}async updateGuideStep(a,b){let{data:c,error:d}=await this.supabase.from("guide_steps").update(b).eq("id",a).select().single();if(d)throw d;return c}async deleteGuideStep(a){let{error:b}=await this.supabase.from("guide_steps").delete().eq("id",a);if(b)throw b}async addGuideToFavorites(a,b){let{data:c,error:d}=await this.supabase.from("guide_favorites").insert({user_id:a,guide_id:b}).select().single();if(d)throw d;return c}async removeGuideFromFavorites(a,b){let{error:c}=await this.supabase.from("guide_favorites").delete().eq("user_id",a).eq("guide_id",b);if(c)throw c}async isGuideFavorite(a,b){let{data:c,error:d}=await this.supabase.from("guide_favorites").select("id").eq("user_id",a).eq("guide_id",b).maybeSingle();if(d)throw d;return!!c}async getUserFavoriteGuides(a){let{data:b,error:c}=await this.supabase.from("guide_favorites").select("*, guide:guides(*, author:users(id, full_name))").eq("user_id",a).order("created_at",{ascending:!1});if(c)throw c;return b}async getGuideProgress(a,b){let{data:c,error:d}=await this.supabase.from("guide_progress").select("*").eq("user_id",a).eq("guide_id",b).maybeSingle();if(d)throw d;return c}async updateGuideProgress(a,b,c,d){let e=await this.getGuideProgress(a,b),f=await this.getGuideSteps(b),g=d.length===f.length;if(e){let{data:a,error:b}=await this.supabase.from("guide_progress").update({current_step:c,completed_steps:d,is_completed:g,completed_at:g?new Date().toISOString():null}).eq("id",e.id).select().single();if(b)throw b;return a}{let{data:e,error:f}=await this.supabase.from("guide_progress").insert({user_id:a,guide_id:b,current_step:c,completed_steps:d,is_completed:g,completed_at:g?new Date().toISOString():null}).select().single();if(f)throw f;return e}}async markStepAsCompleted(a,b,c){let d=await this.getGuideProgress(a,b),e=d?.completed_steps||[];return e.includes(c)||e.push(c),this.updateGuideProgress(a,b,c,e)}};a.s(["knowledgeBaseService",0,c])},348838,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(433217),e=a.i(913216),f=a.i(122903),g=a.i(703130),h=a.i(205522),i=a.i(621958),j=a.i(587532),k=a.i(539833),l=a.i(953722),m=a.i(821374),n=a.i(641710),o=a.i(50522),p=a.i(238246),q=a.i(762180);function r(){let{user:a}=(0,e.useAuth)(),[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)("faq"),{data:v}=(0,d.useQuery)({queryKey:["faq-categories",a?.organization_id],queryFn:()=>f.knowledgeBaseService.getFAQCategories(a?.organization_id||""),enabled:!!a?.organization_id}),{data:w}=(0,d.useQuery)({queryKey:["faq-items",a?.organization_id,r],queryFn:()=>f.knowledgeBaseService.getFAQItems(a?.organization_id||"",{search:r||void 0}),enabled:!!a?.organization_id}),{data:x}=(0,d.useQuery)({queryKey:["guides",a?.organization_id,r],queryFn:()=>f.knowledgeBaseService.getGuides(a?.organization_id||"",{search:r||void 0}),enabled:!!a?.organization_id}),{data:y}=(0,d.useQuery)({queryKey:["featured-guides",a?.organization_id],queryFn:()=>f.knowledgeBaseService.getGuides(a?.organization_id||"",{featured:!0}),enabled:!!a?.organization_id}),{data:z}=(0,d.useQuery)({queryKey:["featured-faqs",a?.organization_id],queryFn:()=>f.knowledgeBaseService.getFAQItems(a?.organization_id||"",{featured:!0}),enabled:!!a?.organization_id}),A=a=>{switch(a){case"beginner":return"bg-green-100 text-green-800";case"intermediate":return"bg-yellow-100 text-yellow-800";case"advanced":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},B=a=>{switch(a){case"beginner":return"Débutant";case"intermediate":return"Intermédiaire";case"advanced":return"Avancé";default:return a}};return(0,b.jsxs)("div",{className:"container mx-auto py-8 px-4 max-w-7xl",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Base de connaissances"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Trouvez des réponses rapides et des guides détaillés"})]}),(0,b.jsx)(g.Card,{className:"mb-8",children:(0,b.jsx)(g.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(j.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),(0,b.jsx)(h.Input,{type:"text",placeholder:"Rechercher dans la base de connaissances...",value:r,onChange:a=>s(a.target.value),className:"pl-10"})]})})}),(0,b.jsxs)(i.Tabs,{value:t,onValueChange:u,children:[(0,b.jsxs)(i.TabsList,{className:"mb-6",children:[(0,b.jsxs)(i.TabsTrigger,{value:"faq",children:[(0,b.jsx)(k.HelpCircle,{className:"h-4 w-4 mr-2"}),"FAQ"]}),(0,b.jsxs)(i.TabsTrigger,{value:"guides",children:[(0,b.jsx)(l.BookOpen,{className:"h-4 w-4 mr-2"}),"Guides"]})]}),(0,b.jsxs)(i.TabsContent,{value:"faq",children:[z&&z.length>0&&(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsxs)("h2",{className:"text-2xl font-semibold mb-4 flex items-center gap-2",children:[(0,b.jsx)(m.Star,{className:"h-6 w-6 text-yellow-500"}),"Questions fréquentes en vedette"]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:z.map(a=>(0,b.jsx)(g.Card,{className:"hover:shadow-lg transition-shadow",children:(0,b.jsxs)(p.default,{href:`/dashboard/knowledge-base/faq/${a.id}`,children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsx)(g.CardTitle,{className:"text-lg",children:a.question})}),(0,b.jsxs)(g.CardContent,{children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground line-clamp-2",children:(0,b.jsx)(q.default,{children:a.answer})}),(0,b.jsxs)("div",{className:"flex items-center justify-between mt-4 text-xs text-muted-foreground",children:[(0,b.jsx)("span",{children:a.category?.name}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("span",{children:[a.view_count," vues"]}),a.helpful_count>0&&(0,b.jsxs)("span",{className:"text-green-600",children:[a.helpful_count," utile",a.helpful_count>1?"s":""]})]})]})]})]})},a.id))})]}),v&&v.length>0&&(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Par catégorie"}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:v.map(a=>{let c=w?.filter(b=>b.category_id===a.id)||[];return(0,b.jsx)(g.Card,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:(0,b.jsxs)(p.default,{href:`/dashboard/knowledge-base/faq/category/${a.slug}`,children:[(0,b.jsxs)(g.CardHeader,{children:[(0,b.jsxs)(g.CardTitle,{className:"flex items-center gap-2",children:[a.icon&&(0,b.jsx)("span",{className:"text-2xl",children:a.icon}),a.name]}),a.description&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.description})]}),(0,b.jsx)(g.CardContent,{children:(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[c.length," question",c.length>1?"s":""]})})]})},a.id)})})]}),w&&w.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Toutes les questions"}),(0,b.jsx)("div",{className:"space-y-4",children:w.map(a=>(0,b.jsx)(g.Card,{className:"hover:shadow-lg transition-shadow",children:(0,b.jsx)(p.default,{href:`/dashboard/knowledge-base/faq/${a.id}`,children:(0,b.jsx)(g.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"font-semibold text-lg mb-2",children:a.question}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground line-clamp-2",children:(0,b.jsx)(q.default,{children:a.answer})}),(0,b.jsxs)("div",{className:"flex items-center gap-4 mt-3 text-xs text-muted-foreground",children:[(0,b.jsx)("span",{children:a.category?.name}),(0,b.jsxs)("span",{children:[a.view_count," vues"]}),a.helpful_count>0&&(0,b.jsxs)("span",{className:"text-green-600",children:[a.helpful_count," utile",a.helpful_count>1?"s":""]})]})]}),(0,b.jsx)(o.ChevronRight,{className:"h-5 w-5 text-muted-foreground"})]})})})},a.id))})]})]}),(0,b.jsxs)(i.TabsContent,{value:"guides",children:[y&&y.length>0&&(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsxs)("h2",{className:"text-2xl font-semibold mb-4 flex items-center gap-2",children:[(0,b.jsx)(m.Star,{className:"h-6 w-6 text-yellow-500"}),"Guides en vedette"]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map(a=>(0,b.jsx)(g.Card,{className:"hover:shadow-lg transition-shadow",children:(0,b.jsxs)(p.default,{href:`/dashboard/knowledge-base/guides/${a.slug}`,children:[(0,b.jsxs)(g.CardHeader,{children:[(0,b.jsx)(g.CardTitle,{className:"text-lg",children:a.title}),a.description&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.description})]}),(0,b.jsx)(g.CardContent,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[(0,b.jsx)("span",{className:`px-2 py-1 rounded ${A(a.difficulty)}`,children:B(a.difficulty)}),a.estimated_time_minutes&&(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(n.Clock,{className:"h-3 w-3"}),(0,b.jsxs)("span",{children:[a.estimated_time_minutes," min"]})]})]})})]})},a.id))})]}),x&&x.length>0?(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Tous les guides"}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:x.map(a=>(0,b.jsx)(g.Card,{className:"hover:shadow-lg transition-shadow",children:(0,b.jsxs)(p.default,{href:`/dashboard/knowledge-base/guides/${a.slug}`,children:[(0,b.jsxs)(g.CardHeader,{children:[(0,b.jsx)(g.CardTitle,{children:a.title}),a.description&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.description})]}),(0,b.jsx)(g.CardContent,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:`px-2 py-1 rounded ${A(a.difficulty)}`,children:B(a.difficulty)}),a.category&&(0,b.jsx)("span",{children:a.category})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[a.estimated_time_minutes&&(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(n.Clock,{className:"h-3 w-3"}),(0,b.jsxs)("span",{children:[a.estimated_time_minutes," min"]})]}),(0,b.jsxs)("span",{children:[a.view_count," vues"]})]})]})})]})},a.id))})]}):(0,b.jsx)(g.Card,{children:(0,b.jsx)(g.CardContent,{className:"pt-6 text-center text-muted-foreground",children:"Aucun guide disponible"})})]})]})]})}a.s(["default",()=>r])}];

//# sourceMappingURL=_b324165e._.js.map