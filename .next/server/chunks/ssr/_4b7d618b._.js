module.exports=[219897,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(497895);a.i(460355);var e=a.i(346271);let f=c.forwardRef(({className:a,variant:c="default",hoverable:f=!1,glow:g=!1,glowColor:h="rgba(51, 90, 207, 0.3)",...i},j)=>(0,b.jsxs)(e.motion.div,{ref:j,className:(0,d.cn)("relative rounded-2xl border backdrop-blur-xl transition-all duration-300",{"bg-white/70 dark:bg-gray-900/70 border-white/20 dark:border-gray-700/30 shadow-lg":"default"===c,"bg-white/80 dark:bg-gray-900/80 border-white/30 dark:border-gray-700/40 shadow-xl":"premium"===c,"bg-white/50 dark:bg-gray-900/50 border-white/10 dark:border-gray-700/20 shadow-md":"subtle"===c,"cursor-pointer":f,"hover:shadow-2xl hover:scale-[1.02]":f,"hover:bg-white/90 dark:hover:bg-gray-900/90":f},a),whileHover:f?{scale:1.02,y:-2}:void 0,transition:{type:"spring",stiffness:300,damping:30},...i,children:[g&&(0,b.jsx)(e.motion.div,{className:"absolute inset-0 rounded-2xl opacity-0 blur-xl",style:{background:`radial-gradient(circle, ${h} 0%, transparent 70%)`},animate:{opacity:[0,.5,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}}),(0,b.jsx)("div",{className:"relative z-10",children:i.children})]}));f.displayName="GlassCard",a.s(["GlassCard",()=>f])},992258,a=>{"use strict";let b=(0,a.i(170106).default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);a.s(["Mail",()=>b],992258)},692759,a=>{"use strict";let b=(0,a.i(170106).default)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);a.s(["Send",()=>b],692759)},193767,a=>{"use strict";let b=new class{async blobToBase64(a){return new Promise((b,c)=>{let d=new FileReader;d.onloadend=()=>{b(d.result.split(",")[1])},d.onerror=c,d.readAsDataURL(a)})}async sendEmail(a){try{let b=a.attachments?await Promise.all(a.attachments.map(async a=>{let b;if(a.content instanceof Blob)b=await this.blobToBase64(a.content);else if(a.content instanceof ArrayBuffer){let c=new Blob([a.content],{type:a.contentType});b=await this.blobToBase64(c)}else b=a.content;return{filename:a.filename,content:b,contentType:a.contentType}})):void 0,c=await fetch("/api/email/send",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({to:a.to,subject:a.subject,html:a.html,text:a.text,attachments:b,cc:a.cc,bcc:a.bcc,replyTo:a.replyTo})});if(!c.ok){let a=await c.json();throw Error(a.message||"Erreur lors de l'envoi de l'email")}let d=await c.json();return{success:!0,message:d.message||"Email envoyé avec succès"}}catch(a){throw Error(a instanceof Error?a.message:"Erreur lors de l'envoi de l'email")}}async sendDocument(a,b,c,d,e,f){return this.sendEmail({to:a,subject:b,html:e,text:f,attachments:[{filename:d,content:c,contentType:"application/pdf"}]})}async sendMultipleDocuments(a,b,c,d,e){return this.sendEmail({to:a,subject:b,html:d,text:e,attachments:c.map(a=>({filename:a.filename,content:a.blob,contentType:"application/pdf"}))})}};a.s(["emailService",0,b])},237631,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(370025),e=a.i(913216),f=a.i(193767),g=a.i(340695),h=a.i(205522),i=a.i(917171),j=a.i(546893),k=a.i(219897),l=a.i(864037),m=a.i(992258),n=a.i(692759),o=a.i(290821),p=a.i(526017);function q(){let{user:a}=(0,e.useAuth)(),{addToast:q}=(0,l.useToast)(),[r,s]=(0,c.useState)({to:"",subject:"Test d'envoi d'email - EDUZEN",html:`
      <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;">
        <h1 style="color: #335ACF;">Test d'envoi d'email</h1>
        <p>Bonjour,</p>
        <p>Ceci est un email de test depuis l'application EDUZEN.</p>
        <p>Si vous recevez cet email, cela signifie que la configuration d'envoi d'emails fonctionne correctement.</p>
        <hr style="border: none; border-top: 1px solid #eee; margin: 20px 0;">
        <p style="color: #666; font-size: 12px;">
          Cet email a \xe9t\xe9 envoy\xe9 depuis le syst\xe8me de test d'emails.
        </p>
      </div>
    `,text:"Test d'envoi d'email - EDUZEN\n\nBonjour,\n\nCeci est un email de test depuis l'application EDUZEN.\n\nSi vous recevez cet email, cela signifie que la configuration d'envoi d'emails fonctionne correctement."}),t=(0,d.useMutation)({mutationFn:async()=>f.emailService.sendEmail({to:r.to,subject:r.subject,html:r.html,text:r.text}),onSuccess:a=>{q({type:"success",title:"Email envoyé",description:a.message||"L'email de test a été envoyé avec succès."})},onError:a=>{q({type:"error",title:"Erreur",description:a.message||"Une erreur est survenue lors de l'envoi de l'email."})}});return(0,b.jsxs)("div",{className:"space-y-6 pb-8 max-w-4xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-brand-blue-ghost rounded-xl",children:(0,b.jsx)(m.Mail,{className:"h-8 w-8 text-brand-blue"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-4xl font-bold text-gray-900 tracking-tight",children:"Test d'envoi d'emails"}),(0,b.jsx)("p",{className:"text-gray-500 font-medium mt-1",children:"Tester la configuration d'envoi d'emails"})]})]}),(0,b.jsx)(k.GlassCard,{variant:"premium",className:"p-6",children:(0,b.jsx)("div",{className:"flex items-start gap-4",children:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.AlertCircle,{className:"h-6 w-6 text-amber-600 flex-shrink-0 mt-0.5"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:"Mode test activé"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Aucune clé API Resend trouvée. Les emails sont simulés (aucun email réel ne sera envoyé)."}),(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:["Pour activer l'envoi réel : ajoutez ",(0,b.jsx)("code",{className:"bg-gray-100 px-1 rounded",children:"RESEND_API_KEY"})," dans votre fichier ",(0,b.jsx)("code",{className:"bg-gray-100 px-1 rounded",children:".env.local"})]})]})]})})}),(0,b.jsx)(k.GlassCard,{variant:"default",className:"p-6",children:(0,b.jsxs)("form",{onSubmit:a=>{(a.preventDefault(),r.to)?t.mutate():q({type:"error",title:"Erreur",description:"Veuillez saisir une adresse email de destination."})},className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{htmlFor:"to",className:"text-base font-semibold",children:"Destinataire *"}),(0,b.jsx)(h.Input,{id:"to",type:"email",placeholder:"votre-email@exemple.com",value:r.to,onChange:a=>s({...r,to:a.target.value}),required:!0,className:"mt-2"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Entrez votre adresse email pour recevoir l'email de test"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{htmlFor:"subject",className:"text-base font-semibold",children:"Sujet"}),(0,b.jsx)(h.Input,{id:"subject",type:"text",value:r.subject,onChange:a=>s({...r,subject:a.target.value}),className:"mt-2"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{htmlFor:"html",className:"text-base font-semibold",children:"Contenu HTML"}),(0,b.jsx)(j.Textarea,{id:"html",rows:10,value:r.html,onChange:a=>s({...r,html:a.target.value}),className:"mt-2 font-mono text-sm"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Contenu HTML de l'email"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{htmlFor:"text",className:"text-base font-semibold",children:"Contenu texte (alternative)"}),(0,b.jsx)(j.Textarea,{id:"text",rows:5,value:r.text,onChange:a=>s({...r,text:a.target.value}),className:"mt-2"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Version texte de l'email (pour les clients email qui ne supportent pas HTML)"})]}),(0,b.jsx)("div",{className:"flex items-center justify-end gap-3 pt-4 border-t",children:(0,b.jsx)(g.Button,{type:"submit",disabled:t.isPending||!r.to,className:"min-w-[150px]",children:t.isPending?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Envoi..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(n.Send,{className:"mr-2 h-4 w-4"}),"Envoyer l'email de test"]})})})]})}),(0,b.jsxs)(k.GlassCard,{variant:"default",className:"p-6",children:[(0,b.jsxs)("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,b.jsx)(o.AlertCircle,{className:"h-5 w-5 text-brand-blue"}),"Instructions"]}),(0,b.jsxs)("div",{className:"space-y-3 text-sm text-gray-600",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-gray-900 mb-1",children:"1. Configuration Resend"}),(0,b.jsxs)("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[(0,b.jsxs)("li",{children:["Créez un compte sur ",(0,b.jsx)("a",{href:"https://resend.com",target:"_blank",rel:"noopener noreferrer",className:"text-brand-blue hover:underline",children:"resend.com"})]}),(0,b.jsx)("li",{children:"Obtenez votre clé API dans le dashboard"}),(0,b.jsxs)("li",{children:["Ajoutez ",(0,b.jsx)("code",{className:"bg-gray-100 px-1 rounded",children:"RESEND_API_KEY=re_votre_cle"})," dans ",(0,b.jsx)("code",{className:"bg-gray-100 px-1 rounded",children:".env.local"})]}),(0,b.jsx)("li",{children:"Redémarrez le serveur Next.js"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-gray-900 mb-1",children:"2. Test"}),(0,b.jsxs)("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[(0,b.jsx)("li",{children:'Entrez votre adresse email dans le champ "Destinataire"'}),(0,b.jsx)("li",{children:"Personnalisez le sujet et le contenu si nécessaire"}),(0,b.jsx)("li",{children:'Cliquez sur "Envoyer l\'email de test"'}),(0,b.jsx)("li",{children:"Vérifiez votre boîte de réception (et les spams)"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-gray-900 mb-1",children:"3. Mode test"}),(0,b.jsx)("p",{className:"ml-2",children:"Si Resend n'est pas configuré, les emails sont simulés. Vous verrez les logs dans la console serveur mais aucun email réel ne sera envoyé."})]})]})]})]})}a.s(["default",()=>q])}];

//# sourceMappingURL=_4b7d618b._.js.map