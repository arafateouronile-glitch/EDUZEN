module.exports=[400210,a=>{"use strict";let b=(0,a.i(170106).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],400210)},177156,a=>{"use strict";let b=(0,a.i(170106).default)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Eye",()=>b],177156)},122903,a=>{"use strict";var b=a.i(269240);let c=new class{supabase;constructor(a){this.supabase=a||(0,b.createClient)()}async getFAQCategories(a){let{data:b,error:c}=await this.supabase.from("faq_categories").select("*").eq("organization_id",a).eq("is_active",!0).order("order_index",{ascending:!0});if(c)throw c;return b}async createFAQCategory(a){let{data:b,error:c}=await this.supabase.from("faq_categories").insert(a).select().single();if(c)throw c;return b}async updateFAQCategory(a,b){let{data:c,error:d}=await this.supabase.from("faq_categories").update(b).eq("id",a).select().single();if(d)throw d;return c}async deleteFAQCategory(a){let{error:b}=await this.supabase.from("faq_categories").delete().eq("id",a);if(b)throw b}async getFAQItems(a,b){let c=this.supabase.from("faq_items").select("*, category:faq_categories(*)").eq("organization_id",a).eq("is_active",!0);b?.categoryId&&(c=c.eq("category_id",b.categoryId)),b?.search&&(c=c.or(`question.ilike.%${b.search}%,answer.ilike.%${b.search}%`)),b?.featured&&(c=c.eq("is_featured",!0));let{data:d,error:e}=await c.order("order_index",{ascending:!0}).order("view_count",{ascending:!1});if(e)throw e;return d}async getFAQItemById(a){let{data:b,error:c}=await this.supabase.from("faq_items").select("*, category:faq_categories(*)").eq("id",a).single();if(c)throw c;return b&&await this.supabase.rpc("increment_faq_view_count",{faq_uuid:b.id}),b}async createFAQItem(a){let{data:b,error:c}=await this.supabase.from("faq_items").insert(a).select().single();if(c)throw c;return b}async updateFAQItem(a,b){let{data:c,error:d}=await this.supabase.from("faq_items").update(b).eq("id",a).select().single();if(d)throw d;return c}async deleteFAQItem(a){let{error:b}=await this.supabase.from("faq_items").delete().eq("id",a);if(b)throw b}async createFAQFeedback(a,b,c,d){let{data:e,error:f}=await this.supabase.from("faq_feedback").insert({faq_id:a,user_id:b,is_helpful:c,comment:d}).select().single();if(f)throw f;return e}async getGuides(a,b){let c=this.supabase.from("guides").select("*, author:users(id, full_name, email)").eq("organization_id",a).eq("is_active",!0);b?.category&&(c=c.eq("category",b.category)),b?.difficulty&&(c=c.eq("difficulty",b.difficulty)),b?.search&&(c=c.or(`title.ilike.%${b.search}%,description.ilike.%${b.search}%,content.ilike.%${b.search}%`)),b?.featured&&(c=c.eq("is_featured",!0));let{data:d,error:e}=await c.order("published_at",{ascending:!1}).order("view_count",{ascending:!1});if(e)throw e;return d}async getGuideBySlug(a,b){let{data:c,error:d}=await this.supabase.from("guides").select("*, author:users(id, full_name, email), steps:guide_steps(*)").eq("slug",a).eq("organization_id",b).eq("is_active",!0).single();if(d)throw d;return c&&await this.supabase.rpc("increment_guide_view_count",{guide_uuid:c.id}),c}async createGuide(a){let{data:b,error:c}=await this.supabase.from("guides").insert(a).select().single();if(c)throw c;return b}async updateGuide(a,b){let{data:c,error:d}=await this.supabase.from("guides").update(b).eq("id",a).select().single();if(d)throw d;return c}async deleteGuide(a){let{error:b}=await this.supabase.from("guides").delete().eq("id",a);if(b)throw b}async getGuideSteps(a){let{data:b,error:c}=await this.supabase.from("guide_steps").select("*").eq("guide_id",a).order("step_number",{ascending:!0});if(c)throw c;return b}async createGuideStep(a){let{data:b,error:c}=await this.supabase.from("guide_steps").insert(a).select().single();if(c)throw c;return b}async updateGuideStep(a,b){let{data:c,error:d}=await this.supabase.from("guide_steps").update(b).eq("id",a).select().single();if(d)throw d;return c}async deleteGuideStep(a){let{error:b}=await this.supabase.from("guide_steps").delete().eq("id",a);if(b)throw b}async addGuideToFavorites(a,b){let{data:c,error:d}=await this.supabase.from("guide_favorites").insert({user_id:a,guide_id:b}).select().single();if(d)throw d;return c}async removeGuideFromFavorites(a,b){let{error:c}=await this.supabase.from("guide_favorites").delete().eq("user_id",a).eq("guide_id",b);if(c)throw c}async isGuideFavorite(a,b){let{data:c,error:d}=await this.supabase.from("guide_favorites").select("id").eq("user_id",a).eq("guide_id",b).maybeSingle();if(d)throw d;return!!c}async getUserFavoriteGuides(a){let{data:b,error:c}=await this.supabase.from("guide_favorites").select("*, guide:guides(*, author:users(id, full_name))").eq("user_id",a).order("created_at",{ascending:!1});if(c)throw c;return b}async getGuideProgress(a,b){let{data:c,error:d}=await this.supabase.from("guide_progress").select("*").eq("user_id",a).eq("guide_id",b).maybeSingle();if(d)throw d;return c}async updateGuideProgress(a,b,c,d){let e=await this.getGuideProgress(a,b),f=await this.getGuideSteps(b),g=d.length===f.length;if(e){let{data:a,error:b}=await this.supabase.from("guide_progress").update({current_step:c,completed_steps:d,is_completed:g,completed_at:g?new Date().toISOString():null}).eq("id",e.id).select().single();if(b)throw b;return a}{let{data:e,error:f}=await this.supabase.from("guide_progress").insert({user_id:a,guide_id:b,current_step:c,completed_steps:d,is_completed:g,completed_at:g?new Date().toISOString():null}).select().single();if(f)throw f;return e}}async markStepAsCompleted(a,b,c){let d=await this.getGuideProgress(a,b),e=d?.completed_steps||[];return e.includes(c)||e.push(c),this.updateGuideProgress(a,b,c,e)}};a.s(["knowledgeBaseService",0,c])},590545,a=>{"use strict";let b=(0,a.i(170106).default)("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);a.s(["ThumbsUp",()=>b],590545)},444564,a=>{"use strict";var b=a.i(187924),c=a.i(50944),d=a.i(433217),e=a.i(913216),f=a.i(122903),g=a.i(703130),h=a.i(340695),i=a.i(400210),j=a.i(539833),k=a.i(177156),l=a.i(590545),m=a.i(238246),n=a.i(762180);function o(){let a=(0,c.useParams)().slug,{user:o}=(0,e.useAuth)(),{data:p}=(0,d.useQuery)({queryKey:["faq-category",a,o?.organization_id],queryFn:async()=>(await f.knowledgeBaseService.getFAQCategories(o?.organization_id||"")).find(b=>b.slug===a),enabled:!!a&&!!o?.organization_id}),{data:q}=(0,d.useQuery)({queryKey:["faq-items-category",a,o?.organization_id],queryFn:()=>f.knowledgeBaseService.getFAQItems(o?.organization_id||"",{categoryId:p?.id}),enabled:!!p?.id&&!!o?.organization_id});return(0,b.jsxs)("div",{className:"container mx-auto py-8 px-4 max-w-5xl",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)(m.default,{href:"/dashboard/knowledge-base",children:(0,b.jsxs)(h.Button,{variant:"ghost",size:"sm",className:"mb-4",children:[(0,b.jsx)(i.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Retour à la base de connaissances"]})}),p&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[(0,b.jsx)(j.HelpCircle,{className:"h-8 w-8"}),p.name]}),p.description&&(0,b.jsx)("p",{className:"text-muted-foreground",children:p.description})]})]}),q&&q.length>0?(0,b.jsx)("div",{className:"space-y-4",children:q.map(a=>(0,b.jsx)(g.Card,{className:"hover:shadow-lg transition-shadow",children:(0,b.jsxs)(m.default,{href:`/dashboard/knowledge-base/faq/${a.id}`,children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsx)(g.CardTitle,{className:"text-lg",children:a.question})}),(0,b.jsxs)(g.CardContent,{children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground line-clamp-2 mb-3",children:(0,b.jsx)(n.default,{children:a.answer})}),(0,b.jsxs)("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(k.Eye,{className:"h-3 w-3"}),(0,b.jsxs)("span",{children:[a.view_count," vues"]})]}),a.helpful_count>0&&(0,b.jsxs)("div",{className:"flex items-center gap-1 text-green-600",children:[(0,b.jsx)(l.ThumbsUp,{className:"h-3 w-3"}),(0,b.jsxs)("span",{children:[a.helpful_count," utile",a.helpful_count>1?"s":""]})]})]})]})]})},a.id))}):(0,b.jsx)(g.Card,{children:(0,b.jsx)(g.CardContent,{className:"pt-6 text-center text-muted-foreground",children:"Aucune question disponible dans cette catégorie"})})]})}a.s(["default",()=>o])}];

//# sourceMappingURL=_c087261a._.js.map