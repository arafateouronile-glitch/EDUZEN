module.exports=[400210,a=>{"use strict";let b=(0,a.i(170106).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],400210)},114548,a=>{"use strict";let b=(0,a.i(170106).default)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);a.s(["Save",()=>b],114548)},992258,a=>{"use strict";let b=(0,a.i(170106).default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);a.s(["Mail",()=>b],992258)},963519,a=>{"use strict";let b=(0,a.i(170106).default)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);a.s(["Phone",()=>b],963519)},717371,a=>{"use strict";let b=(0,a.i(170106).default)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);a.s(["UserPlus",()=>b],717371)},965923,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(370025),f=a.i(937927),g=a.i(913216),h=a.i(340695),i=a.i(703130),j=a.i(205522),k=a.i(917171),l=a.i(864037),m=a.i(400210),n=a.i(717371),o=a.i(992258),p=a.i(963519),q=a.i(546842),r=a.i(603314),s=a.i(114548),t=a.i(669520),u=a.i(238246);let v=[{value:"admin",label:"Administrateur"},{value:"teacher",label:"Enseignant"},{value:"secretary",label:"Secrétaire"},{value:"accountant",label:"Comptable"},{value:"parent",label:"Parent"},{value:"student",label:"Étudiant"}];function w(){let a=(0,d.useRouter)(),{user:w}=(0,g.useAuth)(),{addToast:x}=(0,l.useToast)(),y=(0,f.useQueryClient)(),[z,A]=(0,c.useState)({email:"",password:"",confirmPassword:"",full_name:"",phone:"",role:"teacher",is_active:!0}),B=(0,e.useMutation)({mutationFn:async a=>{let b=await fetch("/api/users/create",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:a.email,password:a.password,full_name:a.full_name,phone:a.phone||null,role:a.role,is_active:a.is_active,organization_id:w?.organization_id})});if(!b.ok){let a="Erreur lors de la création de l'utilisateur",c=null;try{let d=await b.json();a=d.error||a,c=d.details||d.code||null,console.error("❌ [CREATE USER] Erreur API:",d),c&&console.error("❌ [CREATE USER] Détails:",c)}catch(c){console.error("❌ [CREATE USER] Erreur lors de la lecture de la réponse:",c),a=`Erreur ${b.status}: ${b.statusText}`}throw Error(c?`${a} (${c})`:a)}return b.json()},onSuccess:()=>{y.invalidateQueries({queryKey:["organization-users"]}),y.refetchQueries({queryKey:["organization-users"]}),x({type:"success",title:"Succès",description:"L'utilisateur a été créé avec succès"}),setTimeout(()=>{a.push("/dashboard/settings/users")},300)},onError:a=>{console.error("❌ [CREATE USER] Erreur:",a),x({type:"error",title:"Erreur",description:a.message||"Une erreur est survenue lors de la création"})}});return(0,b.jsxs)("div",{className:"container mx-auto py-8 px-4 max-w-3xl",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsxs)(u.default,{href:"/dashboard/settings/users",className:"inline-flex items-center text-sm text-muted-foreground hover:text-foreground mb-4",children:[(0,b.jsx)(m.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Retour à la liste des utilisateurs"]}),(0,b.jsxs)("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[(0,b.jsx)(n.UserPlus,{className:"h-8 w-8 text-brand-blue"}),"Créer un nouvel utilisateur"]}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Ajoutez un nouvel utilisateur à votre organisation"})]}),(0,b.jsxs)(i.Card,{children:[(0,b.jsxs)(i.CardHeader,{children:[(0,b.jsx)(i.CardTitle,{children:"Informations de l'utilisateur"}),(0,b.jsx)(i.CardDescription,{children:"Remplissez les informations pour créer un nouvel utilisateur"})]}),(0,b.jsx)(i.CardContent,{children:(0,b.jsxs)("form",{onSubmit:a=>{(a.preventDefault(),z.email&&z.password&&z.full_name)?z.password.length<8?x({type:"error",title:"Erreur",description:"Le mot de passe doit contenir au moins 8 caractères"}):z.password!==z.confirmPassword?x({type:"error",title:"Erreur",description:"Les mots de passe ne correspondent pas"}):B.mutate(z):x({type:"error",title:"Erreur",description:"Veuillez remplir tous les champs obligatoires"})},className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)(k.Label,{htmlFor:"full_name",children:[(0,b.jsx)(q.User,{className:"h-4 w-4 inline mr-2"}),"Nom complet ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(j.Input,{id:"full_name",type:"text",value:z.full_name,onChange:a=>A({...z,full_name:a.target.value}),placeholder:"Jean Dupont",required:!0,className:"mt-2"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)(k.Label,{htmlFor:"email",children:[(0,b.jsx)(o.Mail,{className:"h-4 w-4 inline mr-2"}),"Email ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(j.Input,{id:"email",type:"email",value:z.email,onChange:a=>A({...z,email:a.target.value}),placeholder:"jean.dupont@example.com",required:!0,className:"mt-2"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)(k.Label,{htmlFor:"phone",children:[(0,b.jsx)(p.Phone,{className:"h-4 w-4 inline mr-2"}),"Téléphone"]}),(0,b.jsx)(j.Input,{id:"phone",type:"tel",value:z.phone,onChange:a=>A({...z,phone:a.target.value}),placeholder:"+221 77 123 45 67",className:"mt-2"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)(k.Label,{htmlFor:"role",children:[(0,b.jsx)(r.Shield,{className:"h-4 w-4 inline mr-2"}),"Rôle ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("select",{id:"role",value:z.role,onChange:a=>A({...z,role:a.target.value}),className:"mt-2 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",required:!0,children:v.map(a=>(0,b.jsx)("option",{value:a.value,children:a.label},a.value))})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)(k.Label,{htmlFor:"password",children:["Mot de passe ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(j.Input,{id:"password",type:"password",value:z.password,onChange:a=>A({...z,password:a.target.value}),placeholder:"Minimum 8 caractères",required:!0,minLength:8,className:"mt-2"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Le mot de passe doit contenir au moins 8 caractères"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)(k.Label,{htmlFor:"confirmPassword",children:["Confirmer le mot de passe ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(j.Input,{id:"confirmPassword",type:"password",value:z.confirmPassword,onChange:a=>A({...z,confirmPassword:a.target.value}),placeholder:"Répétez le mot de passe",required:!0,className:"mt-2"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("input",{type:"checkbox",id:"is_active",checked:z.is_active,onChange:a=>A({...z,is_active:a.target.checked}),className:"h-4 w-4 rounded border-gray-300 text-brand-blue focus:ring-brand-blue"}),(0,b.jsx)(k.Label,{htmlFor:"is_active",className:"cursor-pointer",children:"Activer l'utilisateur immédiatement"})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-4 pt-4",children:[(0,b.jsx)(h.Button,{type:"button",variant:"outline",onClick:()=>a.push("/dashboard/settings/users"),disabled:B.isPending,children:"Annuler"}),(0,b.jsx)(h.Button,{type:"submit",disabled:B.isPending,children:B.isPending?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(t.RefreshCw,{className:"h-4 w-4 mr-2 animate-spin"}),"Création..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(s.Save,{className:"h-4 w-4 mr-2"}),"Créer l'utilisateur"]})})]})]})})]})]})}a.s(["default",()=>w])}];

//# sourceMappingURL=_8c1e736b._.js.map