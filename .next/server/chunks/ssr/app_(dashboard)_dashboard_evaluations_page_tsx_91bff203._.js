module.exports=[568631,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(433217),e=a.i(370025),f=a.i(937927),g=a.i(913216),h=a.i(574664),i=a.i(269240),j=a.i(340695),k=a.i(219897),l=a.i(806368),m=a.i(915618),n=a.i(587532),o=a.i(284505),p=a.i(581464),q=a.i(633508),r=a.i(87466),s=a.i(941675),t=a.i(546842),u=a.i(953722),v=a.i(724669),w=a.i(93518),x=a.i(255225),y=a.i(683245),z=a.i(781560),A=a.i(495756),B=a.i(54018),C=a.i(641710),D=a.i(104720),E=a.i(821374);let F=(0,a.i(170106).default)("Layout",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"9",x2:"9",y1:"21",y2:"9",key:"wpwpyp"}]]);var G=a.i(238246),H=a.i(497895),I=a.i(222703),J=a.i(864037),K=a.i(695245),L=a.i(159501),M=a.i(437536),N=a.i(325383);a.i(460355);var O=a.i(346271),P=a.i(262036),Q=a.i(547615);let R=[{value:"pre_formation",label:"PrÃ©-formation",icon:"ðŸ“‹"},{value:"hot",label:"Hot (Fin de formation)",icon:"ðŸ”¥"},{value:"cold",label:"Cold (3 mois aprÃ¨s)",icon:"â„ï¸"},{value:"manager",label:"Questionnaire Manager",icon:"ðŸ‘”"},{value:"instructor",label:"Questionnaire Formateur",icon:"ðŸ‘¨â€ðŸ«"},{value:"funder",label:"Questionnaire Financeur",icon:"ðŸ’°"},{value:"quiz",label:"Quiz",icon:"â“"},{value:"exam",label:"Examen",icon:"ðŸ“"},{value:"project",label:"Projet",icon:"ðŸ“"},{value:"other",label:"Autre",icon:"ðŸ“„"}];function S(){let{user:a}=(0,g.useAuth)(),S=(0,i.createClient)(),T=(0,f.useQueryClient)(),{addToast:U}=(0,J.useToast)(),[V,W]=(0,c.useState)(""),[X,Y]=(0,c.useState)("all"),[Z,$]=(0,c.useState)("all"),[_,aa]=(0,c.useState)("all"),[ab,ac]=(0,c.useState)("all"),[ad,ae]=(0,c.useState)({start:"",end:""}),[af,ag]=(0,c.useState)(!1),[ah,ai]=(0,c.useState)(!1),[aj,ak]=(0,c.useState)(null),{handleSubmit:al,setValue:am,watch:an,reset:ao}=(0,K.useForm)({resolver:(0,L.zodResolver)(M.evaluationSchema),mode:"onChange",defaultValues:{student_id:"",session_id:"",subject:"",assessment_type:"quiz",score:"",max_score:"",notes:"",graded_at:new Date().toISOString().split("T")[0]}}),ap=an(),{data:aq}=(0,d.useQuery)({queryKey:["sessions-for-evaluations",a?.organization_id],queryFn:async()=>{if(!a?.organization_id)return[];let{data:b,error:c}=await S.from("sessions").select("id, name, start_date, formations!inner(id, name, organization_id, programs(id, name))").eq("formations.organization_id",a.organization_id).order("start_date",{ascending:!1});if(c)throw c;return b||[]},enabled:!!a?.organization_id}),{data:ar}=(0,d.useQuery)({queryKey:["students-for-evaluations",a?.organization_id],queryFn:async()=>{if(!a?.organization_id)return[];let{data:b,error:c}=await S.from("students").select("id, first_name, last_name, student_number").eq("organization_id",a.organization_id).eq("status","active").order("last_name");if(c)throw c;return b||[]},enabled:!!a?.organization_id}),{data:as,isLoading:at}=(0,d.useQuery)({queryKey:["evaluations",a?.organization_id,V,X,Z,_,ab,ad.start,ad.end],queryFn:async()=>{if(!a?.organization_id)return[];let b={sessionId:"all"!==X?X:void 0,studentId:"all"!==Z?Z:void 0,subject:"all"!==ab?ab:V&&V.trim()?V.trim():void 0,assessmentType:"all"!==_?_:void 0,startDate:ad.start||void 0,endDate:ad.end||void 0};N.logger.debug("RÃ©cupÃ©ration des Ã©valuations",{filters:b,organizationId:a.organization_id});let c=await h.evaluationService.getAll(a.organization_id,b);return N.logger.debug("Ã‰valuations rÃ©cupÃ©rÃ©es",{count:c?.length||0,filters:b}),c},enabled:!!a?.organization_id}),{data:au}=(0,d.useQuery)({queryKey:["evaluation-stats",a?.organization_id,X,ad],queryFn:async()=>{if(!a?.organization_id)return null;let b=await h.evaluationService.getStats(a.organization_id,{sessionId:"all"!==X?X:void 0,startDate:ad.start||void 0,endDate:ad.end||void 0}),c=Object.entries(b.byType).map(([a,b])=>({name:R.find(b=>b.value===a)?.label||a,value:b,color:"quiz"===a?"#3B82F6":"exam"===a?"#8B5CF6":"project"===a?"#10B981":"#6B7280"})).filter(a=>a.value>0);return{...b,typeData:c}},enabled:!!a?.organization_id});as&&Array.from(new Set(as.map(a=>a.subject))).sort();let av=(0,e.useMutation)({mutationFn:async b=>{if(!a?.organization_id)throw Error("Organization ID manquant");return h.evaluationService.create(a.organization_id,{...b,session_id:b.session_id||null,max_score:b.max_score?parseFloat(b.max_score):null,score:parseFloat(b.score),notes:b.notes||null,graded_at:b.graded_at||new Date().toISOString(),teacher_id:a.id})},onSuccess:async()=>{ai(!1),ao(),await T.invalidateQueries({queryKey:["evaluations"]}),await T.invalidateQueries({queryKey:["evaluation-stats"]}),U({type:"success",title:"SuccÃ¨s",description:"Ã‰valuation crÃ©Ã©e."})},onError:a=>U({type:"error",title:"Erreur",description:a.message})}),aw=(0,e.useMutation)({mutationFn:async a=>{if(!aj)throw Error("Aucune Ã©valuation sÃ©lectionnÃ©e");return h.evaluationService.update(aj.id,{...a,session_id:a.session_id||null,max_score:a.max_score?parseFloat(a.max_score):null,score:parseFloat(a.score),notes:a.notes||null,graded_at:a.graded_at||new Date().toISOString()})},onSuccess:async()=>{ak(null),ai(!1),ao(),await T.invalidateQueries({queryKey:["evaluations"]}),await T.invalidateQueries({queryKey:["evaluation-stats"]}),U({type:"success",title:"SuccÃ¨s",description:"Ã‰valuation mise Ã  jour."})},onError:a=>U({type:"error",title:"Erreur",description:a.message})}),ax=(0,e.useMutation)({mutationFn:async a=>h.evaluationService.delete(a),onSuccess:async()=>{await T.invalidateQueries({queryKey:["evaluations"]}),await T.invalidateQueries({queryKey:["evaluation-stats"]}),U({type:"success",title:"SuccÃ¨s",description:"Ã‰valuation supprimÃ©e."})},onError:a=>U({type:"error",title:"Erreur",description:a.message})}),ay=async a=>{confirm("ÃŠtes-vous sÃ»r de vouloir supprimer cette Ã©valuation ?")&&ax.mutate(a)},az=async a=>{if(!as||0===as.length)return void U({type:"warning",title:"Attention",description:"Aucune donnÃ©e Ã  exporter."});try{let b=as.map(a=>({Date:a.graded_at?(0,H.formatDate)(a.graded_at):"",Ã‰tudiant:a.students?`${a.students.first_name} ${a.students.last_name}`:"","NÂ° Ã‰tudiant":a.students?.student_number||"",Session:a.sessions?.name||"",Sujet:a.subject,Type:R.find(b=>b.value===a.assessment_type)?.label||a.assessment_type||"",Note:a.score,"Note max":a.max_score||"",Pourcentage:a.percentage?`${a.percentage}%`:"",Formateur:a.users?.full_name||"",Notes:a.notes||""}));await (0,I.exportToExcel)({filename:`evaluations_${new Date().toISOString().split("T")[0]}.xlsx`,sheetName:"Ã‰valuations",columns:[{header:"Date",key:"Date",width:12},{header:"Ã‰tudiant",key:"Ã‰tudiant",width:20},{header:"NÂ° Ã‰tudiant",key:"NÂ° Ã‰tudiant",width:15},{header:"Session",key:"Session",width:30},{header:"Sujet",key:"Sujet",width:25},{header:"Type",key:"Type",width:20},{header:"Note",key:"Note",width:10},{header:"Note max",key:"Note max",width:10},{header:"Pourcentage",key:"Pourcentage",width:12},{header:"Formateur",key:"Formateur",width:20},{header:"Notes",key:"Notes",width:30}],data:b}),U({type:"success",title:"SuccÃ¨s",description:`Export ${a.toUpperCase()} r\xe9ussi.`})}catch(a){N.logger.error("Erreur lors de l'export des Ã©valuations",{error:a}),U({type:"error",title:"Erreur",description:"Erreur lors de l'export des donnÃ©es."})}},aA={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:[.16,1,.3,1]}}};return(0,b.jsxs)(O.motion.div,{className:"space-y-8 pb-8 max-w-[1600px] mx-auto",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"visible",children:[(0,b.jsxs)(O.motion.div,{variants:aA,className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)("h1",{className:"text-4xl font-bold text-gray-900 tracking-tight",children:"Ã‰valuations"}),(0,b.jsxs)("span",{className:"px-3 py-1 bg-brand-blue-ghost text-brand-blue rounded-full text-sm font-medium",children:[as?.length||0," total"]})]}),(0,b.jsx)("p",{className:"text-gray-500 font-medium",children:"GÃ©rez les notes, examens et bulletins de performance"})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsx)(G.default,{href:"/dashboard/evaluations/templates",children:(0,b.jsxs)(j.Button,{variant:"outline",className:"shadow-sm hover:shadow transition-all",children:[(0,b.jsx)(F,{className:"mr-2 h-4 w-4"}),"ModÃ¨les"]})}),(0,b.jsx)(G.default,{href:"/dashboard/evaluations/report-cards",children:(0,b.jsxs)(j.Button,{variant:"outline",className:"shadow-sm hover:shadow transition-all",children:[(0,b.jsx)(D.FileText,{className:"mr-2 h-4 w-4"}),"Bulletins"]})}),(0,b.jsxs)(j.Button,{variant:"outline",onClick:()=>az("xlsx"),className:"shadow-sm hover:shadow transition-all",children:[(0,b.jsx)(o.Download,{className:"mr-2 h-4 w-4"}),"Export"]}),(0,b.jsxs)(j.Button,{onClick:()=>{ao(),ak(null),ai(!0)},className:"shadow-lg shadow-brand-blue/20 hover:shadow-brand-blue/30 transition-all duration-300",children:[(0,b.jsx)(m.Plus,{className:"mr-2 h-4 w-4"}),"Nouvelle Ã©valuation"]})]})]}),au&&(0,b.jsx)(l.BentoGrid,{columns:4,gap:"md",children:[{title:"Total",value:au.total,icon:r.FileCheck,color:"text-gray-600",bg:"bg-gray-100",desc:"Ã‰valuations rÃ©alisÃ©es"},{title:"Moyenne",value:au.averageScore.toFixed(1),icon:v.TrendingUp,color:"text-brand-blue",bg:"bg-brand-blue-ghost",desc:"Note globale moyenne"},{title:"RÃ©ussite",value:`${au.averagePercentage.toFixed(1)}%`,icon:w.Award,color:"text-emerald-600",bg:"bg-emerald-50",desc:"Taux moyen de rÃ©ussite"},{title:"Types",value:Object.keys(au.byType).length,icon:u.BookOpen,color:"text-purple-600",bg:"bg-purple-50",desc:"Formats diffÃ©rents"}].map((a,c)=>(0,b.jsx)(l.BentoCard,{span:1,className:"min-w-[200px]",children:(0,b.jsxs)(k.GlassCard,{variant:"premium",hoverable:!0,glow:1===c,glowColor:"rgba(59, 130, 246, 0.2)",className:"h-full p-5",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsx)(O.motion.div,{className:(0,H.cn)("p-2.5 rounded-xl transition-all duration-300",a.bg),whileHover:{scale:1.1,rotate:5},children:(0,b.jsx)(a.icon,{className:(0,H.cn)("h-5 w-5",a.color)})}),(0,b.jsx)("span",{className:(0,H.cn)("text-2xl font-bold",a.color),children:a.value})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-gray-700",children:a.title}),(0,b.jsx)("p",{className:"text-xs text-gray-400 mt-0.5",children:a.desc})]})]})},a.title))}),au&&au.typeData&&au.typeData.length>0&&(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,b.jsx)(O.motion.div,{variants:aA,className:"h-full",children:(0,b.jsxs)(k.GlassCard,{variant:"default",className:"p-6 h-full",children:[(0,b.jsx)("div",{className:"mb-6 flex items-center justify-between",children:(0,b.jsxs)("h3",{className:"font-bold text-gray-900 flex items-center gap-2",children:[(0,b.jsx)(x.BarChart3,{className:"h-5 w-5 text-brand-blue"}),"RÃ©partition par type"]})}),(0,b.jsx)("div",{className:"h-[300px]",children:(0,b.jsx)(Q.PremiumPieChart,{data:au.typeData,colors:au.typeData.map(a=>a.color),variant:"default",className:"h-full !p-0 !bg-transparent !border-none !shadow-none",innerRadius:70})})]})}),(0,b.jsx)(O.motion.div,{variants:aA,className:"h-full",children:(0,b.jsxs)(k.GlassCard,{variant:"default",className:"p-6 h-full flex flex-col justify-center items-center text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-brand-blue-ghost rounded-full flex items-center justify-center mb-4",children:(0,b.jsx)(E.Star,{className:"h-8 w-8 text-brand-blue"})}),(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Performance Globale"}),(0,b.jsxs)("p",{className:"text-gray-500 max-w-sm mb-6",children:["La moyenne de la classe est de ",(0,b.jsx)("span",{className:"font-bold text-gray-900",children:au.averageScore.toFixed(1)})," avec un taux de rÃ©ussite de ",(0,b.jsxs)("span",{className:"font-bold text-emerald-600",children:[au.averagePercentage.toFixed(1),"%"]}),"."]}),(0,b.jsx)("div",{className:"w-full max-w-xs bg-gray-100 rounded-full h-3 overflow-hidden",children:(0,b.jsx)(O.motion.div,{initial:{width:0},animate:{width:`${au.averagePercentage}%`},transition:{duration:1,delay:.5},className:"h-full bg-gradient-to-r from-brand-blue to-brand-cyan"})})]})})]}),(0,b.jsx)(O.motion.div,{variants:aA,children:(0,b.jsxs)(k.GlassCard,{variant:"default",className:"p-2",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-2",children:[(0,b.jsxs)("div",{className:"relative flex-1 group",children:[(0,b.jsx)(n.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 group-focus-within:text-brand-blue transition-colors"}),(0,b.jsx)("input",{type:"text",placeholder:"Rechercher sujet, Ã©tudiant...",value:V,onChange:a=>W(a.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-lg bg-gray-50 border-transparent focus:bg-white focus:border-brand-blue/20 focus:ring-4 focus:ring-brand-blue/10 transition-all outline-none text-sm"})]}),(0,b.jsxs)(j.Button,{variant:"ghost",onClick:()=>ag(!af),className:(0,H.cn)("gap-2 transition-all",af?"bg-brand-blue-ghost text-brand-blue":"text-gray-600 hover:bg-gray-50"),children:[(0,b.jsx)(p.Filter,{className:"h-4 w-4"}),"Filtres avancÃ©s"]}),("all"!==X||"all"!==Z||"all"!==_||"all"!==ab)&&(0,b.jsxs)(j.Button,{variant:"ghost",onClick:()=>{Y("all"),$("all"),aa("all"),ac("all"),W("")},className:"text-red-500 hover:text-red-600 hover:bg-red-50",children:[(0,b.jsx)(q.X,{className:"h-4 w-4 mr-2"}),"Effacer"]})]}),(0,b.jsx)(P.AnimatePresence,{children:af&&(0,b.jsx)(O.motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:(0,b.jsxs)("div",{className:"p-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 border-t border-gray-100 mt-2",children:[(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Session"}),(0,b.jsxs)("select",{value:X,onChange:a=>Y(a.target.value),className:"w-full px-3 py-2 rounded-lg bg-gray-50 border-transparent focus:bg-white focus:border-brand-blue/20 focus:ring-2 focus:ring-brand-blue/10 outline-none text-sm transition-all",children:[(0,b.jsx)("option",{value:"all",children:"Toutes"}),aq?.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,b.jsxs)("select",{value:_,onChange:a=>aa(a.target.value),className:"w-full px-3 py-2 rounded-lg bg-gray-50 border-transparent focus:bg-white focus:border-brand-blue/20 focus:ring-2 focus:ring-brand-blue/10 outline-none text-sm transition-all",children:[(0,b.jsx)("option",{value:"all",children:"Tous"}),R.map(a=>(0,b.jsx)("option",{value:a.value,children:a.label},a.value))]})]})]})})})]})}),(0,b.jsx)(O.motion.div,{variants:aA,children:at?(0,b.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)("div",{className:"h-20 bg-gray-100 rounded-xl animate-pulse"},c))}):as&&0!==as.length?(0,b.jsx)(k.GlassCard,{variant:"default",className:"overflow-hidden p-0",children:(0,b.jsx)("div",{className:"divide-y divide-gray-100",children:as.map(a=>{var c,d;let e=a.students;a.sessions;let f=R.find(b=>b.value===a.assessment_type);return(0,b.jsxs)(O.motion.div,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},className:"p-4 hover:bg-gray-50/50 transition-colors flex items-center justify-between group",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[(0,b.jsx)("div",{className:"h-12 w-12 rounded-xl bg-gray-100 flex items-center justify-center text-2xl",children:f?.icon||"ðŸ“„"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)("h3",{className:"font-bold text-gray-900 truncate",children:a.subject}),f&&(0,b.jsx)("span",{className:"px-2 py-0.5 text-xs bg-gray-100 text-gray-600 rounded-md font-medium",children:f.label})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e&&(0,b.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,b.jsx)(t.User,{className:"h-3.5 w-3.5"}),(0,b.jsxs)("span",{className:"font-medium text-gray-700",children:[e.first_name," ",e.last_name]})]}),a.graded_at&&(0,b.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,b.jsx)(s.Calendar,{className:"h-3.5 w-3.5"}),(0,b.jsx)("span",{children:(0,H.formatDate)(a.graded_at)})]})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-6",children:[(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 justify-end",children:[(0,b.jsxs)("span",{className:"text-lg font-bold text-gray-900",children:[a.score,a.max_score&&(0,b.jsxs)("span",{className:"text-gray-400 text-sm font-normal",children:["/",a.max_score]})]}),null===(c=a.percentage)?(0,b.jsx)(C.Clock,{className:"h-4 w-4"}):c>=80?(0,b.jsx)(w.Award,{className:"h-4 w-4 text-brand-blue"}):c>=60?(0,b.jsx)(A.CheckCircle,{className:"h-4 w-4 text-brand-cyan"}):(0,b.jsx)(B.XCircle,{className:"h-4 w-4 text-red-600"})]}),null!==a.percentage&&(0,b.jsxs)("p",{className:(0,H.cn)("text-xs font-medium",null===(d=a.percentage)?"text-gray-500":d>=80?"text-brand-blue":d>=60?"text-brand-cyan":"text-red-600"),children:[a.percentage,"% rÃ©ussite"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,b.jsx)(j.Button,{variant:"ghost",size:"icon",onClick:()=>{ak(a),am("student_id",a.student_id||""),am("session_id",a.session_id||""),am("subject",a.subject),am("assessment_type",a.assessment_type||"quiz"),am("score",a.score?.toString()||""),am("max_score",a.max_score?.toString()||""),am("notes",a.notes||""),am("graded_at",a.graded_at?a.graded_at.split("T")[0]:new Date().toISOString().split("T")[0]),ai(!0)},className:"h-8 w-8 text-gray-500 hover:text-brand-blue hover:bg-brand-blue-ghost",children:(0,b.jsx)(y.Edit,{className:"h-4 w-4"})}),(0,b.jsx)(j.Button,{variant:"ghost",size:"icon",onClick:()=>ay(a.id),className:"h-8 w-8 text-gray-500 hover:text-red-600 hover:bg-red-50",children:(0,b.jsx)(z.Trash2,{className:"h-4 w-4"})})]})]})]},a.id)})})}):(0,b.jsxs)(k.GlassCard,{variant:"default",className:"p-12 text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(r.FileCheck,{className:"h-8 w-8 text-gray-400"})}),(0,b.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:"Aucune Ã©valuation trouvÃ©e"}),(0,b.jsx)("p",{className:"text-gray-500 mb-6",children:"Commencez par crÃ©er une Ã©valuation pour un Ã©tudiant."}),(0,b.jsxs)(j.Button,{onClick:()=>{ao(),ak(null),ai(!0)},children:[(0,b.jsx)(m.Plus,{className:"mr-2 h-4 w-4"}),"Nouvelle Ã©valuation"]})]})}),(0,b.jsx)(P.AnimatePresence,{children:ah&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:(0,b.jsxs)(O.motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"w-full max-w-2xl bg-white rounded-2xl shadow-2xl overflow-hidden",children:[(0,b.jsxs)("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:aj?"Modifier l'Ã©valuation":"Nouvelle Ã©valuation"}),(0,b.jsx)(j.Button,{variant:"ghost",size:"icon",onClick:()=>ai(!1),children:(0,b.jsx)(q.X,{className:"h-5 w-5"})})]}),(0,b.jsx)("div",{className:"p-6 max-h-[80vh] overflow-y-auto",children:(0,b.jsxs)("form",{onSubmit:al(a=>{aj?aw.mutate(a):av.mutate(a)}),className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Ã‰tudiant *"}),(0,b.jsxs)("select",{value:ap.student_id||"",onChange:a=>am("student_id",a.target.value),className:"w-full px-4 py-2.5 rounded-lg border border-gray-200 focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue outline-none transition-all",required:!0,children:[(0,b.jsx)("option",{value:"",children:"SÃ©lectionner un Ã©tudiant"}),ar?.map(a=>(0,b.jsxs)("option",{value:a.id,children:[a.first_name," ",a.last_name," (",a.student_number,")"]},a.id))]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Session"}),(0,b.jsxs)("select",{value:ap.session_id||"",onChange:a=>am("session_id",a.target.value),className:"w-full px-4 py-2.5 rounded-lg border border-gray-200 focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue outline-none transition-all",children:[(0,b.jsx)("option",{value:"",children:"Aucune session"}),aq?.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Sujet *"}),(0,b.jsx)("input",{type:"text",value:ap.subject||"",onChange:a=>am("subject",a.target.value),className:"w-full px-4 py-2.5 rounded-lg border border-gray-200 focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue outline-none transition-all",placeholder:"Ex: MathÃ©matiques, FranÃ§ais...",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Type d'Ã©valuation *"}),(0,b.jsx)("select",{value:ap.assessment_type||"quiz",onChange:a=>am("assessment_type",a.target.value),className:"w-full px-4 py-2.5 rounded-lg border border-gray-200 focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue outline-none transition-all",required:!0,children:R.map(a=>(0,b.jsxs)("option",{value:a.value,children:[a.icon," ",a.label]},a.value))})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Note *"}),(0,b.jsx)("input",{type:"number",step:"0.01",value:ap.score||"",onChange:a=>am("score",a.target.value),className:"w-full px-4 py-2.5 rounded-lg border border-gray-200 focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue outline-none transition-all",placeholder:"0",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Note maximale"}),(0,b.jsx)("input",{type:"number",step:"0.01",value:ap.max_score||"",onChange:a=>am("max_score",a.target.value),className:"w-full px-4 py-2.5 rounded-lg border border-gray-200 focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue outline-none transition-all",placeholder:"20"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Date d'Ã©valuation *"}),(0,b.jsx)("input",{type:"date",value:ap.graded_at||"",onChange:a=>am("graded_at",a.target.value),className:"w-full px-4 py-2.5 rounded-lg border border-gray-200 focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue outline-none transition-all",required:!0})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Notes / Commentaires"}),(0,b.jsx)("textarea",{value:ap.notes||"",onChange:a=>am("notes",a.target.value),className:"w-full px-4 py-2.5 rounded-lg border border-gray-200 focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue outline-none transition-all",rows:3,placeholder:"Commentaires additionnels sur la performance..."})]}),(0,b.jsxs)("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-gray-100",children:[(0,b.jsx)(j.Button,{type:"button",variant:"ghost",onClick:()=>ai(!1),children:"Annuler"}),(0,b.jsx)(j.Button,{type:"submit",disabled:av.isPending||aw.isPending,className:"shadow-lg shadow-brand-blue/20",children:aj?"Mettre Ã  jour":"CrÃ©er l'Ã©valuation"})]})]})})]})})})]})}a.s(["default",()=>S],568631)}];

//# sourceMappingURL=app_%28dashboard%29_dashboard_evaluations_page_tsx_91bff203._.js.map