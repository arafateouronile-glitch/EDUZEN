{"version":3,"sources":["../../../../node_modules/lucide-react/src/icons/check-circle.ts","../../../../node_modules/lucide-react/src/icons/save.ts","../../../../node_modules/lucide-react/src/icons/eye.ts","../../../../components/ui/switch.tsx","../../../../node_modules/lucide-react/src/icons/eye-off.ts","../../../../lib/services/calendar.service.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name CheckCircle\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjIgMTEuMDhWMTJhMTAgMTAgMCAxIDEtNS45My05LjE0IiAvPgogIDxwYXRoIGQ9Im05IDExIDMgM0wyMiA0IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/check-circle\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CheckCircle = createLucideIcon('CheckCircle', [\n  ['path', { d: 'M22 11.08V12a10 10 0 1 1-5.93-9.14', key: 'g774vq' }],\n  ['path', { d: 'm9 11 3 3L22 4', key: '1pflzl' }],\n]);\n\nexport default CheckCircle;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Save\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTkgMjFINWEyIDIgMCAwIDEtMi0yVjVhMiAyIDAgMCAxIDItMmgxMWw1IDV2MTFhMiAyIDAgMCAxLTIgMnoiIC8+CiAgPHBvbHlsaW5lIHBvaW50cz0iMTcgMjEgMTcgMTMgNyAxMyA3IDIxIiAvPgogIDxwb2x5bGluZSBwb2ludHM9IjcgMyA3IDggMTUgOCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/save\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Save = createLucideIcon('Save', [\n  ['path', { d: 'M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z', key: '1owoqh' }],\n  ['polyline', { points: '17 21 17 13 7 13 7 21', key: '1md35c' }],\n  ['polyline', { points: '7 3 7 8 15 8', key: '8nz8an' }],\n]);\n\nexport default Save;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Eye\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMiAxMnMzLTcgMTAtNyAxMCA3IDEwIDctMyA3LTEwIDctMTAtNy0xMC03WiIgLz4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIzIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/eye\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Eye = createLucideIcon('Eye', [\n  ['path', { d: 'M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z', key: 'rwhkz3' }],\n  ['circle', { cx: '12', cy: '12', r: '3', key: '1v7zrd' }],\n]);\n\nexport default Eye;\n","'use client'\n\nimport * as React from 'react'\nimport { cn } from '@/lib/utils'\n\nexport interface SwitchProps {\n  checked?: boolean\n  onCheckedChange?: (checked: boolean) => void\n  disabled?: boolean\n  className?: string\n}\n\nexport const Switch = React.forwardRef<HTMLButtonElement, SwitchProps>(\n  ({ checked, onCheckedChange, disabled, className, ...props }, ref) => {\n    return (\n      <button\n        type=\"button\"\n        role=\"switch\"\n        aria-checked={checked}\n        ref={ref}\n        disabled={disabled}\n        onClick={() => onCheckedChange?.(!checked)}\n        className={cn(\n          'peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50',\n          checked ? 'bg-brand-blue' : 'bg-input',\n          className\n        )}\n        {...props}\n      >\n        <span\n          className={cn(\n            'pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform',\n            checked ? 'translate-x-5' : 'translate-x-0'\n          )}\n        />\n      </button>\n    )\n  }\n)\nSwitch.displayName = 'Switch'\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name EyeOff\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNOS44OCA5Ljg4YTMgMyAwIDEgMCA0LjI0IDQuMjQiIC8+CiAgPHBhdGggZD0iTTEwLjczIDUuMDhBMTAuNDMgMTAuNDMgMCAwIDEgMTIgNWM3IDAgMTAgNyAxMCA3YTEzLjE2IDEzLjE2IDAgMCAxLTEuNjcgMi42OCIgLz4KICA8cGF0aCBkPSJNNi42MSA2LjYxQTEzLjUyNiAxMy41MjYgMCAwIDAgMiAxMnMzIDcgMTAgN2E5Ljc0IDkuNzQgMCAwIDAgNS4zOS0xLjYxIiAvPgogIDxsaW5lIHgxPSIyIiB4Mj0iMjIiIHkxPSIyIiB5Mj0iMjIiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/eye-off\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst EyeOff = createLucideIcon('EyeOff', [\n  ['path', { d: 'M9.88 9.88a3 3 0 1 0 4.24 4.24', key: '1jxqfv' }],\n  [\n    'path',\n    {\n      d: 'M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68',\n      key: '9wicm4',\n    },\n  ],\n  [\n    'path',\n    { d: 'M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61', key: '1jreej' },\n  ],\n  ['line', { x1: '2', x2: '22', y1: '2', y2: '22', key: 'a6p6uj' }],\n]);\n\nexport default EyeOff;\n","import { createClient } from '@/lib/supabase/client'\nimport type { SupabaseClient } from '@supabase/supabase-js'\nimport { Database } from '@/types/database.types'\n\n// Types\nexport type CalendarTodo = {\n  id: string\n  organization_id: string\n  title: string\n  description: string | null\n  due_date: string\n  due_time: string | null\n  start_date: string | null\n  start_time: string | null\n  all_day: boolean\n  category: 'task' | 'meeting' | 'deadline' | 'reminder' | 'event'\n  priority: 'low' | 'medium' | 'high' | 'urgent'\n  color: string\n  status: 'pending' | 'in_progress' | 'completed' | 'cancelled'\n  completed_at: string | null\n  created_by: string | null\n  assigned_to: string | null\n  is_recurring: boolean\n  recurrence_rule: string | null\n  recurrence_end_date: string | null\n  parent_todo_id: string | null\n  reminder_enabled: boolean\n  reminder_minutes_before: number\n  reminder_sent: boolean\n  reminder_sent_at: string | null\n  linked_session_id: string | null\n  linked_formation_id: string | null\n  linked_student_id: string | null\n  tags: string[] | null\n  metadata: Record<string, unknown>\n  created_at: string\n  updated_at: string\n}\n\nexport type CalendarNotification = {\n  id: string\n  organization_id: string\n  user_id: string\n  notification_type: 'todo_reminder' | 'session_reminder' | 'formation_start' | 'deadline'\n  todo_id: string | null\n  session_id: string | null\n  formation_id: string | null\n  title: string\n  message: string | null\n  status: 'pending' | 'sent' | 'read' | 'dismissed'\n  scheduled_at: string\n  sent_at: string | null\n  read_at: string | null\n  channel: 'in_app' | 'email' | 'push' | 'sms'\n  created_at: string\n}\n\nexport type CalendarUserPreferences = {\n  id: string\n  user_id: string\n  organization_id: string\n  default_view: 'day' | 'week' | 'month' | 'agenda'\n  week_starts_on: number\n  show_weekends: boolean\n  working_hours_start: string\n  working_hours_end: string\n  default_reminder_minutes: number\n  email_notifications: boolean\n  push_notifications: boolean\n  show_sessions: boolean\n  show_formations: boolean\n  show_todos: boolean\n  show_completed: boolean\n  session_color: string\n  formation_color: string\n  todo_color: string\n  created_at: string\n  updated_at: string\n}\n\nexport type CalendarEvent = {\n  event_id: string\n  event_type: 'todo' | 'session' | 'formation'\n  title: string\n  description: string | null\n  start_date: string\n  start_time: string | null\n  end_date: string\n  end_time: string | null\n  all_day: boolean\n  status: string\n  color: string\n  category: string\n  priority: string\n  linked_id: string | null\n  location?: string | null\n  formation_name?: string | null\n}\n\nexport type CreateTodoInput = {\n  organization_id: string\n  title: string\n  description?: string\n  due_date: string\n  due_time?: string\n  start_date?: string\n  start_time?: string\n  all_day?: boolean\n  category?: CalendarTodo['category']\n  priority?: CalendarTodo['priority']\n  color?: string\n  assigned_to?: string\n  created_by?: string\n  is_recurring?: boolean\n  recurrence_rule?: string\n  recurrence_end_date?: string\n  reminder_enabled?: boolean\n  reminder_minutes_before?: number\n  linked_session_id?: string\n  linked_formation_id?: string\n  linked_student_id?: string\n  tags?: string[]\n  metadata?: Record<string, unknown>\n}\n\nexport type UpdateTodoInput = Partial<CreateTodoInput> & {\n  status?: CalendarTodo['status']\n}\n\nclass CalendarService {\n  private supabase: SupabaseClient<Database>\n\n\n  constructor(supabaseClient?: SupabaseClient<Database>) {\n\n    this.supabase = supabaseClient || createClient()\n\n  }\n\n  // ==========================================\n  // TODOs\n  // ==========================================\n\n  /**\n   * R√©cup√®re tous les TODOs d'une organisation\n   */\n  async getTodos(\n    organizationId: string,\n    filters?: {\n      startDate?: string\n      endDate?: string\n      status?: CalendarTodo['status'] | CalendarTodo['status'][]\n      category?: CalendarTodo['category']\n      priority?: CalendarTodo['priority']\n      assignedTo?: string\n      createdBy?: string\n      search?: string\n    }\n  ): Promise<CalendarTodo[]> {\n    let query = this.supabase\n      .from('calendar_todos')\n      .select('*')\n      .eq('organization_id', organizationId)\n      .order('due_date', { ascending: true })\n\n    if (filters?.startDate) {\n      query = query.gte('due_date', filters.startDate)\n    }\n    if (filters?.endDate) {\n      query = query.lte('due_date', filters.endDate)\n    }\n    if (filters?.status) {\n      if (Array.isArray(filters.status)) {\n        query = query.in('status', filters.status)\n      } else {\n        query = query.eq('status', filters.status)\n      }\n    }\n    if (filters?.category) {\n      query = query.eq('category', filters.category)\n    }\n    if (filters?.priority) {\n      query = query.eq('priority', filters.priority)\n    }\n    if (filters?.assignedTo) {\n      query = query.eq('assigned_to', filters.assignedTo)\n    }\n    if (filters?.createdBy) {\n      query = query.eq('created_by', filters.createdBy)\n    }\n    if (filters?.search) {\n      query = query.or(`title.ilike.%${filters.search}%,description.ilike.%${filters.search}%`)\n    }\n\n    const { data, error } = await query\n\n    if (error) {\n      // Si la table n'existe pas encore (404 ou PGRST116), retourner un tableau vide\n      if (error.code === 'PGRST116' || error.code === '42P01' || error.message?.includes('does not exist')) {\n        return []\n      }\n      throw error\n    }\n    return (data || []) as CalendarTodo[]\n  }\n\n  /**\n   * R√©cup√®re un TODO par son ID\n   */\n  async getTodoById(id: string): Promise<CalendarTodo | null> {\n    const { data, error } = await this.supabase\n      .from('calendar_todos')\n      .select('*')\n      .eq('id', id)\n      .single()\n\n    if (error) {\n      if (error.code === 'PGRST116' || error.code === '42P01' || error.message?.includes('does not exist')) {\n        return null\n      }\n      throw error\n    }\n    return data as CalendarTodo\n  }\n\n  /**\n   * Cr√©e un nouveau TODO\n   */\n  async createTodo(input: CreateTodoInput): Promise<CalendarTodo> {\n    const { data, error } = await this.supabase\n      .from('calendar_todos')\n      .insert(input as any)\n      .select()\n      .single()\n\n    if (error) throw error\n    \n    // Cr√©er la notification de rappel si activ√©\n    if (input.reminder_enabled !== false) {\n      await this.supabase.rpc('create_todo_reminder_notification', { todo_id: data.id })\n    }\n    \n    return data as CalendarTodo\n  }\n\n  /**\n   * Met √† jour un TODO\n   */\n  async updateTodo(id: string, updates: UpdateTodoInput): Promise<CalendarTodo> {\n    const { data, error } = await this.supabase\n      .from('calendar_todos')\n      .update(updates as any)\n      .eq('id', id)\n      .select()\n      .single()\n\n    if (error) throw error\n    return data as CalendarTodo\n  }\n\n  /**\n   * Supprime un TODO\n   */\n  async deleteTodo(id: string): Promise<void> {\n    const { error } = await this.supabase\n      .from('calendar_todos')\n      .delete()\n      .eq('id', id)\n\n    if (error) throw error\n  }\n\n  /**\n   * Marque un TODO comme compl√©t√©\n   */\n  async completeTodo(id: string): Promise<CalendarTodo> {\n    return this.updateTodo(id, { status: 'completed' })\n  }\n\n  /**\n   * Marque plusieurs TODOs comme compl√©t√©s\n   */\n  async completeTodos(ids: string[]): Promise<void> {\n    const { error } = await this.supabase\n      .from('calendar_todos')\n      .update({ status: 'completed' })\n      .in('id', ids)\n\n    if (error) throw error\n  }\n\n  // ==========================================\n  // √âV√âNEMENTS DU CALENDRIER\n  // ==========================================\n\n  /**\n   * R√©cup√®re tous les √©v√©nements du calendrier (TODOs + Sessions + Formations)\n   */\n  async getCalendarEvents(\n    organizationId: string,\n    startDate: string,\n    endDate: string,\n    userId?: string\n  ): Promise<CalendarEvent[]> {\n    try {\n      // Construire les param√®tres RPC\n      const rpcParams: {\n        p_organization_id: string\n        p_start_date: string\n        p_end_date: string\n        p_user_id?: string\n      } = {\n        p_organization_id: organizationId,\n        p_start_date: startDate,\n        p_end_date: endDate,\n      }\n\n      // Ajouter p_user_id seulement s'il est d√©fini\n      if (userId) {\n        rpcParams.p_user_id = userId\n      }\n\n      const { data, error } = await this.supabase.rpc('get_calendar_events', rpcParams)\n\n      if (error) {\n        // Si la fonction n'existe pas encore (42883) ou erreur 400 (mauvaise signature)\n        // ou si les tables n'existent pas (404/PGRST116)\n        if (\n          error.code === '42883' ||\n          error.code === 'PGRST116' ||\n          error.code === '42P01' ||\n          error.code === '400' ||\n          error.message?.includes('does not exist') ||\n          error.message?.includes('function') ||\n          error.message?.includes('does not exist')\n        ) {\n          // console.warn('Fonction get_calendar_events non disponible. Utilisation du fallback manuel.', error)\n          return this.getCalendarEventsManual(organizationId, startDate, endDate, userId)\n        }\n        throw error\n      }\n      return (data || []) as CalendarEvent[]\n    } catch (error) {\n      // console.warn('Erreur lors de l\\'appel RPC get_calendar_events. Utilisation du fallback manuel.', error)\n      return this.getCalendarEventsManual(organizationId, startDate, endDate, userId)\n    }\n  }\n\n  /**\n   * Fallback si la fonction RPC n'existe pas\n   */\n  private async getCalendarEventsManual(\n    organizationId: string,\n    startDate: string,\n    endDate: string,\n    userId?: string\n  ): Promise<CalendarEvent[]> {\n    const events: CalendarEvent[] = []\n\n    // R√©cup√©rer les TODOs\n    try {\n      const todos = await this.getTodos(organizationId, { startDate, endDate })\n      events.push(\n        ...todos.map((todo) => ({\n          event_id: todo.id,\n          event_type: 'todo' as const,\n          title: todo.title,\n          description: todo.description,\n          start_date: todo.start_date || todo.due_date,\n          start_time: todo.start_time,\n          end_date: todo.due_date,\n          end_time: todo.due_time,\n          all_day: todo.all_day,\n          status: todo.status,\n          color: todo.color,\n          category: todo.category,\n          priority: todo.priority,\n          linked_id: todo.linked_session_id || todo.linked_formation_id || null,\n        }))\n      )\n    } catch (e) {\n      // Table may not exist yet\n    }\n\n    // R√©cup√©rer les Sessions\n    // Inclure les sessions qui chevauchent la p√©riode demand√©e\n    // Si userId est fourni et que l'utilisateur est un enseignant, filtrer par session_teachers\n    try {\n      let sessions: any[] | null | undefined = undefined\n      let sessionsQuery = this.supabase\n        .from('sessions')\n        .select('id, name, start_date, end_date, start_time, end_time, location, status, formation_id, organization_id, formations(id, name)')\n        .eq('organization_id', organizationId)\n\n      // Si userId est fourni, v√©rifier si c'est un enseignant et filtrer ses sessions assign√©es\n      if (userId) {\n        const { data: userData } = await this.supabase\n          .from('users')\n          .select('role')\n          .eq('id', userId)\n          .maybeSingle()\n\n        if (userData?.role === 'teacher') {\n          // R√©cup√©rer les IDs des sessions assign√©es √† cet enseignant\n          const { data: teacherSessions } = await this.supabase\n            .from('session_teachers')\n            .select('session_id')\n            .eq('teacher_id', userId)\n\n          if (teacherSessions && teacherSessions.length > 0) {\n            const sessionIds = teacherSessions.map((st: any) => st.session_id)\n            sessionsQuery = sessionsQuery.in('id', sessionIds)\n          } else {\n            // Si l'enseignant n'a pas de sessions assign√©es, retourner un tableau vide pour les sessions\n            // (mais on continue pour les TODOs et formations)\n            const { data: emptySessions, error: emptyError } = await sessionsQuery.limit(0)\n            if (emptyError && emptyError.code !== 'PGRST116') {\n              // Session fetch error - continue\n            }\n            // Passer √† la section suivante (formations) sans traiter les sessions\n            sessions = []\n          }\n        }\n      }\n\n      // R√©cup√©rer les sessions seulement si on n'a pas d√©j√† d√©fini sessions √† []\n      let sessionsError: any = null\n      if (sessions === undefined) {\n        const { data: sessionsData, error: error } = await sessionsQuery\n        sessions = sessionsData\n        sessionsError = error\n        if (sessionsError) {\n          throw sessionsError\n        }\n      }\n\n      if (sessionsError) {\n        throw sessionsError\n      }\n\n      if (sessions) {\n        // Filtrer pour ne garder que celles qui ont une date de d√©but et qui chevauchent vraiment la p√©riode\n        const rangeStart = new Date(startDate)\n        const rangeEnd = new Date(endDate)\n\n        const overlappingSessions = sessions.filter((session: any) => {\n          // Ignorer les sessions sans date de d√©but\n          if (!session.start_date) return false\n\n          const sessionStart = new Date(session.start_date)\n          const sessionEnd = session.end_date ? new Date(session.end_date) : null\n\n          return (\n            // Session commence dans la p√©riode\n            (sessionStart >= rangeStart && sessionStart <= rangeEnd) ||\n            // Session se termine dans la p√©riode\n            (sessionEnd && sessionEnd >= rangeStart && sessionEnd <= rangeEnd) ||\n            // Session en cours (commenc√©e avant et pas encore termin√©e)\n            (sessionStart <= rangeStart && (!sessionEnd || sessionEnd >= rangeStart)) ||\n            // Session qui englobe toute la p√©riode\n            (sessionStart <= rangeStart && sessionEnd && sessionEnd >= rangeEnd)\n          )\n        })\n\n        const sessionEvents = overlappingSessions.map((session: any) => {\n          // S'assurer que start_date est au format YYYY-MM-DD\n          const startDate = session.start_date\n            ? typeof session.start_date === 'string'\n              ? session.start_date.split('T')[0]\n              : new Date(session.start_date).toISOString().split('T')[0]\n            : null\n          const endDate = session.end_date\n            ? typeof session.end_date === 'string'\n              ? session.end_date.split('T')[0]\n              : new Date(session.end_date).toISOString().split('T')[0]\n            : null\n\n          // Construire la description avec les informations de lieu et d'heures\n          const descriptionParts: string[] = []\n          if (session.start_time) {\n            const timeStr = session.start_time.slice(0, 5) // Format HH:MM\n            const endTimeStr = session.end_time ? session.end_time.slice(0, 5) : null\n            if (endTimeStr) {\n              descriptionParts.push(`üïê ${timeStr} - ${endTimeStr}`)\n            } else {\n              descriptionParts.push(`üïê ${timeStr}`)\n            }\n          }\n          if (session.location) {\n            descriptionParts.push(`üìç ${session.location}`)\n          }\n          if (session.formations?.name) {\n            descriptionParts.push(`üìö ${session.formations.name}`)\n          }\n\n          return {\n            event_id: session.id,\n            event_type: 'session' as const,\n            title: session.name,\n            description: descriptionParts.length > 0 ? descriptionParts.join(' ‚Ä¢ ') : null,\n            start_date: startDate || '',\n            start_time: session.start_time,\n            end_date: endDate || startDate || '',\n            end_time: session.end_time,\n            all_day: false,\n            status: session.status,\n            color: '#10B981',\n            category: 'session',\n            priority: 'medium',\n            linked_id: session.formation_id,\n            location: session.location || null,\n            formation_name: session.formations?.name || null,\n          }\n        })\n        // console.log('[CalendarService] Sessions trouv√©es:', overlappingSessions.length, sessionEvents)\n        events.push(...sessionEvents)\n      }\n    } catch (e) {\n      // Session fetch error - continue with other events\n    }\n\n    // R√©cup√©rer les Formations\n    // Les formations n'ont pas de dates directes, on utilise les dates min/max de leurs sessions\n    // Pour les enseignants, filtrer par les formations des sessions o√π ils sont assign√©s\n    try {\n      let formationsQuery = this.supabase\n        .from('formations')\n        .select('*, sessions(id, start_date, end_date)')\n        .eq('organization_id', organizationId)\n\n      // Si userId est fourni, v√©rifier si c'est un enseignant et filtrer ses formations\n      if (userId) {\n        const { data: userData } = await this.supabase\n          .from('users')\n          .select('role')\n          .eq('id', userId)\n          .maybeSingle()\n\n        if (userData?.role === 'teacher') {\n          // R√©cup√©rer les IDs des sessions assign√©es √† cet enseignant\n          const { data: teacherSessions } = await this.supabase\n            .from('session_teachers')\n            .select('session_id')\n            .eq('teacher_id', userId)\n\n          if (teacherSessions && teacherSessions.length > 0) {\n            const sessionIds = teacherSessions.map((st: any) => st.session_id)\n            // R√©cup√©rer les formation_id des sessions assign√©es\n            const { data: sessionsData } = await this.supabase\n              .from('sessions')\n              .select('formation_id')\n              .in('id', sessionIds)\n\n            if (sessionsData && sessionsData.length > 0) {\n              const formationIds = [...new Set(sessionsData.map((s: any) => s.formation_id).filter((id): id is string => !!id))]\n              if (formationIds.length > 0) {\n                formationsQuery = formationsQuery.in('id', formationIds)\n              } else {\n                // Si aucune formation trouv√©e, ne pas afficher de formations\n                // Retourner les √©v√©nements d√©j√† collect√©s (TODOs et sessions)\n                return events\n              }\n            } else {\n              // Si aucune session trouv√©e, ne pas afficher de formations\n              return events\n            }\n          } else {\n            // Si l'enseignant n'a pas de sessions assign√©es, ne pas afficher de formations\n            // Retourner les √©v√©nements d√©j√† collect√©s (TODOs et sessions)\n            return events\n          }\n        }\n      }\n\n      // R√©cup√©rer les formations\n      const { data: formations, error: formationsError } = await formationsQuery\n\n      if (formationsError) {\n        throw formationsError\n      }\n\n      if (formations) {\n        const rangeStart = new Date(startDate)\n        const rangeEnd = new Date(endDate)\n\n        // Pour chaque formation, calculer les dates min/max de ses sessions\n        const formationsWithDates = formations\n          .map((formation) => {\n            const sessions = (formation.sessions as Array<{ id: string; start_date: string; end_date: string | null }>) || []\n            if (sessions.length === 0) return null\n\n            const sessionDates = sessions\n              .filter((s) => s.start_date)\n              .map((s) => ({\n                start: new Date(s.start_date),\n                end: s.end_date ? new Date(s.end_date) : null,\n              }))\n\n            if (sessionDates.length === 0) return null\n\n            const formationStart = new Date(Math.min(...sessionDates.map((d) => d.start.getTime())))\n            const formationEndDates = sessionDates.map((d) => d.end).filter((d): d is Date => d !== null)\n            const formationEnd = formationEndDates.length > 0 ? new Date(Math.max(...formationEndDates.map((d) => d.getTime()))) : null\n\n            return {\n              formation,\n              start_date: formationStart,\n              end_date: formationEnd,\n            }\n          })\n          .filter((f): f is NonNullable<typeof f> => f !== null)\n\n        // Filtrer pour ne garder que celles qui chevauchent vraiment la p√©riode\n        const overlappingFormations = formationsWithDates.filter(({ start_date, end_date }) => {\n          return (\n            // Formation commence dans la p√©riode\n            (start_date >= rangeStart && start_date <= rangeEnd) ||\n            // Formation se termine dans la p√©riode\n            (end_date && end_date >= rangeStart && end_date <= rangeEnd) ||\n            // Formation en cours (commenc√©e avant et pas encore termin√©e)\n            (start_date <= rangeStart && (!end_date || end_date >= rangeStart)) ||\n            // Formation qui englobe toute la p√©riode\n            (start_date <= rangeStart && end_date && end_date >= rangeEnd)\n          )\n        })\n\n        const formationEvents = overlappingFormations.map(({ formation, start_date, end_date }) => ({\n          event_id: formation.id,\n          event_type: 'formation' as const,\n          title: formation.name,\n          description: formation.description,\n          start_date: start_date.toISOString().split('T')[0],\n          start_time: null,\n          end_date: end_date ? end_date.toISOString().split('T')[0] : start_date.toISOString().split('T')[0],\n          end_time: null,\n          all_day: true,\n          status: formation.is_active ? 'active' : 'inactive',\n          color: '#8B5CF6',\n          category: 'formation',\n          priority: 'medium',\n          linked_id: formation.program_id,\n        }))\n        // console.log('[CalendarService] Formations trouv√©es:', overlappingFormations.length, formationEvents)\n        events.push(...formationEvents)\n      }\n    } catch (e) {\n      // Formation fetch error - continue with collected events\n    }\n\n    // console.log('[CalendarService] Total √©v√©nements retourn√©s:', events.length)\n    // console.log('[CalendarService] D√©tail des √©v√©nements:', events)\n    return events\n  }\n\n  // ==========================================\n  // NOTIFICATIONS\n  // ==========================================\n\n  /**\n   * R√©cup√®re les notifications d'un utilisateur\n   */\n  async getNotifications(\n    userId: string,\n    filters?: {\n      status?: CalendarNotification['status']\n      unreadOnly?: boolean\n      limit?: number\n    }\n  ): Promise<CalendarNotification[]> {\n    let query = this.supabase\n      .from('calendar_notifications')\n      .select('*')\n      .eq('user_id', userId)\n      .order('scheduled_at', { ascending: false })\n\n    if (filters?.status) {\n      query = query.eq('status', filters.status)\n    }\n    if (filters?.unreadOnly) {\n      query = query.in('status', ['pending', 'sent'])\n    }\n    if (filters?.limit) {\n      query = query.limit(filters.limit)\n    }\n\n    const { data, error } = await query\n\n    if (error) {\n      if (error.code === 'PGRST116' || error.code === '42P01' || error.message?.includes('does not exist')) {\n        return []\n      }\n      throw error\n    }\n    return (data || []) as CalendarNotification[]\n  }\n\n  /**\n   * Marque une notification comme lue\n   */\n  async markNotificationAsRead(id: string): Promise<void> {\n    const { error } = await this.supabase\n      .from('calendar_notifications')\n      .update({ status: 'read', read_at: new Date().toISOString() })\n      .eq('id', id)\n\n    if (error) throw error\n  }\n\n  /**\n   * Marque toutes les notifications comme lues\n   */\n  async markAllNotificationsAsRead(userId: string): Promise<void> {\n    const { error } = await this.supabase\n      .from('calendar_notifications')\n      .update({ status: 'read', read_at: new Date().toISOString() })\n      .eq('user_id', userId)\n      .in('status', ['pending', 'sent'])\n\n    if (error) throw error\n  }\n\n  /**\n   * Supprime une notification\n   */\n  async dismissNotification(id: string): Promise<void> {\n    const { error } = await this.supabase\n      .from('calendar_notifications')\n      .update({ status: 'dismissed' })\n      .eq('id', id)\n\n    if (error) throw error\n  }\n\n  /**\n   * Compte les notifications non lues\n   */\n  async countUnreadNotifications(userId: string): Promise<number> {\n    const { count, error } = await this.supabase\n      .from('calendar_notifications')\n      .select('*', { count: 'exact', head: true })\n      .eq('user_id', userId)\n      .in('status', ['pending', 'sent'])\n\n    if (error) {\n      // Si la table n'existe pas encore, retourner 0\n      if (error.code === 'PGRST116' || error.code === '42P01' || error.message?.includes('does not exist')) {\n        return 0\n      }\n      throw error\n    }\n    return count || 0\n  }\n\n  // ==========================================\n  // PR√âF√âRENCES UTILISATEUR\n  // ==========================================\n\n  /**\n   * R√©cup√®re les pr√©f√©rences calendrier d'un utilisateur\n   */\n  async getUserPreferences(\n    userId: string,\n    organizationId: string\n  ): Promise<CalendarUserPreferences | null> {\n    const { data, error } = await this.supabase\n      .from('calendar_user_preferences')\n      .select('*')\n      .eq('user_id', userId)\n      .eq('organization_id', organizationId)\n      .single()\n\n    if (error) {\n      if (error.code === 'PGRST116' || error.code === '42P01' || error.message?.includes('does not exist')) {\n        return null\n      }\n      throw error\n    }\n    return data as CalendarUserPreferences\n  }\n\n  /**\n   * Cr√©e ou met √† jour les pr√©f√©rences calendrier d'un utilisateur\n   */\n  async upsertUserPreferences(\n    userId: string,\n    organizationId: string,\n    preferences: Partial<Omit<CalendarUserPreferences, 'id' | 'user_id' | 'organization_id' | 'created_at' | 'updated_at'>>\n  ): Promise<CalendarUserPreferences> {\n    const { data, error } = await this.supabase\n      .from('calendar_user_preferences')\n      .upsert(\n        {\n          user_id: userId,\n          organization_id: organizationId,\n          ...preferences,\n        },\n        { onConflict: 'user_id,organization_id' }\n      )\n      .select()\n      .single()\n\n    if (error) throw error\n    return data as CalendarUserPreferences\n  }\n\n  // ==========================================\n  // UTILITAIRES\n  // ==========================================\n\n  /**\n   * R√©cup√®re les TODOs √† venir avec rappel\n   */\n  async getUpcomingTodosWithReminder(\n    organizationId: string,\n    minutesAhead: number = 60\n  ): Promise<CalendarTodo[]> {\n    const now = new Date()\n    const futureDate = new Date(now.getTime() + minutesAhead * 60 * 1000)\n\n    const { data, error } = await this.supabase\n      .from('calendar_todos')\n      .select('*')\n      .eq('organization_id', organizationId)\n      .eq('reminder_enabled', true)\n      .eq('reminder_sent', false)\n      .in('status', ['pending', 'in_progress'])\n      .gte('due_date', now.toISOString().split('T')[0])\n      .lte('due_date', futureDate.toISOString().split('T')[0])\n\n    if (error) throw error\n    return (data || []) as CalendarTodo[]\n  }\n\n  /**\n   * R√©cup√®re les statistiques du calendrier\n   */\n  async getCalendarStats(organizationId: string): Promise<{\n    totalTodos: number\n    pendingTodos: number\n    completedTodos: number\n    overdueTodos: number\n    todayTodos: number\n    upcomingTodos: number\n  }> {\n    const today = new Date().toISOString().split('T')[0]\n\n    const { data: todos, error } = await this.supabase\n      .from('calendar_todos')\n      .select('id, status, due_date')\n      .eq('organization_id', organizationId)\n\n    if (error) {\n      // Si la table n'existe pas encore, retourner des stats √† z√©ro\n      if (error.code === 'PGRST116' || error.code === '42P01' || error.message?.includes('does not exist')) {\n        return {\n          totalTodos: 0,\n          pendingTodos: 0,\n          completedTodos: 0,\n          overdueTodos: 0,\n          todayTodos: 0,\n          upcomingTodos: 0,\n        }\n      }\n      throw error\n    }\n\n    const todosList = todos || []\n    const totalTodos = todosList.length\n    const pendingTodos = todosList.filter((t) => t.status === 'pending').length\n    const completedTodos = todosList.filter((t) => t.status === 'completed').length\n    const overdueTodos = todosList.filter(\n      (t) => t.status !== 'completed' && t.status !== 'cancelled' && t.due_date < today\n    ).length\n    const todayTodos = todosList.filter((t) => t.due_date === today).length\n    const upcomingTodos = todosList.filter(\n      (t) => t.status !== 'completed' && t.status !== 'cancelled' && t.due_date > today\n    ).length\n\n    return {\n      totalTodos,\n      pendingTodos,\n      completedTodos,\n      overdueTodos,\n      todayTodos,\n      upcomingTodos,\n    }\n  }\n\n  // ==========================================\n  // INT√âGRATIONS CALENDRIER EXTERNE\n  // ==========================================\n\n  /**\n   * R√©cup√®re la configuration d'int√©gration calendrier (Google, Outlook)\n   * TODO: Impl√©menter la r√©cup√©ration depuis la table calendar_integrations\n   */\n  async getConfig(\n    organizationId: string,\n    provider: 'google' | 'outlook'\n  ): Promise<any | null> {\n    // TODO: Impl√©menter la r√©cup√©ration depuis Supabase\n    // const { data, error } = await this.supabase\n    //   .from('calendar_integrations')\n    //   .select('*')\n    //   .eq('organization_id', organizationId)\n    //   .eq('provider', provider)\n    //   .single()\n    // \n    // if (error) {\n    //   if (error.code === 'PGRST116') return null\n    //   throw error\n    // }\n    // return data\n    \n    // Pour l'instant, retourner null\n    return null\n  }\n\n  /**\n   * Cr√©e ou met √† jour la configuration d'int√©gration calendrier\n   * TODO: Impl√©menter la cr√©ation/mise √† jour dans la table calendar_integrations\n   */\n  async upsertConfig(\n    organizationId: string,\n    provider: 'google' | 'outlook',\n    config: any\n  ): Promise<any> {\n    // TODO: Impl√©menter la cr√©ation/mise √† jour dans Supabase\n    // const { data, error } = await this.supabase\n    //   .from('calendar_integrations')\n    //   .upsert(\n    //     {\n    //       organization_id: organizationId,\n    //       provider,\n    //       ...config,\n    //     },\n    //     { onConflict: 'organization_id,provider' }\n    //   )\n    //   .select()\n    //   .single()\n    // \n    // if (error) throw error\n    // return data\n    \n    // Pour l'instant, retourner la config telle quelle\n    return { organization_id: organizationId, provider, ...config }\n  }\n}\n\nexport const calendarService = new CalendarService()\n"],"names":[],"mappings":"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","ignoreList":[0,1,2,4]}