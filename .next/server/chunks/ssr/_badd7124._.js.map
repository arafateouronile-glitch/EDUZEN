{"version":3,"sources":["../../../../node_modules/lucide-react/src/icons/plus.ts","../../../../node_modules/lucide-react/src/icons/arrow-left.ts","../../../../node_modules/lucide-react/src/icons/grip-vertical.ts","../../../../lib/services/evaluation-template.service.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Plus\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNSAxMmgxNCIgLz4KICA8cGF0aCBkPSJNMTIgNXYxNCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/plus\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Plus = createLucideIcon('Plus', [\n  ['path', { d: 'M5 12h14', key: '1ays0h' }],\n  ['path', { d: 'M12 5v14', key: 's699le' }],\n]);\n\nexport default Plus;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ArrowLeft\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTIgMTktNy03IDctNyIgLz4KICA8cGF0aCBkPSJNMTkgMTJINSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/arrow-left\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowLeft = createLucideIcon('ArrowLeft', [\n  ['path', { d: 'm12 19-7-7 7-7', key: '1l729n' }],\n  ['path', { d: 'M19 12H5', key: 'x3x0zl' }],\n]);\n\nexport default ArrowLeft;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name GripVertical\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSI5IiBjeT0iMTIiIHI9IjEiIC8+CiAgPGNpcmNsZSBjeD0iOSIgY3k9IjUiIHI9IjEiIC8+CiAgPGNpcmNsZSBjeD0iOSIgY3k9IjE5IiByPSIxIiAvPgogIDxjaXJjbGUgY3g9IjE1IiBjeT0iMTIiIHI9IjEiIC8+CiAgPGNpcmNsZSBjeD0iMTUiIGN5PSI1IiByPSIxIiAvPgogIDxjaXJjbGUgY3g9IjE1IiBjeT0iMTkiIHI9IjEiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/grip-vertical\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst GripVertical = createLucideIcon('GripVertical', [\n  ['circle', { cx: '9', cy: '12', r: '1', key: '1vctgf' }],\n  ['circle', { cx: '9', cy: '5', r: '1', key: 'hp0tcf' }],\n  ['circle', { cx: '9', cy: '19', r: '1', key: 'fkjjf6' }],\n  ['circle', { cx: '15', cy: '12', r: '1', key: '1tmaij' }],\n  ['circle', { cx: '15', cy: '5', r: '1', key: '19l28e' }],\n  ['circle', { cx: '15', cy: '19', r: '1', key: 'f4zoj3' }],\n]);\n\nexport default GripVertical;\n","import { createClient } from '@/lib/supabase/client'\nimport type { SupabaseClient } from '@supabase/supabase-js'\nimport { Database } from '@/types/database.types'\nimport type { TableRow, TableInsert, TableUpdate } from '@/lib/types/supabase-helpers'\n\ntype EvaluationTemplate = TableRow<'evaluation_templates'>\ntype EvaluationTemplateQuestion = TableRow<'evaluation_template_questions'>\ntype EvaluationTemplateInstance = TableRow<'evaluation_template_instances'>\ntype EvaluationResponse = TableRow<'evaluation_responses'>\n\ntype EvaluationTemplateInsert = TableInsert<'evaluation_templates'>\ntype EvaluationTemplateQuestionInsert = TableInsert<'evaluation_template_questions'>\ntype EvaluationTemplateInstanceInsert = TableInsert<'evaluation_template_instances'>\ntype EvaluationResponseInsert = TableInsert<'evaluation_responses'>\n\nexport interface QuestionOption {\n  text: string\n  is_correct: boolean\n}\n\nexport interface EvaluationTemplateWithQuestions extends EvaluationTemplate {\n  questions: EvaluationTemplateQuestion[]\n}\n\nexport interface EvaluationInstanceWithDetails extends EvaluationTemplateInstance {\n  template: EvaluationTemplateWithQuestions\n  grade: TableRow<'grades'>\n  responses?: EvaluationResponse[]\n}\n\nexport interface EvaluationScore {\n  total_score: number\n  max_score: number\n  percentage: number\n  correct_count: number\n  total_questions: number\n}\n\nclass EvaluationTemplateService {\n  private supabase: SupabaseClient<Database>\n\n\n  constructor(supabaseClient?: SupabaseClient<Database>) {\n\n    this.supabase = supabaseClient || createClient()\n\n  }\n\n  // =====================================================\n  // Templates\n  // =====================================================\n\n  /**\n   * Récupère tous les modèles d'évaluations d'une organisation\n   */\n  async getTemplates(organizationId: string): Promise<EvaluationTemplateWithQuestions[]> {\n    const { data, error } = await this.supabase\n      .from('evaluation_templates')\n      .select(`\n        *,\n        questions:evaluation_template_questions(*)\n      `)\n      .or(`organization_id.eq.${organizationId},organization_id.is.null`)\n      .eq('is_active', true)\n      .order('created_at', { ascending: false })\n\n    if (error) {\n      console.error('Erreur récupération modèles:', error)\n      return []\n    }\n    return (data || []) as EvaluationTemplateWithQuestions[]\n  }\n\n  /**\n   * Récupère un modèle par son ID avec ses questions\n   */\n  async getTemplateById(id: string): Promise<EvaluationTemplateWithQuestions | null> {\n    const { data, error } = await this.supabase\n      .from('evaluation_templates')\n      .select(`\n        *,\n        questions:evaluation_template_questions(*)\n      `)\n      .eq('id', id)\n      .single()\n\n    if (error) {\n      console.error('Erreur récupération modèle:', error)\n      return null\n    }\n    return data as EvaluationTemplateWithQuestions\n  }\n\n  /**\n   * Crée un nouveau modèle d'évaluation\n   */\n  async createTemplate(\n    organizationId: string,\n    template: Omit<EvaluationTemplateInsert, 'organization_id' | 'created_at' | 'updated_at'>,\n    questions: Omit<EvaluationTemplateQuestionInsert, 'template_id' | 'created_at' | 'updated_at'>[]\n  ): Promise<EvaluationTemplateWithQuestions> {\n    // Créer le modèle\n    const { data: templateData, error: templateError } = await this.supabase\n      .from('evaluation_templates')\n      .insert({\n        ...template,\n        organization_id: organizationId,\n      })\n      .select()\n      .single()\n\n    if (templateError) throw templateError\n\n    // Créer les questions\n    if (questions.length > 0) {\n      const questionsToInsert = questions.map((q, index) => ({\n        ...q,\n        template_id: templateData.id,\n        order_index: q.order_index ?? index + 1,\n      }))\n\n      const { error: questionsError } = await this.supabase\n        .from('evaluation_template_questions')\n        .insert(questionsToInsert)\n\n      if (questionsError) throw questionsError\n    }\n\n    // Récupérer le modèle complet avec les questions\n    const fullTemplate = await this.getTemplateById(templateData.id)\n    if (!fullTemplate) throw new Error('Erreur lors de la récupération du modèle créé')\n\n    return fullTemplate\n  }\n\n  /**\n   * Met à jour un modèle d'évaluation\n   */\n  async updateTemplate(\n    id: string,\n    template: Partial<EvaluationTemplateInsert>,\n    questions?: Omit<EvaluationTemplateQuestionInsert, 'template_id' | 'created_at' | 'updated_at'>[]\n  ): Promise<EvaluationTemplateWithQuestions> {\n    // Mettre à jour le modèle\n    const { error: templateError } = await this.supabase\n      .from('evaluation_templates')\n      .update(template)\n      .eq('id', id)\n\n    if (templateError) throw templateError\n\n    // Si des questions sont fournies, les mettre à jour\n    if (questions !== undefined) {\n      // Supprimer les anciennes questions\n      const { error: deleteError } = await this.supabase\n        .from('evaluation_template_questions')\n        .delete()\n        .eq('template_id', id)\n\n      if (deleteError) throw deleteError\n\n      // Insérer les nouvelles questions\n      if (questions.length > 0) {\n        const questionsToInsert = questions.map((q, index) => ({\n          ...q,\n          template_id: id,\n          order_index: q.order_index ?? index + 1,\n        }))\n\n        const { error: insertError } = await this.supabase\n          .from('evaluation_template_questions')\n          .insert(questionsToInsert)\n\n        if (insertError) throw insertError\n      }\n    }\n\n    // Récupérer le modèle complet\n    const fullTemplate = await this.getTemplateById(id)\n    if (!fullTemplate) throw new Error('Erreur lors de la récupération du modèle mis à jour')\n\n    return fullTemplate\n  }\n\n  /**\n   * Supprime un modèle d'évaluation\n   */\n  async deleteTemplate(id: string): Promise<void> {\n    const { error } = await this.supabase\n      .from('evaluation_templates')\n      .delete()\n      .eq('id', id)\n\n    if (error) throw error\n  }\n\n  // =====================================================\n  // Instances (Association modèle <-> évaluation)\n  // =====================================================\n\n  /**\n   * Associe un modèle à une évaluation (grade)\n   */\n  async createInstance(\n    gradeId: string,\n    templateId: string,\n    config?: {\n      max_score?: number\n      time_limit_minutes?: number\n    }\n  ): Promise<EvaluationTemplateInstance> {\n    const { data, error } = await this.supabase\n      .from('evaluation_template_instances')\n      .insert({\n        grade_id: gradeId,\n        template_id: templateId,\n        max_score: config?.max_score,\n        time_limit_minutes: config?.time_limit_minutes,\n      })\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  /**\n   * Récupère l'instance associée à une évaluation\n   */\n  async getInstanceByGradeId(gradeId: string): Promise<EvaluationInstanceWithDetails | null> {\n    try {\n      const { data, error } = await this.supabase\n        .from('evaluation_template_instances')\n        .select(`\n          *,\n          template:evaluation_templates(\n            *,\n            questions:evaluation_template_questions(*)\n          ),\n          grade:grades(*)\n        `)\n        .eq('grade_id', gradeId)\n        .single()\n\n      if (error) {\n        if (error.code === 'PGRST116') return null\n        throw error\n      }\n      return data as EvaluationInstanceWithDetails\n    } catch {\n      return null\n    }\n  }\n\n  /**\n   * Récupère toutes les réponses d'une instance\n   */\n  async getResponses(instanceId: string, studentId?: string): Promise<EvaluationResponse[]> {\n    let query = this.supabase\n      .from('evaluation_responses')\n      .select('*')\n      .eq('instance_id', instanceId)\n\n    if (studentId) {\n      query = query.eq('student_id', studentId)\n    }\n\n    const { data, error } = await query.order('created_at', { ascending: true })\n\n    if (error) {\n      console.error('Erreur récupération réponses:', error)\n      return []\n    }\n    return data || []\n  }\n\n  // =====================================================\n  // Réponses des étudiants\n  // =====================================================\n\n  /**\n   * Enregistre ou met à jour une réponse d'étudiant\n   */\n  async saveResponse(\n    instanceId: string,\n    questionId: string,\n    studentId: string,\n    answer: {\n      answer_text?: string\n      answer_choice?: string[]\n      answer_boolean?: boolean\n    }\n  ): Promise<EvaluationResponse> {\n    const { data, error } = await this.supabase\n      .from('evaluation_responses')\n      .upsert({\n        instance_id: instanceId,\n        question_id: questionId,\n        student_id: studentId,\n        answer_text: answer.answer_text,\n        answer_choice: answer.answer_choice,\n        answer_boolean: answer.answer_boolean,\n      }, {\n        onConflict: 'instance_id,question_id,student_id'\n      })\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  /**\n   * Corrige automatiquement toutes les réponses d'une instance\n   */\n  async autoCorrectResponses(instanceId: string): Promise<number> {\n    const { data, error } = await this.supabase\n      .rpc('auto_correct_evaluation_responses', { p_instance_id: instanceId })\n\n    if (error) throw error\n    return data || 0\n  }\n\n  /**\n   * Calcule le score d'une évaluation\n   */\n  async calculateScore(instanceId: string): Promise<EvaluationScore | null> {\n    const { data, error } = await this.supabase\n      .rpc('calculate_evaluation_score', { p_instance_id: instanceId })\n\n    if (error) {\n      console.error('Erreur calcul score:', error)\n      return null\n    }\n\n    if (!data || data.length === 0) return null\n\n    return {\n      total_score: Number(data[0].total_score) || 0,\n      max_score: Number(data[0].max_score) || 0,\n      percentage: Number(data[0].percentage) || 0,\n      correct_count: Number(data[0].correct_count) || 0,\n      total_questions: Number(data[0].total_questions) || 0,\n    }\n  }\n\n  /**\n   * Met à jour la note de l'évaluation (grade) avec le score calculé\n   */\n  async updateGradeFromScore(gradeId: string, instanceId: string): Promise<void> {\n    const score = await this.calculateScore(instanceId)\n    if (!score) return\n\n    const { error } = await this.supabase\n      .from('grades')\n      .update({\n        score: score.total_score,\n        max_score: score.max_score,\n        // percentage est une colonne générée, elle sera calculée automatiquement\n      })\n      .eq('id', gradeId)\n\n    if (error) throw error\n  }\n}\n\nexport const evaluationTemplateService = new EvaluationTemplateService()\n\n"],"names":[],"mappings":"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","ignoreList":[0,1,2]}