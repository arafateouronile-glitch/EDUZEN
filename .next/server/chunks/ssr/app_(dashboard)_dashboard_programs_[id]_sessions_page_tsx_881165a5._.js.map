{"version":3,"sources":["../../../../app/%28dashboard%29/dashboard/programs/%5Bid%5D/sessions/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { useParams, useRouter } from 'next/navigation'\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query'\nimport { createClient } from '@/lib/supabase/client'\nimport { programService } from '@/lib/services/program.service'\nimport { useAuth } from '@/lib/hooks/use-auth'\nimport { Button } from '@/components/ui/button'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { ArrowLeft, Plus, Calendar, Clock, MapPin, Users, X, UserPlus } from 'lucide-react'\nimport Link from 'next/link'\nimport { formatDate, formatCurrency } from '@/lib/utils'\nimport type { TableRow } from '@/lib/types/supabase-helpers'\n\ntype Enrollment = TableRow<'enrollments'>\n\nexport default function ProgramSessionsPage() {\n  const params = useParams()\n  const router = useRouter()\n  const programId = params.id as string\n  const supabase = createClient()\n  const queryClient = useQueryClient()\n  const { user } = useAuth()\n\n  const [showEnrollmentForm, setShowEnrollmentForm] = useState(false)\n  const [selectedSessionId, setSelectedSessionId] = useState<string | null>(null)\n  const [enrollmentForm, setEnrollmentForm] = useState({\n    student_id: '',\n    enrollment_date: new Date().toISOString().split('T')[0],\n    status: 'confirmed' as 'pending' | 'confirmed' | 'completed' | 'cancelled' | 'failed',\n    payment_status: 'pending' as 'pending' | 'partial' | 'paid' | 'overdue',\n    total_amount: '',\n    paid_amount: '0',\n  })\n\n  // Récupérer le programme\n  const { data: program } = useQuery({\n    queryKey: ['program', programId],\n    queryFn: () => programService.getProgramById(programId),\n  })\n\n  // Récupérer les sessions\n  const { data: sessions, isLoading, refetch } = useQuery({\n    queryKey: ['program-sessions', programId],\n    queryFn: async () => {\n      // Récupérer les formations du programme d'abord\n      const { data: formations } = await supabase\n        .from('formations')\n        .select('id')\n        .eq('program_id', programId)\n\n      if (!formations || formations.length === 0) return []\n\n      const formationIds = formations.map(f => f.id)\n\n      // Récupérer les sessions des formations\n      const { data, error } = await supabase\n        .from('sessions')\n        .select('*, formations(*, programs(*))')\n        .in('formation_id', formationIds)\n        .order('start_date', { ascending: false })\n\n      if (error) throw error\n      return data || []\n    },\n  })\n\n  // Récupérer les enseignants\n  const { data: teachers } = useQuery({\n    queryKey: ['teachers'],\n    queryFn: async () => {\n      const { data, error } = await supabase\n        .from('users')\n        .select('id, full_name')\n        .eq('role', 'teacher')\n        .eq('is_active', true)\n      if (error) throw error\n      return data || []\n    },\n  })\n\n  // Récupérer tous les élèves pour le formulaire d'inscription\n  const { data: students } = useQuery({\n    queryKey: ['students', user?.organization_id],\n    queryFn: async () => {\n      if (!user?.organization_id) return []\n      const { data, error } = await supabase\n        .from('students')\n        .select('id, first_name, last_name, student_number, email')\n        .eq('organization_id', user.organization_id)\n        .eq('status', 'active')\n        .order('last_name', { ascending: true })\n      if (error) throw error\n      return data || []\n    },\n    enabled: !!user?.organization_id,\n  })\n\n  // Récupérer les inscriptions existantes pour la session sélectionnée (pour filtrer les élèves déjà inscrits)\n  const { data: existingEnrollments } = useQuery({\n    queryKey: ['enrollments-for-session', selectedSessionId],\n    queryFn: async () => {\n      if (!selectedSessionId) return []\n      const { data, error } = await supabase\n        .from('enrollments')\n        .select('student_id')\n        .eq('session_id', selectedSessionId) // Utiliser session_id au lieu de program_session_id\n      if (error) throw error\n      return data || []\n    },\n    enabled: !!selectedSessionId && showEnrollmentForm,\n  })\n\n  // Filtrer les élèves déjà inscrits\n  const availableStudents = students?.filter(\n    (student) => !existingEnrollments?.some((enrollment) => enrollment.student_id === student.id)\n  ) || []\n\n  const [showNewSessionForm, setShowNewSessionForm] = useState(false)\n  const [sessionForm, setSessionForm] = useState({\n    name: '',\n    start_date: '',\n    end_date: '',\n    start_time: '',\n    end_time: '',\n    teacher_id: '',\n    location: '',\n    capacity_max: '',\n  })\n\n  const createSessionMutation = useMutation({\n    mutationFn: async () => {\n      // Note: Cette page utilise encore l'ancienne structure\n      // Les sessions devraient être créées via /dashboard/formations/[id]/sessions\n      // Pour l'instant, cette page est conservée pour compatibilité\n      throw new Error('Cette fonctionnalité doit être utilisée via /dashboard/formations/[id]/sessions')\n    },\n    onSuccess: () => {\n      setShowNewSessionForm(false)\n      setSessionForm({\n        name: '',\n        start_date: '',\n        end_date: '',\n        start_time: '',\n        end_time: '',\n        teacher_id: '',\n        location: '',\n        capacity_max: '',\n      })\n      // Invalider et refetch les queries pour rafraîchir les données\n      queryClient.invalidateQueries({ queryKey: ['program-sessions', programId] })\n      refetch()\n    },\n    onError: (error) => {\n      console.error('Erreur lors de la création de la session:', error)\n    },\n  })\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'planned':\n        return 'bg-blue-100 text-blue-800'\n      case 'ongoing':\n        return 'bg-success-bg text-success-primary'\n      case 'completed':\n        return 'bg-gray-100 text-gray-800'\n      case 'cancelled':\n        return 'bg-red-100 text-red-800'\n      default:\n        return 'bg-gray-100 text-gray-800'\n    }\n  }\n\n  const getStatusLabel = (status: string) => {\n    switch (status) {\n      case 'planned':\n        return 'Planifiée'\n      case 'ongoing':\n        return 'En cours'\n      case 'completed':\n        return 'Terminée'\n      case 'cancelled':\n        return 'Annulée'\n      default:\n        return status\n    }\n  }\n\n  // Fonction pour ouvrir le formulaire d'inscription\n  const handleEnrollStudent = (sessionId: string) => {\n    const session = sessions?.find((s: any) => s.id === sessionId)\n    setSelectedSessionId(sessionId)\n    setEnrollmentForm({\n      student_id: '',\n      enrollment_date: new Date().toISOString().split('T')[0],\n      status: 'confirmed',\n      payment_status: 'pending',\n      total_amount: (program?.formations?.[0] as any)?.price?.toString() || '0',\n      paid_amount: '0',\n    })\n    setShowEnrollmentForm(true)\n  }\n\n  // Mutation pour créer une inscription\n  const createEnrollmentMutation = useMutation({\n    mutationFn: async () => {\n      if (!selectedSessionId || !enrollmentForm.student_id) {\n        throw new Error('Veuillez sélectionner un élève')\n      }\n\n      console.log('Création d\\'inscription:', {\n        student_id: enrollmentForm.student_id,\n            session_id: selectedSessionId, // Utiliser session_id\n        enrollment_date: enrollmentForm.enrollment_date,\n        status: enrollmentForm.status,\n        payment_status: enrollmentForm.payment_status,\n        total_amount: parseFloat(enrollmentForm.total_amount) || 0,\n        paid_amount: parseFloat(enrollmentForm.paid_amount) || 0,\n      })\n\n      try {\n        // Vérifier d'abord si l'inscription existe déjà\n        const { data: existingEnrollment, error: checkError } = await supabase\n          .from('enrollments')\n          .select('id, status, payment_status')\n          .eq('student_id', enrollmentForm.student_id)\n          .eq('session_id', selectedSessionId) // Utiliser session_id\n          .maybeSingle()\n\n        // Si une erreur autre que \"not found\" se produit, la gérer\n        if (checkError && checkError.code !== 'PGRST116') {\n          console.error('Erreur lors de la vérification de l\\'inscription:', checkError)\n        }\n\n        // Si l'inscription existe déjà, refuser la création\n        if (existingEnrollment) {\n          throw new Error(\n            `Cet élève est déjà inscrit à cette session. (Statut: ${existingEnrollment.status}, Paiement: ${existingEnrollment.payment_status})`\n          )\n        }\n\n        // Si l'inscription n'existe pas, la créer\n        const { data, error } = await supabase\n          .from('enrollments')\n          .insert({\n            student_id: enrollmentForm.student_id,\n            session_id: selectedSessionId, // Utiliser session_id au lieu de program_session_id\n            enrollment_date: enrollmentForm.enrollment_date,\n            status: enrollmentForm.status,\n            payment_status: enrollmentForm.payment_status,\n            total_amount: parseFloat(enrollmentForm.total_amount) || 0,\n            paid_amount: parseFloat(enrollmentForm.paid_amount) || 0,\n          })\n          .select()\n          .single()\n\n        if (error) {\n          // Gérer spécifiquement l'erreur de duplication\n          if (error.code === '23505') {\n            throw new Error(\n              'Cet élève est déjà inscrit à cette session. Veuillez vérifier les inscriptions existantes.'\n            )\n          }\n          console.error('Erreur lors de la création de l\\'inscription:', {\n            code: error.code,\n            message: error.message,\n            details: error.details,\n            hint: error.hint,\n          })\n          throw error\n        }\n\n        console.log('Inscription créée avec succès:', data)\n        return data\n      } catch (error) {\n        console.error('Erreur dans createEnrollmentMutation:', error)\n        throw error\n      }\n    },\n    onSuccess: () => {\n      // Invalider les queries pour rafraîchir les données\n      queryClient.invalidateQueries({ queryKey: ['program-sessions', programId] })\n      queryClient.invalidateQueries({ queryKey: ['enrollments-for-session', selectedSessionId] })\n      queryClient.invalidateQueries({ queryKey: ['session-enrollments', selectedSessionId] }) // Pour la page de détails\n      queryClient.invalidateQueries({ queryKey: ['program-enrollments', programId] })\n      \n      // Rafraîchir également les données des sessions\n      refetch()\n      \n      setShowEnrollmentForm(false)\n      setSelectedSessionId(null)\n      setEnrollmentForm({\n        student_id: '',\n        enrollment_date: new Date().toISOString().split('T')[0],\n        status: 'confirmed',\n        payment_status: 'pending',\n        total_amount: (program as any)?.price?.toString() || '0',\n        paid_amount: '0',\n      })\n    },\n  })\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center space-x-4\">\n          <Link href={`/dashboard/programs/${programId}`}>\n            <Button variant=\"ghost\" size=\"icon\">\n              <ArrowLeft className=\"h-4 w-4\" />\n            </Button>\n          </Link>\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-900\">\n              Sessions - {program?.name}\n            </h1>\n            <p className=\"mt-2 text-sm text-gray-600\">\n              Gérez les sessions de cette formation\n            </p>\n          </div>\n        </div>\n        <Button onClick={() => setShowNewSessionForm(!showNewSessionForm)}>\n          <Plus className=\"mr-2 h-4 w-4\" />\n          Nouvelle session\n        </Button>\n      </div>\n\n      {showNewSessionForm && (\n        <Card>\n          <CardHeader>\n            <CardTitle>Nouvelle session</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <form\n              onSubmit={(e) => {\n                e.preventDefault()\n                createSessionMutation.mutate()\n              }}\n              className=\"space-y-4\"\n            >\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Nom de la session *</label>\n                  <input\n                    type=\"text\"\n                    required\n                    value={sessionForm.name}\n                    onChange={(e) => setSessionForm({ ...sessionForm, name: e.target.value })}\n                    className=\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target\"\n                    placeholder=\"Ex: Session 1 - Janvier 2024\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Lieu/Salle</label>\n                  <input\n                    type=\"text\"\n                    value={sessionForm.location}\n                    onChange={(e) => setSessionForm({ ...sessionForm, location: e.target.value })}\n                    className=\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target\"\n                    placeholder=\"Ex: Salle A1\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Date de début *</label>\n                  <input\n                    type=\"date\"\n                    required\n                    value={sessionForm.start_date}\n                    onChange={(e) => setSessionForm({ ...sessionForm, start_date: e.target.value })}\n                    className=\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Date de fin *</label>\n                  <input\n                    type=\"date\"\n                    required\n                    value={sessionForm.end_date}\n                    onChange={(e) => setSessionForm({ ...sessionForm, end_date: e.target.value })}\n                    className=\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Heure de début</label>\n                  <input\n                    type=\"time\"\n                    value={sessionForm.start_time}\n                    onChange={(e) => setSessionForm({ ...sessionForm, start_time: e.target.value })}\n                    className=\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Heure de fin</label>\n                  <input\n                    type=\"time\"\n                    value={sessionForm.end_time}\n                    onChange={(e) => setSessionForm({ ...sessionForm, end_time: e.target.value })}\n                    className=\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Enseignant</label>\n                  <select\n                    value={sessionForm.teacher_id}\n                    onChange={(e) => setSessionForm({ ...sessionForm, teacher_id: e.target.value })}\n                    className=\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target\"\n                  >\n                    <option value=\"\">Sélectionner un enseignant</option>\n                    {teachers?.map((teacher) => (\n                      <option key={teacher.id} value={teacher.id}>\n                        {teacher.full_name}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Capacité maximale</label>\n                  <input\n                    type=\"number\"\n                    value={sessionForm.capacity_max}\n                    onChange={(e) => setSessionForm({ ...sessionForm, capacity_max: e.target.value })}\n                    className=\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target\"\n                  />\n                </div>\n              </div>\n\n              {createSessionMutation.error && (\n                <div className=\"bg-destructive/10 text-destructive px-4 py-3 rounded-lg text-sm space-y-1\">\n                  <p className=\"font-semibold\">Erreur lors de la création de la session :</p>\n                  <p>\n                    {createSessionMutation.error instanceof Error\n                      ? createSessionMutation.error.message\n                      : 'Une erreur est survenue lors de la création de la session'}\n                  </p>\n                  {createSessionMutation.error && 'code' in createSessionMutation.error && (\n                    <p className=\"text-xs opacity-75\">\n                      Code d'erreur: {String(createSessionMutation.error.code)}\n                    </p>\n                  )}\n                </div>\n              )}\n\n              <div className=\"flex justify-end space-x-4\">\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  onClick={() => setShowNewSessionForm(false)}\n                >\n                  Annuler\n                </Button>\n                <Button type=\"submit\" disabled={createSessionMutation.isPending}>\n                  {createSessionMutation.isPending ? 'Création...' : 'Créer la session'}\n                </Button>\n              </div>\n            </form>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Formulaire d'inscription d'élève */}\n      {showEnrollmentForm && selectedSessionId && (\n        <Card>\n          <CardHeader>\n            <div className=\"flex items-center justify-between\">\n              <CardTitle>Inscrire un élève à la session</CardTitle>\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                onClick={() => setShowEnrollmentForm(false)}\n              >\n                <X className=\"h-4 w-4\" />\n              </Button>\n            </div>\n          </CardHeader>\n          <CardContent>\n            <form\n              onSubmit={(e) => {\n                e.preventDefault()\n                createEnrollmentMutation.mutate()\n              }}\n              className=\"space-y-6\"\n            >\n              <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4\">\n                <p className=\"text-sm text-blue-800\">\n                  <strong>Session:</strong> {sessions?.find((s: any) => s.id === selectedSessionId)?.name}\n                </p>\n                <p className=\"text-sm text-blue-700 mt-1\">\n                  {sessions?.find((s: any) => s.id === selectedSessionId) && (\n                    <>\n                      {formatDate(sessions.find((s: any) => s.id === selectedSessionId)!.start_date)} -{' '}\n                      {formatDate(sessions.find((s: any) => s.id === selectedSessionId)!.end_date)}\n                    </>\n                  )}\n                </p>\n              </div>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                {/* Élève */}\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">\n                    Élève *\n                  </label>\n                  <select\n                    required\n                    value={enrollmentForm.student_id}\n                    onChange={(e) =>\n                      setEnrollmentForm({\n                        ...enrollmentForm,\n                        student_id: e.target.value,\n                      })\n                    }\n                    className=\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target\"\n                  >\n                    <option value=\"\">Sélectionner un élève</option>\n                    {availableStudents.length > 0 ? (\n                      availableStudents.map((student) => (\n                        <option key={student.id} value={student.id}>\n                          {student.first_name} {student.last_name} ({student.student_number})\n                        </option>\n                      ))\n                    ) : (\n                      <option value=\"\" disabled>\n                        Aucun élève disponible (tous déjà inscrits ou aucun élève actif)\n                      </option>\n                    )}\n                  </select>\n                </div>\n\n                {/* Date d'inscription */}\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">\n                    Date d'inscription *\n                  </label>\n                  <input\n                    type=\"date\"\n                    required\n                    value={enrollmentForm.enrollment_date}\n                    onChange={(e) =>\n                      setEnrollmentForm({\n                        ...enrollmentForm,\n                        enrollment_date: e.target.value,\n                      })\n                    }\n                    className=\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target\"\n                  />\n                </div>\n\n                {/* Statut */}\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">\n                    Statut *\n                  </label>\n                  <select\n                    required\n                    value={enrollmentForm.status}\n                    onChange={(e) =>\n                      setEnrollmentForm({\n                        ...enrollmentForm,\n                        status: e.target.value as 'pending' | 'confirmed' | 'completed' | 'cancelled' | 'failed',\n                      })\n                    }\n                    className=\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target\"\n                  >\n                    <option value=\"pending\">En attente</option>\n                    <option value=\"confirmed\">Confirmée</option>\n                    <option value=\"completed\">Terminée</option>\n                    <option value=\"cancelled\">Annulée</option>\n                    <option value=\"failed\">Échouée</option>\n                  </select>\n                </div>\n\n                {/* Montant total */}\n                {program && (\n                  <div>\n                    <label className=\"block text-sm font-medium mb-2\">\n                      Montant total ({(program as any).currency || 'XOF'}) *\n                    </label>\n                    <input\n                      type=\"number\"\n                      required\n                      step=\"0.01\"\n                      min=\"0\"\n                      value={enrollmentForm.total_amount}\n                      onChange={(e) =>\n                        setEnrollmentForm({\n                          ...enrollmentForm,\n                          total_amount: e.target.value,\n                        })\n                      }\n                      className=\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target\"\n                    />\n                  </div>\n                )}\n\n                {/* Montant payé */}\n                {program && (\n                  <div>\n                    <label className=\"block text-sm font-medium mb-2\">\n                      Montant payé ({(program as any).currency || 'XOF'})\n                    </label>\n                    <input\n                      type=\"number\"\n                      step=\"0.01\"\n                      min=\"0\"\n                      value={enrollmentForm.paid_amount}\n                      onChange={(e) => {\n                        const paid = e.target.value\n                        const total = parseFloat(enrollmentForm.total_amount) || 0\n                        const paidAmount = parseFloat(paid) || 0\n\n                        let paymentStatus: 'pending' | 'partial' | 'paid' | 'overdue' = 'pending'\n                        if (paidAmount >= total && total > 0) {\n                          paymentStatus = 'paid'\n                        } else if (paidAmount > 0) {\n                          paymentStatus = 'partial'\n                        }\n\n                        setEnrollmentForm({\n                          ...enrollmentForm,\n                          paid_amount: paid,\n                          payment_status: paymentStatus,\n                        })\n                      }}\n                      className=\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target\"\n                    />\n                  </div>\n                )}\n\n                {/* Statut de paiement */}\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">\n                    Statut de paiement\n                  </label>\n                  <select\n                    value={enrollmentForm.payment_status}\n                    onChange={(e) =>\n                      setEnrollmentForm({\n                        ...enrollmentForm,\n                        payment_status: e.target.value as 'pending' | 'partial' | 'paid' | 'overdue',\n                      })\n                    }\n                    className=\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target\"\n                  >\n                    <option value=\"pending\">En attente</option>\n                    <option value=\"partial\">Partiel</option>\n                    <option value=\"paid\">Payé</option>\n                    <option value=\"overdue\">En retard</option>\n                  </select>\n                </div>\n              </div>\n\n              {createEnrollmentMutation.error && (\n                <div className=\"bg-destructive/10 text-destructive px-4 py-3 rounded-lg text-sm space-y-1\">\n                  <p className=\"font-semibold\">Erreur lors de la création de l'inscription :</p>\n                  <p>\n                    {createEnrollmentMutation.error instanceof Error\n                      ? createEnrollmentMutation.error.message\n                      : 'Une erreur est survenue lors de la création de l\\'inscription'}\n                  </p>\n                  {createEnrollmentMutation.error && 'code' in createEnrollmentMutation.error && (\n                    <p className=\"text-xs opacity-75\">\n                      Code d'erreur: {String(createEnrollmentMutation.error.code)}\n                      {createEnrollmentMutation.error.code === '42501' && (\n                        <span className=\"block mt-1\">\n                          Erreur de sécurité RLS. Assurez-vous d'avoir exécuté le script <code className=\"bg-gray-200 px-1 rounded\">supabase/fix_enrollments_rls.sql</code> dans le SQL Editor de Supabase.\n                        </span>\n                      )}\n                      {createEnrollmentMutation.error.code === '23505' && (\n                        <span className=\"block mt-1\">\n                          ❌ Cette inscription existe déjà. Un élève ne peut être inscrit qu'une seule fois à une session.\n                        </span>\n                      )}\n                    </p>\n                  )}\n                </div>\n              )}\n\n              <div className=\"flex justify-end space-x-4\">\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  onClick={() => setShowEnrollmentForm(false)}\n                >\n                  Annuler\n                </Button>\n                <Button type=\"submit\" disabled={createEnrollmentMutation.isPending}>\n                  {createEnrollmentMutation.isPending ? 'Inscription...' : 'Inscrire l\\'élève'}\n                </Button>\n              </div>\n            </form>\n          </CardContent>\n        </Card>\n      )}\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Liste des sessions</CardTitle>\n        </CardHeader>\n        <CardContent>\n          {isLoading ? (\n            <div className=\"text-center py-12 text-muted-foreground\">\n              Chargement...\n            </div>\n          ) : sessions && sessions.length > 0 ? (\n            <div className=\"space-y-4\">\n              {sessions.map((session) => (\n                <div\n                  key={session.id}\n                  className=\"p-4 border rounded-lg hover:bg-gray-50 transition-colors\"\n                >\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex-1\">\n                      <h3 className=\"font-semibold text-lg\">{session.name}</h3>\n                      <div className=\"mt-2 grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-muted-foreground\">\n                        <div className=\"flex items-center\">\n                          <Calendar className=\"mr-2 h-4 w-4\" />\n                          {formatDate(session.start_date)} - {formatDate(session.end_date)}\n                        </div>\n                        {session.start_time && session.end_time && (\n                          <div className=\"flex items-center\">\n                            <Clock className=\"mr-2 h-4 w-4\" />\n                            {session.start_time} - {session.end_time}\n                          </div>\n                        )}\n                        {session.location && (\n                          <div className=\"flex items-center\">\n                            <MapPin className=\"mr-2 h-4 w-4\" />\n                            {session.location}\n                          </div>\n                        )}\n                      </div>\n                      {session.capacity_max && (\n                        <div className=\"mt-2 flex items-center text-sm text-muted-foreground\">\n                          <Users className=\"mr-2 h-4 w-4\" />\n                          Capacité: {session.capacity_max} apprenants\n                        </div>\n                      )}\n                    </div>\n                    <div className=\"flex flex-col items-end space-y-2\">\n                      <span className={`px-2 py-1 rounded text-xs ${getStatusColor(session.status)}`}>\n                        {getStatusLabel(session.status)}\n                      </span>\n                      <div className=\"flex space-x-2\">\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={() => handleEnrollStudent(session.id)}\n                        >\n                          <UserPlus className=\"mr-1 h-3 w-3\" />\n                          Inscrire élève\n                        </Button>\n                        <Link href={`/dashboard/programs/${programId}/sessions/${session.id}`}>\n                          <Button variant=\"outline\" size=\"sm\">\n                            Voir détails\n                          </Button>\n                        </Link>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <div className=\"text-center py-12 text-muted-foreground\">\n              Aucune session créée. Créez-en une pour commencer.\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n\n"],"names":[],"mappings":"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"}