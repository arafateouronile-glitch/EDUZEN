{"version":3,"sources":["../../../../app/%28dashboard%29/dashboard/catalog/settings/page.tsx","../../../../lib/services/public-catalog-settings.service.ts"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query'\nimport { useAuth } from '@/lib/hooks/use-auth'\nimport { publicCatalogSettingsService, type PublicCatalogSettingsFormData } from '@/lib/services/public-catalog-settings.service'\nimport { Button } from '@/components/ui/button'\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Textarea } from '@/components/ui/textarea'\nimport { Switch } from '@/components/ui/switch'\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'\nimport { useToast } from '@/components/ui/toast'\nimport { Save, Upload, Image as ImageIcon, Palette, Globe, FileText, Mail, Settings, ExternalLink } from 'lucide-react'\nimport { createClient } from '@/lib/supabase/client'\nimport Link from 'next/link'\n\nexport default function CatalogSettingsPage() {\n  const { user } = useAuth()\n  const { addToast } = useToast()\n  const queryClient = useQueryClient()\n  const supabase = createClient()\n\n  const [formData, setFormData] = useState<PublicCatalogSettingsFormData>({\n    is_enabled: false,\n    primary_color: '#274472',\n    background_color: '#ffffff',\n    text_color: '#000000',\n    hero_button_text: 'Découvrir nos formations',\n    show_contact_form: true,\n  })\n\n  // Récupérer l'organisation pour pré-remplir les données\n  const { data: organization } = useQuery<Record<string, any> | null>({\n    queryKey: ['organization', user?.organization_id],\n    queryFn: async () => {\n      if (!user?.organization_id) return null\n      const { data, error } = await supabase\n        .from('organizations')\n        .select('*')\n        .eq('id', user.organization_id)\n        .maybeSingle()\n      if (error) throw error\n      return data as Record<string, any> | null\n    },\n    enabled: !!user?.organization_id,\n  })\n\n  // Récupérer les settings existants\n  const { data: settings, isLoading } = useQuery<Record<string, any> | null>({\n    queryKey: ['public-catalog-settings', user?.organization_id],\n    queryFn: async () => {\n      const result = await publicCatalogSettingsService.getSettings(user?.organization_id!)\n      return result as Record<string, any> | null\n    },\n    enabled: !!user?.organization_id,\n  })\n\n  // Initialiser le formulaire avec les données existantes et les données de l'organisation\n  useEffect(() => {\n    if (settings || organization) {\n      setFormData({\n        is_enabled: settings?.is_enabled ?? false,\n        // Informations de base - pré-remplies depuis l'organisation\n        site_title: settings?.site_title ?? organization?.name ?? undefined,\n        site_description: settings?.site_description ?? undefined,\n        site_keywords: settings?.site_keywords ?? undefined,\n        // Couleurs\n        primary_color: settings?.primary_color ?? '#274472',\n        secondary_color: settings?.secondary_color ?? undefined,\n        accent_color: settings?.accent_color ?? undefined,\n        background_color: settings?.background_color ?? '#ffffff',\n        text_color: settings?.text_color ?? '#000000',\n        // Logo - pré-rempli depuis l'organisation\n        logo_url: settings?.logo_url ?? organization?.logo_url ?? undefined,\n        favicon_url: settings?.favicon_url ?? undefined,\n        cover_image_url: settings?.cover_image_url ?? undefined,\n        footer_image_url: settings?.footer_image_url ?? undefined,\n        // Hero - pré-rempli avec le nom de l'organisation\n        hero_title: settings?.hero_title ?? organization?.name ?? undefined,\n        hero_subtitle: settings?.hero_subtitle ?? undefined,\n        hero_description: settings?.hero_description ?? undefined,\n        hero_button_text: settings?.hero_button_text ?? 'Découvrir nos formations',\n        hero_button_link: settings?.hero_button_link ?? '/programmes',\n        // À propos\n        about_title: settings?.about_title ?? undefined,\n        about_content: settings?.about_content ?? undefined,\n        about_image_url: settings?.about_image_url ?? undefined,\n        // Contact - pré-rempli depuis l'organisation\n        contact_email: settings?.contact_email ?? organization?.email ?? undefined,\n        contact_phone: settings?.contact_phone ?? organization?.phone ?? undefined,\n        contact_address: settings?.contact_address ?? organization?.address ?? undefined,\n        show_contact_form: settings?.show_contact_form ?? true,\n        // Footer\n        footer_text: settings?.footer_text ?? undefined,\n        footer_links: settings?.footer_links as any ?? undefined,\n        social_links: settings?.social_links as any ?? undefined,\n        // SEO\n        google_analytics_id: settings?.google_analytics_id ?? undefined,\n        google_tag_manager_id: settings?.google_tag_manager_id ?? undefined,\n        meta_title: settings?.meta_title ?? organization?.name ?? undefined,\n        meta_description: settings?.meta_description ?? undefined,\n        meta_image_url: settings?.meta_image_url ?? organization?.logo_url ?? undefined,\n        custom_domain: settings?.custom_domain ?? undefined,\n      })\n    }\n  }, [settings, organization])\n\n  // Mutation pour sauvegarder\n  const saveMutation = useMutation({\n    mutationFn: async (data: PublicCatalogSettingsFormData) => {\n      if (!user?.organization_id) throw new Error('Organization ID manquant')\n      return publicCatalogSettingsService.upsertSettings(user.organization_id, data)\n    },\n    onSuccess: () => {\n      addToast({\n        title: 'Paramètres sauvegardés',\n        description: 'Les paramètres du catalogue public ont été sauvegardés avec succès.',\n        type: 'success',\n      })\n      queryClient.invalidateQueries({ queryKey: ['public-catalog-settings'] })\n    },\n    onError: (error: any) => {\n      addToast({\n        title: 'Erreur',\n        description: error.message || 'Une erreur est survenue lors de la sauvegarde.',\n        type: 'error',\n      })\n    },\n  })\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault()\n    saveMutation.mutate(formData)\n  }\n\n  const handleImageUpload = async (field: 'logo_url' | 'favicon_url' | 'cover_image_url' | 'footer_image_url' | 'about_image_url' | 'meta_image_url', file: File) => {\n    if (!user?.organization_id) return\n\n    try {\n      const fileExt = file.name.split('.').pop()\n      const fileName = `${user.organization_id}/catalog/${field}/${Date.now()}.${fileExt}`\n      \n      const { error: uploadError } = await supabase.storage\n        .from('organizations')\n        .upload(fileName, file, { upsert: true })\n\n      if (uploadError) throw uploadError\n\n      const { data: { publicUrl } } = supabase.storage\n        .from('organizations')\n        .getPublicUrl(fileName)\n\n      setFormData((prev) => ({ ...prev, [field]: publicUrl }))\n    } catch (error: any) {\n      addToast({\n        title: 'Erreur d\\'upload',\n        description: error.message || 'Erreur lors de l\\'upload de l\\'image',\n        type: 'error',\n      })\n    }\n  }\n\n  if (isLoading) {\n    return <div className=\"p-6\">Chargement...</div>\n  }\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold\">Paramètres du site vitrine</h1>\n          <p className=\"text-gray-600 mt-1\">\n            Personnalisez votre catalogue public et votre site vitrine\n          </p>\n        </div>\n        <div className=\"flex items-center gap-4\">\n          {organization && (\n            <Link \n              href={`/cataloguepublic/${organization.code || organization.id}`}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              <Button variant=\"outline\">\n                <ExternalLink className=\"w-4 h-4 mr-2\" />\n                Voir le site public\n              </Button>\n            </Link>\n          )}\n          <Button onClick={handleSubmit} disabled={saveMutation.isPending}>\n            <Save className=\"w-4 h-4 mr-2\" />\n            Enregistrer\n          </Button>\n        </div>\n      </div>\n\n      <form onSubmit={handleSubmit}>\n        <Tabs defaultValue=\"general\" className=\"space-y-6\">\n          <TabsList>\n            <TabsTrigger value=\"general\">\n              <Settings className=\"w-4 h-4 mr-2\" />\n              Général\n            </TabsTrigger>\n            <TabsTrigger value=\"appearance\">\n              <Palette className=\"w-4 h-4 mr-2\" />\n              Apparence\n            </TabsTrigger>\n            <TabsTrigger value=\"content\">\n              <FileText className=\"w-4 h-4 mr-2\" />\n              Contenu\n            </TabsTrigger>\n            <TabsTrigger value=\"contact\">\n              <Mail className=\"w-4 h-4 mr-2\" />\n              Contact\n            </TabsTrigger>\n            <TabsTrigger value=\"seo\">\n              <Globe className=\"w-4 h-4 mr-2\" />\n              SEO\n            </TabsTrigger>\n          </TabsList>\n\n          {/* Général */}\n          <TabsContent value=\"general\" className=\"space-y-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Activation</CardTitle>\n                <CardDescription>Activez votre site vitrine pour le rendre accessible publiquement</CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <Label>Site vitrine actif</Label>\n                    <p className=\"text-sm text-gray-500\">Rendre le site vitrine accessible publiquement</p>\n                  </div>\n                  <Switch\n                    checked={formData.is_enabled}\n                    onCheckedChange={(checked) => setFormData((prev) => ({ ...prev, is_enabled: checked }))}\n                  />\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>Informations de base</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div>\n                  <Label htmlFor=\"site_title\">Titre du site</Label>\n                  <Input\n                    id=\"site_title\"\n                    value={formData.site_title || ''}\n                    onChange={(e) => setFormData((prev) => ({ ...prev, site_title: e.target.value }))}\n                    placeholder=\"Ex: Formations Professionnelles - Mon Organisme\"\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"site_description\">Description</Label>\n                  <Textarea\n                    id=\"site_description\"\n                    value={formData.site_description || ''}\n                    onChange={(e) => setFormData((prev) => ({ ...prev, site_description: e.target.value }))}\n                    placeholder=\"Description du site pour le SEO\"\n                    rows={3}\n                  />\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          {/* Apparence */}\n          <TabsContent value=\"appearance\" className=\"space-y-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Couleurs</CardTitle>\n                <CardDescription>Personnalisez les couleurs de votre site vitrine</CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <Label htmlFor=\"primary_color\">Couleur principale</Label>\n                    <div className=\"flex gap-2 mt-1\">\n                      <Input\n                        id=\"primary_color\"\n                        type=\"color\"\n                        value={formData.primary_color}\n                        onChange={(e) => setFormData((prev) => ({ ...prev, primary_color: e.target.value }))}\n                        className=\"w-16 h-10\"\n                      />\n                      <Input\n                        value={formData.primary_color}\n                        onChange={(e) => setFormData((prev) => ({ ...prev, primary_color: e.target.value }))}\n                        placeholder=\"#274472\"\n                      />\n                    </div>\n                  </div>\n                  <div>\n                    <Label htmlFor=\"secondary_color\">Couleur secondaire</Label>\n                    <div className=\"flex gap-2 mt-1\">\n                      <Input\n                        id=\"secondary_color\"\n                        type=\"color\"\n                        value={formData.secondary_color || '#ffffff'}\n                        onChange={(e) => setFormData((prev) => ({ ...prev, secondary_color: e.target.value }))}\n                        className=\"w-16 h-10\"\n                      />\n                      <Input\n                        value={formData.secondary_color || ''}\n                        onChange={(e) => setFormData((prev) => ({ ...prev, secondary_color: e.target.value }))}\n                        placeholder=\"#ffffff\"\n                      />\n                    </div>\n                  </div>\n                  <div>\n                    <Label htmlFor=\"accent_color\">Couleur d'accent</Label>\n                    <div className=\"flex gap-2 mt-1\">\n                      <Input\n                        id=\"accent_color\"\n                        type=\"color\"\n                        value={formData.accent_color || '#274472'}\n                        onChange={(e) => setFormData((prev) => ({ ...prev, accent_color: e.target.value }))}\n                        className=\"w-16 h-10\"\n                      />\n                      <Input\n                        value={formData.accent_color || ''}\n                        onChange={(e) => setFormData((prev) => ({ ...prev, accent_color: e.target.value }))}\n                        placeholder=\"#274472\"\n                      />\n                    </div>\n                  </div>\n                  <div>\n                    <Label htmlFor=\"background_color\">Couleur de fond</Label>\n                    <div className=\"flex gap-2 mt-1\">\n                      <Input\n                        id=\"background_color\"\n                        type=\"color\"\n                        value={formData.background_color}\n                        onChange={(e) => setFormData((prev) => ({ ...prev, background_color: e.target.value }))}\n                        className=\"w-16 h-10\"\n                      />\n                      <Input\n                        value={formData.background_color}\n                        onChange={(e) => setFormData((prev) => ({ ...prev, background_color: e.target.value }))}\n                        placeholder=\"#ffffff\"\n                      />\n                    </div>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>Images</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div>\n                  <Label>Logo</Label>\n                  <div className=\"flex gap-4 mt-2\">\n                    {formData.logo_url && (\n                      <img src={formData.logo_url} alt=\"Logo\" className=\"h-20 w-auto object-contain border rounded\" />\n                    )}\n                    <div>\n                      <Input\n                        type=\"file\"\n                        accept=\"image/*\"\n                        onChange={(e) => {\n                          const file = e.target.files?.[0]\n                          if (file) handleImageUpload('logo_url', file)\n                        }}\n                        className=\"hidden\"\n                        id=\"logo-upload\"\n                      />\n                      <Button\n                        type=\"button\"\n                        variant=\"outline\"\n                        onClick={() => document.getElementById('logo-upload')?.click()}\n                      >\n                        <Upload className=\"w-4 h-4 mr-2\" />\n                        {formData.logo_url ? 'Changer le logo' : 'Uploader un logo'}\n                      </Button>\n                    </div>\n                  </div>\n                </div>\n\n                <div>\n                  <Label>Image de couverture (Hero)</Label>\n                  <div className=\"flex gap-4 mt-2\">\n                    {formData.cover_image_url && (\n                      <img src={formData.cover_image_url} alt=\"Cover\" className=\"h-32 w-auto object-cover border rounded\" />\n                    )}\n                    <div>\n                      <Input\n                        type=\"file\"\n                        accept=\"image/*\"\n                        onChange={(e) => {\n                          const file = e.target.files?.[0]\n                          if (file) handleImageUpload('cover_image_url', file)\n                        }}\n                        className=\"hidden\"\n                        id=\"cover-upload\"\n                      />\n                      <Button\n                        type=\"button\"\n                        variant=\"outline\"\n                        onClick={() => document.getElementById('cover-upload')?.click()}\n                      >\n                        <Upload className=\"w-4 h-4 mr-2\" />\n                        {formData.cover_image_url ? 'Changer l\\'image' : 'Uploader une image'}\n                      </Button>\n                    </div>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          {/* Contenu */}\n          <TabsContent value=\"content\" className=\"space-y-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Section Hero</CardTitle>\n                <CardDescription>En-tête principal de votre site</CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div>\n                  <Label htmlFor=\"hero_title\">Titre principal</Label>\n                  <Input\n                    id=\"hero_title\"\n                    value={formData.hero_title || ''}\n                    onChange={(e) => setFormData((prev) => ({ ...prev, hero_title: e.target.value }))}\n                    placeholder=\"Ex: Formations Professionnelles de Qualité\"\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"hero_subtitle\">Sous-titre</Label>\n                  <Input\n                    id=\"hero_subtitle\"\n                    value={formData.hero_subtitle || ''}\n                    onChange={(e) => setFormData((prev) => ({ ...prev, hero_subtitle: e.target.value }))}\n                    placeholder=\"Ex: Développez vos compétences\"\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"hero_description\">Description</Label>\n                  <Textarea\n                    id=\"hero_description\"\n                    value={formData.hero_description || ''}\n                    onChange={(e) => setFormData((prev) => ({ ...prev, hero_description: e.target.value }))}\n                    placeholder=\"Description de votre organisme\"\n                    rows={4}\n                  />\n                </div>\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <Label htmlFor=\"hero_button_text\">Texte du bouton</Label>\n                    <Input\n                      id=\"hero_button_text\"\n                      value={formData.hero_button_text || ''}\n                      onChange={(e) => setFormData((prev) => ({ ...prev, hero_button_text: e.target.value }))}\n                    />\n                  </div>\n                  <div>\n                    <Label htmlFor=\"hero_button_link\">Lien du bouton</Label>\n                    <Input\n                      id=\"hero_button_link\"\n                      value={formData.hero_button_link || ''}\n                      onChange={(e) => setFormData((prev) => ({ ...prev, hero_button_link: e.target.value }))}\n                      placeholder=\"/programmes\"\n                    />\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>Section À propos</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div>\n                  <Label htmlFor=\"about_title\">Titre</Label>\n                  <Input\n                    id=\"about_title\"\n                    value={formData.about_title || ''}\n                    onChange={(e) => setFormData((prev) => ({ ...prev, about_title: e.target.value }))}\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"about_content\">Contenu</Label>\n                  <Textarea\n                    id=\"about_content\"\n                    value={formData.about_content || ''}\n                    onChange={(e) => setFormData((prev) => ({ ...prev, about_content: e.target.value }))}\n                    rows={6}\n                  />\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          {/* Contact */}\n          <TabsContent value=\"contact\" className=\"space-y-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Informations de contact</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div>\n                  <Label htmlFor=\"contact_email\">Email</Label>\n                  <Input\n                    id=\"contact_email\"\n                    type=\"email\"\n                    value={formData.contact_email || ''}\n                    onChange={(e) => setFormData((prev) => ({ ...prev, contact_email: e.target.value }))}\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"contact_phone\">Téléphone</Label>\n                  <Input\n                    id=\"contact_phone\"\n                    value={formData.contact_phone || ''}\n                    onChange={(e) => setFormData((prev) => ({ ...prev, contact_phone: e.target.value }))}\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"contact_address\">Adresse</Label>\n                  <Textarea\n                    id=\"contact_address\"\n                    value={formData.contact_address || ''}\n                    onChange={(e) => setFormData((prev) => ({ ...prev, contact_address: e.target.value }))}\n                    rows={3}\n                  />\n                </div>\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <Label>Formulaire de contact</Label>\n                    <p className=\"text-sm text-gray-500\">Afficher un formulaire de contact sur le site</p>\n                  </div>\n                  <Switch\n                    checked={formData.show_contact_form ?? true}\n                    onCheckedChange={(checked) => setFormData((prev) => ({ ...prev, show_contact_form: checked }))}\n                  />\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          {/* SEO */}\n          <TabsContent value=\"seo\" className=\"space-y-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Métadonnées SEO</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div>\n                  <Label htmlFor=\"meta_title\">Titre SEO</Label>\n                  <Input\n                    id=\"meta_title\"\n                    value={formData.meta_title || ''}\n                    onChange={(e) => setFormData((prev) => ({ ...prev, meta_title: e.target.value }))}\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"meta_description\">Description SEO</Label>\n                  <Textarea\n                    id=\"meta_description\"\n                    value={formData.meta_description || ''}\n                    onChange={(e) => setFormData((prev) => ({ ...prev, meta_description: e.target.value }))}\n                    rows={3}\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"google_analytics_id\">Google Analytics ID</Label>\n                  <Input\n                    id=\"google_analytics_id\"\n                    value={formData.google_analytics_id || ''}\n                    onChange={(e) => setFormData((prev) => ({ ...prev, google_analytics_id: e.target.value }))}\n                    placeholder=\"G-XXXXXXXXXX\"\n                  />\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n        </Tabs>\n      </form>\n    </div>\n  )\n}\n\n","/**\n * Service pour gérer les paramètres du catalogue public (site vitrine)\n */\n\nimport { createClient } from '@/lib/supabase/client'\nimport type { SupabaseClient } from '@supabase/supabase-js'\nimport { Database } from '@/types/database.types'\nimport type { TableRow, TableInsert, TableUpdate, FlexibleInsert, FlexibleUpdate } from '@/lib/types/supabase-helpers'\n\ntype PublicCatalogSettings = TableRow<'public_catalog_settings'>\ntype PublicCatalogSettingsInsert = TableInsert<'public_catalog_settings'>\ntype PublicCatalogSettingsUpdate = TableUpdate<'public_catalog_settings'>\n\nexport interface PublicCatalogSettingsFormData {\n  is_enabled: boolean\n  site_title?: string\n  site_description?: string\n  site_keywords?: string[]\n  primary_color?: string\n  secondary_color?: string\n  accent_color?: string\n  background_color?: string\n  text_color?: string\n  logo_url?: string\n  favicon_url?: string\n  cover_image_url?: string\n  footer_image_url?: string\n  hero_title?: string\n  hero_subtitle?: string\n  hero_description?: string\n  hero_button_text?: string\n  hero_button_link?: string\n  about_title?: string\n  about_content?: string\n  about_image_url?: string\n  contact_email?: string\n  contact_phone?: string\n  contact_address?: string\n  show_contact_form?: boolean\n  footer_text?: string\n  footer_links?: Array<{ label: string; url: string }>\n  social_links?: {\n    facebook?: string\n    linkedin?: string\n    twitter?: string\n    instagram?: string\n    youtube?: string\n  }\n  google_analytics_id?: string\n  google_tag_manager_id?: string\n  meta_title?: string\n  meta_description?: string\n  meta_image_url?: string\n  custom_domain?: string\n}\n\nexport class PublicCatalogSettingsService {\n  private supabase: SupabaseClient<Database>\n\n\n  constructor(supabaseClient?: SupabaseClient<Database>) {\n\n    this.supabase = supabaseClient || createClient()\n\n  }\n\n  /**\n   * Récupère les paramètres du catalogue pour une organisation\n   */\n  async getSettings(organizationId: string): Promise<PublicCatalogSettings | null> {\n    const { data, error } = await this.supabase\n      .from('public_catalog_settings')\n      .select('*')\n      .eq('organization_id', organizationId)\n      .maybeSingle()\n\n    if (error) throw error\n    return data\n  }\n\n  /**\n   * Crée ou met à jour les paramètres du catalogue\n   */\n  async upsertSettings(\n    organizationId: string,\n    settings: FlexibleInsert<'public_catalog_settings'> | FlexibleUpdate<'public_catalog_settings'>\n  ): Promise<PublicCatalogSettings> {\n    // Vérifier si des settings existent déjà\n    const existing = await this.getSettings(organizationId)\n\n    if (existing) {\n      // Mise à jour\n      const { data, error } = await this.supabase\n        .from('public_catalog_settings')\n        .update(settings as PublicCatalogSettingsUpdate)\n        .eq('organization_id', organizationId)\n        .select()\n        .single()\n\n      if (error) throw error\n      return data\n    } else {\n      // Création\n      const { data, error } = await this.supabase\n        .from('public_catalog_settings')\n        .insert({\n          organization_id: organizationId,\n          ...settings,\n        } as PublicCatalogSettingsInsert)\n        .select()\n        .single()\n\n      if (error) throw error\n      return data\n    }\n  }\n\n  /**\n   * Récupère les paramètres publics (pour le site vitrine)\n   * Utilisé par les pages publiques\n   */\n  async getPublicSettings(organizationId?: string): Promise<PublicCatalogSettings | null> {\n    let query = this.supabase\n      .from('public_catalog_settings')\n      .select('*')\n      .eq('is_enabled', true)\n\n    if (organizationId) {\n      query = query.eq('organization_id', organizationId)\n    }\n\n    const { data, error } = await query.maybeSingle()\n\n    if (error) throw error\n    return data\n  }\n\n  /**\n   * Active ou désactive le site vitrine\n   */\n  async setEnabled(organizationId: string, enabled: boolean): Promise<PublicCatalogSettings> {\n    return this.upsertSettings(organizationId, { is_enabled: enabled })\n  }\n}\n\nexport const publicCatalogSettingsService = new PublicCatalogSettingsService()\n\n\n\n"],"names":[],"mappings":"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"}