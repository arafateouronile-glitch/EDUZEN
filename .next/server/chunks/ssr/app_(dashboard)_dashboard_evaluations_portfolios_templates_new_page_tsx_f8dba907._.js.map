{"version":3,"sources":["../../../../app/%28dashboard%29/dashboard/evaluations/portfolios/templates/new/page.tsx","../../../../lib/services/learning-portfolio.service.ts"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { useRouter } from 'next/navigation'\nimport { useMutation, useQuery } from '@tanstack/react-query'\nimport { useAuth } from '@/lib/hooks/use-auth'\nimport { createClient } from '@/lib/supabase/client'\nimport { learningPortfolioService, type TemplateSection, type TemplateField } from '@/lib/services/learning-portfolio.service'\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Textarea } from '@/components/ui/textarea'\nimport { Switch } from '@/components/ui/switch'\nimport { useToast } from '@/components/ui/toast'\nimport {\n  ArrowLeft, Save, Plus, Trash2, GripVertical, ChevronDown, ChevronUp,\n  FileText, Type, AlignLeft, Hash, List, CheckSquare, Calendar, \n  Upload, Star, Award, Eye, Settings\n} from 'lucide-react'\nimport Link from 'next/link'\nimport { motion, AnimatePresence } from '@/components/ui/motion'\nimport { cn } from '@/lib/utils'\n\nconst FIELD_TYPES = [\n  { value: 'text', label: 'Texte court', icon: Type },\n  { value: 'textarea', label: 'Texte long', icon: AlignLeft },\n  { value: 'number', label: 'Nombre', icon: Hash },\n  { value: 'select', label: 'Liste déroulante', icon: List },\n  { value: 'checkbox', label: 'Case à cocher', icon: CheckSquare },\n  { value: 'date', label: 'Date', icon: Calendar },\n  { value: 'file', label: 'Fichier', icon: Upload },\n  { value: 'rating', label: 'Note (étoiles)', icon: Star },\n  { value: 'competency', label: 'Compétence', icon: Award },\n]\n\nexport default function NewTemplatePage() {\n  const router = useRouter()\n  const { user } = useAuth()\n  const supabase = createClient()\n  const { addToast } = useToast()\n\n  const [formData, setFormData] = useState({\n    name: '',\n    description: '',\n    primary_color: '#335ACF',\n    secondary_color: '#34B9EE',\n    formation_id: '',\n    is_default: false,\n  })\n\n  const [sections, setSections] = useState<TemplateSection[]>([])\n  const [expandedSections, setExpandedSections] = useState<string[]>([])\n\n  // Récupérer les formations pour le select\n  const { data: formations } = useQuery({\n    queryKey: ['formations-select', user?.organization_id],\n    queryFn: async () => {\n      if (!user?.organization_id) return []\n      const { data, error } = await supabase\n        .from('formations')\n        .select('id, name')\n        .eq('organization_id', user.organization_id)\n        .eq('is_active', true)\n      if (error) return []\n      return data || []\n    },\n    enabled: !!user?.organization_id,\n  })\n\n  // Mutation pour créer le template\n  const createMutation = useMutation({\n    mutationFn: async () => {\n      const { data, error } = await (supabase\n        .from('learning_portfolio_templates') as any)\n        .insert({\n          organization_id: user?.organization_id,\n          name: formData.name,\n          description: formData.description,\n          template_structure: sections,\n          primary_color: formData.primary_color,\n          secondary_color: formData.secondary_color,\n          formation_id: formData.formation_id || null,\n          is_default: formData.is_default,\n          created_by: user?.id,\n        })\n        .select()\n        .single()\n      \n      if (error) throw error\n      return data\n    },\n    onSuccess: () => {\n      addToast({ type: 'success', title: 'Modèle créé', description: 'Le modèle de livret a été créé avec succès.' })\n      router.push('/dashboard/evaluations/portfolios/templates')\n    },\n    onError: (error: any) => {\n      addToast({ type: 'error', title: 'Erreur', description: error.message || 'Impossible de créer le modèle.' })\n    },\n  })\n\n  // Ajouter une section\n  const addSection = () => {\n    const newSection: TemplateSection = {\n      id: `section_${Date.now()}`,\n      title: 'Nouvelle section',\n      description: '',\n      fields: [],\n    }\n    setSections([...sections, newSection])\n    setExpandedSections([...expandedSections, newSection.id])\n  }\n\n  // Supprimer une section\n  const removeSection = (sectionId: string) => {\n    setSections(sections.filter(s => s.id !== sectionId))\n  }\n\n  // Mettre à jour une section\n  const updateSection = (sectionId: string, updates: Partial<TemplateSection>) => {\n    setSections(sections.map(s => s.id === sectionId ? { ...s, ...updates } : s))\n  }\n\n  // Ajouter un champ à une section\n  const addField = (sectionId: string) => {\n    const newField: TemplateField = {\n      id: `field_${Date.now()}`,\n      label: 'Nouveau champ',\n      type: 'text',\n      required: false,\n    }\n    setSections(sections.map(s => \n      s.id === sectionId \n        ? { ...s, fields: [...s.fields, newField] }\n        : s\n    ))\n  }\n\n  // Supprimer un champ\n  const removeField = (sectionId: string, fieldId: string) => {\n    setSections(sections.map(s => \n      s.id === sectionId \n        ? { ...s, fields: s.fields.filter(f => f.id !== fieldId) }\n        : s\n    ))\n  }\n\n  // Mettre à jour un champ\n  const updateField = (sectionId: string, fieldId: string, updates: Partial<TemplateField>) => {\n    setSections(sections.map(s => \n      s.id === sectionId \n        ? { ...s, fields: s.fields.map(f => f.id === fieldId ? { ...f, ...updates } : f) }\n        : s\n    ))\n  }\n\n  // Basculer l'expansion d'une section\n  const toggleSection = (sectionId: string) => {\n    setExpandedSections(prev => \n      prev.includes(sectionId) \n        ? prev.filter(id => id !== sectionId)\n        : [...prev, sectionId]\n    )\n  }\n\n  // Charger un template par défaut\n  const loadDefaultTemplate = () => {\n    const defaultSections = learningPortfolioService.getDefaultTemplateStructure()\n    setSections(defaultSections)\n    setExpandedSections(defaultSections.map(s => s.id))\n    addToast({ type: 'info', title: 'Modèle chargé', description: 'Le modèle par défaut a été chargé.' })\n  }\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault()\n    if (!formData.name) {\n      addToast({ type: 'error', title: 'Erreur', description: 'Le nom du modèle est requis.' })\n      return\n    }\n    if (sections.length === 0) {\n      addToast({ type: 'error', title: 'Erreur', description: 'Ajoutez au moins une section.' })\n      return\n    }\n    createMutation.mutate()\n  }\n\n  return (\n    <div className=\"container mx-auto py-8 px-4 max-w-5xl\">\n      {/* Header */}\n      <motion.div\n        initial={{ opacity: 0, y: -20 }}\n        animate={{ opacity: 1, y: 0 }}\n        className=\"mb-8\"\n      >\n        <div className=\"flex items-center gap-4 mb-4\">\n          <Link href=\"/dashboard/evaluations/portfolios/templates\">\n            <Button variant=\"ghost\" size=\"icon\">\n              <ArrowLeft className=\"h-5 w-5\" />\n            </Button>\n          </Link>\n          <div className=\"flex-1\">\n            <h1 className=\"text-3xl font-bold text-gray-900\">\n              Nouveau modèle de livret\n            </h1>\n            <p className=\"text-gray-600\">\n              Créez un modèle de livret d'apprentissage personnalisé\n            </p>\n          </div>\n          <Button variant=\"outline\" onClick={loadDefaultTemplate}>\n            <FileText className=\"h-4 w-4 mr-2\" />\n            Charger modèle par défaut\n          </Button>\n        </div>\n      </motion.div>\n\n      <form onSubmit={handleSubmit}>\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n          {/* Paramètres généraux */}\n          <div className=\"lg:col-span-1\">\n            <Card className=\"sticky top-4\">\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Settings className=\"h-5 w-5\" />\n                  Paramètres\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div>\n                  <Label htmlFor=\"name\">Nom du modèle *</Label>\n                  <Input\n                    id=\"name\"\n                    value={formData.name}\n                    onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                    placeholder=\"Ex: Livret de suivi formation\"\n                    required\n                  />\n                </div>\n\n                <div>\n                  <Label htmlFor=\"description\">Description</Label>\n                  <Textarea\n                    id=\"description\"\n                    value={formData.description}\n                    onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                    placeholder=\"Description du modèle...\"\n                    rows={3}\n                  />\n                </div>\n\n                <div>\n                  <Label htmlFor=\"formation\">Formation associée (optionnel)</Label>\n                  <select\n                    id=\"formation\"\n                    value={formData.formation_id}\n                    onChange={(e) => setFormData({ ...formData, formation_id: e.target.value })}\n                    className=\"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-brand-blue\"\n                  >\n                    <option value=\"\">Aucune (modèle générique)</option>\n                    {formations?.map((f: any) => (\n                      <option key={f.id} value={f.id}>{f.name}</option>\n                    ))}\n                  </select>\n                </div>\n\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <Label htmlFor=\"primary_color\">Couleur principale</Label>\n                    <div className=\"flex items-center gap-2\">\n                      <input\n                        type=\"color\"\n                        id=\"primary_color\"\n                        value={formData.primary_color}\n                        onChange={(e) => setFormData({ ...formData, primary_color: e.target.value })}\n                        className=\"w-10 h-10 rounded cursor-pointer\"\n                      />\n                      <Input\n                        value={formData.primary_color}\n                        onChange={(e) => setFormData({ ...formData, primary_color: e.target.value })}\n                        className=\"flex-1\"\n                      />\n                    </div>\n                  </div>\n                  <div>\n                    <Label htmlFor=\"secondary_color\">Couleur secondaire</Label>\n                    <div className=\"flex items-center gap-2\">\n                      <input\n                        type=\"color\"\n                        id=\"secondary_color\"\n                        value={formData.secondary_color}\n                        onChange={(e) => setFormData({ ...formData, secondary_color: e.target.value })}\n                        className=\"w-10 h-10 rounded cursor-pointer\"\n                      />\n                      <Input\n                        value={formData.secondary_color}\n                        onChange={(e) => setFormData({ ...formData, secondary_color: e.target.value })}\n                        className=\"flex-1\"\n                      />\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"flex items-center justify-between\">\n                  <Label htmlFor=\"is_default\">Modèle par défaut</Label>\n                  <Switch\n                    checked={formData.is_default}\n                    onCheckedChange={(checked) => setFormData({ ...formData, is_default: checked })}\n                  />\n                </div>\n\n                <div className=\"pt-4 border-t\">\n                  <Button \n                    type=\"submit\" \n                    className=\"w-full\"\n                    disabled={createMutation.isPending}\n                  >\n                    <Save className=\"h-4 w-4 mr-2\" />\n                    {createMutation.isPending ? 'Création...' : 'Créer le modèle'}\n                  </Button>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n\n          {/* Éditeur de sections */}\n          <div className=\"lg:col-span-2 space-y-4\">\n            <div className=\"flex items-center justify-between\">\n              <h2 className=\"text-lg font-semibold text-gray-900\">\n                Structure du livret ({sections.length} section{sections.length > 1 ? 's' : ''})\n              </h2>\n              <Button type=\"button\" onClick={addSection}>\n                <Plus className=\"h-4 w-4 mr-2\" />\n                Ajouter une section\n              </Button>\n            </div>\n\n            {sections.length === 0 ? (\n              <Card>\n                <CardContent className=\"py-12 text-center\">\n                  <FileText className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n                  <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n                    Aucune section\n                  </h3>\n                  <p className=\"text-gray-600 mb-4\">\n                    Ajoutez des sections pour structurer votre livret d'apprentissage.\n                  </p>\n                  <div className=\"flex justify-center gap-3\">\n                    <Button type=\"button\" onClick={addSection}>\n                      <Plus className=\"h-4 w-4 mr-2\" />\n                      Ajouter une section\n                    </Button>\n                    <Button type=\"button\" variant=\"outline\" onClick={loadDefaultTemplate}>\n                      Charger modèle par défaut\n                    </Button>\n                  </div>\n                </CardContent>\n              </Card>\n            ) : (\n              <AnimatePresence>\n                {sections.map((section, sectionIndex) => (\n                  <motion.div\n                    key={section.id}\n                    initial={{ opacity: 0, y: 20 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    exit={{ opacity: 0, y: -20 }}\n                    transition={{ delay: sectionIndex * 0.05 }}\n                  >\n                    <Card className=\"border-l-4\" style={{ borderLeftColor: formData.primary_color }}>\n                      <CardHeader className=\"py-3\">\n                        <div className=\"flex items-center gap-3\">\n                          <GripVertical className=\"h-5 w-5 text-gray-400 cursor-move\" />\n                          <div className=\"flex-1\">\n                            <Input\n                              value={section.title}\n                              onChange={(e) => updateSection(section.id, { title: e.target.value })}\n                              className=\"font-semibold text-lg border-none p-0 h-auto focus:ring-0\"\n                              placeholder=\"Titre de la section\"\n                            />\n                            <Input\n                              value={section.description || ''}\n                              onChange={(e) => updateSection(section.id, { description: e.target.value })}\n                              className=\"text-sm text-gray-500 border-none p-0 h-auto focus:ring-0 mt-1\"\n                              placeholder=\"Description (optionnel)\"\n                            />\n                          </div>\n                          <div className=\"flex items-center gap-2\">\n                            <span className=\"text-sm text-gray-500\">\n                              {section.fields.length} champ{section.fields.length > 1 ? 's' : ''}\n                            </span>\n                            <Button\n                              type=\"button\"\n                              variant=\"ghost\"\n                              size=\"sm\"\n                              onClick={() => toggleSection(section.id)}\n                            >\n                              {expandedSections.includes(section.id) ? (\n                                <ChevronUp className=\"h-4 w-4\" />\n                              ) : (\n                                <ChevronDown className=\"h-4 w-4\" />\n                              )}\n                            </Button>\n                            <Button\n                              type=\"button\"\n                              variant=\"ghost\"\n                              size=\"sm\"\n                              onClick={() => removeSection(section.id)}\n                              className=\"text-red-600 hover:text-red-700 hover:bg-red-50\"\n                            >\n                              <Trash2 className=\"h-4 w-4\" />\n                            </Button>\n                          </div>\n                        </div>\n                      </CardHeader>\n                      \n                      <AnimatePresence>\n                        {expandedSections.includes(section.id) && (\n                          <motion.div\n                            initial={{ height: 0, opacity: 0 }}\n                            animate={{ height: 'auto', opacity: 1 }}\n                            exit={{ height: 0, opacity: 0 }}\n                          >\n                            <CardContent className=\"pt-0\">\n                              <div className=\"space-y-3\">\n                                {section.fields.map((field, fieldIndex) => (\n                                  <div\n                                    key={field.id}\n                                    className=\"p-3 bg-gray-50 rounded-lg border\"\n                                  >\n                                    <div className=\"grid grid-cols-12 gap-3\">\n                                      <div className=\"col-span-5\">\n                                        <Label className=\"text-xs\">Label</Label>\n                                        <Input\n                                          value={field.label}\n                                          onChange={(e) => updateField(section.id, field.id, { label: e.target.value })}\n                                          placeholder=\"Nom du champ\"\n                                        />\n                                      </div>\n                                      <div className=\"col-span-4\">\n                                        <Label className=\"text-xs\">Type</Label>\n                                        <select\n                                          value={field.type}\n                                          onChange={(e) => updateField(section.id, field.id, { type: e.target.value as any })}\n                                          className=\"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-brand-blue text-sm\"\n                                        >\n                                          {FIELD_TYPES.map(ft => (\n                                            <option key={ft.value} value={ft.value}>{ft.label}</option>\n                                          ))}\n                                        </select>\n                                      </div>\n                                      <div className=\"col-span-2 flex items-end justify-center\">\n                                        <label className=\"flex items-center gap-2 text-sm\">\n                                          <input\n                                            type=\"checkbox\"\n                                            checked={field.required}\n                                            onChange={(e) => updateField(section.id, field.id, { required: e.target.checked })}\n                                            className=\"rounded\"\n                                          />\n                                          Requis\n                                        </label>\n                                      </div>\n                                      <div className=\"col-span-1 flex items-end justify-end\">\n                                        <Button\n                                          type=\"button\"\n                                          variant=\"ghost\"\n                                          size=\"sm\"\n                                          onClick={() => removeField(section.id, field.id)}\n                                          className=\"text-red-600 hover:text-red-700\"\n                                        >\n                                          <Trash2 className=\"h-4 w-4\" />\n                                        </Button>\n                                      </div>\n                                    </div>\n                                    \n                                    {/* Options pour certains types */}\n                                    {(field.type === 'select' || field.type === 'competency') && (\n                                      <div className=\"mt-3\">\n                                        <Label className=\"text-xs\">\n                                          {field.type === 'competency' ? 'Niveaux de compétence' : 'Options'} (séparées par des virgules)\n                                        </Label>\n                                        <Input\n                                          value={field.type === 'competency' \n                                            ? (field.competencyLevels || ['Non acquis', 'En cours', 'Acquis', 'Maîtrisé']).join(', ')\n                                            : (field.options || []).join(', ')\n                                          }\n                                          onChange={(e) => {\n                                            const values = e.target.value.split(',').map(v => v.trim())\n                                            if (field.type === 'competency') {\n                                              updateField(section.id, field.id, { competencyLevels: values })\n                                            } else {\n                                              updateField(section.id, field.id, { options: values })\n                                            }\n                                          }}\n                                          placeholder={field.type === 'competency' \n                                            ? 'Non acquis, En cours, Acquis, Maîtrisé'\n                                            : 'Option 1, Option 2, Option 3'\n                                          }\n                                        />\n                                      </div>\n                                    )}\n                                    \n                                    {field.type === 'rating' && (\n                                      <div className=\"mt-3 grid grid-cols-2 gap-3\">\n                                        <div>\n                                          <Label className=\"text-xs\">Note min</Label>\n                                          <Input\n                                            type=\"number\"\n                                            value={field.min || 1}\n                                            onChange={(e) => updateField(section.id, field.id, { min: parseInt(e.target.value) })}\n                                          />\n                                        </div>\n                                        <div>\n                                          <Label className=\"text-xs\">Note max</Label>\n                                          <Input\n                                            type=\"number\"\n                                            value={field.max || 5}\n                                            onChange={(e) => updateField(section.id, field.id, { max: parseInt(e.target.value) })}\n                                          />\n                                        </div>\n                                      </div>\n                                    )}\n                                  </div>\n                                ))}\n                              </div>\n                              \n                              <Button\n                                type=\"button\"\n                                variant=\"outline\"\n                                size=\"sm\"\n                                onClick={() => addField(section.id)}\n                                className=\"mt-3 w-full\"\n                              >\n                                <Plus className=\"h-4 w-4 mr-2\" />\n                                Ajouter un champ\n                              </Button>\n                            </CardContent>\n                          </motion.div>\n                        )}\n                      </AnimatePresence>\n                    </Card>\n                  </motion.div>\n                ))}\n              </AnimatePresence>\n            )}\n          </div>\n        </div>\n      </form>\n    </div>\n  )\n}\n\n","import { createClient } from '@/lib/supabase/client'\nimport type { SupabaseClient } from '@supabase/supabase-js'\n\n// Types pour les livrets d'apprentissage\nexport interface TemplateField {\n  id: string\n  label: string\n  type: 'text' | 'textarea' | 'number' | 'select' | 'checkbox' | 'date' | 'file' | 'rating' | 'competency'\n  required: boolean\n  placeholder?: string\n  options?: string[] // Pour select\n  min?: number // Pour number/rating\n  max?: number\n  description?: string\n  competencyLevels?: string[] // Pour competency: ['Non acquis', 'En cours', 'Acquis', 'Maîtrisé']\n}\n\nexport interface TemplateSection {\n  id: string\n  title: string\n  description?: string\n  icon?: string\n  fields: TemplateField[]\n}\n\nexport interface LearningPortfolioTemplate {\n  id: string\n  organization_id: string\n  name: string\n  description?: string\n  template_structure: TemplateSection[]\n  version: number\n  is_active: boolean\n  is_default: boolean\n  header_logo_url?: string\n  primary_color: string\n  secondary_color: string\n  formation_id?: string\n  created_by?: string\n  created_at: string\n  updated_at: string\n}\n\nexport interface LearningPortfolio {\n  id: string\n  organization_id: string\n  template_id: string\n  student_id: string\n  session_id?: string\n  content: Record<string, any>\n  status: 'draft' | 'in_progress' | 'completed' | 'validated'\n  progress_percentage: number\n  started_at?: string\n  completed_at?: string\n  validated_at?: string\n  validated_by?: string\n  is_visible_to_student: boolean\n  pdf_url?: string\n  pdf_generated_at?: string\n  teacher_notes?: string\n  student_comments?: string\n  last_modified_by?: string\n  created_at: string\n  updated_at: string\n  // Relations\n  template?: LearningPortfolioTemplate\n  student?: any\n  session?: any\n}\n\nexport interface PortfolioEntry {\n  id: string\n  portfolio_id: string\n  section_id: string\n  field_id: string\n  value: any\n  score?: number\n  max_score?: number\n  grade?: string\n  teacher_comment?: string\n  attachments: Array<{ url: string; name: string; type: string; size: number }>\n  evaluated_by?: string\n  evaluated_at?: string\n  created_at: string\n  updated_at: string\n}\n\nclass LearningPortfolioService {\n  private supabase: SupabaseClient<any>\n\n\n  constructor(supabaseClient?: SupabaseClient<any>) {\n\n    this.supabase = supabaseClient || createClient()\n\n  }\n\n  // =====================================================\n  // Templates\n  // =====================================================\n\n  async getTemplates(organizationId: string): Promise<LearningPortfolioTemplate[]> {\n    // Récupérer les templates de l'organisation ET les modèles système (organization_id IS NULL)\n    const { data, error } = await this.supabase\n      .from('learning_portfolio_templates')\n      .select('*')\n      .or(`organization_id.eq.${organizationId},organization_id.is.null`)\n      .eq('is_active', true)\n      .order('is_default', { ascending: false })\n      .order('created_at', { ascending: false })\n\n    if (error) {\n      console.error('Erreur récupération templates:', error)\n      return []\n    }\n    return data || []\n  }\n\n  async getTemplateById(id: string): Promise<LearningPortfolioTemplate | null> {\n    const { data, error } = await this.supabase\n      .from('learning_portfolio_templates')\n      .select('*')\n      .eq('id', id)\n      .single()\n\n    if (error) {\n      console.error('Erreur récupération template:', error)\n      return null\n    }\n    return data\n  }\n\n  async createTemplate(template: Partial<LearningPortfolioTemplate>): Promise<LearningPortfolioTemplate | null> {\n    const { data, error } = await this.supabase\n      .from('learning_portfolio_templates')\n      .insert(template)\n      .select()\n      .single()\n\n    if (error) {\n      console.error('Erreur création template:', error)\n      throw error\n    }\n    return data\n  }\n\n  async updateTemplate(id: string, updates: Partial<LearningPortfolioTemplate>): Promise<LearningPortfolioTemplate | null> {\n    const { data, error } = await this.supabase\n      .from('learning_portfolio_templates')\n      .update({ ...updates, version: updates.version ? updates.version + 1 : 1 })\n      .eq('id', id)\n      .select()\n      .single()\n\n    if (error) {\n      console.error('Erreur mise à jour template:', error)\n      throw error\n    }\n    return data\n  }\n\n  async deleteTemplate(id: string): Promise<boolean> {\n    const { error } = await this.supabase\n      .from('learning_portfolio_templates')\n      .update({ is_active: false })\n      .eq('id', id)\n\n    if (error) {\n      console.error('Erreur suppression template:', error)\n      return false\n    }\n    return true\n  }\n\n  // =====================================================\n  // Portfolios\n  // =====================================================\n\n  async getPortfolios(organizationId: string, filters?: {\n    studentId?: string\n    sessionId?: string\n    status?: string\n    templateId?: string\n  }): Promise<LearningPortfolio[]> {\n    let query = this.supabase\n      .from('learning_portfolios')\n      .select(`\n        *,\n        template:learning_portfolio_templates(*),\n        student:students(id, first_name, last_name, email, photo_url),\n        session:sessions(id, name, start_date, end_date)\n      `)\n      .eq('organization_id', organizationId)\n      .order('updated_at', { ascending: false })\n\n    if (filters?.studentId) {\n      query = query.eq('student_id', filters.studentId)\n    }\n    if (filters?.sessionId) {\n      query = query.eq('session_id', filters.sessionId)\n    }\n    if (filters?.status) {\n      query = query.eq('status', filters.status)\n    }\n    if (filters?.templateId) {\n      query = query.eq('template_id', filters.templateId)\n    }\n\n    const { data, error } = await query\n\n    if (error) {\n      console.error('Erreur récupération portfolios:', error)\n      return []\n    }\n    return data || []\n  }\n\n  async getPortfolioById(id: string): Promise<LearningPortfolio | null> {\n    const { data, error } = await this.supabase\n      .from('learning_portfolios')\n      .select(`\n        *,\n        template:learning_portfolio_templates(*),\n        student:students(id, first_name, last_name, email, photo_url, phone),\n        session:sessions(id, name, start_date, end_date, formations(id, title))\n      `)\n      .eq('id', id)\n      .single()\n\n    if (error) {\n      console.error('Erreur récupération portfolio:', error)\n      return null\n    }\n    return data\n  }\n\n  async getStudentPortfolios(studentId: string): Promise<LearningPortfolio[]> {\n    const { data, error } = await this.supabase\n      .from('learning_portfolios')\n      .select(`\n        *,\n        template:learning_portfolio_templates(id, name, description, primary_color),\n        session:sessions(id, name, formations(id, title))\n      `)\n      .eq('student_id', studentId)\n      .eq('is_visible_to_student', true)\n      .order('updated_at', { ascending: false })\n\n    if (error) {\n      console.error('Erreur récupération portfolios étudiant:', error)\n      return []\n    }\n    return data || []\n  }\n\n  async createPortfolio(portfolio: Partial<LearningPortfolio>): Promise<LearningPortfolio | null> {\n    const { data, error } = await this.supabase\n      .from('learning_portfolios')\n      .insert({\n        ...portfolio,\n        status: 'draft',\n        progress_percentage: 0,\n        started_at: new Date().toISOString(),\n      })\n      .select()\n      .single()\n\n    if (error) {\n      console.error('Erreur création portfolio:', error)\n      throw error\n    }\n    return data\n  }\n\n  async updatePortfolio(id: string, updates: Partial<LearningPortfolio>, userId?: string): Promise<LearningPortfolio | null> {\n    const { data, error } = await this.supabase\n      .from('learning_portfolios')\n      .update({\n        ...updates,\n        last_modified_by: userId,\n      })\n      .eq('id', id)\n      .select()\n      .single()\n\n    if (error) {\n      console.error('Erreur mise à jour portfolio:', error)\n      throw error\n    }\n    return data\n  }\n\n  async validatePortfolio(id: string, validatorId: string): Promise<LearningPortfolio | null> {\n    const { data, error } = await this.supabase\n      .from('learning_portfolios')\n      .update({\n        status: 'validated',\n        validated_at: new Date().toISOString(),\n        validated_by: validatorId,\n        is_visible_to_student: true,\n      })\n      .eq('id', id)\n      .select()\n      .single()\n\n    if (error) {\n      console.error('Erreur validation portfolio:', error)\n      throw error\n    }\n    return data\n  }\n\n  // =====================================================\n  // Entries\n  // =====================================================\n\n  async getPortfolioEntries(portfolioId: string): Promise<PortfolioEntry[]> {\n    const { data, error } = await this.supabase\n      .from('learning_portfolio_entries')\n      .select('*')\n      .eq('portfolio_id', portfolioId)\n      .order('created_at', { ascending: true })\n\n    if (error) {\n      console.error('Erreur récupération entries:', error)\n      return []\n    }\n    return data || []\n  }\n\n  async upsertEntry(entry: Partial<PortfolioEntry>): Promise<PortfolioEntry | null> {\n    const { data, error } = await this.supabase\n      .from('learning_portfolio_entries')\n      .upsert(\n        {\n          ...entry,\n          evaluated_at: new Date().toISOString(),\n        },\n        {\n          onConflict: 'portfolio_id,section_id,field_id',\n        }\n      )\n      .select()\n      .single()\n\n    if (error) {\n      console.error('Erreur upsert entry:', error)\n      throw error\n    }\n    return data\n  }\n\n  async bulkUpsertEntries(entries: Partial<PortfolioEntry>[]): Promise<boolean> {\n    const { error } = await this.supabase\n      .from('learning_portfolio_entries')\n      .upsert(\n        entries.map((e) => ({\n          ...e,\n          evaluated_at: new Date().toISOString(),\n        })),\n        {\n          onConflict: 'portfolio_id,section_id,field_id',\n        }\n      )\n\n    if (error) {\n      console.error('Erreur bulk upsert entries:', error)\n      throw error\n    }\n    return true\n  }\n\n  // =====================================================\n  // Signatures\n  // =====================================================\n\n  async addSignature(signature: {\n    portfolio_id: string\n    signer_type: 'student' | 'teacher' | 'tutor' | 'company_tutor' | 'admin'\n    signer_id: string\n    signer_name: string\n    signer_role?: string\n    signature_data: string\n  }): Promise<boolean> {\n    const { error } = await this.supabase\n      .from('learning_portfolio_signatures')\n      .insert({\n        ...signature,\n        signed_at: new Date().toISOString(),\n      })\n\n    if (error) {\n      console.error('Erreur ajout signature:', error)\n      throw error\n    }\n    return true\n  }\n\n  async getSignatures(portfolioId: string): Promise<any[]> {\n    const { data, error } = await this.supabase\n      .from('learning_portfolio_signatures')\n      .select('*')\n      .eq('portfolio_id', portfolioId)\n      .order('signed_at', { ascending: true })\n\n    if (error) {\n      console.error('Erreur récupération signatures:', error)\n      return []\n    }\n    return data || []\n  }\n\n  // =====================================================\n  // Helpers\n  // =====================================================\n\n  getDefaultTemplateStructure(): TemplateSection[] {\n    return [\n      // ===== SECTION 1: PAGE DE GARDE =====\n      {\n        id: 'page_garde',\n        title: 'Page de garde',\n        description: 'Informations générales sur le livret',\n        icon: 'file-text',\n        fields: [\n          { id: 'formation_title', label: 'Intitulé de la formation', type: 'text', required: true, placeholder: 'Ex: CAP Menuisier' },\n          { id: 'formation_code', label: 'Code formation / RNCP', type: 'text', required: false, placeholder: 'Ex: RNCP34567' },\n          { id: 'formation_duration', label: 'Durée totale de la formation', type: 'text', required: true, placeholder: 'Ex: 1200 heures' },\n          { id: 'training_period_start', label: 'Date de début de formation', type: 'date', required: true },\n          { id: 'training_period_end', label: 'Date de fin de formation', type: 'date', required: true },\n        ],\n      },\n\n      // ===== SECTION 2: IDENTIFICATION DE L'APPRENANT =====\n      {\n        id: 'identification_apprenant',\n        title: 'Identification de l\\'apprenant',\n        description: 'Coordonnées et informations personnelles de l\\'apprenant',\n        icon: 'user',\n        fields: [\n          { id: 'learner_civility', label: 'Civilité', type: 'select', required: true, options: ['M.', 'Mme', 'Autre'] },\n          { id: 'learner_last_name', label: 'Nom de famille', type: 'text', required: true },\n          { id: 'learner_first_name', label: 'Prénom', type: 'text', required: true },\n          { id: 'learner_birth_date', label: 'Date de naissance', type: 'date', required: true },\n          { id: 'learner_birth_place', label: 'Lieu de naissance', type: 'text', required: false },\n          { id: 'learner_address', label: 'Adresse', type: 'textarea', required: false, placeholder: 'Adresse complète' },\n          { id: 'learner_phone', label: 'Téléphone', type: 'text', required: false },\n          { id: 'learner_email', label: 'Email', type: 'text', required: false },\n          { id: 'learner_photo', label: 'Photo d\\'identité', type: 'file', required: false },\n        ],\n      },\n\n      // ===== SECTION 3: ORGANISME DE FORMATION =====\n      {\n        id: 'organisme_formation',\n        title: 'Organisme de formation',\n        description: 'Informations sur l\\'organisme de formation (CFA / OF)',\n        icon: 'building',\n        fields: [\n          { id: 'of_name', label: 'Nom de l\\'organisme', type: 'text', required: true },\n          { id: 'of_address', label: 'Adresse', type: 'textarea', required: false },\n          { id: 'of_phone', label: 'Téléphone', type: 'text', required: false },\n          { id: 'of_email', label: 'Email', type: 'text', required: false },\n          { id: 'of_siret', label: 'N° SIRET', type: 'text', required: false },\n          { id: 'of_nda', label: 'N° de déclaration d\\'activité', type: 'text', required: false },\n          { id: 'referent_pedagogique', label: 'Référent pédagogique', type: 'text', required: true },\n          { id: 'referent_phone', label: 'Téléphone du référent', type: 'text', required: false },\n          { id: 'referent_email', label: 'Email du référent', type: 'text', required: false },\n        ],\n      },\n\n      // ===== SECTION 4: ENTREPRISE D'ACCUEIL =====\n      {\n        id: 'entreprise_accueil',\n        title: 'Entreprise d\\'accueil',\n        description: 'Informations sur l\\'entreprise d\\'accueil pour l\\'alternance',\n        icon: 'briefcase',\n        fields: [\n          { id: 'company_name', label: 'Raison sociale', type: 'text', required: true },\n          { id: 'company_address', label: 'Adresse', type: 'textarea', required: false },\n          { id: 'company_phone', label: 'Téléphone', type: 'text', required: false },\n          { id: 'company_email', label: 'Email', type: 'text', required: false },\n          { id: 'company_siret', label: 'N° SIRET', type: 'text', required: false },\n          { id: 'company_activity', label: 'Activité principale', type: 'text', required: false },\n          { id: 'company_size', label: 'Effectif', type: 'select', required: false, options: ['1-10', '11-50', '51-250', '251-500', '500+'] },\n          { id: 'tutor_name', label: 'Maître d\\'apprentissage / Tuteur', type: 'text', required: true },\n          { id: 'tutor_function', label: 'Fonction du tuteur', type: 'text', required: false },\n          { id: 'tutor_phone', label: 'Téléphone du tuteur', type: 'text', required: false },\n          { id: 'tutor_email', label: 'Email du tuteur', type: 'text', required: false },\n        ],\n      },\n\n      // ===== SECTION 5: CALENDRIER DE L'ALTERNANCE =====\n      {\n        id: 'calendrier_alternance',\n        title: 'Calendrier de l\\'alternance',\n        description: 'Planning des périodes en entreprise et en formation',\n        icon: 'calendar',\n        fields: [\n          { id: 'alternance_rhythm', label: 'Rythme de l\\'alternance', type: 'text', required: true, placeholder: 'Ex: 2 semaines entreprise / 1 semaine CFA' },\n          { id: 'total_hours_company', label: 'Heures totales en entreprise', type: 'number', required: false, min: 0 },\n          { id: 'total_hours_training', label: 'Heures totales en formation', type: 'number', required: false, min: 0 },\n          { id: 'calendar_notes', label: 'Remarques sur le calendrier', type: 'textarea', required: false },\n        ],\n      },\n\n      // ===== SECTION 6: OBJECTIFS DE LA FORMATION =====\n      {\n        id: 'objectifs_formation',\n        title: 'Objectifs de la formation',\n        description: 'Objectifs pédagogiques et professionnels visés',\n        icon: 'target',\n        fields: [\n          { id: 'main_objectives', label: 'Objectifs principaux de la formation', type: 'textarea', required: true, placeholder: 'Décrire les objectifs généraux...' },\n          { id: 'professional_profile', label: 'Profil professionnel visé', type: 'textarea', required: false, placeholder: 'Métiers / fonctions visés...' },\n          { id: 'specific_objectives', label: 'Objectifs spécifiques', type: 'textarea', required: false },\n        ],\n      },\n\n      // ===== SECTION 7: RÉFÉRENTIEL DE COMPÉTENCES =====\n      {\n        id: 'referentiel_competences',\n        title: 'Référentiel de compétences',\n        description: 'Blocs de compétences et capacités à acquérir',\n        icon: 'book-open',\n        fields: [\n          // Bloc 1\n          { id: 'bloc1_title', label: 'Bloc 1 - Intitulé', type: 'text', required: true, placeholder: 'Ex: Préparation et organisation du chantier' },\n          { id: 'bloc1_c1', label: 'Bloc 1 - Compétence 1', type: 'competency', required: true, competencyLevels: ['Non évalué', 'Non acquis', 'En cours', 'Acquis', 'Maîtrisé'] },\n          { id: 'bloc1_c2', label: 'Bloc 1 - Compétence 2', type: 'competency', required: false, competencyLevels: ['Non évalué', 'Non acquis', 'En cours', 'Acquis', 'Maîtrisé'] },\n          { id: 'bloc1_c3', label: 'Bloc 1 - Compétence 3', type: 'competency', required: false, competencyLevels: ['Non évalué', 'Non acquis', 'En cours', 'Acquis', 'Maîtrisé'] },\n          { id: 'bloc1_c4', label: 'Bloc 1 - Compétence 4', type: 'competency', required: false, competencyLevels: ['Non évalué', 'Non acquis', 'En cours', 'Acquis', 'Maîtrisé'] },\n          // Bloc 2\n          { id: 'bloc2_title', label: 'Bloc 2 - Intitulé', type: 'text', required: false, placeholder: 'Ex: Réalisation des travaux' },\n          { id: 'bloc2_c1', label: 'Bloc 2 - Compétence 1', type: 'competency', required: false, competencyLevels: ['Non évalué', 'Non acquis', 'En cours', 'Acquis', 'Maîtrisé'] },\n          { id: 'bloc2_c2', label: 'Bloc 2 - Compétence 2', type: 'competency', required: false, competencyLevels: ['Non évalué', 'Non acquis', 'En cours', 'Acquis', 'Maîtrisé'] },\n          { id: 'bloc2_c3', label: 'Bloc 2 - Compétence 3', type: 'competency', required: false, competencyLevels: ['Non évalué', 'Non acquis', 'En cours', 'Acquis', 'Maîtrisé'] },\n          { id: 'bloc2_c4', label: 'Bloc 2 - Compétence 4', type: 'competency', required: false, competencyLevels: ['Non évalué', 'Non acquis', 'En cours', 'Acquis', 'Maîtrisé'] },\n          // Bloc 3\n          { id: 'bloc3_title', label: 'Bloc 3 - Intitulé', type: 'text', required: false, placeholder: 'Ex: Contrôle et suivi de la qualité' },\n          { id: 'bloc3_c1', label: 'Bloc 3 - Compétence 1', type: 'competency', required: false, competencyLevels: ['Non évalué', 'Non acquis', 'En cours', 'Acquis', 'Maîtrisé'] },\n          { id: 'bloc3_c2', label: 'Bloc 3 - Compétence 2', type: 'competency', required: false, competencyLevels: ['Non évalué', 'Non acquis', 'En cours', 'Acquis', 'Maîtrisé'] },\n          { id: 'bloc3_c3', label: 'Bloc 3 - Compétence 3', type: 'competency', required: false, competencyLevels: ['Non évalué', 'Non acquis', 'En cours', 'Acquis', 'Maîtrisé'] },\n          { id: 'bloc3_c4', label: 'Bloc 3 - Compétence 4', type: 'competency', required: false, competencyLevels: ['Non évalué', 'Non acquis', 'En cours', 'Acquis', 'Maîtrisé'] },\n        ],\n      },\n\n      // ===== SECTION 8: SUIVI DES PÉRIODES EN ENTREPRISE =====\n      {\n        id: 'suivi_periodes_entreprise',\n        title: 'Suivi des périodes en entreprise',\n        description: 'Bilans des périodes réalisées en entreprise',\n        icon: 'clipboard-list',\n        fields: [\n          // Période 1\n          { id: 'period1_dates', label: 'Période 1 - Dates', type: 'text', required: false, placeholder: 'Du ... au ...' },\n          { id: 'period1_tasks', label: 'Période 1 - Activités réalisées', type: 'textarea', required: false },\n          { id: 'period1_evaluation', label: 'Période 1 - Évaluation tuteur', type: 'rating', required: false, min: 1, max: 5 },\n          { id: 'period1_comments', label: 'Période 1 - Observations', type: 'textarea', required: false },\n          // Période 2\n          { id: 'period2_dates', label: 'Période 2 - Dates', type: 'text', required: false, placeholder: 'Du ... au ...' },\n          { id: 'period2_tasks', label: 'Période 2 - Activités réalisées', type: 'textarea', required: false },\n          { id: 'period2_evaluation', label: 'Période 2 - Évaluation tuteur', type: 'rating', required: false, min: 1, max: 5 },\n          { id: 'period2_comments', label: 'Période 2 - Observations', type: 'textarea', required: false },\n          // Période 3\n          { id: 'period3_dates', label: 'Période 3 - Dates', type: 'text', required: false, placeholder: 'Du ... au ...' },\n          { id: 'period3_tasks', label: 'Période 3 - Activités réalisées', type: 'textarea', required: false },\n          { id: 'period3_evaluation', label: 'Période 3 - Évaluation tuteur', type: 'rating', required: false, min: 1, max: 5 },\n          { id: 'period3_comments', label: 'Période 3 - Observations', type: 'textarea', required: false },\n        ],\n      },\n\n      // ===== SECTION 9: BILANS INTERMÉDIAIRES =====\n      {\n        id: 'bilans_intermediaires',\n        title: 'Bilans intermédiaires',\n        description: 'Points d\\'étape avec l\\'apprenant, le tuteur et le formateur',\n        icon: 'users',\n        fields: [\n          // Bilan 1\n          { id: 'bilan1_date', label: 'Bilan 1 - Date', type: 'date', required: false },\n          { id: 'bilan1_progress', label: 'Bilan 1 - Progression globale', type: 'rating', required: false, min: 1, max: 5 },\n          { id: 'bilan1_strong_points', label: 'Bilan 1 - Points forts', type: 'textarea', required: false },\n          { id: 'bilan1_improvements', label: 'Bilan 1 - Axes d\\'amélioration', type: 'textarea', required: false },\n          { id: 'bilan1_objectives', label: 'Bilan 1 - Objectifs pour la prochaine période', type: 'textarea', required: false },\n          // Bilan 2\n          { id: 'bilan2_date', label: 'Bilan 2 - Date', type: 'date', required: false },\n          { id: 'bilan2_progress', label: 'Bilan 2 - Progression globale', type: 'rating', required: false, min: 1, max: 5 },\n          { id: 'bilan2_strong_points', label: 'Bilan 2 - Points forts', type: 'textarea', required: false },\n          { id: 'bilan2_improvements', label: 'Bilan 2 - Axes d\\'amélioration', type: 'textarea', required: false },\n          { id: 'bilan2_objectives', label: 'Bilan 2 - Objectifs pour la prochaine période', type: 'textarea', required: false },\n          // Bilan 3\n          { id: 'bilan3_date', label: 'Bilan 3 - Date', type: 'date', required: false },\n          { id: 'bilan3_progress', label: 'Bilan 3 - Progression globale', type: 'rating', required: false, min: 1, max: 5 },\n          { id: 'bilan3_strong_points', label: 'Bilan 3 - Points forts', type: 'textarea', required: false },\n          { id: 'bilan3_improvements', label: 'Bilan 3 - Axes d\\'amélioration', type: 'textarea', required: false },\n          { id: 'bilan3_objectives', label: 'Bilan 3 - Objectifs finaux', type: 'textarea', required: false },\n        ],\n      },\n\n      // ===== SECTION 10: COMPÉTENCES TRANSVERSALES =====\n      {\n        id: 'competences_transversales',\n        title: 'Compétences transversales',\n        description: 'Savoir-être et compétences transférables',\n        icon: 'star',\n        fields: [\n          { id: 'punctuality', label: 'Ponctualité / Assiduité', type: 'competency', required: false, competencyLevels: ['Insuffisant', 'À améliorer', 'Satisfaisant', 'Très bien', 'Excellent'] },\n          { id: 'autonomy', label: 'Autonomie', type: 'competency', required: false, competencyLevels: ['Insuffisant', 'À améliorer', 'Satisfaisant', 'Très bien', 'Excellent'] },\n          { id: 'initiative', label: 'Prise d\\'initiative', type: 'competency', required: false, competencyLevels: ['Insuffisant', 'À améliorer', 'Satisfaisant', 'Très bien', 'Excellent'] },\n          { id: 'teamwork', label: 'Travail en équipe', type: 'competency', required: false, competencyLevels: ['Insuffisant', 'À améliorer', 'Satisfaisant', 'Très bien', 'Excellent'] },\n          { id: 'communication', label: 'Communication', type: 'competency', required: false, competencyLevels: ['Insuffisant', 'À améliorer', 'Satisfaisant', 'Très bien', 'Excellent'] },\n          { id: 'adaptability', label: 'Adaptabilité', type: 'competency', required: false, competencyLevels: ['Insuffisant', 'À améliorer', 'Satisfaisant', 'Très bien', 'Excellent'] },\n          { id: 'safety_rules', label: 'Respect des règles de sécurité', type: 'competency', required: false, competencyLevels: ['Insuffisant', 'À améliorer', 'Satisfaisant', 'Très bien', 'Excellent'] },\n          { id: 'professionalism', label: 'Professionnalisme', type: 'competency', required: false, competencyLevels: ['Insuffisant', 'À améliorer', 'Satisfaisant', 'Très bien', 'Excellent'] },\n        ],\n      },\n\n      // ===== SECTION 11: ÉVALUATIONS EN CENTRE DE FORMATION =====\n      {\n        id: 'evaluations_centre',\n        title: 'Évaluations en centre de formation',\n        description: 'Résultats des évaluations réalisées au CFA / OF',\n        icon: 'file-check',\n        fields: [\n          { id: 'eval_general_knowledge', label: 'Enseignement général', type: 'rating', required: false, min: 0, max: 20 },\n          { id: 'eval_professional', label: 'Enseignement professionnel', type: 'rating', required: false, min: 0, max: 20 },\n          { id: 'eval_practical', label: 'Travaux pratiques', type: 'rating', required: false, min: 0, max: 20 },\n          { id: 'eval_project', label: 'Projet / Chef-d\\'œuvre', type: 'rating', required: false, min: 0, max: 20 },\n          { id: 'eval_average', label: 'Moyenne générale', type: 'number', required: false, min: 0, max: 20 },\n          { id: 'eval_comments', label: 'Appréciations du conseil pédagogique', type: 'textarea', required: false },\n        ],\n      },\n\n      // ===== SECTION 12: BILAN FINAL =====\n      {\n        id: 'bilan_final',\n        title: 'Bilan final de la formation',\n        description: 'Synthèse et conclusion de la formation',\n        icon: 'award',\n        fields: [\n          { id: 'final_overall_assessment', label: 'Appréciation globale', type: 'textarea', required: true, placeholder: 'Synthèse de la formation...' },\n          { id: 'final_skills_acquired', label: 'Compétences acquises', type: 'textarea', required: false },\n          { id: 'final_skills_to_develop', label: 'Compétences à approfondir', type: 'textarea', required: false },\n          { id: 'final_overall_rating', label: 'Évaluation finale globale', type: 'rating', required: false, min: 1, max: 5 },\n          { id: 'final_recommendation', label: 'Recommandation de poursuite', type: 'textarea', required: false, placeholder: 'Recommandations pour la suite...' },\n          { id: 'training_result', label: 'Résultat de la formation', type: 'select', required: true, options: ['Formation validée', 'Formation partiellement validée', 'Formation non validée', 'Abandon'] },\n          { id: 'certification_obtained', label: 'Certification / Diplôme obtenu', type: 'checkbox', required: false },\n          { id: 'certification_date', label: 'Date d\\'obtention', type: 'date', required: false },\n        ],\n      },\n\n      // ===== SECTION 13: ATTESTATIONS ET DOCUMENTS =====\n      {\n        id: 'attestations_documents',\n        title: 'Attestations et documents',\n        description: 'Documents annexes (habilitations, attestations, etc.)',\n        icon: 'folder',\n        fields: [\n          { id: 'sst_certificate', label: 'Attestation SST (Sauveteur Secouriste du Travail)', type: 'checkbox', required: false },\n          { id: 'sst_date', label: 'Date d\\'obtention SST', type: 'date', required: false },\n          { id: 'habilitation_electrique', label: 'Habilitation électrique', type: 'text', required: false, placeholder: 'Ex: B1V, BR...' },\n          { id: 'habilitation_date', label: 'Date d\\'obtention habilitation', type: 'date', required: false },\n          { id: 'caces', label: 'CACES obtenu(s)', type: 'text', required: false, placeholder: 'Ex: R489 cat. 3' },\n          { id: 'caces_date', label: 'Date d\\'obtention CACES', type: 'date', required: false },\n          { id: 'other_certifications', label: 'Autres certifications / attestations', type: 'textarea', required: false },\n          { id: 'attached_documents', label: 'Documents joints', type: 'file', required: false },\n        ],\n      },\n\n      // ===== SECTION 14: SIGNATURES =====\n      {\n        id: 'signatures',\n        title: 'Signatures',\n        description: 'Validation par les différentes parties',\n        icon: 'pen-tool',\n        fields: [\n          { id: 'learner_signature_date', label: 'Date de signature apprenant', type: 'date', required: false },\n          { id: 'learner_signature_comment', label: 'Observations de l\\'apprenant', type: 'textarea', required: false },\n          { id: 'tutor_signature_date', label: 'Date de signature tuteur entreprise', type: 'date', required: false },\n          { id: 'tutor_signature_comment', label: 'Observations du tuteur', type: 'textarea', required: false },\n          { id: 'trainer_signature_date', label: 'Date de signature formateur', type: 'date', required: false },\n          { id: 'trainer_signature_comment', label: 'Observations du formateur', type: 'textarea', required: false },\n          { id: 'manager_signature_date', label: 'Date de signature responsable formation', type: 'date', required: false },\n          { id: 'manager_signature_comment', label: 'Observations du responsable', type: 'textarea', required: false },\n        ],\n      },\n    ]\n  }\n}\n\nexport const learningPortfolioService = new LearningPortfolioService()\n\n\n"],"names":[],"mappings":"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"}