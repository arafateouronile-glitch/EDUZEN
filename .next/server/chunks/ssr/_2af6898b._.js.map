{"version":3,"sources":["../../../../node_modules/lucide-react/src/icons/plus.ts","../../../../app/%28dashboard%29/dashboard/evaluations/report-cards/page.tsx"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Plus\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNSAxMmgxNCIgLz4KICA8cGF0aCBkPSJNMTIgNXYxNCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/plus\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Plus = createLucideIcon('Plus', [\n  ['path', { d: 'M5 12h14', key: '1ays0h' }],\n  ['path', { d: 'M12 5v14', key: 's699le' }],\n]);\n\nexport default Plus;\n","'use client'\n\nimport { useQuery } from '@tanstack/react-query'\nimport { useAuth } from '@/lib/hooks/use-auth'\nimport { createClient } from '@/lib/supabase/client'\nimport { useRouter } from 'next/navigation'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { FileText, Download, Plus, Search } from 'lucide-react'\nimport Link from 'next/link'\n\nexport default function ReportCardsPage() {\n  const { user } = useAuth()\n  const supabase = createClient()\n  const router = useRouter()\n\n  const handleCreateReportCard = () => {\n    // Rediriger vers la page de génération de documents avec le type report_card\n    router.push('/dashboard/documents/generate?type=report_card')\n  }\n\n  // Récupérer les bulletins de notes\n  const { data: reportCards, isLoading } = useQuery({\n    queryKey: ['report-cards', user?.organization_id],\n    queryFn: async () => {\n      if (!user?.organization_id) return []\n\n      // Récupérer les bulletins depuis la table documents\n      const { data, error } = await supabase\n        .from('documents')\n        .select('*, students(*)')\n        .eq('organization_id', user.organization_id)\n        .eq('type', 'report_card')\n        .order('created_at', { ascending: false })\n\n      if (error) {\n        console.error('Erreur lors de la récupération des bulletins:', error)\n        return []\n      }\n\n      return data || []\n    },\n    enabled: !!user?.organization_id,\n  })\n\n  return (\n    <div className=\"container mx-auto py-6 space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold text-text-primary\">Bulletins de notes</h1>\n          <p className=\"text-text-tertiary mt-1\">\n            Gérez et consultez les bulletins de notes des élèves\n          </p>\n        </div>\n        <Button onClick={handleCreateReportCard}>\n          <Plus className=\"h-4 w-4 mr-2\" />\n          Nouveau bulletin\n        </Button>\n      </div>\n\n      {isLoading ? (\n        <div className=\"text-center py-12\">\n          <p className=\"text-text-tertiary\">Chargement...</p>\n        </div>\n      ) : !reportCards || reportCards.length === 0 ? (\n        <Card>\n          <CardContent className=\"flex flex-col items-center justify-center py-12\">\n            <FileText className=\"h-12 w-12 text-gray-400 mb-4\" />\n            <h3 className=\"text-lg font-semibold text-text-primary mb-2\">\n              Aucun bulletin de notes\n            </h3>\n            <p className=\"text-text-tertiary text-center mb-4\">\n              Commencez par créer un nouveau bulletin de notes pour un élève.\n            </p>\n            <Button onClick={handleCreateReportCard}>\n              <Plus className=\"h-4 w-4 mr-2\" />\n              Créer un bulletin\n            </Button>\n          </CardContent>\n        </Card>\n      ) : (\n        <div className=\"grid gap-4\">\n          {reportCards.map((reportCard: any) => (\n            <Card key={reportCard.id}>\n              <CardHeader>\n                <div className=\"flex items-center justify-between\">\n                  <CardTitle className=\"text-lg\">\n                    {reportCard.students?.first_name} {reportCard.students?.last_name}\n                  </CardTitle>\n                  <div className=\"flex items-center gap-2\">\n                    <Button variant=\"outline\" size=\"sm\">\n                      <Download className=\"h-4 w-4 mr-2\" />\n                      Télécharger\n                    </Button>\n                  </div>\n                </div>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-2 text-sm text-text-tertiary\">\n                  <p>\n                    <span className=\"font-medium\">Élève:</span>{' '}\n                    {reportCard.students?.first_name} {reportCard.students?.last_name}\n                  </p>\n                  {reportCard.students?.student_number && (\n                    <p>\n                      <span className=\"font-medium\">Numéro d'élève:</span>{' '}\n                      {reportCard.students.student_number}\n                    </p>\n                  )}\n                  <p>\n                    <span className=\"font-medium\">Date de création:</span>{' '}\n                    {new Date(reportCard.created_at).toLocaleDateString('fr-FR')}\n                  </p>\n                  {reportCard.title && (\n                    <p>\n                      <span className=\"font-medium\">Titre:</span> {reportCard.title}\n                    </p>\n                  )}\n                </div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}