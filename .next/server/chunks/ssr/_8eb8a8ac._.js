module.exports=[400210,a=>{"use strict";let b=(0,a.i(170106).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],400210)},177156,a=>{"use strict";let b=(0,a.i(170106).default)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Eye",()=>b],177156)},122903,a=>{"use strict";var b=a.i(269240);let c=new class{supabase;constructor(a){this.supabase=a||(0,b.createClient)()}async getFAQCategories(a){let{data:b,error:c}=await this.supabase.from("faq_categories").select("*").eq("organization_id",a).eq("is_active",!0).order("order_index",{ascending:!0});if(c)throw c;return b}async createFAQCategory(a){let{data:b,error:c}=await this.supabase.from("faq_categories").insert(a).select().single();if(c)throw c;return b}async updateFAQCategory(a,b){let{data:c,error:d}=await this.supabase.from("faq_categories").update(b).eq("id",a).select().single();if(d)throw d;return c}async deleteFAQCategory(a){let{error:b}=await this.supabase.from("faq_categories").delete().eq("id",a);if(b)throw b}async getFAQItems(a,b){let c=this.supabase.from("faq_items").select("*, category:faq_categories(*)").eq("organization_id",a).eq("is_active",!0);b?.categoryId&&(c=c.eq("category_id",b.categoryId)),b?.search&&(c=c.or(`question.ilike.%${b.search}%,answer.ilike.%${b.search}%`)),b?.featured&&(c=c.eq("is_featured",!0));let{data:d,error:e}=await c.order("order_index",{ascending:!0}).order("view_count",{ascending:!1});if(e)throw e;return d}async getFAQItemById(a){let{data:b,error:c}=await this.supabase.from("faq_items").select("*, category:faq_categories(*)").eq("id",a).single();if(c)throw c;return b&&await this.supabase.rpc("increment_faq_view_count",{faq_uuid:b.id}),b}async createFAQItem(a){let{data:b,error:c}=await this.supabase.from("faq_items").insert(a).select().single();if(c)throw c;return b}async updateFAQItem(a,b){let{data:c,error:d}=await this.supabase.from("faq_items").update(b).eq("id",a).select().single();if(d)throw d;return c}async deleteFAQItem(a){let{error:b}=await this.supabase.from("faq_items").delete().eq("id",a);if(b)throw b}async createFAQFeedback(a,b,c,d){let{data:e,error:f}=await this.supabase.from("faq_feedback").insert({faq_id:a,user_id:b,is_helpful:c,comment:d}).select().single();if(f)throw f;return e}async getGuides(a,b){let c=this.supabase.from("guides").select("*, author:users(id, full_name, email)").eq("organization_id",a).eq("is_active",!0);b?.category&&(c=c.eq("category",b.category)),b?.difficulty&&(c=c.eq("difficulty",b.difficulty)),b?.search&&(c=c.or(`title.ilike.%${b.search}%,description.ilike.%${b.search}%,content.ilike.%${b.search}%`)),b?.featured&&(c=c.eq("is_featured",!0));let{data:d,error:e}=await c.order("published_at",{ascending:!1}).order("view_count",{ascending:!1});if(e)throw e;return d}async getGuideBySlug(a,b){let{data:c,error:d}=await this.supabase.from("guides").select("*, author:users(id, full_name, email), steps:guide_steps(*)").eq("slug",a).eq("organization_id",b).eq("is_active",!0).single();if(d)throw d;return c&&await this.supabase.rpc("increment_guide_view_count",{guide_uuid:c.id}),c}async createGuide(a){let{data:b,error:c}=await this.supabase.from("guides").insert(a).select().single();if(c)throw c;return b}async updateGuide(a,b){let{data:c,error:d}=await this.supabase.from("guides").update(b).eq("id",a).select().single();if(d)throw d;return c}async deleteGuide(a){let{error:b}=await this.supabase.from("guides").delete().eq("id",a);if(b)throw b}async getGuideSteps(a){let{data:b,error:c}=await this.supabase.from("guide_steps").select("*").eq("guide_id",a).order("step_number",{ascending:!0});if(c)throw c;return b}async createGuideStep(a){let{data:b,error:c}=await this.supabase.from("guide_steps").insert(a).select().single();if(c)throw c;return b}async updateGuideStep(a,b){let{data:c,error:d}=await this.supabase.from("guide_steps").update(b).eq("id",a).select().single();if(d)throw d;return c}async deleteGuideStep(a){let{error:b}=await this.supabase.from("guide_steps").delete().eq("id",a);if(b)throw b}async addGuideToFavorites(a,b){let{data:c,error:d}=await this.supabase.from("guide_favorites").insert({user_id:a,guide_id:b}).select().single();if(d)throw d;return c}async removeGuideFromFavorites(a,b){let{error:c}=await this.supabase.from("guide_favorites").delete().eq("user_id",a).eq("guide_id",b);if(c)throw c}async isGuideFavorite(a,b){let{data:c,error:d}=await this.supabase.from("guide_favorites").select("id").eq("user_id",a).eq("guide_id",b).maybeSingle();if(d)throw d;return!!c}async getUserFavoriteGuides(a){let{data:b,error:c}=await this.supabase.from("guide_favorites").select("*, guide:guides(*, author:users(id, full_name))").eq("user_id",a).order("created_at",{ascending:!1});if(c)throw c;return b}async getGuideProgress(a,b){let{data:c,error:d}=await this.supabase.from("guide_progress").select("*").eq("user_id",a).eq("guide_id",b).maybeSingle();if(d)throw d;return c}async updateGuideProgress(a,b,c,d){let e=await this.getGuideProgress(a,b),f=await this.getGuideSteps(b),g=d.length===f.length;if(e){let{data:a,error:b}=await this.supabase.from("guide_progress").update({current_step:c,completed_steps:d,is_completed:g,completed_at:g?new Date().toISOString():null}).eq("id",e.id).select().single();if(b)throw b;return a}{let{data:e,error:f}=await this.supabase.from("guide_progress").insert({user_id:a,guide_id:b,current_step:c,completed_steps:d,is_completed:g,completed_at:g?new Date().toISOString():null}).select().single();if(f)throw f;return e}}async markStepAsCompleted(a,b,c){let d=await this.getGuideProgress(a,b),e=d?.completed_steps||[];return e.includes(c)||e.push(c),this.updateGuideProgress(a,b,c,e)}};a.s(["knowledgeBaseService",0,c])},590545,a=>{"use strict";let b=(0,a.i(170106).default)("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);a.s(["ThumbsUp",()=>b],590545)},248518,a=>{"use strict";let b=(0,a.i(170106).default)("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22h0a3.13 3.13 0 0 1-3-3.88Z",key:"s6e0r"}]]);a.s(["ThumbsDown",()=>b],248518)},552254,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(433217),f=a.i(370025),g=a.i(937927),h=a.i(913216),i=a.i(122903),j=a.i(703130),k=a.i(340695),l=a.i(546893),m=a.i(917171),n=a.i(400210),o=a.i(590545),p=a.i(248518),q=a.i(539833),r=a.i(177156),s=a.i(238246),t=a.i(762180);function u(){let a=(0,d.useParams)();(0,d.useRouter)();let u=a.id,{user:v}=(0,h.useAuth)(),w=(0,g.useQueryClient)(),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)(!1),{data:B}=(0,e.useQuery)({queryKey:["faq-item",u],queryFn:()=>i.knowledgeBaseService.getFAQItemById(u),enabled:!!u}),C=(0,f.useMutation)({mutationFn:async a=>{if(!v?.id)throw Error("Non authentifié");return i.knowledgeBaseService.createFAQFeedback(u,v.id,a,x||void 0)},onSuccess:()=>{A(!0),y(""),w.invalidateQueries({queryKey:["faq-item"]})}}),D=a=>{z||C.mutate(a)};return B?(0,b.jsxs)("div",{className:"container mx-auto py-8 px-4 max-w-4xl",children:[(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsx)(s.default,{href:"/dashboard/knowledge-base",children:(0,b.jsxs)(k.Button,{variant:"ghost",size:"sm",className:"mb-4",children:[(0,b.jsx)(n.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Retour à la base de connaissances"]})})}),(0,b.jsxs)(j.Card,{className:"mb-6",children:[(0,b.jsx)(j.CardHeader,{children:(0,b.jsx)("div",{className:"flex items-start justify-between",children:(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(q.HelpCircle,{className:"h-5 w-5 text-primary"}),(0,b.jsx)(j.CardTitle,{className:"text-2xl",children:B.question})]}),B.category&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:B.category.name})]})})}),(0,b.jsxs)(j.CardContent,{children:[(0,b.jsx)("div",{className:"prose prose-sm max-w-none mb-6",children:(0,b.jsx)(t.default,{children:B.answer})}),(0,b.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(r.Eye,{className:"h-4 w-4"}),(0,b.jsxs)("span",{children:[B.view_count," vues"]})]}),B.helpful_count>0&&(0,b.jsxs)("span",{className:"text-green-600",children:[B.helpful_count," personne",B.helpful_count>1?"s":""," ont trouvé cela utile"]})]}),!z&&(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground mr-2",children:"Cette réponse vous a-t-elle été utile ?"}),(0,b.jsxs)(k.Button,{variant:"outline",size:"sm",onClick:()=>D(!0),disabled:C.isPending,children:[(0,b.jsx)(o.ThumbsUp,{className:"h-4 w-4 mr-2"}),"Oui"]}),(0,b.jsxs)(k.Button,{variant:"outline",size:"sm",onClick:()=>D(!1),disabled:C.isPending,children:[(0,b.jsx)(p.ThumbsDown,{className:"h-4 w-4 mr-2"}),"Non"]})]}),z&&(0,b.jsx)("div",{className:"text-sm text-green-600",children:"Merci pour votre retour !"})]}),!z&&(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsx)(m.Label,{children:"Commentaire (optionnel)"}),(0,b.jsx)(l.Textarea,{value:x,onChange:a=>y(a.target.value),placeholder:"Partagez vos commentaires...",rows:3,className:"mt-2"})]})]})]}),B.category&&(0,b.jsxs)(j.Card,{children:[(0,b.jsx)(j.CardHeader,{children:(0,b.jsx)(j.CardTitle,{children:"Questions similaires"})}),(0,b.jsxs)(j.CardContent,{children:[(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Découvrez d'autres questions dans la catégorie \"",B.category.name,'"']}),(0,b.jsx)(s.default,{href:`/dashboard/knowledge-base/faq/category/${B.category.slug}`,children:(0,b.jsx)(k.Button,{variant:"outline",className:"mt-4",children:"Voir toutes les questions de cette catégorie"})})]})]})]}):(0,b.jsx)("div",{className:"container mx-auto py-8 px-4 max-w-4xl",children:(0,b.jsx)("div",{className:"text-center py-12",children:"Chargement..."})})}a.s(["default",()=>u])}];

//# sourceMappingURL=_8eb8a8ac._.js.map