{"version":3,"sources":["../../../../node_modules/lucide-react/src/icons/plus.ts","../../../../node_modules/lucide-react/src/icons/check-circle.ts","../../../../components/auth/role-guard.tsx","../../../../node_modules/lucide-react/src/icons/shield-alert.ts","../../../../app/%28dashboard%29/dashboard/certifications/page.tsx","../../../../lib/services/rncp-certification.service.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Plus\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNSAxMmgxNCIgLz4KICA8cGF0aCBkPSJNMTIgNXYxNCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/plus\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Plus = createLucideIcon('Plus', [\n  ['path', { d: 'M5 12h14', key: '1ays0h' }],\n  ['path', { d: 'M12 5v14', key: 's699le' }],\n]);\n\nexport default Plus;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name CheckCircle\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjIgMTEuMDhWMTJhMTAgMTAgMCAxIDEtNS45My05LjE0IiAvPgogIDxwYXRoIGQ9Im05IDExIDMgM0wyMiA0IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/check-circle\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CheckCircle = createLucideIcon('CheckCircle', [\n  ['path', { d: 'M22 11.08V12a10 10 0 1 1-5.93-9.14', key: 'g774vq' }],\n  ['path', { d: 'm9 11 3 3L22 4', key: '1pflzl' }],\n]);\n\nexport default CheckCircle;\n","'use client'\n\nimport { useAuth } from '@/lib/hooks/use-auth'\nimport { useRouter } from 'next/navigation'\nimport { useEffect, useState } from 'react'\nimport { AlertCircle, ShieldAlert } from 'lucide-react'\nimport { Button } from '@/components/ui/button'\nimport { Card, CardContent } from '@/components/ui/card'\nimport Link from 'next/link'\n\ninterface RoleGuardProps {\n  children: React.ReactNode\n  allowedRoles: string[]\n  fallback?: React.ReactNode\n  redirectTo?: string\n}\n\n// Rôles avec accès administratif\nexport const ADMIN_ROLES = ['super_admin', 'admin', 'secretary', 'accountant']\n// Rôles avec accès aux finances (incluant secrétaire)\nexport const FINANCE_ROLES = ['super_admin', 'admin', 'secretary', 'accountant']\n// Rôles avec accès à la gestion des formations\nexport const FORMATION_MANAGEMENT_ROLES = ['super_admin', 'admin', 'secretary']\n\nexport function RoleGuard({ \n  children, \n  allowedRoles, \n  fallback,\n  redirectTo = '/dashboard'\n}: RoleGuardProps) {\n  const { user, isLoading } = useAuth()\n  const router = useRouter()\n  const [hasAccess, setHasAccess] = useState<boolean | null>(null)\n\n  useEffect(() => {\n    if (!isLoading && user) {\n      const userRole = user.role || ''\n      const access = allowedRoles.includes(userRole)\n      setHasAccess(access)\n      \n      // Si l'utilisateur n'a pas accès et qu'une redirection est définie\n      if (!access && redirectTo && !fallback) {\n        router.push(redirectTo)\n      }\n    }\n  }, [user, isLoading, allowedRoles, redirectTo, router, fallback])\n\n  // Pendant le chargement\n  if (isLoading || hasAccess === null) {\n    return (\n      <div className=\"flex items-center justify-center min-h-[200px]\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-blue\"></div>\n      </div>\n    )\n  }\n\n  // Si l'utilisateur n'a pas accès\n  if (!hasAccess) {\n    if (fallback) {\n      return <>{fallback}</>\n    }\n    \n    return (\n      <div className=\"container mx-auto py-16 px-4\">\n        <Card className=\"max-w-md mx-auto\">\n          <CardContent className=\"py-12 text-center\">\n            <div className=\"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6\">\n              <ShieldAlert className=\"h-8 w-8 text-red-600\" />\n            </div>\n            <h2 className=\"text-xl font-semibold text-gray-900 mb-2\">\n              Accès non autorisé\n            </h2>\n            <p className=\"text-gray-600 mb-6\">\n              Vous n'avez pas les permissions nécessaires pour accéder à cette page.\n            </p>\n            <Link href=\"/dashboard\">\n              <Button>\n                Retour au tableau de bord\n              </Button>\n            </Link>\n          </CardContent>\n        </Card>\n      </div>\n    )\n  }\n\n  // L'utilisateur a accès\n  return <>{children}</>\n}\n\n// Hook pour vérifier l'accès basé sur le rôle\nexport function useRoleAccess(allowedRoles: string[]): boolean {\n  const { user, isLoading } = useAuth()\n  \n  if (isLoading || !user) {\n    return false\n  }\n  \n  return allowedRoles.includes(user.role || '')\n}\n\n// Vérifier si l'utilisateur est un administrateur\nexport function useIsAdmin(): boolean {\n  return useRoleAccess(ADMIN_ROLES)\n}\n\n// Vérifier si l'utilisateur peut accéder aux finances\nexport function useCanAccessFinances(): boolean {\n  return useRoleAccess(FINANCE_ROLES)\n}\n\n// Vérifier si l'utilisateur est un enseignant\nexport function useIsTeacher(): boolean {\n  const { user } = useAuth()\n  return user?.role === 'teacher'\n}\n\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ShieldAlert\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgMjJzOC00IDgtMTBWNWwtOC0zLTggM3Y3YzAgNiA4IDEwIDggMTAiIC8+CiAgPHBhdGggZD0iTTEyIDh2NCIgLz4KICA8cGF0aCBkPSJNMTIgMTZoLjAxIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/shield-alert\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ShieldAlert = createLucideIcon('ShieldAlert', [\n  ['path', { d: 'M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10', key: '1irkt0' }],\n  ['path', { d: 'M12 8v4', key: '1got3b' }],\n  ['path', { d: 'M12 16h.01', key: '1drbdi' }],\n]);\n\nexport default ShieldAlert;\n","/**\n * Page d'administration - Gestion des certifications RNCP/RS\n */\n\n'use client'\n\nimport { useState } from 'react'\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query'\nimport { useAuth } from '@/lib/hooks/use-auth'\nimport { rncpCertificationService } from '@/lib/services/rncp-certification.service'\nimport { Button } from '@/components/ui/button'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { useToast } from '@/components/ui/toast'\nimport { Plus, Award, CheckCircle, Calendar, Users, FileText } from 'lucide-react'\nimport { RoleGuard, FORMATION_MANAGEMENT_ROLES } from '@/components/auth/role-guard'\nimport Link from 'next/link'\nimport type { TableRow } from '@/lib/types/supabase-helpers'\n\n// Type pour les certifications RNCP\ntype RNCPCertification = {\n  id: string\n  code?: string\n  title?: string\n  level?: string | number\n  [key: string]: any\n}\n\nexport default function CertificationsPage() {\n  return (\n    <RoleGuard allowedRoles={FORMATION_MANAGEMENT_ROLES}>\n      <CertificationsPageContent />\n    </RoleGuard>\n  )\n}\n\nfunction CertificationsPageContent() {\n  const { user } = useAuth()\n  const queryClient = useQueryClient()\n  const { addToast } = useToast()\n\n  const { data: certifications, isLoading } = useQuery<RNCPCertification[]>({\n    queryKey: ['rncp-certifications', user?.organization_id],\n    queryFn: async () => {\n      if (!user?.organization_id) return []\n      const result = await rncpCertificationService.getCertifications(user.organization_id)\n      return result as RNCPCertification[]\n    },\n    enabled: !!user?.organization_id,\n  })\n\n  const { data: juries } = useQuery({\n    queryKey: ['certification-juries', user?.organization_id],\n    queryFn: async () => {\n      if (!user?.organization_id) return []\n      return rncpCertificationService.getJuries(user.organization_id, { status: 'scheduled' })\n    },\n    enabled: !!user?.organization_id,\n  })\n\n  if (!user?.organization_id) {\n    return (\n      <div className=\"p-6\">\n        <p>Aucune organisation</p>\n      </div>\n    )\n  }\n\n  const activeCertifications = certifications?.filter((c) => c.is_active) || []\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      {/* Header */}\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h1 className=\"text-3xl font-bold\">Certifications RNCP/RS</h1>\n          <p className=\"text-gray-600 mt-1\">Gérez vos certifications et jurys</p>\n        </div>\n        <Button className=\"bg-brand-blue hover:bg-brand-blue-dark\">\n          <Plus className=\"w-4 h-4 mr-2\" />\n          Nouvelle certification\n        </Button>\n      </div>\n\n      {/* Statistiques */}\n      <div className=\"grid md:grid-cols-4 gap-4\">\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"text-2xl font-bold\">{certifications?.length || 0}</div>\n            <div className=\"text-sm text-gray-600\">Total certifications</div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"text-2xl font-bold text-green-600\">{activeCertifications.length}</div>\n            <div className=\"text-sm text-gray-600\">Actives</div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"text-2xl font-bold text-blue-600\">{juries?.length || 0}</div>\n            <div className=\"text-sm text-gray-600\">Jurys à venir</div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"flex items-center gap-2\">\n              <Award className=\"w-5 h-5 text-brand-blue\" />\n              <div>\n                <div className=\"text-2xl font-bold\">RNCP/RS</div>\n                <div className=\"text-sm text-gray-600\">Certifications</div>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Actions rapides */}\n      <div className=\"grid md:grid-cols-3 gap-4\">\n        <Link href=\"/dashboard/certifications/juries\">\n          <Card className=\"hover:shadow-lg transition-shadow cursor-pointer\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Users className=\"w-5 h-5 text-brand-blue\" />\n                Jurys\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <p className=\"text-sm text-gray-600\">Gérer les jurys de certification</p>\n            </CardContent>\n          </Card>\n        </Link>\n\n        <Link href=\"/dashboard/certifications/attestations\">\n          <Card className=\"hover:shadow-lg transition-shadow cursor-pointer\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <FileText className=\"w-5 h-5 text-brand-blue\" />\n                Attestations\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <p className=\"text-sm text-gray-600\">Consulter les attestations délivrées</p>\n            </CardContent>\n          </Card>\n        </Link>\n\n        <Card className=\"hover:shadow-lg transition-shadow\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Calendar className=\"w-5 h-5 text-brand-blue\" />\n              Calendrier\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <p className=\"text-sm text-gray-600\">Voir le calendrier des jurys</p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Liste des certifications */}\n      {isLoading ? (\n        <div className=\"text-center py-12\">Chargement...</div>\n      ) : certifications && certifications.length > 0 ? (\n        <div>\n          <h2 className=\"text-xl font-bold mb-4\">Certifications</h2>\n          <div className=\"grid md:grid-cols-2 gap-4\">\n            {certifications.map((certification) => (\n              <CertificationCard key={certification.id} certification={certification} />\n            ))}\n          </div>\n        </div>\n      ) : (\n        <Card>\n          <CardContent className=\"text-center py-12\">\n            <Award className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n            <p className=\"text-gray-600 mb-4\">Aucune certification enregistrée</p>\n            <Button className=\"bg-brand-blue hover:bg-brand-blue-dark\">\n              <Plus className=\"w-4 h-4 mr-2\" />\n              Créer la première certification\n            </Button>\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  )\n}\n\ninterface CertificationCardProps {\n  certification: RNCPCertification\n}\n\nfunction CertificationCard({ certification }: CertificationCardProps) {\n  const formatDate = (date: string | null) => {\n    if (!date) return 'Non définie'\n    return new Date(date).toLocaleDateString('fr-FR')\n  }\n\n  return (\n    <Card className=\"hover:shadow-lg transition-shadow\">\n      <CardHeader>\n        <div className=\"flex justify-between items-start\">\n          <div className=\"flex-1\">\n            <CardTitle>{certification.title}</CardTitle>\n            <div className=\"flex gap-2 mt-2\">\n              <span\n                className={`inline-block px-2 py-1 text-xs rounded-full ${\n                  certification.certification_type === 'RNCP'\n                    ? 'bg-blue-100 text-blue-800'\n                    : certification.certification_type === 'RS'\n                      ? 'bg-green-100 text-green-800'\n                      : 'bg-gray-100 text-gray-800'\n                }`}\n              >\n                {certification.certification_type}\n              </span>\n              {certification.rncp_code && (\n                <span className=\"inline-block px-2 py-1 text-xs bg-gray-100 text-gray-800 rounded-full\">\n                  {certification.rncp_code}\n                </span>\n              )}\n              {certification.level && (\n                <span className=\"inline-block px-2 py-1 text-xs bg-purple-100 text-purple-800 rounded-full\">\n                  Niveau {certification.level}\n                </span>\n              )}\n            </div>\n          </div>\n          {certification.is_active ? (\n            <CheckCircle className=\"w-5 h-5 text-green-600\" />\n          ) : (\n            <CheckCircle className=\"w-5 h-5 text-gray-400\" />\n          )}\n        </div>\n      </CardHeader>\n      <CardContent className=\"space-y-2\">\n        {certification.validity_start_date && (\n          <div className=\"text-sm text-gray-600\">\n            <strong>Validité :</strong> Du {formatDate(certification.validity_start_date)} au{' '}\n            {formatDate(certification.validity_end_date)}\n          </div>\n        )}\n\n        {certification.description && (\n          <p className=\"text-sm text-gray-600 line-clamp-2\">{certification.description}</p>\n        )}\n\n        <div className=\"flex gap-2 pt-2 border-t\">\n          <Button variant=\"outline\" size=\"sm\" className=\"flex-1\">\n            <FileText className=\"w-3 h-3 mr-1\" />\n            Détails\n          </Button>\n          <Button variant=\"outline\" size=\"sm\">\n            <Users className=\"w-3 h-3\" />\n          </Button>\n        </div>\n      </CardContent>\n    </Card>\n  )\n}\n\n","/**\n * Service de gestion des certifications RNCP/RS, jurys, PV et attestations\n */\n\nimport { createClient } from '@/lib/supabase/client'\nimport type { SupabaseClient } from '@supabase/supabase-js'\nimport { Database } from '@/types/database.types'\nimport type { TableRow, TableInsert, TableUpdate, FlexibleInsert, FlexibleUpdate } from '@/lib/types/supabase-helpers'\n\ntype RNCPCertification = TableRow<'rncp_certifications'>\ntype RNCPCertificationInsert = TableInsert<'rncp_certifications'>\ntype CertificationJury = TableRow<'certification_juries'>\ntype CertificationJuryInsert = TableInsert<'certification_juries'>\ntype JuryCandidate = TableRow<'jury_candidates'>\ntype JuryCandidateInsert = TableInsert<'jury_candidates'>\ntype JuryMinute = TableRow<'jury_minutes'>\ntype JuryMinuteInsert = TableInsert<'jury_minutes'>\ntype CertificationCertificate = TableRow<'certification_certificates'>\ntype CertificationCertificateInsert = TableInsert<'certification_certificates'>\n\nexport class RNCPCertificationService {\n  private supabase: SupabaseClient<Database>\n\n\n  constructor(supabaseClient?: SupabaseClient<Database>) {\n\n    this.supabase = supabaseClient || createClient()\n\n  }\n\n  // ==================== CERTIFICATIONS ====================\n\n  /**\n   * Récupère toutes les certifications d'une organisation\n   */\n  async getCertifications(organizationId: string, filters?: {\n    isActive?: boolean\n    type?: 'RNCP' | 'RS' | 'other'\n    search?: string\n  }): Promise<RNCPCertification[]> {\n    let query = this.supabase\n      .from('rncp_certifications')\n      .select('*')\n      .eq('organization_id', organizationId)\n\n    if (filters?.isActive !== undefined) {\n      query = query.eq('is_active', filters.isActive)\n    }\n\n    if (filters?.type) {\n      query = query.eq('certification_type', filters.type)\n    }\n\n    if (filters?.search) {\n      query = query.or(`title.ilike.%${filters.search}%,rncp_code.ilike.%${filters.search}%,rs_code.ilike.%${filters.search}%`)\n    }\n\n    const { data, error } = await query.order('title', { ascending: true })\n\n    if (error) throw error\n    return data || []\n  }\n\n  /**\n   * Récupère une certification par son ID\n   */\n  async getCertificationById(id: string): Promise<RNCPCertification> {\n    const { data, error } = await this.supabase\n      .from('rncp_certifications')\n      .select('*')\n      .eq('id', id)\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  /**\n   * Crée une certification\n   */\n  async createCertification(certification: FlexibleInsert<'rncp_certifications'>): Promise<RNCPCertification> {\n    const { data, error } = await this.supabase\n      .from('rncp_certifications')\n      .insert(certification as RNCPCertificationInsert)\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  /**\n   * Met à jour une certification\n   */\n  async updateCertification(id: string, updates: FlexibleUpdate<'rncp_certifications'>): Promise<RNCPCertification> {\n    const { data, error } = await this.supabase\n      .from('rncp_certifications')\n      .update(updates)\n      .eq('id', id)\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  // ==================== JURYS ====================\n\n  /**\n   * Récupère tous les jurys d'une organisation\n   */\n  async getJuries(organizationId: string, filters?: {\n    certificationId?: string\n    status?: string\n    startDate?: string\n    endDate?: string\n  }): Promise<CertificationJury[]> {\n    let query = this.supabase\n      .from('certification_juries')\n      .select('*, rncp_certifications(*), sites(*)')\n      .eq('organization_id', organizationId)\n\n    if (filters?.certificationId) {\n      query = query.eq('certification_id', filters.certificationId)\n    }\n\n    if (filters?.status) {\n      query = query.eq('status', filters.status)\n    }\n\n    if (filters?.startDate) {\n      query = query.gte('jury_date', filters.startDate)\n    }\n\n    if (filters?.endDate) {\n      query = query.lte('jury_date', filters.endDate)\n    }\n\n    const { data, error } = await query.order('jury_date', { ascending: false })\n\n    if (error) throw error\n    return data || []\n  }\n\n  /**\n   * Récupère un jury par son ID\n   */\n  async getJuryById(id: string): Promise<CertificationJury> {\n    const { data, error } = await this.supabase\n      .from('certification_juries')\n      .select('*, rncp_certifications(*), sites(*), jury_candidates(*, students(*))')\n      .eq('id', id)\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  /**\n   * Crée un jury\n   */\n  async createJury(jury: FlexibleInsert<'certification_juries'>): Promise<CertificationJury> {\n    const { data, error } = await this.supabase\n      .from('certification_juries')\n      .insert(jury as CertificationJuryInsert)\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  /**\n   * Met à jour un jury\n   */\n  async updateJury(id: string, updates: FlexibleUpdate<'certification_juries'>): Promise<CertificationJury> {\n    const { data, error } = await this.supabase\n      .from('certification_juries')\n      .update(updates)\n      .eq('id', id)\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  // ==================== CANDIDATS AU JURY ====================\n\n  /**\n   * Ajoute un candidat à un jury\n   */\n  async addCandidate(candidate: FlexibleInsert<'jury_candidates'>): Promise<JuryCandidate> {\n    const { data, error } = await this.supabase\n      .from('jury_candidates')\n      .insert(candidate as JuryCandidateInsert)\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  /**\n   * Met à jour le résultat d'un candidat\n   */\n  async updateCandidateResult(\n    id: string,\n    result: {\n      status: 'admitted' | 'rejected' | 'deferred'\n      finalScore?: number\n      decisionNotes?: string\n      evaluationDetails?: Record<string, unknown>\n    }\n  ): Promise<JuryCandidate> {\n    const updates: any = {\n      status: result.status,\n      decision_date: new Date().toISOString().split('T')[0],\n    }\n\n    if (result.finalScore !== undefined) {\n      updates.final_score = result.finalScore\n    }\n\n    if (result.decisionNotes) {\n      updates.decision_notes = result.decisionNotes\n    }\n\n    if (result.evaluationDetails) {\n      updates.evaluation_details = result.evaluationDetails\n    }\n\n    const { data, error } = await this.supabase\n      .from('jury_candidates')\n      .update(updates)\n      .eq('id', id)\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  /**\n   * Récupère les candidats d'un jury\n   */\n  async getJuryCandidates(juryId: string): Promise<JuryCandidate[]> {\n    const { data, error } = await this.supabase\n      .from('jury_candidates')\n      .select('*, students(*)')\n      .eq('jury_id', juryId)\n      .order('created_at', { ascending: true })\n\n    if (error) throw error\n    return data || []\n  }\n\n  // ==================== PROCÈS-VERBAUX ====================\n\n  /**\n   * Récupère les PV d'un jury\n   */\n  async getJuryMinutes(juryId: string): Promise<JuryMinute[]> {\n    const { data, error } = await this.supabase\n      .from('jury_minutes')\n      .select('*')\n      .eq('jury_id', juryId)\n      .order('created_at', { ascending: false })\n\n    if (error) throw error\n    return data || []\n  }\n\n  /**\n   * Crée un PV de jury\n   */\n  async createMinute(minute: FlexibleInsert<'jury_minutes'>): Promise<JuryMinute> {\n    const { data, error } = await this.supabase\n      .from('jury_minutes')\n      .insert(minute as JuryMinuteInsert)\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  /**\n   * Met à jour un PV\n   */\n  async updateMinute(id: string, updates: FlexibleUpdate<'jury_minutes'>): Promise<JuryMinute> {\n    const { data, error } = await this.supabase\n      .from('jury_minutes')\n      .update(updates)\n      .eq('id', id)\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  // ==================== ATTESTATIONS ====================\n\n  /**\n   * Génère un numéro d'attestation unique\n   */\n  private generateCertificateNumber(certification: RNCPCertification, studentId: string): string {\n    const prefix = certification.certification_type === 'RNCP' ? 'RNCP' : 'RS'\n    const code = certification.rncp_code || certification.rs_code || 'CERT'\n    const date = new Date().getFullYear()\n    const studentCode = studentId.slice(0, 8).toUpperCase()\n    return `${prefix}-${code}-${date}-${studentCode}-${Date.now().toString(36).toUpperCase()}`\n  }\n\n  /**\n   * Crée une attestation de certification\n   */\n  async createCertificate(certificate: FlexibleInsert<'certification_certificates'>): Promise<CertificationCertificate> {\n    // Générer le numéro d'attestation si non fourni\n    if (!certificate.certificate_number) {\n      const certification = await this.getCertificationById(certificate.certification_id!)\n      certificate.certificate_number = this.generateCertificateNumber(certification, certificate.student_id!)\n    }\n\n    const { data, error } = await this.supabase\n      .from('certification_certificates')\n      .insert(certificate as CertificationCertificateInsert)\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  /**\n   * Récupère les attestations d'une organisation\n   */\n  async getCertificates(organizationId: string, filters?: {\n    certificationId?: string\n    studentId?: string\n    status?: string\n  }): Promise<CertificationCertificate[]> {\n    let query = this.supabase\n      .from('certification_certificates')\n      .select('*, rncp_certifications(*), students(*), certification_juries(*)')\n      .eq('organization_id', organizationId)\n\n    if (filters?.certificationId) {\n      query = query.eq('certification_id', filters.certificationId)\n    }\n\n    if (filters?.studentId) {\n      query = query.eq('student_id', filters.studentId)\n    }\n\n    if (filters?.status) {\n      query = query.eq('status', filters.status)\n    }\n\n    const { data, error } = await query.order('issue_date', { ascending: false })\n\n    if (error) throw error\n    return data || []\n  }\n\n  /**\n   * Génère automatiquement des attestations pour les candidats admis d'un jury\n   */\n  async generateCertificatesForJury(juryId: string, issuedBy: string): Promise<CertificationCertificate[]> {\n    const jury = await this.getJuryById(juryId)\n    const candidates = await this.getJuryCandidates(juryId)\n\n    const admittedCandidates = candidates.filter((c) => c.status === 'admitted')\n    const certificates: CertificationCertificate[] = []\n\n    for (const candidate of admittedCandidates) {\n      const certification = await this.getCertificationById(jury.certification_id)\n\n      const certificate = await this.createCertificate({\n        organization_id: jury.organization_id,\n        certification_id: jury.certification_id,\n        jury_id: juryId,\n        student_id: candidate.student_id,\n        session_id: jury.session_id || null,\n        issue_date: new Date().toISOString().split('T')[0],\n        certification_level: certification.level || null,\n        rncp_code: certification.rncp_code || null,\n        status: 'issued',\n        issued_by: issuedBy,\n      })\n\n      certificates.push(certificate)\n    }\n\n    return certificates\n  }\n}\n\nexport const rncpCertificationService = new RNCPCertificationService()\n\n\n\n"],"names":[],"mappings":"wCAaM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAO,CAAP,WAAO,OAAA,EAAiB,MAAQ,CAAA,CAAA,AACpC,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA,CAAA,AAAE,EAAG,CAAY,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAK,QAAA,CAAU,CAAA,CAAA,AACzC,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA,CAAA,AAAE,EAAG,CAAY,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAK,AAAL,QAAK,CAAU,CAAA,CAC1C,CAAA,CAAA,oDCHK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAc,CAAd,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,IAAc,OAAA,EAAiB,aAAe,CAAA,CAAA,AAClD,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA,CAAA,AAAE,EAAG,CAAsC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAK,QAAA,CAAU,CAAA,CACnE,AADmE,CAClE,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA,CAAA,AAAE,EAAG,CAAkB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAK,AAAL,QAAK,CAAU,CAAA,CAChD,CAAA,CAAA,6ECdD,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,QCSM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAc,CAAd,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,IAAc,OAAA,EAAiB,aAAe,CAAA,CAAA,AAClD,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA,CAAA,AAAE,EAAG,CAA8C,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAK,QAAA,CAAU,CAAA,CAAA,AAC3E,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA,CAAA,AAAE,EAAG,CAAW,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAK,QAAA,CAAU,CAAA,CAAA,AACxC,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA,CAAE,AAAF,EAAK,CAAc,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAK,QAAA,CAAU,CAAA,CAC5C,CAAA,CAAA,ADXD,IAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAgBO,SAAS,EAAU,CACxB,UAAQ,cACR,CAAY,UACZ,CAAQ,YACR,EAAa,YAAY,CACV,EACf,GAAM,MAAE,CAAI,WAAE,CAAS,CAAE,CAAG,CAAA,EAAA,EAAA,OAAA,AAAO,IAC7B,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAyB,YAgB3D,CAdA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,GAAI,CAAC,GAAa,EAAM,CACtB,IAAM,EAAW,EAAK,IAAI,EAAI,GACxB,EAAS,EAAa,QAAQ,CAAC,GACrC,EAAa,GAGT,AAAC,IAAU,GAAe,GAC5B,EAAO,IAAI,CAD2B,AAC1B,CADe,CAG/B,CACF,EAAG,CAAC,EAAM,EAAW,EAAc,EAAY,EAAQ,EAAS,EAG5D,GAA2B,MAAM,CAApB,GAEb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0DACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qEAMhB,EA8BE,CAAA,EAAA,EAAA,GAAA,CA9BS,CA8BT,EAAA,QAAA,CAAA,UAAG,IA7BR,AAAI,EACK,CAAA,EAAA,EAAA,GADK,AACL,EAAA,EAAA,QAAA,CAAA,UAAG,IAIV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,4BACd,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,8BACrB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2FACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAY,UAAU,2BAEzB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,oDAA2C,uBAGzD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,8BAAqB,2EAGlC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,sBACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,UAAC,sCAYtB,sBAtE2B,CAAC,cAAe,QAAS,YAAa,aAAa,mBAEjD,CAAC,cAAe,QAAS,YAAa,aAAa,gCAEtC,CAAC,cAAe,QAAS,YAAY,uEEf/E,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QCJA,EAAA,EAAA,CAAA,CAAA,QA2YO,IAAM,EAA2B,IA3XjC,AA2XqC,MA3X/B,AACH,QAAkC,AAG1C,aAAY,CAAyC,CAAE,CAErD,IAAI,CAAC,QAAQ,CAAG,GAAkB,CAAA,EAAA,EAAA,YAAA,AAAY,GAEhD,CAOA,MAAM,kBAAkB,CAAsB,CAAE,CAI/C,CAAgC,CAC/B,IAAI,EAAQ,IAAI,CAAC,QAAQ,CACtB,IAAI,CAAC,uBACL,MAAM,CAAC,KACP,EAAE,CAAC,kBAAmB,EAErB,IAAS,gBAAa,IACxB,EAAQ,EAAM,EAAE,CADmB,AAClB,YAAa,EAAQ,SAAQ,EAG5C,GAAS,MAAM,CACjB,EAAQ,EAAM,EAAE,CAAC,qBAAsB,EAAQ,KAAI,EAGjD,GAAS,QAAQ,CACnB,EAAQ,EAAM,EAAE,CAAC,CAAC,aAAa,EAAE,EAAQ,MAAM,CAAC,mBAAmB,EAAE,EAAQ,MAAM,CAAC,iBAAiB,EAAE,EAAQ,MAAM,CAAC,CAAC,EAAC,EAG1H,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,EAAM,KAAK,CAAC,QAAS,CAAE,UAAW,EAAK,GAErE,GAAI,EAAO,MAAM,EACjB,OAAO,GAAQ,EAAE,AACnB,CAKA,MAAM,qBAAqB,CAAU,CAA8B,CACjE,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,IAAI,CAAC,QAAQ,CACxC,IAAI,CAAC,uBACL,MAAM,CAAC,KACP,EAAE,CAAC,KAAM,GACT,MAAM,GAET,GAAI,EAAO,MAAM,EACjB,OAAO,CACT,CAKA,MAAM,oBAAoB,CAAoD,CAA8B,CAC1G,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,IAAI,CAAC,QAAQ,CACxC,IAAI,CAAC,uBACL,MAAM,CAAC,GACP,MAAM,GACN,MAAM,GAET,GAAI,EAAO,MAAM,EACjB,OAAO,CACT,CAKA,MAAM,oBAAoB,CAAU,CAAE,CAA8C,CAA8B,CAChH,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,IAAI,CAAC,QAAQ,CACxC,IAAI,CAAC,uBACL,MAAM,CAAC,GACP,EAAE,CAAC,KAAM,GACT,MAAM,GACN,MAAM,GAET,GAAI,EAAO,MAAM,EACjB,OAAO,CACT,CAOA,MAAM,UAAU,CAAsB,CAAE,CAKvC,CAAgC,CAC/B,IAAI,EAAQ,IAAI,CAAC,QAAQ,CACtB,IAAI,CAAC,wBACL,MAAM,CAAC,uCACP,EAAE,CAAC,kBAAmB,GAErB,GAAS,iBAAiB,CAC5B,EAAQ,EAAM,EAAE,CAAC,mBAAoB,EAAQ,gBAAe,EAG1D,GAAS,QAAQ,AACnB,GAAQ,EAAM,EAAE,CAAC,SAAU,EAAQ,OAAM,EAGvC,GAAS,WAAW,CACtB,EAAQ,EAAM,GAAG,CAAC,YAAa,EAAQ,UAAS,EAG9C,GAAS,SAAS,CACpB,EAAQ,EAAM,GAAG,CAAC,YAAa,EAAQ,OAAO,GAGhD,GAAM,CAAE,MAAI,OAAE,CAAK,CAAE,CAAG,MAAM,EAAM,KAAK,CAAC,YAAa,CAAE,WAAW,CAAM,GAE1E,GAAI,EAAO,MAAM,EACjB,OAAO,GAAQ,EAAE,AACnB,CAKA,MAAM,YAAY,CAAU,CAA8B,CACxD,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,IAAI,CAAC,QAAQ,CACxC,IAAI,CAAC,wBACL,MAAM,CAAC,wEACP,EAAE,CAAC,KAAM,GACT,MAAM,GAET,GAAI,EAAO,MAAM,EACjB,OAAO,CACT,CAKA,MAAM,WAAW,CAA4C,CAA8B,CACzF,GAAM,MAAE,CAAI,CAAE,OAAK,CAAE,CAAG,MAAM,IAAI,CAAC,QAAQ,CACxC,IAAI,CAAC,wBACL,MAAM,CAAC,GACP,MAAM,GACN,MAAM,GAET,GAAI,EAAO,MAAM,EACjB,OAAO,CACT,CAKA,MAAM,WAAW,CAAU,CAAE,CAA+C,CAA8B,CACxG,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,IAAI,CAAC,QAAQ,CACxC,IAAI,CAAC,wBACL,MAAM,CAAC,GACP,EAAE,CAAC,KAAM,GACT,MAAM,GACN,MAAM,GAET,GAAI,EAAO,MAAM,EACjB,OAAO,CACT,CAOA,MAAM,aAAa,CAA4C,CAA0B,CACvF,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,IAAI,CAAC,QAAQ,CACxC,IAAI,CAAC,mBACL,MAAM,CAAC,GACP,MAAM,GACN,MAAM,GAET,GAAI,EAAO,MAAM,EACjB,OAAO,CACT,CAKA,MAAM,sBACJ,CAAU,CACV,CAKC,CACuB,CACxB,IAAM,EAAe,CACnB,OAAQ,EAAO,MAAM,CACrB,cAAe,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,AACvD,OAE0B,IAAtB,EAAO,KAA0B,KAAhB,GACnB,EAAQ,WAAW,CAAG,EAAO,UAAA,AAAU,EAGrC,EAAO,aAAa,EAAE,CACxB,EAAQ,cAAc,CAAG,EAAO,aAAA,AAAa,EAG3C,EAAO,iBAAiB,EAAE,CAC5B,EAAQ,kBAAkB,CAAG,EAAO,iBAAiB,AAAjB,EAGtC,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,IAAI,CAAC,QAAQ,CACxC,IAAI,CAAC,mBACL,MAAM,CAAC,GACP,EAAE,CAAC,KAAM,GACT,MAAM,GACN,MAAM,GAET,GAAI,EAAO,MAAM,EACjB,OAAO,CACT,CAKA,MAAM,kBAAkB,CAAc,CAA4B,CAChE,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,IAAI,CAAC,QAAQ,CACxC,IAAI,CAAC,mBACL,MAAM,CAAC,kBACP,EAAE,CAAC,UAAW,GACd,KAAK,CAAC,aAAc,CAAE,WAAW,CAAK,GAEzC,GAAI,EAAO,MAAM,EACjB,OAAO,GAAQ,EAAE,AACnB,CAOA,MAAM,eAAe,CAAc,CAAyB,CAC1D,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,IAAI,CAAC,QAAQ,CACxC,IAAI,CAAC,gBACL,MAAM,CAAC,KACP,EAAE,CAAC,UAAW,GACd,KAAK,CAAC,aAAc,CAAE,WAAW,CAAM,GAE1C,GAAI,EAAO,MAAM,EACjB,OAAO,GAAQ,EAAE,AACnB,CAKA,MAAM,aAAa,CAAsC,CAAuB,CAC9E,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,IAAI,CAAC,QAAQ,CACxC,IAAI,CAAC,gBACL,MAAM,CAAC,GACP,MAAM,GACN,MAAM,GAET,GAAI,EAAO,MAAM,EACjB,OAAO,CACT,CAKA,MAAM,aAAa,CAAU,CAAE,CAAuC,CAAuB,CAC3F,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,IAAI,CAAC,QAAQ,CACxC,IAAI,CAAC,gBACL,MAAM,CAAC,GACP,EAAE,CAAC,KAAM,GACT,MAAM,GACN,MAAM,GAET,GAAI,EAAO,MAAM,EACjB,OAAO,CACT,CAOQ,0BAA0B,CAAgC,CAAE,CAAiB,CAAU,CAC7F,IAAM,EAA8C,SAArC,EAAc,kBAAkB,CAAc,OAAS,KAChE,EAAO,EAAc,SAAS,EAAI,EAAc,OAAO,EAAI,OAC3D,EAAO,IAAI,OAAO,WAAW,GAC7B,EAAc,EAAU,KAAK,CAAC,EAAG,GAAG,WAAW,GACrD,MAAO,CAAA,EAAG,EAAO,CAAC,EAAE,EAAK,CAAC,EAAE,EAAK,CAAC,EAAE,EAAY,CAAC,EAAE,KAAK,GAAG,GAAG,QAAQ,CAAC,IAAI,WAAW,GAAA,CAAI,AAC5F,CAKA,MAAM,kBAAkB,CAAyD,CAAqC,CAEpH,GAAI,CAAC,EAAY,kBAAkB,CAAE,CACnC,IAAM,EAAgB,MAAM,IAAI,CAAC,oBAAoB,CAAC,EAAY,gBAAgB,EAClF,EAAY,kBAAkB,CAAG,IAAI,CAAC,yBAAyB,CAAC,EAAe,EAAY,UAAU,CACvG,CAEA,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,IAAI,CAAC,QAAQ,CACxC,IAAI,CAAC,8BACL,MAAM,CAAC,GACP,MAAM,GACN,MAAM,GAET,GAAI,EAAO,MAAM,EACjB,OAAO,CACT,CAKA,MAAM,gBAAgB,CAAsB,CAAE,CAI7C,CAAuC,CACtC,IAAI,EAAQ,IAAI,CAAC,QAAQ,CACtB,IAAI,CAAC,8BACL,MAAM,CAAC,mEACP,EAAE,CAAC,kBAAmB,GAErB,GAAS,iBAAiB,CAC5B,EAAQ,EAAM,EAAE,CAAC,mBAAoB,EAAQ,gBAAe,EAG1D,GAAS,WAAW,CACtB,EAAQ,EAAM,EAAE,CAAC,aAAc,EAAQ,UAAS,EAG9C,GAAS,QAAQ,CACnB,EAAQ,EAAM,EAAE,CAAC,SAAU,EAAQ,OAAM,EAG3C,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,EAAM,KAAK,CAAC,aAAc,CAAE,WAAW,CAAM,GAE3E,GAAI,EAAO,MAAM,EACjB,OAAO,GAAQ,EAAE,AACnB,CAKA,MAAM,4BAA4B,CAAc,CAAE,CAAgB,CAAuC,CACvG,IAAM,EAAO,MAAM,IAAI,CAAC,WAAW,CAAC,GAG9B,EAAqB,CAFR,MAAM,IAAI,CAAC,iBAAiB,CAAC,EAAA,EAEV,MAAM,CAAC,AAAC,GAAmB,aAAb,EAAE,MAAM,EACtD,EAA2C,EAAE,CAEnD,IAAK,IAAM,KAAa,EAAoB,CAC1C,IAAM,EAAgB,MAAM,IAAI,CAAC,oBAAoB,CAAC,EAAK,gBAAgB,EAErE,EAAc,MAAM,IAAI,CAAC,iBAAiB,CAAC,CAC/C,gBAAiB,EAAK,eAAe,CACrC,iBAAkB,EAAK,gBAAgB,CACvC,QAAS,EACT,WAAY,EAAU,UAAU,CAChC,WAAY,EAAK,UAAU,EAAI,KAC/B,WAAY,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,CAClD,oBAAqB,EAAc,KAAK,EAAI,KAC5C,UAAW,EAAc,SAAS,EAAI,KACtC,OAAQ,SACR,UAAW,CACb,GAEA,EAAa,IAAI,CAAC,EACpB,CAEA,OAAO,CACT,CACF,EDnYA,IAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAYe,SAAS,IACtB,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,aAAc,EAAA,0BAA0B,UACjD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAA,IAGP,CAEA,SAAS,IACP,GAAM,MAAE,CAAI,CAAE,CAAG,CAAA,EAAA,EAAA,OAAO,AAAP,IACG,CAAA,EAAA,EAAA,cAAA,AAAc,IAClC,GAAM,UAAE,CAAQ,CAAE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,IAEvB,CAAE,KAAM,CAAc,WAAE,CAAS,CAAE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAsB,CACxE,SAAU,CAAC,sBAAuB,GAAM,gBAAgB,CACxD,QAAS,SACP,AAAK,GAAM,CAAP,eACW,CADa,KACP,EAAyB,iBAAiB,CAAC,EAAK,eAAe,EADjD,EAAE,CAIvC,QAAS,CAAC,CAAC,GAAM,eACnB,GAEM,CAAE,KAAM,CAAM,CAAE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,CAChC,SAAU,CAAC,uBAAwB,GAAM,gBAAgB,CACzD,QAAS,SACF,AAAL,GAAW,CAAP,eACG,CADqB,CACI,SAAS,CAAC,EAAK,eAAe,CAAE,CAAE,OAAQ,WAAY,GADnD,EAAE,CAGvC,QAAS,CAAC,CAAC,GAAM,eACnB,GAEA,GAAI,CAAC,GAAM,gBACT,CAD0B,KAExB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,eACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,UAAE,0BAKT,IAAM,EAAuB,GAAgB,OAAO,AAAC,GAAM,EAAE,SAAS,GAAK,EAAE,CAE7E,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,8BAAqB,2BACnC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,8BAAqB,yCAEpC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,mDAChB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,iBAAiB,+BAMrC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,UACH,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,iBACrB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8BAAsB,GAAgB,QAAU,IAC/D,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCAAwB,8BAG3C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,UACH,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,iBACrB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6CAAqC,EAAqB,MAAM,GAC/E,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCAAwB,iBAG3C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,UACH,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,iBACrB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4CAAoC,GAAQ,QAAU,IACrE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCAAwB,uBAG3C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,UACH,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,gBACrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,4BACjB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8BAAqB,YACpC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCAAwB,gCAQjD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,4CACT,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,6DACd,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,UACT,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,oCACnB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,4BAA4B,aAIjD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACV,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCAAwB,4CAK3C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,kDACT,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,6DACd,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,UACT,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,oCACnB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,4BAA4B,oBAIpD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACV,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCAAwB,gDAK3C,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,8CACd,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,UACT,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,oCACnB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,4BAA4B,kBAIpD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACV,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCAAwB,yCAM1C,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6BAAoB,kBACjC,GAAkB,EAAe,MAAM,CAAG,EAC5C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,kCAAyB,mBACvC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qCACZ,EAAe,GAAG,CAAC,AAAC,GACnB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAyC,cAAe,GAAjC,EAAc,EAAE,QAK9C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,UACH,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,8BACrB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,yCACjB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,8BAAqB,qCAClC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,mDAChB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,iBAAiB,4CAQ/C,CAMA,SAAS,EAAkB,eAAE,CAAa,CAA0B,EAClE,IAAM,EAAc,AAAD,GACjB,AAAK,EACE,EADH,EAAO,AACA,KAAK,GAAM,kBAAkB,CAAC,SADvB,cAIpB,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,8CACd,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,UACT,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAE,EAAc,KAAK,GAC/B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4BACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CACC,UAAW,CAAC,4CAA4C,EACjB,SAArC,EAAc,kBAAkB,CAC5B,4BACqC,OAArC,EAAc,kBAAkB,CAC9B,8BACA,4BAAA,CACN,UAED,EAAc,kBAAkB,GAElC,EAAc,SAAS,EACtB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,iFACb,EAAc,SAAS,GAG3B,EAAc,KAAK,EAClB,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,sFAA4E,UAClF,EAAc,KAAK,UAKlC,EAAc,SAAS,CACtB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,2BAEvB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,+BAI7B,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,sBACpB,EAAc,mBAAmB,EAChC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kCACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,UAAO,eAAmB,OAAK,EAAW,EAAc,mBAAmB,EAAE,MAAI,IACjF,EAAW,EAAc,iBAAiB,KAI9C,EAAc,WAAW,EACxB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,8CAAsC,EAAc,WAAW,GAG9E,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qCACb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,UAAU,KAAK,KAAK,UAAU,mBAC5C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,iBAAiB,aAGvC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,UAAU,KAAK,cAC7B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,sBAM7B","ignoreList":[0,1,3]}