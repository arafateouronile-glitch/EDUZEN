module.exports=[544902,a=>{"use strict";var b=a.i(187924),c=a.i(50944),d=a.i(433217),e=a.i(555074),f=a.i(269240),g=a.i(340695),h=a.i(703130),i=a.i(400210),j=a.i(941675),k=a.i(641710),l=a.i(124987),m=a.i(660246),n=a.i(953722),o=a.i(238246),p=a.i(497895);function q(){let q=(0,c.useParams)();(0,c.useRouter)();let r=q.id,s=q.sessionId,t=(0,f.createClient)(),{data:u,isLoading:v}=(0,d.useQuery)({queryKey:["session",s],queryFn:()=>e.sessionService.getSessionById(s),enabled:!!s}),{data:w,isLoading:x}=(0,d.useQuery)({queryKey:["session-enrollments",s],queryFn:async()=>{let{data:a,error:b}=await t.from("enrollments").select("*, students(*)").eq("session_id",s).order("enrollment_date",{ascending:!1});if(b)throw b;return a||[]},enabled:!!s}),{data:y}=(0,d.useQuery)({queryKey:["teacher",u?.teacher_id],queryFn:async()=>{if(!u?.teacher_id)return null;let{createClient:b}=await a.A(496384),c=b(),{data:d,error:e}=await c.from("users").select("id, full_name, email").eq("id",u.teacher_id).single();return e?(console.error("Erreur lors de la récupération de l'enseignant:",e),null):d},enabled:!!u?.teacher_id});if(v)return(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,b.jsx)("div",{className:"text-center",children:(0,b.jsx)("div",{className:"text-muted-foreground",children:"Chargement..."})})});if(!u)return(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-muted-foreground",children:"Session non trouvée"}),(0,b.jsx)(o.default,{href:`/dashboard/programs/${r}/sessions`,children:(0,b.jsx)(g.Button,{className:"mt-4",children:"Retour aux sessions"})})]})});let z=u?.formations,A=z?.programs;return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,b.jsx)(o.default,{href:`/dashboard/programs/${r}/sessions`,children:(0,b.jsx)(g.Button,{variant:"ghost",size:"icon",children:(0,b.jsx)(i.ArrowLeft,{className:"h-4 w-4"})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:u.name}),(0,b.jsxs)("p",{className:"mt-2 text-sm text-gray-600",children:["Session de la formation ",(0,b.jsx)(o.default,{href:`/dashboard/programs/${r}`,className:"text-primary hover:underline",children:A?.name})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${(a=>{switch(a){case"planned":return"bg-blue-100 text-blue-800";case"ongoing":return"bg-success-bg text-success-primary";case"completed":default:return"bg-gray-100 text-gray-800";case"cancelled":return"bg-red-100 text-red-800"}})(u.status)}`,children:(a=>{switch(a){case"planned":return"Planifiée";case"ongoing":return"En cours";case"completed":return"Terminée";case"cancelled":return"Annulée";default:return a}})(u.status)}),(0,b.jsx)(o.default,{href:`/dashboard/programs/${r}/sessions/${s}/attendance`,children:(0,b.jsxs)(g.Button,{variant:"outline",children:[(0,b.jsx)(m.Users,{className:"mr-2 h-4 w-4"}),"Gérer l'assiduité"]})})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)(h.Card,{children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsxs)(h.CardTitle,{className:"flex items-center",children:[(0,b.jsx)(j.Calendar,{className:"mr-2 h-5 w-5"}),"Dates et horaires"]})}),(0,b.jsxs)(h.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Date de début"}),(0,b.jsx)("p",{className:"text-lg",children:(0,p.formatDate)(u.start_date)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Date de fin"}),(0,b.jsx)("p",{className:"text-lg",children:(0,p.formatDate)(u.end_date)})]}),u.start_time&&u.end_time&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Heure de début"}),(0,b.jsxs)("p",{className:"text-lg flex items-center",children:[(0,b.jsx)(k.Clock,{className:"mr-2 h-4 w-4"}),u.start_time]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Heure de fin"}),(0,b.jsxs)("p",{className:"text-lg flex items-center",children:[(0,b.jsx)(k.Clock,{className:"mr-2 h-4 w-4"}),u.end_time]})]})]}),u.location&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Lieu"}),(0,b.jsxs)("p",{className:"text-lg flex items-center",children:[(0,b.jsx)(l.MapPin,{className:"mr-2 h-4 w-4"}),u.location]})]})]})]}),(0,b.jsxs)(h.Card,{children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsxs)(h.CardTitle,{className:"flex items-center",children:[(0,b.jsx)(m.Users,{className:"mr-2 h-5 w-5"}),"Participants"]})}),(0,b.jsxs)(h.CardContent,{className:"space-y-4",children:[u.capacity_max&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Capacité maximale"}),(0,b.jsxs)("p",{className:"text-lg",children:[u.capacity_max," apprenants"]})]}),w&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Élèves inscrits"}),(0,b.jsxs)("p",{className:"text-lg font-semibold text-primary",children:[w.length," ",1===w.length?"élève":"élèves"]}),u.capacity_max&&(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[Math.round(w.length/u.capacity_max*100),"% de la capacité"]})]}),y?(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Enseignant"}),(0,b.jsx)("p",{className:"text-lg",children:y.full_name}),y.email&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:y.email})]}):u.teacher_id?(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Enseignant"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Non assigné ou non trouvé"})]}):(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Enseignant"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Aucun enseignant assigné"})]})]})]})]}),A&&(0,b.jsxs)(h.Card,{children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsxs)(h.CardTitle,{className:"flex items-center",children:[(0,b.jsx)(n.BookOpen,{className:"mr-2 h-5 w-5"}),"Formation associée"]})}),(0,b.jsx)(h.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Nom de la formation"}),(0,b.jsx)("p",{className:"text-lg",children:(0,b.jsx)(o.default,{href:`/dashboard/programs/${r}`,className:"text-primary hover:underline",children:A.name})})]}),A.code&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Code"}),(0,b.jsx)("p",{className:"text-lg",children:A.code})]}),A.description&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:A.description})]})]})})]}),(0,b.jsxs)(h.Card,{children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)(h.CardTitle,{className:"flex items-center",children:[(0,b.jsx)(m.Users,{className:"mr-2 h-5 w-5"}),"Élèves inscrits (",w?.length||0,")"]}),(0,b.jsx)(o.default,{href:`/dashboard/programs/${r}/sessions/${s}/attendance`,children:(0,b.jsxs)(g.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(m.Users,{className:"mr-2 h-4 w-4"}),"Gérer l'assiduité"]})})]})}),(0,b.jsx)(h.CardContent,{children:x?(0,b.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"Chargement des inscriptions..."}):w&&w.length>0?(0,b.jsx)("div",{className:"space-y-3",children:w.map(a=>{let c=a.students;return c?(0,b.jsx)("div",{className:"p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("h3",{className:"font-semibold text-lg",children:[c.first_name," ",c.last_name]}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[c.student_number,c.email&&` • ${c.email}`]}),(0,b.jsxs)("div",{className:"mt-2 flex items-center space-x-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Date d'inscription:"})," ",(0,b.jsx)("span",{className:"font-medium",children:(0,p.formatDate)(a.enrollment_date)})]}),A&&a.total_amount>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Montant:"})," ",(0,b.jsx)("span",{className:"font-medium",children:(0,p.formatCurrency)(a.total_amount,A.currency||"XOF")}),a.paid_amount>0&&(0,b.jsxs)("span",{className:"text-success-primary ml-1",children:["(Payé: ",(0,p.formatCurrency)(a.paid_amount,A.currency||"XOF"),")"]})]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col items-end space-y-2",children:[(0,b.jsx)("span",{className:`px-2 py-1 rounded text-xs font-medium ${(a=>{switch(a){case"pending":return"bg-warning-bg text-warning-primary";case"confirmed":return"bg-blue-100 text-blue-800";case"completed":return"bg-success-bg text-success-primary";case"cancelled":default:return"bg-gray-100 text-gray-800";case"failed":return"bg-red-100 text-red-800"}})(a.status)}`,children:"pending"===a.status?"En attente":"confirmed"===a.status?"Confirmée":"completed"===a.status?"Terminée":"cancelled"===a.status?"Annulée":"failed"===a.status?"Échouée":a.status}),(0,b.jsx)("span",{className:`px-2 py-1 rounded text-xs font-medium ${(a=>{switch(a){case"pending":return"bg-warning-bg text-warning-primary";case"partial":return"bg-blue-100 text-blue-800";case"paid":return"bg-success-bg text-success-primary";case"overdue":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})(a.payment_status)}`,children:"pending"===a.payment_status?"En attente":"partial"===a.payment_status?"Partiel":"paid"===a.payment_status?"Payé":"overdue"===a.payment_status?"En retard":a.payment_status})]})]})},a.id):null})}):(0,b.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:["Aucun élève inscrit à cette session pour le moment.",(0,b.jsx)("div",{className:"mt-4",children:(0,b.jsx)(o.default,{href:`/dashboard/programs/${r}/sessions`,children:(0,b.jsx)(g.Button,{variant:"outline",size:"sm",children:"Inscrire un élève"})})})]})})]}),(0,b.jsxs)(h.Card,{children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsx)(h.CardTitle,{children:"Informations supplémentaires"})}),(0,b.jsx)(h.CardContent,{children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-gray-700 mb-1",children:"ID de la session"}),(0,b.jsx)("p",{className:"text-muted-foreground font-mono text-xs",children:u.id})]}),u.created_at&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-gray-700 mb-1",children:"Date de création"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:(0,p.formatDate)(u.created_at)})]}),u.updated_at&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-gray-700 mb-1",children:"Dernière modification"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:(0,p.formatDate)(u.updated_at)})]})]})})]})]})}a.s(["default",()=>q])}];

//# sourceMappingURL=app_%28dashboard%29_dashboard_programs_%5Bid%5D_sessions_%5BsessionId%5D_page_tsx_9d44aa09._.js.map