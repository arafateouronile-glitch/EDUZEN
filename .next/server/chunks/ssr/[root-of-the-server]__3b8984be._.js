module.exports=[224361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},814747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},992258,a=>{"use strict";let b=(0,a.i(170106).default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);a.s(["Mail",()=>b],992258)},193767,a=>{"use strict";let b=new class{async blobToBase64(a){return new Promise((b,c)=>{let d=new FileReader;d.onloadend=()=>{b(d.result.split(",")[1])},d.onerror=c,d.readAsDataURL(a)})}async sendEmail(a){try{let b=a.attachments?await Promise.all(a.attachments.map(async a=>{let b;if(a.content instanceof Blob)b=await this.blobToBase64(a.content);else if(a.content instanceof ArrayBuffer){let c=new Blob([a.content],{type:a.contentType});b=await this.blobToBase64(c)}else b=a.content;return{filename:a.filename,content:b,contentType:a.contentType}})):void 0,c=await fetch("/api/email/send",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({to:a.to,subject:a.subject,html:a.html,text:a.text,attachments:b,cc:a.cc,bcc:a.bcc,replyTo:a.replyTo})});if(!c.ok){let a=await c.json();throw Error(a.message||"Erreur lors de l'envoi de l'email")}let d=await c.json();return{success:!0,message:d.message||"Email envoyé avec succès"}}catch(a){throw Error(a instanceof Error?a.message:"Erreur lors de l'envoi de l'email")}}async sendDocument(a,b,c,d,e,f){return this.sendEmail({to:a,subject:b,html:e,text:f,attachments:[{filename:d,content:c,contentType:"application/pdf"}]})}async sendMultipleDocuments(a,b,c,d,e){return this.sendEmail({to:a,subject:b,html:d,text:e,attachments:c.map(a=>({filename:a.filename,content:a.blob,contentType:"application/pdf"}))})}};a.s(["emailService",0,b])},735055,a=>{"use strict";var b=a.i(187924),c=a.i(703130),d=a.i(340695),e=a.i(284505),f=a.i(104720),g=a.i(992258),h=a.i(242255);function i({sessionData:a,formation:i,program:j,organization:k,enrollments:l=[]}){let{handleGenerateSessionReport:m,handleGenerateCertificate:n}=(0,h.useDocumentGeneration)({sessionData:a,formation:i,program:j,organization:k}),o=new Set;return l.forEach(a=>{let b=a.students;b&&b.company&&o.add(b.company)}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(c.Card,{children:[(0,b.jsx)(c.CardHeader,{children:(0,b.jsx)(c.CardTitle,{children:"Entreprises participantes"})}),(0,b.jsx)(c.CardContent,{children:0===o.size?(0,b.jsx)("p",{className:"text-sm text-muted-foreground text-center py-8",children:"Aucune entreprise identifiée pour le moment"}):(0,b.jsx)("div",{className:"space-y-3",children:Array.from(o).map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[l.filter(b=>b.students?.company===a).length," apprenant",l.filter(b=>b.students?.company===a).length>1?"s":""]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsxs)(d.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(f.FileText,{className:"mr-2 h-4 w-4"}),"Documents"]}),(0,b.jsxs)(d.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(g.Mail,{className:"mr-2 h-4 w-4"}),"Contacter"]})]})]},c))})})]}),(0,b.jsxs)(c.Card,{children:[(0,b.jsx)(c.CardHeader,{children:(0,b.jsx)(c.CardTitle,{children:"Documents et rapports"})}),(0,b.jsxs)(c.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)(f.FileText,{className:"h-5 w-5 text-gray-400"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:"Rapport de session"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Rapport détaillé de la session de formation"})]})]}),(0,b.jsx)(d.Button,{variant:"ghost",size:"sm",onClick:()=>{alert("Fonctionnalité à venir : Génération du rapport de session")},children:(0,b.jsx)(e.Download,{className:"h-4 w-4"})})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)(f.FileText,{className:"h-5 w-5 text-gray-400"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:"Attestations de formation"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Générer les attestations pour tous les apprenants"})]})]}),(0,b.jsx)(d.Button,{variant:"ghost",size:"sm",onClick:()=>{alert("Fonctionnalité à venir : Génération des attestations")},children:(0,b.jsx)(e.Download,{className:"h-4 w-4"})})]})]})]}),(0,b.jsxs)(c.Card,{children:[(0,b.jsx)(c.CardHeader,{children:(0,b.jsx)(c.CardTitle,{children:"Contact et support"})}),(0,b.jsx)(c.CardContent,{className:"space-y-4",children:k&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:"Organisation"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:k.name})]}),k.email&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:"Email"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:k.email})]}),k.phone&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:"Téléphone"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:k.phone})]}),k.address&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:"Adresse"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:k.address})]})]})})]})]})}a.s(["GestionEspaceEntreprise",()=>i])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__3b8984be._.js.map