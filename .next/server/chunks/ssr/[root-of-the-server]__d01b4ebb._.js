module.exports=[224361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},814747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},915618,a=>{"use strict";let b=(0,a.i(170106).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],915618)},992258,a=>{"use strict";let b=(0,a.i(170106).default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);a.s(["Mail",()=>b],992258)},724669,a=>{"use strict";let b=(0,a.i(170106).default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);a.s(["TrendingUp",()=>b],724669)},621958,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(497895);let e=c.createContext(void 0);function f({value:a,defaultValue:f,onValueChange:g,children:h,className:i}){let j=void 0!==a,[k,l]=c.useState(f??"");c.useEffect(()=>{j||void 0===f||l(f)},[f]);let m=j?a:k,n=c.useCallback(a=>{j||l(a),g?.(a)},[j,g]);return(0,b.jsx)(e.Provider,{value:{value:m,onValueChange:n},children:(0,b.jsx)("div",{className:(0,d.cn)("w-full",i),children:h})})}function g(){let a=c.useContext(e);if(!a)throw Error("Tabs components must be used within a Tabs component");return a}function h({children:a,className:c}){return(0,b.jsx)("div",{className:(0,d.cn)("inline-flex h-10 items-center justify-center rounded-lg bg-bg-gray-100 p-1 text-text-tertiary",c),children:a})}function i({value:a,children:c,className:e}){let{value:f,onValueChange:h}=g(),i=f===a;return(0,b.jsx)("button",{type:"button",onClick:()=>h(a),className:(0,d.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-outline-none focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",i?"bg-white text-text-primary shadow-sm":"text-text-tertiary hover:text-text-primary",e),children:c})}function j({value:a,children:c,className:e}){let{value:f}=g();return f!==a?null:(0,b.jsx)("div",{className:(0,d.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),children:c})}a.s(["Tabs",()=>f,"TabsContent",()=>j,"TabsList",()=>h,"TabsTrigger",()=>i])},452218,571907,a=>{"use strict";var b,c,d=a.i(325383),e=((b={}).AUTH_REQUIRED="AUTH_1001",b.AUTH_INVALID_CREDENTIALS="AUTH_1002",b.AUTH_SESSION_EXPIRED="AUTH_1003",b.AUTH_INSUFFICIENT_PERMISSIONS="AUTH_1004",b.AUTH_2FA_REQUIRED="AUTH_1005",b.AUTH_2FA_INVALID="AUTH_1006",b.VALIDATION_ERROR="VALID_2001",b.VALIDATION_REQUIRED_FIELD="VALID_2002",b.VALIDATION_INVALID_FORMAT="VALID_2003",b.VALIDATION_UNIQUE_CONSTRAINT="VALID_2004",b.DB_CONNECTION_ERROR="DB_3001",b.DB_QUERY_ERROR="DB_3002",b.DB_NOT_FOUND="DB_3003",b.DB_CONSTRAINT_VIOLATION="DB_3004",b.DB_FOREIGN_KEY_CONSTRAINT="DB_3006",b.DB_RLS_POLICY_VIOLATION="DB_3005",b.NETWORK_ERROR="NET_4001",b.API_TIMEOUT="NET_4002",b.API_RATE_LIMIT="NET_4003",b.API_SERVER_ERROR="NET_4004",b.API_NOT_FOUND="NET_4005",b.API_BAD_REQUEST="NET_4006",b.BUSINESS_LOGIC_ERROR="BIZ_5001",b.RESOURCE_LOCKED="BIZ_5002",b.OPERATION_NOT_ALLOWED="BIZ_5003",b.QUOTA_EXCEEDED="BIZ_5004",b.INTERNAL_ERROR="SYS_6001",b.CONFIGURATION_ERROR="SYS_6002",b.SERVICE_UNAVAILABLE="SYS_6003",b);(c={}).LOW="low",c.MEDIUM="medium",c.HIGH="high",c.CRITICAL="critical";class f extends Error{code;severity;userMessage;retryable;context;originalError;constructor(a,b="SYS_6001",c="medium",d={},e){super(a),this.name="AppError",this.code=b,this.severity=c,this.userMessage=d.userMessage||this.getDefaultUserMessage(b),this.retryable=d.retryable??this.isRetryable(b),this.context={...d,code:b,severity:c,timestamp:new Date().toISOString()},this.originalError=e,Error.captureStackTrace&&Error.captureStackTrace(this,f)}getDefaultUserMessage(a){return({AUTH_1001:"Vous devez être connecté pour effectuer cette action.",AUTH_1002:"Email ou mot de passe incorrect.",AUTH_1003:"Votre session a expiré. Veuillez vous reconnecter.",AUTH_1004:"Vous n'avez pas les permissions nécessaires.",AUTH_1005:"Authentification à deux facteurs requise.",AUTH_1006:"Code d'authentification invalide.",VALID_2001:"Les données fournies ne sont pas valides.",VALID_2002:"Certains champs obligatoires sont manquants.",VALID_2003:"Le format des données est incorrect.",VALID_2004:"Cette valeur existe déjà.",DB_3001:"Impossible de se connecter à la base de données.",DB_3002:"Erreur lors de l'exécution de la requête.",DB_3003:"Ressource introuvable.",DB_3004:"Cette opération viole une contrainte de la base de données.",DB_3006:"Cette opération viole une contrainte de clé étrangère.",DB_3005:"Vous n'avez pas accès à cette ressource.",NET_4001:"Erreur de connexion réseau. Vérifiez votre connexion internet.",NET_4002:"La requête a pris trop de temps. Veuillez réessayer.",NET_4003:"Trop de requêtes. Veuillez patienter quelques instants.",NET_4004:"Erreur serveur. Veuillez réessayer plus tard.",NET_4005:"Ressource introuvable.",NET_4006:"Requête invalide.",BIZ_5001:"Cette opération n'est pas autorisée dans le contexte actuel.",BIZ_5002:"Cette ressource est actuellement verrouillée.",BIZ_5003:"Cette opération n'est pas autorisée.",BIZ_5004:"Vous avez atteint la limite autorisée.",SYS_6001:"Une erreur interne est survenue. Veuillez réessayer.",SYS_6002:"Erreur de configuration du système.",SYS_6003:"Service temporairement indisponible."})[a]||"Une erreur inattendue est survenue."}isRetryable(a){return["NET_4001","NET_4002","NET_4004","DB_3001","SYS_6003"].includes(a)}toJSON(){return{name:this.name,message:this.message,code:this.code,severity:this.severity,userMessage:this.userMessage,retryable:this.retryable,context:this.context,stack:this.stack,originalError:this.originalError instanceof Error?{name:this.originalError.name,message:this.originalError.message,stack:this.originalError.stack}:this.originalError}}}let g=new class{handleError(a,b={}){if(a instanceof f)return this.logError(a),a;if(a instanceof Error)return this.handleStandardError(a,b);if(this.isSupabaseError(a))return this.handleSupabaseError(a,b);let c=new f("Une erreur inattendue est survenue.","SYS_6001","high",b,a);return this.logError(c),c}handleStandardError(a,b){let c=a.message.toLowerCase(),d="SYS_6001",e="medium";c.includes("network")||c.includes("fetch")?(d="NET_4001",e="medium"):c.includes("timeout")?(d="NET_4002",e="medium"):c.includes("unauthorized")||c.includes("401")?(d="AUTH_1001",e="high"):c.includes("forbidden")||c.includes("403")?(d="AUTH_1004",e="high"):c.includes("not found")||c.includes("404")?(d="DB_3003",e="low"):(c.includes("validation")||c.includes("invalid"))&&(d="VALID_2001",e="low");let g=new f(a.message,d,e,b,a);return this.logError(g),g}handleSupabaseError(a,b){let c=a.code||a.status,d=a.message||"Erreur Supabase",e=b.code||"DB_3002",g="medium";if(!b.code)switch(c){case"PGRST116":case"42P01":e="DB_3003",g="low";break;case"42501":e="DB_3005",g="high";break;case"23505":e="VALID_2004",g="low";break;case"23503":e="DB_3004",g="medium";break;case"PGRST301":case"400":e="NET_4006",g="low";break;case"401":e="AUTH_1001",g="high";break;case"403":e="AUTH_1004",g="high";break;case"404":e="NET_4005",g="low";break;case"500":e="NET_4004",g="high"}"DB_3006"===e&&(g="medium");let h=new f(d,e,g,b,a);return this.logError(h),h}isSupabaseError(a){return a&&(a.code||a.status||a.message)&&("string"==typeof a.code||"number"==typeof a.status)}logError(a){let b={...a.context,code:a.code,severity:a.severity,retryable:a.retryable};switch(a.severity){case"critical":case"high":d.logger.error(a.message,a.originalError||a,b);break;case"medium":d.logger.warn(a.message,b);break;case"low":d.logger.info(`Error: ${a.message}`,b)}}createValidationError(a,b){return new f(a,"VALID_2001","low",{field:b,userMessage:a})}createAuthError(a,b){return new f(b||"Erreur d'authentification",a,"high")}createDatabaseError(a,b){return new f(a,"DB_3002","medium",{},b)}createNotFoundError(a,b){return new f(a,"DB_3003","low",b)}};a.s(["AppError",()=>f,"ErrorCode",()=>e,"errorHandler",0,g],571907),a.s([],452218)},692759,a=>{"use strict";let b=(0,a.i(170106).default)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);a.s(["Send",()=>b],692759)},821374,a=>{"use strict";let b=(0,a.i(170106).default)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);a.s(["Star",()=>b],821374)},806368,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(497895);a.i(460355);var e=a.i(346271);let f=c.forwardRef(({className:a,columns:c=4,gap:e="md",children:f,...g},h)=>(0,b.jsx)("div",{ref:h,className:(0,d.cn)("grid",{1:"grid-cols-1",2:"grid-cols-1 md:grid-cols-2",3:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3",4:"grid-cols-1 md:grid-cols-2 lg:grid-cols-4"}[c],{sm:"gap-4",md:"gap-6",lg:"gap-8"}[e],a),...g,children:f}));f.displayName="BentoGrid";let g=c.forwardRef(({className:a,span:c=1,rowSpan:f=1,children:g,...h},i)=>(0,b.jsx)(e.motion.div,{ref:i,className:(0,d.cn)({1:"col-span-1",2:"col-span-1 md:col-span-2",3:"col-span-1 md:col-span-2 lg:col-span-3",4:"col-span-1 md:col-span-2 lg:col-span-4"}[c],{1:"row-span-1",2:"row-span-1 md:row-span-2",3:"row-span-1 md:row-span-3"}[f],a),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,ease:[.16,1,.3,1]},...h,children:g}));g.displayName="BentoCard",a.s(["BentoCard",()=>g,"BentoGrid",()=>f])},193767,a=>{"use strict";let b=new class{async blobToBase64(a){return new Promise((b,c)=>{let d=new FileReader;d.onloadend=()=>{b(d.result.split(",")[1])},d.onerror=c,d.readAsDataURL(a)})}async sendEmail(a){try{let b=a.attachments?await Promise.all(a.attachments.map(async a=>{let b;if(a.content instanceof Blob)b=await this.blobToBase64(a.content);else if(a.content instanceof ArrayBuffer){let c=new Blob([a.content],{type:a.contentType});b=await this.blobToBase64(c)}else b=a.content;return{filename:a.filename,content:b,contentType:a.contentType}})):void 0,c=await fetch("/api/email/send",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({to:a.to,subject:a.subject,html:a.html,text:a.text,attachments:b,cc:a.cc,bcc:a.bcc,replyTo:a.replyTo})});if(!c.ok){let a=await c.json();throw Error(a.message||"Erreur lors de l'envoi de l'email")}let d=await c.json();return{success:!0,message:d.message||"Email envoyé avec succès"}}catch(a){throw Error(a instanceof Error?a.message:"Erreur lors de l'envoi de l'email")}}async sendDocument(a,b,c,d,e,f){return this.sendEmail({to:a,subject:b,html:e,text:f,attachments:[{filename:d,content:c,contentType:"application/pdf"}]})}async sendMultipleDocuments(a,b,c,d,e){return this.sendEmail({to:a,subject:b,html:d,text:e,attachments:c.map(a=>({filename:a.filename,content:a.blob,contentType:"application/pdf"}))})}};a.s(["emailService",0,b])},335151,a=>{"use strict";var b=a.i(188950),c=a.i(212955);function d(a){(0,c.default)(1,arguments);var d=(0,b.default)(a),e=d.getMonth();return d.setFullYear(d.getFullYear(),e+1,0),d.setHours(23,59,59,999),d}a.s(["default",()=>d])},603420,a=>{"use strict";var b=a.i(568425),c=a.i(188950),d=a.i(212955);function e(a,b){(0,d.default)(2,arguments);var e=(0,c.default)(a),f=(0,c.default)(b),g=e.getTime()-f.getTime();return g<0?-1:g>0?1:g}var f=a.i(335151),g={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(a){return a<0?Math.ceil(a):Math.floor(a)}},h=a.i(120866);function i(a,b){if(null==a)throw TypeError("assign requires that input parameter not be null or undefined");for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c]);return a}var j=a.i(451579);function k(a,k){return(0,d.default)(1,arguments),function(a,k,l){(0,d.default)(2,arguments);var m,n,o,p,q,r=(0,b.getDefaultOptions)(),s=null!=(m=null!=(n=null==l?void 0:l.locale)?n:r.locale)?m:h.default;if(!s.formatDistance)throw RangeError("locale must contain formatDistance property");var t=e(a,k);if(isNaN(t))throw RangeError("Invalid time value");var u=i(i({},l),{addSuffix:!!(null==l?void 0:l.addSuffix),comparison:t});t>0?(o=(0,c.default)(k),p=(0,c.default)(a)):(o=(0,c.default)(a),p=(0,c.default)(k));var v=function(a,b,e){(0,d.default)(2,arguments);var f,h=function(a,b){return(0,d.default)(2,arguments),(0,c.default)(a).getTime()-(0,c.default)(b).getTime()}(a,b)/1e3;return((f=null==e?void 0:e.roundingMethod)?g[f]:g.trunc)(h)}(p,o),w=Math.round((v-((0,j.default)(p)-(0,j.default)(o))/1e3)/60);if(w<2)if(null!=l&&l.includeSeconds)if(v<5)return s.formatDistance("lessThanXSeconds",5,u);else if(v<10)return s.formatDistance("lessThanXSeconds",10,u);else if(v<20)return s.formatDistance("lessThanXSeconds",20,u);else if(v<40)return s.formatDistance("halfAMinute",0,u);else if(v<60)return s.formatDistance("lessThanXMinutes",1,u);else return s.formatDistance("xMinutes",1,u);else if(0===w)return s.formatDistance("lessThanXMinutes",1,u);else return s.formatDistance("xMinutes",w,u);if(w<45)return s.formatDistance("xMinutes",w,u);if(w<90)return s.formatDistance("aboutXHours",1,u);if(w<1440){var x=Math.round(w/60);return s.formatDistance("aboutXHours",x,u)}if(w<2520)return s.formatDistance("xDays",1,u);else if(w<43200){var y=Math.round(w/1440);return s.formatDistance("xDays",y,u)}else if(w<86400)return q=Math.round(w/43200),s.formatDistance("aboutXMonths",q,u);if((q=function(a,b){(0,d.default)(2,arguments);var g,h=(0,c.default)(a),i=(0,c.default)(b),j=e(h,i),k=Math.abs(function(a,b){(0,d.default)(2,arguments);var e=(0,c.default)(a),f=(0,c.default)(b);return 12*(e.getFullYear()-f.getFullYear())+(e.getMonth()-f.getMonth())}(h,i));if(k<1)g=0;else{1===h.getMonth()&&h.getDate()>27&&h.setDate(30),h.setMonth(h.getMonth()-j*k);var l=e(h,i)===-j;(function(a){(0,d.default)(1,arguments);var b=(0,c.default)(a);return(function(a){(0,d.default)(1,arguments);var b=(0,c.default)(a);return b.setHours(23,59,59,999),b})(b).getTime()===(0,f.default)(b).getTime()})((0,c.default)(a))&&1===k&&1===e(a,i)&&(l=!1),g=j*(k-Number(l))}return 0===g?0:g}(p,o))<12){var z=Math.round(w/43200);return s.formatDistance("xMonths",z,u)}var A=q%12,B=Math.floor(q/12);return A<3?s.formatDistance("aboutXYears",B,u):A<9?s.formatDistance("overXYears",B,u):s.formatDistance("almostXYears",B+1,u)}(a,Date.now(),k)}a.s(["formatDistanceToNow",()=>k],603420)},46143,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(497895),e=a.i(533441);let f=c.forwardRef(({className:a,checked:c,onCheckedChange:f,...g},h)=>(0,b.jsxs)("div",{className:"relative inline-flex items-center",children:[(0,b.jsx)("input",{type:"checkbox",ref:h,checked:c,onChange:a=>f?.(a.target.checked),className:(0,d.cn)("peer h-4 w-4 shrink-0 rounded border border-gray-300","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-blue focus-visible:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50","cursor-pointer",c&&"border-brand-blue bg-brand-blue",a),...g}),c&&(0,b.jsx)(e.Check,{className:"absolute h-3 w-3 text-white pointer-events-none left-0.5 top-0.5"})]}));f.displayName="Checkbox",a.s(["Checkbox",()=>f])},265602,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(400187),e=a.i(497895);let f=(0,d.cva)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),g=c.forwardRef(({className:a,variant:c,...d},g)=>(0,b.jsx)("div",{ref:g,role:"alert",className:(0,e.cn)(f({variant:c}),a),...d}));g.displayName="Alert",c.forwardRef(({className:a,...c},d)=>(0,b.jsx)("h5",{ref:d,className:(0,e.cn)("mb-1 font-medium leading-none tracking-tight",a),...c})).displayName="AlertTitle";let h=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)("div",{ref:d,className:(0,e.cn)("text-sm [&_p]:leading-relaxed",a),...c}));h.displayName="AlertDescription",a.s(["Alert",()=>g,"AlertDescription",()=>h])},553817,a=>{"use strict";var b=a.i(269240);a.i(452218);var c=a.i(571907),d=a.i(325383);let e=new class{supabase;constructor(a){this.supabase=a||(0,b.createClient)()}async getSignaturesByDocument(a){try{let{data:b,error:c}=await this.supabase.from("document_signatures").select(`
          *,
          signer:users!document_signatures_signer_id_fkey(id, full_name, email, role)
        `).eq("document_id",a).eq("status","signed").order("signed_at",{ascending:!0});if(c)throw c;return b||[]}catch(b){if(b instanceof c.AppError)throw b;throw c.errorHandler.handleError(b,{operation:"getSignaturesByDocument",documentId:a})}}async getSignatureById(a){try{let{data:b,error:d}=await this.supabase.from("document_signatures").select(`
          *,
          signer:users!document_signatures_signer_id_fkey(id, full_name, email, role),
          document:documents(id, title, organization_id)
        `).eq("id",a).single();if(d){if("PGRST116"===d.code)throw c.errorHandler.createNotFoundError(`Signature avec l'ID ${a} introuvable`,{signatureId:a});throw d}return b}catch(b){if(b instanceof c.AppError)throw b;throw c.errorHandler.handleError(b,{operation:"getSignatureById",signatureId:a})}}async getSignaturesByUser(a,b){try{let{data:c,error:d}=await this.supabase.from("document_signatures").select(`
          *,
          document:documents(id, title, type, organization_id)
        `).eq("signer_id",a).eq("organization_id",b).order("signed_at",{ascending:!1});if(d)throw d;return c||[]}catch(d){if(d instanceof c.AppError)throw d;throw c.errorHandler.handleError(d,{operation:"getSignaturesByUser",userId:a,organizationId:b})}}async getSignaturesBySession(a,b){try{let{data:c,error:d}=await this.supabase.from("enrollments").select("student_id").eq("session_id",a).in("status",["confirmed","completed","active"]);if(d)throw d;if(!c||0===c.length)return[];let e=c.map(a=>a.student_id).filter(Boolean),{data:f,error:g}=await this.supabase.from("documents").select("id").eq("organization_id",b).in("student_id",e);if(g)throw g;if(!f||0===f.length)return[];let h=f.map(a=>a.id),{data:i,error:j}=await this.supabase.from("document_signatures").select(`
          *,
          signer:users!document_signatures_signer_id_fkey(id, full_name, email, role),
          document:documents(id, title, type, student_id, students(id, first_name, last_name))
        `).in("document_id",h).eq("organization_id",b).order("signed_at",{ascending:!1});if(j)throw j;return i||[]}catch(d){if(d instanceof c.AppError)throw d;throw c.errorHandler.handleError(d,{operation:"getSignaturesBySession",sessionId:a,organizationId:b})}}async createSignature(a){try{let{data:b}=await this.supabase.auth.getUser();if(!b.user)throw c.errorHandler.createAuthError(c.ErrorCode.AUTH_REQUIRED,"Utilisateur non authentifié");let e=this.generateValidationCode(),f={document_id:a.documentId,organization_id:a.organizationId,signer_id:a.signerId,signature_data:a.signatureData,signature_type:a.signatureType||"handwritten",signer_name:a.signerName||b.user.user_metadata?.full_name||"Utilisateur",signer_email:a.signerEmail||b.user.email||null,signer_role:a.signerRole||null,position_x:a.positionX||null,position_y:a.positionY||null,width:a.width||200,height:a.height||80,page_number:a.pageNumber||1,status:"signed",is_valid:!0,validation_code:e,comment:a.comment||null,ip_address:null,user_agent:null},{data:g,error:h}=await this.supabase.from("document_signatures").insert(f).select(`
          *,
          signer:users!document_signatures_signer_id_fkey(id, full_name, email, role)
        `).single();if(h)throw h;return d.logger.info("Signature créée",{signatureId:g.id,documentId:a.documentId,signerId:a.signerId}),g}catch(b){if(b instanceof c.AppError)throw b;throw c.errorHandler.handleError(b,{operation:"createSignature",documentId:a.documentId,signerId:a.signerId})}}async updateSignature(a,b){try{let{data:d,error:e}=await this.supabase.from("document_signatures").update(b).eq("id",a).select().single();if(e){if("PGRST116"===e.code)throw c.errorHandler.createNotFoundError(`Signature avec l'ID ${a} introuvable`,{signatureId:a});throw e}return d}catch(b){if(b instanceof c.AppError)throw b;throw c.errorHandler.handleError(b,{operation:"updateSignature",signatureId:a})}}async revokeSignature(a,b){try{return this.updateSignature(a,{status:"revoked",is_valid:!1,comment:b||"Signature révoquée"})}catch(b){if(b instanceof c.AppError)throw b;throw c.errorHandler.handleError(b,{operation:"revokeSignature",signatureId:a})}}async deleteSignature(a){try{let{error:b}=await this.supabase.from("document_signatures").delete().eq("id",a);if(b)throw b;d.logger.info("Signature supprimée",{signatureId:a})}catch(b){if(b instanceof c.AppError)throw b;throw c.errorHandler.handleError(b,{operation:"deleteSignature",signatureId:a})}}async hasSignatures(a){try{let{count:b,error:c}=await this.supabase.from("document_signatures").select("*",{count:"exact",head:!0}).eq("document_id",a).eq("status","signed");if(c)throw c;return(b||0)>0}catch(b){if(b instanceof c.AppError)throw b;throw c.errorHandler.handleError(b,{operation:"hasSignatures",documentId:a})}}generateValidationCode(){let a=Date.now(),b=Math.random().toString(36).substring(2,15);return`${a}-${b}`}async validateSignature(a,b){try{let c=await this.getSignatureById(a);return c.validation_code===b&&!0===c.is_valid}catch(a){return!1}}};a.s(["signatureService",0,e])},482520,(a,b,c)=>{"use strict";b.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},324560,(a,b,c)=>{"use strict";var d=a.r(482520);function e(){}function f(){}f.resetWarningCache=e,b.exports=function(){function a(a,b,c,e,f,g){if(g!==d){var h=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}function b(){return a}a.isRequired=a;var c={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:b,element:a,elementType:a,instanceOf:b,node:a,objectOf:b,oneOf:b,oneOfType:b,shape:b,exact:b,checkPropTypes:f,resetWarningCache:e};return c.PropTypes=c,c}},341212,(a,b,c)=>{b.exports=a.r(324560)()},651442,a=>{"use strict";let{getOwnPropertyNames:b,getOwnPropertySymbols:c}=Object,{hasOwnProperty:d}=Object.prototype;function e(a,b){return function(c,d,e){return a(c,d,e)&&b(c,d,e)}}function f(a){return function(b,c,d){if(!b||!c||"object"!=typeof b||"object"!=typeof c)return a(b,c,d);let{cache:e}=d,f=e.get(b),g=e.get(c);if(f&&g)return f===c&&g===b;e.set(b,c),e.set(c,b);let h=a(b,c,d);return e.delete(b),e.delete(c),h}}function g(a){return b(a).concat(c(a))}let h=Object.hasOwn||((a,b)=>d.call(a,b));function i(a,b){return a===b||!a&&!b&&a!=a&&b!=b}let{getOwnPropertyDescriptor:j,keys:k}=Object;function l(a,b){return a.byteLength===b.byteLength&&x(new Uint8Array(a),new Uint8Array(b))}function m(a,b,c){let d=a.length;if(b.length!==d)return!1;for(;d-- >0;)if(!c.equals(a[d],b[d],d,d,a,b,c))return!1;return!0}function n(a,b){return a.byteLength===b.byteLength&&x(new Uint8Array(a.buffer,a.byteOffset,a.byteLength),new Uint8Array(b.buffer,b.byteOffset,b.byteLength))}function o(a,b){return i(a.getTime(),b.getTime())}function p(a,b){return a.name===b.name&&a.message===b.message&&a.cause===b.cause&&a.stack===b.stack}function q(a,b){return a===b}function r(a,b,c){let d,e,f=a.size;if(f!==b.size)return!1;if(!f)return!0;let g=Array(f),h=a.entries(),i=0;for(;(d=h.next())&&!d.done;){let f=b.entries(),h=!1,j=0;for(;(e=f.next())&&!e.done;){if(g[j]){j++;continue}let f=d.value,k=e.value;if(c.equals(f[0],k[0],i,j,a,b,c)&&c.equals(f[1],k[1],f[0],k[0],a,b,c)){h=g[j]=!0;break}j++}if(!h)return!1;i++}return!0}function s(a,b,c){let d=k(a),e=d.length;if(k(b).length!==e)return!1;for(;e-- >0;)if(!z(a,b,c,d[e]))return!1;return!0}function t(a,b,c){let d,e,f,h=g(a),i=h.length;if(g(b).length!==i)return!1;for(;i-- >0;)if(!z(a,b,c,d=h[i])||(e=j(a,d),f=j(b,d),(e||f)&&(!e||!f||e.configurable!==f.configurable||e.enumerable!==f.enumerable||e.writable!==f.writable)))return!1;return!0}function u(a,b){return i(a.valueOf(),b.valueOf())}function v(a,b){return a.source===b.source&&a.flags===b.flags}function w(a,b,c){let d,e,f=a.size;if(f!==b.size)return!1;if(!f)return!0;let g=Array(f),h=a.values();for(;(d=h.next())&&!d.done;){let f=b.values(),h=!1,i=0;for(;(e=f.next())&&!e.done;){if(!g[i]&&c.equals(d.value,e.value,d.value,e.value,a,b,c)){h=g[i]=!0;break}i++}if(!h)return!1}return!0}function x(a,b){let c=a.byteLength;if(b.byteLength!==c||a.byteOffset!==b.byteOffset)return!1;for(;c-- >0;)if(a[c]!==b[c])return!1;return!0}function y(a,b){return a.hostname===b.hostname&&a.pathname===b.pathname&&a.protocol===b.protocol&&a.port===b.port&&a.hash===b.hash&&a.username===b.username&&a.password===b.password}function z(a,b,c,d){return("_owner"===d||"__o"===d||"__v"===d)&&(!!a.$$typeof||!!b.$$typeof)||h(b,d)&&c.equals(a[d],b[d],d,d,a,b,c)}let A={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},B=Object.prototype.toString,C=D();function D(a={}){let{circular:b=!1,createInternalComparator:c,createState:d,strict:g=!1}=a,h=function({areArrayBuffersEqual:a,areArraysEqual:b,areDataViewsEqual:c,areDatesEqual:d,areErrorsEqual:e,areFunctionsEqual:f,areMapsEqual:g,areNumbersEqual:h,areObjectsEqual:i,arePrimitiveWrappersEqual:j,areRegExpsEqual:k,areSetsEqual:l,areTypedArraysEqual:m,areUrlsEqual:n,unknownTagComparators:o}){return function(p,q,r){if(p===q)return!0;if(null==p||null==q)return!1;let s=typeof p;if(s!==typeof q)return!1;if("object"!==s)return"number"===s?h(p,q,r):"function"===s&&f(p,q,r);let t=p.constructor;if(t!==q.constructor)return!1;if(t===Object)return i(p,q,r);if(Array.isArray(p))return b(p,q,r);if(t===Date)return d(p,q,r);if(t===RegExp)return k(p,q,r);if(t===Map)return g(p,q,r);if(t===Set)return l(p,q,r);let u=B.call(p);if("[object Date]"===u)return d(p,q,r);if("[object RegExp]"===u)return k(p,q,r);if("[object Map]"===u)return g(p,q,r);if("[object Set]"===u)return l(p,q,r);if("[object Object]"===u)return"function"!=typeof p.then&&"function"!=typeof q.then&&i(p,q,r);if("[object URL]"===u)return n(p,q,r);if("[object Error]"===u)return e(p,q,r);if("[object Arguments]"===u)return i(p,q,r);if(A[u])return m(p,q,r);if("[object ArrayBuffer]"===u)return a(p,q,r);if("[object DataView]"===u)return c(p,q,r);if("[object Boolean]"===u||"[object Number]"===u||"[object String]"===u)return j(p,q,r);if(o){let a=o[u];if(!a){let b=null!=p?p[Symbol.toStringTag]:void 0;b&&(a=o[b])}if(a)return a(p,q,r)}return!1}}(function({circular:a,createCustomConfig:b,strict:c}){let d={areArrayBuffersEqual:l,areArraysEqual:c?t:m,areDataViewsEqual:n,areDatesEqual:o,areErrorsEqual:p,areFunctionsEqual:q,areMapsEqual:c?e(r,t):r,areNumbersEqual:i,areObjectsEqual:c?t:s,arePrimitiveWrappersEqual:u,areRegExpsEqual:v,areSetsEqual:c?e(w,t):w,areTypedArraysEqual:c?e(x,t):x,areUrlsEqual:y,unknownTagComparators:void 0};if(b&&(d=Object.assign({},d,b(d))),a){let a=f(d.areArraysEqual),b=f(d.areMapsEqual),c=f(d.areObjectsEqual),e=f(d.areSetsEqual);d=Object.assign({},d,{areArraysEqual:a,areMapsEqual:b,areObjectsEqual:c,areSetsEqual:e})}return d}(a)),j=c?c(h):function(a,b,c,d,e,f,g){return h(a,b,g)};return function({circular:a,comparator:b,createState:c,equals:d,strict:e}){if(c)return function(f,g){let{cache:h=a?new WeakMap:void 0,meta:i}=c();return b(f,g,{cache:h,equals:d,meta:i,strict:e})};if(a)return function(a,c){return b(a,c,{cache:new WeakMap,equals:d,meta:void 0,strict:e})};let f={cache:void 0,equals:d,meta:void 0,strict:e};return function(a,c){return b(a,c,f)}}({circular:b,comparator:h,createState:d,equals:j,strict:g})}D({strict:!0}),D({circular:!0}),D({circular:!0,strict:!0}),D({createInternalComparator:()=>i}),D({strict:!0,createInternalComparator:()=>i}),D({circular:!0,createInternalComparator:()=>i}),D({circular:!0,createInternalComparator:()=>i,strict:!0}),a.s(["deepEqual",()=>C])},618155,a=>{"use strict";var b=a.i(424231),c=a.i(923665),d=a.i(758042),e=a.i(994222),f=a.i(199738),g=(0,b.generateCategoricalChart)({chartName:"BarChart",GraphicalChild:c.Bar,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:d.XAxis},{axisType:"yAxis",AxisComp:e.YAxis}],formatAxisMap:f.formatAxisMap});a.s(["BarChart",()=>g])},510948,a=>{"use strict";let b=(0,a.i(170106).default)("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);a.s(["GitBranch",()=>b],510948)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__d01b4ebb._.js.map