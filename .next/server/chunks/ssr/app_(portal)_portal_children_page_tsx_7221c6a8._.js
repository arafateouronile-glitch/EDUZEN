module.exports=[933279,a=>{"use strict";var b=a.i(187924),c=a.i(433217),d=a.i(913216),e=a.i(269240),f=a.i(703130),g=a.i(546842),h=a.i(941675),i=a.i(911300),j=a.i(953722),k=a.i(911156),l=a.i(238246);function m(){let{user:a}=(0,d.useAuth)(),m=(0,e.createClient)(),{data:n}=(0,c.useQuery)({queryKey:["children",a?.id],queryFn:async()=>{if(!a?.id||a?.role!=="parent")return[];let{data:b}=await m.from("guardians").select("id").eq("user_id",a.id);if(!b||0===b.length)return[];let{data:c}=await m.from("student_guardians").select("student_id").in("guardian_id",b.map(a=>a.id));if(!c||0===c.length)return[];let{data:d}=await m.from("students").select("*, classes(name)").in("id",c.map(a=>a.student_id).filter(a=>null!==a)).eq("status","active");return d||[]},enabled:!!a?.id&&a?.role==="parent"});return a?.role!=="parent"?(0,b.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"Accès réservé aux parents"}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Mes enfants"}),(0,b.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Gérez les informations de vos enfants"})]}),n&&n.length>0?(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(a=>(0,b.jsxs)(f.Card,{className:"hover:shadow-lg transition-shadow",children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[a.photo_url?(0,b.jsx)("img",{src:a.photo_url,alt:`${a.first_name} ${a.last_name}`,className:"h-20 w-20 rounded-full object-cover"}):(0,b.jsxs)("div",{className:"h-20 w-20 rounded-full bg-primary text-white flex items-center justify-center text-2xl font-semibold",children:[a.first_name.charAt(0),a.last_name.charAt(0)]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)(f.CardTitle,{className:"text-lg",children:[a.first_name," ",a.last_name]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.classes?.name||"Non assigné"})]})]})}),(0,b.jsxs)(f.CardContent,{children:[(0,b.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["N° étudiant: ",(0,b.jsx)("span",{className:"font-medium",children:a.student_number})]}),a.email&&(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Email: ",(0,b.jsx)("span",{className:"font-medium",children:a.email})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-4",children:[(0,b.jsxs)(l.default,{href:`/portal/children/${a.id}/attendance`,className:"flex flex-col items-center p-3 border rounded-lg hover:bg-gray-50 transition-colors",children:[(0,b.jsx)(i.ClipboardList,{className:"h-5 w-5 text-primary mb-1"}),(0,b.jsx)("span",{className:"text-xs text-center",children:"Présences"})]}),(0,b.jsxs)(l.default,{href:`/portal/children/${a.id}/grades`,className:"flex flex-col items-center p-3 border rounded-lg hover:bg-gray-50 transition-colors",children:[(0,b.jsx)(j.BookOpen,{className:"h-5 w-5 text-primary mb-1"}),(0,b.jsx)("span",{className:"text-xs text-center",children:"Notes"})]}),(0,b.jsxs)(l.default,{href:`/portal/children/${a.id}/schedule`,className:"flex flex-col items-center p-3 border rounded-lg hover:bg-gray-50 transition-colors",children:[(0,b.jsx)(h.Calendar,{className:"h-5 w-5 text-primary mb-1"}),(0,b.jsx)("span",{className:"text-xs text-center",children:"Emploi du temps"})]}),(0,b.jsxs)(l.default,{href:`/portal/children/${a.id}/payments`,className:"flex flex-col items-center p-3 border rounded-lg hover:bg-gray-50 transition-colors",children:[(0,b.jsx)(k.CreditCard,{className:"h-5 w-5 text-primary mb-1"}),(0,b.jsx)("span",{className:"text-xs text-center",children:"Paiements"})]})]})]})]},a.id))}):(0,b.jsx)(f.Card,{children:(0,b.jsxs)(f.CardContent,{className:"text-center py-12 text-muted-foreground",children:[(0,b.jsx)(g.User,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,b.jsx)("p",{children:"Aucun enfant enregistré"})]})})]})}a.s(["default",()=>m])}];

//# sourceMappingURL=app_%28portal%29_portal_children_page_tsx_7221c6a8._.js.map