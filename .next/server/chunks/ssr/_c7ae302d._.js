module.exports=[915618,a=>{"use strict";let b=(0,a.i(170106).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],915618)},400210,a=>{"use strict";let b=(0,a.i(170106).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],400210)},641710,a=>{"use strict";let b=(0,a.i(170106).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);a.s(["Clock",()=>b],641710)},426099,a=>{"use strict";var b=a.i(269240);let c=new class{supabase;constructor(a){this.supabase=a||(0,b.createClient)()}async getAllPrograms(a,b){let c=this.supabase.from("programs").select("*").eq("organization_id",a);b?.isActive!==void 0&&(c=c.eq("is_active",b.isActive)),b?.search&&(c=c.or(`name.ilike.%${b.search}%,code.ilike.%${b.search}%,description.ilike.%${b.search}%`));let{data:d,error:e}=await c.order("created_at",{ascending:!1});if(e)throw e;return d}async getProgramById(a){let{data:b,error:c}=await this.supabase.from("programs").select(`
        *,
        formations(*)
      `).eq("id",a).single();if(c)throw c;return b}async createProgram(a){let{data:b,error:c}=await this.supabase.from("programs").insert(a).select().single();if(c)throw c;return b}async updateProgram(a,b){let{data:c,error:d}=await this.supabase.from("programs").update(b).eq("id",a).select().single();if(d)throw d;return c}async deleteProgram(a){return this.updateProgram(a,{is_active:!1})}async getFormationsByProgram(a){let{data:b,error:c}=await this.supabase.from("formations").select("*").eq("program_id",a).order("created_at",{ascending:!1});if(c)throw c;return b}async getGlobalStats(a){let{data:b,error:c}=await this.supabase.from("programs").select("id, is_active, created_at").eq("organization_id",a);if(c)throw c;let d=b||[],e=d.length,f=d.filter(a=>a.is_active).length,g=d.filter(a=>!a.is_active).length,h=0,i=d.map(a=>a.id);if(i.length>0){let{count:a,error:b}=await this.supabase.from("formations").select("*",{count:"exact",head:!0}).in("program_id",i);if(b)throw b;h=a||0}let j=0;if(i.length>0){let{data:a,error:b}=await this.supabase.from("formations").select("id").in("program_id",i);if(b)throw b;let c=a?.map(a=>a.id)||[];if(c.length>0){let{count:a,error:b}=await this.supabase.from("sessions").select("*",{count:"exact",head:!0}).in("formation_id",c);if(b)throw b;j=a||0}}let k=0;if(i.length>0){let{data:a,error:b}=await this.supabase.from("formations").select("id").in("program_id",i);if(b)throw b;let c=a?.map(a=>a.id)||[];if(c.length>0){let{data:a,error:b}=await this.supabase.from("sessions").select("id").in("formation_id",c);if(b)throw b;let d=a?.map(a=>a.id)||[];if(d.length>0){let{count:a,error:b}=await this.supabase.from("enrollments").select("*",{count:"exact",head:!0}).in("session_id",d);if(b)throw b;k=a||0}}}let l=[{name:"Actifs",value:f,color:"#335ACF"},{name:"Inactifs",value:g,color:"#6B7280"}].filter(a=>a.value>0),m={};return d.forEach(a=>{if(a.created_at){let b=new Date(a.created_at),c=`${b.getFullYear()}-${String(b.getMonth()+1).padStart(2,"0")}`;m[c]=(m[c]||0)+1}}),{total:e,active:f,inactive:g,totalFormations:h,totalSessions:j,totalEnrollments:k,statusData:l,monthlyData:Object.entries(m).sort(([a],[b])=>a.localeCompare(b)).slice(-6).map(([a,b])=>({month:new Date(a+"-01").toLocaleDateString("fr-FR",{month:"short",year:"numeric"}),programmes:b}))}}};a.s(["programService",0,c])},717371,a=>{"use strict";let b=(0,a.i(170106).default)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);a.s(["UserPlus",()=>b],717371)}];

//# sourceMappingURL=_c7ae302d._.js.map