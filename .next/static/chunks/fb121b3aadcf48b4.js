(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,645760,e=>{"use strict";var t=e.i(843476),r=e.i(271645),s=e.i(647163);e.i(882205);var a=e.i(846932);let n=r.forwardRef(({className:e,variant:r="default",hoverable:n=!1,glow:i=!1,glowColor:l="rgba(51, 90, 207, 0.3)",...d},o)=>(0,t.jsxs)(a.motion.div,{ref:o,className:(0,s.cn)("relative rounded-2xl border backdrop-blur-xl transition-all duration-300",{"bg-white/70 dark:bg-gray-900/70 border-white/20 dark:border-gray-700/30 shadow-lg":"default"===r,"bg-white/80 dark:bg-gray-900/80 border-white/30 dark:border-gray-700/40 shadow-xl":"premium"===r,"bg-white/50 dark:bg-gray-900/50 border-white/10 dark:border-gray-700/20 shadow-md":"subtle"===r,"cursor-pointer":n,"hover:shadow-2xl hover:scale-[1.02]":n,"hover:bg-white/90 dark:hover:bg-gray-900/90":n},e),whileHover:n?{scale:1.02,y:-2}:void 0,transition:{type:"spring",stiffness:300,damping:30},...d,children:[i&&(0,t.jsx)(a.motion.div,{className:"absolute inset-0 rounded-2xl opacity-0 blur-xl",style:{background:`radial-gradient(circle, ${l} 0%, transparent 70%)`},animate:{opacity:[0,.5,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}}),(0,t.jsx)("div",{className:"relative z-10",children:d.children})]}));n.displayName="GlassCard",e.s(["GlassCard",()=>n])},225913,e=>{"use strict";var t=e.i(207670);let r=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,s=t.clsx;e.s(["cva",0,(e,t)=>a=>{var n;if((null==t?void 0:t.variants)==null)return s(e,null==a?void 0:a.class,null==a?void 0:a.className);let{variants:i,defaultVariants:l}=t,d=Object.keys(i).map(e=>{let t=null==a?void 0:a[e],s=null==l?void 0:l[e];if(null===t)return null;let n=r(t)||r(s);return i[e][n]}),o=a&&Object.entries(a).reduce((e,t)=>{let[r,s]=t;return void 0===s||(e[r]=s),e},{});return s(e,d,null==t||null==(n=t.compoundVariants)?void 0:n.reduce((e,t)=>{let{class:r,className:s,...a}=t;return Object.entries(a).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...l,...o}[t]):({...l,...o})[t]===r})?[...e,r,s]:e},[]),null==a?void 0:a.class,null==a?void 0:a.className)}])},994179,e=>{"use strict";var t=e.i(843476),r=e.i(225913),s=e.i(647163);let a=(0,r.cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground border-border hover:bg-accent hover:text-accent-foreground",success:"border-transparent bg-success-primary text-white shadow hover:bg-brand-blue-dark",warning:"border-transparent bg-warning-primary text-white shadow hover:bg-brand-cyan-dark",premium:"border-transparent bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 text-white shadow-lg shadow-purple-500/50 hover:shadow-xl hover:shadow-purple-500/60",glass:"border-white/20 bg-white/10 backdrop-blur-md text-foreground shadow-lg"},size:{default:"px-2.5 py-0.5 text-xs",sm:"px-2 py-0.5 text-xs",lg:"px-3 py-1 text-sm"}},defaultVariants:{variant:"default",size:"default"}});function n({className:e,variant:r,size:n,dot:i,pulse:l,children:d,...o}){return(0,t.jsxs)("div",{className:(0,s.cn)(a({variant:r,size:n}),e),...o,children:[i&&(0,t.jsx)("span",{className:(0,s.cn)("mr-1.5 h-1.5 w-1.5 rounded-full","success"===r&&"bg-white/80","warning"===r&&"bg-white/80","default"===r&&"bg-white/80",l&&"animate-pulse")}),d]})}e.s(["Badge",()=>n])},463059,e=>{"use strict";let t=(0,e.i(475254).default)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["ChevronRight",()=>t],463059)},346897,e=>{"use strict";let t=(0,e.i(475254).default)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>t],346897)},127341,e=>{"use strict";var t=e.i(843476),r=e.i(271645),s=e.i(647163);let a=r.createContext(void 0);function n({value:e,defaultValue:n,onValueChange:i,children:l,className:d}){let o=void 0!==e,[c,u]=r.useState(n??"");r.useEffect(()=>{o||void 0===n||u(n)},[n]);let m=o?e:c,x=r.useCallback(e=>{o||u(e),i?.(e)},[o,i]);return(0,t.jsx)(a.Provider,{value:{value:m,onValueChange:x},children:(0,t.jsx)("div",{className:(0,s.cn)("w-full",d),children:l})})}function i(){let e=r.useContext(a);if(!e)throw Error("Tabs components must be used within a Tabs component");return e}function l({children:e,className:r}){return(0,t.jsx)("div",{className:(0,s.cn)("inline-flex h-10 items-center justify-center rounded-lg bg-bg-gray-100 p-1 text-text-tertiary",r),children:e})}function d({value:e,children:r,className:a}){let{value:n,onValueChange:l}=i(),d=n===e;return(0,t.jsx)("button",{type:"button",onClick:()=>l(e),className:(0,s.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-outline-none focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",d?"bg-white text-text-primary shadow-sm":"text-text-tertiary hover:text-text-primary",a),children:r})}function o({value:e,children:r,className:a}){let{value:n}=i();return n!==e?null:(0,t.jsx)("div",{className:(0,s.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),children:r})}e.s(["Tabs",()=>n,"TabsContent",()=>o,"TabsList",()=>l,"TabsTrigger",()=>d])},454903,e=>{"use strict";var t=e.i(843476),r=e.i(266027),s=e.i(271645),a=e.i(383801),n=e.i(267824),i=e.i(645760),l=e.i(167881),d=e.i(994179),o=e.i(127341);e.i(882205);var c=e.i(846932),u=e.i(32095),m=e.i(87316),x=e.i(346897),g=e.i(465286),h=e.i(338456),b=e.i(463059),p=e.i(178583),v=e.i(842009),f=e.i(522016),j=e.i(647163),y=e.i(790224);function w(){let{student:e,studentId:w}=(0,a.useLearnerContext)(),N=(0,s.useMemo)(()=>w?(0,n.createLearnerClient)(w):null,[w]),{data:C,isLoading:k}=(0,r.useQuery)({queryKey:["learner-all-enrollments",w],queryFn:async()=>{if(!w||!N)return[];try{let{data:e,error:t}=await N.from("enrollments").select(`
            *,
            sessions(
              id,
              name,
              start_date,
              end_date,
              status,
              location,
              formations(
                id,
                name,
                description
              )
            )
          `).eq("student_id",w).order("created_at",{ascending:!1});if(t){if("PGRST116"===t.code||"42P01"===t.code||"PGRST301"===t.code||400===t.status||"400"===t.code||t.message?.includes("relation")||t.message?.includes("relationship")||t.message?.includes("does not exist")||t.message?.includes("schema cache"))return y.logger.warn("Enrollments table may not be accessible (RLS or missing)",{studentId:(0,y.maskId)(w),error:(0,y.sanitizeError)(t)}),[];return y.logger.error("Error fetching enrollments",t,{studentId:(0,y.maskId)(w),error:(0,y.sanitizeError)(t)}),[]}return e||[]}catch(e){return y.logger.error("Unexpected error fetching enrollments",e,{studentId:(0,y.maskId)(w),error:(0,y.sanitizeError)(e)}),[]}},enabled:!!w&&!!N,refetchOnWindowFocus:!0,refetchOnMount:!0}),T=C?.filter(e=>{let t=e.sessions;return!!t?.start_date&&new Date(t.start_date)>new Date&&"cancelled"!==e.status})||[],_=C?.filter(e=>{let t=e.sessions;if(!t?.start_date||!t?.end_date)return!1;let r=new Date;return new Date(t.start_date)<=r&&new Date(t.end_date)>=r&&"cancelled"!==e.status})||[],G=C?.filter(e=>"completed"===e.status)||[],z=({enrollment:e})=>{let r=e.sessions,s=r?.formations,a=s?.programs;return(0,t.jsx)(f.default,{href:`/learner/formations/${r?.id}`,className:"block",children:(0,t.jsx)(i.GlassCard,{className:"p-6 hover:shadow-lg transition-all duration-300 group cursor-pointer",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-start gap-4",children:[(0,t.jsx)("div",{className:"p-3 bg-gradient-to-br from-brand-blue/10 to-indigo-100 rounded-xl group-hover:scale-105 transition-transform",children:(0,t.jsx)(u.GraduationCap,{className:"h-8 w-8 text-brand-blue"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,t.jsxs)("div",{children:[a&&(0,t.jsx)("p",{className:"text-xs font-medium text-brand-blue uppercase tracking-wider mb-1",children:a.name}),(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900 group-hover:text-brand-blue transition-colors",children:s?.name||r?.name||"Formation"})]}),(e=>{switch(e){case"completed":return(0,t.jsx)(d.Badge,{className:"bg-green-100 text-green-700 hover:bg-green-100",children:"Terminée"});case"confirmed":return(0,t.jsx)(d.Badge,{className:"bg-blue-100 text-blue-700 hover:bg-blue-100",children:"Confirmée"});case"pending":return(0,t.jsx)(d.Badge,{className:"bg-amber-100 text-amber-700 hover:bg-amber-100",children:"En attente"});case"cancelled":return(0,t.jsx)(d.Badge,{className:"bg-red-100 text-red-700 hover:bg-red-100",children:"Annulée"});default:return(0,t.jsx)(d.Badge,{variant:"secondary",children:e})}})(e.status)]}),s?.description&&(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-2 line-clamp-2",children:s.description}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-4 mt-4 text-sm text-gray-500",children:[r?.start_date&&(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(m.Calendar,{className:"h-4 w-4"}),(0,j.formatDate)(r.start_date),r.end_date&&r.end_date!==r.start_date&&` - ${(0,j.formatDate)(r.end_date)}`]}),r?.location&&(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(x.MapPin,{className:"h-4 w-4"}),r.location]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 mt-4 pt-4 border-t border-gray-100",children:[(0,t.jsxs)(l.Button,{variant:"outline",size:"sm",className:"group-hover:border-brand-blue group-hover:text-brand-blue",children:[(0,t.jsx)(p.FileText,{className:"h-4 w-4 mr-2"}),"Documents"]}),"completed"===e.status&&(0,t.jsxs)(l.Button,{variant:"outline",size:"sm",children:[(0,t.jsx)(v.Award,{className:"h-4 w-4 mr-2"}),"Certificat"]}),(0,t.jsx)("div",{className:"flex-1"}),(0,t.jsx)(b.ChevronRight,{className:"h-5 w-5 text-gray-400 group-hover:text-brand-blue group-hover:translate-x-1 transition-all"})]})]})]})})})},B=({message:e})=>(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(u.GraduationCap,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-500",children:e})]}),E={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}};return(0,t.jsxs)(c.motion.div,{className:"space-y-6 pb-24 lg:pb-8",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"visible",children:[(0,t.jsx)(c.motion.div,{variants:E,children:(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("div",{className:"p-2 bg-brand-blue/10 rounded-xl",children:(0,t.jsx)(u.GraduationCap,{className:"h-8 w-8 text-brand-blue"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:"Mes formations"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Gérez vos inscriptions et suivez votre progression"})]})]})}),(0,t.jsxs)(c.motion.div,{variants:E,className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)(i.GlassCard,{className:"p-4 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-brand-blue",children:T.length}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"À venir"})]}),(0,t.jsxs)(i.GlassCard,{className:"p-4 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:_.length}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"En cours"})]}),(0,t.jsxs)(i.GlassCard,{className:"p-4 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:G.length}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Terminées"})]})]}),(0,t.jsx)(c.motion.div,{variants:E,children:(0,t.jsxs)(o.Tabs,{defaultValue:"upcoming",className:"space-y-6",children:[(0,t.jsxs)(o.TabsList,{className:"bg-white/50 backdrop-blur-sm border border-gray-200/50 p-1 rounded-xl",children:[(0,t.jsxs)(o.TabsTrigger,{value:"upcoming",className:"rounded-lg data-[state=active]:bg-brand-blue data-[state=active]:text-white",children:[(0,t.jsx)(m.Calendar,{className:"h-4 w-4 mr-2"}),"À venir (",T.length,")"]}),(0,t.jsxs)(o.TabsTrigger,{value:"ongoing",className:"rounded-lg data-[state=active]:bg-brand-blue data-[state=active]:text-white",children:[(0,t.jsx)(h.PlayCircle,{className:"h-4 w-4 mr-2"}),"En cours (",_.length,")"]}),(0,t.jsxs)(o.TabsTrigger,{value:"completed",className:"rounded-lg data-[state=active]:bg-brand-blue data-[state=active]:text-white",children:[(0,t.jsx)(g.CheckCircle2,{className:"h-4 w-4 mr-2"}),"Terminées (",G.length,")"]})]}),(0,t.jsx)(o.TabsContent,{value:"upcoming",className:"space-y-4",children:k?(0,t.jsx)("div",{className:"space-y-4",children:[1,2].map(e=>(0,t.jsx)("div",{className:"h-48 bg-gray-100 rounded-2xl animate-pulse"},e))}):T.length>0?T.map(e=>(0,t.jsx)(z,{enrollment:e},e.id)):(0,t.jsx)(B,{message:"Aucune formation à venir"})}),(0,t.jsx)(o.TabsContent,{value:"ongoing",className:"space-y-4",children:_.length>0?_.map(e=>(0,t.jsx)(z,{enrollment:e},e.id)):(0,t.jsx)(B,{message:"Aucune formation en cours"})}),(0,t.jsx)(o.TabsContent,{value:"completed",className:"space-y-4",children:G.length>0?G.map(e=>(0,t.jsx)(z,{enrollment:e},e.id)):(0,t.jsx)(B,{message:"Aucune formation terminée"})})]})})]})}e.s(["default",()=>w])}]);