(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,107233,e=>{"use strict";let t=(0,e.i(475254).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],107233)},871689,e=>{"use strict";let t=(0,e.i(475254).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],871689)},356909,e=>{"use strict";let t=(0,e.i(475254).default)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);e.s(["Save",()=>t],356909)},569074,e=>{"use strict";let t=(0,e.i(475254).default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);e.s(["Upload",()=>t],569074)},683909,e=>{"use strict";var t=e.i(920755);let i=new class{supabase;constructor(e){this.supabase=e||(0,t.createClient)()}async getAllPrograms(e,t){let i=this.supabase.from("programs").select("*").eq("organization_id",e);t?.isActive!==void 0&&(i=i.eq("is_active",t.isActive)),t?.search&&(i=i.or(`name.ilike.%${t.search}%,code.ilike.%${t.search}%,description.ilike.%${t.search}%`));let{data:r,error:a}=await i.order("created_at",{ascending:!1});if(a)throw a;return r}async getProgramById(e){let{data:t,error:i}=await this.supabase.from("programs").select(`
        *,
        formations(*)
      `).eq("id",e).single();if(i)throw i;return t}async createProgram(e){let{data:t,error:i}=await this.supabase.from("programs").insert(e).select().single();if(i)throw i;return t}async updateProgram(e,t){let{data:i,error:r}=await this.supabase.from("programs").update(t).eq("id",e).select().single();if(r)throw r;return i}async deleteProgram(e){return this.updateProgram(e,{is_active:!1})}async getFormationsByProgram(e){let{data:t,error:i}=await this.supabase.from("formations").select("*").eq("program_id",e).order("created_at",{ascending:!1});if(i)throw i;return t}async getGlobalStats(e){let{data:t,error:i}=await this.supabase.from("programs").select("id, is_active, created_at").eq("organization_id",e);if(i)throw i;let r=t||[],a=r.length,n=r.filter(e=>e.is_active).length,o=r.filter(e=>!e.is_active).length,l=0,s=r.map(e=>e.id);if(s.length>0){let{count:e,error:t}=await this.supabase.from("formations").select("*",{count:"exact",head:!0}).in("program_id",s);if(t)throw t;l=e||0}let d=0;if(s.length>0){let{data:e,error:t}=await this.supabase.from("formations").select("id").in("program_id",s);if(t)throw t;let i=e?.map(e=>e.id)||[];if(i.length>0){let{count:e,error:t}=await this.supabase.from("sessions").select("*",{count:"exact",head:!0}).in("formation_id",i);if(t)throw t;d=e||0}}let u=0;if(s.length>0){let{data:e,error:t}=await this.supabase.from("formations").select("id").in("program_id",s);if(t)throw t;let i=e?.map(e=>e.id)||[];if(i.length>0){let{data:e,error:t}=await this.supabase.from("sessions").select("id").in("formation_id",i);if(t)throw t;let r=e?.map(e=>e.id)||[];if(r.length>0){let{count:e,error:t}=await this.supabase.from("enrollments").select("*",{count:"exact",head:!0}).in("session_id",r);if(t)throw t;u=e||0}}}let p=[{name:"Actifs",value:n,color:"#335ACF"},{name:"Inactifs",value:o,color:"#6B7280"}].filter(e=>e.value>0),m={};return r.forEach(e=>{if(e.created_at){let t=new Date(e.created_at),i=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`;m[i]=(m[i]||0)+1}}),{total:a,active:n,inactive:o,totalFormations:l,totalSessions:d,totalEnrollments:u,statusData:p,monthlyData:Object.entries(m).sort(([e],[t])=>e.localeCompare(t)).slice(-6).map(([e,t])=>({month:new Date(e+"-01").toLocaleDateString("fr-FR",{month:"short",year:"numeric"}),programmes:t}))}}};e.s(["programService",0,i])},209372,e=>{"use strict";var t=e.i(50270);let i=t.z.object({first_name:t.z.string().min(1,"Le prénom est requis").max(100,"Le prénom est trop long"),last_name:t.z.string().min(1,"Le nom est requis").max(100,"Le nom est trop long"),date_of_birth:t.z.string().optional().or(t.z.literal("")),gender:t.z.enum(["male","female","other"]).optional().or(t.z.literal("")),email:t.z.string().email("Email invalide").optional().or(t.z.literal("")),phone:t.z.string().optional().or(t.z.literal("")),address:t.z.string().optional().or(t.z.literal("")),city:t.z.string().optional().or(t.z.literal("")),class_id:t.z.string().optional().or(t.z.literal("")),enrollment_date:t.z.string().min(1,"La date d'inscription est requise"),guardian_first_name:t.z.string().min(1,"Le prénom du tuteur est requis"),guardian_last_name:t.z.string().min(1,"Le nom du tuteur est requis"),guardian_relationship:t.z.enum(["parent","guardian","other"]).default("parent"),guardian_phone_primary:t.z.string().min(1,"Le téléphone principal du tuteur est requis"),guardian_phone_secondary:t.z.string().optional().or(t.z.literal("")),guardian_email:t.z.string().email("Email invalide").optional().or(t.z.literal("")),guardian_address:t.z.string().optional().or(t.z.literal(""))});t.z.object({first_name:t.z.string().min(1,"Le prénom est requis").max(100,"Le prénom est trop long"),last_name:t.z.string().min(1,"Le nom est requis").max(100,"Le nom est trop long"),date_of_birth:t.z.string().optional().or(t.z.literal("")),gender:t.z.enum(["male","female","other"]).optional().or(t.z.literal("")),email:t.z.string().email("Email invalide").optional().or(t.z.literal("")),phone:t.z.string().optional().or(t.z.literal("")),address:t.z.string().optional().or(t.z.literal("")),city:t.z.string().optional().or(t.z.literal("")),class_id:t.z.string().optional().or(t.z.literal("")),enrollment_date:t.z.string().min(1,"La date d'inscription est requise"),status:t.z.enum(["active","inactive","graduated"]).default("active")});let r=t.z.object({code:t.z.string().min(1,"Le code est requis").max(50,"Le code est trop long"),name:t.z.string().min(1,"Le nom est requis").max(200,"Le nom est trop long"),subtitle:t.z.string().optional().or(t.z.literal("")),description:t.z.string().optional().or(t.z.literal("")),category:t.z.string().optional().or(t.z.literal("")),program_version:t.z.string().optional().or(t.z.literal("")),version_date:t.z.string().optional().or(t.z.literal("")),duration_hours:t.z.string().optional().or(t.z.literal("")),duration_days:t.z.string().optional().or(t.z.literal("")),photo_url:t.z.string().url("URL invalide").optional().or(t.z.literal("")),price:t.z.string().optional().or(t.z.literal("")),price_enterprise:t.z.string().optional().or(t.z.literal("")),price_individual:t.z.string().optional().or(t.z.literal("")),price_freelance:t.z.string().optional().or(t.z.literal("")),currency:t.z.string().default("XOF"),payment_plan:t.z.enum(["full","installment","free"]).default("full"),published_online:t.z.boolean().default(!1),is_public:t.z.boolean().default(!1),eligible_cpf:t.z.boolean().default(!1),cpf_code:t.z.string().optional().or(t.z.literal("")),modalities:t.z.string().optional().or(t.z.literal("")),training_action_type:t.z.string().optional().or(t.z.literal("")),pedagogical_objectives:t.z.string().optional().or(t.z.literal("")),learner_profile:t.z.string().optional().or(t.z.literal("")),training_content:t.z.string().optional().or(t.z.literal("")),execution_follow_up:t.z.string().optional().or(t.z.literal("")),certification_modalities:t.z.string().optional().or(t.z.literal("")),quality:t.z.string().optional().or(t.z.literal("")),accounting_product_config:t.z.string().optional().or(t.z.literal("")),edof_export_fields:t.z.string().optional().or(t.z.literal("")),competence_domains:t.z.string().optional().or(t.z.literal("")),prerequisites:t.z.string().optional().or(t.z.literal("")),capacity_max:t.z.string().optional().or(t.z.literal("")),age_min:t.z.string().optional().or(t.z.literal("")),age_max:t.z.string().optional().or(t.z.literal("")),certification_issued:t.z.boolean().default(!1),is_active:t.z.boolean().default(!0)}),a=t.z.object({program_id:t.z.string().min(1,"Le programme est requis"),code:t.z.string().min(1,"Le code est requis").max(50,"Le code est trop long"),name:t.z.string().min(1,"Le nom est requis").max(200,"Le nom est trop long"),subtitle:t.z.string().optional().or(t.z.literal("")),photo_url:t.z.string().url("URL invalide").optional().or(t.z.literal("")),category:t.z.string().optional().or(t.z.literal("")),description:t.z.string().optional().or(t.z.literal("")),program_version:t.z.string().optional().or(t.z.literal("")),version_date:t.z.string().optional().or(t.z.literal("")),duration_hours:t.z.string().optional().or(t.z.literal("")),duration_days:t.z.string().optional().or(t.z.literal("")),duration_unit:t.z.enum(["hours","days"]).default("hours"),price:t.z.string().optional().or(t.z.literal("")),currency:t.z.string().default("XOF"),payment_plan:t.z.enum(["full","installment","free"]).default("full"),published_online:t.z.boolean().default(!1),eligible_cpf:t.z.boolean().default(!1),cpf_code:t.z.string().optional().or(t.z.literal("")),modalities:t.z.string().optional().or(t.z.literal("")),training_action_type:t.z.string().optional().or(t.z.literal("")),pedagogical_objectives:t.z.string().optional().or(t.z.literal("")),learner_profile:t.z.string().optional().or(t.z.literal("")),training_content:t.z.string().optional().or(t.z.literal("")),execution_follow_up:t.z.string().optional().or(t.z.literal("")),certification_modalities:t.z.string().optional().or(t.z.literal("")),quality:t.z.string().optional().or(t.z.literal("")),accounting_product_config:t.z.string().optional().or(t.z.literal("")),edof_export_fields:t.z.string().optional().or(t.z.literal("")),competence_domains:t.z.string().optional().or(t.z.literal("")),prerequisites:t.z.string().optional().or(t.z.literal("")),capacity_max:t.z.string().optional().or(t.z.literal("")),age_min:t.z.string().optional().or(t.z.literal("")),age_max:t.z.string().optional().or(t.z.literal("")),certification_issued:t.z.boolean().default(!1),is_active:t.z.boolean().default(!0)}),n=t.z.object({formation_id:t.z.string().min(1,"La formation est requise"),name:t.z.string().min(1,"Le nom est requis").max(200,"Le nom est trop long"),code:t.z.string().optional().or(t.z.literal("")),start_date:t.z.string().min(1,"La date de début est requise"),end_date:t.z.string().min(1,"La date de fin est requise"),start_time:t.z.string().optional().or(t.z.literal("")),end_time:t.z.string().optional().or(t.z.literal("")),location:t.z.string().optional().or(t.z.literal("")),capacity_max:t.z.string().optional().or(t.z.literal("")).refine(e=>{if(!e)return!0;let t=parseInt(e);return!isNaN(t)&&t>0},"La capacité maximale doit être un nombre entier positif"),currency:t.z.string().default("XOF"),status:t.z.enum(["planned","ongoing","completed","cancelled"]).default("planned"),teacher_id:t.z.string().optional().or(t.z.literal("")),manager1_id:t.z.string().optional().or(t.z.literal("")),manager2_id:t.z.string().optional().or(t.z.literal("")),inter_entreprise:t.z.boolean().default(!0),sous_traitance:t.z.boolean().default(!1),timezone:t.z.string().default("Europe/Paris"),program_ids:t.z.array(t.z.string()).default([])}).refine(e=>!e.start_date||!e.end_date||new Date(e.end_date)>=new Date(e.start_date),{message:"La date de fin doit être postérieure à la date de début",path:["end_date"]}),o=t.z.object({student_id:t.z.string().min(1,"L'étudiant est requis"),session_id:t.z.string().optional().or(t.z.literal("")),subject:t.z.string().min(1,"Le sujet est requis").max(200,"Le sujet est trop long"),assessment_type:t.z.enum(["pre_formation","hot","cold","manager","instructor","funder","quiz","exam","project","other"]).default("quiz"),score:t.z.string().min(1,"La note est requise").refine(e=>{let t=parseFloat(e);return!isNaN(t)&&t>=0},"La note doit être un nombre valide"),max_score:t.z.string().optional().or(t.z.literal("")).refine(e=>{if(!e)return!0;let t=parseFloat(e);return!isNaN(t)&&t>0},"La note maximale doit être un nombre valide supérieur à 0"),notes:t.z.string().optional().or(t.z.literal("")),graded_at:t.z.string().min(1,"La date d'évaluation est requise"),coefficient:t.z.string().optional().or(t.z.literal("")).refine(e=>{if(!e)return!0;let t=parseFloat(e);return!isNaN(t)&&t>0},"Le coefficient doit être un nombre valide supérieur à 0"),is_makeup:t.z.boolean().optional().default(!1),original_grade_id:t.z.string().optional().or(t.z.literal("")),appreciation:t.z.string().optional().or(t.z.literal("")),term_period:t.z.enum(["Q1","Q2","Q3","Q4","S1","S2","T1","T2","T3"]).optional().or(t.z.literal("")),academic_year_id:t.z.string().optional().or(t.z.literal(""))}).refine(e=>!e.max_score||!e.score||parseFloat(e.score)<=parseFloat(e.max_score),{message:"La note ne peut pas être supérieure à la note maximale",path:["score"]}),l=t.z.object({student_id:t.z.string().min(1,"L'étudiant est requis"),document_type:t.z.enum(["quote","invoice"]).default("invoice"),invoice_number:t.z.string().optional().or(t.z.literal("")),type:t.z.enum(["tuition","registration","other"]).default("tuition"),issue_date:t.z.string().min(1,"La date d'émission est requise"),due_date:t.z.string().min(1,"La date d'échéance est requise"),amount:t.z.string().min(1,"Le montant est requis").refine(e=>{let t=parseFloat(e);return!isNaN(t)&&t>=0},"Le montant doit être un nombre valide supérieur ou égal à 0"),tax_amount:t.z.string().optional().or(t.z.literal("")).refine(e=>{if(!e)return!0;let t=parseFloat(e);return!isNaN(t)&&t>=0},"Le montant de la taxe doit être un nombre valide supérieur ou égal à 0"),currency:t.z.string().default("XOF"),status:t.z.enum(["draft","sent","partial","paid","overdue","cancelled"]).default("draft"),notes:t.z.string().optional().or(t.z.literal("")),enrollment_id:t.z.string().optional().or(t.z.literal(""))}).refine(e=>!e.issue_date||!e.due_date||new Date(e.due_date)>=new Date(e.issue_date),{message:"La date d'échéance doit être postérieure à la date d'émission",path:["due_date"]});t.z.object({invoice_id:t.z.string().min(1,"La facture est requise"),student_id:t.z.string().min(1,"L'étudiant est requis"),amount:t.z.string().min(1,"Le montant est requis").refine(e=>{let t=parseFloat(e);return!isNaN(t)&&t>0},"Le montant doit être un nombre valide supérieur à 0"),currency:t.z.string().default("XOF"),payment_method:t.z.enum(["cash","mobile_money","card","bank_transfer"]).default("cash"),payment_provider:t.z.enum(["mtn","orange","airtel","wave"]).optional().or(t.z.literal("")),transaction_id:t.z.string().optional().or(t.z.literal("")),paid_at:t.z.string().optional().or(t.z.literal("")),notes:t.z.string().optional().or(t.z.literal(""))});let s=t.z.object({student_id:t.z.string().min(1,"L'étudiant est requis"),session_id:t.z.string().min(1,"La session est requise"),enrollment_date:t.z.string().min(1,"La date d'inscription est requise"),status:t.z.enum(["pending","confirmed","completed","cancelled","failed"]).default("confirmed"),payment_status:t.z.enum(["pending","partial","paid","overdue"]).default("pending"),total_amount:t.z.string().optional().or(t.z.literal("")).refine(e=>{if(!e)return!0;let t=parseFloat(e);return!isNaN(t)&&t>=0},"Le montant total doit être un nombre valide supérieur ou égal à 0"),paid_amount:t.z.string().optional().or(t.z.literal("")).refine(e=>{if(!e)return!0;let t=parseFloat(e);return!isNaN(t)&&t>=0},"Le montant payé doit être un nombre valide supérieur ou égal à 0")}).refine(e=>{if(e.total_amount&&e.paid_amount){let t=parseFloat(e.total_amount),i=parseFloat(e.paid_amount);if(!isNaN(t)&&!isNaN(i)&&i>t)return!1}return!0},{message:"Le montant payé ne peut pas dépasser le montant total",path:["paid_amount"]});e.s(["enrollmentSchema",0,s,"evaluationSchema",0,o,"formationSchema",0,a,"invoiceSchema",0,l,"programSchema",0,r,"sessionSchema",0,n,"studentSchema",0,i])},890538,e=>{"use strict";var t=e.i(843476),i=e.i(271645);e.i(882205);var r=e.i(846932),a=e.i(88653),n=e.i(664659),o=e.i(647163);let l=i.createContext({openItems:[],toggleItem:()=>{}}),s=({type:e="single",defaultValue:r,className:a,children:n})=>{let[o,s]=i.useState(Array.isArray(r)?r:r?[r]:[]);return(0,t.jsx)(l.Provider,{value:{openItems:o,toggleItem:t=>{s(i=>"single"===e?i.includes(t)?[]:[t]:i.includes(t)?i.filter(e=>e!==t):[...i,t])}},children:(0,t.jsx)("div",{className:a,children:n})})},d=({value:e,className:r,children:a})=>(0,t.jsx)("div",{className:(0,o.cn)("border-b border-gray-100 last:border-0",r),children:i.Children.map(a,t=>i.isValidElement(t)?i.cloneElement(t,{value:e}):t)}),u=({className:e,children:r,value:a})=>{let{openItems:s,toggleItem:d}=i.useContext(l),u=!!a&&s.includes(a);return(0,t.jsxs)("button",{type:"button",onClick:()=>a&&d(a),className:(0,o.cn)("flex flex-1 items-center justify-between py-4 w-full font-medium transition-all hover:text-brand-blue text-left",u?"text-brand-blue":"text-gray-700",e),children:[r,(0,t.jsx)(n.ChevronDown,{className:(0,o.cn)("h-4 w-4 shrink-0 transition-transform duration-200 text-gray-400",u&&"rotate-180 text-brand-blue")})]})},p=({className:e,children:n,value:s})=>{let{openItems:d}=i.useContext(l),u=!!s&&d.includes(s);return(0,t.jsx)(a.AnimatePresence,{initial:!1,children:u&&(0,t.jsx)(r.motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2,ease:"easeInOut"},className:"overflow-hidden",children:(0,t.jsx)("div",{className:(0,o.cn)("pb-4 pt-0 text-sm text-gray-600",e),children:n})})})};e.s(["Accordion",()=>s,"AccordionContent",()=>p,"AccordionItem",()=>d,"AccordionTrigger",()=>u])},48503,e=>{e.v(e=>Promise.resolve().then(()=>e(915833)))},870653,e=>{e.v(t=>Promise.all(["static/chunks/e551d4a510c7c3c6.js"].map(t=>e.l(t))).then(()=>t(424154)))},195111,e=>{e.v(t=>Promise.all(["static/chunks/9fc253a1d558cb4a.js"].map(t=>e.l(t))).then(()=>t(38201)))}]);