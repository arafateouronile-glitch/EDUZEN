(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,265780,e=>{"use strict";var s=e.i(843476),t=e.i(266027),r=e.i(325715),a=e.i(920755),l=e.i(970065),n=e.i(284614),i=e.i(87316),d=e.i(191741),c=e.i(810980),m=e.i(561659),o=e.i(522016);function x(){let{user:e}=(0,r.useAuth)(),x=(0,a.createClient)(),{data:h}=(0,t.useQuery)({queryKey:["children",e?.id],queryFn:async()=>{if(!e?.id||e?.role!=="parent")return[];let{data:s}=await x.from("guardians").select("id").eq("user_id",e.id);if(!s||0===s.length)return[];let{data:t}=await x.from("student_guardians").select("student_id").in("guardian_id",s.map(e=>e.id));if(!t||0===t.length)return[];let{data:r}=await x.from("students").select("*, classes(name)").in("id",t.map(e=>e.student_id).filter(e=>null!==e)).eq("status","active");return r||[]},enabled:!!e?.id&&e?.role==="parent"});return e?.role!=="parent"?(0,s.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"Accès réservé aux parents"}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Mes enfants"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Gérez les informations de vos enfants"})]}),h&&h.length>0?(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(e=>(0,s.jsxs)(l.Card,{className:"hover:shadow-lg transition-shadow",children:[(0,s.jsx)(l.CardHeader,{children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[e.photo_url?(0,s.jsx)("img",{src:e.photo_url,alt:`${e.first_name} ${e.last_name}`,className:"h-20 w-20 rounded-full object-cover"}):(0,s.jsxs)("div",{className:"h-20 w-20 rounded-full bg-primary text-white flex items-center justify-center text-2xl font-semibold",children:[e.first_name.charAt(0),e.last_name.charAt(0)]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)(l.CardTitle,{className:"text-lg",children:[e.first_name," ",e.last_name]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:e.classes?.name||"Non assigné"})]})]})}),(0,s.jsxs)(l.CardContent,{children:[(0,s.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["N° étudiant: ",(0,s.jsx)("span",{className:"font-medium",children:e.student_number})]}),e.email&&(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Email: ",(0,s.jsx)("span",{className:"font-medium",children:e.email})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-4",children:[(0,s.jsxs)(o.default,{href:`/portal/children/${e.id}/attendance`,className:"flex flex-col items-center p-3 border rounded-lg hover:bg-gray-50 transition-colors",children:[(0,s.jsx)(d.ClipboardList,{className:"h-5 w-5 text-primary mb-1"}),(0,s.jsx)("span",{className:"text-xs text-center",children:"Présences"})]}),(0,s.jsxs)(o.default,{href:`/portal/children/${e.id}/grades`,className:"flex flex-col items-center p-3 border rounded-lg hover:bg-gray-50 transition-colors",children:[(0,s.jsx)(c.BookOpen,{className:"h-5 w-5 text-primary mb-1"}),(0,s.jsx)("span",{className:"text-xs text-center",children:"Notes"})]}),(0,s.jsxs)(o.default,{href:`/portal/children/${e.id}/schedule`,className:"flex flex-col items-center p-3 border rounded-lg hover:bg-gray-50 transition-colors",children:[(0,s.jsx)(i.Calendar,{className:"h-5 w-5 text-primary mb-1"}),(0,s.jsx)("span",{className:"text-xs text-center",children:"Emploi du temps"})]}),(0,s.jsxs)(o.default,{href:`/portal/children/${e.id}/payments`,className:"flex flex-col items-center p-3 border rounded-lg hover:bg-gray-50 transition-colors",children:[(0,s.jsx)(m.CreditCard,{className:"h-5 w-5 text-primary mb-1"}),(0,s.jsx)("span",{className:"text-xs text-center",children:"Paiements"})]})]})]})]},e.id))}):(0,s.jsx)(l.Card,{children:(0,s.jsxs)(l.CardContent,{className:"text-center py-12 text-muted-foreground",children:[(0,s.jsx)(n.User,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,s.jsx)("p",{children:"Aucun enfant enregistré"})]})})]})}e.s(["default",()=>x])}]);