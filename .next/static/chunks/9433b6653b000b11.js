(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,107233,e=>{"use strict";let t=(0,e.i(475254).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],107233)},503116,e=>{"use strict";let t=(0,e.i(475254).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],503116)},286536,e=>{"use strict";let t=(0,e.i(475254).default)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],286536)},738308,e=>{"use strict";let t=(0,e.i(475254).default)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>t],738308)},62870,e=>{"use strict";var t=e.i(843476),i=e.i(271645),s=e.i(647163);e.i(882205);var a=e.i(846932),r=e.i(88653),l=e.i(664659),n=e.i(898791);i.forwardRef(({className:e,label:o,error:c,helperText:d,variant:u="default",leftIcon:m,id:p,options:h,placeholder:g,value:x,...f},_)=>{let[v,y]=i.useState(!1),[j,w]=i.useState(!1),b=p||`select-${Math.random().toString(36).substr(2,9)}`,S=(0,s.cn)("flex w-full rounded-lg font-medium transition-all duration-300","appearance-none cursor-pointer","focus:outline-none focus:ring-2 focus:ring-primary/20","disabled:cursor-not-allowed disabled:opacity-50",{"border-2 border-input bg-background px-4 py-3 pr-11":"default"===u,"focus:border-primary focus:bg-white":"default"===u&&!c,"border-destructive focus:border-destructive focus:ring-destructive/20":c,"border-2 border-input bg-transparent px-4 py-3 pr-11":"outlined"===u,"focus:border-primary focus:shadow-md focus:shadow-primary/10":"outlined"===u&&!c,"border-0 border-b-2 border-input bg-muted/50 px-4 py-3 pr-11 rounded-b-none":"filled"===u,"focus:bg-muted focus:border-primary":"filled"===u&&!c,"focus:border-destructive bg-destructive/5":"filled"===u&&c},m&&"pl-11",e);return(0,t.jsxs)("div",{className:"w-full space-y-1.5",children:[o&&(0,t.jsxs)(a.motion.label,{htmlFor:b,initial:!1,animate:{color:c?"#EF4444":v?"rgb(37, 99, 235)":"rgb(107, 114, 128)"},className:(0,s.cn)("block text-sm font-medium transition-colors duration-200",c&&"text-destructive"),children:[o,f.required&&(0,t.jsx)("span",{className:"text-destructive ml-1",children:"*"})]}),(0,t.jsxs)("div",{className:"relative",children:[m&&(0,t.jsx)("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground pointer-events-none z-10",children:m}),(0,t.jsxs)(a.motion.select,{ref:_,id:b,value:x,...f,onFocus:e=>{y(!0),f.onFocus?.(e)},onBlur:e=>{y(!1),w(!1),f.onBlur?.(e)},onMouseDown:()=>w(!j),className:S,animate:{scale:v?1.01:1,borderColor:c?"#EF4444":v?"rgb(37, 99, 235)":"rgb(226, 232, 240)"},transition:{duration:.2},children:[g&&(0,t.jsx)("option",{value:"",disabled:!0,children:g}),(h||[]).map(e=>(0,t.jsx)("option",{value:e.value,disabled:e.disabled,children:e.label},e.value))]}),(0,t.jsx)(a.motion.div,{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-muted-foreground",animate:{rotate:180*!!j},transition:{duration:.2},children:(0,t.jsx)(l.ChevronDown,{className:"h-5 w-5"})}),c&&(0,t.jsx)(a.motion.div,{className:"absolute right-11 top-1/2 -translate-y-1/2 pointer-events-none",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:500,damping:30},children:(0,t.jsx)(n.AlertCircle,{className:"h-5 w-5 text-destructive"})})]}),(0,t.jsx)(r.AnimatePresence,{mode:"wait",children:(c||d)&&(0,t.jsx)(a.motion.p,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},transition:{duration:.2},className:(0,s.cn)("text-xs transition-colors duration-200",c?"text-destructive":"text-muted-foreground"),children:c||d})})]})}).displayName="SelectNative";let o=i.createContext({}),c=i.forwardRef(({value:e,onValueChange:s,children:a},r)=>{let[l,n]=i.useState(!1);return(0,t.jsx)(o.Provider,{value:{value:e,onValueChange:s,open:l,setOpen:n},children:(0,t.jsx)("div",{className:"relative",ref:r,children:a})})});c.displayName="SelectRoot";let d=i.forwardRef(({children:e,className:a,...r},n)=>{let{open:c,setOpen:d}=i.useContext(o);return(0,t.jsxs)("button",{ref:n,type:"button",className:(0,s.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),onClick:()=>d?.(!c),...r,children:[e,(0,t.jsx)(l.ChevronDown,{className:(0,s.cn)("h-4 w-4 opacity-50 transition-transform",c&&"rotate-180")})]})});d.displayName="SelectTrigger";let u=i.forwardRef(({placeholder:e},s)=>{let{value:a}=i.useContext(o);return(0,t.jsx)("span",{ref:s,children:a||e})});u.displayName="SelectValue";let m=i.forwardRef(({children:e},s)=>{let a=i.useContext(o);return a?.open&&e?(0,t.jsx)("div",{ref:s,className:"absolute top-full left-0 z-50 mt-1 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md",children:(0,t.jsx)("div",{className:"p-1",children:e})}):null});m.displayName="SelectContent";let p=i.forwardRef(({value:e,children:a,className:r,...l},n)=>{let{value:c,onValueChange:d,setOpen:u}=i.useContext(o),m=c===e;return(0,t.jsx)("div",{ref:n,role:"option","aria-selected":m,className:(0,s.cn)("relative flex w-full cursor-pointer select-none items-center rounded-sm py-1.5 px-2 text-sm outline-none hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground",m&&"bg-accent text-accent-foreground",r),onClick:()=>{d?.(e),u?.(!1)},...l,children:a})});p.displayName="SelectItem",e.s(["Select",0,c,"SelectContent",0,m,"SelectItem",0,p,"SelectRoot",0,c,"SelectTrigger",0,d,"SelectValue",0,u])},240078,e=>{"use strict";var t=e.i(920755);let i=new class{supabase;constructor(e){this.supabase=e||(0,t.createClient)()}async getPolicies(e,t){let i=this.supabase.from("security_policies").select("*, approved_by_user:users!security_policies_approved_by_fkey(id, full_name, email)").or(`organization_id.eq.${e},organization_id.is.null`);t?.status&&(i=i.eq("status",t.status)),t?.category&&(i=i.eq("category",t.category));let{data:s,error:a}=await i.order("created_at",{ascending:!1});if(a)throw a;return s}async createPolicy(e){let{data:t,error:i}=await this.supabase.from("security_policies").insert(e).select().single();if(i)throw i;return t}async updatePolicy(e,t){let{data:i,error:s}=await this.supabase.from("security_policies").update(t).eq("id",e).select().single();if(s)throw s;return i}async approvePolicy(e,t){return this.updatePolicy(e,{approval_status:"approved",approved_by:t,approved_at:new Date().toISOString(),status:"active"})}async getControls(e,t){let i=this.supabase.from("security_controls").select("*").eq("organization_id",e);t?.framework&&(i=i.eq("framework",t.framework)),t?.status&&(i=i.eq("implementation_status",t.status));let{data:s,error:a}=await i.order("control_id",{ascending:!0});if(a)throw a;return s}async createControl(e){let{data:t,error:i}=await this.supabase.from("security_controls").insert(e).select().single();if(i)throw i;return t}async updateControl(e,t){let{data:i,error:s}=await this.supabase.from("security_controls").update(t).eq("id",e).select().single();if(s)throw s;return i}async getControlComplianceStats(e,t){let i=await this.getControls(e,{framework:t}),s={total:i.length,implemented:i.filter(e=>"implemented"===e.implementation_status).length,partial:i.filter(e=>"partial"===e.implementation_status).length,not_implemented:i.filter(e=>"not_implemented"===e.implementation_status).length,compliant:i.filter(e=>"compliant"===e.compliance_status).length,partially_compliant:i.filter(e=>"partially_compliant"===e.compliance_status).length,non_compliant:i.filter(e=>"non_compliant"===e.compliance_status).length,compliance_percentage:0};return s.total>0&&(s.compliance_percentage=s.compliant/s.total*100),s}async getEvidence(e){let{data:t,error:i}=await this.supabase.from("compliance_evidence").select("*, collected_by_user:users!compliance_evidence_collected_by_fkey(id, full_name, email), verified_by_user:users!compliance_evidence_verified_by_fkey(id, full_name, email)").eq("control_id",e).order("collected_at",{ascending:!1});if(i)throw i;return t}async createEvidence(e){let{data:t,error:i}=await this.supabase.from("compliance_evidence").insert(e).select().single();if(i)throw i;return t}async verifyEvidence(e,t){let{data:i,error:s}=await this.supabase.from("compliance_evidence").update({verified_by:t,verified_at:new Date().toISOString()}).eq("id",e).select().single();if(s)throw s;return i}async getRisks(e,t){let i=this.supabase.from("risk_assessments").select("*, owner:users(id, full_name, email)").eq("organization_id",e);t?.treatmentStatus&&(i=i.eq("treatment_status",t.treatmentStatus)),t?.riskLevel&&(i=i.eq("risk_level",t.riskLevel));let{data:s,error:a}=await i.order("risk_level",{ascending:!1});if(a){if("PGRST200"===a.code||404===a.status||400===a.status||a.message?.includes("does not exist"))return[];throw a}return s||[]}async createRisk(e){let{data:t,error:i}=await this.supabase.from("risk_assessments").insert(e).select().single();if(i)throw i;return t}async updateRisk(e,t){let{data:i,error:s}=await this.supabase.from("risk_assessments").update(t).eq("id",e).select().single();if(s)throw s;return i}async getCriticalRisks(e){return this.getRisks(e,{riskLevel:"critical",treatmentStatus:"open"})}async getIncidents(e,t){let i=this.supabase.from("security_incidents").select("*, reported_by_user:users(id, full_name, email), assigned_to_user:users(id, full_name, email)").eq("organization_id",e);t?.status&&(i=i.eq("status",t.status)),t?.severity&&(i=i.eq("severity",t.severity));let{data:s,error:a}=await i.order("created_at",{ascending:!1});if(a){if("PGRST200"===a.code||404===a.status||400===a.status||a.message?.includes("does not exist"))return[];throw a}return s||[]}async createIncident(e){let t=`INC-${Date.now()}-${Math.random().toString(36).substr(2,9).toUpperCase()}`,{data:i,error:s}=await this.supabase.from("security_incidents").insert({...e,incident_id:t}).select().single();if(s)throw s;return i}async updateIncident(e,t){let{data:i,error:s}=await this.supabase.from("security_incidents").update(t).eq("id",e).select().single();if(s)throw s;return i}async resolveIncident(e,t,i){return this.updateIncident(e,{status:"resolved",resolution:t,root_cause:i,resolved_at:new Date().toISOString()})}async getAudits(e,t){let i=this.supabase.from("security_audits").select("*").eq("organization_id",e);t?.status&&(i=i.eq("status",t.status)),t?.framework&&(i=i.eq("framework",t.framework));let{data:s,error:a}=await i.order("start_date",{ascending:!1});if(a)throw a;return s}async createAudit(e){let t=`AUDIT-${Date.now()}-${Math.random().toString(36).substr(2,9).toUpperCase()}`,{data:i,error:s}=await this.supabase.from("security_audits").insert({...e,audit_id:t}).select().single();if(s)throw s;return i}async getAuditFindings(e){let{data:t,error:i}=await this.supabase.from("audit_findings").select("*, assigned_to_user:users!audit_findings_assigned_to_fkey(id, full_name, email), control:security_controls(*)").eq("audit_id",e).order("severity",{ascending:!1});if(i)throw i;return t}async createAuditFinding(e){let{data:t,error:i}=await this.supabase.from("audit_findings").insert(e).select().single();if(i)throw i;return t}async getTrainings(e){let{data:t,error:i}=await this.supabase.from("security_training").select("*").eq("organization_id",e).eq("is_active",!0).order("created_at",{ascending:!1});if(i)throw i;return t}async getTrainingRecords(e){let{data:t,error:i}=await this.supabase.from("security_training_records").select("*, training:security_training(*)").eq("user_id",e).order("created_at",{ascending:!1});if(i)throw i;return t}async createTrainingRecord(e){let{data:t,error:i}=await this.supabase.from("security_training_records").insert(e).select().single();if(i)throw i;return t}async completeTraining(e,t){let{data:i,error:s}=await this.supabase.from("security_training_records").update({status:"completed",completion_percentage:100,score:t,completed_at:new Date().toISOString()}).eq("id",e).select().single();if(s)throw s;return i}async logAccess(e){let{data:t,error:i}=await this.supabase.from("access_logs").insert(e).select().single();if(i)throw i;return t}async getAccessLogs(e,t){let i=this.supabase.from("access_logs").select("*, user:users(id, full_name, email)").eq("organization_id",e);t?.userId&&(i=i.eq("user_id",t.userId)),t?.action&&(i=i.eq("action",t.action)),t?.startDate&&(i=i.gte("created_at",t.startDate.toISOString())),t?.endDate&&(i=i.lte("created_at",t.endDate.toISOString()));let{data:s,error:a}=await i.order("created_at",{ascending:!1}).limit(1e3);if(a)throw a;return s}async generateComplianceReport(e,t){await this.getControls(e,{framework:t});let i=await this.getRisks(e),s=await this.getIncidents(e),a=await this.getAudits(e,{framework:t}),r=await this.getControlComplianceStats(e,t),l=i.filter(e=>"critical"===e.risk_level&&"open"===e.treatment_status),n=s.filter(e=>"resolved"!==e.status&&"closed"!==e.status),o=a.filter(e=>{let t=new Date(e.start_date),i=new Date;return i.setMonth(i.getMonth()-6),t>=i});return{framework:t||"all",generated_at:new Date().toISOString(),controls:{total:r.total,compliance_percentage:r.compliance_percentage,implemented:r.implemented,partial:r.partial,not_implemented:r.not_implemented,compliant:r.compliant,partially_compliant:r.partially_compliant,non_compliant:r.non_compliant},risks:{total:i.length,critical:l.length,high:i.filter(e=>"high"===e.risk_level&&"open"===e.treatment_status).length,medium:i.filter(e=>"medium"===e.risk_level&&"open"===e.treatment_status).length,low:i.filter(e=>"low"===e.risk_level&&"open"===e.treatment_status).length,mitigated:i.filter(e=>"mitigated"===e.treatment_status).length},incidents:{total:s.length,open:n.length,critical:s.filter(e=>"critical"===e.severity&&"resolved"!==e.status).length,data_breaches:s.filter(e=>e.data_breach).length},audits:{total:a.length,recent:o.length,average_score:a.length>0?a.reduce((e,t)=>e+(t.overall_score||0),0)/a.length:0,average_compliance:a.length>0?a.reduce((e,t)=>e+(t.compliance_percentage||0),0)/a.length:0},recommendations:this.generateRecommendations(r,l,n)}}generateRecommendations(e,t,i){let s=[];return e.compliance_percentage<80&&s.push(`Le pourcentage de conformit\xe9 est de ${e.compliance_percentage.toFixed(1)}%. Il est recommand\xe9 d'am\xe9liorer l'impl\xe9mentation des contr\xf4les.`),t.length>0&&s.push(`${t.length} risque(s) critique(s) ouvert(s) n\xe9cessitent une attention imm\xe9diate.`),i.filter(e=>"critical"===e.severity).length>0&&s.push("Des incidents critiques sont en cours. Une intervention immédiate est requise."),e.not_implemented>0&&s.push(`${e.not_implemented} contr\xf4le(s) ne sont pas encore impl\xe9ment\xe9s.`),0===s.length&&s.push("Aucune recommandation urgente. La conformité est bonne."),s}};e.s(["complianceService",0,i])},745540,e=>{"use strict";var t=e.i(843476),i=e.i(271645),s=e.i(266027),a=e.i(954616),r=e.i(912598),l=e.i(325715),n=e.i(240078),o=e.i(970065),c=e.i(167881),d=e.i(23750),u=e.i(10708),m=e.i(184762),p=e.i(994179),h=e.i(630374),g=e.i(62870),x=e.i(98919),f=e.i(107233),_=e.i(555436),v=e.i(465286),y=e.i(738308),j=e.i(503116),w=e.i(859607),b=e.i(178583),S=e.i(286536),C=e.i(522016);function N(){let{user:e}=(0,l.useAuth)(),N=(0,r.useQueryClient)(),[k,I]=(0,i.useState)(""),[q,D]=(0,i.useState)("all"),[T,R]=(0,i.useState)("all"),[P,z]=(0,i.useState)(!1),[A,L]=(0,i.useState)({control_id:"",framework:"iso27001",title:"",description:"",category:"",implementation_status:"not_implemented",compliance_status:"non_compliant",risk_level:"medium"}),{data:O}=(0,s.useQuery)({queryKey:["security-controls",e?.organization_id,q,T],queryFn:()=>n.complianceService.getControls(e?.organization_id||"",{framework:"all"===q?void 0:q}),enabled:!!e?.organization_id}),V=O?.filter(e=>("all"===T||e.implementation_status===T)&&(!k||!!e.title.toLowerCase().includes(k.toLowerCase())||!!e.control_id.toLowerCase().includes(k.toLowerCase()))),B=(0,a.useMutation)({mutationFn:()=>n.complianceService.createControl({...A,organization_id:e?.organization_id||""}),onSuccess:()=>{N.invalidateQueries({queryKey:["security-controls"]}),z(!1),L({control_id:"",framework:"iso27001",title:"",description:"",category:"",implementation_status:"not_implemented",compliance_status:"non_compliant",risk_level:"medium"})}}),F={implemented:"bg-green-100 text-green-800",partial:"bg-yellow-100 text-yellow-800",not_implemented:"bg-red-100 text-red-800"},M={compliant:"bg-blue-100 text-blue-800",partially_compliant:"bg-yellow-100 text-yellow-800",non_compliant:"bg-red-100 text-red-800"},$={low:"bg-gray-100 text-gray-800",medium:"bg-yellow-100 text-yellow-800",high:"bg-orange-100 text-orange-800",critical:"bg-red-100 text-red-800"};return(0,t.jsxs)("div",{className:"container mx-auto py-8 px-4 max-w-7xl",children:[(0,t.jsxs)("div",{className:"mb-8 flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[(0,t.jsx)(x.Shield,{className:"h-8 w-8"}),"Contrôles de sécurité"]}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Gestion des contrôles ISO 27001, SOC 2, GDPR et autres frameworks"})]}),(0,t.jsxs)(h.Dialog,{open:P,onOpenChange:z,children:[(0,t.jsx)(h.DialogTrigger,{asChild:!0,children:(0,t.jsxs)(c.Button,{children:[(0,t.jsx)(f.Plus,{className:"h-4 w-4 mr-2"}),"Nouveau contrôle"]})}),(0,t.jsxs)(h.DialogContent,{className:"max-w-2xl",children:[(0,t.jsxs)(h.DialogHeader,{children:[(0,t.jsx)(h.DialogTitle,{children:"Créer un nouveau contrôle"}),(0,t.jsx)(h.DialogDescription,{children:"Ajoutez un contrôle de sécurité pour votre organisation"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(u.Label,{children:"ID du contrôle"}),(0,t.jsx)(d.Input,{value:A.control_id,onChange:e=>L({...A,control_id:e.target.value}),placeholder:"Ex: A.9.2.1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(u.Label,{children:"Framework"}),(0,t.jsxs)(g.Select,{value:A.framework,onValueChange:e=>L({...A,framework:e}),children:[(0,t.jsx)(g.SelectTrigger,{children:(0,t.jsx)(g.SelectValue,{})}),(0,t.jsxs)(g.SelectContent,{children:[(0,t.jsx)(g.SelectItem,{value:"iso27001",children:"ISO 27001"}),(0,t.jsx)(g.SelectItem,{value:"soc2",children:"SOC 2"}),(0,t.jsx)(g.SelectItem,{value:"gdpr",children:"GDPR"}),(0,t.jsx)(g.SelectItem,{value:"nist",children:"NIST"}),(0,t.jsx)(g.SelectItem,{value:"custom",children:"Personnalisé"})]})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(u.Label,{children:"Titre"}),(0,t.jsx)(d.Input,{value:A.title,onChange:e=>L({...A,title:e.target.value}),placeholder:"Titre du contrôle"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(u.Label,{children:"Description"}),(0,t.jsx)(m.Textarea,{value:A.description,onChange:e=>L({...A,description:e.target.value}),placeholder:"Description du contrôle",rows:3})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(u.Label,{children:"Statut d'implémentation"}),(0,t.jsxs)(g.Select,{value:A.implementation_status,onValueChange:e=>L({...A,implementation_status:e}),children:[(0,t.jsx)(g.SelectTrigger,{children:(0,t.jsx)(g.SelectValue,{})}),(0,t.jsxs)(g.SelectContent,{children:[(0,t.jsx)(g.SelectItem,{value:"not_implemented",children:"Non implémenté"}),(0,t.jsx)(g.SelectItem,{value:"partial",children:"Partiel"}),(0,t.jsx)(g.SelectItem,{value:"implemented",children:"Implémenté"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(u.Label,{children:"Statut de conformité"}),(0,t.jsxs)(g.Select,{value:A.compliance_status,onValueChange:e=>L({...A,compliance_status:e}),children:[(0,t.jsx)(g.SelectTrigger,{children:(0,t.jsx)(g.SelectValue,{})}),(0,t.jsxs)(g.SelectContent,{children:[(0,t.jsx)(g.SelectItem,{value:"non_compliant",children:"Non conforme"}),(0,t.jsx)(g.SelectItem,{value:"partially_compliant",children:"Partiellement conforme"}),(0,t.jsx)(g.SelectItem,{value:"compliant",children:"Conforme"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(u.Label,{children:"Niveau de risque"}),(0,t.jsxs)(g.Select,{value:A.risk_level,onValueChange:e=>L({...A,risk_level:e}),children:[(0,t.jsx)(g.SelectTrigger,{children:(0,t.jsx)(g.SelectValue,{})}),(0,t.jsxs)(g.SelectContent,{children:[(0,t.jsx)(g.SelectItem,{value:"low",children:"Faible"}),(0,t.jsx)(g.SelectItem,{value:"medium",children:"Moyen"}),(0,t.jsx)(g.SelectItem,{value:"high",children:"Élevé"}),(0,t.jsx)(g.SelectItem,{value:"critical",children:"Critique"})]})]})]})]}),(0,t.jsx)(c.Button,{onClick:()=>B.mutate(),disabled:!A.control_id||!A.title,className:"w-full",children:"Créer le contrôle"})]})]})]})]}),(0,t.jsxs)("div",{className:"mb-6 flex gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 relative",children:[(0,t.jsx)(_.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),(0,t.jsx)(d.Input,{placeholder:"Rechercher un contrôle...",value:k,onChange:e=>I(e.target.value),className:"pl-10"})]}),(0,t.jsxs)(g.Select,{value:q,onValueChange:D,children:[(0,t.jsx)(g.SelectTrigger,{className:"w-40",children:(0,t.jsx)(g.SelectValue,{})}),(0,t.jsxs)(g.SelectContent,{children:[(0,t.jsx)(g.SelectItem,{value:"all",children:"Tous les frameworks"}),(0,t.jsx)(g.SelectItem,{value:"iso27001",children:"ISO 27001"}),(0,t.jsx)(g.SelectItem,{value:"soc2",children:"SOC 2"}),(0,t.jsx)(g.SelectItem,{value:"gdpr",children:"GDPR"}),(0,t.jsx)(g.SelectItem,{value:"nist",children:"NIST"})]})]}),(0,t.jsxs)(g.Select,{value:T,onValueChange:R,children:[(0,t.jsx)(g.SelectTrigger,{className:"w-48",children:(0,t.jsx)(g.SelectValue,{})}),(0,t.jsxs)(g.SelectContent,{children:[(0,t.jsx)(g.SelectItem,{value:"all",children:"Tous les statuts"}),(0,t.jsx)(g.SelectItem,{value:"implemented",children:"Implémenté"}),(0,t.jsx)(g.SelectItem,{value:"partial",children:"Partiel"}),(0,t.jsx)(g.SelectItem,{value:"not_implemented",children:"Non implémenté"})]})]})]}),V&&V.length>0?(0,t.jsx)("div",{className:"grid grid-cols-1 gap-4",children:V.map(e=>(0,t.jsxs)(o.Card,{children:[(0,t.jsx)(o.CardHeader,{children:(0,t.jsx)("div",{className:"flex items-start justify-between",children:(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(o.CardTitle,{className:"text-lg",children:e.title}),(0,t.jsx)(p.Badge,{variant:"outline",children:e.control_id}),(0,t.jsx)(p.Badge,{children:e.framework.toUpperCase()})]}),e.description&&(0,t.jsx)(o.CardDescription,{className:"mt-2",children:e.description})]})})}),(0,t.jsxs)(o.CardContent,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[(0,t.jsxs)(p.Badge,{className:F[e.implementation_status]||"bg-gray-100 text-gray-800",children:["implemented"===e.implementation_status?(0,t.jsx)(v.CheckCircle2,{className:"h-3 w-3 mr-1"}):"partial"===e.implementation_status?(0,t.jsx)(j.Clock,{className:"h-3 w-3 mr-1"}):(0,t.jsx)(y.XCircle,{className:"h-3 w-3 mr-1"}),"implemented"===e.implementation_status?"Implémenté":"partial"===e.implementation_status?"Partiel":"Non implémenté"]}),(0,t.jsx)(p.Badge,{className:M[e.compliance_status]||"bg-gray-100 text-gray-800",children:"compliant"===e.compliance_status?"Conforme":"partially_compliant"===e.compliance_status?"Partiellement conforme":"Non conforme"}),e.risk_level&&(0,t.jsxs)(p.Badge,{className:$[e.risk_level]||"bg-gray-100 text-gray-800",children:[(0,t.jsx)(w.AlertTriangle,{className:"h-3 w-3 mr-1"}),"Risque ",e.risk_level]}),e.category&&(0,t.jsx)(p.Badge,{variant:"outline",children:e.category})]}),(0,t.jsxs)("div",{className:"mt-4 flex items-center gap-2",children:[(0,t.jsx)(C.default,{href:`/dashboard/compliance/controls/${e.id}`,children:(0,t.jsxs)(c.Button,{variant:"outline",size:"sm",children:[(0,t.jsx)(S.Eye,{className:"h-4 w-4 mr-2"}),"Voir les détails"]})}),e.evidence_required&&(0,t.jsx)(C.default,{href:`/dashboard/compliance/controls/${e.id}/evidence`,children:(0,t.jsxs)(c.Button,{variant:"outline",size:"sm",children:[(0,t.jsx)(b.FileText,{className:"h-4 w-4 mr-2"}),"Preuves"]})})]})]})]},e.id))}):(0,t.jsx)(o.Card,{children:(0,t.jsxs)(o.CardContent,{className:"pt-6 text-center text-muted-foreground",children:["Aucun contrôle trouvé. ",k&&"Essayez une autre recherche."]})})]})}e.s(["default",()=>N])}]);