(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,401693,e=>{"use strict";var s=e.i(843476),a=e.i(271645),t=e.i(266027),i=e.i(325715),n=e.i(845691),r=e.i(920755),d=e.i(970065),l=e.i(167881),c=e.i(994179),o=e.i(127341),m=e.i(954616),u=e.i(912598),x=e.i(23750),h=e.i(10708),p=e.i(184762),g=e.i(625959),j=e.i(6799),_=e.i(373375),b=e.i(463059),v=e.i(356909);function f({studentId:e,organizationId:i,onSuccess:r,onCancel:c}){let o=(0,u.useQueryClient)(),{addToast:f}=(0,j.useToast)(),[y,N]=(0,a.useState)(1),{data:C=[]}=(0,t.useQuery)({queryKey:["disability-types"],queryFn:()=>n.accessibilityService.getDisabilityTypes(),retry:!1}),{data:w}=(0,t.useQuery)({queryKey:["student-need",e],queryFn:()=>n.accessibilityService.getStudentNeedByStudentId(e),retry:!1}),[D,F]=(0,a.useState)({has_disability:w?.has_disability||!1,disability_type_ids:w?.disability_type_ids||[],disability_description:w?.disability_description||"",has_mdph_recognition:w?.has_mdph_recognition||!1,mdph_number:w?.mdph_number||"",mdph_expiry_date:w?.mdph_expiry_date||"",needs_physical_accommodations:w?.needs_physical_accommodations||!1,physical_accommodations_detail:w?.physical_accommodations_detail||"",needs_pedagogical_accommodations:w?.needs_pedagogical_accommodations||!1,pedagogical_accommodations_detail:w?.pedagogical_accommodations_detail||"",needs_exam_accommodations:w?.needs_exam_accommodations||!1,exam_accommodations_detail:w?.exam_accommodations_detail||"",needs_technical_aids:w?.needs_technical_aids||!1,technical_aids_detail:w?.technical_aids_detail||"",external_referent_name:w?.external_referent_name||"",external_referent_contact:w?.external_referent_contact||"",consent_share_info:w?.consent_share_info||!1}),T=(0,m.useMutation)({mutationFn:async()=>{let s={organization_id:i,student_id:e,...D};return w?await n.accessibilityService.updateStudentNeed(w.id,s):await n.accessibilityService.createStudentNeed(s)},onSuccess:()=>{o.invalidateQueries({queryKey:["student-need"]}),o.invalidateQueries({queryKey:["accessibility-needs"]}),f({type:"success",title:"Déclaration enregistrée",description:"Vos besoins spécifiques ont été enregistrés avec succès."}),r?.()},onError:e=>{f({type:"error",title:"Erreur",description:e?.message||"Impossible d'enregistrer la déclaration."})}}),S=(e,s)=>{F(a=>({...a,[e]:s}))},q=e=>{F(s=>{let a=s.disability_type_ids;return a.includes(e)?{...s,disability_type_ids:a.filter(s=>s!==e)}:{...s,disability_type_ids:[...a,e]}})};return(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),T.mutate()},className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"flex items-center",children:Array.from({length:5}).map((e,a)=>(0,s.jsxs)("div",{className:"flex items-center flex-1",children:[(0,s.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${a+1<=y?"bg-brand-blue text-white":"bg-gray-200 text-gray-500"}`,children:a+1}),a<4&&(0,s.jsx)("div",{className:`flex-1 h-1 ${a+1<y?"bg-brand-blue":"bg-gray-200"}`})]},a))}),(0,s.jsxs)("div",{className:"flex justify-between mt-2",children:[(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"Déclaration"}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"Types"}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"Besoins"}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"Référent"}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"Consentement"})]})]})}),1===y&&(0,s.jsxs)(d.Card,{children:[(0,s.jsxs)(d.CardHeader,{children:[(0,s.jsx)(d.CardTitle,{children:"Déclaration de besoins spécifiques"}),(0,s.jsx)(d.CardDescription,{children:"Indiquez si vous avez des besoins spécifiques liés à un handicap"})]}),(0,s.jsxs)(d.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(g.Checkbox,{id:"has_disability",checked:D.has_disability,onCheckedChange:e=>S("has_disability",e)}),(0,s.jsx)("label",{htmlFor:"has_disability",className:"text-sm font-medium",children:"Je déclare une situation de handicap ou des besoins spécifiques"})]}),D.has_disability&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(h.Label,{htmlFor:"disability_description",children:"Description (optionnel)"}),(0,s.jsx)(p.Textarea,{id:"disability_description",placeholder:"Décrivez brièvement votre situation si vous le souhaitez...",rows:4,value:D.disability_description,onChange:e=>S("disability_description",e.target.value)})]}),(0,s.jsxs)("div",{className:"border-t pt-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,s.jsx)(g.Checkbox,{id:"has_mdph_recognition",checked:D.has_mdph_recognition,onCheckedChange:e=>S("has_mdph_recognition",e)}),(0,s.jsx)("label",{htmlFor:"has_mdph_recognition",className:"text-sm font-medium",children:"J'ai une reconnaissance MDPH / RQTH"})]}),D.has_mdph_recognition&&(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 ml-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(h.Label,{htmlFor:"mdph_number",children:"Numéro de dossier MDPH"}),(0,s.jsx)(x.Input,{id:"mdph_number",value:D.mdph_number,onChange:e=>S("mdph_number",e.target.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(h.Label,{htmlFor:"mdph_expiry_date",children:"Date d'expiration"}),(0,s.jsx)(x.Input,{id:"mdph_expiry_date",type:"date",value:D.mdph_expiry_date,onChange:e=>S("mdph_expiry_date",e.target.value)})]})]})]})]})]})]}),2===y&&(0,s.jsxs)(d.Card,{children:[(0,s.jsxs)(d.CardHeader,{children:[(0,s.jsx)(d.CardTitle,{children:"Types de handicap"}),(0,s.jsx)(d.CardDescription,{children:"Sélectionnez le ou les types de handicap qui correspondent à votre situation (optionnel)"})]}),(0,s.jsx)(d.CardContent,{children:(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:C.map(e=>(0,s.jsx)("div",{className:`p-4 border rounded-lg cursor-pointer transition-colors ${D.disability_type_ids.includes(e.id)?"border-brand-blue bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>q(e.id),children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(g.Checkbox,{checked:D.disability_type_ids.includes(e.id),onCheckedChange:()=>q(e.id)}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:e.name_fr}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description})]})]})},e.id))})})]}),3===y&&(0,s.jsxs)(d.Card,{children:[(0,s.jsxs)(d.CardHeader,{children:[(0,s.jsx)(d.CardTitle,{children:"Besoins spécifiques"}),(0,s.jsx)(d.CardDescription,{children:"Indiquez vos besoins pour faciliter votre parcours de formation"})]}),(0,s.jsxs)(d.CardContent,{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(g.Checkbox,{id:"needs_physical_accommodations",checked:D.needs_physical_accommodations,onCheckedChange:e=>S("needs_physical_accommodations",e)}),(0,s.jsx)("label",{htmlFor:"needs_physical_accommodations",className:"text-sm font-medium",children:"Aménagements physiques (accès, mobilité)"})]}),D.needs_physical_accommodations&&(0,s.jsx)(p.Textarea,{placeholder:"Ex: Besoin d'une salle accessible en fauteuil roulant, place de parking réservée...",rows:3,value:D.physical_accommodations_detail,onChange:e=>S("physical_accommodations_detail",e.target.value),className:"ml-6"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(g.Checkbox,{id:"needs_pedagogical_accommodations",checked:D.needs_pedagogical_accommodations,onCheckedChange:e=>S("needs_pedagogical_accommodations",e)}),(0,s.jsx)("label",{htmlFor:"needs_pedagogical_accommodations",className:"text-sm font-medium",children:"Aménagements pédagogiques"})]}),D.needs_pedagogical_accommodations&&(0,s.jsx)(p.Textarea,{placeholder:"Ex: Documents en gros caractères, supports audio, interprète LSF...",rows:3,value:D.pedagogical_accommodations_detail,onChange:e=>S("pedagogical_accommodations_detail",e.target.value),className:"ml-6"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(g.Checkbox,{id:"needs_exam_accommodations",checked:D.needs_exam_accommodations,onCheckedChange:e=>S("needs_exam_accommodations",e)}),(0,s.jsx)("label",{htmlFor:"needs_exam_accommodations",className:"text-sm font-medium",children:"Aménagements pour les examens"})]}),D.needs_exam_accommodations&&(0,s.jsx)(p.Textarea,{placeholder:"Ex: Temps supplémentaire, salle isolée, assistance humaine...",rows:3,value:D.exam_accommodations_detail,onChange:e=>S("exam_accommodations_detail",e.target.value),className:"ml-6"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(g.Checkbox,{id:"needs_technical_aids",checked:D.needs_technical_aids,onCheckedChange:e=>S("needs_technical_aids",e)}),(0,s.jsx)("label",{htmlFor:"needs_technical_aids",className:"text-sm font-medium",children:"Aides techniques / matériel adapté"})]}),D.needs_technical_aids&&(0,s.jsx)(p.Textarea,{placeholder:"Ex: Logiciel de grossissement, clavier braille, ordinateur adapté...",rows:3,value:D.technical_aids_detail,onChange:e=>S("technical_aids_detail",e.target.value),className:"ml-6"})]})]})]}),4===y&&(0,s.jsxs)(d.Card,{children:[(0,s.jsxs)(d.CardHeader,{children:[(0,s.jsx)(d.CardTitle,{children:"Référent externe"}),(0,s.jsx)(d.CardDescription,{children:"Personne à contacter en cas de besoin (médecin, référent MDPH, etc.) - Optionnel"})]}),(0,s.jsxs)(d.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(h.Label,{htmlFor:"external_referent_name",children:"Nom du référent"}),(0,s.jsx)(x.Input,{id:"external_referent_name",placeholder:"Dr. Dupont, Référent MDPH...",value:D.external_referent_name,onChange:e=>S("external_referent_name",e.target.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(h.Label,{htmlFor:"external_referent_contact",children:"Contact (email ou téléphone)"}),(0,s.jsx)(x.Input,{id:"external_referent_contact",placeholder:"contact@exemple.fr ou 01 23 45 67 89",value:D.external_referent_contact,onChange:e=>S("external_referent_contact",e.target.value)})]})]})]}),5===y&&(0,s.jsxs)(d.Card,{children:[(0,s.jsxs)(d.CardHeader,{children:[(0,s.jsx)(d.CardTitle,{children:"Consentement"}),(0,s.jsx)(d.CardDescription,{children:"Autorisation de partage des informations"})]}),(0,s.jsxs)(d.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,s.jsx)("p",{className:"text-sm text-blue-900 mb-4",children:"Vos informations sont confidentielles et protégées. Le partage avec les formateurs permet de mieux adapter votre parcours de formation."}),(0,s.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,s.jsx)(g.Checkbox,{id:"consent_share_info",checked:D.consent_share_info,onCheckedChange:e=>S("consent_share_info",e)}),(0,s.jsx)("label",{htmlFor:"consent_share_info",className:"text-sm",children:"J'autorise le partage de mes besoins spécifiques avec les formateurs et le personnel pédagogique afin de bénéficier des aménagements nécessaires."})]})]}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:[(0,s.jsx)("p",{children:"Conformément au RGPD, vous disposez d'un droit d'accès, de modification et de suppression de vos données."}),(0,s.jsx)("p",{className:"mt-1",children:"Ces informations seront conservées pendant la durée de votre formation et archivées ensuite selon les obligations légales."})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-between pt-6",children:[(0,s.jsx)("div",{children:y>1&&(0,s.jsxs)(l.Button,{type:"button",variant:"outline",onClick:()=>{y>1&&N(y-1)},children:[(0,s.jsx)(_.ChevronLeft,{className:"h-4 w-4 mr-2"}),"Précédent"]})}),(0,s.jsxs)("div",{className:"flex gap-2",children:[c&&(0,s.jsx)(l.Button,{type:"button",variant:"ghost",onClick:c,children:"Annuler"}),y<5?(0,s.jsxs)(l.Button,{type:"button",onClick:()=>{y<5&&N(y+1)},children:["Suivant",(0,s.jsx)(b.ChevronRight,{className:"h-4 w-4 ml-2"})]}):(0,s.jsxs)(l.Button,{type:"submit",disabled:T.isPending,children:[(0,s.jsx)(v.Save,{className:"h-4 w-4 mr-2"}),T.isPending?"Enregistrement...":"Enregistrer la déclaration"]})]})]})]})}var y=e.i(37727);let N=[{value:"physical",label:"Physique"},{value:"pedagogical",label:"Pédagogique"},{value:"exam",label:"Examen"},{value:"technical",label:"Aide technique"},{value:"schedule",label:"Emploi du temps"}],C={physical:[{value:"accessible_room",label:"Salle accessible"},{value:"adapted_furniture",label:"Mobilier adapté"},{value:"parking",label:"Stationnement réservé"},{value:"elevator",label:"Accès ascenseur"}],pedagogical:[{value:"extra_time",label:"Temps supplémentaire"},{value:"adapted_materials",label:"Supports adaptés"},{value:"tutoring",label:"Tutorat renforcé"},{value:"small_group",label:"Petit groupe"}],exam:[{value:"extra_time",label:"Tiers-temps"},{value:"separate_room",label:"Salle séparée"},{value:"assistant",label:"Assistant (lecteur/scripteur)"},{value:"computer",label:"Ordinateur"}],technical:[{value:"screen_reader",label:"Lecteur d'écran"},{value:"magnifier",label:"Loupe électronique"},{value:"wheelchair",label:"Fauteuil roulant"},{value:"hearing_aid",label:"Aide auditive"}],schedule:[{value:"flexible_hours",label:"Horaires aménagés"},{value:"breaks",label:"Pauses supplémentaires"},{value:"reduced_schedule",label:"Temps partiel"},{value:"remote_learning",label:"Formation à distance"}]},w=[{value:"active",label:"Actif"},{value:"inactive",label:"Inactif"},{value:"expired",label:"Expiré"}];function D({organizationId:e,studentId:t,studentNeedId:i,accommodationId:r,initialData:c,onSuccess:o,onCancel:g}){let _=(0,u.useQueryClient)(),{addToast:b}=(0,j.useToast)(),[f,D]=(0,a.useState)({accommodation_type:c?.accommodation_type||"pedagogical",category:c?.category||"",title:c?.title||"",description:c?.description||"",start_date:c?.start_date||new Date().toISOString().split("T")[0],end_date:c?.end_date||"",status:c?.status||"active",completion_rate:c?.completion_rate||0,metadata:c?.metadata||{}}),F=C[f.accommodation_type]||[];(0,a.useEffect)(()=>{f.category&&!F.find(e=>e.value===f.category)&&D(e=>({...e,category:""}))},[f.accommodation_type]);let T=(0,m.useMutation)({mutationFn:async()=>{let s={organization_id:e,student_id:t,student_need_id:i||null,...f};return r?await n.accessibilityService.updateAccommodation(r,s):await n.accessibilityService.createAccommodation(s)},onSuccess:()=>{_.invalidateQueries({queryKey:["accessibility-accommodations"]}),_.invalidateQueries({queryKey:["accessibility-stats"]}),b({type:"success",title:r?"Aménagement mis à jour":"Aménagement créé",description:`L'am\xe9nagement a \xe9t\xe9 ${r?"mis à jour":"créé"} avec succ\xe8s.`}),o?.()},onError:e=>{b({type:"error",title:"Erreur",description:e?.message||"Impossible de sauvegarder l'aménagement."})}}),S=(e,s)=>{D(a=>({...a,[e]:s}))};return(0,s.jsxs)(d.Card,{children:[(0,s.jsx)(d.CardHeader,{children:(0,s.jsx)(d.CardTitle,{children:r?"Modifier l'aménagement":"Nouvel aménagement"})}),(0,s.jsx)(d.CardContent,{children:(0,s.jsxs)("form",{onSubmit:e=>{(e.preventDefault(),f.accommodation_type&&f.title)?T.mutate():b({type:"error",title:"Validation échouée",description:"Veuillez remplir tous les champs obligatoires."})},className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(h.Label,{htmlFor:"accommodation_type",children:"Type d'aménagement *"}),(0,s.jsx)("select",{id:"accommodation_type",value:f.accommodation_type,onChange:e=>S("accommodation_type",e.target.value),className:"w-full px-4 py-3 border-2 border-input rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors",required:!0,children:N.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(h.Label,{htmlFor:"category",children:"Catégorie"}),(0,s.jsxs)("select",{id:"category",value:f.category,onChange:e=>S("category",e.target.value),className:"w-full px-4 py-3 border-2 border-input rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors",children:[(0,s.jsx)("option",{value:"",children:"Sélectionner une catégorie..."}),F.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(h.Label,{htmlFor:"title",children:"Titre *"}),(0,s.jsx)(x.Input,{id:"title",value:f.title,onChange:e=>S("title",e.target.value),placeholder:"Ex: Tiers-temps aux examens",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(h.Label,{htmlFor:"description",children:"Description"}),(0,s.jsx)(p.Textarea,{id:"description",value:f.description,onChange:e=>S("description",e.target.value),placeholder:"Décrivez l'aménagement en détail...",rows:4})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(h.Label,{htmlFor:"start_date",children:"Date de début *"}),(0,s.jsx)(x.Input,{id:"start_date",type:"date",value:f.start_date,onChange:e=>S("start_date",e.target.value),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(h.Label,{htmlFor:"end_date",children:"Date de fin"}),(0,s.jsx)(x.Input,{id:"end_date",type:"date",value:f.end_date,onChange:e=>S("end_date",e.target.value)}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Laisser vide si indéterminé"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(h.Label,{htmlFor:"status",children:"Statut"}),(0,s.jsx)("select",{id:"status",value:f.status,onChange:e=>S("status",e.target.value),className:"w-full px-4 py-3 border-2 border-input rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors",children:w.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(h.Label,{htmlFor:"completion_rate",children:"Progression (%)"}),(0,s.jsx)(x.Input,{id:"completion_rate",type:"number",min:"0",max:"100",value:f.completion_rate,onChange:e=>S("completion_rate",parseInt(e.target.value)||0)}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"0-100%"})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[g&&(0,s.jsxs)(l.Button,{type:"button",variant:"outline",onClick:g,children:[(0,s.jsx)(y.X,{className:"h-4 w-4 mr-2"}),"Annuler"]}),(0,s.jsxs)(l.Button,{type:"submit",disabled:T.isPending,children:[(0,s.jsx)(v.Save,{className:"h-4 w-4 mr-2"}),T.isPending?"Enregistrement...":"Enregistrer"]})]})]})})]})}var F=e.i(287336),T=e.i(87316),S=e.i(284614),q=e.i(318216),k=e.i(463415);let L={physical:"Physique",pedagogical:"Pédagogique",exam:"Examen",technical:"Aide technique",schedule:"Emploi du temps"},A={active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",expired:"bg-red-100 text-red-800"};function P({accommodation:e,onEdit:a,onArchive:t,showActions:i=!0}){let n="active"===e.status,r=e.end_date&&new Date(e.end_date)<new Date;return(0,s.jsxs)(d.Card,{className:`${n?"border-green-200":""} hover:shadow-md transition-shadow`,children:[(0,s.jsx)(d.CardHeader,{children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)(d.CardTitle,{className:"text-base",children:e.title}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,s.jsx)(c.Badge,{variant:"outline",className:"text-xs",children:L[e.accommodation_type]||e.accommodation_type}),(0,s.jsx)(c.Badge,{className:`${A[e.status]} text-xs`,children:"active"===e.status?"Actif":"inactive"===e.status?"Inactif":"Expiré"})]})]}),i&&(0,s.jsxs)(k.DropdownMenu,{children:[(0,s.jsx)(k.DropdownMenuTrigger,{asChild:!0,children:(0,s.jsx)(l.Button,{variant:"ghost",size:"sm",children:(0,s.jsx)(q.MoreVertical,{className:"h-4 w-4"})})}),(0,s.jsxs)(k.DropdownMenuContent,{align:"end",children:[(0,s.jsx)(k.DropdownMenuItem,{onClick:a,children:"Modifier"}),(0,s.jsx)(k.DropdownMenuItem,{onClick:t,className:"text-red-600",children:"Archiver"})]})]})]})}),(0,s.jsxs)(d.CardContent,{className:"space-y-3",children:[e.description&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-2",children:e.description}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,s.jsx)(T.Calendar,{className:"h-3 w-3"}),(0,s.jsxs)("span",{children:[e.start_date?new Date(e.start_date).toLocaleDateString("fr-FR"):"Non défini"," → ",e.end_date?new Date(e.end_date).toLocaleDateString("fr-FR"):"Indéterminé"]})]}),e.assigned_to_user_id&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,s.jsx)(S.User,{className:"h-3 w-3"}),(0,s.jsxs)("span",{children:["Responsable: ",e.assigned_to_user_id.slice(0,8),"..."]})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Progression"}),(0,s.jsxs)("span",{className:"font-medium",children:[e.completion_rate,"%"]})]}),(0,s.jsx)(F.Progress,{value:e.completion_rate,className:"h-2"})]}),r&&(0,s.jsx)("p",{className:"text-xs text-red-600 font-medium",children:"⚠️ Cet aménagement a expiré"})]})]})}var I=e.i(569074),E=e.i(794008),B=e.i(727612),z=e.i(605631),M=e.i(898791),H=e.i(440160);let R=[{value:"mdph_certificate",label:"Certificat MDPH"},{value:"medical_certificate",label:"Certificat médical"},{value:"rqth",label:"Reconnaissance RQTH"},{value:"disability_card",label:"Carte d'invalidité"},{value:"other",label:"Autre"}];function Q({organizationId:e,studentId:i,studentNeedId:o,showExisting:p=!0}){let g=(0,u.useQueryClient)(),{addToast:_}=(0,j.useToast)(),b=(0,r.createClient)(),[v,f]=(0,a.useState)(!1),[y,N]=(0,a.useState)({document_type:"mdph_certificate",title:"",issue_date:"",expiry_date:"",issuer:"",reference_number:"",is_confidential:!0,notes:""}),{data:C=[],isLoading:w}=(0,t.useQuery)({queryKey:["accessibility-documents",i],queryFn:async()=>await n.accessibilityService.getDocuments(e,i),enabled:p&&!!i}),D=(0,m.useMutation)({mutationFn:async({file:s,metadata:a})=>{let t=s.name.split(".").pop(),r=`${i}/${Date.now()}.${t}`,{data:d,error:l}=await b.storage.from("accessibility-documents").upload(r,s,{cacheControl:"3600",upsert:!1});if(l)throw console.error("Upload error:",l),Error(`Erreur d'upload: ${l.message}`);return await n.accessibilityService.uploadDocument({organization_id:e,student_id:i,student_need_id:o||null,file_path:d.path,file_name:s.name,file_size:s.size,mime_type:s.type,...a})},onSuccess:()=>{g.invalidateQueries({queryKey:["accessibility-documents"]}),_({type:"success",title:"Document uploadé",description:"Le document a été uploadé avec succès."}),N({document_type:"mdph_certificate",title:"",issue_date:"",expiry_date:"",issuer:"",reference_number:"",is_confidential:!0,notes:""}),f(!1)},onError:e=>{f(!1),_({type:"error",title:"Erreur d'upload",description:e?.message||"Impossible d'uploader le document."})}}),F=(0,m.useMutation)({mutationFn:async e=>{let s=C.find(s=>s.id===e);return s?.file_path&&await b.storage.from("accessibility-documents").remove([s.file_path]),await n.accessibilityService.deleteDocument(e)},onSuccess:()=>{g.invalidateQueries({queryKey:["accessibility-documents"]}),_({type:"success",title:"Document supprimé",description:"Le document a été supprimé avec succès."})},onError:e=>{_({type:"error",title:"Erreur",description:e?.message||"Impossible de supprimer le document."})}}),T=async e=>{let s=e.target.files?.[0];s&&(s.size>0xa00000?_({type:"error",title:"Fichier trop volumineux",description:"Le fichier ne doit pas dépasser 10 MB."}):["application/pdf","image/jpeg","image/png","image/jpg"].includes(s.type)?(f(!0),D.mutate({file:s,metadata:y})):_({type:"error",title:"Type de fichier non autorisé",description:"Formats acceptés: PDF, JPG, PNG"}))},S=async e=>{try{let{data:s,error:a}=await b.storage.from("accessibility-documents").download(e.file_path);if(a)throw a;let t=URL.createObjectURL(s),i=window.document.createElement("a");i.href=t,i.download=e.file_name,i.click(),URL.revokeObjectURL(t)}catch(e){_({type:"error",title:"Erreur de téléchargement",description:e?.message||"Impossible de télécharger le document."})}},q=e=>e?new Date(e).toLocaleDateString("fr-FR"):"Non défini";return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(d.Card,{children:[(0,s.jsx)(d.CardHeader,{children:(0,s.jsxs)(d.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(I.Upload,{className:"h-5 w-5"}),"Uploader un document"]})}),(0,s.jsxs)(d.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(h.Label,{htmlFor:"document_type",children:"Type de document *"}),(0,s.jsx)("select",{id:"document_type",value:y.document_type,onChange:e=>N(s=>({...s,document_type:e.target.value})),className:"w-full px-4 py-3 border-2 border-input rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors",children:R.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(h.Label,{htmlFor:"title",children:"Titre *"}),(0,s.jsx)(x.Input,{id:"title",value:y.title,onChange:e=>N(s=>({...s,title:e.target.value})),placeholder:"Ex: Certificat MDPH 2024"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(h.Label,{htmlFor:"issue_date",children:"Date d'émission"}),(0,s.jsx)(x.Input,{id:"issue_date",type:"date",value:y.issue_date,onChange:e=>N(s=>({...s,issue_date:e.target.value}))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(h.Label,{htmlFor:"expiry_date",children:"Date d'expiration"}),(0,s.jsx)(x.Input,{id:"expiry_date",type:"date",value:y.expiry_date,onChange:e=>N(s=>({...s,expiry_date:e.target.value}))})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(h.Label,{htmlFor:"issuer",children:"Organisme émetteur"}),(0,s.jsx)(x.Input,{id:"issuer",value:y.issuer,onChange:e=>N(s=>({...s,issuer:e.target.value})),placeholder:"Ex: MDPH Paris"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(h.Label,{htmlFor:"reference_number",children:"Numéro de référence"}),(0,s.jsx)(x.Input,{id:"reference_number",value:y.reference_number,onChange:e=>N(s=>({...s,reference_number:e.target.value})),placeholder:"Ex: MDPH-2024-12345"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(h.Label,{htmlFor:"file_upload",children:"Fichier (PDF, JPG, PNG - 10MB max) *"}),(0,s.jsx)(x.Input,{id:"file_upload",type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:T,disabled:v||!y.title}),!y.title&&(0,s.jsx)("p",{className:"text-xs text-amber-600 mt-1",children:"Veuillez d'abord renseigner un titre"})]}),v&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-primary",children:[(0,s.jsx)("div",{className:"animate-spin h-4 w-4 border-2 border-primary border-t-transparent rounded-full"}),"Upload en cours..."]})]})]}),p&&(0,s.jsxs)(d.Card,{children:[(0,s.jsx)(d.CardHeader,{children:(0,s.jsxs)(d.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(E.File,{className:"h-5 w-5"}),"Documents uploadés (",C.length,")"]})}),(0,s.jsx)(d.CardContent,{children:w?(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Chargement..."}):0===C.length?(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Aucun document uploadé"}):(0,s.jsx)("div",{className:"space-y-3",children:C.map(e=>{var a,t;return(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(E.File,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsx)("span",{className:"font-medium",children:e.title}),e.verified&&(0,s.jsxs)(c.Badge,{variant:"outline",className:"bg-green-100 text-green-800 text-xs",children:[(0,s.jsx)(z.CheckCircle,{className:"h-3 w-3 mr-1"}),"Vérifié"]}),!!(a=e.expiry_date)&&new Date(a)<new Date&&(0,s.jsxs)(c.Badge,{variant:"outline",className:"bg-red-100 text-red-800 text-xs",children:[(0,s.jsx)(M.AlertCircle,{className:"h-3 w-3 mr-1"}),"Expiré"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 mt-1 text-xs text-muted-foreground",children:[(0,s.jsx)("span",{children:e.file_name}),(0,s.jsx)("span",{children:(t=e.file_size||0)<1024?t+" B":t<1048576?(t/1024).toFixed(1)+" KB":(t/1048576).toFixed(1)+" MB"}),e.issue_date&&(0,s.jsxs)("span",{children:["Émis le ",q(e.issue_date)]}),e.expiry_date&&(0,s.jsxs)("span",{children:["Expire le ",q(e.expiry_date)]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(l.Button,{variant:"ghost",size:"sm",onClick:()=>S(e),children:(0,s.jsx)(H.Download,{className:"h-4 w-4"})}),(0,s.jsx)(l.Button,{variant:"ghost",size:"sm",onClick:()=>F.mutate(e.id),disabled:F.isPending,children:(0,s.jsx)(B.Trash2,{className:"h-4 w-4 text-red-600"})})]})]},e.id)})})})]})]})}var K=e.i(178583),U=e.i(488844),O=e.i(871689),$=e.i(107233),V=e.i(522016),G=e.i(618566),J=e.i(630374);function X(){let e=(0,G.useParams)().id,{user:m}=(0,i.useAuth)(),u=(0,r.createClient)(),[x,h]=(0,a.useState)(!1),[p,g]=(0,a.useState)(!1),[j,_]=(0,a.useState)(null),{data:b,isLoading:v}=(0,t.useQuery)({queryKey:["student",e],queryFn:async()=>{let{data:s,error:a}=await u.from("students").select("*, programs(name), cohorts(name)").eq("id",e).single();if(a)throw a;return s},enabled:!!e}),{data:y,isLoading:N}=(0,t.useQuery)({queryKey:["accessibility-student-need",e],queryFn:async()=>await n.accessibilityService.getStudentNeedByStudentId(e),enabled:!!e}),{data:C=[],isLoading:w}=(0,t.useQuery)({queryKey:["accessibility-accommodations",e],queryFn:async()=>await n.accessibilityService.getStudentAccommodations(e),enabled:!!e}),{data:F=[]}=(0,t.useQuery)({queryKey:["accessibility-disability-types"],queryFn:async()=>await n.accessibilityService.getDisabilityTypes()}),T=()=>{g(!1),_(null)};if(!m||v)return(0,s.jsx)("div",{className:"p-6",children:(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Chargement..."})});if(!b)return(0,s.jsx)("div",{className:"p-6",children:(0,s.jsx)(d.Card,{children:(0,s.jsxs)(d.CardContent,{className:"p-12 text-center",children:[(0,s.jsx)(M.AlertCircle,{className:"h-12 w-12 mx-auto text-red-600 mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Étudiant introuvable"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"L'étudiant demandé n'existe pas ou vous n'avez pas les permissions pour y accéder."}),(0,s.jsx)(V.default,{href:"/dashboard/accessibility",children:(0,s.jsxs)(l.Button,{children:[(0,s.jsx)(O.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Retour"]})})]})})});let q=y?.disability_type_ids?F.filter(e=>y.disability_type_ids.includes(e.id)):[];return(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(V.default,{href:"/dashboard/accessibility",children:(0,s.jsxs)(l.Button,{variant:"ghost",size:"sm",children:[(0,s.jsx)(O.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Retour"]})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[(0,s.jsx)(S.User,{className:"h-8 w-8 text-primary"}),b.first_name," ",b.last_name]}),(0,s.jsx)("p",{className:"text-muted-foreground mt-1",children:"Suivi de l'accessibilité et des aménagements"})]})]})}),(0,s.jsxs)(d.Card,{children:[(0,s.jsx)(d.CardHeader,{children:(0,s.jsxs)(d.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(S.User,{className:"h-5 w-5"}),"Informations générales"]})}),(0,s.jsxs)(d.CardContent,{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Email"}),(0,s.jsx)("p",{className:"font-medium",children:b.email||"Non renseigné"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Programme"}),(0,s.jsx)("p",{className:"font-medium",children:b.programs?.name||"Non affecté"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Cohorte"}),(0,s.jsx)("p",{className:"font-medium",children:b.cohorts?.name||"Non affecté"})]})]})]}),y?(0,s.jsxs)(d.Card,{children:[(0,s.jsx)(d.CardHeader,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(d.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(K.FileText,{className:"h-5 w-5"}),"Déclaration de besoins spécifiques"]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:["pending"===y.status&&(0,s.jsx)(c.Badge,{className:"bg-amber-100 text-amber-800",children:"En attente de revue"}),"reviewed"===y.status&&(0,s.jsx)(c.Badge,{className:"bg-blue-100 text-blue-800",children:"Revue effectuée"}),"implemented"===y.status&&(0,s.jsxs)(c.Badge,{className:"bg-green-100 text-green-800",children:[(0,s.jsx)(z.CheckCircle,{className:"h-3 w-3 mr-1"}),"Aménagements en place"]}),(0,s.jsx)(l.Button,{onClick:()=>h(!0),variant:"outline",size:"sm",children:"Modifier"})]})]})}),(0,s.jsxs)(d.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Déclaration de handicap"}),(0,s.jsx)("p",{className:"font-medium",children:y.has_disability?(0,s.jsx)("span",{className:"text-blue-600",children:"Oui, un handicap est déclaré"}):(0,s.jsx)("span",{children:"Aucun handicap déclaré"})})]}),y.has_disability&&q.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Types de handicap"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:q.map(e=>(0,s.jsx)(c.Badge,{variant:"outline",children:e.name_fr},e.id))})]}),y.disability_description&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Description"}),(0,s.jsx)("p",{className:"text-sm",children:y.disability_description})]}),y.has_mdph_recognition&&(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 bg-blue-50 rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Reconnaissance MDPH/RQTH"}),(0,s.jsx)("p",{className:"font-medium text-blue-900",children:"Oui"})]}),y.mdph_number&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Numéro MDPH"}),(0,s.jsx)("p",{className:"font-medium text-blue-900",children:y.mdph_number})]}),y.mdph_expiry_date&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Date d'expiration"}),(0,s.jsx)("p",{className:"font-medium text-blue-900",children:new Date(y.mdph_expiry_date).toLocaleDateString("fr-FR")})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.needs_physical_accommodations&&(0,s.jsxs)("div",{className:"p-3 border rounded-lg",children:[(0,s.jsx)("p",{className:"text-sm font-medium mb-1",children:"Aménagements physiques"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:y.physical_accommodations_detail||"Demandés"})]}),y.needs_pedagogical_accommodations&&(0,s.jsxs)("div",{className:"p-3 border rounded-lg",children:[(0,s.jsx)("p",{className:"text-sm font-medium mb-1",children:"Aménagements pédagogiques"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:y.pedagogical_accommodations_detail||"Demandés"})]}),y.needs_exam_accommodations&&(0,s.jsxs)("div",{className:"p-3 border rounded-lg",children:[(0,s.jsx)("p",{className:"text-sm font-medium mb-1",children:"Aménagements examens"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:y.exam_accommodations_detail||"Demandés"})]}),y.needs_technical_aids&&(0,s.jsxs)("div",{className:"p-3 border rounded-lg",children:[(0,s.jsx)("p",{className:"text-sm font-medium mb-1",children:"Aides techniques"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:y.technical_aids_detail||"Demandées"})]})]})]})]}):(0,s.jsx)(d.Card,{className:"border-amber-200 bg-amber-50",children:(0,s.jsx)(d.CardContent,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)(M.AlertCircle,{className:"h-6 w-6 text-amber-600 flex-shrink-0 mt-1"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"font-semibold text-amber-900 mb-2",children:"Aucune déclaration de besoins spécifiques"}),(0,s.jsx)("p",{className:"text-sm text-amber-800 mb-4",children:"Cet étudiant n'a pas encore rempli le formulaire d'auto-déclaration des besoins spécifiques."}),(0,s.jsxs)(l.Button,{onClick:()=>h(!0),variant:"outline",children:[(0,s.jsx)($.Plus,{className:"h-4 w-4 mr-2"}),"Remplir la déclaration"]})]})]})})}),(0,s.jsxs)(o.Tabs,{defaultValue:"accommodations",className:"w-full",children:[(0,s.jsxs)(o.TabsList,{className:"grid w-full grid-cols-2",children:[(0,s.jsxs)(o.TabsTrigger,{value:"accommodations",children:["Aménagements (",C.length,")"]}),(0,s.jsx)(o.TabsTrigger,{value:"documents",children:"Documents justificatifs"})]}),(0,s.jsxs)(o.TabsContent,{value:"accommodations",className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"Aménagements mis en place"}),(0,s.jsxs)(l.Button,{onClick:()=>g(!0),size:"sm",children:[(0,s.jsx)($.Plus,{className:"h-4 w-4 mr-2"}),"Nouvel aménagement"]})]}),w?(0,s.jsx)(d.Card,{children:(0,s.jsx)(d.CardContent,{className:"p-6",children:(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Chargement des aménagements..."})})}):0===C.length?(0,s.jsx)(d.Card,{children:(0,s.jsxs)(d.CardContent,{className:"p-12 text-center",children:[(0,s.jsx)(U.Package,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Aucun aménagement"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Aucun aménagement n'a encore été mis en place pour cet étudiant."}),(0,s.jsxs)(l.Button,{onClick:()=>g(!0),children:[(0,s.jsx)($.Plus,{className:"h-4 w-4 mr-2"}),"Créer un aménagement"]})]})}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:C.map(e=>(0,s.jsx)(P,{accommodation:e,onEdit:()=>{_(e),g(!0)},showActions:!0},e.id))})]}),(0,s.jsx)(o.TabsContent,{value:"documents",children:(0,s.jsx)(Q,{organizationId:m.organization_id||"",studentId:e,studentNeedId:y?.id,showExisting:!0})})]}),(0,s.jsx)(J.Dialog,{open:x,onOpenChange:h,children:(0,s.jsxs)(J.DialogContent,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)(J.DialogHeader,{children:[(0,s.jsx)(J.DialogTitle,{children:"Déclaration de besoins spécifiques"}),(0,s.jsx)(J.DialogDescription,{children:"Formulaire d'auto-déclaration des besoins d'accessibilité"})]}),(0,s.jsx)(f,{studentId:e,organizationId:m.organization_id||"",onSuccess:()=>h(!1),onCancel:()=>h(!1)})]})}),(0,s.jsx)(J.Dialog,{open:p,onOpenChange:g,children:(0,s.jsxs)(J.DialogContent,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)(J.DialogHeader,{children:[(0,s.jsx)(J.DialogTitle,{children:j?"Modifier l'aménagement":"Nouvel aménagement"}),(0,s.jsx)(J.DialogDescription,{children:j?"Modifiez les informations de l'aménagement":"Créez un nouvel aménagement pour cet étudiant"})]}),(0,s.jsx)(D,{organizationId:m.organization_id||"",studentId:e,studentNeedId:y?.id,accommodationId:j?.id,initialData:j,onSuccess:T,onCancel:T})]})})]})}e.s(["default",()=>X],401693)}]);