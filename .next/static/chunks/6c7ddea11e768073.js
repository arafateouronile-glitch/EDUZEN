(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,503116,e=>{"use strict";let t=(0,e.i(475254).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],503116)},25652,e=>{"use strict";let t=(0,e.i(475254).default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);e.s(["TrendingUp",()=>t],25652)},870273,e=>{"use strict";let t=(0,e.i(475254).default)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);e.s(["Star",()=>t],870273)},527985,e=>{"use strict";var t=e.i(920755);let a=new class{supabase;constructor(e){this.supabase=e||(0,t.createClient)()}async getCategories(e,t=!0){let a=this.supabase.from("documentation_categories").select("*").order("order_index",{ascending:!0});e?a=a.or(`organization_id.eq.${e},is_public.eq.true`):t&&(a=a.eq("is_public",!0));let{data:s,error:i}=await a;if(i)throw i;return s}async getCategoryBySlug(e,t){let a=this.supabase.from("documentation_categories").select("*").eq("slug",e).single();a=t?a.or(`organization_id.eq.${t},is_public.eq.true`):a.eq("is_public",!0);let{data:s,error:i}=await a;if(i)throw i;return s}async createCategory(e){let{data:t,error:a}=await this.supabase.from("documentation_categories").insert(e).select().single();if(a)throw a;return t}async updateCategory(e,t){let{data:a,error:s}=await this.supabase.from("documentation_categories").update(t).eq("id",e).select().single();if(s)throw s;return a}async deleteCategory(e){let{error:t}=await this.supabase.from("documentation_categories").delete().eq("id",e);if(t)throw t}async getArticlesByCategory(e,t="published"){let{data:a,error:s}=await this.supabase.from("documentation_articles").select("*, author:users(id, full_name, email)").eq("category_id",e).eq("status",t).order("order_index",{ascending:!0}).order("published_at",{ascending:!1});if(s)throw s;return a}async getArticleBySlug(e,t){let{data:a,error:s}=await this.supabase.from("documentation_articles").select(`
        *,
        category:documentation_categories(*),
        sections:documentation_sections(*),
        author:users(id, full_name, email)
      `).eq("slug",e).eq("category.slug",t).eq("status","published").single();if(s)throw s;return a&&await this.supabase.rpc("increment_article_view_count",{article_uuid:a.id}),a}async searchArticles(e,t){let a=this.supabase.from("documentation_articles").select("*, category:documentation_categories(*), author:users(id, full_name)").eq("status","published").or(`title.ilike.%${e}%,content.ilike.%${e}%,excerpt.ilike.%${e}%`);a=t?a.or(`organization_id.eq.${t},category.is_public.eq.true`):a.eq("category.is_public",!0);let{data:s,error:i}=await a.order("view_count",{ascending:!1}).limit(50);if(i)throw i;return s}async getPopularArticles(e=10,t){let a=this.supabase.from("documentation_articles").select("*, category:documentation_categories(*), author:users(id, full_name)").eq("status","published").order("view_count",{ascending:!1}).limit(e);a=t?a.or(`organization_id.eq.${t},category.is_public.eq.true`):a.eq("category.is_public",!0);let{data:s,error:i}=await a;if(i)throw i;return s}async getRecentArticles(e=10,t){let a=this.supabase.from("documentation_articles").select("*, category:documentation_categories(*), author:users(id, full_name)").eq("status","published").order("published_at",{ascending:!1}).limit(e);a=t?a.or(`organization_id.eq.${t},category.is_public.eq.true`):a.eq("category.is_public",!0);let{data:s,error:i}=await a;if(i)throw i;return s}async getFeaturedArticles(e=5,t){let a=this.supabase.from("documentation_articles").select("*, category:documentation_categories(*), author:users(id, full_name)").eq("status","published").eq("is_featured",!0).order("published_at",{ascending:!1}).limit(e);a=t?a.or(`organization_id.eq.${t},category.is_public.eq.true`):a.eq("category.is_public",!0);let{data:s,error:i}=await a;if(i)throw i;return s}async createArticle(e){let{data:t,error:a}=await this.supabase.from("documentation_articles").insert(e).select().single();if(a)throw a;return t}async updateArticle(e,t){let{data:a,error:s}=await this.supabase.from("documentation_articles").update(t).eq("id",e).select().single();if(s)throw s;return a}async deleteArticle(e){let{error:t}=await this.supabase.from("documentation_articles").delete().eq("id",e);if(t)throw t}async getArticleSections(e){let{data:t,error:a}=await this.supabase.from("documentation_sections").select("*").eq("article_id",e).order("order_index",{ascending:!0});if(a)throw a;return t}async createSection(e){let{data:t,error:a}=await this.supabase.from("documentation_sections").insert(e).select().single();if(a)throw a;return t}async updateSection(e,t){let{data:a,error:s}=await this.supabase.from("documentation_sections").update(t).eq("id",e).select().single();if(s)throw s;return a}async deleteSection(e){let{error:t}=await this.supabase.from("documentation_sections").delete().eq("id",e);if(t)throw t}async getUserFavorites(e){let{data:t,error:a}=await this.supabase.from("documentation_favorites").select("*, article:documentation_articles(*, category:documentation_categories(*))").eq("user_id",e).order("created_at",{ascending:!1});if(a)throw a;return t}async addFavorite(e,t){let{data:a,error:s}=await this.supabase.from("documentation_favorites").insert({user_id:e,article_id:t}).select().single();if(s)throw s;return a}async removeFavorite(e,t){let{error:a}=await this.supabase.from("documentation_favorites").delete().eq("user_id",e).eq("article_id",t);if(a)throw a}async isFavorite(e,t){let{data:a,error:s}=await this.supabase.from("documentation_favorites").select("id").eq("user_id",e).eq("article_id",t).maybeSingle();if(s)throw s;return!!a}async getUserNotes(e,t){let{data:a,error:s}=await this.supabase.from("documentation_notes").select("*").eq("user_id",e).eq("article_id",t).order("created_at",{ascending:!1}).maybeSingle();if(s)throw s;return a}async upsertNote(e,t,a){let s=await this.getUserNotes(e,t);if(s){let{data:e,error:t}=await this.supabase.from("documentation_notes").update({content:a}).eq("id",s.id).select().single();if(t)throw t;return e}{let{data:s,error:i}=await this.supabase.from("documentation_notes").insert({user_id:e,article_id:t,content:a}).select().single();if(i)throw i;return s}}async deleteNote(e,t){let{error:a}=await this.supabase.from("documentation_notes").delete().eq("user_id",e).eq("article_id",t);if(a)throw a}async createFeedback(e){let{data:t,error:a}=await this.supabase.from("documentation_feedback").insert(e).select().single();if(a)throw a;return t}async getArticleFeedback(e){let{data:t,error:a}=await this.supabase.from("documentation_feedback").select("*, user:users(id, full_name)").eq("article_id",e).order("created_at",{ascending:!1});if(a)throw a;return t}async getArticleFeedbackStats(e){let{data:t,error:a}=await this.supabase.from("documentation_feedback").select("rating, is_helpful").eq("article_id",e);if(a)throw a;let s={total:t.length,averageRating:0,helpfulCount:0,notHelpfulCount:0,ratings:{1:0,2:0,3:0,4:0,5:0}};if(t.length>0){let e=t.filter(e=>e.rating).map(e=>e.rating);e.length>0&&(s.averageRating=e.reduce((e,t)=>e+t,0)/e.length),t.forEach(e=>{e.rating&&s.ratings[e.rating]++,!0===e.is_helpful&&s.helpfulCount++,!1===e.is_helpful&&s.notHelpfulCount++})}return s}async recordSearch(e,t,a){let{error:s}=await this.supabase.from("documentation_search_history").insert({user_id:e,query:t,results_count:a});if(s)throw s}async getSearchHistory(e,t=10){let{data:a,error:s}=await this.supabase.from("documentation_search_history").select("*").eq("user_id",e).order("created_at",{ascending:!1}).limit(t);if(s)throw s;return a}async clearSearchHistory(e){let{error:t}=await this.supabase.from("documentation_search_history").delete().eq("user_id",e);if(t)throw t}};e.s(["documentationService",0,a])},21960,e=>{"use strict";var t=e.i(843476),a=e.i(271645),s=e.i(266027),i=e.i(325715),r=e.i(527985),n=e.i(970065),o=e.i(167881),c=e.i(23750),l=e.i(555436),d=e.i(810980),u=e.i(870273),m=e.i(25652),h=e.i(503116),g=e.i(520958),p=e.i(178583),f=e.i(239616),x=e.i(522016),_=e.i(618566);function y(){let{user:e}=(0,i.useAuth)(),y=(0,_.useRouter)(),[b,w]=(0,a.useState)(""),{data:j}=(0,s.useQuery)({queryKey:["documentation-categories",e?.organization_id],queryFn:()=>r.documentationService.getCategories(e?.organization_id||""),enabled:!!e?.organization_id}),{data:q}=(0,s.useQuery)({queryKey:["documentation-popular",e?.organization_id],queryFn:()=>r.documentationService.getPopularArticles(10,e?.organization_id||""),enabled:!!e?.organization_id}),{data:v}=(0,s.useQuery)({queryKey:["documentation-recent",e?.organization_id],queryFn:()=>r.documentationService.getRecentArticles(10,e?.organization_id||""),enabled:!!e?.organization_id}),{data:N}=(0,s.useQuery)({queryKey:["documentation-featured",e?.organization_id],queryFn:()=>r.documentationService.getFeaturedArticles(5,e?.organization_id||""),enabled:!!e?.organization_id});return(0,t.jsxs)("div",{className:"container mx-auto py-8 px-4 max-w-7xl",children:[(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Documentation"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Trouvez des réponses à vos questions et apprenez à utiliser toutes les fonctionnalités"})]}),e?.role==="admin"||e?.role==="super_admin"?(0,t.jsx)(x.default,{href:"/dashboard/documentation/admin",children:(0,t.jsxs)(o.Button,{variant:"outline",children:[(0,t.jsx)(f.Settings,{className:"h-4 w-4 mr-2"}),"Administration"]})}):null]})}),(0,t.jsx)(n.Card,{className:"mb-8",children:(0,t.jsx)(n.CardContent,{className:"pt-6",children:(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),b.trim()&&y.push(`/dashboard/documentation/search?q=${encodeURIComponent(b)}`)},className:"flex gap-2",children:[(0,t.jsxs)("div",{className:"flex-1 relative",children:[(0,t.jsx)(l.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),(0,t.jsx)(c.Input,{type:"text",placeholder:"Rechercher dans la documentation...",value:b,onChange:e=>w(e.target.value),className:"pl-10"})]}),(0,t.jsx)(o.Button,{type:"submit",children:"Rechercher"})]})})}),N&&N.length>0&&(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("h2",{className:"text-2xl font-semibold mb-4 flex items-center gap-2",children:[(0,t.jsx)(u.Star,{className:"h-6 w-6 text-yellow-500"}),"Articles en vedette"]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:N.map(e=>(0,t.jsx)(n.Card,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:(0,t.jsxs)(x.default,{href:`/dashboard/documentation/${e.category.slug}/${e.slug}`,children:[(0,t.jsxs)(n.CardHeader,{children:[(0,t.jsx)(n.CardTitle,{className:"text-lg",children:e.title}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.excerpt})]}),(0,t.jsx)(n.CardContent,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[(0,t.jsx)("span",{children:e.category.name}),(0,t.jsxs)("span",{children:[e.view_count," vues"]})]})})]})},e.id))})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsxs)("div",{className:"lg:col-span-2",children:[(0,t.jsxs)("h2",{className:"text-2xl font-semibold mb-4 flex items-center gap-2",children:[(0,t.jsx)(d.BookOpen,{className:"h-6 w-6"}),"Catégories"]}),j&&j.length>0?(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:j.map(e=>(0,t.jsx)(n.Card,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:(0,t.jsx)(x.default,{href:`/dashboard/documentation/category/${e.slug}`,children:(0,t.jsxs)(n.CardHeader,{children:[(0,t.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[e.icon&&(0,t.jsx)("span",{className:"text-2xl",children:e.icon}),e.name]}),e.description&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description})]})})},e.id))}):(0,t.jsx)(n.Card,{children:(0,t.jsx)(n.CardContent,{className:"pt-6 text-center text-muted-foreground",children:"Aucune catégorie disponible"})})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[q&&q.length>0&&(0,t.jsxs)(n.Card,{children:[(0,t.jsx)(n.CardHeader,{children:(0,t.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(m.TrendingUp,{className:"h-5 w-5"}),"Articles populaires"]})}),(0,t.jsx)(n.CardContent,{children:(0,t.jsx)("div",{className:"space-y-3",children:q.slice(0,5).map(e=>(0,t.jsxs)(x.default,{href:`/dashboard/documentation/${e.category.slug}/${e.slug}`,className:"block p-2 rounded hover:bg-gray-50 transition-colors",children:[(0,t.jsx)("p",{className:"font-medium text-sm",children:e.title}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[e.view_count," vues"]})]},e.id))})})]}),v&&v.length>0&&(0,t.jsxs)(n.Card,{children:[(0,t.jsx)(n.CardHeader,{children:(0,t.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(h.Clock,{className:"h-5 w-5"}),"Articles récents"]})}),(0,t.jsx)(n.CardContent,{children:(0,t.jsx)("div",{className:"space-y-3",children:v.slice(0,5).map(e=>(0,t.jsxs)(x.default,{href:`/dashboard/documentation/${e.category.slug}/${e.slug}`,className:"block p-2 rounded hover:bg-gray-50 transition-colors",children:[(0,t.jsx)("p",{className:"font-medium text-sm",children:e.title}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:e.category.name})]},e.id))})})]}),(0,t.jsxs)(n.Card,{children:[(0,t.jsx)(n.CardHeader,{children:(0,t.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(g.HelpCircle,{className:"h-5 w-5"}),"Aide rapide"]})}),(0,t.jsx)(n.CardContent,{children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(x.default,{href:"/dashboard/documentation/search?q=débuter",className:"flex items-center gap-2 text-sm text-primary hover:underline",children:[(0,t.jsx)(p.FileText,{className:"h-4 w-4"}),"Guide de démarrage"]}),(0,t.jsxs)(x.default,{href:"/dashboard/documentation/search?q=FAQ",className:"flex items-center gap-2 text-sm text-primary hover:underline",children:[(0,t.jsx)(g.HelpCircle,{className:"h-4 w-4"}),"Questions fréquentes"]})]})})]})]})]})]})}e.s(["default",()=>y])}]);