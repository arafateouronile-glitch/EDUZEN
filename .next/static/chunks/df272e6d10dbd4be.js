(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,672186,e=>{"use strict";var t=e.i(843476),s=e.i(266027),a=e.i(271645),r=e.i(383801),i=e.i(267824),n=e.i(645760),l=e.i(167881);e.i(882205);var o=e.i(846932),d=e.i(32095),c=e.i(338456),m=e.i(503116),x=e.i(87316),u=e.i(842009),h=e.i(25652),g=e.i(972520),p=e.i(810980),f=e.i(178583),v=e.i(620278),j=e.i(475254);let b=(0,j.default)("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);var y=e.i(463059),N=e.i(283086);let w=(0,j.default)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);var _=e.i(522016),C=e.i(647163),k=e.i(790224);let M=(0,j.default)("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),I=[{icon:c.PlayCircle,label:"Reprendre un cours",href:"/learner/elearning",color:"bg-gradient-to-br from-blue-500 to-indigo-600",iconColor:"text-white"},{icon:x.Calendar,label:"Planning",href:"/learner/planning",color:"bg-gradient-to-br from-purple-500 to-pink-600",iconColor:"text-white"},{icon:f.FileText,label:"Mes documents",href:"/learner/documents",color:"bg-gradient-to-br from-emerald-500 to-teal-600",iconColor:"text-white"},{icon:M,label:"Messages",href:"/learner/messages",color:"bg-gradient-to-br from-orange-500 to-red-600",iconColor:"text-white"}];function E(){let e={hidden:{opacity:0,y:20,scale:.9},visible:{opacity:1,y:0,scale:1,transition:{duration:.5,ease:[.16,1,.3,1]}}};return(0,t.jsx)(o.motion.div,{variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"visible",className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:I.map((s,a)=>(0,t.jsx)(o.motion.div,{variants:e,children:(0,t.jsx)(_.default,{href:s.href,children:(0,t.jsxs)(o.motion.div,{whileHover:{scale:1.05,y:-5},whileTap:{scale:.95},className:"group relative overflow-hidden rounded-2xl p-4 cursor-pointer transition-shadow hover:shadow-2xl",children:[(0,t.jsx)("div",{className:`absolute inset-0 ${s.color} opacity-90 group-hover:opacity-100 transition-opacity`}),(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),(0,t.jsxs)("div",{className:"relative z-10 flex flex-col items-center gap-2 text-center",children:[(0,t.jsx)("div",{className:"p-3 bg-white/20 backdrop-blur-sm rounded-xl group-hover:bg-white/30 transition-colors",children:(0,t.jsx)(s.icon,{className:`h-6 w-6 ${s.iconColor}`})}),(0,t.jsx)("span",{className:"text-sm font-semibold text-white",children:s.label})]}),(0,t.jsx)(o.motion.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent",initial:{x:"-100%"},whileHover:{x:"100%"},transition:{duration:.6}})]})})},s.href))})}var T=e.i(101725),$=e.i(400237),D=e.i(785183),z=e.i(93230),H=e.i(872526),O=e.i(234239),q=e.i(731195),S=e.i(542027),A=e.i(2758);function F({data:e,timeRange:s=14}){let r=(0,a.useMemo)(()=>{if(e&&e.length>0)return e;let t=[];for(let e=s-1;e>=0;e--){let s=(0,A.subDays)(new Date,e);t.push({date:(0,S.format)(s,"dd/MM"),hours:4*Math.random(),courses:Math.floor(3*Math.random())})}return t},[e,s]);return(0,t.jsx)("div",{className:"w-full h-[300px]",children:(0,t.jsx)(q.ResponsiveContainer,{width:"100%",height:"100%",children:(0,t.jsxs)(T.AreaChart,{data:r,margin:{top:10,right:10,left:0,bottom:0},children:[(0,t.jsxs)("defs",{children:[(0,t.jsxs)("linearGradient",{id:"colorHours",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,t.jsx)("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.3}),(0,t.jsx)("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]}),(0,t.jsxs)("linearGradient",{id:"colorCourses",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,t.jsx)("stop",{offset:"5%",stopColor:"#a855f7",stopOpacity:.3}),(0,t.jsx)("stop",{offset:"95%",stopColor:"#a855f7",stopOpacity:0})]})]}),(0,t.jsx)(H.CartesianGrid,{strokeDasharray:"3 3",stroke:"#e5e7eb",vertical:!1}),(0,t.jsx)(D.XAxis,{dataKey:"date",stroke:"#9ca3af",style:{fontSize:"12px"},tickLine:!1,axisLine:!1}),(0,t.jsx)(z.YAxis,{stroke:"#9ca3af",style:{fontSize:"12px"},tickLine:!1,axisLine:!1}),(0,t.jsx)(O.Tooltip,{content:(0,t.jsx)(({active:e,payload:s})=>e&&s&&s.length?(0,t.jsxs)(o.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white/95 backdrop-blur-xl border border-gray-200 rounded-xl p-3 shadow-xl",children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-gray-900 mb-2",children:s[0].payload.date}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full bg-brand-blue"}),(0,t.jsxs)("span",{className:"text-xs text-gray-600",children:["Heures: ",s[0].value.toFixed(1),"h"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full bg-purple-500"}),(0,t.jsxs)("span",{className:"text-xs text-gray-600",children:["Cours: ",s[1].value]})]})]})]}):null,{}),cursor:{stroke:"#3b82f6",strokeWidth:2}}),(0,t.jsx)($.Area,{type:"monotone",dataKey:"hours",stroke:"#3b82f6",strokeWidth:3,fill:"url(#colorHours)",animationDuration:1500,animationEasing:"ease-out"}),(0,t.jsx)($.Area,{type:"monotone",dataKey:"courses",stroke:"#a855f7",strokeWidth:3,fill:"url(#colorCourses)",animationDuration:1500,animationEasing:"ease-out"})]})})})}var P=e.i(274748),G=e.i(49748),V=e.i(587470);function B({activityData:e=[],weeks:s=12}){let{grid:r,months:i,maxCount:n}=(0,a.useMemo)(()=>{let t=new Date,a=(0,A.subDays)(t,7*s),r=(0,P.startOfWeek)(a,{weekStartsOn:1}),i=new Map;e.forEach(({date:e,count:t})=>{let s=(0,S.format)(e,"yyyy-MM-dd");i.set(s,t)});let n=[],l=[],o="",d=0;for(let e=0;e<s;e++){let t=[];for(let s=0;s<7;s++){let a=(0,G.addDays)(r,7*e+s),n=(0,S.format)(a,"yyyy-MM-dd"),c=i.get(n)||Math.floor(5*Math.random());c>d&&(d=c),t.push({date:a,count:c,day:(0,S.format)(a,"EEE",{locale:V.fr})});let m=(0,S.format)(a,"MMM",{locale:V.fr});m!==o&&0===s&&(l.push({name:m,offset:e}),o=m)}n.push(t)}return{grid:n,months:l,maxCount:d}},[e,s]);return(0,t.jsx)("div",{className:"w-full overflow-x-auto",children:(0,t.jsxs)("div",{className:"inline-flex flex-col gap-2 min-w-full",children:[(0,t.jsx)("div",{className:"flex gap-1 pl-8 mb-1",children:i.map((e,s)=>(0,t.jsx)("div",{className:"text-xs text-gray-500 font-medium",style:{marginLeft:s>0?`${(e.offset-i[s-1].offset)*14}px`:"0"},children:e.name},s))}),(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-1 justify-around text-xs text-gray-500 pr-2",children:[(0,t.jsx)("div",{children:"Lun"}),(0,t.jsx)("div",{className:"opacity-0",children:"Mar"}),(0,t.jsx)("div",{children:"Mer"}),(0,t.jsx)("div",{className:"opacity-0",children:"Jeu"}),(0,t.jsx)("div",{children:"Ven"}),(0,t.jsx)("div",{className:"opacity-0",children:"Sam"}),(0,t.jsx)("div",{className:"opacity-0",children:"Dim"})]}),r.map((e,s)=>(0,t.jsx)("div",{className:"flex flex-col gap-1",children:e.map((e,a)=>(0,t.jsxs)(o.motion.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{delay:(7*s+a)*.01,duration:.3,ease:[.16,1,.3,1]},className:"group relative",children:[(0,t.jsx)("div",{className:`
                      w-3 h-3 rounded-sm transition-all cursor-pointer
                      ${(e=>{if(0===e)return"bg-gray-100";let t=Math.min(e/n,1);return t<.25?"bg-emerald-200":t<.5?"bg-emerald-400":t<.75?"bg-emerald-600":"bg-emerald-700"})(e.count)}
                      hover:ring-2 hover:ring-brand-blue hover:scale-110
                    `,title:`${(0,S.format)(e.date,"dd MMM yyyy",{locale:V.fr})}: ${e.count} activit\xe9${e.count>1?"s":""}`}),(0,t.jsx)("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10",children:(0,t.jsxs)("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-3 py-2 whitespace-nowrap shadow-xl",children:[(0,t.jsx)("div",{className:"font-semibold",children:(0,S.format)(e.date,"dd MMM yyyy",{locale:V.fr})}),(0,t.jsxs)("div",{className:"text-gray-300",children:[e.count," activitÃ©",e.count>1?"s":""]}),(0,t.jsx)("div",{className:"absolute top-full left-1/2 -translate-x-1/2 border-4 border-transparent border-t-gray-900"})]})})]},`${s}-${a}`))},s))]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-2 pl-8",children:[(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"Moins"}),(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-gray-100 rounded-sm"}),(0,t.jsx)("div",{className:"w-3 h-3 bg-emerald-200 rounded-sm"}),(0,t.jsx)("div",{className:"w-3 h-3 bg-emerald-400 rounded-sm"}),(0,t.jsx)("div",{className:"w-3 h-3 bg-emerald-600 rounded-sm"}),(0,t.jsx)("div",{className:"w-3 h-3 bg-emerald-700 rounded-sm"})]}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"Plus"})]})]})})}function R({value:e,max:s,label:r,color:i,size:n=120}){let[l,d]=(0,a.useState)(0),c=s>0?Math.min(e/s*100,100):0;(0,a.useEffect)(()=>{let e=setTimeout(()=>d(c),100);return()=>clearTimeout(e)},[c]);let m=2*Math.PI*(n/2-10),x=m-l/100*m;return(0,t.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,t.jsxs)("div",{className:"relative",style:{width:n,height:n},children:[(0,t.jsxs)("svg",{width:n,height:n,className:"transform -rotate-90",children:[(0,t.jsx)("circle",{cx:n/2,cy:n/2,r:n/2-10,fill:"none",stroke:"currentColor",strokeWidth:"8",className:"text-gray-200"}),(0,t.jsx)(o.motion.circle,{cx:n/2,cy:n/2,r:n/2-10,fill:"none",stroke:i,strokeWidth:"8",strokeLinecap:"round",strokeDasharray:m,strokeDashoffset:x,initial:{strokeDashoffset:m},animate:{strokeDashoffset:x},transition:{duration:1.5,ease:[.16,1,.3,1]},style:{filter:`drop-shadow(0 0 8px ${i}40)`}})]}),(0,t.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[(0,t.jsx)(o.motion.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.5,duration:.5,ease:[.16,1,.3,1]},className:"text-2xl font-bold text-gray-900",children:e}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["/ ",s]})]})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-700",children:r}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[Math.round(c),"% complÃ©tÃ©"]})]})]})}function L(){let{student:e,studentId:j}=(0,r.useLearnerContext)(),M=(0,a.useMemo)(()=>j?(0,i.createLearnerClient)(j):null,[j]),{data:I,isLoading:T}=(0,s.useQuery)({queryKey:["learner-enrollments",j],queryFn:async()=>{if(!j||!M)return[];try{let{data:e,error:t}=await M.from("enrollments").select(`
          *,
          sessions(
            id,
            name,
            start_date,
            end_date,
            status,
            location,
            formations(
              id,
              name,
              description
            )
          )
        `).eq("student_id",j).order("created_at",{ascending:!1});if(t){if("PGRST116"===t.code||"42P01"===t.code||"PGRST301"===t.code||"400"===t.code||t.message?.includes("relation")||t.message?.includes("relationship")||t.message?.includes("does not exist")||t.message?.includes("schema cache"))return k.logger.warn("Enrollments table may not be accessible (RLS or missing)",{studentId:(0,k.maskId)(j),error:(0,k.sanitizeError)(t)}),[];return k.logger.error("Error fetching enrollments",t,{studentId:(0,k.maskId)(j),error:(0,k.sanitizeError)(t)}),[]}return e||[]}catch(e){return k.logger.error("Unexpected error fetching enrollments",e,{studentId:(0,k.maskId)(j),error:(0,k.sanitizeError)(e)}),[]}},enabled:!!j&&!!M,refetchOnWindowFocus:!0,refetchOnMount:!0}),{data:$,isLoading:D}=(0,s.useQuery)({queryKey:["learner-session-courses",j],queryFn:async()=>{if(!j||!M)return[];try{let{data:e,error:t}=await M.from("session_courses").select(`
            *,
            course:courses(
              id, title, slug, short_description, description,
              difficulty_level, estimated_duration_hours, thumbnail_url, is_published
            )
          `).order("assigned_at",{ascending:!1});if(t){if("PGRST116"===t.code||"42P01"===t.code||t.message?.includes("does not exist"))return[];throw t}return e||[]}catch(e){return k.logger.warn("Error fetching session courses (dashboard)",{studentId:(0,k.maskId)(j),error:(0,k.sanitizeError)(e)}),[]}},enabled:!!j&&!!M,refetchOnWindowFocus:!0,refetchOnMount:!0}),{data:z}=(0,s.useQuery)({queryKey:["learner-lesson-progress",j,$?.map(e=>e.course_id)],queryFn:async()=>{if(!j||!$?.length||!M)return{};let e=($||[]).map(e=>e.course_id);try{let{data:t,error:s}=await M.from("lesson_progress").select("*, lessons(course_id)").eq("student_id",j);if(s)return k.logger.warn("Error fetching lesson progress (dashboard)",{studentId:(0,k.maskId)(j),error:(0,k.sanitizeError)(s)}),{};let{data:a,error:r}=await M.from("lessons").select("id, course_id").in("course_id",e);if(r)return k.logger.warn("Error fetching lessons (dashboard)",{studentId:(0,k.maskId)(j),error:(0,k.sanitizeError)(r)}),{};let i={};for(let s of e){let e=(a||[]).filter(e=>e.course_id===s),r=(t||[]).filter(e=>e.lessons?.course_id===s&&e.is_completed).length,n=e.length,l=n>0?Math.round(r/n*100):0;i[s]={completed:r,total:n,percentage:l}}return i}catch(e){return k.logger.warn("Error calculating progress (dashboard)",{studentId:(0,k.maskId)(j),error:(0,k.sanitizeError)(e)}),{}}},enabled:!!j&&!!M&&!!$?.length,refetchOnWindowFocus:!0,refetchOnMount:!0}),H=(0,a.useMemo)(()=>($||[]).map(e=>{let t=z?.[e.course_id]?.percentage||0;return{id:e.id,course_id:e.course_id,courses:e.course,progress_percentage:t,status:100===t?"completed":t>0?"in_progress":"not_started"}}),[$,z]),{data:O}=(0,s.useQuery)({queryKey:["learner-documents",j],queryFn:async()=>{if(!j||!M)return[];let{data:e}=await M.from("documents").select("*").eq("student_id",j).order("created_at",{ascending:!1}).limit(5);return e||[]},enabled:!!j&&!!M,refetchOnWindowFocus:!0,refetchOnMount:!0}),{data:q}=(0,s.useQuery)({queryKey:["learner-certificates",j],queryFn:async()=>{if(!j||!M)return[];let{data:e}=await M.from("course_certificates").select(`
          *,
          courses(title)
        `).eq("student_id",j).order("issued_at",{ascending:!1});return e||[]},enabled:!!j&&!!M,refetchOnWindowFocus:!0,refetchOnMount:!0}),{data:S}=(0,s.useQuery)({queryKey:["learner-attendance",j],queryFn:async()=>{if(!j||!M)return[];try{let{data:e,error:t}=await M.from("attendance").select(`
            *,
            sessions(
              id,
              start_time,
              end_time,
              start_date,
              end_date
            )
          `).eq("student_id",j).eq("status","present").order("date",{ascending:!1});if(t)return k.logger.warn("Error fetching attendance",{studentId:(0,k.maskId)(j),error:(0,k.sanitizeError)(t)}),[];let s=[...new Set((e||[]).map(e=>e.session_id).filter(Boolean))];if(0===s.length)return e||[];let{data:a,error:r}=await M.from("session_slots").select("*").in("session_id",s).order("date",{ascending:!0}).order("start_time",{ascending:!0});if(r)return k.logger.warn("Error fetching session_slots",{studentId:(0,k.maskId)(j),error:(0,k.sanitizeError)(r)}),e||[];return(e||[]).map(e=>{let t=e.session_id,s=e.date,r=(a||[]).filter(e=>e.session_id===t&&e.date===s);return{...e,sessions:e.sessions?{...e.sessions,session_slots:r}:null}})}catch(e){return k.logger.warn("Unexpected error fetching attendance",{studentId:(0,k.maskId)(j),error:(0,k.sanitizeError)(e)}),[]}},enabled:!!j&&!!M,refetchOnWindowFocus:!0,refetchOnMount:!0}),A=(0,a.useMemo)(()=>{let e=(I||[]).filter(e=>{let t=e.sessions?.status,s=e.sessions?.end_date;return!!("completed"===t||s&&new Date(s)<new Date&&"cancelled"!==t)}).length,t=(I||[]).filter(e=>{let t=e.sessions?.status,s=e.sessions?.start_date,a=e.sessions?.end_date;if("cancelled"===t)return!1;if(s&&a){let e=new Date,t=new Date(s),r=new Date(a);return e>=t&&e<=r}return"confirmed"===t||"in_progress"===t}).length,s=0;S&&S.length>0&&(k.logger.info("Calculating attendance hours",{studentId:j?(0,k.maskId)(j):void 0,recordCount:S.length}),S.forEach(e=>{let t=e.sessions,a=e.date;if(t?.session_slots&&Array.isArray(t.session_slots)&&t.session_slots.length>0)t.session_slots.forEach(e=>{if(e.start_time&&e.end_time&&e.date)try{let t=5===e.start_time.length?`${e.start_time}:00`:e.start_time,a=5===e.end_time.length?`${e.end_time}:00`:e.end_time,r=new Date(`${e.date}T${t}`),i=new Date(`${e.date}T${a}`);if(!isNaN(r.getTime())&&!isNaN(i.getTime())){let e=(i.getTime()-r.getTime())/36e5;e>0&&e<24&&(s+=e)}}catch(t){k.logger.warn("Error calculating hours from slot",{studentId:j?(0,k.maskId)(j):void 0,slotId:e?.id?(0,k.maskId)(e.id):void 0,error:(0,k.sanitizeError)(t)})}});else if(t?.start_time&&t?.end_time)try{let e=5===t.start_time.length?`${t.start_time}:00`:t.start_time,r=5===t.end_time.length?`${t.end_time}:00`:t.end_time,i=new Date(`${a}T${e}`),n=new Date(`${a}T${r}`);if(!isNaN(i.getTime())&&!isNaN(n.getTime())){let e=(n.getTime()-i.getTime())/36e5;e>0&&e<24&&(s+=e)}}catch(e){k.logger.warn("Error calculating hours from session times",{studentId:j?(0,k.maskId)(j):void 0,sessionId:t?.id?(0,k.maskId)(t.id):void 0,error:(0,k.sanitizeError)(e)})}else k.logger.warn("No time information available for attendance",{studentId:j?(0,k.maskId)(j):void 0,attendanceId:e?.id?(0,k.maskId)(e.id):void 0})}));let a=0,r=H?.filter(e=>"completed"===e.status)||[];r.forEach(e=>{let t=e.courses;t?.estimated_duration_hours&&(a+=t.estimated_duration_hours)});let i=Math.round((s+a)*10)/10;return k.logger.info("Hours calculation completed",{studentId:j?(0,k.maskId)(j):void 0,attendanceHours:Math.round(10*s)/10,elearningHours:Math.round(10*a)/10,totalHours:i,attendanceRecordsCount:S?.length||0,completedCoursesCount:r.length}),{totalEnrollments:I?.length||0,completedSessions:e,ongoingSessions:t,totalCourses:H?.length||0,completedCourses:r.length,certificates:q?.length||0,totalHours:i}},[I,H,q,S]),P=I?.filter(e=>{let t=e.sessions;return!!t?.start_date&&new Date(t.start_date)>new Date&&"cancelled"!==t.status}).slice(0,3)||[],G=H?.filter(e=>"in_progress"===e.status).slice(0,3)||[],V={hidden:{opacity:0,y:30,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{duration:.6,ease:[.16,1,.3,1]}}},L={y:[-10,10,-10],transition:{duration:6,repeat:1/0,ease:"easeInOut"}};return(0,t.jsxs)(o.motion.div,{className:"space-y-8 pb-24 lg:pb-8",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.08,delayChildren:.1}}},initial:"hidden",animate:"visible",children:[(0,t.jsxs)(o.motion.div,{variants:V,className:"relative overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-brand-blue via-indigo-600 to-purple-700 opacity-90"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top_right,_var(--tw-gradient-stops))] from-white/10 via-transparent to-transparent"}),(0,t.jsx)(o.motion.div,{animate:L,className:"absolute top-10 right-10 w-32 h-32 bg-white/5 rounded-full blur-3xl"}),(0,t.jsx)(o.motion.div,{animate:{...L,transition:{...L.transition,delay:1}},className:"absolute bottom-10 left-10 w-40 h-40 bg-purple-400/10 rounded-full blur-3xl"}),(0,t.jsx)("div",{className:"relative z-10 p-8 md:p-12",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)(o.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3,duration:.6},className:"flex items-center gap-2 mb-3",children:[(0,t.jsx)(N.Sparkles,{className:"h-5 w-5 text-yellow-300"}),(0,t.jsx)("span",{className:"text-sm font-semibold text-yellow-200 uppercase tracking-wider",children:"Bienvenue sur votre espace"})]}),(0,t.jsxs)(o.motion.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.6},className:"text-3xl md:text-5xl font-bold text-white mb-3",children:["Bonjour, ",e?.first_name||"Apprenant"," ğŸ‘‹"]}),(0,t.jsx)(o.motion.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.6},className:"text-lg text-white/80 max-w-2xl",children:"PrÃªt Ã  continuer votre parcours d'excellence ? DÃ©couvrez vos formations et suivez votre progression."})]}),(0,t.jsxs)(o.motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.6,duration:.6},className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"text-4xl font-bold text-white",children:[A.totalHours,"h"]}),(0,t.jsx)("div",{className:"text-sm text-white/70",children:"Temps de formation"})]}),(0,t.jsx)("div",{className:"w-px h-16 bg-white/20"}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-4xl font-bold text-white",children:A.certificates}),(0,t.jsx)("div",{className:"text-sm text-white/70",children:"Certificats"})]})]})]})})]}),(0,t.jsx)(o.motion.div,{variants:V,children:(0,t.jsx)(E,{})}),(0,t.jsx)(o.motion.div,{variants:V,className:"grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6",children:[{label:"Sessions inscrites",value:A.totalEnrollments,subtitle:`${A.completedSessions} termin\xe9e${A.completedSessions>1?"s":""}`,icon:d.GraduationCap,gradient:"from-blue-500 to-indigo-600",iconBg:"bg-blue-100",iconColor:"text-blue-600"},{label:"Cours e-learning",value:A.totalCourses,subtitle:`${A.completedCourses} compl\xe9t\xe9${A.completedCourses>1?"s":""}`,icon:c.PlayCircle,gradient:"from-purple-500 to-pink-600",iconBg:"bg-purple-100",iconColor:"text-purple-600"},{label:"Heures de formation",value:`${A.totalHours}h`,subtitle:"Temps total",icon:m.Clock,gradient:"from-emerald-500 to-teal-600",iconBg:"bg-emerald-100",iconColor:"text-emerald-600"},{label:"Certificats",value:A.certificates,subtitle:"DiplÃ´mes obtenus",icon:u.Award,gradient:"from-amber-500 to-orange-600",iconBg:"bg-amber-100",iconColor:"text-amber-600"}].map((e,s)=>(0,t.jsx)(o.motion.div,{whileHover:{y:-8,scale:1.02},whileTap:{scale:.98},transition:{duration:.3,ease:[.16,1,.3,1]},children:(0,t.jsxs)(n.GlassCard,{className:"relative p-6 overflow-hidden group cursor-pointer",children:[(0,t.jsx)("div",{className:`absolute inset-0 bg-gradient-to-br ${e.gradient} opacity-0 group-hover:opacity-5 transition-opacity duration-500`}),(0,t.jsx)("div",{className:"absolute -inset-1 bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl opacity-0 group-hover:opacity-20 blur-xl transition-opacity duration-500"}),(0,t.jsxs)("div",{className:"relative z-10",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,t.jsx)("div",{className:`p-3 ${e.iconBg} rounded-xl group-hover:scale-110 transition-transform duration-300`,children:(0,t.jsx)(e.icon,{className:`h-6 w-6 ${e.iconColor}`})}),(0,t.jsx)(h.TrendingUp,{className:"h-4 w-4 text-green-500 opacity-0 group-hover:opacity-100 transition-opacity"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:e.label}),(0,t.jsx)(o.motion.p,{className:"text-3xl font-bold text-gray-900",initial:{scale:1},whileHover:{scale:1.1},transition:{duration:.2},children:e.value}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:e.subtitle})]})]})]})},e.label))}),(0,t.jsx)(o.motion.div,{variants:V,children:(0,t.jsxs)(n.GlassCard,{className:"p-6 md:p-8",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,t.jsx)("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl",children:(0,t.jsx)(h.TrendingUp,{className:"h-5 w-5 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Votre progression"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"ActivitÃ© des 14 derniers jours"})]})]}),(0,t.jsx)(F,{})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsx)(o.motion.div,{variants:V,children:(0,t.jsxs)(n.GlassCard,{className:"p-6 md:p-8",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,t.jsx)("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-pink-600 rounded-xl",children:(0,t.jsx)(v.Target,{className:"h-5 w-5 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Objectifs"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Votre avancement"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-6 mt-8",children:[(0,t.jsx)(R,{value:A.completedSessions,max:A.totalEnrollments,label:"Sessions",color:"#3b82f6"}),(0,t.jsx)(R,{value:A.completedCourses,max:A.totalCourses,label:"Cours",color:"#a855f7"})]})]})}),(0,t.jsx)(o.motion.div,{variants:V,children:(0,t.jsxs)(n.GlassCard,{className:"p-6 md:p-8",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,t.jsx)("div",{className:"p-2 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-xl",children:(0,t.jsx)(b,{className:"h-5 w-5 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"ActivitÃ©"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Heatmap de vos 12 derniÃ¨res semaines"})]})]}),(0,t.jsx)("div",{className:"mt-6",children:(0,t.jsx)(B,{weeks:12})})]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsx)(o.motion.div,{variants:V,children:(0,t.jsxs)(n.GlassCard,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-gradient-to-br from-brand-blue to-indigo-600 rounded-xl",children:(0,t.jsx)(x.Calendar,{className:"h-5 w-5 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Sessions Ã  venir"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Vos prochaines formations"})]})]}),(0,t.jsxs)(_.default,{href:"/learner/formations",className:"text-sm text-brand-blue hover:underline flex items-center group",children:["Voir tout ",(0,t.jsx)(y.ChevronRight,{className:"h-4 w-4 group-hover:translate-x-1 transition-transform"})]})]}),P.length>0?(0,t.jsx)("div",{className:"space-y-3",children:P.map((e,s)=>{let a=e.sessions,r=a?.formations;return(0,t.jsx)(o.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*s},children:(0,t.jsx)(_.default,{href:`/learner/formations/${a?.id}`,children:(0,t.jsx)(o.motion.div,{whileHover:{x:4,backgroundColor:"rgba(249, 250, 251, 0.8)"},className:"p-4 bg-gray-50/50 rounded-xl transition-all group cursor-pointer border border-transparent hover:border-brand-blue/20",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 group-hover:text-brand-blue transition-colors",children:r?.name||a?.name||"Session"}),(0,t.jsx)("div",{className:"flex items-center gap-4 mt-2 text-sm text-gray-500",children:(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(x.Calendar,{className:"h-4 w-4"}),a?.start_date?(0,C.formatDate)(a.start_date):"Date Ã  dÃ©finir"]})}),a?.location&&(0,t.jsxs)("p",{className:"text-sm text-gray-500 mt-1 flex items-center gap-1",children:[(0,t.jsx)("span",{children:"ğŸ“"})," ",a.location]})]}),(0,t.jsx)(g.ArrowRight,{className:"h-5 w-5 text-gray-400 group-hover:text-brand-blue group-hover:translate-x-1 transition-all"})]})})})},e.id)})}):(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(x.Calendar,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),(0,t.jsx)("p",{className:"text-gray-500 mb-4",children:"Aucune session Ã  venir"}),(0,t.jsx)(_.default,{href:"/learner/formations",children:(0,t.jsx)(l.Button,{variant:"outline",size:"sm",children:"DÃ©couvrir les formations"})})]})]})}),(0,t.jsx)(o.motion.div,{variants:V,children:(0,t.jsxs)(n.GlassCard,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-pink-600 rounded-xl",children:(0,t.jsx)(c.PlayCircle,{className:"h-5 w-5 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Continuer l'apprentissage"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Vos cours en cours"})]})]}),(0,t.jsxs)(_.default,{href:"/learner/elearning",className:"text-sm text-brand-blue hover:underline flex items-center group",children:["Voir tout ",(0,t.jsx)(y.ChevronRight,{className:"h-4 w-4 group-hover:translate-x-1 transition-transform"})]})]}),G.length>0?(0,t.jsx)("div",{className:"space-y-3",children:G.map((e,s)=>{let a=e.courses,r=e.progress_percentage||0,i=a?.slug?`/learner/elearning/${a.slug}`:"/learner/elearning";return(0,t.jsx)(o.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*s},children:(0,t.jsx)(_.default,{href:i,children:(0,t.jsx)(o.motion.div,{whileHover:{x:4,backgroundColor:"rgba(249, 250, 251, 0.8)"},className:"p-4 bg-gray-50/50 rounded-xl transition-all group cursor-pointer border border-transparent hover:border-purple-500/20",children:(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[a?.thumbnail_url?(0,t.jsx)(o.motion.img,{whileHover:{scale:1.05},src:a.thumbnail_url,alt:a.title,className:"w-16 h-16 rounded-lg object-cover"}):(0,t.jsx)("div",{className:"w-16 h-16 rounded-lg bg-gradient-to-br from-brand-blue to-indigo-600 flex items-center justify-center group-hover:scale-105 transition-transform",children:(0,t.jsx)(p.BookOpen,{className:"h-8 w-8 text-white"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 truncate group-hover:text-brand-blue transition-colors",children:a?.title||"Cours"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,t.jsx)("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,t.jsx)(o.motion.div,{initial:{width:0},animate:{width:`${r}%`},transition:{duration:1,ease:[.16,1,.3,1]},className:"h-full bg-gradient-to-r from-brand-blue to-indigo-500 rounded-full",style:{boxShadow:"0 0 10px rgba(59, 130, 246, 0.5)"}})}),(0,t.jsxs)("span",{className:"text-sm font-medium text-gray-600",children:[r,"%"]})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Cours e-learning"})]})]})})})},e.id)})}):(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(c.PlayCircle,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),(0,t.jsx)("p",{className:"text-gray-500 mb-4",children:"Aucun cours en cours"}),(0,t.jsx)(_.default,{href:"/learner/elearning",children:(0,t.jsx)(l.Button,{variant:"outline",size:"sm",children:"Explorer les cours"})})]})]})})]}),(0,t.jsx)(o.motion.div,{variants:V,children:(0,t.jsxs)(n.GlassCard,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-xl",children:(0,t.jsx)(f.FileText,{className:"h-5 w-5 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Documents rÃ©cents"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Vos derniers documents"})]})]}),(0,t.jsxs)(_.default,{href:"/learner/documents",className:"text-sm text-brand-blue hover:underline flex items-center group",children:["Voir tout ",(0,t.jsx)(y.ChevronRight,{className:"h-4 w-4 group-hover:translate-x-1 transition-transform"})]})]}),O&&O.length>0?(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:O.map((e,s)=>(0,t.jsx)(o.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*s},whileHover:{y:-4,scale:1.02},className:"p-4 bg-gray-50/50 rounded-xl hover:bg-gray-100/50 transition-all cursor-pointer border border-transparent hover:border-emerald-500/20",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:`p-2 rounded-lg ${"certificate"===e.type?"bg-amber-100":"convocation"===e.type?"bg-blue-100":"bg-gray-100"}`,children:"certificate"===e.type?(0,t.jsx)(u.Award,{className:"h-5 w-5 text-amber-600"}):(0,t.jsx)(f.FileText,{className:"h-5 w-5 text-gray-600"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"font-medium text-gray-900 truncate",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:e.created_at&&(0,C.formatDate)(e.created_at)})]})]})},e.id))}):(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(f.FileText,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Aucun document disponible"})]})]})}),(0,t.jsx)(o.motion.div,{variants:V,children:(0,t.jsxs)("div",{className:"relative overflow-hidden rounded-2xl",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-600 via-purple-600 to-pink-600"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-[url('/patterns/dots.svg')] opacity-10"}),(0,t.jsx)(o.motion.div,{animate:{scale:[1,1.2,1],opacity:[.3,.5,.3]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},className:"absolute top-0 right-0 w-64 h-64 bg-white/20 rounded-full blur-3xl"}),(0,t.jsx)(o.motion.div,{animate:{scale:[1.2,1,1.2],opacity:[.5,.3,.5]},transition:{duration:4,repeat:1/0,ease:"easeInOut",delay:2},className:"absolute bottom-0 left-0 w-72 h-72 bg-pink-400/20 rounded-full blur-3xl"}),(0,t.jsx)("div",{className:"relative z-10 p-8 md:p-12",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,t.jsx)(w,{className:"h-6 w-6 text-yellow-300"}),(0,t.jsx)("span",{className:"text-sm font-semibold text-yellow-200 uppercase tracking-wider",children:"Continuez comme Ã§a !"})]}),(0,t.jsx)("h3",{className:"text-3xl md:text-4xl font-bold text-white mb-3",children:"Vous Ãªtes sur la bonne voie ğŸ‰"}),(0,t.jsxs)("p",{className:"text-lg text-white/80 max-w-2xl",children:["Vous avez complÃ©tÃ© ",A.completedSessions+A.completedCourses," formations. Chaque pas vous rapproche de vos objectifs !"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)(o.motion.div,{className:"text-5xl font-bold text-white mb-1",whileHover:{scale:1.1},children:[A.totalHours,"h"]}),(0,t.jsx)("p",{className:"text-sm text-white/70",children:"heures formÃ©"})]}),(0,t.jsx)("div",{className:"w-px h-16 bg-white/20"}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(o.motion.div,{className:"text-5xl font-bold text-white mb-1",whileHover:{scale:1.1},children:A.certificates}),(0,t.jsx)("p",{className:"text-sm text-white/70",children:"certificats"})]})]})]})})]})})]})}e.s(["default",()=>L],672186)}]);