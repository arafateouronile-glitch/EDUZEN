(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,107233,e=>{"use strict";let s=(0,e.i(475254).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>s],107233)},503116,e=>{"use strict";let s=(0,e.i(475254).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>s],503116)},972469,e=>{"use strict";var s=e.i(843476),t=e.i(271645),r=e.i(970065),a=e.i(167881),n=e.i(107233);let l=(0,e.i(475254).default)("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);var i=e.i(87316),o=e.i(503116),d=e.i(346897),c=e.i(647163),u=e.i(3251),m=e.i(6799);function p({sessionId:e,formData:p,onFormDataChange:x,slotConfig:g,onSlotConfigChange:f,sessionSlots:h=[],onSlotsRefetch:b}){let{addToast:y}=(0,m.useToast)(),[j,v]=(0,t.useState)(!1),N=async()=>{if(!p.start_date||!p.end_date)return void y({type:"error",title:"Erreur",description:"Les dates de début et de fin sont requises"});v(!0);try{await u.sessionSlotService.generateSlots({sessionId:e,startDate:p.start_date,endDate:p.end_date,timeSlotType:"full_day"===g.timeSlotType?"both":g.timeSlotType,morningStart:g.morningStart,morningEnd:g.morningEnd,afternoonStart:g.afternoonStart,afternoonEnd:g.afternoonEnd,location:p.location||void 0,teacherId:p.teacher_id||void 0,capacityMax:p.capacity_max?parseInt(p.capacity_max):void 0}),b(),y({type:"success",title:"Séances générées",description:"Les séances ont été générées avec succès."})}catch(e){y({type:"error",title:"Erreur",description:e instanceof Error?e.message:"Une erreur est survenue lors de la génération des séances."})}finally{v(!1)}},C=async e=>{if(confirm("Voulez-vous supprimer cette séance ?"))try{await u.sessionSlotService.delete(e),b(),y({type:"success",title:"Séance supprimée",description:"La séance a été supprimée avec succès."})}catch(e){y({type:"error",title:"Erreur",description:"Une erreur est survenue lors de la suppression de la séance."})}},_=async()=>{if(confirm("Voulez-vous supprimer toutes les séances ?"))try{await u.sessionSlotService.deleteBySessionId(e),b(),y({type:"success",title:"Séances supprimées",description:"Toutes les séances ont été supprimées."})}catch(e){y({type:"error",title:"Erreur",description:"Une erreur est survenue lors de la suppression des séances."})}},S=async()=>{let s=document.getElementById("manual-slot-date"),t=document.getElementById("manual-slot-time-slot"),r=document.getElementById("manual-slot-start"),a=document.getElementById("manual-slot-end");if(!s?.value||!r?.value||!a?.value)return void y({type:"error",title:"Erreur",description:"Veuillez remplir tous les champs."});try{await u.sessionSlotService.create({session_id:e,date:s.value,time_slot:t.value,start_time:r.value,end_time:a.value,location:p.location||null,teacher_id:p.teacher_id||null,capacity_max:p.capacity_max?parseInt(p.capacity_max):null}),b(),s.value="",r.value="",a.value="",y({type:"success",title:"Séance ajoutée",description:"La séance a été ajoutée avec succès."})}catch(e){y({type:"error",title:"Erreur",description:"Une erreur est survenue lors de l'ajout de la séance."})}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(r.Card,{children:[(0,s.jsx)(r.CardHeader,{children:(0,s.jsx)(r.CardTitle,{children:"Dates et informations générales"})}),(0,s.jsxs)(r.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Date de début *"}),(0,s.jsx)("input",{type:"date",value:p.start_date,onChange:e=>x({...p,start_date:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Date de fin *"}),(0,s.jsx)("input",{type:"date",value:p.end_date,onChange:e=>x({...p,end_date:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Lieu/Salle"}),(0,s.jsx)("input",{type:"text",value:p.location,onChange:e=>x({...p,location:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Ex: Salle A1"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Capacité maximale"}),(0,s.jsx)("input",{type:"number",value:p.capacity_max,onChange:e=>x({...p,capacity_max:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Ex: 25"})]})]})]}),(0,s.jsxs)(r.Card,{children:[(0,s.jsx)(r.CardHeader,{children:(0,s.jsx)(r.CardTitle,{children:"Configuration des séances"})}),(0,s.jsxs)(r.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Type de séances *"}),(0,s.jsxs)("select",{value:g.timeSlotType,onChange:e=>f({...g,timeSlotType:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",children:[(0,s.jsx)("option",{value:"both",children:"Matin et après-midi"}),(0,s.jsx)("option",{value:"morning",children:"Matin seulement"}),(0,s.jsx)("option",{value:"afternoon",children:"Après-midi seulement"}),(0,s.jsx)("option",{value:"full_day",children:"Journée complète"})]})]}),("morning"===g.timeSlotType||"both"===g.timeSlotType)&&(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 p-4 bg-blue-50 rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Début matin"}),(0,s.jsx)("input",{type:"time",value:g.morningStart,onChange:e=>f({...g,morningStart:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Fin matin"}),(0,s.jsx)("input",{type:"time",value:g.morningEnd,onChange:e=>f({...g,morningEnd:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]})]}),("afternoon"===g.timeSlotType||"both"===g.timeSlotType)&&(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 p-4 bg-orange-50 rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Début après-midi"}),(0,s.jsx)("input",{type:"time",value:g.afternoonStart,onChange:e=>f({...g,afternoonStart:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Fin après-midi"}),(0,s.jsx)("input",{type:"time",value:g.afternoonEnd,onChange:e=>f({...g,afternoonEnd:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]})]}),"full_day"===g.timeSlotType&&(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 p-4 bg-brand-blue-ghost rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Début journée"}),(0,s.jsx)("input",{type:"time",value:g.morningStart,onChange:e=>f({...g,morningStart:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Fin journée"}),(0,s.jsx)("input",{type:"time",value:g.afternoonEnd,onChange:e=>f({...g,afternoonEnd:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]})]}),(0,s.jsxs)(a.Button,{onClick:N,disabled:!p.start_date||!p.end_date||j,className:"w-full",children:[(0,s.jsx)(n.Plus,{className:"mr-2 h-4 w-4"}),j?"Génération...":"Générer les séances automatiquement"]}),p.start_date&&p.end_date?null:(0,s.jsx)("p",{className:"text-xs text-muted-foreground text-center",children:"Veuillez d'abord définir les dates de début et de fin de la session"})]})]}),h.length>0&&(0,s.jsxs)(r.Card,{children:[(0,s.jsx)(r.CardHeader,{children:(0,s.jsxs)(r.CardTitle,{className:"flex items-center justify-between",children:[(0,s.jsxs)("span",{children:["Séances générées (",h.length,")"]}),(0,s.jsxs)(a.Button,{variant:"outline",size:"sm",onClick:_,children:[(0,s.jsx)(l,{className:"mr-2 h-4 w-4"}),"Tout supprimer"]})]})}),(0,s.jsx)(r.CardContent,{children:(0,s.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:h.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(i.Calendar,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsx)("span",{className:"font-medium",children:(0,c.formatDate)(e.date)}),(0,s.jsx)("span",{className:`px-2 py-1 rounded text-xs ${"morning"===e.time_slot?"bg-blue-100 text-blue-800":"afternoon"===e.time_slot?"bg-orange-100 text-orange-800":"bg-brand-blue-ghost text-brand-blue"}`,children:"morning"===e.time_slot?"Matin":"afternoon"===e.time_slot?"Après-midi":"Journée complète"}),(0,s.jsx)(o.Clock,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsxs)("span",{className:"text-sm text-muted-foreground",children:[e.start_time," - ",e.end_time]}),e.location&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.MapPin,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:e.location})]})]})}),(0,s.jsx)(a.Button,{variant:"ghost",size:"sm",onClick:()=>C(e.id),children:(0,s.jsx)(l,{className:"h-4 w-4 text-red-600"})})]},e.id))})})]}),(0,s.jsxs)(r.Card,{children:[(0,s.jsx)(r.CardHeader,{children:(0,s.jsx)(r.CardTitle,{children:"Ajouter une séance manuelle"})}),(0,s.jsxs)(r.CardContent,{children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Date"}),(0,s.jsx)("input",{type:"date",id:"manual-slot-date",min:p.start_date,max:p.end_date,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Créneau"}),(0,s.jsxs)("select",{id:"manual-slot-time-slot",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",children:[(0,s.jsx)("option",{value:"morning",children:"Matin"}),(0,s.jsx)("option",{value:"afternoon",children:"Après-midi"}),(0,s.jsx)("option",{value:"full_day",children:"Journée complète"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Heure début"}),(0,s.jsx)("input",{type:"time",id:"manual-slot-start",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Heure fin"}),(0,s.jsx)("input",{type:"time",id:"manual-slot-end",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]})]}),(0,s.jsxs)(a.Button,{className:"w-full mt-4",onClick:S,disabled:!p.start_date||!p.end_date,children:[(0,s.jsx)(n.Plus,{className:"mr-2 h-4 w-4"}),"Ajouter la séance"]})]})]})]})}e.s(["ConfigDatesPrix",()=>p],972469)}]);