(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,221345,e=>{"use strict";let a=(0,e.i(475254).default)("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);e.s(["Link",()=>a],221345)},138297,e=>{"use strict";var a=e.i(843476),t=e.i(271645),r=e.i(970065),l=e.i(167881),s=e.i(23750),i=e.i(10708),d=e.i(645760),n=e.i(473708),c=e.i(475254);let o=(0,c.default)("FileSignature",[["path",{d:"M20 19.5v.5a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8.5L18 5.5",key:"kd5d3"}],["path",{d:"M8 18h1",key:"13wk12"}],["path",{d:"M18.42 9.61a2.1 2.1 0 1 1 2.97 2.97L16.95 17 13 18l.99-3.95 4.43-4.44Z",key:"johvi5"}]]),m=(0,c.default)("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);var h=e.i(569074),p=e.i(37727),x=e.i(221345),u=e.i(178583),g=e.i(605631);let b=(0,c.default)("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]),v=(0,c.default)("FileEdit",[["path",{d:"M4 13.5V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2h-5.5",key:"1bg6eb"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M10.42 12.61a2.1 2.1 0 1 1 2.97 2.97L7.95 21 4 22l.99-3.95 5.43-5.44Z",key:"1rgxu8"}]]);var y=e.i(101523),j=e.i(707866);e.i(882205);var k=e.i(846932),N=e.i(647163);function C({onInsert:e,onClose:c,onChartEditorOpen:C,onSignatureFieldOpen:f,onMapEmbedOpen:L,onAttachmentEmbedOpen:$,onFormFieldOpen:w,onMediaLibraryOpen:M}){let I=(0,t.useRef)(null),[q,T]=(0,t.useState)("image"),[S,z]=(0,t.useState)(""),[F,U]=(0,t.useState)(""),[R,D]=(0,t.useState)(200),[E,A]=(0,t.useState)(""),[B,H]=(0,t.useState)(""),[_,P]=(0,t.useState)(""),[V,O]=(0,t.useState)(200),[W,Q]=(0,t.useState)(""),[K,Z]=(0,t.useState)("CODE128"),[G,X]=(0,t.useState)(200),[J,Y]=(0,t.useState)(50),ee=()=>{switch(q){case"image":if(!S)return"";return`<p style="text-align: center; margin: 16px 0;">
          <img 
            src="${S}" 
            alt="${F||"Image"}" 
            style="max-width: ${R}px; height: auto; border-radius: 8px; display: block; margin: 0 auto;"
          />
        </p>`;case"signature":if(f)return f(),"";return`<p style="margin: 32px 0; text-align: center;">
          <span style="display: block; border-top: 2px solid #000; width: 200px; margin: 0 auto 8px;"></span>
          <span style="font-size: 14px; color: #666;">Signature</span>
        </p>`;case"qrcode":if(!_)return"";let e=`https://api.qrserver.com/v1/create-qr-code/?size=${V}x${V}&data=${encodeURIComponent(_)}`;return`<p style="text-align: center; margin: 16px 0;">
          <img 
            src="${e}" 
            alt="QR Code" 
            class="qr-code-dynamic"
            data-qr-data="${_}"
            style="max-width: ${V}px; height: auto; display: block; margin: 0 auto;"
          />
        </p>
        <p style="text-align: center; font-size: 12px; color: #666; margin-top: 8px;">
          ${_}
        </p>`;case"barcode":if(!W)return"";let a=`https://barcode.tec-it.com/barcode.ashx?data=${encodeURIComponent(W)}&code=${K}&dpi=96&dataseparator=`;return`<p style="text-align: center; margin: 16px 0;">
          <img 
            src="${a}" 
            alt="Code-barres ${K}" 
            class="barcode-dynamic"
            data-barcode-data="${W}"
            data-barcode-type="${K}"
            style="max-width: ${G}px; height: ${J}px; display: block; margin: 0 auto;"
          />
        </p>
        <p style="text-align: center; font-size: 12px; color: #666; margin-top: 8px;">
          ${W}
        </p>`;case"link":if(!E)return"";return`<p style="margin: 16px 0;">
          <a href="${E}" style="color: #335ACF; text-decoration: underline;">
            ${B||E}
          </a>
        </p>`;case"divider":return'<hr style="border-top: 2px solid #e5e7eb; margin: 24px 0; border-bottom: none; border-left: none; border-right: none;" />';case"chart":return C&&C(),"";case"form":return w&&w(),"";default:return""}},ea={image:n.Image,signature:o,qrcode:m,barcode:b,link:x.Link,divider:u.FileText,chart:y.BarChart3,form:v};return(0,a.jsxs)(d.GlassCard,{variant:"premium",className:"p-6 max-w-2xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)(r.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(n.Image,{className:"h-5 w-5 text-brand-blue"}),"Palette d'éléments"]}),(0,a.jsx)(l.Button,{variant:"outline",size:"sm",onClick:c,children:(0,a.jsx)(p.X,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(i.Label,{className:"mb-3 block",children:"Type d'élément"}),(0,a.jsx)("div",{className:"grid grid-cols-6 gap-2",children:["image","signature","qrcode","barcode","link","divider","form"].map(e=>{let t=ea[e];return(0,a.jsxs)(k.motion.button,{onClick:()=>T(e),className:(0,N.cn)("p-3 border-2 rounded-lg transition-all flex flex-col items-center gap-2",q===e?"border-brand-blue bg-brand-blue-ghost":"border-gray-200 hover:border-gray-300"),whileHover:{scale:1.05},whileTap:{scale:.95},children:[(0,a.jsx)(t,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"text-xs capitalize",children:e})]},e)})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:["image"===q&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(i.Label,{children:"URL de l'image ou upload"}),(0,a.jsxs)("div",{className:"flex gap-2 mt-1",children:[(0,a.jsx)(s.Input,{type:"text",placeholder:"https://example.com/image.jpg",value:S,onChange:e=>z(e.target.value),className:"flex-1"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[M&&(0,a.jsxs)(l.Button,{variant:"outline",type:"button",onClick:M,children:[(0,a.jsx)(j.Library,{className:"h-4 w-4 mr-2"}),"Bibliothèque"]}),(0,a.jsx)("input",{ref:I,type:"file",accept:"image/*",onChange:e=>{let a=e.target.files?.[0];if(a){let e=new FileReader;e.onload=e=>{z(e.target?.result)},e.readAsDataURL(a)}},className:"hidden"}),(0,a.jsxs)(l.Button,{variant:"outline",type:"button",onClick:()=>I.current?.click(),children:[(0,a.jsx)(h.Upload,{className:"h-4 w-4 mr-2"}),"Upload"]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(i.Label,{htmlFor:"imageAlt",children:"Texte alternatif"}),(0,a.jsx)(s.Input,{id:"imageAlt",type:"text",value:F,onChange:e=>U(e.target.value),className:"mt-1",placeholder:"Description de l'image"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(i.Label,{htmlFor:"imageWidth",children:"Largeur (px)"}),(0,a.jsx)(s.Input,{id:"imageWidth",type:"number",min:"50",max:"800",value:R,onChange:e=>D(parseInt(e.target.value)||200),className:"mt-1"})]})]}),S&&(0,a.jsx)("div",{className:"p-4 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:(0,a.jsx)("img",{src:S,alt:F||"Preview",style:{maxWidth:`${R}px`,height:"auto"},className:"mx-auto rounded"})})]}),"qrcode"===q&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(i.Label,{htmlFor:"qrCodeData",children:["Données du QR Code (variables supportées: ","{variable_name}",")"]}),(0,a.jsx)(s.Input,{id:"qrCodeData",type:"text",value:_,onChange:e=>P(e.target.value),className:"mt-1",placeholder:"Texte, URL ou variable (ex: {eleve_numero})"}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Vous pouvez utiliser des variables comme ","{eleve_numero}",", ","{numero_document}",", etc."]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(i.Label,{htmlFor:"qrCodeSize",children:"Taille (px)"}),(0,a.jsx)(s.Input,{id:"qrCodeSize",type:"number",min:"100",max:"500",value:V,onChange:e=>O(parseInt(e.target.value)||200),className:"mt-1"})]}),_&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300 text-center",children:[(0,a.jsx)("img",{src:`https://api.qrserver.com/v1/create-qr-code/?size=${Math.min(V,300)}x${Math.min(V,300)}&data=${encodeURIComponent(_)}`,alt:"QR Code Preview",className:"mx-auto"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-2 break-all",children:_})]})]}),"barcode"===q&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(i.Label,{htmlFor:"barcodeData",children:["Données du code-barres (variables supportées: ","{variable_name}",")"]}),(0,a.jsx)(s.Input,{id:"barcodeData",type:"text",value:W,onChange:e=>Q(e.target.value),className:"mt-1",placeholder:"Numéro ou variable (ex: {eleve_numero})"}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Vous pouvez utiliser des variables comme ","{eleve_numero}",", ","{numero_document}",", etc."]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(i.Label,{htmlFor:"barcodeType",children:"Type de code-barres"}),(0,a.jsxs)("select",{id:"barcodeType",value:K,onChange:e=>Z(e.target.value),className:"mt-1 w-full px-3 py-2 border rounded-lg",children:[(0,a.jsx)("option",{value:"CODE128",children:"CODE128"}),(0,a.jsx)("option",{value:"CODE39",children:"CODE39"}),(0,a.jsx)("option",{value:"EAN13",children:"EAN13"}),(0,a.jsx)("option",{value:"UPC",children:"UPC"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(i.Label,{htmlFor:"barcodeWidth",children:"Largeur (px)"}),(0,a.jsx)(s.Input,{id:"barcodeWidth",type:"number",min:"100",max:"600",value:G,onChange:e=>X(parseInt(e.target.value)||200),className:"mt-1"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(i.Label,{htmlFor:"barcodeHeight",children:"Hauteur (px)"}),(0,a.jsx)(s.Input,{id:"barcodeHeight",type:"number",min:"30",max:"200",value:J,onChange:e=>Y(parseInt(e.target.value)||50),className:"mt-1"})]}),W&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300 text-center",children:[(0,a.jsx)("img",{src:`https://barcode.tec-it.com/barcode.ashx?data=${encodeURIComponent(W)}&code=${K}&dpi=96&dataseparator=`,alt:`Barcode ${K} Preview`,className:"mx-auto",style:{maxWidth:`${Math.min(G,400)}px`,height:`${J}px`}}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-2 break-all",children:W})]})]}),"link"===q&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(i.Label,{htmlFor:"linkUrl",children:"URL"}),(0,a.jsx)(s.Input,{id:"linkUrl",type:"url",value:E,onChange:e=>A(e.target.value),className:"mt-1",placeholder:"https://example.com"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(i.Label,{htmlFor:"linkText",children:"Texte du lien"}),(0,a.jsx)(s.Input,{id:"linkText",type:"text",value:B,onChange:e=>H(e.target.value),className:"mt-1",placeholder:"Texte à afficher"})]})]}),("signature"===q||"divider"===q)&&(0,a.jsx)("div",{className:"p-4 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300 text-center",children:(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:ee()}})})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(l.Button,{variant:"outline",onClick:c,children:"Annuler"}),(0,a.jsxs)(l.Button,{onClick:()=>{let a=ee();if(console.log("Element HTML généré:",a,"Type:",q),a&&a.trim())try{e(a),setTimeout(()=>{c()},100)}catch(e){console.error("Erreur lors de l'insertion de l'élément:",e),alert("Erreur lors de l'insertion de l'élément. Veuillez réessayer.")}else console.error("Aucun HTML généré pour l'élément",q),alert("Impossible de générer l'élément. Veuillez remplir tous les champs requis.")},disabled:"image"===q&&!S||"qrcode"===q&&!_||"barcode"===q&&!W||"link"===q&&!E,children:[(0,a.jsx)(g.CheckCircle,{className:"h-4 w-4 mr-2"}),"Insérer l'élément"]})]})]})]})}e.s(["ElementPalette",()=>C],138297)},273026,e=>{e.n(e.i(138297))}]);