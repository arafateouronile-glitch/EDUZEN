(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,107233,e=>{"use strict";let r=(0,e.i(475254).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>r],107233)},356909,e=>{"use strict";let r=(0,e.i(475254).default)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);e.s(["Save",()=>r],356909)},569074,e=>{"use strict";let r=(0,e.i(475254).default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);e.s(["Upload",()=>r],569074)},683909,e=>{"use strict";var r=e.i(920755);let t=new class{supabase;constructor(e){this.supabase=e||(0,r.createClient)()}async getAllPrograms(e,r){let t=this.supabase.from("programs").select("*").eq("organization_id",e);r?.isActive!==void 0&&(t=t.eq("is_active",r.isActive)),r?.search&&(t=t.or(`name.ilike.%${r.search}%,code.ilike.%${r.search}%,description.ilike.%${r.search}%`));let{data:a,error:i}=await t.order("created_at",{ascending:!1});if(i)throw i;return a}async getProgramById(e){let{data:r,error:t}=await this.supabase.from("programs").select(`
        *,
        formations(*)
      `).eq("id",e).single();if(t)throw t;return r}async createProgram(e){let{data:r,error:t}=await this.supabase.from("programs").insert(e).select().single();if(t)throw t;return r}async updateProgram(e,r){let{data:t,error:a}=await this.supabase.from("programs").update(r).eq("id",e).select().single();if(a)throw a;return t}async deleteProgram(e){return this.updateProgram(e,{is_active:!1})}async getFormationsByProgram(e){let{data:r,error:t}=await this.supabase.from("formations").select("*").eq("program_id",e).order("created_at",{ascending:!1});if(t)throw t;return r}async getGlobalStats(e){let{data:r,error:t}=await this.supabase.from("programs").select("id, is_active, created_at").eq("organization_id",e);if(t)throw t;let a=r||[],i=a.length,n=a.filter(e=>e.is_active).length,s=a.filter(e=>!e.is_active).length,o=0,l=a.map(e=>e.id);if(l.length>0){let{count:e,error:r}=await this.supabase.from("formations").select("*",{count:"exact",head:!0}).in("program_id",l);if(r)throw r;o=e||0}let d=0;if(l.length>0){let{data:e,error:r}=await this.supabase.from("formations").select("id").in("program_id",l);if(r)throw r;let t=e?.map(e=>e.id)||[];if(t.length>0){let{count:e,error:r}=await this.supabase.from("sessions").select("*",{count:"exact",head:!0}).in("formation_id",t);if(r)throw r;d=e||0}}let c=0;if(l.length>0){let{data:e,error:r}=await this.supabase.from("formations").select("id").in("program_id",l);if(r)throw r;let t=e?.map(e=>e.id)||[];if(t.length>0){let{data:e,error:r}=await this.supabase.from("sessions").select("id").in("formation_id",t);if(r)throw r;let a=e?.map(e=>e.id)||[];if(a.length>0){let{count:e,error:r}=await this.supabase.from("enrollments").select("*",{count:"exact",head:!0}).in("session_id",a);if(r)throw r;c=e||0}}}let u=[{name:"Actifs",value:n,color:"#335ACF"},{name:"Inactifs",value:s,color:"#6B7280"}].filter(e=>e.value>0),m={};return a.forEach(e=>{if(e.created_at){let r=new Date(e.created_at),t=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}`;m[t]=(m[t]||0)+1}}),{total:i,active:n,inactive:s,totalFormations:o,totalSessions:d,totalEnrollments:c,statusData:u,monthlyData:Object.entries(m).sort(([e],[r])=>e.localeCompare(r)).slice(-6).map(([e,r])=>({month:new Date(e+"-01").toLocaleDateString("fr-FR",{month:"short",year:"numeric"}),programmes:r}))}}};e.s(["programService",0,t])},209372,e=>{"use strict";var r=e.i(50270);let t=r.z.object({first_name:r.z.string().min(1,"Le prÃ©nom est requis").max(100,"Le prÃ©nom est trop long"),last_name:r.z.string().min(1,"Le nom est requis").max(100,"Le nom est trop long"),date_of_birth:r.z.string().optional().or(r.z.literal("")),gender:r.z.enum(["male","female","other"]).optional().or(r.z.literal("")),email:r.z.string().email("Email invalide").optional().or(r.z.literal("")),phone:r.z.string().optional().or(r.z.literal("")),address:r.z.string().optional().or(r.z.literal("")),city:r.z.string().optional().or(r.z.literal("")),class_id:r.z.string().optional().or(r.z.literal("")),enrollment_date:r.z.string().min(1,"La date d'inscription est requise"),guardian_first_name:r.z.string().min(1,"Le prÃ©nom du tuteur est requis"),guardian_last_name:r.z.string().min(1,"Le nom du tuteur est requis"),guardian_relationship:r.z.enum(["parent","guardian","other"]).default("parent"),guardian_phone_primary:r.z.string().min(1,"Le tÃ©lÃ©phone principal du tuteur est requis"),guardian_phone_secondary:r.z.string().optional().or(r.z.literal("")),guardian_email:r.z.string().email("Email invalide").optional().or(r.z.literal("")),guardian_address:r.z.string().optional().or(r.z.literal(""))});r.z.object({first_name:r.z.string().min(1,"Le prÃ©nom est requis").max(100,"Le prÃ©nom est trop long"),last_name:r.z.string().min(1,"Le nom est requis").max(100,"Le nom est trop long"),date_of_birth:r.z.string().optional().or(r.z.literal("")),gender:r.z.enum(["male","female","other"]).optional().or(r.z.literal("")),email:r.z.string().email("Email invalide").optional().or(r.z.literal("")),phone:r.z.string().optional().or(r.z.literal("")),address:r.z.string().optional().or(r.z.literal("")),city:r.z.string().optional().or(r.z.literal("")),class_id:r.z.string().optional().or(r.z.literal("")),enrollment_date:r.z.string().min(1,"La date d'inscription est requise"),status:r.z.enum(["active","inactive","graduated"]).default("active")});let a=r.z.object({code:r.z.string().min(1,"Le code est requis").max(50,"Le code est trop long"),name:r.z.string().min(1,"Le nom est requis").max(200,"Le nom est trop long"),subtitle:r.z.string().optional().or(r.z.literal("")),description:r.z.string().optional().or(r.z.literal("")),category:r.z.string().optional().or(r.z.literal("")),program_version:r.z.string().optional().or(r.z.literal("")),version_date:r.z.string().optional().or(r.z.literal("")),duration_hours:r.z.string().optional().or(r.z.literal("")),duration_days:r.z.string().optional().or(r.z.literal("")),photo_url:r.z.string().url("URL invalide").optional().or(r.z.literal("")),price:r.z.string().optional().or(r.z.literal("")),price_enterprise:r.z.string().optional().or(r.z.literal("")),price_individual:r.z.string().optional().or(r.z.literal("")),price_freelance:r.z.string().optional().or(r.z.literal("")),currency:r.z.string().default("XOF"),payment_plan:r.z.enum(["full","installment","free"]).default("full"),published_online:r.z.boolean().default(!1),is_public:r.z.boolean().default(!1),eligible_cpf:r.z.boolean().default(!1),cpf_code:r.z.string().optional().or(r.z.literal("")),modalities:r.z.string().optional().or(r.z.literal("")),training_action_type:r.z.string().optional().or(r.z.literal("")),pedagogical_objectives:r.z.string().optional().or(r.z.literal("")),learner_profile:r.z.string().optional().or(r.z.literal("")),training_content:r.z.string().optional().or(r.z.literal("")),execution_follow_up:r.z.string().optional().or(r.z.literal("")),certification_modalities:r.z.string().optional().or(r.z.literal("")),quality:r.z.string().optional().or(r.z.literal("")),accounting_product_config:r.z.string().optional().or(r.z.literal("")),edof_export_fields:r.z.string().optional().or(r.z.literal("")),competence_domains:r.z.string().optional().or(r.z.literal("")),prerequisites:r.z.string().optional().or(r.z.literal("")),capacity_max:r.z.string().optional().or(r.z.literal("")),age_min:r.z.string().optional().or(r.z.literal("")),age_max:r.z.string().optional().or(r.z.literal("")),certification_issued:r.z.boolean().default(!1),is_active:r.z.boolean().default(!0)}),i=r.z.object({program_id:r.z.string().min(1,"Le programme est requis"),code:r.z.string().min(1,"Le code est requis").max(50,"Le code est trop long"),name:r.z.string().min(1,"Le nom est requis").max(200,"Le nom est trop long"),subtitle:r.z.string().optional().or(r.z.literal("")),photo_url:r.z.string().url("URL invalide").optional().or(r.z.literal("")),category:r.z.string().optional().or(r.z.literal("")),description:r.z.string().optional().or(r.z.literal("")),program_version:r.z.string().optional().or(r.z.literal("")),version_date:r.z.string().optional().or(r.z.literal("")),duration_hours:r.z.string().optional().or(r.z.literal("")),duration_days:r.z.string().optional().or(r.z.literal("")),duration_unit:r.z.enum(["hours","days"]).default("hours"),price:r.z.string().optional().or(r.z.literal("")),currency:r.z.string().default("XOF"),payment_plan:r.z.enum(["full","installment","free"]).default("full"),published_online:r.z.boolean().default(!1),eligible_cpf:r.z.boolean().default(!1),cpf_code:r.z.string().optional().or(r.z.literal("")),modalities:r.z.string().optional().or(r.z.literal("")),training_action_type:r.z.string().optional().or(r.z.literal("")),pedagogical_objectives:r.z.string().optional().or(r.z.literal("")),learner_profile:r.z.string().optional().or(r.z.literal("")),training_content:r.z.string().optional().or(r.z.literal("")),execution_follow_up:r.z.string().optional().or(r.z.literal("")),certification_modalities:r.z.string().optional().or(r.z.literal("")),quality:r.z.string().optional().or(r.z.literal("")),accounting_product_config:r.z.string().optional().or(r.z.literal("")),edof_export_fields:r.z.string().optional().or(r.z.literal("")),competence_domains:r.z.string().optional().or(r.z.literal("")),prerequisites:r.z.string().optional().or(r.z.literal("")),capacity_max:r.z.string().optional().or(r.z.literal("")),age_min:r.z.string().optional().or(r.z.literal("")),age_max:r.z.string().optional().or(r.z.literal("")),certification_issued:r.z.boolean().default(!1),is_active:r.z.boolean().default(!0)}),n=r.z.object({formation_id:r.z.string().min(1,"La formation est requise"),name:r.z.string().min(1,"Le nom est requis").max(200,"Le nom est trop long"),code:r.z.string().optional().or(r.z.literal("")),start_date:r.z.string().min(1,"La date de dÃ©but est requise"),end_date:r.z.string().min(1,"La date de fin est requise"),start_time:r.z.string().optional().or(r.z.literal("")),end_time:r.z.string().optional().or(r.z.literal("")),location:r.z.string().optional().or(r.z.literal("")),capacity_max:r.z.string().optional().or(r.z.literal("")).refine(e=>{if(!e)return!0;let r=parseInt(e);return!isNaN(r)&&r>0},"La capacitÃ© maximale doit Ãªtre un nombre entier positif"),currency:r.z.string().default("XOF"),status:r.z.enum(["planned","ongoing","completed","cancelled"]).default("planned"),teacher_id:r.z.string().optional().or(r.z.literal("")),manager1_id:r.z.string().optional().or(r.z.literal("")),manager2_id:r.z.string().optional().or(r.z.literal("")),inter_entreprise:r.z.boolean().default(!0),sous_traitance:r.z.boolean().default(!1),timezone:r.z.string().default("Europe/Paris"),program_ids:r.z.array(r.z.string()).default([])}).refine(e=>!e.start_date||!e.end_date||new Date(e.end_date)>=new Date(e.start_date),{message:"La date de fin doit Ãªtre postÃ©rieure Ã  la date de dÃ©but",path:["end_date"]}),s=r.z.object({student_id:r.z.string().min(1,"L'Ã©tudiant est requis"),session_id:r.z.string().optional().or(r.z.literal("")),subject:r.z.string().min(1,"Le sujet est requis").max(200,"Le sujet est trop long"),assessment_type:r.z.enum(["pre_formation","hot","cold","manager","instructor","funder","quiz","exam","project","other"]).default("quiz"),score:r.z.string().min(1,"La note est requise").refine(e=>{let r=parseFloat(e);return!isNaN(r)&&r>=0},"La note doit Ãªtre un nombre valide"),max_score:r.z.string().optional().or(r.z.literal("")).refine(e=>{if(!e)return!0;let r=parseFloat(e);return!isNaN(r)&&r>0},"La note maximale doit Ãªtre un nombre valide supÃ©rieur Ã  0"),notes:r.z.string().optional().or(r.z.literal("")),graded_at:r.z.string().min(1,"La date d'Ã©valuation est requise"),coefficient:r.z.string().optional().or(r.z.literal("")).refine(e=>{if(!e)return!0;let r=parseFloat(e);return!isNaN(r)&&r>0},"Le coefficient doit Ãªtre un nombre valide supÃ©rieur Ã  0"),is_makeup:r.z.boolean().optional().default(!1),original_grade_id:r.z.string().optional().or(r.z.literal("")),appreciation:r.z.string().optional().or(r.z.literal("")),term_period:r.z.enum(["Q1","Q2","Q3","Q4","S1","S2","T1","T2","T3"]).optional().or(r.z.literal("")),academic_year_id:r.z.string().optional().or(r.z.literal(""))}).refine(e=>!e.max_score||!e.score||parseFloat(e.score)<=parseFloat(e.max_score),{message:"La note ne peut pas Ãªtre supÃ©rieure Ã  la note maximale",path:["score"]}),o=r.z.object({student_id:r.z.string().min(1,"L'Ã©tudiant est requis"),document_type:r.z.enum(["quote","invoice"]).default("invoice"),invoice_number:r.z.string().optional().or(r.z.literal("")),type:r.z.enum(["tuition","registration","other"]).default("tuition"),issue_date:r.z.string().min(1,"La date d'Ã©mission est requise"),due_date:r.z.string().min(1,"La date d'Ã©chÃ©ance est requise"),amount:r.z.string().min(1,"Le montant est requis").refine(e=>{let r=parseFloat(e);return!isNaN(r)&&r>=0},"Le montant doit Ãªtre un nombre valide supÃ©rieur ou Ã©gal Ã  0"),tax_amount:r.z.string().optional().or(r.z.literal("")).refine(e=>{if(!e)return!0;let r=parseFloat(e);return!isNaN(r)&&r>=0},"Le montant de la taxe doit Ãªtre un nombre valide supÃ©rieur ou Ã©gal Ã  0"),currency:r.z.string().default("XOF"),status:r.z.enum(["draft","sent","partial","paid","overdue","cancelled"]).default("draft"),notes:r.z.string().optional().or(r.z.literal("")),enrollment_id:r.z.string().optional().or(r.z.literal(""))}).refine(e=>!e.issue_date||!e.due_date||new Date(e.due_date)>=new Date(e.issue_date),{message:"La date d'Ã©chÃ©ance doit Ãªtre postÃ©rieure Ã  la date d'Ã©mission",path:["due_date"]});r.z.object({invoice_id:r.z.string().min(1,"La facture est requise"),student_id:r.z.string().min(1,"L'Ã©tudiant est requis"),amount:r.z.string().min(1,"Le montant est requis").refine(e=>{let r=parseFloat(e);return!isNaN(r)&&r>0},"Le montant doit Ãªtre un nombre valide supÃ©rieur Ã  0"),currency:r.z.string().default("XOF"),payment_method:r.z.enum(["cash","mobile_money","card","bank_transfer"]).default("cash"),payment_provider:r.z.enum(["mtn","orange","airtel","wave"]).optional().or(r.z.literal("")),transaction_id:r.z.string().optional().or(r.z.literal("")),paid_at:r.z.string().optional().or(r.z.literal("")),notes:r.z.string().optional().or(r.z.literal(""))});let l=r.z.object({student_id:r.z.string().min(1,"L'Ã©tudiant est requis"),session_id:r.z.string().min(1,"La session est requise"),enrollment_date:r.z.string().min(1,"La date d'inscription est requise"),status:r.z.enum(["pending","confirmed","completed","cancelled","failed"]).default("confirmed"),payment_status:r.z.enum(["pending","partial","paid","overdue"]).default("pending"),total_amount:r.z.string().optional().or(r.z.literal("")).refine(e=>{if(!e)return!0;let r=parseFloat(e);return!isNaN(r)&&r>=0},"Le montant total doit Ãªtre un nombre valide supÃ©rieur ou Ã©gal Ã  0"),paid_amount:r.z.string().optional().or(r.z.literal("")).refine(e=>{if(!e)return!0;let r=parseFloat(e);return!isNaN(r)&&r>=0},"Le montant payÃ© doit Ãªtre un nombre valide supÃ©rieur ou Ã©gal Ã  0")}).refine(e=>{if(e.total_amount&&e.paid_amount){let r=parseFloat(e.total_amount),t=parseFloat(e.paid_amount);if(!isNaN(r)&&!isNaN(t)&&t>r)return!1}return!0},{message:"Le montant payÃ© ne peut pas dÃ©passer le montant total",path:["paid_amount"]});e.s(["enrollmentSchema",0,l,"evaluationSchema",0,s,"formationSchema",0,i,"invoiceSchema",0,o,"programSchema",0,a,"sessionSchema",0,n,"studentSchema",0,t])},890538,e=>{"use strict";var r=e.i(843476),t=e.i(271645);e.i(882205);var a=e.i(846932),i=e.i(88653),n=e.i(664659),s=e.i(647163);let o=t.createContext({openItems:[],toggleItem:()=>{}}),l=({type:e="single",defaultValue:a,className:i,children:n})=>{let[s,l]=t.useState(Array.isArray(a)?a:a?[a]:[]);return(0,r.jsx)(o.Provider,{value:{openItems:s,toggleItem:r=>{l(t=>"single"===e?t.includes(r)?[]:[r]:t.includes(r)?t.filter(e=>e!==r):[...t,r])}},children:(0,r.jsx)("div",{className:i,children:n})})},d=({value:e,className:a,children:i})=>(0,r.jsx)("div",{className:(0,s.cn)("border-b border-gray-100 last:border-0",a),children:t.Children.map(i,r=>t.isValidElement(r)?t.cloneElement(r,{value:e}):r)}),c=({className:e,children:a,value:i})=>{let{openItems:l,toggleItem:d}=t.useContext(o),c=!!i&&l.includes(i);return(0,r.jsxs)("button",{type:"button",onClick:()=>i&&d(i),className:(0,s.cn)("flex flex-1 items-center justify-between py-4 w-full font-medium transition-all hover:text-brand-blue text-left",c?"text-brand-blue":"text-gray-700",e),children:[a,(0,r.jsx)(n.ChevronDown,{className:(0,s.cn)("h-4 w-4 shrink-0 transition-transform duration-200 text-gray-400",c&&"rotate-180 text-brand-blue")})]})},u=({className:e,children:n,value:l})=>{let{openItems:d}=t.useContext(o),c=!!l&&d.includes(l);return(0,r.jsx)(i.AnimatePresence,{initial:!1,children:c&&(0,r.jsx)(a.motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2,ease:"easeInOut"},className:"overflow-hidden",children:(0,r.jsx)("div",{className:(0,s.cn)("pb-4 pt-0 text-sm text-gray-600",e),children:n})})})};e.s(["Accordion",()=>l,"AccordionContent",()=>u,"AccordionItem",()=>d,"AccordionTrigger",()=>c])},58483,e=>{"use strict";var r=e.i(843476),t=e.i(271645),a=e.i(618566),i=e.i(954616),n=e.i(653145),s=e.i(994814),o=e.i(325715),l=e.i(683909),d=e.i(167881),c=e.i(356909),u=e.i(107233),m=e.i(239616),p=e.i(569074),g=e.i(522016),x=e.i(209372),b=e.i(890538),f=e.i(647163),h=e.i(6799);function z(){let e=(0,a.useRouter)(),{user:z,isLoading:_}=(0,o.useAuth)(),{addToast:y}=(0,h.useToast)(),[v,j]=(0,t.useState)(null),{register:N,handleSubmit:w,formState:{errors:L},watch:q,setValue:A}=(0,n.useForm)({resolver:(0,s.zodResolver)(x.programSchema),mode:"onChange",defaultValues:{code:"",name:"",subtitle:"",description:"",category:"",program_version:"1",version_date:new Date().toISOString().split("T")[0],duration_hours:"",duration_days:"",price:"",currency:"EUR",published_online:!0,eligible_cpf:!1,certification_issued:!1,is_active:!0}}),P=(0,i.useMutation)({mutationFn:async e=>{if(!z?.organization_id)throw Error("Organization ID manquant");let r=e.duration_days?parseFloat(e.duration_days):null;return e.price&&parseFloat(e.price),l.programService.createProgram({organization_id:z.organization_id,code:e.code,name:e.name,subtitle:e.subtitle,description:e.description,category:e.category,program_version:e.program_version,version_date:e.version_date,duration_days:r,published_online:e.published_online,eligible_cpf:e.eligible_cpf,cpf_code:e.cpf_code,modalities:e.modalities,training_action_type:e.training_action_type,pedagogical_objectives:e.pedagogical_objectives,learner_profile:e.learner_profile,training_content:e.training_content,execution_follow_up:e.execution_follow_up,certification_modalities:e.certification_modalities,quality:e.quality,accounting_product_config:e.accounting_product_config,competence_domains:e.competence_domains,photo_url:e.photo_url,is_active:!0})},onSuccess:r=>{y({type:"success",title:"Programme crÃ©Ã©",description:"Le programme a Ã©tÃ© crÃ©Ã© avec succÃ¨s."}),e.push(`/dashboard/programs/${r.id}`)},onError:e=>{y({type:"error",title:"Erreur",description:e instanceof Error?e.message:"Une erreur est survenue"})}});if(_)return(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-blue"})});if(!z?.organization_id)return(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Organization ID manquant"}),(0,r.jsx)("p",{className:"text-red-700 mb-4",children:"Votre compte n'est pas associÃ© Ã  une organisation."})]})});let C=e=>{P.mutate(e)};return(0,r.jsxs)("div",{className:"space-y-6 pb-20",children:[(0,r.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,r.jsxs)("nav",{className:"flex items-center text-sm text-gray-500",children:[(0,r.jsx)(g.default,{href:"/dashboard/programs",className:"hover:text-brand-blue",children:"BibliothÃ¨que"}),(0,r.jsx)("span",{className:"mx-2",children:"â€º"}),(0,r.jsx)("span",{className:"font-medium text-gray-900",children:"Nouveau programme"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"flex items-center gap-4",children:(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 uppercase tracking-tight",children:q("name")||"NOUVEAU PROGRAMME"})}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)(d.Button,{onClick:w(C),className:"bg-brand-blue hover:bg-brand-blue/90 text-white",disabled:P.isPending,children:[P.isPending?(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):(0,r.jsx)(c.Save,{className:"h-4 w-4 mr-2"}),"Enregistrer"]}),(0,r.jsxs)(d.Button,{variant:"outline",className:"border-brand-blue text-brand-blue hover:bg-brand-blue/5",children:[(0,r.jsx)(u.Plus,{className:"h-4 w-4 mr-2"}),"Ajouter un bloc"]}),(0,r.jsxs)(d.Button,{variant:"outline",className:"border-gray-200",children:[(0,r.jsx)(m.Settings,{className:"h-4 w-4 mr-2"}),"Inscription"]})]})]})]}),(0,r.jsxs)("form",{onSubmit:w(C),className:"space-y-8",children:[(0,r.jsx)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8",children:[(0,r.jsxs)("div",{className:"flex-1 space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Titre du programme"}),(0,r.jsx)("input",{type:"text",...N("name"),className:(0,f.cn)("w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent",L.name?"border-red-500":"border-gray-200"),placeholder:"Ex: AIPR CONCEPTEUR"}),L.name&&(0,r.jsx)("p",{className:"text-sm text-red-500 mt-1",children:L.name.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sous-titre"}),(0,r.jsx)("input",{type:"text",...N("subtitle"),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code interne"}),(0,r.jsx)("input",{type:"text",...N("code"),className:(0,f.cn)("w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent",L.code?"border-red-500":"border-gray-200"),placeholder:"Ex: PROG-2024-001"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CatÃ©gorie"}),(0,r.jsxs)("select",{...N("category"),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent bg-white",children:[(0,r.jsx)("option",{value:"",children:"SÃ©lectionner une catÃ©gorie"}),(0,r.jsx)("option",{value:"Prevention",children:"PrÃ©vention et SÃ©curitÃ©"}),(0,r.jsx)("option",{value:"Informatique",children:"Informatique"}),(0,r.jsx)("option",{value:"Management",children:"Management"}),(0,r.jsx)("option",{value:"Langues",children:"Langues"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Version du programme"}),(0,r.jsx)("input",{type:"text",...N("program_version"),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de la version"}),(0,r.jsx)("input",{type:"date",...N("version_date"),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"DurÃ©e du programme"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"text",...N("duration_hours"),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent pr-16"}),(0,r.jsx)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"heure(s)"})]})]}),(0,r.jsx)("div",{className:"flex items-end",children:(0,r.jsxs)("div",{className:"relative w-full",children:[(0,r.jsx)("input",{type:"text",...N("duration_days"),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent pr-14"}),(0,r.jsx)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"jour(s)"})]})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center gap-2",children:["Prix de la formation ",(0,r.jsx)("span",{className:"text-gray-400",children:"ðŸ”—"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)("span",{className:"text-gray-500 sm:text-sm",children:"Ent."})}),(0,r.jsx)("input",{type:"text",...N("price_enterprise"),className:"w-full pl-10 px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent",placeholder:"Entreprise"}),(0,r.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,r.jsx)("span",{className:"text-gray-500 sm:text-sm",children:"â‚¬"})})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)("span",{className:"text-gray-500 sm:text-sm",children:"Par."})}),(0,r.jsx)("input",{type:"text",...N("price_individual"),className:"w-full pl-10 px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent",placeholder:"Particulier"}),(0,r.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,r.jsx)("span",{className:"text-gray-500 sm:text-sm",children:"â‚¬"})})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)("span",{className:"text-gray-500 sm:text-sm",children:"Ind."})}),(0,r.jsx)("input",{type:"text",...N("price_freelance"),className:"w-full pl-10 px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent",placeholder:"IndÃ©pendant"}),(0,r.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,r.jsx)("span",{className:"text-gray-500 sm:text-sm",children:"â‚¬"})})]})]})]})]}),(0,r.jsxs)("div",{className:"w-full lg:w-80 space-y-6",children:[(0,r.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-100",children:[(0,r.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:"Photo du programme"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mb-4",children:"JPG, PNG ou WebP, â‰¤ 500Ko"}),v?(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)("img",{src:v,alt:"Preview",className:"w-full h-40 object-cover rounded-lg border border-gray-200"}),(0,r.jsx)("button",{type:"button",onClick:()=>j(null),className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:(0,r.jsx)("div",{className:"h-4 w-4",children:"Ã—"})})]}):(0,r.jsxs)("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[(0,r.jsx)(p.Upload,{className:"w-8 h-8 text-gray-400 mb-2"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 font-medium",children:"Charger"})]}),(0,r.jsx)("input",{type:"file",className:"hidden",accept:"image/*",onChange:e=>{let r=e.target.files?.[0];if(r){let e=new FileReader;e.onloadend=()=>{j(e.result)},e.readAsDataURL(r)}}})]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("label",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer border border-transparent hover:border-gray-100",children:[(0,r.jsx)("input",{type:"checkbox",...N("published_online"),className:"w-5 h-5 text-brand-blue rounded border-gray-300 focus:ring-brand-blue"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Publier sur le catalogue en ligne"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer border border-transparent hover:border-gray-100",children:[(0,r.jsx)("input",{type:"checkbox",...N("eligible_cpf"),className:"w-5 h-5 text-brand-blue rounded border-gray-300 focus:ring-brand-blue"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Eligible CPF (Compte Personnel Formation)"})]}),q("eligible_cpf")&&(0,r.jsx)("input",{type:"text",...N("cpf_code"),className:"w-full px-4 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent ml-8 mt-1",placeholder:"Code CPF"})]})]})]})]})}),(0,r.jsx)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:(0,r.jsxs)(b.Accordion,{type:"multiple",className:"w-full",children:[(0,r.jsxs)(b.AccordionItem,{value:"modalities",children:[(0,r.jsx)(b.AccordionTrigger,{className:"px-6 hover:bg-gray-50",children:"ModalitÃ©s"}),(0,r.jsx)(b.AccordionContent,{className:"px-6",children:(0,r.jsx)("textarea",{...N("modalities"),rows:4,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent",placeholder:"ModalitÃ©s de la formation..."})})]}),(0,r.jsxs)(b.AccordionItem,{value:"type",children:[(0,r.jsx)(b.AccordionTrigger,{className:"px-6 hover:bg-gray-50",children:"Type d'action de formation"}),(0,r.jsx)(b.AccordionContent,{className:"px-6",children:(0,r.jsx)("textarea",{...N("training_action_type"),rows:3,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent"})})]}),(0,r.jsxs)(b.AccordionItem,{value:"description",children:[(0,r.jsx)(b.AccordionTrigger,{className:"px-6 hover:bg-gray-50",children:"Description du programme"}),(0,r.jsx)(b.AccordionContent,{className:"px-6",children:(0,r.jsx)("textarea",{...N("description"),rows:6,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent"})})]}),(0,r.jsxs)(b.AccordionItem,{value:"objectives",children:[(0,r.jsx)(b.AccordionTrigger,{className:"px-6 hover:bg-gray-50",children:"Objectifs pÃ©dagogiques"}),(0,r.jsx)(b.AccordionContent,{className:"px-6",children:(0,r.jsx)("textarea",{...N("pedagogical_objectives"),rows:4,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent"})})]}),(0,r.jsxs)(b.AccordionItem,{value:"profile",children:[(0,r.jsx)(b.AccordionTrigger,{className:"px-6 hover:bg-gray-50",children:"Profil des apprenants"}),(0,r.jsx)(b.AccordionContent,{className:"px-6",children:(0,r.jsx)("textarea",{...N("learner_profile"),rows:4,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent"})})]}),(0,r.jsxs)(b.AccordionItem,{value:"content",children:[(0,r.jsx)(b.AccordionTrigger,{className:"px-6 hover:bg-gray-50",children:"Contenu de la formation (progression pÃ©dagogique)"}),(0,r.jsx)(b.AccordionContent,{className:"px-6",children:(0,r.jsx)("textarea",{...N("training_content"),rows:8,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent"})})]}),(0,r.jsxs)(b.AccordionItem,{value:"followup",children:[(0,r.jsx)(b.AccordionTrigger,{className:"px-6 hover:bg-gray-50",children:"Suivi de l'exÃ©cution"}),(0,r.jsx)(b.AccordionContent,{className:"px-6",children:(0,r.jsx)("textarea",{...N("execution_follow_up"),rows:4,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent"})})]}),(0,r.jsxs)(b.AccordionItem,{value:"certification",children:[(0,r.jsx)(b.AccordionTrigger,{className:"px-6 hover:bg-gray-50",children:"ModalitÃ©s de certification"}),(0,r.jsx)(b.AccordionContent,{className:"px-6",children:(0,r.jsx)("textarea",{...N("certification_modalities"),rows:4,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent"})})]}),(0,r.jsxs)(b.AccordionItem,{value:"quality",children:[(0,r.jsx)(b.AccordionTrigger,{className:"px-6 hover:bg-gray-50",children:"QualitÃ©"}),(0,r.jsx)(b.AccordionContent,{className:"px-6",children:(0,r.jsx)("textarea",{...N("quality"),rows:4,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent"})})]}),(0,r.jsxs)(b.AccordionItem,{value:"accounting",children:[(0,r.jsx)(b.AccordionTrigger,{className:"px-6 hover:bg-gray-50",children:"Configuration comptable du produit"}),(0,r.jsx)(b.AccordionContent,{className:"px-6",children:(0,r.jsx)("textarea",{...N("accounting_product_config"),rows:2,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent"})})]}),(0,r.jsxs)(b.AccordionItem,{value:"competences",children:[(0,r.jsx)(b.AccordionTrigger,{className:"px-6 hover:bg-gray-50",children:"Domaines de compÃ©tences"}),(0,r.jsx)(b.AccordionContent,{className:"px-6",children:(0,r.jsx)("textarea",{...N("competence_domains"),rows:2,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-blue focus:border-transparent"})})]})]})}),(0,r.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4 lg:pl-72 flex justify-between items-center z-50",children:(0,r.jsxs)(d.Button,{onClick:w(C),className:"bg-brand-blue hover:bg-brand-blue/90 text-white",disabled:P.isPending,children:[P.isPending?(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):(0,r.jsx)(c.Save,{className:"h-4 w-4 mr-2"}),"Enregistrer"]})})]})]})}e.s(["default",()=>z])}]);