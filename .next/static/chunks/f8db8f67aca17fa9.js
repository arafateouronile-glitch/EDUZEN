(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,503116,e=>{"use strict";let s=(0,e.i(475254).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>s],503116)},127341,e=>{"use strict";var s=e.i(843476),t=e.i(271645),i=e.i(647163);let a=t.createContext(void 0);function r({value:e,defaultValue:r,onValueChange:n,children:d,className:l}){let c=void 0!==e,[o,u]=t.useState(r??"");t.useEffect(()=>{c||void 0===r||u(r)},[r]);let g=c?e:o,h=t.useCallback(e=>{c||u(e),n?.(e)},[c,n]);return(0,s.jsx)(a.Provider,{value:{value:g,onValueChange:h},children:(0,s.jsx)("div",{className:(0,i.cn)("w-full",l),children:d})})}function n(){let e=t.useContext(a);if(!e)throw Error("Tabs components must be used within a Tabs component");return e}function d({children:e,className:t}){return(0,s.jsx)("div",{className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-lg bg-bg-gray-100 p-1 text-text-tertiary",t),children:e})}function l({value:e,children:t,className:a}){let{value:r,onValueChange:d}=n(),l=r===e;return(0,s.jsx)("button",{type:"button",onClick:()=>d(e),className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-outline-none focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",l?"bg-white text-text-primary shadow-sm":"text-text-tertiary hover:text-text-primary",a),children:t})}function c({value:e,children:t,className:a}){let{value:r}=n();return r!==e?null:(0,s.jsx)("div",{className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),children:t})}e.s(["Tabs",()=>r,"TabsContent",()=>c,"TabsList",()=>d,"TabsTrigger",()=>l])},870273,e=>{"use strict";let s=(0,e.i(475254).default)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);e.s(["Star",()=>s],870273)},660724,e=>{"use strict";var s=e.i(920755);let t=new class{supabase;constructor(e){this.supabase=e||(0,s.createClient)()}async getFAQCategories(e){let{data:s,error:t}=await this.supabase.from("faq_categories").select("*").eq("organization_id",e).eq("is_active",!0).order("order_index",{ascending:!0});if(t)throw t;return s}async createFAQCategory(e){let{data:s,error:t}=await this.supabase.from("faq_categories").insert(e).select().single();if(t)throw t;return s}async updateFAQCategory(e,s){let{data:t,error:i}=await this.supabase.from("faq_categories").update(s).eq("id",e).select().single();if(i)throw i;return t}async deleteFAQCategory(e){let{error:s}=await this.supabase.from("faq_categories").delete().eq("id",e);if(s)throw s}async getFAQItems(e,s){let t=this.supabase.from("faq_items").select("*, category:faq_categories(*)").eq("organization_id",e).eq("is_active",!0);s?.categoryId&&(t=t.eq("category_id",s.categoryId)),s?.search&&(t=t.or(`question.ilike.%${s.search}%,answer.ilike.%${s.search}%`)),s?.featured&&(t=t.eq("is_featured",!0));let{data:i,error:a}=await t.order("order_index",{ascending:!0}).order("view_count",{ascending:!1});if(a)throw a;return i}async getFAQItemById(e){let{data:s,error:t}=await this.supabase.from("faq_items").select("*, category:faq_categories(*)").eq("id",e).single();if(t)throw t;return s&&await this.supabase.rpc("increment_faq_view_count",{faq_uuid:s.id}),s}async createFAQItem(e){let{data:s,error:t}=await this.supabase.from("faq_items").insert(e).select().single();if(t)throw t;return s}async updateFAQItem(e,s){let{data:t,error:i}=await this.supabase.from("faq_items").update(s).eq("id",e).select().single();if(i)throw i;return t}async deleteFAQItem(e){let{error:s}=await this.supabase.from("faq_items").delete().eq("id",e);if(s)throw s}async createFAQFeedback(e,s,t,i){let{data:a,error:r}=await this.supabase.from("faq_feedback").insert({faq_id:e,user_id:s,is_helpful:t,comment:i}).select().single();if(r)throw r;return a}async getGuides(e,s){let t=this.supabase.from("guides").select("*, author:users(id, full_name, email)").eq("organization_id",e).eq("is_active",!0);s?.category&&(t=t.eq("category",s.category)),s?.difficulty&&(t=t.eq("difficulty",s.difficulty)),s?.search&&(t=t.or(`title.ilike.%${s.search}%,description.ilike.%${s.search}%,content.ilike.%${s.search}%`)),s?.featured&&(t=t.eq("is_featured",!0));let{data:i,error:a}=await t.order("published_at",{ascending:!1}).order("view_count",{ascending:!1});if(a)throw a;return i}async getGuideBySlug(e,s){let{data:t,error:i}=await this.supabase.from("guides").select("*, author:users(id, full_name, email), steps:guide_steps(*)").eq("slug",e).eq("organization_id",s).eq("is_active",!0).single();if(i)throw i;return t&&await this.supabase.rpc("increment_guide_view_count",{guide_uuid:t.id}),t}async createGuide(e){let{data:s,error:t}=await this.supabase.from("guides").insert(e).select().single();if(t)throw t;return s}async updateGuide(e,s){let{data:t,error:i}=await this.supabase.from("guides").update(s).eq("id",e).select().single();if(i)throw i;return t}async deleteGuide(e){let{error:s}=await this.supabase.from("guides").delete().eq("id",e);if(s)throw s}async getGuideSteps(e){let{data:s,error:t}=await this.supabase.from("guide_steps").select("*").eq("guide_id",e).order("step_number",{ascending:!0});if(t)throw t;return s}async createGuideStep(e){let{data:s,error:t}=await this.supabase.from("guide_steps").insert(e).select().single();if(t)throw t;return s}async updateGuideStep(e,s){let{data:t,error:i}=await this.supabase.from("guide_steps").update(s).eq("id",e).select().single();if(i)throw i;return t}async deleteGuideStep(e){let{error:s}=await this.supabase.from("guide_steps").delete().eq("id",e);if(s)throw s}async addGuideToFavorites(e,s){let{data:t,error:i}=await this.supabase.from("guide_favorites").insert({user_id:e,guide_id:s}).select().single();if(i)throw i;return t}async removeGuideFromFavorites(e,s){let{error:t}=await this.supabase.from("guide_favorites").delete().eq("user_id",e).eq("guide_id",s);if(t)throw t}async isGuideFavorite(e,s){let{data:t,error:i}=await this.supabase.from("guide_favorites").select("id").eq("user_id",e).eq("guide_id",s).maybeSingle();if(i)throw i;return!!t}async getUserFavoriteGuides(e){let{data:s,error:t}=await this.supabase.from("guide_favorites").select("*, guide:guides(*, author:users(id, full_name))").eq("user_id",e).order("created_at",{ascending:!1});if(t)throw t;return s}async getGuideProgress(e,s){let{data:t,error:i}=await this.supabase.from("guide_progress").select("*").eq("user_id",e).eq("guide_id",s).maybeSingle();if(i)throw i;return t}async updateGuideProgress(e,s,t,i){let a=await this.getGuideProgress(e,s),r=await this.getGuideSteps(s),n=i.length===r.length;if(a){let{data:e,error:s}=await this.supabase.from("guide_progress").update({current_step:t,completed_steps:i,is_completed:n,completed_at:n?new Date().toISOString():null}).eq("id",a.id).select().single();if(s)throw s;return e}{let{data:a,error:r}=await this.supabase.from("guide_progress").insert({user_id:e,guide_id:s,current_step:t,completed_steps:i,is_completed:n,completed_at:n?new Date().toISOString():null}).select().single();if(r)throw r;return a}}async markStepAsCompleted(e,s,t){let i=await this.getGuideProgress(e,s),a=i?.completed_steps||[];return a.includes(t)||a.push(t),this.updateGuideProgress(e,s,t,a)}};e.s(["knowledgeBaseService",0,t])},592942,e=>{"use strict";var s=e.i(843476),t=e.i(271645),i=e.i(266027),a=e.i(325715),r=e.i(660724),n=e.i(970065),d=e.i(23750),l=e.i(127341),c=e.i(555436),o=e.i(520958),u=e.i(810980),g=e.i(870273),h=e.i(503116),m=e.i(463059),f=e.i(522016),x=e.i(918789);function p(){let{user:e}=(0,a.useAuth)(),[p,b]=(0,t.useState)(""),[w,_]=(0,t.useState)("faq"),{data:y}=(0,i.useQuery)({queryKey:["faq-categories",e?.organization_id],queryFn:()=>r.knowledgeBaseService.getFAQCategories(e?.organization_id||""),enabled:!!e?.organization_id}),{data:j}=(0,i.useQuery)({queryKey:["faq-items",e?.organization_id,p],queryFn:()=>r.knowledgeBaseService.getFAQItems(e?.organization_id||"",{search:p||void 0}),enabled:!!e?.organization_id}),{data:v}=(0,i.useQuery)({queryKey:["guides",e?.organization_id,p],queryFn:()=>r.knowledgeBaseService.getGuides(e?.organization_id||"",{search:p||void 0}),enabled:!!e?.organization_id}),{data:q}=(0,i.useQuery)({queryKey:["featured-guides",e?.organization_id],queryFn:()=>r.knowledgeBaseService.getGuides(e?.organization_id||"",{featured:!0}),enabled:!!e?.organization_id}),{data:N}=(0,i.useQuery)({queryKey:["featured-faqs",e?.organization_id],queryFn:()=>r.knowledgeBaseService.getFAQItems(e?.organization_id||"",{featured:!0}),enabled:!!e?.organization_id}),C=e=>{switch(e){case"beginner":return"bg-green-100 text-green-800";case"intermediate":return"bg-yellow-100 text-yellow-800";case"advanced":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},k=e=>{switch(e){case"beginner":return"Débutant";case"intermediate":return"Intermédiaire";case"advanced":return"Avancé";default:return e}};return(0,s.jsxs)("div",{className:"container mx-auto py-8 px-4 max-w-7xl",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Base de connaissances"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Trouvez des réponses rapides et des guides détaillés"})]}),(0,s.jsx)(n.Card,{className:"mb-8",children:(0,s.jsx)(n.CardContent,{className:"pt-6",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(c.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),(0,s.jsx)(d.Input,{type:"text",placeholder:"Rechercher dans la base de connaissances...",value:p,onChange:e=>b(e.target.value),className:"pl-10"})]})})}),(0,s.jsxs)(l.Tabs,{value:w,onValueChange:_,children:[(0,s.jsxs)(l.TabsList,{className:"mb-6",children:[(0,s.jsxs)(l.TabsTrigger,{value:"faq",children:[(0,s.jsx)(o.HelpCircle,{className:"h-4 w-4 mr-2"}),"FAQ"]}),(0,s.jsxs)(l.TabsTrigger,{value:"guides",children:[(0,s.jsx)(u.BookOpen,{className:"h-4 w-4 mr-2"}),"Guides"]})]}),(0,s.jsxs)(l.TabsContent,{value:"faq",children:[N&&N.length>0&&(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)("h2",{className:"text-2xl font-semibold mb-4 flex items-center gap-2",children:[(0,s.jsx)(g.Star,{className:"h-6 w-6 text-yellow-500"}),"Questions fréquentes en vedette"]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:N.map(e=>(0,s.jsx)(n.Card,{className:"hover:shadow-lg transition-shadow",children:(0,s.jsxs)(f.default,{href:`/dashboard/knowledge-base/faq/${e.id}`,children:[(0,s.jsx)(n.CardHeader,{children:(0,s.jsx)(n.CardTitle,{className:"text-lg",children:e.question})}),(0,s.jsxs)(n.CardContent,{children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground line-clamp-2",children:(0,s.jsx)(x.default,{children:e.answer})}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-4 text-xs text-muted-foreground",children:[(0,s.jsx)("span",{children:e.category?.name}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("span",{children:[e.view_count," vues"]}),e.helpful_count>0&&(0,s.jsxs)("span",{className:"text-green-600",children:[e.helpful_count," utile",e.helpful_count>1?"s":""]})]})]})]})]})},e.id))})]}),y&&y.length>0&&(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Par catégorie"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map(e=>{let t=j?.filter(s=>s.category_id===e.id)||[];return(0,s.jsx)(n.Card,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:(0,s.jsxs)(f.default,{href:`/dashboard/knowledge-base/faq/category/${e.slug}`,children:[(0,s.jsxs)(n.CardHeader,{children:[(0,s.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[e.icon&&(0,s.jsx)("span",{className:"text-2xl",children:e.icon}),e.name]}),e.description&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description})]}),(0,s.jsx)(n.CardContent,{children:(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:[t.length," question",t.length>1?"s":""]})})]})},e.id)})})]}),j&&j.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Toutes les questions"}),(0,s.jsx)("div",{className:"space-y-4",children:j.map(e=>(0,s.jsx)(n.Card,{className:"hover:shadow-lg transition-shadow",children:(0,s.jsx)(f.default,{href:`/dashboard/knowledge-base/faq/${e.id}`,children:(0,s.jsx)(n.CardContent,{className:"pt-6",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"font-semibold text-lg mb-2",children:e.question}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground line-clamp-2",children:(0,s.jsx)(x.default,{children:e.answer})}),(0,s.jsxs)("div",{className:"flex items-center gap-4 mt-3 text-xs text-muted-foreground",children:[(0,s.jsx)("span",{children:e.category?.name}),(0,s.jsxs)("span",{children:[e.view_count," vues"]}),e.helpful_count>0&&(0,s.jsxs)("span",{className:"text-green-600",children:[e.helpful_count," utile",e.helpful_count>1?"s":""]})]})]}),(0,s.jsx)(m.ChevronRight,{className:"h-5 w-5 text-muted-foreground"})]})})})},e.id))})]})]}),(0,s.jsxs)(l.TabsContent,{value:"guides",children:[q&&q.length>0&&(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)("h2",{className:"text-2xl font-semibold mb-4 flex items-center gap-2",children:[(0,s.jsx)(g.Star,{className:"h-6 w-6 text-yellow-500"}),"Guides en vedette"]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:q.map(e=>(0,s.jsx)(n.Card,{className:"hover:shadow-lg transition-shadow",children:(0,s.jsxs)(f.default,{href:`/dashboard/knowledge-base/guides/${e.slug}`,children:[(0,s.jsxs)(n.CardHeader,{children:[(0,s.jsx)(n.CardTitle,{className:"text-lg",children:e.title}),e.description&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description})]}),(0,s.jsx)(n.CardContent,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[(0,s.jsx)("span",{className:`px-2 py-1 rounded ${C(e.difficulty)}`,children:k(e.difficulty)}),e.estimated_time_minutes&&(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(h.Clock,{className:"h-3 w-3"}),(0,s.jsxs)("span",{children:[e.estimated_time_minutes," min"]})]})]})})]})},e.id))})]}),v&&v.length>0?(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Tous les guides"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:v.map(e=>(0,s.jsx)(n.Card,{className:"hover:shadow-lg transition-shadow",children:(0,s.jsxs)(f.default,{href:`/dashboard/knowledge-base/guides/${e.slug}`,children:[(0,s.jsxs)(n.CardHeader,{children:[(0,s.jsx)(n.CardTitle,{children:e.title}),e.description&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description})]}),(0,s.jsx)(n.CardContent,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:`px-2 py-1 rounded ${C(e.difficulty)}`,children:k(e.difficulty)}),e.category&&(0,s.jsx)("span",{children:e.category})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[e.estimated_time_minutes&&(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(h.Clock,{className:"h-3 w-3"}),(0,s.jsxs)("span",{children:[e.estimated_time_minutes," min"]})]}),(0,s.jsxs)("span",{children:[e.view_count," vues"]})]})]})})]})},e.id))})]}):(0,s.jsx)(n.Card,{children:(0,s.jsx)(n.CardContent,{className:"pt-6 text-center text-muted-foreground",children:"Aucun guide disponible"})})]})]})]})}e.s(["default",()=>p])}]);