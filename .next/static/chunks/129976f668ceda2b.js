(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,645760,e=>{"use strict";var s=e.i(843476),t=e.i(271645),a=e.i(647163);e.i(882205);var i=e.i(846932);let l=t.forwardRef(({className:e,variant:t="default",hoverable:l=!1,glow:r=!1,glowColor:n="rgba(51, 90, 207, 0.3)",...c},o)=>(0,s.jsxs)(i.motion.div,{ref:o,className:(0,a.cn)("relative rounded-2xl border backdrop-blur-xl transition-all duration-300",{"bg-white/70 dark:bg-gray-900/70 border-white/20 dark:border-gray-700/30 shadow-lg":"default"===t,"bg-white/80 dark:bg-gray-900/80 border-white/30 dark:border-gray-700/40 shadow-xl":"premium"===t,"bg-white/50 dark:bg-gray-900/50 border-white/10 dark:border-gray-700/20 shadow-md":"subtle"===t,"cursor-pointer":l,"hover:shadow-2xl hover:scale-[1.02]":l,"hover:bg-white/90 dark:hover:bg-gray-900/90":l},e),whileHover:l?{scale:1.02,y:-2}:void 0,transition:{type:"spring",stiffness:300,damping:30},...c,children:[r&&(0,s.jsx)(i.motion.div,{className:"absolute inset-0 rounded-2xl opacity-0 blur-xl",style:{background:`radial-gradient(circle, ${n} 0%, transparent 70%)`},animate:{opacity:[0,.5,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}}),(0,s.jsx)("div",{className:"relative z-10",children:c.children})]}));l.displayName="GlassCard",e.s(["GlassCard",()=>l])},263488,e=>{"use strict";let s=(0,e.i(475254).default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);e.s(["Mail",()=>s],263488)},514764,e=>{"use strict";let s=(0,e.i(475254).default)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);e.s(["Send",()=>s],514764)},669671,e=>{"use strict";let s=new class{async blobToBase64(e){return new Promise((s,t)=>{let a=new FileReader;a.onloadend=()=>{s(a.result.split(",")[1])},a.onerror=t,a.readAsDataURL(e)})}async sendEmail(e){try{let s=e.attachments?await Promise.all(e.attachments.map(async e=>{let s;if(e.content instanceof Blob)s=await this.blobToBase64(e.content);else if(e.content instanceof ArrayBuffer){let t=new Blob([e.content],{type:e.contentType});s=await this.blobToBase64(t)}else s=e.content;return{filename:e.filename,content:s,contentType:e.contentType}})):void 0,t=await fetch("/api/email/send",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({to:e.to,subject:e.subject,html:e.html,text:e.text,attachments:s,cc:e.cc,bcc:e.bcc,replyTo:e.replyTo})});if(!t.ok){let e=await t.json();throw Error(e.message||"Erreur lors de l'envoi de l'email")}let a=await t.json();return{success:!0,message:a.message||"Email envoyé avec succès"}}catch(e){throw Error(e instanceof Error?e.message:"Erreur lors de l'envoi de l'email")}}async sendDocument(e,s,t,a,i,l){return this.sendEmail({to:e,subject:s,html:i,text:l,attachments:[{filename:a,content:t,contentType:"application/pdf"}]})}async sendMultipleDocuments(e,s,t,a,i){return this.sendEmail({to:e,subject:s,html:a,text:i,attachments:t.map(e=>({filename:e.filename,content:e.blob,contentType:"application/pdf"}))})}};e.s(["emailService",0,s])},1966,e=>{"use strict";var s=e.i(247167),t=e.i(843476),a=e.i(271645),i=e.i(954616),l=e.i(325715),r=e.i(669671),n=e.i(167881),c=e.i(23750),o=e.i(10708),d=e.i(184762),m=e.i(645760),x=e.i(6799),u=e.i(263488),h=e.i(514764),p=e.i(465286),b=e.i(898791),v=e.i(629377);function g(){let{user:e}=(0,l.useAuth)(),{addToast:g}=(0,x.useToast)(),[j,y]=(0,a.useState)({to:"",subject:"Test d'envoi d'email - EDUZEN",html:`
      <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;">
        <h1 style="color: #335ACF;">Test d'envoi d'email</h1>
        <p>Bonjour,</p>
        <p>Ceci est un email de test depuis l'application EDUZEN.</p>
        <p>Si vous recevez cet email, cela signifie que la configuration d'envoi d'emails fonctionne correctement.</p>
        <hr style="border: none; border-top: 1px solid #eee; margin: 20px 0;">
        <p style="color: #666; font-size: 12px;">
          Cet email a \xe9t\xe9 envoy\xe9 depuis le syst\xe8me de test d'emails.
        </p>
      </div>
    `,text:"Test d'envoi d'email - EDUZEN\n\nBonjour,\n\nCeci est un email de test depuis l'application EDUZEN.\n\nSi vous recevez cet email, cela signifie que la configuration d'envoi d'emails fonctionne correctement."}),f=(0,i.useMutation)({mutationFn:async()=>r.emailService.sendEmail({to:j.to,subject:j.subject,html:j.html,text:j.text}),onSuccess:e=>{g({type:"success",title:"Email envoyé",description:e.message||"L'email de test a été envoyé avec succès."})},onError:e=>{g({type:"error",title:"Erreur",description:e.message||"Une erreur est survenue lors de l'envoi de l'email."})}}),N="true"===s.default.env.NEXT_PUBLIC_RESEND_CONFIGURED;return(0,t.jsxs)("div",{className:"space-y-6 pb-8 max-w-4xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-brand-blue-ghost rounded-xl",children:(0,t.jsx)(u.Mail,{className:"h-8 w-8 text-brand-blue"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-gray-900 tracking-tight",children:"Test d'envoi d'emails"}),(0,t.jsx)("p",{className:"text-gray-500 font-medium mt-1",children:"Tester la configuration d'envoi d'emails"})]})]}),(0,t.jsx)(m.GlassCard,{variant:"premium",className:"p-6",children:(0,t.jsx)("div",{className:"flex items-start gap-4",children:N?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.CheckCircle2,{className:"h-6 w-6 text-green-600 flex-shrink-0 mt-0.5"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:"Resend configuré"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"La clé API Resend est configurée. Les emails seront envoyés en production."})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(b.AlertCircle,{className:"h-6 w-6 text-amber-600 flex-shrink-0 mt-0.5"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:"Mode test activé"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Aucune clé API Resend trouvée. Les emails sont simulés (aucun email réel ne sera envoyé)."}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["Pour activer l'envoi réel : ajoutez ",(0,t.jsx)("code",{className:"bg-gray-100 px-1 rounded",children:"RESEND_API_KEY"})," dans votre fichier ",(0,t.jsx)("code",{className:"bg-gray-100 px-1 rounded",children:".env.local"})]})]})]})})}),(0,t.jsx)(m.GlassCard,{variant:"default",className:"p-6",children:(0,t.jsxs)("form",{onSubmit:e=>{(e.preventDefault(),j.to)?f.mutate():g({type:"error",title:"Erreur",description:"Veuillez saisir une adresse email de destination."})},className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(o.Label,{htmlFor:"to",className:"text-base font-semibold",children:"Destinataire *"}),(0,t.jsx)(c.Input,{id:"to",type:"email",placeholder:"votre-email@exemple.com",value:j.to,onChange:e=>y({...j,to:e.target.value}),required:!0,className:"mt-2"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Entrez votre adresse email pour recevoir l'email de test"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(o.Label,{htmlFor:"subject",className:"text-base font-semibold",children:"Sujet"}),(0,t.jsx)(c.Input,{id:"subject",type:"text",value:j.subject,onChange:e=>y({...j,subject:e.target.value}),className:"mt-2"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(o.Label,{htmlFor:"html",className:"text-base font-semibold",children:"Contenu HTML"}),(0,t.jsx)(d.Textarea,{id:"html",rows:10,value:j.html,onChange:e=>y({...j,html:e.target.value}),className:"mt-2 font-mono text-sm"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Contenu HTML de l'email"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(o.Label,{htmlFor:"text",className:"text-base font-semibold",children:"Contenu texte (alternative)"}),(0,t.jsx)(d.Textarea,{id:"text",rows:5,value:j.text,onChange:e=>y({...j,text:e.target.value}),className:"mt-2"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Version texte de l'email (pour les clients email qui ne supportent pas HTML)"})]}),(0,t.jsx)("div",{className:"flex items-center justify-end gap-3 pt-4 border-t",children:(0,t.jsx)(n.Button,{type:"submit",disabled:f.isPending||!j.to,className:"min-w-[150px]",children:f.isPending?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Envoi..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.Send,{className:"mr-2 h-4 w-4"}),"Envoyer l'email de test"]})})})]})}),(0,t.jsxs)(m.GlassCard,{variant:"default",className:"p-6",children:[(0,t.jsxs)("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,t.jsx)(b.AlertCircle,{className:"h-5 w-5 text-brand-blue"}),"Instructions"]}),(0,t.jsxs)("div",{className:"space-y-3 text-sm text-gray-600",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900 mb-1",children:"1. Configuration Resend"}),(0,t.jsxs)("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[(0,t.jsxs)("li",{children:["Créez un compte sur ",(0,t.jsx)("a",{href:"https://resend.com",target:"_blank",rel:"noopener noreferrer",className:"text-brand-blue hover:underline",children:"resend.com"})]}),(0,t.jsx)("li",{children:"Obtenez votre clé API dans le dashboard"}),(0,t.jsxs)("li",{children:["Ajoutez ",(0,t.jsx)("code",{className:"bg-gray-100 px-1 rounded",children:"RESEND_API_KEY=re_votre_cle"})," dans ",(0,t.jsx)("code",{className:"bg-gray-100 px-1 rounded",children:".env.local"})]}),(0,t.jsx)("li",{children:"Redémarrez le serveur Next.js"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900 mb-1",children:"2. Test"}),(0,t.jsxs)("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[(0,t.jsx)("li",{children:'Entrez votre adresse email dans le champ "Destinataire"'}),(0,t.jsx)("li",{children:"Personnalisez le sujet et le contenu si nécessaire"}),(0,t.jsx)("li",{children:'Cliquez sur "Envoyer l\'email de test"'}),(0,t.jsx)("li",{children:"Vérifiez votre boîte de réception (et les spams)"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900 mb-1",children:"3. Mode test"}),(0,t.jsx)("p",{className:"ml-2",children:"Si Resend n'est pas configuré, les emails sont simulés. Vous verrez les logs dans la console serveur mais aucun email réel ne sera envoyé."})]})]})]})]})}e.s(["default",()=>g])}]);