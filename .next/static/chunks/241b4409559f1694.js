(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,871689,e=>{"use strict";let r=(0,e.i(475254).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>r],871689)},246704,779478,e=>{"use strict";var r,t,a=e.i(790224),s=((r={}).AUTH_REQUIRED="AUTH_1001",r.AUTH_INVALID_CREDENTIALS="AUTH_1002",r.AUTH_SESSION_EXPIRED="AUTH_1003",r.AUTH_INSUFFICIENT_PERMISSIONS="AUTH_1004",r.AUTH_2FA_REQUIRED="AUTH_1005",r.AUTH_2FA_INVALID="AUTH_1006",r.VALIDATION_ERROR="VALID_2001",r.VALIDATION_REQUIRED_FIELD="VALID_2002",r.VALIDATION_INVALID_FORMAT="VALID_2003",r.VALIDATION_UNIQUE_CONSTRAINT="VALID_2004",r.DB_CONNECTION_ERROR="DB_3001",r.DB_QUERY_ERROR="DB_3002",r.DB_NOT_FOUND="DB_3003",r.DB_CONSTRAINT_VIOLATION="DB_3004",r.DB_FOREIGN_KEY_CONSTRAINT="DB_3006",r.DB_RLS_POLICY_VIOLATION="DB_3005",r.NETWORK_ERROR="NET_4001",r.API_TIMEOUT="NET_4002",r.API_RATE_LIMIT="NET_4003",r.API_SERVER_ERROR="NET_4004",r.API_NOT_FOUND="NET_4005",r.API_BAD_REQUEST="NET_4006",r.BUSINESS_LOGIC_ERROR="BIZ_5001",r.RESOURCE_LOCKED="BIZ_5002",r.OPERATION_NOT_ALLOWED="BIZ_5003",r.QUOTA_EXCEEDED="BIZ_5004",r.INTERNAL_ERROR="SYS_6001",r.CONFIGURATION_ERROR="SYS_6002",r.SERVICE_UNAVAILABLE="SYS_6003",r);(t={}).LOW="low",t.MEDIUM="medium",t.HIGH="high",t.CRITICAL="critical";class n extends Error{code;severity;userMessage;retryable;context;originalError;constructor(e,r="SYS_6001",t="medium",a={},s){super(e),this.name="AppError",this.code=r,this.severity=t,this.userMessage=a.userMessage||this.getDefaultUserMessage(r),this.retryable=a.retryable??this.isRetryable(r),this.context={...a,code:r,severity:t,timestamp:new Date().toISOString()},this.originalError=s,Error.captureStackTrace&&Error.captureStackTrace(this,n)}getDefaultUserMessage(e){return({AUTH_1001:"Vous devez être connecté pour effectuer cette action.",AUTH_1002:"Email ou mot de passe incorrect.",AUTH_1003:"Votre session a expiré. Veuillez vous reconnecter.",AUTH_1004:"Vous n'avez pas les permissions nécessaires.",AUTH_1005:"Authentification à deux facteurs requise.",AUTH_1006:"Code d'authentification invalide.",VALID_2001:"Les données fournies ne sont pas valides.",VALID_2002:"Certains champs obligatoires sont manquants.",VALID_2003:"Le format des données est incorrect.",VALID_2004:"Cette valeur existe déjà.",DB_3001:"Impossible de se connecter à la base de données.",DB_3002:"Erreur lors de l'exécution de la requête.",DB_3003:"Ressource introuvable.",DB_3004:"Cette opération viole une contrainte de la base de données.",DB_3006:"Cette opération viole une contrainte de clé étrangère.",DB_3005:"Vous n'avez pas accès à cette ressource.",NET_4001:"Erreur de connexion réseau. Vérifiez votre connexion internet.",NET_4002:"La requête a pris trop de temps. Veuillez réessayer.",NET_4003:"Trop de requêtes. Veuillez patienter quelques instants.",NET_4004:"Erreur serveur. Veuillez réessayer plus tard.",NET_4005:"Ressource introuvable.",NET_4006:"Requête invalide.",BIZ_5001:"Cette opération n'est pas autorisée dans le contexte actuel.",BIZ_5002:"Cette ressource est actuellement verrouillée.",BIZ_5003:"Cette opération n'est pas autorisée.",BIZ_5004:"Vous avez atteint la limite autorisée.",SYS_6001:"Une erreur interne est survenue. Veuillez réessayer.",SYS_6002:"Erreur de configuration du système.",SYS_6003:"Service temporairement indisponible."})[e]||"Une erreur inattendue est survenue."}isRetryable(e){return["NET_4001","NET_4002","NET_4004","DB_3001","SYS_6003"].includes(e)}toJSON(){return{name:this.name,message:this.message,code:this.code,severity:this.severity,userMessage:this.userMessage,retryable:this.retryable,context:this.context,stack:this.stack,originalError:this.originalError instanceof Error?{name:this.originalError.name,message:this.originalError.message,stack:this.originalError.stack}:this.originalError}}}let i=new class{handleError(e,r={}){if(e instanceof n)return this.logError(e),e;if(e instanceof Error)return this.handleStandardError(e,r);if(this.isSupabaseError(e))return this.handleSupabaseError(e,r);let t=new n("Une erreur inattendue est survenue.","SYS_6001","high",r,e);return this.logError(t),t}handleStandardError(e,r){let t=e.message.toLowerCase(),a="SYS_6001",s="medium";t.includes("network")||t.includes("fetch")?(a="NET_4001",s="medium"):t.includes("timeout")?(a="NET_4002",s="medium"):t.includes("unauthorized")||t.includes("401")?(a="AUTH_1001",s="high"):t.includes("forbidden")||t.includes("403")?(a="AUTH_1004",s="high"):t.includes("not found")||t.includes("404")?(a="DB_3003",s="low"):(t.includes("validation")||t.includes("invalid"))&&(a="VALID_2001",s="low");let i=new n(e.message,a,s,r,e);return this.logError(i),i}handleSupabaseError(e,r){let t=e.code||e.status,a=e.message||"Erreur Supabase",s=r.code||"DB_3002",i="medium";if(!r.code)switch(t){case"PGRST116":case"42P01":s="DB_3003",i="low";break;case"42501":s="DB_3005",i="high";break;case"23505":s="VALID_2004",i="low";break;case"23503":s="DB_3004",i="medium";break;case"PGRST301":case"400":s="NET_4006",i="low";break;case"401":s="AUTH_1001",i="high";break;case"403":s="AUTH_1004",i="high";break;case"404":s="NET_4005",i="low";break;case"500":s="NET_4004",i="high"}"DB_3006"===s&&(i="medium");let o=new n(a,s,i,r,e);return this.logError(o),o}isSupabaseError(e){return e&&(e.code||e.status||e.message)&&("string"==typeof e.code||"number"==typeof e.status)}logError(e){let r={...e.context,code:e.code,severity:e.severity,retryable:e.retryable};switch(e.severity){case"critical":case"high":a.logger.error(e.message,e.originalError||e,r);break;case"medium":a.logger.warn(e.message,r);break;case"low":a.logger.info(`Error: ${e.message}`,r)}}createValidationError(e,r){return new n(e,"VALID_2001","low",{field:r,userMessage:e})}createAuthError(e,r){return new n(r||"Erreur d'authentification",e,"high")}createDatabaseError(e,r){return new n(e,"DB_3002","medium",{},r)}createNotFoundError(e,r){return new n(e,"DB_3003","low",r)}};e.s(["AppError",()=>n,"ErrorCode",()=>s,"errorHandler",0,i],779478),e.s([],246704)},627404,e=>{"use strict";e.i(246704);var r=e.i(779478);async function t(e,t,a,s){try{let n=e.from(t).select(s?.select||"*").eq("organization_id",a);s?.filters&&Object.entries(s.filters).forEach(([e,r])=>{null!=r&&(n=n.eq(e,r))}),s?.search&&(n=n.ilike(s.search.field,`%${s.search.value}%`)),n=s?.orderBy?n.order(s.orderBy.column,{ascending:s.orderBy.ascending??!1}):n.order("created_at",{ascending:!1});let{data:i,error:o}=await n;if(o)throw r.errorHandler.handleError(o,{organizationId:a,operation:"getAllByOrganization",table:t});return i||[]}catch(e){if(e instanceof r.AppError)throw e;throw r.errorHandler.handleError(e,{organizationId:a,operation:"getAllByOrganization",table:t})}}async function a(e,t,a,s){try{let{data:n,error:i}=await e.from(t).select(s||"*").eq("id",a).single();if(i){if("PGRST116"===i.code||"42P01"===i.code)throw r.errorHandler.handleError(i,{code:r.ErrorCode.DB_NOT_FOUND,operation:"getById",id:a,table:t});throw r.errorHandler.handleError(i,{operation:"getById",id:a,table:t})}if(!n)throw r.errorHandler.createDatabaseError(`Enregistrement avec l'ID ${a} introuvable dans ${t}`,{id:a,table:t});return n}catch(e){if(e instanceof r.AppError)throw e;throw r.errorHandler.handleError(e,{operation:"getById",id:a,table:t})}}e.s(["getAllByOrganization",()=>t,"getById",()=>a])},34458,e=>{"use strict";e.i(246704);var r=e.i(779478);function t(e,t){for(let a of t)if(!e[a])throw r.errorHandler.createValidationError(`Le champ ${String(a)} est obligatoire`,String(a))}e.s(["validateRequired",()=>t])},163454,e=>{"use strict";var r=e.i(920755);e.i(246704);var t=e.i(779478),a=e.i(790224),s=e.i(627404);async function n(e,r,a,s){try{let n=s.year||new Date().getFullYear().toString().slice(-2),i=s.padding||6,o=s.fieldName||"number",l=`${s.prefix}-${s.orgCode}-${n}-%`,{data:d,error:c}=await e.from(r).select(o).eq("organization_id",a).like(o,l).order(o,{ascending:!1}).limit(1).maybeSingle();if(c&&"PGRST116"!==c.code&&"42P01"!==c.code)throw t.errorHandler.handleError(c,{operation:"generateUniqueNumber",table:r,organizationId:a});let u=1;if(d&&d[o]){let e=String(d[o]).split("-");u=parseInt(e[e.length-1]||"0",10)+1}return`${s.prefix}-${s.orgCode}-${n}-${String(u).padStart(i,"0")}`}catch(e){throw t.errorHandler.handleError(e,{operation:"generateUniqueNumber",table:r,organizationId:a})}}var i=e.i(34458);let o=new class{supabase;constructor(e){this.supabase=e||(0,r.createClient)()}async getAll(e,r){try{let a=r?.page||1,s=r?.limit||50,n=(a-1)*s;if(r?.search){let i=this.supabase.from("students").select("*, classes(id, name, level)",{count:"exact"}).eq("organization_id",e).or(`first_name.ilike.%${r.search}%,last_name.ilike.%${r.search}%,student_number.ilike.%${r.search}%`);r?.classId&&(i=i.eq("class_id",r.classId)),r?.status&&(i=i.eq("status",r.status));let{data:o,error:l,count:d}=await i.order("last_name",{ascending:!0}).range(n,n+s-1);if(l)throw t.errorHandler.handleError(l,{organizationId:e,operation:"getAll",filters:r});return{data:o||[],total:d||0,page:a,limit:s,totalPages:Math.ceil((d||0)/s)}}let i=this.supabase.from("students").select("*, classes(id, name, level)",{count:"exact"}).eq("organization_id",e);r?.classId&&(i=i.eq("class_id",r.classId)),r?.status&&(i=i.eq("status",r.status));let{data:o,error:l,count:d}=await i.order("last_name",{ascending:!0}).range(n,n+s-1);if(l)throw t.errorHandler.handleError(l,{organizationId:e,operation:"getAll",filters:r});return{data:o||[],total:d||0,page:a,limit:s,totalPages:Math.ceil((d||0)/s)}}catch(r){if(r instanceof t.AppError)throw r;throw t.errorHandler.handleError(r,{organizationId:e,operation:"getAll"})}}async getById(e){try{return(0,s.getById)(this.supabase,"students",e,"*, classes(id, name, level)")}catch(r){if(r instanceof t.AppError)throw r;throw t.errorHandler.handleError(r,{operation:"getById",id:e})}}async getByNumber(e,r){try{let{data:a,error:s}=await this.supabase.from("students").select("*").eq("organization_id",e).eq("student_number",r).single();if(s){if("PGRST116"===s.code||"42P01"===s.code)throw t.errorHandler.handleError(s,{code:t.ErrorCode.DB_NOT_FOUND,operation:"getByNumber",organizationId:e,studentNumber:r});throw t.errorHandler.handleError(s,{operation:"getByNumber",organizationId:e,studentNumber:r})}return a}catch(a){if(a instanceof t.AppError)throw a;throw t.errorHandler.handleError(a,{operation:"getByNumber",organizationId:e,studentNumber:r})}}async create(e){try{(0,i.validateRequired)(e,["first_name","last_name","organization_id"]);let r=e.student_number;if(!r||""===r.trim()){let t=e.organization_id;if(!t)throw Error("organization_id is required");let{data:a}=await this.supabase.from("organizations").select("code").eq("id",t).single(),s=a?.code||"ORG",i=new Date().getFullYear().toString().slice(-2);r=await n(this.supabase,"students",t,{prefix:"EDU",orgCode:s,year:i,padding:6,fieldName:"student_number"})}let s={...e,student_number:r},{data:o,error:l}=await this.supabase.from("students").insert(s).select().single();if(l){if("23505"===l.code)throw t.errorHandler.handleError(l,{code:t.ErrorCode.VALIDATION_UNIQUE_CONSTRAINT,operation:"create",field:"student_number"});if("42501"===l.code)throw t.errorHandler.handleError(l,{code:t.ErrorCode.DB_RLS_POLICY_VIOLATION,operation:"create"});throw t.errorHandler.handleError(l,{operation:"create",student:e})}return a.logger.info("Étudiant créé avec succès",{id:o?.id,organizationId:e.organization_id||void 0,studentNumber:o?.student_number}),o}catch(r){if(r instanceof t.AppError)throw r;throw t.errorHandler.handleError(r,{operation:"create",student:e})}}async update(e,r){try{let s={...r};if("class_id"in s)if(""!==s.class_id&&s.class_id){let{data:e,error:r}=await this.supabase.from("classes").select("id").eq("id",s.class_id).maybeSingle();e||r||(s.class_id=null)}else s.class_id=null;let{data:n,error:i}=await this.supabase.from("students").update(s).eq("id",e).select().single();if(i){if("PGRST116"===i.code||"42P01"===i.code)throw t.errorHandler.handleError(i,{code:t.ErrorCode.DB_NOT_FOUND,operation:"update",id:e});if("42501"===i.code)throw t.errorHandler.handleError(i,{code:t.ErrorCode.DB_RLS_POLICY_VIOLATION,operation:"update",id:e});throw t.errorHandler.handleError(i,{operation:"update",id:e,updates:r})}if(!n)throw t.errorHandler.createDatabaseError(`\xc9tudiant avec l'ID ${e} introuvable pour la mise \xe0 jour`,{id:e});return a.logger.info("Étudiant mis à jour avec succès",{id:e,updates:r}),n}catch(a){if(a instanceof t.AppError)throw a;throw t.errorHandler.handleError(a,{operation:"update",id:e,updates:r})}}async delete(e){return this.update(e,{status:"inactive"})}async import(e,r){try{if(!r||0===r.length)throw t.errorHandler.createValidationError("Aucun étudiant à importer","students");let{data:s}=await this.supabase.from("organizations").select("code").eq("id",e).single(),i=s?.code||"ORG",o=new Date().getFullYear().toString().slice(-2),l=await Promise.all(r.map(async r=>{if(r.student_number&&""!==r.student_number.trim())return r;let t=await n(this.supabase,"students",e,{prefix:"EDU",orgCode:i,year:o,padding:6,fieldName:"student_number"});return{...r,student_number:t}})),{data:d,error:c}=await this.supabase.from("students").insert(l).select();if(c){if("23505"===c.code)throw t.errorHandler.handleError(c,{code:t.ErrorCode.VALIDATION_UNIQUE_CONSTRAINT,operation:"import",field:"student_number"});throw t.errorHandler.handleError(c,{operation:"import",organizationId:e,count:r.length})}return a.logger.info("Étudiants importés avec succès",{organizationId:e,count:d?.length||0}),d||[]}catch(r){if(r instanceof t.AppError)throw r;throw t.errorHandler.handleError(r,{operation:"import",organizationId:e})}}};e.s(["studentService",0,o],163454)},746239,e=>{"use strict";var r=e.i(843476),t=e.i(271645),a=e.i(618566),s=e.i(954616),n=e.i(266027),i=e.i(912598),o=e.i(325715),l=e.i(920755),d=e.i(163454),c=e.i(167881),u=e.i(970065),m=e.i(871689),h=e.i(522016);function g(){let e=(0,a.useRouter)(),g=(0,a.useParams)().id,_=(0,i.useQueryClient)(),{user:p,isLoading:f}=(0,o.useAuth)(),b=(0,l.createClient)(),[E,x]=(0,t.useState)({first_name:"",last_name:"",date_of_birth:"",gender:"",email:"",phone:"",address:"",city:"",class_id:"",enrollment_date:"",status:"active"}),{data:v,isLoading:N}=(0,n.useQuery)({queryKey:["student",g],queryFn:()=>d.studentService.getById(g),enabled:!!g}),{data:y}=(0,n.useQuery)({queryKey:["program-sessions-all",p?.organization_id],queryFn:async()=>{if(!p?.organization_id)return[];let{data:e,error:r}=await b.from("sessions").select("id, name, start_date, end_date, formations!inner(id, name, code, organization_id, programs(id, name))").eq("formations.organization_id",p.organization_id).order("start_date",{ascending:!1});if(r)throw r;return e?.map(e=>({id:e.id,name:`${e.name} - ${e.formations.name}${e.formations.programs?` (${e.formations.programs.name})`:""}`,code:e.formations.code,start_date:e.start_date,end_date:e.end_date}))||[]},enabled:!!p?.organization_id&&!f});(0,t.useEffect)(()=>{v&&x({first_name:v.first_name||"",last_name:v.last_name||"",date_of_birth:v.date_of_birth?v.date_of_birth.split("T")[0]:"",gender:v.gender||"",email:v.email||"",phone:v.phone||"",address:v.address||"",city:v.city||"",class_id:v.class_id||"",enrollment_date:v.enrollment_date?v.enrollment_date.split("T")[0]:"",status:v.status||"active"})},[v]);let I=(0,s.useMutation)({mutationFn:async()=>{if(!p?.organization_id)throw Error("Organization ID manquant");console.log("Mise à jour de l'élève:",g,E);let e=await d.studentService.update(g,{first_name:E.first_name,last_name:E.last_name,date_of_birth:E.date_of_birth||null,gender:E.gender||null,email:E.email||null,phone:E.phone||null,address:E.address||null,city:E.city||null,class_id:E.class_id||null,enrollment_date:E.enrollment_date||new Date().toISOString().split("T")[0],status:E.status});return console.log("Élève mis à jour avec succès:",e),e},onSuccess:r=>{console.log("onSuccess appelé avec:",r),_.invalidateQueries({queryKey:["student",g]}),_.invalidateQueries({queryKey:["students"]}),e.push(`/dashboard/students/${r.id}`)},onError:e=>{console.error("Erreur lors de la mise à jour de l'élève:",e)}});return f||N?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)("p",{children:"Chargement..."})}):p?p.organization_id?v?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(h.default,{href:`/dashboard/students/${g}`,children:(0,r.jsx)(c.Button,{variant:"ghost",size:"icon",children:(0,r.jsx)(m.ArrowLeft,{className:"h-4 w-4"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Modifier l'élève"}),(0,r.jsxs)("p",{className:"mt-2 text-sm text-gray-600",children:["Modifiez les informations de ",v.first_name," ",v.last_name]})]})]}),(0,r.jsxs)(u.Card,{children:[(0,r.jsx)(u.CardHeader,{children:(0,r.jsx)(u.CardTitle,{children:"Informations personnelles"})}),(0,r.jsx)(u.CardContent,{children:(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),I.mutate()},className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Prénom *"}),(0,r.jsx)("input",{type:"text",required:!0,value:E.first_name,onChange:e=>x({...E,first_name:e.target.value}),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Nom *"}),(0,r.jsx)("input",{type:"text",required:!0,value:E.last_name,onChange:e=>x({...E,last_name:e.target.value}),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Date de naissance"}),(0,r.jsx)("input",{type:"date",value:E.date_of_birth,onChange:e=>x({...E,date_of_birth:e.target.value}),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Genre"}),(0,r.jsxs)("select",{value:E.gender,onChange:e=>x({...E,gender:e.target.value}),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target",children:[(0,r.jsx)("option",{value:"",children:"Sélectionner"}),(0,r.jsx)("option",{value:"male",children:"Masculin"}),(0,r.jsx)("option",{value:"female",children:"Féminin"}),(0,r.jsx)("option",{value:"other",children:"Autre"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Email"}),(0,r.jsx)("input",{type:"email",value:E.email,onChange:e=>x({...E,email:e.target.value}),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Téléphone"}),(0,r.jsx)("input",{type:"tel",value:E.phone,onChange:e=>x({...E,phone:e.target.value}),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Adresse"}),(0,r.jsx)("input",{type:"text",value:E.address,onChange:e=>x({...E,address:e.target.value}),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Ville"}),(0,r.jsx)("input",{type:"text",value:E.city,onChange:e=>x({...E,city:e.target.value}),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Session"}),(0,r.jsxs)("select",{value:E.class_id,onChange:e=>x({...E,class_id:e.target.value}),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target",children:[(0,r.jsx)("option",{value:"",children:"Aucune session"}),y?.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Statut"}),(0,r.jsxs)("select",{value:E.status,onChange:e=>x({...E,status:e.target.value}),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target",children:[(0,r.jsx)("option",{value:"active",children:"Actif"}),(0,r.jsx)("option",{value:"inactive",children:"Inactif"}),(0,r.jsx)("option",{value:"graduated",children:"Diplômé"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Date d'inscription *"}),(0,r.jsx)("input",{type:"date",required:!0,value:E.enrollment_date,onChange:e=>x({...E,enrollment_date:e.target.value}),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent min-touch-target"})]}),I.error&&(0,r.jsx)("div",{className:"bg-destructive/10 text-destructive px-4 py-3 rounded-lg text-sm",children:I.error instanceof Error?I.error.message:"Une erreur est survenue"}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,r.jsx)(h.default,{href:`/dashboard/students/${g}`,children:(0,r.jsx)(c.Button,{type:"button",variant:"outline",children:"Annuler"})}),(0,r.jsx)(c.Button,{type:"submit",disabled:I.isPending,children:I.isPending?"Enregistrement...":"Enregistrer les modifications"})]})]})})]})]}):(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-muted-foreground mb-4",children:"Élève non trouvé"}),(0,r.jsx)(h.default,{href:"/dashboard/students",children:(0,r.jsx)(c.Button,{children:"Retour à la liste"})})]})}):(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Organization ID manquant"}),(0,r.jsx)("p",{className:"text-red-700 mb-4",children:"Votre compte n'est pas associé à une organisation."})]})}):(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)("div",{className:"bg-warning-bg border border-warning-border rounded-lg p-4",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-warning-primary mb-2",children:"Utilisateur non trouvé"}),(0,r.jsx)("p",{className:"text-warning-primary",children:"Votre compte n'existe pas encore dans la base de données."})]})})}e.s(["default",()=>g])}]);