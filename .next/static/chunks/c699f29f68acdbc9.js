(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,107233,e=>{"use strict";let t=(0,e.i(475254).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],107233)},871689,e=>{"use strict";let t=(0,e.i(475254).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],871689)},503116,e=>{"use strict";let t=(0,e.i(475254).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],503116)},605631,e=>{"use strict";let t=(0,e.i(475254).default)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],605631)},25652,e=>{"use strict";let t=(0,e.i(475254).default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);e.s(["TrendingUp",()=>t],25652)},436332,e=>{"use strict";let t=(0,e.i(475254).default)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);e.s(["Edit",()=>t],436332)},232189,(e,t,s)=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},865156,(e,t,s)=>{"use strict";var r=e.r(232189);function a(){}function i(){}i.resetWarningCache=a,t.exports=function(){function e(e,t,s,a,i,n){if(n!==r){var o=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var s={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:a};return s.PropTypes=s,s}},745009,(e,t,s)=>{t.exports=e.r(865156)()},674627,e=>{"use strict";let{getOwnPropertyNames:t,getOwnPropertySymbols:s}=Object,{hasOwnProperty:r}=Object.prototype;function a(e,t){return function(s,r,a){return e(s,r,a)&&t(s,r,a)}}function i(e){return function(t,s,r){if(!t||!s||"object"!=typeof t||"object"!=typeof s)return e(t,s,r);let{cache:a}=r,i=a.get(t),n=a.get(s);if(i&&n)return i===s&&n===t;a.set(t,s),a.set(s,t);let o=e(t,s,r);return a.delete(t),a.delete(s),o}}function n(e){return t(e).concat(s(e))}let o=Object.hasOwn||((e,t)=>r.call(e,t));function l(e,t){return e===t||!e&&!t&&e!=e&&t!=t}let{getOwnPropertyDescriptor:d,keys:c}=Object;function m(e,t){return e.byteLength===t.byteLength&&w(new Uint8Array(e),new Uint8Array(t))}function u(e,t,s){let r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!s.equals(e[r],t[r],r,r,e,t,s))return!1;return!0}function f(e,t){return e.byteLength===t.byteLength&&w(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function h(e,t){return l(e.getTime(),t.getTime())}function x(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function p(e,t){return e===t}function g(e,t,s){let r,a,i=e.size;if(i!==t.size)return!1;if(!i)return!0;let n=Array(i),o=e.entries(),l=0;for(;(r=o.next())&&!r.done;){let i=t.entries(),o=!1,d=0;for(;(a=i.next())&&!a.done;){if(n[d]){d++;continue}let i=r.value,c=a.value;if(s.equals(i[0],c[0],l,d,e,t,s)&&s.equals(i[1],c[1],i[0],c[0],e,t,s)){o=n[d]=!0;break}d++}if(!o)return!1;l++}return!0}function j(e,t,s){let r=c(e),a=r.length;if(c(t).length!==a)return!1;for(;a-- >0;)if(!N(e,t,s,r[a]))return!1;return!0}function b(e,t,s){let r,a,i,o=n(e),l=o.length;if(n(t).length!==l)return!1;for(;l-- >0;)if(!N(e,t,s,r=o[l])||(a=d(e,r),i=d(t,r),(a||i)&&(!a||!i||a.configurable!==i.configurable||a.enumerable!==i.enumerable||a.writable!==i.writable)))return!1;return!0}function y(e,t){return l(e.valueOf(),t.valueOf())}function _(e,t){return e.source===t.source&&e.flags===t.flags}function v(e,t,s){let r,a,i=e.size;if(i!==t.size)return!1;if(!i)return!0;let n=Array(i),o=e.values();for(;(r=o.next())&&!r.done;){let i=t.values(),o=!1,l=0;for(;(a=i.next())&&!a.done;){if(!n[l]&&s.equals(r.value,a.value,r.value,a.value,e,t,s)){o=n[l]=!0;break}l++}if(!o)return!1}return!0}function w(e,t){let s=e.byteLength;if(t.byteLength!==s||e.byteOffset!==t.byteOffset)return!1;for(;s-- >0;)if(e[s]!==t[s])return!1;return!0}function C(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function N(e,t,s,r){return("_owner"===r||"__o"===r||"__v"===r)&&(!!e.$$typeof||!!t.$$typeof)||o(t,r)&&s.equals(e[r],t[r],r,r,e,t,s)}let S={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},q=Object.prototype.toString,F=T();function T(e={}){let{circular:t=!1,createInternalComparator:s,createState:r,strict:n=!1}=e,o=function({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:s,areDatesEqual:r,areErrorsEqual:a,areFunctionsEqual:i,areMapsEqual:n,areNumbersEqual:o,areObjectsEqual:l,arePrimitiveWrappersEqual:d,areRegExpsEqual:c,areSetsEqual:m,areTypedArraysEqual:u,areUrlsEqual:f,unknownTagComparators:h}){return function(x,p,g){if(x===p)return!0;if(null==x||null==p)return!1;let j=typeof x;if(j!==typeof p)return!1;if("object"!==j)return"number"===j?o(x,p,g):"function"===j&&i(x,p,g);let b=x.constructor;if(b!==p.constructor)return!1;if(b===Object)return l(x,p,g);if(Array.isArray(x))return t(x,p,g);if(b===Date)return r(x,p,g);if(b===RegExp)return c(x,p,g);if(b===Map)return n(x,p,g);if(b===Set)return m(x,p,g);let y=q.call(x);if("[object Date]"===y)return r(x,p,g);if("[object RegExp]"===y)return c(x,p,g);if("[object Map]"===y)return n(x,p,g);if("[object Set]"===y)return m(x,p,g);if("[object Object]"===y)return"function"!=typeof x.then&&"function"!=typeof p.then&&l(x,p,g);if("[object URL]"===y)return f(x,p,g);if("[object Error]"===y)return a(x,p,g);if("[object Arguments]"===y)return l(x,p,g);if(S[y])return u(x,p,g);if("[object ArrayBuffer]"===y)return e(x,p,g);if("[object DataView]"===y)return s(x,p,g);if("[object Boolean]"===y||"[object Number]"===y||"[object String]"===y)return d(x,p,g);if(h){let e=h[y];if(!e){let t=null!=x?x[Symbol.toStringTag]:void 0;t&&(e=h[t])}if(e)return e(x,p,g)}return!1}}(function({circular:e,createCustomConfig:t,strict:s}){let r={areArrayBuffersEqual:m,areArraysEqual:s?b:u,areDataViewsEqual:f,areDatesEqual:h,areErrorsEqual:x,areFunctionsEqual:p,areMapsEqual:s?a(g,b):g,areNumbersEqual:l,areObjectsEqual:s?b:j,arePrimitiveWrappersEqual:y,areRegExpsEqual:_,areSetsEqual:s?a(v,b):v,areTypedArraysEqual:s?a(w,b):w,areUrlsEqual:C,unknownTagComparators:void 0};if(t&&(r=Object.assign({},r,t(r))),e){let e=i(r.areArraysEqual),t=i(r.areMapsEqual),s=i(r.areObjectsEqual),a=i(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:e,areMapsEqual:t,areObjectsEqual:s,areSetsEqual:a})}return r}(e)),d=s?s(o):function(e,t,s,r,a,i,n){return o(e,t,n)};return function({circular:e,comparator:t,createState:s,equals:r,strict:a}){if(s)return function(i,n){let{cache:o=e?new WeakMap:void 0,meta:l}=s();return t(i,n,{cache:o,equals:r,meta:l,strict:a})};if(e)return function(e,s){return t(e,s,{cache:new WeakMap,equals:r,meta:void 0,strict:a})};let i={cache:void 0,equals:r,meta:void 0,strict:a};return function(e,s){return t(e,s,i)}}({circular:t,comparator:o,createState:r,equals:d,strict:n})}T({strict:!0}),T({circular:!0}),T({circular:!0,strict:!0}),T({createInternalComparator:()=>l}),T({strict:!0,createInternalComparator:()=>l}),T({circular:!0,createInternalComparator:()=>l}),T({circular:!0,createInternalComparator:()=>l,strict:!0}),e.s(["deepEqual",()=>F])},212426,e=>{"use strict";let t=(0,e.i(475254).default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>t],212426)},2034,e=>{"use strict";var t=e.i(920755);let s=async(e,t)=>(console.warn("videoconferenceService.createMeetingForSession not implemented"),null),r=new class{supabase;constructor(e){this.supabase=e||(0,t.createClient)()}async getAllSessions(e,t){let s=this.supabase.from("sessions").select(`
        *,
        formations!inner(
          *,
          programs(*)
        )
      `).eq("formations.organization_id",e);t?.formationId&&(s=s.eq("formation_id",t.formationId)),t?.status&&(s=s.eq("status",t.status)),t?.startDate&&(s=s.gte("start_date",t.startDate)),t?.endDate&&(s=s.lte("end_date",t.endDate)),t?.search&&(s=s.ilike("name",`%${t.search}%`));let{data:r,error:a}=await s.order("start_date",{ascending:!0});if(a)throw a;return r}async getSessionById(e){let{data:t,error:s}=await this.supabase.from("sessions").select(`
        *,
        formations!inner(
          *,
          programs(*)
        )
      `).eq("id",e).single();if(s)throw s;let{data:r,error:a}=await this.supabase.from("session_programs").select(`
        program_id,
        programs(*)
      `).eq("session_id",e);if(a)throw a;return{...t,session_programs:r?.map(e=>e.programs).filter(Boolean)||[]}}async createSession(e,t,s){if(e.formation_id){let{data:t,error:s}=await this.supabase.from("formations").select("id, organization_id").eq("id",e.formation_id).single();if(s)throw console.error("Erreur lors de la vérification de la formation:",s),Error(`Formation non trouv\xe9e: ${s.message}`);if(!t)throw Error("Formation non trouvée");console.log("Formation trouvée:",t)}let{data:r,error:a}=await this.supabase.from("sessions").insert(e).select().single();if(a)throw console.error("Erreur RLS lors de la création de la session:",{code:a.code,message:a.message,details:a.details,hint:a.hint,formation_id:e.formation_id}),a;if(t&&t.length>0&&r){let{data:e}=await this.supabase.from("formations").select("organization_id").eq("id",r.formation_id).single();if(e){let s=t.map(t=>({session_id:r.id,program_id:t,organization_id:e.organization_id})),{error:a}=await this.supabase.from("session_programs").insert(s);a&&console.error("Erreur lors de la création des associations session-programme:",a),e.organization_id&&await this.syncWithCalendars(r.id,e.organization_id,"create").catch(e=>{console.error("Erreur lors de la synchronisation calendrier:",e)}),e.organization_id&&await this.createVideoconferenceMeeting(r.id,e.organization_id).catch(e=>{console.error("Erreur lors de la création de la réunion visioconférence:",e)})}}return console.log("Session créée avec succès:",r),r}async updateSessionPrograms(e,t,s){let{error:r}=await this.supabase.from("session_programs").delete().eq("session_id",e);if(r)throw r;if(t.length>0){let r=t.map(t=>({session_id:e,program_id:t,organization_id:s})),{error:a}=await this.supabase.from("session_programs").insert(r);if(a)throw a}return!0}async getSessionPrograms(e){let{data:t,error:s}=await this.supabase.from("session_programs").select(`
        program_id,
        programs(*)
      `).eq("session_id",e);if(s)throw s;return t?.map(e=>e.programs).filter(Boolean)||[]}async updateSession(e,t){let{data:s}=await this.supabase.from("sessions").select("formation_id, formations(organization_id)").eq("id",e).single(),{data:r,error:a}=await this.supabase.from("sessions").update(t).eq("id",e).select().single();if(a)throw a;let i=s?.formations;return s&&i?.organization_id&&await this.syncWithCalendars(e,i.organization_id,"update").catch(e=>{console.error("Erreur lors de la synchronisation calendrier:",e)}),r}async deleteSession(e){let{data:t}=await this.supabase.from("sessions").select("formation_id, formations(organization_id)").eq("id",e).single(),s=t?.formations;t&&s?.organization_id&&await this.syncWithCalendars(e,s.organization_id,"delete").catch(e=>{console.error("Erreur lors de la suppression de l'événement calendrier:",e)});let{error:r}=await this.supabase.from("sessions").delete().eq("id",e);if(r)throw r}async createVideoconferenceMeeting(e,t){let{data:r}=await this.supabase.from("videoconference_integrations").select("*").eq("organization_id",t).eq("is_active",!0).eq("auto_create_meetings",!0);if(r&&0!==r.length)for(let a of r)try{await s(e,{organizationId:t,provider:a.provider})}catch(e){console.error(`Erreur lors de la cr\xe9ation de r\xe9union avec ${a.provider}:`,e)}}async syncWithCalendars(e,t,s){let{data:r}=await this.supabase.from("calendar_integrations").select("*").eq("organization_id",t).eq("is_active",!0).eq("sync_sessions",!0).eq("create_events_for_sessions",!0);if(r&&0!==r.length)for(let e of r)try{console.warn(`Calendar sync for ${s} not implemented yet for provider ${e.provider}`)}catch(t){console.error(`Erreur lors de la synchronisation avec ${e.provider}:`,t)}}async getUpcomingSessions(e,t=10){let s=new Date().toISOString().split("T")[0],{data:r,error:a}=await this.supabase.from("sessions").select(`
        *,
        formations!inner(
          *,
          programs(*)
        )
      `).eq("formations.organization_id",e).gte("start_date",s).eq("status","planned").order("start_date",{ascending:!0}).limit(t);if(a)throw a;return r}async getOngoingSessions(e){let t=new Date().toISOString().split("T")[0],{data:s,error:r}=await this.supabase.from("sessions").select(`
        *,
        formations!inner(
          *,
          programs(*)
        )
      `).eq("formations.organization_id",e).lte("start_date",t).gte("end_date",t).eq("status","ongoing").order("start_date",{ascending:!0});if(r)throw r;return s}async addSessionToFormations(e,t,s){let r=t.map((t,r)=>({session_id:e,formation_id:t,organization_id:s,order_index:r})),{data:a,error:i}=await this.supabase.from("formation_sessions").insert(r).select();if(i)throw i;return a}async removeSessionFromFormation(e,t){let{error:s}=await this.supabase.from("formation_sessions").delete().eq("session_id",e).eq("formation_id",t);if(s)throw s;return!0}async updateSessionFormations(e,t,s){let{error:r}=await this.supabase.from("formation_sessions").delete().eq("session_id",e);if(r)throw r;return t.length>0?this.addSessionToFormations(e,t,s):[]}async getSessionFormations(e){let{data:t,error:s}=await this.supabase.from("formation_sessions").select(`
        formation_id,
        order_index,
        formations(*)
      `).eq("session_id",e).order("order_index",{ascending:!0});if(s)throw s;return t?.map(e=>e.formations).filter(Boolean)||[]}async getFormationSessions(e){let{data:t,error:s}=await this.supabase.from("formation_sessions").select(`
        session_id,
        order_index,
        sessions(*)
      `).eq("formation_id",e).order("order_index",{ascending:!0});if(s)throw s;return t?.map(e=>e.sessions).filter(Boolean)||[]}async createIndependentSession(e,t,s){let{data:r,error:a}=await this.supabase.from("sessions").insert({...e,formation_id:null}).select().single();if(a)throw a;return t&&t.length>0&&r&&await this.updateSessionPrograms(r.id,t,e.organization_id),s&&s.length>0&&r&&await this.addSessionToFormations(r.id,s,e.organization_id),r}};e.s(["sessionService",0,r],2034)},1262,e=>{"use strict";var t=e.i(920755);let s=new class{supabase;constructor(e){this.supabase=e||(0,t.createClient)()}async getAllFormations(e,t){let s=this.supabase.from("formations").select(`
        *,
        programs(*)
      `).eq("organization_id",e);t?.programId&&(s=s.eq("program_id",t.programId)),t?.isActive!==void 0&&(s=s.eq("is_active",t.isActive)),t?.search&&(s=s.or(`name.ilike.%${t.search}%,code.ilike.%${t.search}%,description.ilike.%${t.search}%`));let{data:r,error:a}=await s.order("created_at",{ascending:!1});if(a)throw a;return r}async getFormationById(e){let{data:t,error:s}=await this.supabase.from("formations").select(`
        *,
        programs(*),
        sessions(*)
      `).eq("id",e).single();if(s)throw s;return t}async createFormation(e){let{data:t,error:s}=await this.supabase.from("formations").insert(e).select().single();if(s)throw s;return t}async updateFormation(e,t){let{data:s,error:r}=await this.supabase.from("formations").update(t).eq("id",e).select().single();if(r)throw r;return s}async deleteFormation(e){return this.updateFormation(e,{is_active:!1})}async getSessionsByFormation(e){let{data:t,error:s}=await this.supabase.from("sessions").select("*").eq("formation_id",e).order("start_date",{ascending:!0});if(s)throw s;return t}async getAllSessionsForFormation(e){let{data:t,error:s}=await this.supabase.from("formation_sessions").select(`
        session_id,
        order_index,
        sessions(*)
      `).eq("formation_id",e).order("order_index",{ascending:!0});if(s)throw s;let{data:r,error:a}=await this.supabase.from("sessions").select("*").eq("formation_id",e).order("start_date",{ascending:!0});if(a)throw a;let i=t?.map(e=>e.sessions).filter(Boolean)||[],n=[...i],o=new Set(i.map(e=>e.id));for(let e of r||[])o.has(e.id)||n.push(e);return n}async addSessionsToFormation(e,t,s){let r=t.map((t,r)=>({formation_id:e,session_id:t,organization_id:s,order_index:r})),{data:a,error:i}=await this.supabase.from("formation_sessions").insert(r).select();if(i)throw i;return a}async removeSessionFromFormation(e,t){let{error:s}=await this.supabase.from("formation_sessions").delete().eq("formation_id",e).eq("session_id",t);if(s)throw s;return!0}async updateFormationSessions(e,t,s){let{error:r}=await this.supabase.from("formation_sessions").delete().eq("formation_id",e);if(r)throw r;return t.length>0?this.addSessionsToFormation(e,t,s):[]}async getFormationWithAllSessions(e){let t=await this.getFormationById(e);if(!t)return null;let s=await this.getAllSessionsForFormation(e);return{...t,all_sessions:s}}};e.s(["formationService",0,s])},34732,e=>{"use strict";var t=e.i(843476),s=e.i(618566),r=e.i(266027),a=e.i(1262),i=e.i(2034),n=e.i(920755),o=e.i(325715),l=e.i(167881),d=e.i(970065),c=e.i(871689),m=e.i(436332),u=e.i(87316),f=e.i(503116),h=e.i(212426),x=e.i(761911),p=e.i(810980),g=e.i(25652),j=e.i(605631),b=e.i(107233),y=e.i(346897),_=e.i(522016),v=e.i(647163),w=e.i(841891),C=e.i(438814),N=e.i(322787),S=e.i(234239),q=e.i(559559),F=e.i(731195);function T(){let e=(0,s.useParams)();(0,s.useRouter)();let T=e.id,{user:A}=(0,o.useAuth)(),E=(0,n.createClient)(),{data:z,isLoading:k}=(0,r.useQuery)({queryKey:["formation",T],queryFn:()=>a.formationService.getFormationById(T),enabled:!!T}),{data:O}=(0,r.useQuery)({queryKey:["formation-sessions",T,A?.organization_id],queryFn:async()=>A?.organization_id?i.sessionService.getAllSessions(A.organization_id,{formationId:T}):[],enabled:!!T&&!!A?.organization_id}),{data:D}=(0,r.useQuery)({queryKey:["formation-detail-stats",T,A?.organization_id],queryFn:async()=>{if(!T||!A?.organization_id)return null;let{data:e}=await E.from("sessions").select("id, status, start_date, end_date").eq("formation_id",T),t=e||[],s=t.map(e=>e.id).filter(e=>!!e),r=0,a=0,i=0;if(s&&s.length>0){let{data:e,error:t}=await E.from("enrollments").select("status").in("session_id",s);if(t)throw t;let n=e||[];r=n.length,a=n.filter(e=>e.status&&["confirmed","active"].includes(e.status)).length,i=n.filter(e=>"completed"===e.status).length}let n=t.length,o=t.filter(e=>"planned"===e.status).length,l=t.filter(e=>"ongoing"===e.status).length,d=t.filter(e=>"completed"===e.status).length,c=t.filter(e=>"cancelled"===e.status).length,m=z?.price?Number(z.price)*r:0,u=[{name:"Planifiées",value:o,color:"#3B82F6"},{name:"En cours",value:l,color:"#335ACF"},{name:"Terminées",value:d,color:"#6B7280"},{name:"Annulées",value:c,color:"#EF4444"}].filter(e=>e.value>0);if(s&&s.length>0){let{data:e,error:t}=await E.from("enrollments").select("status").in("session_id",s);if(t)throw t;let f=e||[];return{totalSessions:n,plannedSessions:o,ongoingSessions:l,completedSessions:d,cancelledSessions:c,totalEnrollments:r,activeEnrollments:a,completedEnrollments:i,totalRevenue:m,sessionStatusData:u,enrollmentStatusData:[{name:"Confirmées",value:f.filter(e=>"confirmed"===e.status).length,color:"#3B82F6"},{name:"Actives",value:f.filter(e=>"active"===e.status).length,color:"#335ACF"},{name:"Complétées",value:f.filter(e=>"completed"===e.status).length,color:"#6B7280"},{name:"Annulées",value:f.filter(e=>"cancelled"===e.status).length,color:"#EF4444"}].filter(e=>e.value>0)}}return{totalSessions:n,plannedSessions:o,ongoingSessions:l,completedSessions:d,cancelledSessions:c,totalEnrollments:r,activeEnrollments:a,completedEnrollments:i,totalRevenue:m,sessionStatusData:u,enrollmentStatusData:[]}},enabled:!!T&&!!A?.organization_id&&!!z});if(k)return(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)("div",{className:"text-muted-foreground",children:"Chargement..."})})});if(!z)return(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-muted-foreground",children:"Formation non trouvée"}),(0,t.jsx)(_.default,{href:"/dashboard/formations",children:(0,t.jsx)(l.Button,{className:"mt-4",children:"Retour à la liste"})})]})});let $=z?.programs,B=O||[];return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)(_.default,{href:"/dashboard/formations",children:(0,t.jsx)(l.Button,{variant:"ghost",size:"icon",children:(0,t.jsx)(c.ArrowLeft,{className:"h-4 w-4"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:z.name}),z.subtitle&&(0,t.jsx)("p",{className:"mt-1 text-lg text-gray-600",children:z.subtitle}),(0,t.jsxs)("p",{className:"mt-2 text-sm text-gray-600",children:["Code: ",z.code,$&&(0,t.jsxs)(t.Fragment,{children:[" • Programme: ",(0,t.jsx)(_.default,{href:`/dashboard/programs/${$.id}`,className:"text-primary hover:underline",children:$.name})]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(_.default,{href:`/dashboard/formations/${T}/edit`,children:(0,t.jsxs)(l.Button,{variant:"outline",children:[(0,t.jsx)(m.Edit,{className:"mr-2 h-4 w-4"}),"Modifier"]})}),(0,t.jsx)(_.default,{href:`/dashboard/formations/${T}/sessions`,children:(0,t.jsxs)(l.Button,{children:[(0,t.jsx)(b.Plus,{className:"mr-2 h-4 w-4"}),"Nouvelle session"]})})]})]}),D&&(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[(0,t.jsxs)(d.Card,{children:[(0,t.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,t.jsx)(d.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Sessions"}),(0,t.jsx)("div",{className:"p-2 bg-blue-50 rounded-lg",children:(0,t.jsx)(u.Calendar,{className:"h-5 w-5 text-blue-600"})})]}),(0,t.jsxs)(d.CardContent,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:D.totalSessions}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[D.ongoingSessions," en cours"]})]})]}),(0,t.jsxs)(d.Card,{children:[(0,t.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,t.jsx)(d.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Inscriptions"}),(0,t.jsx)("div",{className:"p-2 bg-cyan-50 rounded-lg",children:(0,t.jsx)(x.Users,{className:"h-5 w-5 text-cyan-600"})})]}),(0,t.jsxs)(d.CardContent,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:D.totalEnrollments}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[D.activeEnrollments," active",D.activeEnrollments>1?"s":""]})]})]}),(0,t.jsxs)(d.Card,{children:[(0,t.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,t.jsx)(d.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Terminées"}),(0,t.jsx)("div",{className:"p-2 bg-brand-blue-ghost rounded-lg",children:(0,t.jsx)(j.CheckCircle,{className:"h-5 w-5 text-brand-blue"})})]}),(0,t.jsxs)(d.CardContent,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-brand-blue",children:D.completedSessions}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Sessions"})]})]}),(0,t.jsxs)(d.Card,{children:[(0,t.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,t.jsx)(d.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Complétées"}),(0,t.jsx)("div",{className:"p-2 bg-teal-50 rounded-lg",children:(0,t.jsx)(g.TrendingUp,{className:"h-5 w-5 text-teal-600"})})]}),(0,t.jsxs)(d.CardContent,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-teal-600",children:D.completedEnrollments}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Inscriptions"})]})]}),(0,t.jsxs)(d.Card,{children:[(0,t.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,t.jsx)(d.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Planifiées"}),(0,t.jsx)("div",{className:"p-2 bg-purple-50 rounded-lg",children:(0,t.jsx)(u.Calendar,{className:"h-5 w-5 text-purple-600"})})]}),(0,t.jsxs)(d.CardContent,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:D.plannedSessions}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Sessions"})]})]}),(0,t.jsxs)(d.Card,{children:[(0,t.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,t.jsx)(d.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Revenu estimé"}),(0,t.jsx)("div",{className:"p-2 bg-brand-cyan-ghost rounded-lg",children:(0,t.jsx)(h.DollarSign,{className:"h-5 w-5 text-brand-cyan"})})]}),(0,t.jsxs)(d.CardContent,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-brand-cyan",children:(0,v.formatCurrency)(D.totalRevenue,z?.currency||"XOF")}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Total"})]})]})]}),D&&(D.sessionStatusData.length>0||D.enrollmentStatusData.length>0)&&(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[D.sessionStatusData.length>0&&(0,t.jsxs)(d.Card,{children:[(0,t.jsx)(d.CardHeader,{children:(0,t.jsx)(d.CardTitle,{children:"Répartition des sessions"})}),(0,t.jsx)(d.CardContent,{children:(0,t.jsx)(F.ResponsiveContainer,{width:"100%",height:250,children:(0,t.jsxs)(w.PieChart,{children:[(0,t.jsx)(C.Pie,{data:D.sessionStatusData,cx:"50%",cy:"50%",labelLine:!1,label:({name:e,percent:t})=>`${e} ${(100*t).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:D.sessionStatusData.map((e,s)=>(0,t.jsx)(N.Cell,{fill:e.color},`cell-${s}`))}),(0,t.jsx)(S.Tooltip,{}),(0,t.jsx)(q.Legend,{})]})})})]}),D.enrollmentStatusData.length>0&&(0,t.jsxs)(d.Card,{children:[(0,t.jsx)(d.CardHeader,{children:(0,t.jsx)(d.CardTitle,{children:"Répartition des inscriptions"})}),(0,t.jsx)(d.CardContent,{children:(0,t.jsx)(F.ResponsiveContainer,{width:"100%",height:250,children:(0,t.jsxs)(w.PieChart,{children:[(0,t.jsx)(C.Pie,{data:D.enrollmentStatusData,cx:"50%",cy:"50%",labelLine:!1,label:({name:e,percent:t})=>`${e} ${(100*t).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:D.enrollmentStatusData.map((e,s)=>(0,t.jsx)(N.Cell,{fill:e.color},`cell-${s}`))}),(0,t.jsx)(S.Tooltip,{}),(0,t.jsx)(q.Legend,{})]})})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsxs)(d.Card,{children:[(0,t.jsx)(d.CardHeader,{children:(0,t.jsx)(d.CardTitle,{children:"Informations générales"})}),(0,t.jsxs)(d.CardContent,{className:"space-y-4",children:[z.description&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Description"}),(0,t.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:z.description})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[z.category&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Catégorie"}),(0,t.jsx)("p",{className:"font-medium",children:z.category})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Statut"}),(0,t.jsx)("span",{className:`px-2 py-1 rounded text-xs font-medium ${z.is_active?"bg-brand-blue-ghost text-brand-blue":"bg-gray-100 text-gray-800"}`,children:z.is_active?"Active":"Inactive"})]})]}),(z.duration_hours||z.duration_days)&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Durée"}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[z.duration_hours&&(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(f.Clock,{className:"mr-1 h-4 w-4"}),(0,t.jsxs)("span",{children:[z.duration_hours," heures"]})]}),z.duration_days&&(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(u.Calendar,{className:"mr-1 h-4 w-4"}),(0,t.jsxs)("span",{children:[z.duration_days," jours"]})]})]})]}),z.price&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Prix"}),(0,t.jsxs)("p",{className:"text-lg font-semibold flex items-center",children:[(0,t.jsx)(h.DollarSign,{className:"mr-1 h-5 w-5"}),(0,v.formatCurrency)(Number(z.price),z.currency||"XOF")]})]}),z.capacity_max&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Capacité maximale"}),(0,t.jsxs)("p",{className:"font-medium flex items-center",children:[(0,t.jsx)(x.Users,{className:"mr-1 h-4 w-4"}),z.capacity_max," apprenants"]})]})]})]}),z.pedagogical_objectives&&(0,t.jsxs)(d.Card,{children:[(0,t.jsx)(d.CardHeader,{children:(0,t.jsx)(d.CardTitle,{children:"Objectifs pédagogiques"})}),(0,t.jsx)(d.CardContent,{children:(0,t.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:z.pedagogical_objectives})})]}),z.learner_profile&&(0,t.jsxs)(d.Card,{children:[(0,t.jsx)(d.CardHeader,{children:(0,t.jsx)(d.CardTitle,{children:"Profil des apprenants"})}),(0,t.jsx)(d.CardContent,{children:(0,t.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:z.learner_profile})})]}),z.training_content&&(0,t.jsxs)(d.Card,{children:[(0,t.jsx)(d.CardHeader,{children:(0,t.jsx)(d.CardTitle,{children:"Contenu de la formation"})}),(0,t.jsx)(d.CardContent,{children:(0,t.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:z.training_content})})]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[$&&(0,t.jsxs)(d.Card,{children:[(0,t.jsx)(d.CardHeader,{children:(0,t.jsxs)(d.CardTitle,{className:"flex items-center",children:[(0,t.jsx)(p.BookOpen,{className:"mr-2 h-5 w-5"}),"Programme"]})}),(0,t.jsxs)(d.CardContent,{children:[(0,t.jsx)(_.default,{href:`/dashboard/programs/${$.id}`,children:(0,t.jsx)("p",{className:"font-semibold text-primary hover:underline",children:$.name})}),$.code&&(0,t.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:["Code: ",$.code]})]})]}),(0,t.jsxs)(d.Card,{children:[(0,t.jsx)(d.CardHeader,{children:(0,t.jsx)(d.CardTitle,{children:"Actions rapides"})}),(0,t.jsxs)(d.CardContent,{className:"space-y-2",children:[(0,t.jsx)(_.default,{href:`/dashboard/formations/${T}/sessions`,className:"block",children:(0,t.jsxs)(l.Button,{variant:"outline",className:"w-full",children:[(0,t.jsx)(u.Calendar,{className:"mr-2 h-4 w-4"}),"Sessions"]})}),(0,t.jsx)(_.default,{href:`/dashboard/formations/${T}/edit`,className:"block",children:(0,t.jsxs)(l.Button,{variant:"outline",className:"w-full",children:[(0,t.jsx)(m.Edit,{className:"mr-2 h-4 w-4"}),"Modifier"]})})]})]}),(0,t.jsxs)(d.Card,{children:[(0,t.jsx)(d.CardHeader,{children:(0,t.jsx)(d.CardTitle,{children:"Informations supplémentaires"})}),(0,t.jsxs)(d.CardContent,{className:"space-y-3 text-sm",children:[z.cpf_eligible&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-muted-foreground",children:"CPF éligible"}),(0,t.jsx)("p",{className:"font-medium text-brand-blue",children:"Oui"}),z.cpf_code&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Code CPF: ",z.cpf_code]})]}),z.modalities&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-muted-foreground",children:"Modalités"}),(0,t.jsx)("p",{className:"font-medium",children:z.modalities})]}),z.version&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-muted-foreground",children:"Version"}),(0,t.jsx)("p",{className:"font-medium",children:z.version}),z.version_date&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Date: ",(0,v.formatDate)(z.version_date)]})]}),z.created_at&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-muted-foreground",children:"Date de création"}),(0,t.jsx)("p",{className:"font-medium",children:(0,v.formatDate)(z.created_at)})]}),z.updated_at&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-muted-foreground",children:"Dernière modification"}),(0,t.jsx)("p",{className:"font-medium",children:(0,v.formatDate)(z.updated_at)})]})]})]})]})]}),(0,t.jsxs)(d.Card,{children:[(0,t.jsx)(d.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(d.CardTitle,{className:"flex items-center",children:[(0,t.jsx)(u.Calendar,{className:"mr-2 h-5 w-5"}),"Sessions (",B.length,")"]}),(0,t.jsx)(_.default,{href:`/dashboard/formations/${T}/sessions`,children:(0,t.jsx)(l.Button,{variant:"outline",size:"sm",children:"Voir toutes les sessions"})})]})}),(0,t.jsx)(d.CardContent,{children:B.length>0?(0,t.jsxs)("div",{className:"space-y-3",children:[B.slice(0,5).map(e=>(0,t.jsx)(_.default,{href:`/dashboard/sessions/${e.id}`,children:(0,t.jsx)("div",{className:"p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"font-semibold",children:e.name}),(0,t.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground mt-1",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(u.Calendar,{className:"mr-1 h-3 w-3"}),(0,v.formatDate)(e.start_date),e.end_date&&` - ${(0,v.formatDate)(e.end_date)}`]}),e.location&&(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(y.MapPin,{className:"mr-1 h-3 w-3"}),e.location]}),e.start_time&&e.end_time&&(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(f.Clock,{className:"mr-1 h-3 w-3"}),e.start_time," - ",e.end_time]})]})]}),(0,t.jsx)("span",{className:`px-2 py-1 rounded text-xs font-medium ${"planned"===e.status?"bg-blue-100 text-blue-800":"ongoing"===e.status?"bg-brand-blue-ghost text-brand-blue":"completed"===e.status?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:"planned"===e.status?"Planifiée":"ongoing"===e.status?"En cours":"completed"===e.status?"Terminée":"Annulée"})]})})},e.id)),B.length>5&&(0,t.jsx)("div",{className:"text-center pt-2",children:(0,t.jsx)(_.default,{href:`/dashboard/formations/${T}/sessions`,children:(0,t.jsxs)(l.Button,{variant:"outline",size:"sm",children:["Voir toutes les ",B.length," sessions"]})})})]}):(0,t.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[(0,t.jsx)(u.Calendar,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,t.jsx)("p",{children:"Aucune session pour cette formation"}),(0,t.jsx)(_.default,{href:`/dashboard/formations/${T}/sessions`,children:(0,t.jsx)(l.Button,{variant:"outline",className:"mt-4",children:"Créer une session"})})]})})]})]})}e.s(["default",()=>T])}]);