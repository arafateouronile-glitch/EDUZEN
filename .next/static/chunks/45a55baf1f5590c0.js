(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,107233,e=>{"use strict";let t=(0,e.i(475254).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],107233)},356909,e=>{"use strict";let t=(0,e.i(475254).default)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);e.s(["Save",()=>t],356909)},674627,e=>{"use strict";let{getOwnPropertyNames:t,getOwnPropertySymbols:a}=Object,{hasOwnProperty:r}=Object.prototype;function l(e,t){return function(a,r,l){return e(a,r,l)&&t(a,r,l)}}function i(e){return function(t,a,r){if(!t||!a||"object"!=typeof t||"object"!=typeof a)return e(t,a,r);let{cache:l}=r,i=l.get(t),n=l.get(a);if(i&&n)return i===a&&n===t;l.set(t,a),l.set(a,t);let s=e(t,a,r);return l.delete(t),l.delete(a),s}}function n(e){return t(e).concat(a(e))}let s=Object.hasOwn||((e,t)=>r.call(e,t));function o(e,t){return e===t||!e&&!t&&e!=e&&t!=t}let{getOwnPropertyDescriptor:c,keys:d}=Object;function u(e,t){return e.byteLength===t.byteLength&&k(new Uint8Array(e),new Uint8Array(t))}function m(e,t,a){let r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!a.equals(e[r],t[r],r,r,e,t,a))return!1;return!0}function p(e,t){return e.byteLength===t.byteLength&&k(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function h(e,t){return o(e.getTime(),t.getTime())}function x(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function f(e,t){return e===t}function b(e,t,a){let r,l,i=e.size;if(i!==t.size)return!1;if(!i)return!0;let n=Array(i),s=e.entries(),o=0;for(;(r=s.next())&&!r.done;){let i=t.entries(),s=!1,c=0;for(;(l=i.next())&&!l.done;){if(n[c]){c++;continue}let i=r.value,d=l.value;if(a.equals(i[0],d[0],o,c,e,t,a)&&a.equals(i[1],d[1],i[0],d[0],e,t,a)){s=n[c]=!0;break}c++}if(!s)return!1;o++}return!0}function g(e,t,a){let r=d(e),l=r.length;if(d(t).length!==l)return!1;for(;l-- >0;)if(!C(e,t,a,r[l]))return!1;return!0}function y(e,t,a){let r,l,i,s=n(e),o=s.length;if(n(t).length!==o)return!1;for(;o-- >0;)if(!C(e,t,a,r=s[o])||(l=c(e,r),i=c(t,r),(l||i)&&(!l||!i||l.configurable!==i.configurable||l.enumerable!==i.enumerable||l.writable!==i.writable)))return!1;return!0}function v(e,t){return o(e.valueOf(),t.valueOf())}function j(e,t){return e.source===t.source&&e.flags===t.flags}function w(e,t,a){let r,l,i=e.size;if(i!==t.size)return!1;if(!i)return!0;let n=Array(i),s=e.values();for(;(r=s.next())&&!r.done;){let i=t.values(),s=!1,o=0;for(;(l=i.next())&&!l.done;){if(!n[o]&&a.equals(r.value,l.value,r.value,l.value,e,t,a)){s=n[o]=!0;break}o++}if(!s)return!1}return!0}function k(e,t){let a=e.byteLength;if(t.byteLength!==a||e.byteOffset!==t.byteOffset)return!1;for(;a-- >0;)if(e[a]!==t[a])return!1;return!0}function N(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function C(e,t,a,r){return("_owner"===r||"__o"===r||"__v"===r)&&(!!e.$$typeof||!!t.$$typeof)||s(t,r)&&a.equals(e[r],t[r],r,r,e,t,a)}let A={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},T=Object.prototype.toString,_=L();function L(e={}){let{circular:t=!1,createInternalComparator:a,createState:r,strict:n=!1}=e,s=function({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:a,areDatesEqual:r,areErrorsEqual:l,areFunctionsEqual:i,areMapsEqual:n,areNumbersEqual:s,areObjectsEqual:o,arePrimitiveWrappersEqual:c,areRegExpsEqual:d,areSetsEqual:u,areTypedArraysEqual:m,areUrlsEqual:p,unknownTagComparators:h}){return function(x,f,b){if(x===f)return!0;if(null==x||null==f)return!1;let g=typeof x;if(g!==typeof f)return!1;if("object"!==g)return"number"===g?s(x,f,b):"function"===g&&i(x,f,b);let y=x.constructor;if(y!==f.constructor)return!1;if(y===Object)return o(x,f,b);if(Array.isArray(x))return t(x,f,b);if(y===Date)return r(x,f,b);if(y===RegExp)return d(x,f,b);if(y===Map)return n(x,f,b);if(y===Set)return u(x,f,b);let v=T.call(x);if("[object Date]"===v)return r(x,f,b);if("[object RegExp]"===v)return d(x,f,b);if("[object Map]"===v)return n(x,f,b);if("[object Set]"===v)return u(x,f,b);if("[object Object]"===v)return"function"!=typeof x.then&&"function"!=typeof f.then&&o(x,f,b);if("[object URL]"===v)return p(x,f,b);if("[object Error]"===v)return l(x,f,b);if("[object Arguments]"===v)return o(x,f,b);if(A[v])return m(x,f,b);if("[object ArrayBuffer]"===v)return e(x,f,b);if("[object DataView]"===v)return a(x,f,b);if("[object Boolean]"===v||"[object Number]"===v||"[object String]"===v)return c(x,f,b);if(h){let e=h[v];if(!e){let t=null!=x?x[Symbol.toStringTag]:void 0;t&&(e=h[t])}if(e)return e(x,f,b)}return!1}}(function({circular:e,createCustomConfig:t,strict:a}){let r={areArrayBuffersEqual:u,areArraysEqual:a?y:m,areDataViewsEqual:p,areDatesEqual:h,areErrorsEqual:x,areFunctionsEqual:f,areMapsEqual:a?l(b,y):b,areNumbersEqual:o,areObjectsEqual:a?y:g,arePrimitiveWrappersEqual:v,areRegExpsEqual:j,areSetsEqual:a?l(w,y):w,areTypedArraysEqual:a?l(k,y):k,areUrlsEqual:N,unknownTagComparators:void 0};if(t&&(r=Object.assign({},r,t(r))),e){let e=i(r.areArraysEqual),t=i(r.areMapsEqual),a=i(r.areObjectsEqual),l=i(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:e,areMapsEqual:t,areObjectsEqual:a,areSetsEqual:l})}return r}(e)),c=a?a(s):function(e,t,a,r,l,i,n){return s(e,t,n)};return function({circular:e,comparator:t,createState:a,equals:r,strict:l}){if(a)return function(i,n){let{cache:s=e?new WeakMap:void 0,meta:o}=a();return t(i,n,{cache:s,equals:r,meta:o,strict:l})};if(e)return function(e,a){return t(e,a,{cache:new WeakMap,equals:r,meta:void 0,strict:l})};let i={cache:void 0,equals:r,meta:void 0,strict:l};return function(e,a){return t(e,a,i)}}({circular:t,comparator:s,createState:r,equals:c,strict:n})}L({strict:!0}),L({circular:!0}),L({circular:!0,strict:!0}),L({createInternalComparator:()=>o}),L({strict:!0,createInternalComparator:()=>o}),L({circular:!0,createInternalComparator:()=>o}),L({circular:!0,createInternalComparator:()=>o,strict:!0}),e.s(["deepEqual",()=>_])},174886,e=>{"use strict";let t=(0,e.i(475254).default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);e.s(["Copy",()=>t],174886)},299023,e=>{"use strict";let t=(0,e.i(475254).default)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);e.s(["Minus",()=>t],299023)},370956,e=>{"use strict";let t=(0,e.i(475254).default)("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);e.s(["List",()=>t],370956)},684428,e=>{"use strict";let t=(0,e.i(475254).default)("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]);e.s(["AlignLeft",()=>t],684428)},388909,e=>{"use strict";let t=(0,e.i(475254).default)("AlignCenter",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"17",x2:"7",y1:"12",y2:"12",key:"rsh8ii"}],["line",{x1:"19",x2:"5",y1:"18",y2:"18",key:"1t0tuv"}]]);e.s(["AlignCenter",()=>t],388909)},955716,e=>{"use strict";let t=(0,e.i(475254).default)("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);e.s(["GitBranch",()=>t],955716)},303281,e=>{"use strict";let t=(0,e.i(475254).default)("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);e.s(["Printer",()=>t],303281)},741929,e=>{"use strict";let t=(0,e.i(475254).default)("FileCode",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m10 13-2 2 2 2",key:"17smn8"}],["path",{d:"m14 17 2-2-2-2",key:"14mezr"}]]);e.s(["FileCode",()=>t],741929)},53779,e=>{"use strict";var t=e.i(843476),a=e.i(271645),r=e.i(494499),l=e.i(256378),i=e.i(97643),n=e.i(76399),s=e.i(436110);e.i(17556),e.i(396075),e.i(726445);var o=e.i(103869),c=e.i(795850),d=e.i(612118),u=e.i(204753),m=e.i(915085),p=e.i(206003),h=e.i(936046),x=e.i(255149),f=e.i(684428),b=e.i(388909),g=e.i(393430),y=e.i(370956),v=e.i(448876),j=e.i(40325),w=e.i(921430),k=e.i(475254);let N=(0,k.default)("Variable",[["path",{d:"M8 21s-4-3-4-9 4-9 4-9",key:"uto9ud"}],["path",{d:"M16 3s4 3 4 9-4 9-4 9",key:"4w2vsq"}],["line",{x1:"15",x2:"9",y1:"9",y2:"15",key:"f7djnv"}],["line",{x1:"9",x2:"15",y1:"9",y2:"15",key:"1shsy8"}]]);var C=e.i(955716),A=e.i(323441),T=e.i(473708),_=e.i(356909),L=e.i(303281);let E=(0,k.default)("Rows",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"12",y2:"12",key:"10d38w"}]]);var M=e.i(926125),O=e.i(727612),D=e.i(107233),S=e.i(299023);let q=(0,k.default)("Merge",[["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M12 2v10.3a4 4 0 0 1-1.172 2.872L4 22",key:"1hyw0i"}],["path",{d:"m20 22-5-5",key:"1m27yz"}]]),U=(0,k.default)("Split",[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]]),B=(0,k.default)("FileJson",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);var I=e.i(741929),R=e.i(647163);let z=[{id:"organisme",name:"Organisme",icon:"ðŸ¢",variables:[{id:"org_nom",label:"Nom de l'organisme",value:"{ecole_nom}"},{id:"org_adresse",label:"Adresse",value:"{ecole_adresse}"},{id:"org_email",label:"Email",value:"{ecole_email}"},{id:"org_telephone",label:"TÃ©lÃ©phone",value:"{ecole_telephone}"},{id:"org_siret",label:"SIRET",value:"{ecole_siret}"},{id:"org_logo",label:"Logo",value:"{ecole_logo}"}]},{id:"client",name:"Client / Ã‰lÃ¨ve",icon:"ðŸ‘¤",variables:[{id:"client_nom",label:"Nom",value:"{eleve_nom}"},{id:"client_prenom",label:"PrÃ©nom",value:"{eleve_prenom}"},{id:"client_email",label:"Email",value:"{eleve_email}"},{id:"client_adresse",label:"Adresse",value:"{eleve_adresse}"},{id:"client_telephone",label:"TÃ©lÃ©phone",value:"{eleve_telephone}"}]},{id:"formation",name:"Formation",icon:"ðŸ“š",variables:[{id:"formation_nom",label:"Nom de la formation",value:"{formation_nom}"},{id:"formation_duree",label:"DurÃ©e",value:"{formation_duree}"},{id:"formation_prix",label:"Prix",value:"{formation_prix}"},{id:"formation_dates",label:"Dates",value:"{formation_dates}"},{id:"formation_lieu",label:"Lieu",value:"{session_lieu}"}]},{id:"document",name:"Document",icon:"ðŸ“„",variables:[{id:"doc_date",label:"Date du jour",value:"{date_jour}"},{id:"doc_numero",label:"NumÃ©ro de document",value:"{numero_document}"},{id:"doc_annee",label:"AnnÃ©e scolaire",value:"{annee_scolaire}"}]},{id:"finance",name:"Finance",icon:"ðŸ’°",variables:[{id:"montant_ht",label:"Montant HT",value:"{montant_ht}"},{id:"montant_ttc",label:"Montant TTC",value:"{montant_ttc}"},{id:"tva",label:"TVA",value:"{tva}"},{id:"mode_paiement",label:"Mode de paiement",value:"{mode_paiement}"}]}];function H({onClick:e,isActive:a,disabled:r,children:l,title:i,className:n}){return(0,t.jsx)("button",{type:"button",onClick:e,disabled:r,title:i,className:(0,R.cn)("p-2 rounded-md transition-colors","hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",a&&"bg-purple-100 text-purple-700",n),children:l})}function P(){return(0,t.jsx)("div",{className:"w-px h-6 bg-gray-300 mx-1"})}function F({variable:e}){let r=(0,a.useCallback)(t=>{t.dataTransfer.setData("application/x-variable-id",e.id),t.dataTransfer.setData("application/x-variable-label",e.label),t.dataTransfer.setData("application/x-variable-value",e.value),t.dataTransfer.setData("text/plain",e.value),t.dataTransfer.effectAllowed="copy";let a=document.createElement("div");a.className="fixed -left-[9999px] px-3 py-1.5 rounded-full bg-blue-100 text-blue-700 text-sm font-medium border border-blue-300",a.textContent=e.label,document.body.appendChild(a),t.dataTransfer.setDragImage(a,a.offsetWidth/2,a.offsetHeight/2),setTimeout(()=>{document.body.removeChild(a)},0)},[e]);return(0,t.jsxs)("div",{draggable:!0,onDragStart:r,className:(0,R.cn)("inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium","bg-purple-100 text-purple-700 border border-purple-200","cursor-grab active:cursor-grabbing","hover:bg-purple-200 hover:border-purple-300 hover:shadow-sm","transition-all duration-150","select-none"),children:[(0,t.jsx)(N,{className:"w-3 h-3 opacity-70"}),(0,t.jsx)("span",{children:e.label})]})}function V({editor:e}){return e&&e.isActive("table")?(0,t.jsxs)("div",{className:"flex items-center gap-1 px-2 py-1 bg-gray-50 rounded-md border border-gray-200",children:[(0,t.jsx)("span",{className:"text-xs text-gray-500 mr-2",children:"Tableau :"}),(0,t.jsxs)("button",{type:"button",onClick:()=>e.chain().focus().addRowAfter().run(),title:"Ajouter une ligne aprÃ¨s",className:"p-1.5 rounded hover:bg-gray-200 text-gray-600",children:[(0,t.jsx)(D.Plus,{className:"w-3.5 h-3.5"}),(0,t.jsx)(E,{className:"w-3.5 h-3.5"})]}),(0,t.jsxs)("button",{type:"button",onClick:()=>e.chain().focus().deleteRow().run(),title:"Supprimer la ligne",className:"p-1.5 rounded hover:bg-gray-200 text-gray-600",children:[(0,t.jsx)(S.Minus,{className:"w-3.5 h-3.5"}),(0,t.jsx)(E,{className:"w-3.5 h-3.5"})]}),(0,t.jsx)("div",{className:"w-px h-4 bg-gray-300 mx-1"}),(0,t.jsxs)("button",{type:"button",onClick:()=>e.chain().focus().addColumnAfter().run(),title:"Ajouter une colonne aprÃ¨s",className:"p-1.5 rounded hover:bg-gray-200 text-gray-600",children:[(0,t.jsx)(D.Plus,{className:"w-3.5 h-3.5"}),(0,t.jsx)(M.Columns,{className:"w-3.5 h-3.5"})]}),(0,t.jsxs)("button",{type:"button",onClick:()=>e.chain().focus().deleteColumn().run(),title:"Supprimer la colonne",className:"p-1.5 rounded hover:bg-gray-200 text-gray-600",children:[(0,t.jsx)(S.Minus,{className:"w-3.5 h-3.5"}),(0,t.jsx)(M.Columns,{className:"w-3.5 h-3.5"})]}),(0,t.jsx)("div",{className:"w-px h-4 bg-gray-300 mx-1"}),(0,t.jsx)("button",{type:"button",onClick:()=>e.chain().focus().mergeCells().run(),disabled:!e.can().mergeCells(),title:"Fusionner les cellules",className:"p-1.5 rounded hover:bg-gray-200 text-gray-600 disabled:opacity-50",children:(0,t.jsx)(q,{className:"w-3.5 h-3.5"})}),(0,t.jsx)("button",{type:"button",onClick:()=>e.chain().focus().splitCell().run(),disabled:!e.can().splitCell(),title:"Diviser la cellule",className:"p-1.5 rounded hover:bg-gray-200 text-gray-600 disabled:opacity-50",children:(0,t.jsx)(U,{className:"w-3.5 h-3.5"})}),(0,t.jsx)("div",{className:"w-px h-4 bg-gray-300 mx-1"}),(0,t.jsx)("button",{type:"button",onClick:()=>e.chain().focus().deleteTable().run(),title:"Supprimer le tableau",className:"p-1.5 rounded hover:bg-red-100 text-red-600",children:(0,t.jsx)(O.Trash2,{className:"w-3.5 h-3.5"})})]}):null}function G(){let[e,k]=(0,a.useState)(!1),[E,M]=(0,a.useState)(null),O=(0,r.useEditor)({extensions:[l.default.configure({heading:{levels:[1,2,3]}}),i.default.configure({types:["heading","paragraph"]}),n.default,s.Table.configure({resizable:!0,HTMLAttributes:{class:"editor-table"}}),s.TableRow,s.TableHeader,s.TableCell,o.default.configure({inline:!1,allowBase64:!0,HTMLAttributes:{class:"editor-image"}}),c.VariableExtension,d.ConditionalBlockExtension],content:`
      <h1>Titre du document</h1>
      <p>Commencez \xe0 r\xe9diger votre document ici...</p>
      <p>Glissez-d\xe9posez des variables depuis la barre lat\xe9rale droite pour les ins\xe9rer dans votre texte.</p>
      <p></p>
    `,editorProps:{attributes:{class:"prose prose-sm sm:prose lg:prose-lg max-w-none focus:outline-none min-h-[250mm] p-0"},handleDrop:(e,t,a,r)=>{if(r)return!1;let l=t.dataTransfer?.getData("application/x-variable-id"),i=t.dataTransfer?.getData("application/x-variable-label"),n=t.dataTransfer?.getData("application/x-variable-value");if(!l||!i||!n)return!1;t.preventDefault();let s=e.posAtCoords({left:t.clientX,top:t.clientY});if(!s)return!1;let{schema:o}=e.state,c=o.nodes.variable.create({id:l,label:i,value:n}),d=e.state.tr.insert(s.pos,c);return e.dispatch(d),!0},handleDOMEvents:{dragover:(e,t)=>!!t.dataTransfer?.types.includes("application/x-variable-id")&&(t.preventDefault(),t.dataTransfer.dropEffect="copy",!0),dragenter:(e,t)=>!!t.dataTransfer?.types.includes("application/x-variable-id")&&(t.preventDefault(),!0)}}}),D=(0,a.useCallback)(e=>{O&&O.chain().focus().insertVariable({id:e.id,label:e.label,value:e.value}).run()},[O]),S=(0,a.useCallback)(()=>{O&&O.chain().focus().insertTable({rows:3,cols:3,withHeaderRow:!0}).run()},[O]),q=(0,a.useCallback)(()=>{if(!O)return;let e=window.prompt("URL de l'image :");e&&O.chain().focus().setImage({src:e}).run()},[O]),U=(0,a.useCallback)(async()=>{if(O){k(!0);try{let e=O.getJSON(),t=O.getHTML();console.log("=== SAUVEGARDE DU DOCUMENT ==="),console.log("ðŸ“‹ Contenu JSON (pour rÃ©Ã©dition) :",e),console.log("ðŸ“„ Contenu HTML (pour PDF) :",t),console.log("==============================="),M(new Date),alert("Document sauvegardÃ© ! (voir console pour les donnÃ©es)")}catch(e){console.error("Erreur de sauvegarde:",e),alert("Erreur lors de la sauvegarde")}finally{k(!1)}}},[O]),R=(0,a.useCallback)(()=>{window.print()},[]),G=(0,a.useCallback)(()=>{if(!O)return;let e=new Blob([JSON.stringify(O.getJSON(),null,2)],{type:"application/json"}),t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download="document-template.json",a.click(),URL.revokeObjectURL(t)},[O]),J=(0,a.useCallback)(()=>{if(!O)return;let e=O.getHTML(),t=new Blob([`<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    body { font-family: system-ui, -apple-system, sans-serif; max-width: 210mm; margin: 0 auto; padding: 20mm; }
    table { border-collapse: collapse; width: 100%; margin: 1rem 0; }
    td, th { border: 1px solid #d1d5db; padding: 8px 12px; }
    th { background-color: #f3f4f6; font-weight: 600; }
    img { max-width: 100%; height: auto; }
    h1 { font-size: 1.875rem; font-weight: 700; }
    h2 { font-size: 1.5rem; font-weight: 600; }
    span[data-type="variable"] {
      background-color: #dbeafe;
      color: #1e40af;
      padding: 2px 8px;
      border-radius: 4px;
      font-size: 0.875em;
    }
  </style>
</head>
<body>
${e}
</body>
</html>`],{type:"text/html"}),a=URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download="document.html",r.click(),URL.revokeObjectURL(a)},[O]);return O?(0,t.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[(0,t.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,t.jsxs)("div",{className:"document-editor-header bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between no-print",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-lg font-semibold text-gray-800",children:"Ã‰diteur de document"}),E&&(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["DerniÃ¨re sauvegarde : ",E.toLocaleTimeString()]})]}),(0,t.jsxs)("div",{className:"document-editor-actions flex items-center gap-2",children:[(0,t.jsxs)("button",{type:"button",onClick:G,title:"Exporter en JSON",className:"flex items-center gap-2 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md transition-colors",children:[(0,t.jsx)(B,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"JSON"})]}),(0,t.jsxs)("button",{type:"button",onClick:J,title:"Exporter en HTML",className:"flex items-center gap-2 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md transition-colors",children:[(0,t.jsx)(I.FileCode,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"HTML"})]}),(0,t.jsxs)("button",{type:"button",onClick:R,title:"AperÃ§u PDF / Imprimer",className:"flex items-center gap-2 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md transition-colors",children:[(0,t.jsx)(L.Printer,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"AperÃ§u"})]}),(0,t.jsxs)("button",{type:"button",onClick:U,disabled:e,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors disabled:opacity-50",children:[(0,t.jsx)(_.Save,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:e?"Enregistrement...":"Enregistrer le ModÃ¨le"})]})]})]}),(0,t.jsxs)("div",{className:"document-editor-toolbar sticky top-0 z-10 bg-white border-b border-gray-200 shadow-sm no-print",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 px-4 py-2 flex-wrap",children:[(0,t.jsx)(H,{onClick:()=>O.chain().focus().undo().run(),disabled:!O.can().undo(),title:"Annuler (Ctrl+Z)",children:(0,t.jsx)(j.Undo,{className:"w-4 h-4"})}),(0,t.jsx)(H,{onClick:()=>O.chain().focus().redo().run(),disabled:!O.can().redo(),title:"RÃ©tablir (Ctrl+Y)",children:(0,t.jsx)(w.Redo,{className:"w-4 h-4"})}),(0,t.jsx)(P,{}),(0,t.jsx)(H,{onClick:()=>O.chain().focus().toggleBold().run(),isActive:O.isActive("bold"),title:"Gras (Ctrl+B)",children:(0,t.jsx)(u.Bold,{className:"w-4 h-4"})}),(0,t.jsx)(H,{onClick:()=>O.chain().focus().toggleItalic().run(),isActive:O.isActive("italic"),title:"Italique (Ctrl+I)",children:(0,t.jsx)(m.Italic,{className:"w-4 h-4"})}),(0,t.jsx)(H,{onClick:()=>O.chain().focus().toggleUnderline().run(),isActive:O.isActive("underline"),title:"SoulignÃ© (Ctrl+U)",children:(0,t.jsx)(p.Underline,{className:"w-4 h-4"})}),(0,t.jsx)(P,{}),(0,t.jsx)(H,{onClick:()=>O.chain().focus().toggleHeading({level:1}).run(),isActive:O.isActive("heading",{level:1}),title:"Titre 1",children:(0,t.jsx)(h.Heading1,{className:"w-4 h-4"})}),(0,t.jsx)(H,{onClick:()=>O.chain().focus().toggleHeading({level:2}).run(),isActive:O.isActive("heading",{level:2}),title:"Titre 2",children:(0,t.jsx)(x.Heading2,{className:"w-4 h-4"})}),(0,t.jsx)(P,{}),(0,t.jsx)(H,{onClick:()=>O.chain().focus().setTextAlign("left").run(),isActive:O.isActive({textAlign:"left"}),title:"Aligner Ã  gauche",children:(0,t.jsx)(f.AlignLeft,{className:"w-4 h-4"})}),(0,t.jsx)(H,{onClick:()=>O.chain().focus().setTextAlign("center").run(),isActive:O.isActive({textAlign:"center"}),title:"Centrer",children:(0,t.jsx)(b.AlignCenter,{className:"w-4 h-4"})}),(0,t.jsx)(H,{onClick:()=>O.chain().focus().setTextAlign("right").run(),isActive:O.isActive({textAlign:"right"}),title:"Aligner Ã  droite",children:(0,t.jsx)(g.AlignRight,{className:"w-4 h-4"})}),(0,t.jsx)(P,{}),(0,t.jsx)(H,{onClick:()=>O.chain().focus().toggleBulletList().run(),isActive:O.isActive("bulletList"),title:"Liste Ã  puces",children:(0,t.jsx)(y.List,{className:"w-4 h-4"})}),(0,t.jsx)(H,{onClick:()=>O.chain().focus().toggleOrderedList().run(),isActive:O.isActive("orderedList"),title:"Liste numÃ©rotÃ©e",children:(0,t.jsx)(v.ListOrdered,{className:"w-4 h-4"})}),(0,t.jsx)(P,{}),(0,t.jsx)(H,{onClick:S,isActive:O.isActive("table"),title:"InsÃ©rer un tableau 3x3",children:(0,t.jsx)(A.Table,{className:"w-4 h-4"})}),(0,t.jsx)(H,{onClick:q,title:"InsÃ©rer une image",children:(0,t.jsx)(T.Image,{className:"w-4 h-4"})}),(0,t.jsx)(P,{}),(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)(H,{onClick:()=>O.chain().focus().insertConditionalBlock({type:"if"}).run(),isActive:O.isActive("conditionalBlock"),title:"InsÃ©rer un bloc conditionnel (Ctrl+Shift+C)",children:(0,t.jsx)(C.GitBranch,{className:"w-4 h-4"})}),(0,t.jsx)("div",{className:"absolute left-0 top-full mt-1 hidden group-hover:block z-20",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 py-1 min-w-[180px]",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>O.chain().focus().insertConditionalBlock({type:"if"}).run(),className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-left hover:bg-teal-50 text-gray-700",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-sm bg-teal-400"}),(0,t.jsx)("span",{children:"Bloc SI"}),(0,t.jsx)("span",{className:"ml-auto text-xs text-gray-400",children:"Ctrl+Shift+C"})]}),(0,t.jsxs)("button",{type:"button",onClick:()=>O.chain().focus().insertConditionalBlock({type:"elseif"}).run(),className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-left hover:bg-amber-50 text-gray-700",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-sm bg-amber-400"}),(0,t.jsx)("span",{children:"Bloc SINON SI"})]}),(0,t.jsxs)("button",{type:"button",onClick:()=>O.chain().focus().insertConditionalBlock({type:"else"}).run(),className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-left hover:bg-blue-50 text-gray-700",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-sm bg-blue-400"}),(0,t.jsx)("span",{children:"Bloc SINON"})]})]})})]})]}),O.isActive("table")&&(0,t.jsx)("div",{className:"px-4 py-2 border-t border-gray-100",children:(0,t.jsx)(V,{editor:O})})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-8",onDragOver:e=>e.preventDefault(),children:[(0,t.jsx)("div",{className:"document-editor-page mx-auto bg-white shadow-lg rounded-sm",style:{width:"210mm",minHeight:"297mm",padding:"20mm"},children:(0,t.jsx)(r.EditorContent,{editor:O})}),(0,t.jsx)("div",{className:"h-16"})]})]}),(0,t.jsxs)("div",{className:"document-editor-sidebar w-[300px] bg-white border-l border-gray-200 flex flex-col overflow-hidden shadow-lg no-print",children:[(0,t.jsxs)("div",{className:"px-4 py-4 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-blue-50",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[(0,t.jsx)(N,{className:"w-5 h-5 text-purple-600"}),"Variables"]}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Glissez ou cliquez pour insÃ©rer"})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-5",children:z.map(e=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider flex items-center gap-2",children:[(0,t.jsx)("span",{children:e.icon}),e.name]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:e.variables.map(e=>(0,t.jsx)("div",{onClick:()=>D(e),className:"cursor-pointer",children:(0,t.jsx)(F,{variable:e})},e.id))})]},e.id))}),(0,t.jsx)("div",{className:"px-4 py-3 border-t border-gray-200 bg-gray-50",children:(0,t.jsxs)("div",{className:"flex items-start gap-2 text-xs text-gray-500",children:[(0,t.jsx)("span",{className:"text-lg",children:"ðŸ’¡"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-600",children:"Astuce"}),(0,t.jsx)("p",{children:"Les variables seront remplacÃ©es par leurs valeurs lors de la gÃ©nÃ©ration du document."})]})]})})]})]}):(0,t.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:(0,t.jsx)("div",{className:"animate-pulse text-gray-500",children:"Chargement de l'Ã©diteur..."})})}e.s(["default",()=>G],53779)},354039,e=>{e.n(e.i(53779))}]);