(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,871689,e=>{"use strict";let t=(0,e.i(475254).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],871689)},286536,e=>{"use strict";let t=(0,e.i(475254).default)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],286536)},660724,e=>{"use strict";var t=e.i(920755);let s=new class{supabase;constructor(e){this.supabase=e||(0,t.createClient)()}async getFAQCategories(e){let{data:t,error:s}=await this.supabase.from("faq_categories").select("*").eq("organization_id",e).eq("is_active",!0).order("order_index",{ascending:!0});if(s)throw s;return t}async createFAQCategory(e){let{data:t,error:s}=await this.supabase.from("faq_categories").insert(e).select().single();if(s)throw s;return t}async updateFAQCategory(e,t){let{data:s,error:i}=await this.supabase.from("faq_categories").update(t).eq("id",e).select().single();if(i)throw i;return s}async deleteFAQCategory(e){let{error:t}=await this.supabase.from("faq_categories").delete().eq("id",e);if(t)throw t}async getFAQItems(e,t){let s=this.supabase.from("faq_items").select("*, category:faq_categories(*)").eq("organization_id",e).eq("is_active",!0);t?.categoryId&&(s=s.eq("category_id",t.categoryId)),t?.search&&(s=s.or(`question.ilike.%${t.search}%,answer.ilike.%${t.search}%`)),t?.featured&&(s=s.eq("is_featured",!0));let{data:i,error:a}=await s.order("order_index",{ascending:!0}).order("view_count",{ascending:!1});if(a)throw a;return i}async getFAQItemById(e){let{data:t,error:s}=await this.supabase.from("faq_items").select("*, category:faq_categories(*)").eq("id",e).single();if(s)throw s;return t&&await this.supabase.rpc("increment_faq_view_count",{faq_uuid:t.id}),t}async createFAQItem(e){let{data:t,error:s}=await this.supabase.from("faq_items").insert(e).select().single();if(s)throw s;return t}async updateFAQItem(e,t){let{data:s,error:i}=await this.supabase.from("faq_items").update(t).eq("id",e).select().single();if(i)throw i;return s}async deleteFAQItem(e){let{error:t}=await this.supabase.from("faq_items").delete().eq("id",e);if(t)throw t}async createFAQFeedback(e,t,s,i){let{data:a,error:r}=await this.supabase.from("faq_feedback").insert({faq_id:e,user_id:t,is_helpful:s,comment:i}).select().single();if(r)throw r;return a}async getGuides(e,t){let s=this.supabase.from("guides").select("*, author:users(id, full_name, email)").eq("organization_id",e).eq("is_active",!0);t?.category&&(s=s.eq("category",t.category)),t?.difficulty&&(s=s.eq("difficulty",t.difficulty)),t?.search&&(s=s.or(`title.ilike.%${t.search}%,description.ilike.%${t.search}%,content.ilike.%${t.search}%`)),t?.featured&&(s=s.eq("is_featured",!0));let{data:i,error:a}=await s.order("published_at",{ascending:!1}).order("view_count",{ascending:!1});if(a)throw a;return i}async getGuideBySlug(e,t){let{data:s,error:i}=await this.supabase.from("guides").select("*, author:users(id, full_name, email), steps:guide_steps(*)").eq("slug",e).eq("organization_id",t).eq("is_active",!0).single();if(i)throw i;return s&&await this.supabase.rpc("increment_guide_view_count",{guide_uuid:s.id}),s}async createGuide(e){let{data:t,error:s}=await this.supabase.from("guides").insert(e).select().single();if(s)throw s;return t}async updateGuide(e,t){let{data:s,error:i}=await this.supabase.from("guides").update(t).eq("id",e).select().single();if(i)throw i;return s}async deleteGuide(e){let{error:t}=await this.supabase.from("guides").delete().eq("id",e);if(t)throw t}async getGuideSteps(e){let{data:t,error:s}=await this.supabase.from("guide_steps").select("*").eq("guide_id",e).order("step_number",{ascending:!0});if(s)throw s;return t}async createGuideStep(e){let{data:t,error:s}=await this.supabase.from("guide_steps").insert(e).select().single();if(s)throw s;return t}async updateGuideStep(e,t){let{data:s,error:i}=await this.supabase.from("guide_steps").update(t).eq("id",e).select().single();if(i)throw i;return s}async deleteGuideStep(e){let{error:t}=await this.supabase.from("guide_steps").delete().eq("id",e);if(t)throw t}async addGuideToFavorites(e,t){let{data:s,error:i}=await this.supabase.from("guide_favorites").insert({user_id:e,guide_id:t}).select().single();if(i)throw i;return s}async removeGuideFromFavorites(e,t){let{error:s}=await this.supabase.from("guide_favorites").delete().eq("user_id",e).eq("guide_id",t);if(s)throw s}async isGuideFavorite(e,t){let{data:s,error:i}=await this.supabase.from("guide_favorites").select("id").eq("user_id",e).eq("guide_id",t).maybeSingle();if(i)throw i;return!!s}async getUserFavoriteGuides(e){let{data:t,error:s}=await this.supabase.from("guide_favorites").select("*, guide:guides(*, author:users(id, full_name))").eq("user_id",e).order("created_at",{ascending:!1});if(s)throw s;return t}async getGuideProgress(e,t){let{data:s,error:i}=await this.supabase.from("guide_progress").select("*").eq("user_id",e).eq("guide_id",t).maybeSingle();if(i)throw i;return s}async updateGuideProgress(e,t,s,i){let a=await this.getGuideProgress(e,t),r=await this.getGuideSteps(t),d=i.length===r.length;if(a){let{data:e,error:t}=await this.supabase.from("guide_progress").update({current_step:s,completed_steps:i,is_completed:d,completed_at:d?new Date().toISOString():null}).eq("id",a.id).select().single();if(t)throw t;return e}{let{data:a,error:r}=await this.supabase.from("guide_progress").insert({user_id:e,guide_id:t,current_step:s,completed_steps:i,is_completed:d,completed_at:d?new Date().toISOString():null}).select().single();if(r)throw r;return a}}async markStepAsCompleted(e,t,s){let i=await this.getGuideProgress(e,t),a=i?.completed_steps||[];return a.includes(s)||a.push(s),this.updateGuideProgress(e,t,s,a)}};e.s(["knowledgeBaseService",0,s])},400417,e=>{"use strict";let t=(0,e.i(475254).default)("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);e.s(["ThumbsUp",()=>t],400417)},488363,e=>{"use strict";var t=e.i(843476),s=e.i(618566),i=e.i(266027),a=e.i(325715),r=e.i(660724),d=e.i(970065),n=e.i(167881),u=e.i(871689),l=e.i(520958),c=e.i(286536),o=e.i(400417),g=e.i(522016),h=e.i(918789);function f(){let e=(0,s.useParams)().slug,{user:f}=(0,a.useAuth)(),{data:p}=(0,i.useQuery)({queryKey:["faq-category",e,f?.organization_id],queryFn:async()=>(await r.knowledgeBaseService.getFAQCategories(f?.organization_id||"")).find(t=>t.slug===e),enabled:!!e&&!!f?.organization_id}),{data:m}=(0,i.useQuery)({queryKey:["faq-items-category",e,f?.organization_id],queryFn:()=>r.knowledgeBaseService.getFAQItems(f?.organization_id||"",{categoryId:p?.id}),enabled:!!p?.id&&!!f?.organization_id});return(0,t.jsxs)("div",{className:"container mx-auto py-8 px-4 max-w-5xl",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)(g.default,{href:"/dashboard/knowledge-base",children:(0,t.jsxs)(n.Button,{variant:"ghost",size:"sm",className:"mb-4",children:[(0,t.jsx)(u.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Retour à la base de connaissances"]})}),p&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[(0,t.jsx)(l.HelpCircle,{className:"h-8 w-8"}),p.name]}),p.description&&(0,t.jsx)("p",{className:"text-muted-foreground",children:p.description})]})]}),m&&m.length>0?(0,t.jsx)("div",{className:"space-y-4",children:m.map(e=>(0,t.jsx)(d.Card,{className:"hover:shadow-lg transition-shadow",children:(0,t.jsxs)(g.default,{href:`/dashboard/knowledge-base/faq/${e.id}`,children:[(0,t.jsx)(d.CardHeader,{children:(0,t.jsx)(d.CardTitle,{className:"text-lg",children:e.question})}),(0,t.jsxs)(d.CardContent,{children:[(0,t.jsx)("div",{className:"text-sm text-muted-foreground line-clamp-2 mb-3",children:(0,t.jsx)(h.default,{children:e.answer})}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(c.Eye,{className:"h-3 w-3"}),(0,t.jsxs)("span",{children:[e.view_count," vues"]})]}),e.helpful_count>0&&(0,t.jsxs)("div",{className:"flex items-center gap-1 text-green-600",children:[(0,t.jsx)(o.ThumbsUp,{className:"h-3 w-3"}),(0,t.jsxs)("span",{children:[e.helpful_count," utile",e.helpful_count>1?"s":""]})]})]})]})]})},e.id))}):(0,t.jsx)(d.Card,{children:(0,t.jsx)(d.CardContent,{className:"pt-6 text-center text-muted-foreground",children:"Aucune question disponible dans cette catégorie"})})]})}e.s(["default",()=>f])}]);