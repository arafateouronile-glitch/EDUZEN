(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,107233,e=>{"use strict";let t=(0,e.i(475254).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],107233)},503116,e=>{"use strict";let t=(0,e.i(475254).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],503116)},286536,e=>{"use strict";let t=(0,e.i(475254).default)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],286536)},25652,e=>{"use strict";let t=(0,e.i(475254).default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);e.s(["TrendingUp",()=>t],25652)},62870,e=>{"use strict";var t=e.i(843476),s=e.i(271645),a=e.i(647163);e.i(882205);var i=e.i(846932),r=e.i(88653),n=e.i(664659),l=e.i(898791);s.forwardRef(({className:e,label:o,error:c,helperText:d,variant:u="default",leftIcon:m,id:p,options:g,placeholder:h,value:x,...f},_)=>{let[v,y]=s.useState(!1),[w,j]=s.useState(!1),b=p||`select-${Math.random().toString(36).substr(2,9)}`,S=(0,a.cn)("flex w-full rounded-lg font-medium transition-all duration-300","appearance-none cursor-pointer","focus:outline-none focus:ring-2 focus:ring-primary/20","disabled:cursor-not-allowed disabled:opacity-50",{"border-2 border-input bg-background px-4 py-3 pr-11":"default"===u,"focus:border-primary focus:bg-white":"default"===u&&!c,"border-destructive focus:border-destructive focus:ring-destructive/20":c,"border-2 border-input bg-transparent px-4 py-3 pr-11":"outlined"===u,"focus:border-primary focus:shadow-md focus:shadow-primary/10":"outlined"===u&&!c,"border-0 border-b-2 border-input bg-muted/50 px-4 py-3 pr-11 rounded-b-none":"filled"===u,"focus:bg-muted focus:border-primary":"filled"===u&&!c,"focus:border-destructive bg-destructive/5":"filled"===u&&c},m&&"pl-11",e);return(0,t.jsxs)("div",{className:"w-full space-y-1.5",children:[o&&(0,t.jsxs)(i.motion.label,{htmlFor:b,initial:!1,animate:{color:c?"#EF4444":v?"rgb(37, 99, 235)":"rgb(107, 114, 128)"},className:(0,a.cn)("block text-sm font-medium transition-colors duration-200",c&&"text-destructive"),children:[o,f.required&&(0,t.jsx)("span",{className:"text-destructive ml-1",children:"*"})]}),(0,t.jsxs)("div",{className:"relative",children:[m&&(0,t.jsx)("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground pointer-events-none z-10",children:m}),(0,t.jsxs)(i.motion.select,{ref:_,id:b,value:x,...f,onFocus:e=>{y(!0),f.onFocus?.(e)},onBlur:e=>{y(!1),j(!1),f.onBlur?.(e)},onMouseDown:()=>j(!w),className:S,animate:{scale:v?1.01:1,borderColor:c?"#EF4444":v?"rgb(37, 99, 235)":"rgb(226, 232, 240)"},transition:{duration:.2},children:[h&&(0,t.jsx)("option",{value:"",disabled:!0,children:h}),(g||[]).map(e=>(0,t.jsx)("option",{value:e.value,disabled:e.disabled,children:e.label},e.value))]}),(0,t.jsx)(i.motion.div,{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-muted-foreground",animate:{rotate:180*!!w},transition:{duration:.2},children:(0,t.jsx)(n.ChevronDown,{className:"h-5 w-5"})}),c&&(0,t.jsx)(i.motion.div,{className:"absolute right-11 top-1/2 -translate-y-1/2 pointer-events-none",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:500,damping:30},children:(0,t.jsx)(l.AlertCircle,{className:"h-5 w-5 text-destructive"})})]}),(0,t.jsx)(r.AnimatePresence,{mode:"wait",children:(c||d)&&(0,t.jsx)(i.motion.p,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},transition:{duration:.2},className:(0,a.cn)("text-xs transition-colors duration-200",c?"text-destructive":"text-muted-foreground"),children:c||d})})]})}).displayName="SelectNative";let o=s.createContext({}),c=s.forwardRef(({value:e,onValueChange:a,children:i},r)=>{let[n,l]=s.useState(!1);return(0,t.jsx)(o.Provider,{value:{value:e,onValueChange:a,open:n,setOpen:l},children:(0,t.jsx)("div",{className:"relative",ref:r,children:i})})});c.displayName="SelectRoot";let d=s.forwardRef(({children:e,className:i,...r},l)=>{let{open:c,setOpen:d}=s.useContext(o);return(0,t.jsxs)("button",{ref:l,type:"button",className:(0,a.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",i),onClick:()=>d?.(!c),...r,children:[e,(0,t.jsx)(n.ChevronDown,{className:(0,a.cn)("h-4 w-4 opacity-50 transition-transform",c&&"rotate-180")})]})});d.displayName="SelectTrigger";let u=s.forwardRef(({placeholder:e},a)=>{let{value:i}=s.useContext(o);return(0,t.jsx)("span",{ref:a,children:i||e})});u.displayName="SelectValue";let m=s.forwardRef(({children:e},a)=>{let i=s.useContext(o);return i?.open&&e?(0,t.jsx)("div",{ref:a,className:"absolute top-full left-0 z-50 mt-1 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md",children:(0,t.jsx)("div",{className:"p-1",children:e})}):null});m.displayName="SelectContent";let p=s.forwardRef(({value:e,children:i,className:r,...n},l)=>{let{value:c,onValueChange:d,setOpen:u}=s.useContext(o),m=c===e;return(0,t.jsx)("div",{ref:l,role:"option","aria-selected":m,className:(0,a.cn)("relative flex w-full cursor-pointer select-none items-center rounded-sm py-1.5 px-2 text-sm outline-none hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground",m&&"bg-accent text-accent-foreground",r),onClick:()=>{d?.(e),u?.(!1)},...n,children:i})});p.displayName="SelectItem",e.s(["Select",0,c,"SelectContent",0,m,"SelectItem",0,p,"SelectRoot",0,c,"SelectTrigger",0,d,"SelectValue",0,u])},240078,e=>{"use strict";var t=e.i(920755);let s=new class{supabase;constructor(e){this.supabase=e||(0,t.createClient)()}async getPolicies(e,t){let s=this.supabase.from("security_policies").select("*, approved_by_user:users!security_policies_approved_by_fkey(id, full_name, email)").or(`organization_id.eq.${e},organization_id.is.null`);t?.status&&(s=s.eq("status",t.status)),t?.category&&(s=s.eq("category",t.category));let{data:a,error:i}=await s.order("created_at",{ascending:!1});if(i)throw i;return a}async createPolicy(e){let{data:t,error:s}=await this.supabase.from("security_policies").insert(e).select().single();if(s)throw s;return t}async updatePolicy(e,t){let{data:s,error:a}=await this.supabase.from("security_policies").update(t).eq("id",e).select().single();if(a)throw a;return s}async approvePolicy(e,t){return this.updatePolicy(e,{approval_status:"approved",approved_by:t,approved_at:new Date().toISOString(),status:"active"})}async getControls(e,t){let s=this.supabase.from("security_controls").select("*").eq("organization_id",e);t?.framework&&(s=s.eq("framework",t.framework)),t?.status&&(s=s.eq("implementation_status",t.status));let{data:a,error:i}=await s.order("control_id",{ascending:!0});if(i)throw i;return a}async createControl(e){let{data:t,error:s}=await this.supabase.from("security_controls").insert(e).select().single();if(s)throw s;return t}async updateControl(e,t){let{data:s,error:a}=await this.supabase.from("security_controls").update(t).eq("id",e).select().single();if(a)throw a;return s}async getControlComplianceStats(e,t){let s=await this.getControls(e,{framework:t}),a={total:s.length,implemented:s.filter(e=>"implemented"===e.implementation_status).length,partial:s.filter(e=>"partial"===e.implementation_status).length,not_implemented:s.filter(e=>"not_implemented"===e.implementation_status).length,compliant:s.filter(e=>"compliant"===e.compliance_status).length,partially_compliant:s.filter(e=>"partially_compliant"===e.compliance_status).length,non_compliant:s.filter(e=>"non_compliant"===e.compliance_status).length,compliance_percentage:0};return a.total>0&&(a.compliance_percentage=a.compliant/a.total*100),a}async getEvidence(e){let{data:t,error:s}=await this.supabase.from("compliance_evidence").select("*, collected_by_user:users!compliance_evidence_collected_by_fkey(id, full_name, email), verified_by_user:users!compliance_evidence_verified_by_fkey(id, full_name, email)").eq("control_id",e).order("collected_at",{ascending:!1});if(s)throw s;return t}async createEvidence(e){let{data:t,error:s}=await this.supabase.from("compliance_evidence").insert(e).select().single();if(s)throw s;return t}async verifyEvidence(e,t){let{data:s,error:a}=await this.supabase.from("compliance_evidence").update({verified_by:t,verified_at:new Date().toISOString()}).eq("id",e).select().single();if(a)throw a;return s}async getRisks(e,t){let s=this.supabase.from("risk_assessments").select("*, owner:users(id, full_name, email)").eq("organization_id",e);t?.treatmentStatus&&(s=s.eq("treatment_status",t.treatmentStatus)),t?.riskLevel&&(s=s.eq("risk_level",t.riskLevel));let{data:a,error:i}=await s.order("risk_level",{ascending:!1});if(i){if("PGRST200"===i.code||404===i.status||400===i.status||i.message?.includes("does not exist"))return[];throw i}return a||[]}async createRisk(e){let{data:t,error:s}=await this.supabase.from("risk_assessments").insert(e).select().single();if(s)throw s;return t}async updateRisk(e,t){let{data:s,error:a}=await this.supabase.from("risk_assessments").update(t).eq("id",e).select().single();if(a)throw a;return s}async getCriticalRisks(e){return this.getRisks(e,{riskLevel:"critical",treatmentStatus:"open"})}async getIncidents(e,t){let s=this.supabase.from("security_incidents").select("*, reported_by_user:users(id, full_name, email), assigned_to_user:users(id, full_name, email)").eq("organization_id",e);t?.status&&(s=s.eq("status",t.status)),t?.severity&&(s=s.eq("severity",t.severity));let{data:a,error:i}=await s.order("created_at",{ascending:!1});if(i){if("PGRST200"===i.code||404===i.status||400===i.status||i.message?.includes("does not exist"))return[];throw i}return a||[]}async createIncident(e){let t=`INC-${Date.now()}-${Math.random().toString(36).substr(2,9).toUpperCase()}`,{data:s,error:a}=await this.supabase.from("security_incidents").insert({...e,incident_id:t}).select().single();if(a)throw a;return s}async updateIncident(e,t){let{data:s,error:a}=await this.supabase.from("security_incidents").update(t).eq("id",e).select().single();if(a)throw a;return s}async resolveIncident(e,t,s){return this.updateIncident(e,{status:"resolved",resolution:t,root_cause:s,resolved_at:new Date().toISOString()})}async getAudits(e,t){let s=this.supabase.from("security_audits").select("*").eq("organization_id",e);t?.status&&(s=s.eq("status",t.status)),t?.framework&&(s=s.eq("framework",t.framework));let{data:a,error:i}=await s.order("start_date",{ascending:!1});if(i)throw i;return a}async createAudit(e){let t=`AUDIT-${Date.now()}-${Math.random().toString(36).substr(2,9).toUpperCase()}`,{data:s,error:a}=await this.supabase.from("security_audits").insert({...e,audit_id:t}).select().single();if(a)throw a;return s}async getAuditFindings(e){let{data:t,error:s}=await this.supabase.from("audit_findings").select("*, assigned_to_user:users!audit_findings_assigned_to_fkey(id, full_name, email), control:security_controls(*)").eq("audit_id",e).order("severity",{ascending:!1});if(s)throw s;return t}async createAuditFinding(e){let{data:t,error:s}=await this.supabase.from("audit_findings").insert(e).select().single();if(s)throw s;return t}async getTrainings(e){let{data:t,error:s}=await this.supabase.from("security_training").select("*").eq("organization_id",e).eq("is_active",!0).order("created_at",{ascending:!1});if(s)throw s;return t}async getTrainingRecords(e){let{data:t,error:s}=await this.supabase.from("security_training_records").select("*, training:security_training(*)").eq("user_id",e).order("created_at",{ascending:!1});if(s)throw s;return t}async createTrainingRecord(e){let{data:t,error:s}=await this.supabase.from("security_training_records").insert(e).select().single();if(s)throw s;return t}async completeTraining(e,t){let{data:s,error:a}=await this.supabase.from("security_training_records").update({status:"completed",completion_percentage:100,score:t,completed_at:new Date().toISOString()}).eq("id",e).select().single();if(a)throw a;return s}async logAccess(e){let{data:t,error:s}=await this.supabase.from("access_logs").insert(e).select().single();if(s)throw s;return t}async getAccessLogs(e,t){let s=this.supabase.from("access_logs").select("*, user:users(id, full_name, email)").eq("organization_id",e);t?.userId&&(s=s.eq("user_id",t.userId)),t?.action&&(s=s.eq("action",t.action)),t?.startDate&&(s=s.gte("created_at",t.startDate.toISOString())),t?.endDate&&(s=s.lte("created_at",t.endDate.toISOString()));let{data:a,error:i}=await s.order("created_at",{ascending:!1}).limit(1e3);if(i)throw i;return a}async generateComplianceReport(e,t){await this.getControls(e,{framework:t});let s=await this.getRisks(e),a=await this.getIncidents(e),i=await this.getAudits(e,{framework:t}),r=await this.getControlComplianceStats(e,t),n=s.filter(e=>"critical"===e.risk_level&&"open"===e.treatment_status),l=a.filter(e=>"resolved"!==e.status&&"closed"!==e.status),o=i.filter(e=>{let t=new Date(e.start_date),s=new Date;return s.setMonth(s.getMonth()-6),t>=s});return{framework:t||"all",generated_at:new Date().toISOString(),controls:{total:r.total,compliance_percentage:r.compliance_percentage,implemented:r.implemented,partial:r.partial,not_implemented:r.not_implemented,compliant:r.compliant,partially_compliant:r.partially_compliant,non_compliant:r.non_compliant},risks:{total:s.length,critical:n.length,high:s.filter(e=>"high"===e.risk_level&&"open"===e.treatment_status).length,medium:s.filter(e=>"medium"===e.risk_level&&"open"===e.treatment_status).length,low:s.filter(e=>"low"===e.risk_level&&"open"===e.treatment_status).length,mitigated:s.filter(e=>"mitigated"===e.treatment_status).length},incidents:{total:a.length,open:l.length,critical:a.filter(e=>"critical"===e.severity&&"resolved"!==e.status).length,data_breaches:a.filter(e=>e.data_breach).length},audits:{total:i.length,recent:o.length,average_score:i.length>0?i.reduce((e,t)=>e+(t.overall_score||0),0)/i.length:0,average_compliance:i.length>0?i.reduce((e,t)=>e+(t.compliance_percentage||0),0)/i.length:0},recommendations:this.generateRecommendations(r,n,l)}}generateRecommendations(e,t,s){let a=[];return e.compliance_percentage<80&&a.push(`Le pourcentage de conformit\xe9 est de ${e.compliance_percentage.toFixed(1)}%. Il est recommand\xe9 d'am\xe9liorer l'impl\xe9mentation des contr\xf4les.`),t.length>0&&a.push(`${t.length} risque(s) critique(s) ouvert(s) n\xe9cessitent une attention imm\xe9diate.`),s.filter(e=>"critical"===e.severity).length>0&&a.push("Des incidents critiques sont en cours. Une intervention immédiate est requise."),e.not_implemented>0&&a.push(`${e.not_implemented} contr\xf4le(s) ne sont pas encore impl\xe9ment\xe9s.`),0===a.length&&a.push("Aucune recommandation urgente. La conformité est bonne."),a}};e.s(["complianceService",0,s])},338355,e=>{"use strict";var t=e.i(843476),s=e.i(271645),a=e.i(266027),i=e.i(954616),r=e.i(912598),n=e.i(325715),l=e.i(240078),o=e.i(970065),c=e.i(167881),d=e.i(23750),u=e.i(10708),m=e.i(994179),p=e.i(630374),g=e.i(62870),h=e.i(626912),x=e.i(107233),f=e.i(555436),_=e.i(465286),v=e.i(503116),y=e.i(286536),w=e.i(440160),j=e.i(25652),b=e.i(522016),S=e.i(647163);function C(){let{user:e}=(0,n.useAuth)(),C=(0,r.useQueryClient)(),[N,k]=(0,s.useState)(""),[I,q]=(0,s.useState)("all"),[D,T]=(0,s.useState)("all"),[R,z]=(0,s.useState)(!1),[A,O]=(0,s.useState)({title:"",audit_type:"internal",framework:"iso27001",auditor_name:"",auditor_organization:"",start_date:new Date().toISOString().split("T")[0],end_date:""}),{data:P}=(0,a.useQuery)({queryKey:["security-audits",e?.organization_id,I,D],queryFn:()=>l.complianceService.getAudits(e?.organization_id||"",{framework:"all"===I?void 0:I,status:"all"===D?void 0:D}),enabled:!!e?.organization_id}),L=P?.filter(e=>!N||!!e.title.toLowerCase().includes(N.toLowerCase())||!!e.audit_id.toLowerCase().includes(N.toLowerCase())),B=(0,i.useMutation)({mutationFn:()=>l.complianceService.createAudit({...A,organization_id:e?.organization_id||"",start_date:new Date(A.start_date).toISOString(),end_date:A.end_date?new Date(A.end_date).toISOString():void 0}),onSuccess:()=>{C.invalidateQueries({queryKey:["security-audits"]}),z(!1),O({title:"",audit_type:"internal",framework:"iso27001",auditor_name:"",auditor_organization:"",start_date:new Date().toISOString().split("T")[0],end_date:""})}}),F={scheduled:"bg-blue-100 text-blue-800",in_progress:"bg-yellow-100 text-yellow-800",completed:"bg-green-100 text-green-800",cancelled:"bg-gray-100 text-gray-800"};return(0,t.jsxs)("div",{className:"container mx-auto py-8 px-4 max-w-7xl",children:[(0,t.jsxs)("div",{className:"mb-8 flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[(0,t.jsx)(h.FileCheck,{className:"h-8 w-8"}),"Audits de sécurité"]}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Audits internes et externes de conformité"})]}),(0,t.jsxs)(p.Dialog,{open:R,onOpenChange:z,children:[(0,t.jsx)(p.DialogTrigger,{asChild:!0,children:(0,t.jsxs)(c.Button,{children:[(0,t.jsx)(x.Plus,{className:"h-4 w-4 mr-2"}),"Nouvel audit"]})}),(0,t.jsxs)(p.DialogContent,{className:"max-w-2xl",children:[(0,t.jsxs)(p.DialogHeader,{children:[(0,t.jsx)(p.DialogTitle,{children:"Créer un nouvel audit"}),(0,t.jsx)(p.DialogDescription,{children:"Planifiez un audit de sécurité pour votre organisation"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(u.Label,{children:"Type d'audit"}),(0,t.jsxs)(g.Select,{value:A.audit_type,onValueChange:e=>O({...A,audit_type:e}),children:[(0,t.jsx)(g.SelectTrigger,{children:(0,t.jsx)(g.SelectValue,{})}),(0,t.jsxs)(g.SelectContent,{children:[(0,t.jsx)(g.SelectItem,{value:"internal",children:"Interne"}),(0,t.jsx)(g.SelectItem,{value:"external",children:"Externe"}),(0,t.jsx)(g.SelectItem,{value:"self_assessment",children:"Auto-évaluation"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(u.Label,{children:"Framework"}),(0,t.jsxs)(g.Select,{value:A.framework,onValueChange:e=>O({...A,framework:e}),children:[(0,t.jsx)(g.SelectTrigger,{children:(0,t.jsx)(g.SelectValue,{})}),(0,t.jsxs)(g.SelectContent,{children:[(0,t.jsx)(g.SelectItem,{value:"iso27001",children:"ISO 27001"}),(0,t.jsx)(g.SelectItem,{value:"soc2",children:"SOC 2"}),(0,t.jsx)(g.SelectItem,{value:"gdpr",children:"GDPR"}),(0,t.jsx)(g.SelectItem,{value:"custom",children:"Personnalisé"})]})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(u.Label,{children:"Titre"}),(0,t.jsx)(d.Input,{value:A.title,onChange:e=>O({...A,title:e.target.value}),placeholder:"Titre de l'audit"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(u.Label,{children:"Nom de l'auditeur"}),(0,t.jsx)(d.Input,{value:A.auditor_name,onChange:e=>O({...A,auditor_name:e.target.value}),placeholder:"Nom de l'auditeur"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(u.Label,{children:"Organisation de l'auditeur"}),(0,t.jsx)(d.Input,{value:A.auditor_organization,onChange:e=>O({...A,auditor_organization:e.target.value}),placeholder:"Organisation"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(u.Label,{children:"Date de début"}),(0,t.jsx)(d.Input,{type:"date",value:A.start_date,onChange:e=>O({...A,start_date:e.target.value})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(u.Label,{children:"Date de fin (optionnel)"}),(0,t.jsx)(d.Input,{type:"date",value:A.end_date,onChange:e=>O({...A,end_date:e.target.value})})]})]}),(0,t.jsx)(c.Button,{onClick:()=>B.mutate(),disabled:!A.title,className:"w-full",children:"Créer l'audit"})]})]})]})]}),(0,t.jsxs)("div",{className:"mb-6 flex gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 relative",children:[(0,t.jsx)(f.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),(0,t.jsx)(d.Input,{placeholder:"Rechercher un audit...",value:N,onChange:e=>k(e.target.value),className:"pl-10"})]}),(0,t.jsxs)(g.Select,{value:I,onValueChange:q,children:[(0,t.jsx)(g.SelectTrigger,{className:"w-40",children:(0,t.jsx)(g.SelectValue,{})}),(0,t.jsxs)(g.SelectContent,{children:[(0,t.jsx)(g.SelectItem,{value:"all",children:"Tous les frameworks"}),(0,t.jsx)(g.SelectItem,{value:"iso27001",children:"ISO 27001"}),(0,t.jsx)(g.SelectItem,{value:"soc2",children:"SOC 2"}),(0,t.jsx)(g.SelectItem,{value:"gdpr",children:"GDPR"})]})]}),(0,t.jsxs)(g.Select,{value:D,onValueChange:T,children:[(0,t.jsx)(g.SelectTrigger,{className:"w-48",children:(0,t.jsx)(g.SelectValue,{})}),(0,t.jsxs)(g.SelectContent,{children:[(0,t.jsx)(g.SelectItem,{value:"all",children:"Tous les statuts"}),(0,t.jsx)(g.SelectItem,{value:"scheduled",children:"Planifié"}),(0,t.jsx)(g.SelectItem,{value:"in_progress",children:"En cours"}),(0,t.jsx)(g.SelectItem,{value:"completed",children:"Terminé"}),(0,t.jsx)(g.SelectItem,{value:"cancelled",children:"Annulé"})]})]})]}),L&&L.length>0?(0,t.jsx)("div",{className:"grid grid-cols-1 gap-4",children:L.map(e=>(0,t.jsxs)(o.Card,{children:[(0,t.jsx)(o.CardHeader,{children:(0,t.jsx)("div",{className:"flex items-start justify-between",children:(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(o.CardTitle,{className:"text-lg",children:e.title}),(0,t.jsx)(m.Badge,{variant:"outline",children:e.audit_id}),(0,t.jsx)(m.Badge,{children:e.framework?.toUpperCase()}),(0,t.jsxs)(m.Badge,{className:F[e.status]||"bg-gray-100 text-gray-800",children:["scheduled"===e.status?(0,t.jsx)(v.Clock,{className:"h-3 w-3 mr-1"}):"completed"===e.status?(0,t.jsx)(_.CheckCircle2,{className:"h-3 w-3 mr-1"}):(0,t.jsx)(v.Clock,{className:"h-3 w-3 mr-1"}),"scheduled"===e.status?"Planifié":"in_progress"===e.status?"En cours":"completed"===e.status?"Terminé":"Annulé"]})]}),(0,t.jsxs)(o.CardDescription,{className:"mt-2",children:["internal"===e.audit_type?"Audit interne":"external"===e.audit_type?"Audit externe":"Auto-évaluation",e.auditor_name&&` • ${e.auditor_name}`]})]})})}),(0,t.jsx)(o.CardContent,{children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[null!==e.overall_score&&(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Score: "}),(0,t.jsxs)(m.Badge,{className:"bg-blue-100 text-blue-800",children:[(0,t.jsx)(j.TrendingUp,{className:"h-3 w-3 mr-1"}),e.overall_score.toFixed(1),"/100"]})]}),null!==e.compliance_percentage&&(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Conformité: "}),(0,t.jsxs)(m.Badge,{className:"bg-green-100 text-green-800",children:[e.compliance_percentage.toFixed(1),"%"]})]}),e.findings_count>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Constatations: "}),(0,t.jsx)(m.Badge,{variant:"outline",children:e.findings_count}),e.critical_findings_count>0&&(0,t.jsxs)(m.Badge,{className:"bg-red-100 text-red-800 ml-2",children:[e.critical_findings_count," critique(s)"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,t.jsxs)("span",{children:["Du ",(0,S.formatDate)(e.start_date)]}),e.end_date&&(0,t.jsxs)("span",{children:["au ",(0,S.formatDate)(e.end_date)]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 pt-2",children:[(0,t.jsx)(b.default,{href:`/dashboard/compliance/audits/${e.id}`,children:(0,t.jsxs)(c.Button,{variant:"outline",size:"sm",children:[(0,t.jsx)(y.Eye,{className:"h-4 w-4 mr-2"}),"Voir les détails"]})}),e.report_url&&(0,t.jsx)(c.Button,{variant:"outline",size:"sm",asChild:!0,children:(0,t.jsxs)("a",{href:e.report_url,target:"_blank",rel:"noopener noreferrer",children:[(0,t.jsx)(w.Download,{className:"h-4 w-4 mr-2"}),"Télécharger le rapport"]})})]})]})})]},e.id))}):(0,t.jsx)(o.Card,{children:(0,t.jsxs)(o.CardContent,{className:"pt-6 text-center text-muted-foreground",children:["Aucun audit trouvé. ",N&&"Essayez une autre recherche."]})})]})}e.s(["default",()=>C])}]);