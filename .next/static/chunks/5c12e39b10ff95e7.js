(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,503116,e=>{"use strict";let s=(0,e.i(475254).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>s],503116)},645760,e=>{"use strict";var s=e.i(843476),a=e.i(271645),t=e.i(647163);e.i(882205);var r=e.i(846932);let i=a.forwardRef(({className:e,variant:a="default",hoverable:i=!1,glow:l=!1,glowColor:n="rgba(51, 90, 207, 0.3)",...d},c)=>(0,s.jsxs)(r.motion.div,{ref:c,className:(0,t.cn)("relative rounded-2xl border backdrop-blur-xl transition-all duration-300",{"bg-white/70 dark:bg-gray-900/70 border-white/20 dark:border-gray-700/30 shadow-lg":"default"===a,"bg-white/80 dark:bg-gray-900/80 border-white/30 dark:border-gray-700/40 shadow-xl":"premium"===a,"bg-white/50 dark:bg-gray-900/50 border-white/10 dark:border-gray-700/20 shadow-md":"subtle"===a,"cursor-pointer":i,"hover:shadow-2xl hover:scale-[1.02]":i,"hover:bg-white/90 dark:hover:bg-gray-900/90":i},e),whileHover:i?{scale:1.02,y:-2}:void 0,transition:{type:"spring",stiffness:300,damping:30},...d,children:[l&&(0,s.jsx)(r.motion.div,{className:"absolute inset-0 rounded-2xl opacity-0 blur-xl",style:{background:`radial-gradient(circle, ${n} 0%, transparent 70%)`},animate:{opacity:[0,.5,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}}),(0,s.jsx)("div",{className:"relative z-10",children:d.children})]}));i.displayName="GlassCard",e.s(["GlassCard",()=>i])},225913,e=>{"use strict";var s=e.i(207670);let a=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,t=s.clsx;e.s(["cva",0,(e,s)=>r=>{var i;if((null==s?void 0:s.variants)==null)return t(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:l,defaultVariants:n}=s,d=Object.keys(l).map(e=>{let s=null==r?void 0:r[e],t=null==n?void 0:n[e];if(null===s)return null;let i=a(s)||a(t);return l[e][i]}),c=r&&Object.entries(r).reduce((e,s)=>{let[a,t]=s;return void 0===t||(e[a]=t),e},{});return t(e,d,null==s||null==(i=s.compoundVariants)?void 0:i.reduce((e,s)=>{let{class:a,className:t,...r}=s;return Object.entries(r).every(e=>{let[s,a]=e;return Array.isArray(a)?a.includes({...n,...c}[s]):({...n,...c})[s]===a})?[...e,a,t]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}])},994179,e=>{"use strict";var s=e.i(843476),a=e.i(225913),t=e.i(647163);let r=(0,a.cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground border-border hover:bg-accent hover:text-accent-foreground",success:"border-transparent bg-success-primary text-white shadow hover:bg-brand-blue-dark",warning:"border-transparent bg-warning-primary text-white shadow hover:bg-brand-cyan-dark",premium:"border-transparent bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 text-white shadow-lg shadow-purple-500/50 hover:shadow-xl hover:shadow-purple-500/60",glass:"border-white/20 bg-white/10 backdrop-blur-md text-foreground shadow-lg"},size:{default:"px-2.5 py-0.5 text-xs",sm:"px-2 py-0.5 text-xs",lg:"px-3 py-1 text-sm"}},defaultVariants:{variant:"default",size:"default"}});function i({className:e,variant:a,size:i,dot:l,pulse:n,children:d,...c}){return(0,s.jsxs)("div",{className:(0,t.cn)(r({variant:a,size:i}),e),...c,children:[l&&(0,s.jsx)("span",{className:(0,t.cn)("mr-1.5 h-1.5 w-1.5 rounded-full","success"===a&&"bg-white/80","warning"===a&&"bg-white/80","default"===a&&"bg-white/80",n&&"animate-pulse")}),d]})}e.s(["Badge",()=>i])},127341,e=>{"use strict";var s=e.i(843476),a=e.i(271645),t=e.i(647163);let r=a.createContext(void 0);function i({value:e,defaultValue:i,onValueChange:l,children:n,className:d}){let c=void 0!==e,[o,x]=a.useState(i??"");a.useEffect(()=>{c||void 0===i||x(i)},[i]);let m=c?e:o,u=a.useCallback(e=>{c||x(e),l?.(e)},[c,l]);return(0,s.jsx)(r.Provider,{value:{value:m,onValueChange:u},children:(0,s.jsx)("div",{className:(0,t.cn)("w-full",d),children:n})})}function l(){let e=a.useContext(r);if(!e)throw Error("Tabs components must be used within a Tabs component");return e}function n({children:e,className:a}){return(0,s.jsx)("div",{className:(0,t.cn)("inline-flex h-10 items-center justify-center rounded-lg bg-bg-gray-100 p-1 text-text-tertiary",a),children:e})}function d({value:e,children:a,className:r}){let{value:i,onValueChange:n}=l(),d=i===e;return(0,s.jsx)("button",{type:"button",onClick:()=>n(e),className:(0,t.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-outline-none focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",d?"bg-white text-text-primary shadow-sm":"text-text-tertiary hover:text-text-primary",r),children:a})}function c({value:e,children:a,className:r}){let{value:i}=l();return i!==e?null:(0,s.jsx)("div",{className:(0,t.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),children:a})}e.s(["Tabs",()=>i,"TabsContent",()=>c,"TabsList",()=>n,"TabsTrigger",()=>d])},101523,e=>{"use strict";let s=(0,e.i(475254).default)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);e.s(["BarChart3",()=>s],101523)},431343,e=>{"use strict";let s=(0,e.i(475254).default)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);e.s(["Play",()=>s],431343)},249945,e=>{"use strict";let s=(0,e.i(475254).default)("FileQuestion",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["path",{d:"M10 10.3c.2-.4.5-.8.9-1a2.1 2.1 0 0 1 2.6.4c.3.4.5.8.5 1.3 0 1.3-2 2-2 2",key:"1umxtm"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["FileQuestion",()=>s],249945)},285998,e=>{"use strict";var s=e.i(843476),a=e.i(266027),t=e.i(383801),r=e.i(267824),i=e.i(645760),l=e.i(167881),n=e.i(994179),d=e.i(127341);e.i(882205);var c=e.i(846932),o=e.i(354385),x=e.i(503116),m=e.i(465286),u=e.i(431343),h=e.i(842009),g=e.i(101523),b=e.i(87316),p=e.i(249945),v=e.i(522016),y=e.i(647163),j=e.i(271645);function f(){let{student:e,studentId:f}=(0,t.useLearnerContext)(),N=(0,j.useMemo)(()=>f?(0,r.createLearnerClient)(f):null,[f]),{data:w,isLoading:C}=(0,a.useQuery)({queryKey:["learner-pending-quizzes",e?.id],queryFn:async()=>(!e?.id,[]),enabled:!!e?.id}),{data:k,isLoading:T}=(0,a.useQuery)({queryKey:["learner-quiz-responses",e?.id],queryFn:async()=>[],enabled:!1}),{data:B,isLoading:q}=(0,a.useQuery)({queryKey:["learner-grades",e?.id],queryFn:async()=>{if(!e?.id||!N)return[];let{data:s}=await N.from("grades").select(`
          *,
          sessions(name, formations(name))
        `).eq("student_id",e.id).order("graded_at",{ascending:!1});return s||[]},enabled:!!e?.id&&!!N}),z=(k?.length||0)+(B?.length||0),G=B?.length?Math.round(B.reduce((e,s)=>e+(s.percentage||0),0)/B.length):0,M={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}};return(0,s.jsxs)(c.motion.div,{className:"space-y-6 pb-24 lg:pb-8",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"visible",children:[(0,s.jsx)(c.motion.div,{variants:M,children:(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)("div",{className:"p-2 bg-amber-100 rounded-xl",children:(0,s.jsx)(o.ClipboardCheck,{className:"h-8 w-8 text-amber-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:"Mes évaluations"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Quiz, questionnaires et résultats"})]})]})}),(0,s.jsxs)(c.motion.div,{variants:M,className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,s.jsxs)(i.GlassCard,{className:"p-4 text-center",children:[(0,s.jsx)(o.ClipboardCheck,{className:"h-6 w-6 text-brand-blue mx-auto mb-2"}),(0,s.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:z}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Évaluations passées"})]}),(0,s.jsxs)(i.GlassCard,{className:"p-4 text-center",children:[(0,s.jsx)(x.Clock,{className:"h-6 w-6 text-amber-600 mx-auto mb-2"}),(0,s.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:w?.length||0}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"En attente"})]}),(0,s.jsxs)(i.GlassCard,{className:"p-4 text-center",children:[(0,s.jsx)(g.BarChart3,{className:"h-6 w-6 text-green-600 mx-auto mb-2"}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:[G,"%"]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Score moyen"})]}),(0,s.jsxs)(i.GlassCard,{className:"p-4 text-center",children:[(0,s.jsx)(h.Award,{className:"h-6 w-6 text-purple-600 mx-auto mb-2"}),(0,s.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:B?.filter(e=>(e.percentage||0)>=80).length||0}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Excellents"})]})]}),(0,s.jsx)(c.motion.div,{variants:M,children:(0,s.jsxs)(d.Tabs,{defaultValue:"pending",className:"space-y-6",children:[(0,s.jsxs)(d.TabsList,{className:"bg-white/50 backdrop-blur-sm border border-gray-200/50 p-1 rounded-xl",children:[(0,s.jsxs)(d.TabsTrigger,{value:"pending",className:"rounded-lg data-[state=active]:bg-brand-blue data-[state=active]:text-white",children:[(0,s.jsx)(x.Clock,{className:"h-4 w-4 mr-2"}),"À faire (",w?.length||0,")"]}),(0,s.jsxs)(d.TabsTrigger,{value:"completed",className:"rounded-lg data-[state=active]:bg-brand-blue data-[state=active]:text-white",children:[(0,s.jsx)(m.CheckCircle2,{className:"h-4 w-4 mr-2"}),"Terminées (",z,")"]})]}),(0,s.jsx)(d.TabsContent,{value:"pending",className:"space-y-4",children:C?(0,s.jsx)("div",{className:"space-y-4",children:[1,2].map(e=>(0,s.jsx)("div",{className:"h-24 bg-gray-100 rounded-2xl animate-pulse"},e))}):w&&w.length>0?(0,s.jsx)("div",{className:"space-y-4",children:w.map(e=>(0,s.jsx)(i.GlassCard,{className:"p-6 hover:shadow-lg transition-all duration-300",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"p-3 bg-amber-50 rounded-xl",children:(0,s.jsx)(p.FileQuestion,{className:"h-6 w-6 text-amber-600"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900",children:e.title}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[e.lessons?.courses?.title," • ",e.lessons?.title]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-sm text-gray-500",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(x.Clock,{className:"h-4 w-4"}),e.time_limit||30," min"]}),(0,s.jsxs)("span",{children:[e.passing_score||70,"% requis"]})]})]}),(0,s.jsx)(v.default,{href:`/learner/evaluations/${e.id}`,children:(0,s.jsxs)(l.Button,{children:[(0,s.jsx)(u.Play,{className:"h-4 w-4 mr-2"}),"Commencer"]})})]})},e.id))}):(0,s.jsxs)(i.GlassCard,{className:"p-12 text-center",children:[(0,s.jsx)(m.CheckCircle2,{className:"h-16 w-16 text-green-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Tout est à jour !"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Vous n'avez aucune évaluation en attente"})]})}),(0,s.jsx)(d.TabsContent,{value:"completed",className:"space-y-4",children:q||T?(0,s.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,s.jsx)("div",{className:"h-24 bg-gray-100 rounded-2xl animate-pulse"},e))}):z>0?(0,s.jsxs)("div",{className:"space-y-4",children:[B?.map(e=>{var a;return(0,s.jsxs)(i.GlassCard,{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:`p-3 rounded-xl ${(e.percentage||0)>=80?"bg-green-50":(e.percentage||0)>=60?"bg-blue-50":"bg-amber-50"}`,children:(0,s.jsx)(o.ClipboardCheck,{className:`h-6 w-6 ${(e.percentage||0)>=80?"text-green-600":(e.percentage||0)>=60?"text-blue-600":"text-amber-600"}`})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900",children:e.subject}),(a=e.percentage||0)>=80?(0,s.jsx)(n.Badge,{className:"bg-green-100 text-green-700",children:"Excellent"}):a>=60?(0,s.jsx)(n.Badge,{className:"bg-blue-100 text-blue-700",children:"Bien"}):a>=40?(0,s.jsx)(n.Badge,{className:"bg-amber-100 text-amber-700",children:"Moyen"}):(0,s.jsx)(n.Badge,{className:"bg-red-100 text-red-700",children:"À améliorer"})]}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:e.sessions?.formations?.name||e.sessions?.name}),(0,s.jsxs)("div",{className:"flex items-center gap-4 mt-1 text-sm text-gray-500",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(b.Calendar,{className:"h-4 w-4"}),e.graded_at&&(0,y.formatDate)(e.graded_at)]}),(0,s.jsx)("span",{children:e.assessment_type||"Évaluation"})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:[e.score,"/",e.max_score||20]}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[e.percentage,"%"]})]})]}),e.feedback&&(0,s.jsx)("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:(0,s.jsx)("p",{className:"text-sm text-gray-600",children:e.feedback})})]},e.id)}),k?.map(e=>(0,s.jsx)(i.GlassCard,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"p-3 bg-purple-50 rounded-xl",children:(0,s.jsx)(p.FileQuestion,{className:"h-6 w-6 text-purple-600"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("h3",{className:"font-semibold text-gray-900",children:["Quiz - ",e.lessons?.title]}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:e.lessons?.courses?.title}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:e.created_at&&(0,y.formatDate)(e.created_at)})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:[e.score||0,"%"]}),e.passed?(0,s.jsx)(n.Badge,{className:"bg-green-100 text-green-700",children:"Réussi"}):(0,s.jsx)(n.Badge,{className:"bg-red-100 text-red-700",children:"À refaire"})]})]})},e.id))]}):(0,s.jsxs)(i.GlassCard,{className:"p-12 text-center",children:[(0,s.jsx)(o.ClipboardCheck,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Aucune évaluation terminée"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Vos résultats apparaîtront ici"})]})})]})})]})}e.s(["default",()=>f])}]);