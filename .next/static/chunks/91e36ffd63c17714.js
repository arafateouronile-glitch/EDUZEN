(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,263488,e=>{"use strict";let s=(0,e.i(475254).default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);e.s(["Mail",()=>s],263488)},669671,e=>{"use strict";let s=new class{async blobToBase64(e){return new Promise((s,t)=>{let n=new FileReader;n.onloadend=()=>{s(n.result.split(",")[1])},n.onerror=t,n.readAsDataURL(e)})}async sendEmail(e){try{let s=e.attachments?await Promise.all(e.attachments.map(async e=>{let s;if(e.content instanceof Blob)s=await this.blobToBase64(e.content);else if(e.content instanceof ArrayBuffer){let t=new Blob([e.content],{type:e.contentType});s=await this.blobToBase64(t)}else s=e.content;return{filename:e.filename,content:s,contentType:e.contentType}})):void 0,t=await fetch("/api/email/send",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({to:e.to,subject:e.subject,html:e.html,text:e.text,attachments:s,cc:e.cc,bcc:e.bcc,replyTo:e.replyTo})});if(!t.ok){let e=await t.json();throw Error(e.message||"Erreur lors de l'envoi de l'email")}let n=await t.json();return{success:!0,message:n.message||"Email envoyé avec succès"}}catch(e){throw Error(e instanceof Error?e.message:"Erreur lors de l'envoi de l'email")}}async sendDocument(e,s,t,n,a,r){return this.sendEmail({to:e,subject:s,html:a,text:r,attachments:[{filename:n,content:t,contentType:"application/pdf"}]})}async sendMultipleDocuments(e,s,t,n,a){return this.sendEmail({to:e,subject:s,html:n,text:a,attachments:t.map(e=>({filename:e.filename,content:e.blob,contentType:"application/pdf"}))})}};e.s(["emailService",0,s])},291871,e=>{"use strict";var s=e.i(843476),t=e.i(970065),n=e.i(167881),a=e.i(440160),r=e.i(178583),i=e.i(263488),l=e.i(348572);function c({sessionData:e,formation:c,program:d,organization:o,enrollments:m=[]}){let{handleGenerateSessionReport:x,handleGenerateCertificate:h}=(0,l.useDocumentGeneration)({sessionData:e,formation:c,program:d,organization:o}),p=new Set;return m.forEach(e=>{let s=e.students;s&&s.company&&p.add(s.company)}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(t.Card,{children:[(0,s.jsx)(t.CardHeader,{children:(0,s.jsx)(t.CardTitle,{children:"Entreprises participantes"})}),(0,s.jsx)(t.CardContent,{children:0===p.size?(0,s.jsx)("p",{className:"text-sm text-muted-foreground text-center py-8",children:"Aucune entreprise identifiée pour le moment"}):(0,s.jsx)("div",{className:"space-y-3",children:Array.from(p).map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:e}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:[m.filter(s=>s.students?.company===e).length," apprenant",m.filter(s=>s.students?.company===e).length>1?"s":""]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)(n.Button,{variant:"outline",size:"sm",children:[(0,s.jsx)(r.FileText,{className:"mr-2 h-4 w-4"}),"Documents"]}),(0,s.jsxs)(n.Button,{variant:"outline",size:"sm",children:[(0,s.jsx)(i.Mail,{className:"mr-2 h-4 w-4"}),"Contacter"]})]})]},t))})})]}),(0,s.jsxs)(t.Card,{children:[(0,s.jsx)(t.CardHeader,{children:(0,s.jsx)(t.CardTitle,{children:"Documents et rapports"})}),(0,s.jsxs)(t.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(r.FileText,{className:"h-5 w-5 text-gray-400"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:"Rapport de session"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Rapport détaillé de la session de formation"})]})]}),(0,s.jsx)(n.Button,{variant:"ghost",size:"sm",onClick:()=>{alert("Fonctionnalité à venir : Génération du rapport de session")},children:(0,s.jsx)(a.Download,{className:"h-4 w-4"})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(r.FileText,{className:"h-5 w-5 text-gray-400"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:"Attestations de formation"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Générer les attestations pour tous les apprenants"})]})]}),(0,s.jsx)(n.Button,{variant:"ghost",size:"sm",onClick:()=>{alert("Fonctionnalité à venir : Génération des attestations")},children:(0,s.jsx)(a.Download,{className:"h-4 w-4"})})]})]})]}),(0,s.jsxs)(t.Card,{children:[(0,s.jsx)(t.CardHeader,{children:(0,s.jsx)(t.CardTitle,{children:"Contact et support"})}),(0,s.jsx)(t.CardContent,{className:"space-y-4",children:o&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"Organisation"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:o.name})]}),o.email&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"Email"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:o.email})]}),o.phone&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"Téléphone"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:o.phone})]}),o.address&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"Adresse"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:o.address})]})]})})]})]})}e.s(["GestionEspaceEntreprise",()=>c])},48503,e=>{e.v(e=>Promise.resolve().then(()=>e(915833)))},870653,e=>{e.v(s=>Promise.all(["static/chunks/e551d4a510c7c3c6.js"].map(s=>e.l(s))).then(()=>s(424154)))},195111,e=>{e.v(s=>Promise.all(["static/chunks/9fc253a1d558cb4a.js"].map(s=>e.l(s))).then(()=>s(38201)))}]);