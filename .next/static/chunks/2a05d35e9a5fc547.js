(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,107233,e=>{"use strict";let t=(0,e.i(475254).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],107233)},503116,e=>{"use strict";let t=(0,e.i(475254).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],503116)},645760,e=>{"use strict";var t=e.i(843476),a=e.i(271645),r=e.i(647163);e.i(882205);var i=e.i(846932);let n=a.forwardRef(({className:e,variant:a="default",hoverable:n=!1,glow:s=!1,glowColor:l="rgba(51, 90, 207, 0.3)",...o},d)=>(0,t.jsxs)(i.motion.div,{ref:d,className:(0,r.cn)("relative rounded-2xl border backdrop-blur-xl transition-all duration-300",{"bg-white/70 dark:bg-gray-900/70 border-white/20 dark:border-gray-700/30 shadow-lg":"default"===a,"bg-white/80 dark:bg-gray-900/80 border-white/30 dark:border-gray-700/40 shadow-xl":"premium"===a,"bg-white/50 dark:bg-gray-900/50 border-white/10 dark:border-gray-700/20 shadow-md":"subtle"===a,"cursor-pointer":n,"hover:shadow-2xl hover:scale-[1.02]":n,"hover:bg-white/90 dark:hover:bg-gray-900/90":n},e),whileHover:n?{scale:1.02,y:-2}:void 0,transition:{type:"spring",stiffness:300,damping:30},...o,children:[s&&(0,t.jsx)(i.motion.div,{className:"absolute inset-0 rounded-2xl opacity-0 blur-xl",style:{background:`radial-gradient(circle, ${l} 0%, transparent 70%)`},animate:{opacity:[0,.5,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}}),(0,t.jsx)("div",{className:"relative z-10",children:o.children})]}));n.displayName="GlassCard",e.s(["GlassCard",()=>n])},605631,e=>{"use strict";let t=(0,e.i(475254).default)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],605631)},738308,e=>{"use strict";let t=(0,e.i(475254).default)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>t],738308)},25652,e=>{"use strict";let t=(0,e.i(475254).default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);e.s(["TrendingUp",()=>t],25652)},870273,e=>{"use strict";let t=(0,e.i(475254).default)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);e.s(["Star",()=>t],870273)},436332,e=>{"use strict";let t=(0,e.i(475254).default)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);e.s(["Edit",()=>t],436332)},785817,e=>{"use strict";var t=e.i(843476),a=e.i(271645),r=e.i(647163);e.i(882205);var i=e.i(846932);let n=a.forwardRef(({className:e,columns:a=4,gap:i="md",children:n,...s},l)=>(0,t.jsx)("div",{ref:l,className:(0,r.cn)("grid",{1:"grid-cols-1",2:"grid-cols-1 md:grid-cols-2",3:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3",4:"grid-cols-1 md:grid-cols-2 lg:grid-cols-4"}[a],{sm:"gap-4",md:"gap-6",lg:"gap-8"}[i],e),...s,children:n}));n.displayName="BentoGrid";let s=a.forwardRef(({className:e,span:a=1,rowSpan:n=1,children:s,...l},o)=>(0,t.jsx)(i.motion.div,{ref:o,className:(0,r.cn)({1:"col-span-1",2:"col-span-1 md:col-span-2",3:"col-span-1 md:col-span-2 lg:col-span-3",4:"col-span-1 md:col-span-2 lg:col-span-4"}[a],{1:"row-span-1",2:"row-span-1 md:row-span-2",3:"row-span-1 md:row-span-3"}[n],e),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,ease:[.16,1,.3,1]},...l,children:s}));s.displayName="BentoCard",e.s(["BentoCard",()=>s,"BentoGrid",()=>n])},209372,e=>{"use strict";var t=e.i(50270);let a=t.z.object({first_name:t.z.string().min(1,"Le prÃ©nom est requis").max(100,"Le prÃ©nom est trop long"),last_name:t.z.string().min(1,"Le nom est requis").max(100,"Le nom est trop long"),date_of_birth:t.z.string().optional().or(t.z.literal("")),gender:t.z.enum(["male","female","other"]).optional().or(t.z.literal("")),email:t.z.string().email("Email invalide").optional().or(t.z.literal("")),phone:t.z.string().optional().or(t.z.literal("")),address:t.z.string().optional().or(t.z.literal("")),city:t.z.string().optional().or(t.z.literal("")),class_id:t.z.string().optional().or(t.z.literal("")),enrollment_date:t.z.string().min(1,"La date d'inscription est requise"),guardian_first_name:t.z.string().min(1,"Le prÃ©nom du tuteur est requis"),guardian_last_name:t.z.string().min(1,"Le nom du tuteur est requis"),guardian_relationship:t.z.enum(["parent","guardian","other"]).default("parent"),guardian_phone_primary:t.z.string().min(1,"Le tÃ©lÃ©phone principal du tuteur est requis"),guardian_phone_secondary:t.z.string().optional().or(t.z.literal("")),guardian_email:t.z.string().email("Email invalide").optional().or(t.z.literal("")),guardian_address:t.z.string().optional().or(t.z.literal(""))});t.z.object({first_name:t.z.string().min(1,"Le prÃ©nom est requis").max(100,"Le prÃ©nom est trop long"),last_name:t.z.string().min(1,"Le nom est requis").max(100,"Le nom est trop long"),date_of_birth:t.z.string().optional().or(t.z.literal("")),gender:t.z.enum(["male","female","other"]).optional().or(t.z.literal("")),email:t.z.string().email("Email invalide").optional().or(t.z.literal("")),phone:t.z.string().optional().or(t.z.literal("")),address:t.z.string().optional().or(t.z.literal("")),city:t.z.string().optional().or(t.z.literal("")),class_id:t.z.string().optional().or(t.z.literal("")),enrollment_date:t.z.string().min(1,"La date d'inscription est requise"),status:t.z.enum(["active","inactive","graduated"]).default("active")});let r=t.z.object({code:t.z.string().min(1,"Le code est requis").max(50,"Le code est trop long"),name:t.z.string().min(1,"Le nom est requis").max(200,"Le nom est trop long"),subtitle:t.z.string().optional().or(t.z.literal("")),description:t.z.string().optional().or(t.z.literal("")),category:t.z.string().optional().or(t.z.literal("")),program_version:t.z.string().optional().or(t.z.literal("")),version_date:t.z.string().optional().or(t.z.literal("")),duration_hours:t.z.string().optional().or(t.z.literal("")),duration_days:t.z.string().optional().or(t.z.literal("")),photo_url:t.z.string().url("URL invalide").optional().or(t.z.literal("")),price:t.z.string().optional().or(t.z.literal("")),price_enterprise:t.z.string().optional().or(t.z.literal("")),price_individual:t.z.string().optional().or(t.z.literal("")),price_freelance:t.z.string().optional().or(t.z.literal("")),currency:t.z.string().default("XOF"),payment_plan:t.z.enum(["full","installment","free"]).default("full"),published_online:t.z.boolean().default(!1),is_public:t.z.boolean().default(!1),eligible_cpf:t.z.boolean().default(!1),cpf_code:t.z.string().optional().or(t.z.literal("")),modalities:t.z.string().optional().or(t.z.literal("")),training_action_type:t.z.string().optional().or(t.z.literal("")),pedagogical_objectives:t.z.string().optional().or(t.z.literal("")),learner_profile:t.z.string().optional().or(t.z.literal("")),training_content:t.z.string().optional().or(t.z.literal("")),execution_follow_up:t.z.string().optional().or(t.z.literal("")),certification_modalities:t.z.string().optional().or(t.z.literal("")),quality:t.z.string().optional().or(t.z.literal("")),accounting_product_config:t.z.string().optional().or(t.z.literal("")),edof_export_fields:t.z.string().optional().or(t.z.literal("")),competence_domains:t.z.string().optional().or(t.z.literal("")),prerequisites:t.z.string().optional().or(t.z.literal("")),capacity_max:t.z.string().optional().or(t.z.literal("")),age_min:t.z.string().optional().or(t.z.literal("")),age_max:t.z.string().optional().or(t.z.literal("")),certification_issued:t.z.boolean().default(!1),is_active:t.z.boolean().default(!0)}),i=t.z.object({program_id:t.z.string().min(1,"Le programme est requis"),code:t.z.string().min(1,"Le code est requis").max(50,"Le code est trop long"),name:t.z.string().min(1,"Le nom est requis").max(200,"Le nom est trop long"),subtitle:t.z.string().optional().or(t.z.literal("")),photo_url:t.z.string().url("URL invalide").optional().or(t.z.literal("")),category:t.z.string().optional().or(t.z.literal("")),description:t.z.string().optional().or(t.z.literal("")),program_version:t.z.string().optional().or(t.z.literal("")),version_date:t.z.string().optional().or(t.z.literal("")),duration_hours:t.z.string().optional().or(t.z.literal("")),duration_days:t.z.string().optional().or(t.z.literal("")),duration_unit:t.z.enum(["hours","days"]).default("hours"),price:t.z.string().optional().or(t.z.literal("")),currency:t.z.string().default("XOF"),payment_plan:t.z.enum(["full","installment","free"]).default("full"),published_online:t.z.boolean().default(!1),eligible_cpf:t.z.boolean().default(!1),cpf_code:t.z.string().optional().or(t.z.literal("")),modalities:t.z.string().optional().or(t.z.literal("")),training_action_type:t.z.string().optional().or(t.z.literal("")),pedagogical_objectives:t.z.string().optional().or(t.z.literal("")),learner_profile:t.z.string().optional().or(t.z.literal("")),training_content:t.z.string().optional().or(t.z.literal("")),execution_follow_up:t.z.string().optional().or(t.z.literal("")),certification_modalities:t.z.string().optional().or(t.z.literal("")),quality:t.z.string().optional().or(t.z.literal("")),accounting_product_config:t.z.string().optional().or(t.z.literal("")),edof_export_fields:t.z.string().optional().or(t.z.literal("")),competence_domains:t.z.string().optional().or(t.z.literal("")),prerequisites:t.z.string().optional().or(t.z.literal("")),capacity_max:t.z.string().optional().or(t.z.literal("")),age_min:t.z.string().optional().or(t.z.literal("")),age_max:t.z.string().optional().or(t.z.literal("")),certification_issued:t.z.boolean().default(!1),is_active:t.z.boolean().default(!0)}),n=t.z.object({formation_id:t.z.string().min(1,"La formation est requise"),name:t.z.string().min(1,"Le nom est requis").max(200,"Le nom est trop long"),code:t.z.string().optional().or(t.z.literal("")),start_date:t.z.string().min(1,"La date de dÃ©but est requise"),end_date:t.z.string().min(1,"La date de fin est requise"),start_time:t.z.string().optional().or(t.z.literal("")),end_time:t.z.string().optional().or(t.z.literal("")),location:t.z.string().optional().or(t.z.literal("")),capacity_max:t.z.string().optional().or(t.z.literal("")).refine(e=>{if(!e)return!0;let t=parseInt(e);return!isNaN(t)&&t>0},"La capacitÃ© maximale doit Ãªtre un nombre entier positif"),currency:t.z.string().default("XOF"),status:t.z.enum(["planned","ongoing","completed","cancelled"]).default("planned"),teacher_id:t.z.string().optional().or(t.z.literal("")),manager1_id:t.z.string().optional().or(t.z.literal("")),manager2_id:t.z.string().optional().or(t.z.literal("")),inter_entreprise:t.z.boolean().default(!0),sous_traitance:t.z.boolean().default(!1),timezone:t.z.string().default("Europe/Paris"),program_ids:t.z.array(t.z.string()).default([])}).refine(e=>!e.start_date||!e.end_date||new Date(e.end_date)>=new Date(e.start_date),{message:"La date de fin doit Ãªtre postÃ©rieure Ã  la date de dÃ©but",path:["end_date"]}),s=t.z.object({student_id:t.z.string().min(1,"L'Ã©tudiant est requis"),session_id:t.z.string().optional().or(t.z.literal("")),subject:t.z.string().min(1,"Le sujet est requis").max(200,"Le sujet est trop long"),assessment_type:t.z.enum(["pre_formation","hot","cold","manager","instructor","funder","quiz","exam","project","other"]).default("quiz"),score:t.z.string().min(1,"La note est requise").refine(e=>{let t=parseFloat(e);return!isNaN(t)&&t>=0},"La note doit Ãªtre un nombre valide"),max_score:t.z.string().optional().or(t.z.literal("")).refine(e=>{if(!e)return!0;let t=parseFloat(e);return!isNaN(t)&&t>0},"La note maximale doit Ãªtre un nombre valide supÃ©rieur Ã  0"),notes:t.z.string().optional().or(t.z.literal("")),graded_at:t.z.string().min(1,"La date d'Ã©valuation est requise"),coefficient:t.z.string().optional().or(t.z.literal("")).refine(e=>{if(!e)return!0;let t=parseFloat(e);return!isNaN(t)&&t>0},"Le coefficient doit Ãªtre un nombre valide supÃ©rieur Ã  0"),is_makeup:t.z.boolean().optional().default(!1),original_grade_id:t.z.string().optional().or(t.z.literal("")),appreciation:t.z.string().optional().or(t.z.literal("")),term_period:t.z.enum(["Q1","Q2","Q3","Q4","S1","S2","T1","T2","T3"]).optional().or(t.z.literal("")),academic_year_id:t.z.string().optional().or(t.z.literal(""))}).refine(e=>!e.max_score||!e.score||parseFloat(e.score)<=parseFloat(e.max_score),{message:"La note ne peut pas Ãªtre supÃ©rieure Ã  la note maximale",path:["score"]}),l=t.z.object({student_id:t.z.string().min(1,"L'Ã©tudiant est requis"),document_type:t.z.enum(["quote","invoice"]).default("invoice"),invoice_number:t.z.string().optional().or(t.z.literal("")),type:t.z.enum(["tuition","registration","other"]).default("tuition"),issue_date:t.z.string().min(1,"La date d'Ã©mission est requise"),due_date:t.z.string().min(1,"La date d'Ã©chÃ©ance est requise"),amount:t.z.string().min(1,"Le montant est requis").refine(e=>{let t=parseFloat(e);return!isNaN(t)&&t>=0},"Le montant doit Ãªtre un nombre valide supÃ©rieur ou Ã©gal Ã  0"),tax_amount:t.z.string().optional().or(t.z.literal("")).refine(e=>{if(!e)return!0;let t=parseFloat(e);return!isNaN(t)&&t>=0},"Le montant de la taxe doit Ãªtre un nombre valide supÃ©rieur ou Ã©gal Ã  0"),currency:t.z.string().default("XOF"),status:t.z.enum(["draft","sent","partial","paid","overdue","cancelled"]).default("draft"),notes:t.z.string().optional().or(t.z.literal("")),enrollment_id:t.z.string().optional().or(t.z.literal(""))}).refine(e=>!e.issue_date||!e.due_date||new Date(e.due_date)>=new Date(e.issue_date),{message:"La date d'Ã©chÃ©ance doit Ãªtre postÃ©rieure Ã  la date d'Ã©mission",path:["due_date"]});t.z.object({invoice_id:t.z.string().min(1,"La facture est requise"),student_id:t.z.string().min(1,"L'Ã©tudiant est requis"),amount:t.z.string().min(1,"Le montant est requis").refine(e=>{let t=parseFloat(e);return!isNaN(t)&&t>0},"Le montant doit Ãªtre un nombre valide supÃ©rieur Ã  0"),currency:t.z.string().default("XOF"),payment_method:t.z.enum(["cash","mobile_money","card","bank_transfer"]).default("cash"),payment_provider:t.z.enum(["mtn","orange","airtel","wave"]).optional().or(t.z.literal("")),transaction_id:t.z.string().optional().or(t.z.literal("")),paid_at:t.z.string().optional().or(t.z.literal("")),notes:t.z.string().optional().or(t.z.literal(""))});let o=t.z.object({student_id:t.z.string().min(1,"L'Ã©tudiant est requis"),session_id:t.z.string().min(1,"La session est requise"),enrollment_date:t.z.string().min(1,"La date d'inscription est requise"),status:t.z.enum(["pending","confirmed","completed","cancelled","failed"]).default("confirmed"),payment_status:t.z.enum(["pending","partial","paid","overdue"]).default("pending"),total_amount:t.z.string().optional().or(t.z.literal("")).refine(e=>{if(!e)return!0;let t=parseFloat(e);return!isNaN(t)&&t>=0},"Le montant total doit Ãªtre un nombre valide supÃ©rieur ou Ã©gal Ã  0"),paid_amount:t.z.string().optional().or(t.z.literal("")).refine(e=>{if(!e)return!0;let t=parseFloat(e);return!isNaN(t)&&t>=0},"Le montant payÃ© doit Ãªtre un nombre valide supÃ©rieur ou Ã©gal Ã  0")}).refine(e=>{if(e.total_amount&&e.paid_amount){let t=parseFloat(e.total_amount),a=parseFloat(e.paid_amount);if(!isNaN(t)&&!isNaN(a)&&a>t)return!1}return!0},{message:"Le montant payÃ© ne peut pas dÃ©passer le montant total",path:["paid_amount"]});e.s(["enrollmentSchema",0,o,"evaluationSchema",0,s,"formationSchema",0,i,"invoiceSchema",0,l,"programSchema",0,r,"sessionSchema",0,n,"studentSchema",0,a])},797548,e=>{"use strict";let t=(0,e.i(475254).default)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);e.s(["Filter",()=>t],797548)},232189,(e,t,a)=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},865156,(e,t,a)=>{"use strict";var r=e.r(232189);function i(){}function n(){}n.resetWarningCache=i,t.exports=function(){function e(e,t,a,i,n,s){if(s!==r){var l=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var a={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:n,resetWarningCache:i};return a.PropTypes=a,a}},745009,(e,t,a)=>{t.exports=e.r(865156)()},674627,e=>{"use strict";let{getOwnPropertyNames:t,getOwnPropertySymbols:a}=Object,{hasOwnProperty:r}=Object.prototype;function i(e,t){return function(a,r,i){return e(a,r,i)&&t(a,r,i)}}function n(e){return function(t,a,r){if(!t||!a||"object"!=typeof t||"object"!=typeof a)return e(t,a,r);let{cache:i}=r,n=i.get(t),s=i.get(a);if(n&&s)return n===a&&s===t;i.set(t,a),i.set(a,t);let l=e(t,a,r);return i.delete(t),i.delete(a),l}}function s(e){return t(e).concat(a(e))}let l=Object.hasOwn||((e,t)=>r.call(e,t));function o(e,t){return e===t||!e&&!t&&e!=e&&t!=t}let{getOwnPropertyDescriptor:d,keys:u}=Object;function c(e,t){return e.byteLength===t.byteLength&&j(new Uint8Array(e),new Uint8Array(t))}function m(e,t,a){let r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!a.equals(e[r],t[r],r,r,e,t,a))return!1;return!0}function p(e,t){return e.byteLength===t.byteLength&&j(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function g(e,t){return o(e.getTime(),t.getTime())}function f(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function h(e,t){return e===t}function x(e,t,a){let r,i,n=e.size;if(n!==t.size)return!1;if(!n)return!0;let s=Array(n),l=e.entries(),o=0;for(;(r=l.next())&&!r.done;){let n=t.entries(),l=!1,d=0;for(;(i=n.next())&&!i.done;){if(s[d]){d++;continue}let n=r.value,u=i.value;if(a.equals(n[0],u[0],o,d,e,t,a)&&a.equals(n[1],u[1],n[0],u[0],e,t,a)){l=s[d]=!0;break}d++}if(!l)return!1;o++}return!0}function b(e,t,a){let r=u(e),i=r.length;if(u(t).length!==i)return!1;for(;i-- >0;)if(!N(e,t,a,r[i]))return!1;return!0}function y(e,t,a){let r,i,n,l=s(e),o=l.length;if(s(t).length!==o)return!1;for(;o-- >0;)if(!N(e,t,a,r=l[o])||(i=d(e,r),n=d(t,r),(i||n)&&(!i||!n||i.configurable!==n.configurable||i.enumerable!==n.enumerable||i.writable!==n.writable)))return!1;return!0}function v(e,t){return o(e.valueOf(),t.valueOf())}function _(e,t){return e.source===t.source&&e.flags===t.flags}function z(e,t,a){let r,i,n=e.size;if(n!==t.size)return!1;if(!n)return!0;let s=Array(n),l=e.values();for(;(r=l.next())&&!r.done;){let n=t.values(),l=!1,o=0;for(;(i=n.next())&&!i.done;){if(!s[o]&&a.equals(r.value,i.value,r.value,i.value,e,t,a)){l=s[o]=!0;break}o++}if(!l)return!1}return!0}function j(e,t){let a=e.byteLength;if(t.byteLength!==a||e.byteOffset!==t.byteOffset)return!1;for(;a-- >0;)if(e[a]!==t[a])return!1;return!0}function w(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function N(e,t,a,r){return("_owner"===r||"__o"===r||"__v"===r)&&(!!e.$$typeof||!!t.$$typeof)||l(t,r)&&a.equals(e[r],t[r],r,r,e,t,a)}let q={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},S=Object.prototype.toString,k=C();function C(e={}){let{circular:t=!1,createInternalComparator:a,createState:r,strict:s=!1}=e,l=function({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:a,areDatesEqual:r,areErrorsEqual:i,areFunctionsEqual:n,areMapsEqual:s,areNumbersEqual:l,areObjectsEqual:o,arePrimitiveWrappersEqual:d,areRegExpsEqual:u,areSetsEqual:c,areTypedArraysEqual:m,areUrlsEqual:p,unknownTagComparators:g}){return function(f,h,x){if(f===h)return!0;if(null==f||null==h)return!1;let b=typeof f;if(b!==typeof h)return!1;if("object"!==b)return"number"===b?l(f,h,x):"function"===b&&n(f,h,x);let y=f.constructor;if(y!==h.constructor)return!1;if(y===Object)return o(f,h,x);if(Array.isArray(f))return t(f,h,x);if(y===Date)return r(f,h,x);if(y===RegExp)return u(f,h,x);if(y===Map)return s(f,h,x);if(y===Set)return c(f,h,x);let v=S.call(f);if("[object Date]"===v)return r(f,h,x);if("[object RegExp]"===v)return u(f,h,x);if("[object Map]"===v)return s(f,h,x);if("[object Set]"===v)return c(f,h,x);if("[object Object]"===v)return"function"!=typeof f.then&&"function"!=typeof h.then&&o(f,h,x);if("[object URL]"===v)return p(f,h,x);if("[object Error]"===v)return i(f,h,x);if("[object Arguments]"===v)return o(f,h,x);if(q[v])return m(f,h,x);if("[object ArrayBuffer]"===v)return e(f,h,x);if("[object DataView]"===v)return a(f,h,x);if("[object Boolean]"===v||"[object Number]"===v||"[object String]"===v)return d(f,h,x);if(g){let e=g[v];if(!e){let t=null!=f?f[Symbol.toStringTag]:void 0;t&&(e=g[t])}if(e)return e(f,h,x)}return!1}}(function({circular:e,createCustomConfig:t,strict:a}){let r={areArrayBuffersEqual:c,areArraysEqual:a?y:m,areDataViewsEqual:p,areDatesEqual:g,areErrorsEqual:f,areFunctionsEqual:h,areMapsEqual:a?i(x,y):x,areNumbersEqual:o,areObjectsEqual:a?y:b,arePrimitiveWrappersEqual:v,areRegExpsEqual:_,areSetsEqual:a?i(z,y):z,areTypedArraysEqual:a?i(j,y):j,areUrlsEqual:w,unknownTagComparators:void 0};if(t&&(r=Object.assign({},r,t(r))),e){let e=n(r.areArraysEqual),t=n(r.areMapsEqual),a=n(r.areObjectsEqual),i=n(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:e,areMapsEqual:t,areObjectsEqual:a,areSetsEqual:i})}return r}(e)),d=a?a(l):function(e,t,a,r,i,n,s){return l(e,t,s)};return function({circular:e,comparator:t,createState:a,equals:r,strict:i}){if(a)return function(n,s){let{cache:l=e?new WeakMap:void 0,meta:o}=a();return t(n,s,{cache:l,equals:r,meta:o,strict:i})};if(e)return function(e,a){return t(e,a,{cache:new WeakMap,equals:r,meta:void 0,strict:i})};let n={cache:void 0,equals:r,meta:void 0,strict:i};return function(e,a){return t(e,a,n)}}({circular:t,comparator:l,createState:r,equals:d,strict:s})}C({strict:!0}),C({circular:!0}),C({circular:!0,strict:!0}),C({createInternalComparator:()=>o}),C({strict:!0,createInternalComparator:()=>o}),C({circular:!0,createInternalComparator:()=>o}),C({circular:!0,createInternalComparator:()=>o,strict:!0}),e.s(["deepEqual",()=>k])},270397,e=>{"use strict";var t=e.i(843476);e.i(882205);var a=e.i(846932),r=e.i(647163);function i({children:e,title:i,subtitle:n,className:s,variant:l="default"}){return(0,t.jsxs)(a.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:[.16,1,.3,1]},className:(0,r.cn)("chart-container-premium rounded-2xl p-6 md:p-8","transition-all duration-500 ease-out","hover:shadow-ultra hover:scale-[1.01]","relative overflow-hidden",{default:"bg-white border border-bg-gray-200",glass:"glass-morphism border border-white/20",dark:"bg-bg-gray-50 border border-bg-gray-200 backdrop-blur-xl"}[l],s),children:[(0,t.jsx)("div",{className:"absolute inset-0 opacity-0 hover:opacity-100 transition-opacity duration-700 pointer-events-none",children:(0,t.jsx)("div",{className:"absolute top-0 right-0 w-96 h-96 bg-gradient-to-br from-brand-blue-ghost via-brand-cyan-ghost to-transparent rounded-full blur-3xl animate-pulse"})}),(i||n)&&(0,t.jsxs)("div",{className:"mb-6 relative z-10",children:[i&&(0,t.jsx)("h3",{className:"text-xl md:text-2xl font-display font-bold text-text-primary mb-2",children:i}),n&&(0,t.jsx)("p",{className:"text-sm text-text-tertiary font-medium",children:n})]}),(0,t.jsx)("div",{className:"relative z-10",children:e})]})}e.s(["PremiumChartContainer",()=>i])},314643,e=>{"use strict";var t=e.i(843476),a=e.i(271645),r=e.i(841891),i=e.i(438814),n=e.i(322787),s=e.i(731195),l=e.i(234239),o=e.i(559559),d=e.i(239425);e.i(882205);var u=e.i(846932),c=e.i(270397);let m=e=>{let{cx:a,cy:r,innerRadius:i,outerRadius:n,startAngle:s,endAngle:l,fill:o,payload:u,percent:c,value:m}=e;return(0,t.jsxs)("g",{children:[(0,t.jsx)("text",{x:a,y:r,dy:-10,textAnchor:"middle",fill:"#1F2937",className:"text-xl font-bold",style:{fontSize:"24px"},children:u.name}),(0,t.jsx)("text",{x:a,y:r,dy:20,textAnchor:"middle",fill:"#6B7280",className:"text-sm font-medium",children:`${(100*c).toFixed(1)}%`}),(0,t.jsx)(d.Sector,{cx:a,cy:r,innerRadius:i,outerRadius:n+10,startAngle:s,endAngle:l,fill:o,cornerRadius:8}),(0,t.jsx)(d.Sector,{cx:a,cy:r,startAngle:s,endAngle:l,innerRadius:n+12,outerRadius:n+15,fill:o,opacity:.3,cornerRadius:4})]})};function p({data:e,title:d,subtitle:p,colors:g=["#335ACF","#34B9EE","#3B82F6","#8B5CF6","#EF4444","#94a3b8"],className:f,variant:h="default",innerRadius:x=70,outerRadius:b=100}){let[y,v]=(0,a.useState)(0),_=e.reduce((e,t)=>e+t.value,0),z=e.map((e,t)=>({...e,total:_,fill:g[t%g.length]}));return(0,t.jsx)(c.PremiumChartContainer,{title:d,subtitle:p,variant:h,className:f,children:(0,t.jsx)(s.ResponsiveContainer,{width:"100%",height:"100%",minHeight:300,children:(0,t.jsxs)(r.PieChart,{children:[(0,t.jsxs)("defs",{children:[z.map((e,a)=>(0,t.jsxs)("linearGradient",{id:`pieGradient-${a}`,x1:"0",y1:"0",x2:"1",y2:"1",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:e.fill,stopOpacity:1}),(0,t.jsx)("stop",{offset:"100%",stopColor:e.fill,stopOpacity:.85})]},`pieGradient-${a}`)),(0,t.jsx)("filter",{id:"pieShadow",height:"150%",children:(0,t.jsx)("feDropShadow",{dx:"0",dy:"4",stdDeviation:"6",floodColor:"#000",floodOpacity:"0.15"})})]}),(0,t.jsx)(i.Pie,{activeIndex:y,activeShape:m,onMouseEnter:(e,t)=>{v(t)},data:z,cx:"50%",cy:"50%",innerRadius:x,outerRadius:b,paddingAngle:4,dataKey:"value",stroke:"none",animationBegin:0,animationDuration:1e3,animationEasing:"ease-out",filter:"url(#pieShadow)",children:z.map((e,a)=>(0,t.jsx)(n.Cell,{fill:`url(#pieGradient-${a})`,stroke:"none"},`cell-${a}`))}),(0,t.jsx)(l.Tooltip,{content:(0,t.jsx)(({active:e,payload:a})=>{if(e&&a&&a.length){let e=a[0],r=e.payload?.total||e.value,i=(e.value/r*100).toFixed(1);return(0,t.jsxs)(u.motion.div,{initial:{opacity:0,scale:.9,y:10},animate:{opacity:1,scale:1,y:0},className:"bg-white/90 backdrop-blur-xl border border-white/20 shadow-[0_8px_30px_rgb(0,0,0,0.12)] rounded-2xl p-4 min-w-[140px]",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full shadow-md",style:{backgroundColor:e.payload?.fill||"#335ACF"}}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-600 uppercase tracking-wider",children:e.name})]}),(0,t.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,t.jsx)("span",{className:"text-2xl font-bold text-gray-900",children:e.value.toLocaleString("fr-FR")}),(0,t.jsxs)("span",{className:"text-sm font-medium text-gray-400",children:["(",i,"%)"]})]})]})}return null},{})}),(0,t.jsx)(o.Legend,{verticalAlign:"bottom",height:36,iconType:"circle",iconSize:8,wrapperStyle:{paddingTop:"20px",fontSize:"12px",fontWeight:500,color:"#4B5563"},formatter:e=>(0,t.jsx)("span",{className:"ml-1 text-gray-600",children:e})})]})})})}e.s(["PremiumPieChart",()=>p])},178088,e=>{"use strict";var t=e.i(920755);let a=new class{supabase;constructor(e){this.supabase=e||(0,t.createClient)()}async getAll(e,t){let a=this.supabase.from("grades").select(`
        *,
        students(id, first_name, last_name, student_number),
        sessions(id, name, formations(name, programs(name))),
        users(id, full_name)
      `).eq("organization_id",e).order("graded_at",{ascending:!1});t?.sessionId&&(a=a.eq("session_id",t.sessionId)),t?.studentId&&(a=a.eq("student_id",t.studentId)),t?.subject&&(a=a.ilike("subject",`%${t.subject}%`)),t?.assessmentType&&(a=a.eq("assessment_type",t.assessmentType)),t?.startDate&&(a=a.gte("graded_at",t.startDate)),t?.endDate&&(a=a.lte("graded_at",t.endDate)),t?.termPeriod&&(a=a.eq("term_period",t.termPeriod)),t?.academicYearId&&(a=a.eq("academic_year_id",t.academicYearId)),t?.isMakeup!==void 0&&(a=a.eq("is_makeup",t.isMakeup));let{data:r,error:i}=await a;if(i&&("PGRST116"===i.code||i.message?.includes("relationship")||i.message?.includes("Could not find")||400===i.status)){let a=this.supabase.from("grades").select("*").eq("organization_id",e).order("graded_at",{ascending:!1});t?.sessionId&&(a=a.eq("session_id",t.sessionId)),t?.studentId&&(a=a.eq("student_id",t.studentId)),t?.subject&&(a=a.ilike("subject",`%${t.subject}%`)),t?.assessmentType&&(a=a.eq("assessment_type",t.assessmentType)),t?.startDate&&(a=a.gte("graded_at",t.startDate)),t?.endDate&&(a=a.lte("graded_at",t.endDate)),t?.termPeriod&&(a=a.eq("term_period",t.termPeriod)),t?.academicYearId&&(a=a.eq("academic_year_id",t.academicYearId)),t?.isMakeup!==void 0&&(a=a.eq("is_makeup",t.isMakeup));let{data:r,error:i}=await a;if(i)throw i;return r||[]}if(i)throw i;return r||[]}async getById(e){try{let{data:t,error:a}=await this.supabase.from("grades").select(`
          *,
          students(id, first_name, last_name, student_number),
          sessions(id, name, formations(name, programs(name))),
          users(id, full_name)
        `).eq("id",e).single();if(a){if("PGRST116"===a.code||a.message?.includes("relationship")||a.message?.includes("Could not find")||400===a.status){let{data:t,error:a}=await this.supabase.from("grades").select("*").eq("id",e).single();if(a)throw a;return t}throw a}return t}catch(e){throw e}}async create(e,t){let a=t.assessment_type,r={...t,organization_id:e,assessment_type:a,coefficient:t.coefficient??1,is_makeup:t.is_makeup??!1,graded_at:t.graded_at||new Date().toISOString()};delete r.percentage,Object.keys(r).forEach(e=>{void 0===r[e]&&(r[e]=null)});let i=["pre_formation","hot","cold","manager","instructor","funder","quiz","exam","project","other"];r.assessment_type&&!i.includes(r.assessment_type)&&(console.error("âŒ [EVALUATION SERVICE] assessment_type invalide:",{received:r.assessment_type,validTypes:i}),r.assessment_type="other");let{data:n,error:s}=await this.supabase.from("grades").insert(r).select("id, subject, score, max_score, percentage, organization_id, session_id, student_id, teacher_id, assessment_type, notes, graded_at, created_at").single();if(s)throw console.error("Erreur insertion Ã©valuation:",s),s;return n}async createMakeup(e,t,a){let r={...a,organization_id:e,coefficient:a.coefficient??1,is_makeup:!0,original_grade_id:t,graded_at:a.graded_at||new Date().toISOString()};delete r.percentage,Object.keys(r).forEach(e=>{void 0===r[e]&&(r[e]=null)});let{data:i,error:n}=await this.supabase.from("grades").insert(r).select("id, subject, score, max_score, percentage, organization_id, session_id, student_id, teacher_id, assessment_type, notes, graded_at, created_at").single();if(n)throw n;return i}async calculateWeightedAverage(e,t,a,r,i){let n=await this.getAll(e,{studentId:t,sessionId:a,termPeriod:r,academicYearId:i,isMakeup:!1});if(0===n.length)return null;let s=0,l=0;return(n.forEach(e=>{let t=e.coefficient||1,a=e.max_score||1,r=e.score;a>0&&null!=r&&(s+=r/a*20*t,l+=t)}),0===l)?null:Math.round(s/l*100)/100}async update(e,t){let a={...t,updated_at:new Date().toISOString()};delete a.percentage,Object.keys(a).forEach(e=>{void 0===a[e]&&delete a[e]});let{data:r,error:i}=await this.supabase.from("grades").update(a).eq("id",e).select("id, subject, score, max_score, percentage, organization_id, session_id, student_id, teacher_id, assessment_type, notes, graded_at, created_at, updated_at").single();if(i)throw i;return r}async delete(e){let{error:t}=await this.supabase.from("grades").delete().eq("id",e);if(t)throw t}async getStats(e,t){let a=await this.getAll(e,t),r={total:a.length,byType:{},averageScore:0,averagePercentage:0,bySubject:{}};if(0===a.length)return r;let i=0,n=0,s=0,l=0;return a.forEach(e=>{let t=e.assessment_type||"other";r.byType[t]=(r.byType[t]||0)+1;let a=e.subject;r.bySubject[a]||(r.bySubject[a]={count:0,average:0}),r.bySubject[a].count++,null!==e.score&&void 0!==e.score&&(i+=e.score),e.max_score&&(n+=e.max_score),null!==e.percentage&&void 0!==e.percentage&&(s+=e.percentage,l++)}),r.averageScore=n>0?i/a.length:0,r.averagePercentage=l>0?s/l:0,Object.keys(r.bySubject).forEach(e=>{let t=a.filter(t=>t.subject===e),i=t.reduce((e,t)=>e+(t.score||0),0);r.bySubject[e].average=i/t.length}),r}async createBulk(e,t){let a=t.map(t=>{let a={...t,organization_id:e,graded_at:t.graded_at||new Date().toISOString()};return delete a.percentage,Object.keys(a).forEach(e=>{void 0===a[e]&&(a[e]=null)}),a}),{data:r,error:i}=await this.supabase.from("grades").insert(a).select("*");if(i)throw i;if(!r||0===r.length)return[];try{let e=r.map(e=>e.id),{data:t,error:a}=await this.supabase.from("grades").select(`
          *,
          students(id, first_name, last_name, student_number),
          sessions(id, name),
          users(id, full_name)
        `).in("id",e);if(a)return r;return t||[]}catch{return r}}};e.s(["evaluationService",0,a])},447307,e=>{"use strict";var t=e.i(843476),a=e.i(271645),r=e.i(266027),i=e.i(954616),n=e.i(912598),s=e.i(325715),l=e.i(178088),o=e.i(920755),d=e.i(167881),u=e.i(645760),c=e.i(785817),m=e.i(107233),p=e.i(555436),g=e.i(440160),f=e.i(797548),h=e.i(37727),x=e.i(626912),b=e.i(87316),y=e.i(284614),v=e.i(810980),_=e.i(25652),z=e.i(842009),j=e.i(101523),w=e.i(436332),N=e.i(727612),q=e.i(605631),S=e.i(738308),k=e.i(503116),C=e.i(178583),L=e.i(870273);let E=(0,e.i(475254).default)("Layout",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"9",x2:"9",y1:"21",y2:"9",key:"wpwpyp"}]]);var F=e.i(522016),T=e.i(647163),A=e.i(479370),O=e.i(6799),D=e.i(653145),I=e.i(994814),P=e.i(209372),B=e.i(790224);e.i(882205);var R=e.i(846932),M=e.i(88653),U=e.i(314643);let G=[{value:"pre_formation",label:"PrÃ©-formation",icon:"ðŸ“‹"},{value:"hot",label:"Hot (Fin de formation)",icon:"ðŸ”¥"},{value:"cold",label:"Cold (3 mois aprÃ¨s)",icon:"â„ï¸"},{value:"manager",label:"Questionnaire Manager",icon:"ðŸ‘”"},{value:"instructor",label:"Questionnaire Formateur",icon:"ðŸ‘¨â€ðŸ«"},{value:"funder",label:"Questionnaire Financeur",icon:"ðŸ’°"},{value:"quiz",label:"Quiz",icon:"â“"},{value:"exam",label:"Examen",icon:"ðŸ“"},{value:"project",label:"Projet",icon:"ðŸ“"},{value:"other",label:"Autre",icon:"ðŸ“„"}];function Q(){let{user:e}=(0,s.useAuth)(),Q=(0,o.createClient)(),$=(0,n.useQueryClient)(),{addToast:K}=(0,O.useToast)(),[X,W]=(0,a.useState)(""),[V,H]=(0,a.useState)("all"),[Y,Z]=(0,a.useState)("all"),[J,ee]=(0,a.useState)("all"),[et,ea]=(0,a.useState)("all"),[er,ei]=(0,a.useState)({start:"",end:""}),[en,es]=(0,a.useState)(!1),[el,eo]=(0,a.useState)(!1),[ed,eu]=(0,a.useState)(null),{handleSubmit:ec,setValue:em,watch:ep,reset:eg}=(0,D.useForm)({resolver:(0,I.zodResolver)(P.evaluationSchema),mode:"onChange",defaultValues:{student_id:"",session_id:"",subject:"",assessment_type:"quiz",score:"",max_score:"",notes:"",graded_at:new Date().toISOString().split("T")[0]}}),ef=ep(),{data:eh}=(0,r.useQuery)({queryKey:["sessions-for-evaluations",e?.organization_id],queryFn:async()=>{if(!e?.organization_id)return[];let{data:t,error:a}=await Q.from("sessions").select("id, name, start_date, formations!inner(id, name, organization_id, programs(id, name))").eq("formations.organization_id",e.organization_id).order("start_date",{ascending:!1});if(a)throw a;return t||[]},enabled:!!e?.organization_id}),{data:ex}=(0,r.useQuery)({queryKey:["students-for-evaluations",e?.organization_id],queryFn:async()=>{if(!e?.organization_id)return[];let{data:t,error:a}=await Q.from("students").select("id, first_name, last_name, student_number").eq("organization_id",e.organization_id).eq("status","active").order("last_name");if(a)throw a;return t||[]},enabled:!!e?.organization_id}),{data:eb,isLoading:ey}=(0,r.useQuery)({queryKey:["evaluations",e?.organization_id,X,V,Y,J,et,er.start,er.end],queryFn:async()=>{if(!e?.organization_id)return[];let t={sessionId:"all"!==V?V:void 0,studentId:"all"!==Y?Y:void 0,subject:"all"!==et?et:X&&X.trim()?X.trim():void 0,assessmentType:"all"!==J?J:void 0,startDate:er.start||void 0,endDate:er.end||void 0};B.logger.debug("RÃ©cupÃ©ration des Ã©valuations",{filters:t,organizationId:e.organization_id});let a=await l.evaluationService.getAll(e.organization_id,t);return B.logger.debug("Ã‰valuations rÃ©cupÃ©rÃ©es",{count:a?.length||0,filters:t}),a},enabled:!!e?.organization_id}),{data:ev}=(0,r.useQuery)({queryKey:["evaluation-stats",e?.organization_id,V,er],queryFn:async()=>{if(!e?.organization_id)return null;let t=await l.evaluationService.getStats(e.organization_id,{sessionId:"all"!==V?V:void 0,startDate:er.start||void 0,endDate:er.end||void 0}),a=Object.entries(t.byType).map(([e,t])=>({name:G.find(t=>t.value===e)?.label||e,value:t,color:"quiz"===e?"#3B82F6":"exam"===e?"#8B5CF6":"project"===e?"#10B981":"#6B7280"})).filter(e=>e.value>0);return{...t,typeData:a}},enabled:!!e?.organization_id});eb&&Array.from(new Set(eb.map(e=>e.subject))).sort();let e_=(0,i.useMutation)({mutationFn:async t=>{if(!e?.organization_id)throw Error("Organization ID manquant");return l.evaluationService.create(e.organization_id,{...t,session_id:t.session_id||null,max_score:t.max_score?parseFloat(t.max_score):null,score:parseFloat(t.score),notes:t.notes||null,graded_at:t.graded_at||new Date().toISOString(),teacher_id:e.id})},onSuccess:async()=>{eo(!1),eg(),await $.invalidateQueries({queryKey:["evaluations"]}),await $.invalidateQueries({queryKey:["evaluation-stats"]}),K({type:"success",title:"SuccÃ¨s",description:"Ã‰valuation crÃ©Ã©e."})},onError:e=>K({type:"error",title:"Erreur",description:e.message})}),ez=(0,i.useMutation)({mutationFn:async e=>{if(!ed)throw Error("Aucune Ã©valuation sÃ©lectionnÃ©e");return l.evaluationService.update(ed.id,{...e,session_id:e.session_id||null,max_score:e.max_score?parseFloat(e.max_score):null,score:parseFloat(e.score),notes:e.notes||null,graded_at:e.graded_at||new Date().toISOString()})},onSuccess:async()=>{eu(null),eo(!1),eg(),await $.invalidateQueries({queryKey:["evaluations"]}),await $.invalidateQueries({queryKey:["evaluation-stats"]}),K({type:"success",title:"SuccÃ¨s",description:"Ã‰valuation mise Ã  jour."})},onError:e=>K({type:"error",title:"Erreur",description:e.message})}),ej=(0,i.useMutation)({mutationFn:async e=>l.evaluationService.delete(e),onSuccess:async()=>{await $.invalidateQueries({queryKey:["evaluations"]}),await $.invalidateQueries({queryKey:["evaluation-stats"]}),K({type:"success",title:"SuccÃ¨s",description:"Ã‰valuation supprimÃ©e."})},onError:e=>K({type:"error",title:"Erreur",description:e.message})}),ew=async e=>{confirm("ÃŠtes-vous sÃ»r de vouloir supprimer cette Ã©valuation ?")&&ej.mutate(e)},eN=async e=>{if(!eb||0===eb.length)return void K({type:"warning",title:"Attention",description:"Aucune donnÃ©e Ã  exporter."});try{let t=eb.map(e=>({Date:e.graded_at?(0,T.formatDate)(e.graded_at):"",Ã‰tudiant:e.students?`${e.students.first_name} ${e.students.last_name}`:"","NÂ° Ã‰tudiant":e.students?.student_number||"",Session:e.sessions?.name||"",Sujet:e.subject,Type:G.find(t=>t.value===e.assessment_type)?.label||e.assessment_type||"",Note:e.score,"Note max":e.max_score||"",Pourcentage:e.percentage?`${e.percentage}%`:"",Formateur:e.users?.full_name||"",Notes:e.notes||""}));await (0,A.exportToExcel)({filename:`evaluations_${new Date().toISOString().split("T")[0]}.xlsx`,sheetName:"Ã‰valuations",columns:[{header:"Date",key:"Date",width:12},{header:"Ã‰tudiant",key:"Ã‰tudiant",width:20},{header:"NÂ° Ã‰tudiant",key:"NÂ° Ã‰tudiant",width:15},{header:"Session",key:"Session",width:30},{header:"Sujet",key:"Sujet",width:25},{header:"Type",key:"Type",width:20},{header:"Note",key:"Note",width:10},{header:"Note max",key:"Note max",width:10},{header:"Pourcentage",key:"Pourcentage",width:12},{header:"Formateur",key:"Formateur",width:20},{header:"Notes",key:"Notes",width:30}],data:t}),K({type:"success",title:"SuccÃ¨s",description:`Export ${e.toUpperCase()} r\xe9ussi.`})}catch(e){B.logger.error("Erreur lors de l'export des Ã©valuations",{error:e}),K({type:"error",title:"Erreur",description:"Erreur lors de l'export des donnÃ©es."})}},eq={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:[.16,1,.3,1]}}};return(0,t.jsxs)(R.motion.div,{className:"space-y-8 pb-8 max-w-[1600px] mx-auto",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"visible",children:[(0,t.jsxs)(R.motion.div,{variants:eq,className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-gray-900 tracking-tight",children:"Ã‰valuations"}),(0,t.jsxs)("span",{className:"px-3 py-1 bg-brand-blue-ghost text-brand-blue rounded-full text-sm font-medium",children:[eb?.length||0," total"]})]}),(0,t.jsx)("p",{className:"text-gray-500 font-medium",children:"GÃ©rez les notes, examens et bulletins de performance"})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsx)(F.default,{href:"/dashboard/evaluations/templates",children:(0,t.jsxs)(d.Button,{variant:"outline",className:"shadow-sm hover:shadow transition-all",children:[(0,t.jsx)(E,{className:"mr-2 h-4 w-4"}),"ModÃ¨les"]})}),(0,t.jsx)(F.default,{href:"/dashboard/evaluations/report-cards",children:(0,t.jsxs)(d.Button,{variant:"outline",className:"shadow-sm hover:shadow transition-all",children:[(0,t.jsx)(C.FileText,{className:"mr-2 h-4 w-4"}),"Bulletins"]})}),(0,t.jsxs)(d.Button,{variant:"outline",onClick:()=>eN("xlsx"),className:"shadow-sm hover:shadow transition-all",children:[(0,t.jsx)(g.Download,{className:"mr-2 h-4 w-4"}),"Export"]}),(0,t.jsxs)(d.Button,{onClick:()=>{eg(),eu(null),eo(!0)},className:"shadow-lg shadow-brand-blue/20 hover:shadow-brand-blue/30 transition-all duration-300",children:[(0,t.jsx)(m.Plus,{className:"mr-2 h-4 w-4"}),"Nouvelle Ã©valuation"]})]})]}),ev&&(0,t.jsx)(c.BentoGrid,{columns:4,gap:"md",children:[{title:"Total",value:ev.total,icon:x.FileCheck,color:"text-gray-600",bg:"bg-gray-100",desc:"Ã‰valuations rÃ©alisÃ©es"},{title:"Moyenne",value:ev.averageScore.toFixed(1),icon:_.TrendingUp,color:"text-brand-blue",bg:"bg-brand-blue-ghost",desc:"Note globale moyenne"},{title:"RÃ©ussite",value:`${ev.averagePercentage.toFixed(1)}%`,icon:z.Award,color:"text-emerald-600",bg:"bg-emerald-50",desc:"Taux moyen de rÃ©ussite"},{title:"Types",value:Object.keys(ev.byType).length,icon:v.BookOpen,color:"text-purple-600",bg:"bg-purple-50",desc:"Formats diffÃ©rents"}].map((e,a)=>(0,t.jsx)(c.BentoCard,{span:1,className:"min-w-[200px]",children:(0,t.jsxs)(u.GlassCard,{variant:"premium",hoverable:!0,glow:1===a,glowColor:"rgba(59, 130, 246, 0.2)",className:"h-full p-5",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)(R.motion.div,{className:(0,T.cn)("p-2.5 rounded-xl transition-all duration-300",e.bg),whileHover:{scale:1.1,rotate:5},children:(0,t.jsx)(e.icon,{className:(0,T.cn)("h-5 w-5",e.color)})}),(0,t.jsx)("span",{className:(0,T.cn)("text-2xl font-bold",e.color),children:e.value})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-gray-700",children:e.title}),(0,t.jsx)("p",{className:"text-xs text-gray-400 mt-0.5",children:e.desc})]})]})},e.title))}),ev&&ev.typeData&&ev.typeData.length>0&&(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsx)(R.motion.div,{variants:eq,className:"h-full",children:(0,t.jsxs)(u.GlassCard,{variant:"default",className:"p-6 h-full",children:[(0,t.jsx)("div",{className:"mb-6 flex items-center justify-between",children:(0,t.jsxs)("h3",{className:"font-bold text-gray-900 flex items-center gap-2",children:[(0,t.jsx)(j.BarChart3,{className:"h-5 w-5 text-brand-blue"}),"RÃ©partition par type"]})}),(0,t.jsx)("div",{className:"h-[300px]",children:(0,t.jsx)(U.PremiumPieChart,{data:ev.typeData,colors:ev.typeData.map(e=>e.color),variant:"default",className:"h-full !p-0 !bg-transparent !border-none !shadow-none",innerRadius:70})})]})}),(0,t.jsx)(R.motion.div,{variants:eq,className:"h-full",children:(0,t.jsxs)(u.GlassCard,{variant:"default",className:"p-6 h-full flex flex-col justify-center items-center text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-brand-blue-ghost rounded-full flex items-center justify-center mb-4",children:(0,t.jsx)(L.Star,{className:"h-8 w-8 text-brand-blue"})}),(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Performance Globale"}),(0,t.jsxs)("p",{className:"text-gray-500 max-w-sm mb-6",children:["La moyenne de la classe est de ",(0,t.jsx)("span",{className:"font-bold text-gray-900",children:ev.averageScore.toFixed(1)})," avec un taux de rÃ©ussite de ",(0,t.jsxs)("span",{className:"font-bold text-emerald-600",children:[ev.averagePercentage.toFixed(1),"%"]}),"."]}),(0,t.jsx)("div",{className:"w-full max-w-xs bg-gray-100 rounded-full h-3 overflow-hidden",children:(0,t.jsx)(R.motion.div,{initial:{width:0},animate:{width:`${ev.averagePercentage}%`},transition:{duration:1,delay:.5},className:"h-full bg-gradient-to-r from-brand-blue to-brand-cyan"})})]})})]}),(0,t.jsx)(R.motion.div,{variants:eq,children:(0,t.jsxs)(u.GlassCard,{variant:"default",className:"p-2",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-2",children:[(0,t.jsxs)("div",{className:"relative flex-1 group",children:[(0,t.jsx)(p.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 group-focus-within:text-brand-blue transition-colors"}),(0,t.jsx)("input",{type:"text",placeholder:"Rechercher sujet, Ã©tudiant...",value:X,onChange:e=>W(e.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-lg bg-gray-50 border-transparent focus:bg-white focus:border-brand-blue/20 focus:ring-4 focus:ring-brand-blue/10 transition-all outline-none text-sm"})]}),(0,t.jsxs)(d.Button,{variant:"ghost",onClick:()=>es(!en),className:(0,T.cn)("gap-2 transition-all",en?"bg-brand-blue-ghost text-brand-blue":"text-gray-600 hover:bg-gray-50"),children:[(0,t.jsx)(f.Filter,{className:"h-4 w-4"}),"Filtres avancÃ©s"]}),("all"!==V||"all"!==Y||"all"!==J||"all"!==et)&&(0,t.jsxs)(d.Button,{variant:"ghost",onClick:()=>{H("all"),Z("all"),ee("all"),ea("all"),W("")},className:"text-red-500 hover:text-red-600 hover:bg-red-50",children:[(0,t.jsx)(h.X,{className:"h-4 w-4 mr-2"}),"Effacer"]})]}),(0,t.jsx)(M.AnimatePresence,{children:en&&(0,t.jsx)(R.motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:(0,t.jsxs)("div",{className:"p-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 border-t border-gray-100 mt-2",children:[(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Session"}),(0,t.jsxs)("select",{value:V,onChange:e=>H(e.target.value),className:"w-full px-3 py-2 rounded-lg bg-gray-50 border-transparent focus:bg-white focus:border-brand-blue/20 focus:ring-2 focus:ring-brand-blue/10 outline-none text-sm transition-all",children:[(0,t.jsx)("option",{value:"all",children:"Toutes"}),eh?.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,t.jsxs)("select",{value:J,onChange:e=>ee(e.target.value),className:"w-full px-3 py-2 rounded-lg bg-gray-50 border-transparent focus:bg-white focus:border-brand-blue/20 focus:ring-2 focus:ring-brand-blue/10 outline-none text-sm transition-all",children:[(0,t.jsx)("option",{value:"all",children:"Tous"}),G.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))]})]})]})})})]})}),(0,t.jsx)(R.motion.div,{variants:eq,children:ey?(0,t.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,a)=>(0,t.jsx)("div",{className:"h-20 bg-gray-100 rounded-xl animate-pulse"},a))}):eb&&0!==eb.length?(0,t.jsx)(u.GlassCard,{variant:"default",className:"overflow-hidden p-0",children:(0,t.jsx)("div",{className:"divide-y divide-gray-100",children:eb.map(e=>{var a,r;let i=e.students;e.sessions;let n=G.find(t=>t.value===e.assessment_type);return(0,t.jsxs)(R.motion.div,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},className:"p-4 hover:bg-gray-50/50 transition-colors flex items-center justify-between group",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[(0,t.jsx)("div",{className:"h-12 w-12 rounded-xl bg-gray-100 flex items-center justify-center text-2xl",children:n?.icon||"ðŸ“„"}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("h3",{className:"font-bold text-gray-900 truncate",children:e.subject}),n&&(0,t.jsx)("span",{className:"px-2 py-0.5 text-xs bg-gray-100 text-gray-600 rounded-md font-medium",children:n.label})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[i&&(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)(y.User,{className:"h-3.5 w-3.5"}),(0,t.jsxs)("span",{className:"font-medium text-gray-700",children:[i.first_name," ",i.last_name]})]}),e.graded_at&&(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)(b.Calendar,{className:"h-3.5 w-3.5"}),(0,t.jsx)("span",{children:(0,T.formatDate)(e.graded_at)})]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-6",children:[(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 justify-end",children:[(0,t.jsxs)("span",{className:"text-lg font-bold text-gray-900",children:[e.score,e.max_score&&(0,t.jsxs)("span",{className:"text-gray-400 text-sm font-normal",children:["/",e.max_score]})]}),null===(a=e.percentage)?(0,t.jsx)(k.Clock,{className:"h-4 w-4"}):a>=80?(0,t.jsx)(z.Award,{className:"h-4 w-4 text-brand-blue"}):a>=60?(0,t.jsx)(q.CheckCircle,{className:"h-4 w-4 text-brand-cyan"}):(0,t.jsx)(S.XCircle,{className:"h-4 w-4 text-red-600"})]}),null!==e.percentage&&(0,t.jsxs)("p",{className:(0,T.cn)("text-xs font-medium",null===(r=e.percentage)?"text-gray-500":r>=80?"text-brand-blue":r>=60?"text-brand-cyan":"text-red-600"),children:[e.percentage,"% rÃ©ussite"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,t.jsx)(d.Button,{variant:"ghost",size:"icon",onClick:()=>{eu(e),em("student_id",e.student_id||""),em("session_id",e.session_id||""),em("subject",e.subject),em("assessment_type",e.assessment_type||"quiz"),em("score",e.score?.toString()||""),em("max_score",e.max_score?.toString()||""),em("notes",e.notes||""),em("graded_at",e.graded_at?e.graded_at.split("T")[0]:new Date().toISOString().split("T")[0]),eo(!0)},className:"h-8 w-8 text-gray-500 hover:text-brand-blue hover:bg-brand-blue-ghost",children:(0,t.jsx)(w.Edit,{className:"h-4 w-4"})}),(0,t.jsx)(d.Button,{variant:"ghost",size:"icon",onClick:()=>ew(e.id),className:"h-8 w-8 text-gray-500 hover:text-red-600 hover:bg-red-50",children:(0,t.jsx)(N.Trash2,{className:"h-4 w-4"})})]})]})]},e.id)})})}):(0,t.jsxs)(u.GlassCard,{variant:"default",className:"p-12 text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(x.FileCheck,{className:"h-8 w-8 text-gray-400"})}),(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:"Aucune Ã©valuation trouvÃ©e"}),(0,t.jsx)("p",{className:"text-gray-500 mb-6",children:"Commencez par crÃ©er une Ã©valuation pour un Ã©tudiant."}),(0,t.jsxs)(d.Button,{onClick:()=>{eg(),eu(null),eo(!0)},children:[(0,t.jsx)(m.Plus,{className:"mr-2 h-4 w-4"}),"Nouvelle Ã©valuation"]})]})}),(0,t.jsx)(M.AnimatePresence,{children:el&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:(0,t.jsxs)(R.motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"w-full max-w-2xl bg-white rounded-2xl shadow-2xl overflow-hidden",children:[(0,t.jsxs)("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:ed?"Modifier l'Ã©valuation":"Nouvelle Ã©valuation"}),(0,t.jsx)(d.Button,{variant:"ghost",size:"icon",onClick:()=>eo(!1),children:(0,t.jsx)(h.X,{className:"h-5 w-5"})})]}),(0,t.jsx)("div",{className:"p-6 max-h-[80vh] overflow-y-auto",children:(0,t.jsxs)("form",{onSubmit:ec(e=>{ed?ez.mutate(e):e_.mutate(e)}),className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Ã‰tudiant *"}),(0,t.jsxs)("select",{value:ef.student_id||"",onChange:e=>em("student_id",e.target.value),className:"w-full px-4 py-2.5 rounded-lg border border-gray-200 focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue outline-none transition-all",required:!0,children:[(0,t.jsx)("option",{value:"",children:"SÃ©lectionner un Ã©tudiant"}),ex?.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.first_name," ",e.last_name," (",e.student_number,")"]},e.id))]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Session"}),(0,t.jsxs)("select",{value:ef.session_id||"",onChange:e=>em("session_id",e.target.value),className:"w-full px-4 py-2.5 rounded-lg border border-gray-200 focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue outline-none transition-all",children:[(0,t.jsx)("option",{value:"",children:"Aucune session"}),eh?.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Sujet *"}),(0,t.jsx)("input",{type:"text",value:ef.subject||"",onChange:e=>em("subject",e.target.value),className:"w-full px-4 py-2.5 rounded-lg border border-gray-200 focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue outline-none transition-all",placeholder:"Ex: MathÃ©matiques, FranÃ§ais...",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Type d'Ã©valuation *"}),(0,t.jsx)("select",{value:ef.assessment_type||"quiz",onChange:e=>em("assessment_type",e.target.value),className:"w-full px-4 py-2.5 rounded-lg border border-gray-200 focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue outline-none transition-all",required:!0,children:G.map(e=>(0,t.jsxs)("option",{value:e.value,children:[e.icon," ",e.label]},e.value))})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Note *"}),(0,t.jsx)("input",{type:"number",step:"0.01",value:ef.score||"",onChange:e=>em("score",e.target.value),className:"w-full px-4 py-2.5 rounded-lg border border-gray-200 focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue outline-none transition-all",placeholder:"0",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Note maximale"}),(0,t.jsx)("input",{type:"number",step:"0.01",value:ef.max_score||"",onChange:e=>em("max_score",e.target.value),className:"w-full px-4 py-2.5 rounded-lg border border-gray-200 focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue outline-none transition-all",placeholder:"20"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Date d'Ã©valuation *"}),(0,t.jsx)("input",{type:"date",value:ef.graded_at||"",onChange:e=>em("graded_at",e.target.value),className:"w-full px-4 py-2.5 rounded-lg border border-gray-200 focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue outline-none transition-all",required:!0})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Notes / Commentaires"}),(0,t.jsx)("textarea",{value:ef.notes||"",onChange:e=>em("notes",e.target.value),className:"w-full px-4 py-2.5 rounded-lg border border-gray-200 focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue outline-none transition-all",rows:3,placeholder:"Commentaires additionnels sur la performance..."})]}),(0,t.jsxs)("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-gray-100",children:[(0,t.jsx)(d.Button,{type:"button",variant:"ghost",onClick:()=>eo(!1),children:"Annuler"}),(0,t.jsx)(d.Button,{type:"submit",disabled:e_.isPending||ez.isPending,className:"shadow-lg shadow-brand-blue/20",children:ed?"Mettre Ã  jour":"CrÃ©er l'Ã©valuation"})]})]})})]})})})]})}e.s(["default",()=>Q],447307)}]);