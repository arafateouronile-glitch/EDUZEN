(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,107233,e=>{"use strict";let s=(0,e.i(475254).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>s],107233)},292364,e=>{"use strict";var s=e.i(843476),t=e.i(970065),a=e.i(167881),r=e.i(107233),n=e.i(37727),l=e.i(191741),i=e.i(647163);let d=[{id:"preformation",title:"Évaluation préformation pour les apprenants",description:"Sondez les attentes et diagnostiquez le besoin avant la session.",subject:"Évaluation préformation"},{id:"a_chaud",title:"Évaluation à chaud pour les apprenants",description:"Envoyez une évaluation dématérialisée à l'apprenant pour qu'il note à chaud la formation.",subject:"Évaluation à chaud"},{id:"a_froid",title:"Évaluation à froid pour les apprenants",description:"Mesurez l'impact professionnel de la formation pour entrer dans une démarche qualité quantitative.",subject:"Évaluation à froid"},{id:"managers",title:"Questionnaire pour les managers des apprenants",description:"Impliquez les prescripteurs de la formation dans votre démarche qualité.",subject:"Questionnaire managers"},{id:"intervenants",title:"Questionnaire pour les intervenants",description:"Demandez aux intervenants d'évaluer la session.",subject:"Questionnaire intervenants"}];function o({grades:e=[],gradesStats:o,students:c=[],showEvaluationForm:u,evaluationForm:m,onEvaluationFormChange:x,onCreateEvaluation:p,createEvaluationMutation:g,onCloseEvaluationForm:h,onShowEvaluationForm:j}){return(0,s.jsxs)("div",{className:"space-y-6",children:[u&&(0,s.jsxs)(t.Card,{children:[(0,s.jsx)(t.CardHeader,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(t.CardTitle,{children:"Créer une évaluation"}),(0,s.jsx)(a.Button,{variant:"ghost",size:"icon",onClick:h,children:(0,s.jsx)(n.X,{className:"h-4 w-4"})})]})}),(0,s.jsx)(t.CardContent,{children:(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),p()},className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Sujet *"}),(0,s.jsx)("input",{type:"text",value:m.subject,onChange:e=>x({...m,subject:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Ex: Évaluation de fin de module",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Élève (optionnel)"}),(0,s.jsxs)("select",{value:m.student_id||"",onChange:e=>x({...m,student_id:e.target.value||void 0}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",children:[(0,s.jsx)("option",{value:"",children:"Tous les apprenants (évaluation collective)"}),c.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.first_name," ",e.last_name," (",e.student_number,")"]},e.id))]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Note (optionnel)"}),(0,s.jsx)("input",{type:"number",step:"0.01",min:"0",value:m.score,onChange:e=>{let s=e.target.value,t=parseFloat(m.max_score)||20,a=s&&t?Math.round(parseFloat(s)/t*100).toString():"";x({...m,score:s,percentage:m.percentage||a})},className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Laisser vide si la note sera calculée plus tard"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"La note peut être ajoutée plus tard après correction"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Note maximale (optionnel)"}),(0,s.jsx)("input",{type:"number",step:"0.01",min:"1",value:m.max_score,onChange:e=>{let s=parseFloat(e.target.value)||20,t=parseFloat(m.score)||0,a=t&&s?Math.round(t/s*100).toString():"";x({...m,max_score:e.target.value,percentage:m.percentage||a})},className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"20"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Par défaut : 20 points"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Pourcentage (optionnel)"}),(0,s.jsx)("input",{type:"number",step:"0.01",min:"0",max:"100",value:m.percentage,onChange:e=>x({...m,percentage:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Calculé automatiquement si vide"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Si vide, le pourcentage sera calculé automatiquement (note / note max × 100)"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Date de correction"}),(0,s.jsx)("input",{type:"date",value:m.graded_at,onChange:e=>x({...m,graded_at:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Notes/Commentaires (optionnel)"}),(0,s.jsx)("textarea",{value:m.notes,onChange:e=>x({...m,notes:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",rows:4,placeholder:"Ajoutez des commentaires, observations ou remarques sur cette évaluation..."})]}),g.error&&(0,s.jsx)("div",{className:"bg-destructive/10 text-destructive px-4 py-3 rounded-lg text-sm",children:g.error instanceof Error?g.error.message:"Une erreur est survenue"}),(0,s.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,s.jsx)(a.Button,{type:"button",variant:"outline",onClick:h,children:"Annuler"}),(0,s.jsx)(a.Button,{type:"submit",disabled:g.isPending,children:g.isPending?"Création...":"Créer l'évaluation"})]})]})})]}),e.length>0&&(0,s.jsxs)(t.Card,{children:[(0,s.jsx)(t.CardHeader,{children:(0,s.jsx)(t.CardTitle,{className:"text-lg",children:"Statistiques des évaluations"})}),(0,s.jsx)(t.CardContent,{children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:e.length}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Évaluations totales"})]}),(0,s.jsxs)("div",{className:"text-center p-4 bg-brand-blue-ghost rounded-lg",children:[(0,s.jsxs)("p",{className:"text-2xl font-bold text-brand-blue",children:[o?.average?.toFixed(2)||"0","/",o?.averagePercentage?Math.round(o.average*(100/o.averagePercentage)):20]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Note moyenne"})]}),(0,s.jsxs)("div",{className:"text-center p-4 bg-brand-cyan-ghost rounded-lg",children:[(0,s.jsxs)("p",{className:"text-2xl font-bold text-brand-cyan",children:[o?.averagePercentage?.toFixed(1)||0,"%"]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Moyenne en %"})]}),(0,s.jsxs)("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:e.filter(e=>e.graded_at).length}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Corrigées"})]})]})})]}),e.length>0&&(0,s.jsxs)(t.Card,{children:[(0,s.jsx)(t.CardHeader,{children:(0,s.jsxs)(t.CardTitle,{className:"text-lg flex items-center justify-between",children:[(0,s.jsx)("span",{children:"Évaluations enregistrées"}),(0,s.jsxs)(a.Button,{variant:"outline",size:"sm",onClick:()=>j("evaluation_generale","Évaluation générale"),children:[(0,s.jsx)(r.Plus,{className:"h-4 w-4 mr-2"}),"Nouvelle évaluation"]})]})}),(0,s.jsx)(t.CardContent,{children:(0,s.jsx)("div",{className:"space-y-3",children:e.map(e=>{let t=e.students;return(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:(0,s.jsx)(l.ClipboardList,{className:"h-5 w-5 text-primary"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:e.subject}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:[t?`${t.first_name} ${t.last_name}`:"Évaluation collective"," • ",e.assessment_type||"Évaluation",e.graded_at&&` • ${(0,i.formatDate)(e.graded_at)}`]})]})]})}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"font-bold text-lg",children:[e.score,"/",e.max_score||20]}),null!==e.percentage&&(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.percentage,"%"]})]})]},e.id)})})})]}),(0,s.jsxs)(t.Card,{children:[(0,s.jsx)(t.CardHeader,{children:(0,s.jsx)(t.CardTitle,{children:"Types d'évaluations disponibles"})}),(0,s.jsx)(t.CardContent,{className:"space-y-4",children:(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.map(e=>(0,s.jsxs)(t.Card,{children:[(0,s.jsx)(t.CardHeader,{children:(0,s.jsx)(t.CardTitle,{className:"text-base",children:e.title})}),(0,s.jsxs)(t.CardContent,{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:e.description}),(0,s.jsxs)(a.Button,{variant:"outline",size:"sm",className:"w-full",onClick:()=>j(e.id,e.subject),children:[(0,s.jsx)(r.Plus,{className:"mr-2 h-4 w-4"}),"Créer une ",e.subject.toLowerCase()]})]})]},e.id))})})]})]})}e.s(["GestionEvaluations",()=>o])}]);